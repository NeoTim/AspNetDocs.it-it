---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
title: Modello di lavoro incentrato sulle code (creazione di App Cloud funzionanti con Azure) | Microsoft Docs
author: MikeWasson
description: La creazione Real World di App Cloud con e-book Azure si basa su una presentazione sviluppata da Scott Guthrie. Viene spiegato 13 modelli e procedure consigliate che egli può...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: cc1ad51b-40c3-4c68-8620-9aaa0fd1f6cf
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
msc.type: authoredcontent
ms.openlocfilehash: 9081691207a1a8ccd58e1a93a0be06af15c0b2d0
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2019
ms.locfileid: "65118721"
---
# <a name="queue-centric-work-pattern-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="ff8d4-104">Modello di lavoro incentrato sulle code (creazione di App Cloud funzionanti con Azure)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-104">Queue-Centric Work Pattern (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="ff8d4-105">dal [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="ff8d4-106">[Download risolverlo Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) o [Scarica l'E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="ff8d4-107">Il **creazione Real World di App Cloud con Azure** eBook si basa su una presentazione sviluppata da Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="ff8d4-108">Viene illustrato 13 modelli e procedure consigliate che consentono di avere esito positivo lo sviluppo di App web per il cloud.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="ff8d4-109">Per informazioni sull'e-book, vedere [capitolo prima](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="ff8d4-110">Versioni precedenti, abbiamo visto che con più servizi può comportare un contratto di servizio "composto", in cui contratto di servizio effettivo dell'app è il *prodotto* singoli contratti di servizio.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-110">Earlier, we saw that using multiple services can result in a "composite" SLA, where the app's effective SLA is the *product* of the individual SLAs.</span></span> <span data-ttu-id="ff8d4-111">Ad esempio, l'app Fix It Usa siti Web, archiviazione e Database SQL.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-111">For example, the Fix It app uses Web Sites, Storage, and SQL Database.</span></span> <span data-ttu-id="ff8d4-112">Se uno di questi servizi non riesce, l'app restituirà un errore all'utente.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-112">If any one of these services fails, the app will return an error to the user.</span></span>

<span data-ttu-id="ff8d4-113">La memorizzazione nella cache è un buon metodo per gestire gli errori temporanei per il contenuto di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-113">Caching is a good way to handle transient failures for read-only content.</span></span> <span data-ttu-id="ff8d4-114">Ma cosa accade se l'applicazione deve eseguire le operazioni?</span><span class="sxs-lookup"><span data-stu-id="ff8d4-114">But what if your application needs to do work?</span></span> <span data-ttu-id="ff8d4-115">Ad esempio, quando l'utente invia un'attività nuova Fix It, l'app non è sufficiente inserire l'attività nella cache.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-115">For example, when the user submits a new Fix It task, the app can't just put the task into the cache.</span></span> <span data-ttu-id="ff8d4-116">L'app deve scrivere l'attività Fix It in un archivio dati permanente, in modo che possa essere elaborato.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-116">The app needs to write the Fix It task into a persistent data store, so it can be processed.</span></span>

<span data-ttu-id="ff8d4-117">Questo è il modello di lavoro incentrato sulle code entra in gioco.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-117">That's where the queue-centric work pattern comes in.</span></span> <span data-ttu-id="ff8d4-118">Questo modello consente a regime di controllo libero tra un livello web e un servizio back-end.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-118">This pattern enables loose coupling between a web tier and a backend service.</span></span>

<span data-ttu-id="ff8d4-119">Ecco come funziona il modello.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-119">Here's how the pattern works.</span></span> <span data-ttu-id="ff8d4-120">Quando l'applicazione riceve una richiesta, inserisce un elemento di lavoro in una coda e la risposta viene restituito immediatamente.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-120">When the application gets a request, it puts a work item onto a queue and immediately returns the response.</span></span> <span data-ttu-id="ff8d4-121">Quindi un processo di back-end separati estrae gli elementi di lavoro dalla coda ed esegue il lavoro.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-121">Then a separate backend process pulls work items from the queue and does the work.</span></span>

<span data-ttu-id="ff8d4-122">Il modello di lavoro incentrato sulle code è utile per:</span><span class="sxs-lookup"><span data-stu-id="ff8d4-122">The queue-centric work pattern is useful for:</span></span>

- <span data-ttu-id="ff8d4-123">Lavoro che è molto tempo (una latenza elevata).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-123">Work that is time consuming (high latency).</span></span>
- <span data-ttu-id="ff8d4-124">Operazioni che richiedono un servizio esterno che potrebbe non essere sempre disponibile.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-124">Work that requires an external service that might not always be available.</span></span>
- <span data-ttu-id="ff8d4-125">Il lavoro a elevato utilizzo di risorse (CPU elevato).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-125">Work that is resource-intensive (high CPU).</span></span>
- <span data-ttu-id="ff8d4-126">Lavoro che possono trarre vantaggio dalla velocità livellamento (soggetta a picchi improvvisi di carico).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-126">Work that would benefit from rate leveling (subject to sudden load bursts).</span></span>

## <a name="reduced-latency"></a><span data-ttu-id="ff8d4-127">Riduzione della latenza</span><span class="sxs-lookup"><span data-stu-id="ff8d4-127">Reduced Latency</span></span>

<span data-ttu-id="ff8d4-128">Le code sono utili ogni volta che vengono eseguite operazioni che richiedono molto tempo.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-128">Queues are useful any time you are doing time-consuming work.</span></span> <span data-ttu-id="ff8d4-129">Se un'attività richiede pochi secondi o più, anziché bloccare l'utente finale, inserita l'elemento di lavoro in una coda.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-129">If a task takes a few seconds or longer, instead of blocking the end user, put the work item into a queue.</span></span> <span data-ttu-id="ff8d4-130">Informare l'utente "Ci stiamo lavorando" e quindi usare un listener della coda per elaborare l'attività in background.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-130">Tell the user "We're working on it," and then use a queue listener to process the task in the background.</span></span>

<span data-ttu-id="ff8d4-131">Ad esempio, quando si acquista un articolo in un punto vendita online, il sito web viene confermato il tuo ordine immediatamente.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-131">For example, when you purchase something at an online retailer, the web site confirms your order immediately.</span></span> <span data-ttu-id="ff8d4-132">Ma ciò non significa che le opzioni è già in un autocarro recapitato.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-132">But that doesn't mean your stuff is already in a truck being delivered.</span></span> <span data-ttu-id="ff8d4-133">Un'attività da inserire in una coda e in background stanno eseguendo la verifica del credito, gli elementi di preparazione per la spedizione e così via.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-133">They put a task in a queue, and in the background they are doing the credit check, preparing your items for shipping, and so forth.</span></span>

<span data-ttu-id="ff8d4-134">Per gli scenari con una breve latenza, tempo totale end-to-end potrebbe essere più lungo mediante una coda, rispetto all'esecuzione delle attività in modo sincrono.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-134">For scenarios with short latency, the total end-to-end time might be longer using a queue, compared with doing the task synchronously.</span></span> <span data-ttu-id="ff8d4-135">Ma anche in questo caso gli altri vantaggi possono compensare tale svantaggio.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-135">But even then, the other benefits can outweigh that disadvantage.</span></span>

## <a name="increased-reliability"></a><span data-ttu-id="ff8d4-136">Una maggiore affidabilità</span><span class="sxs-lookup"><span data-stu-id="ff8d4-136">Increased Reliability</span></span>

<span data-ttu-id="ff8d4-137">Nella versione di Fix It che sono state state osservando finora, il front-end web è strettamente con il back-end di Database SQL.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-137">In the version of Fix It that we've been looking at so far, the web front-end is tightly coupled with the SQL Database back-end.</span></span> <span data-ttu-id="ff8d4-138">Se il servizio database SQL è disponibile, l'utente riceve un errore.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-138">If the SQL database service is unavailable, the user gets an error.</span></span> <span data-ttu-id="ff8d4-139">Se i tentativi non funzionano (vale a dire, l'errore è temporaneo più di), l'unica cosa è possibile eseguire viene visualizzato un messaggio di errore e chiedere all'utente di riprovare più tardi.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-139">If retries don't work (that is, the failure is more than transient), the only thing you can do is show an error and ask the user to try again later.</span></span>

![Diagramma che mostra front-end web non superato se back-end del Database SQL non è riuscita](queue-centric-work-pattern/_static/image1.png)

<span data-ttu-id="ff8d4-141">Uso delle code, quando un utente invia un'attività Fix It, l'app scrive un messaggio alla coda.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-141">Using queues, when a user submits a Fix It task, the app writes a message to the queue.</span></span> <span data-ttu-id="ff8d4-142">Il payload del messaggio è un [JSON](http://json.org/) rappresentazione dell'attività.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-142">The message payload is a [JSON](http://json.org/) representation of the task.</span></span> <span data-ttu-id="ff8d4-143">Non appena il messaggio viene scritto nella coda, l'app restituisce e mostra immediatamente un messaggio di conferma all'utente.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-143">As soon as the message is written to the queue, the app returns and immediately shows a success message to the user.</span></span>

<span data-ttu-id="ff8d4-144">Se i servizi back-end, ad esempio il database SQL o il listener della coda, passare alla modalità offline, gli utenti possono comunque inviare nuove attività Fix It.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-144">If any of the backend services – such as the SQL database or the queue listener -- go offline, users can still submit new Fix It tasks.</span></span> <span data-ttu-id="ff8d4-145">I messaggi verranno accodate solo fino a quando non sono disponibili anche in questo caso i servizi back-end.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-145">The messages will just queue up until the backend services are available again.</span></span> <span data-ttu-id="ff8d4-146">A questo punto, i servizi back-end verranno aggiornata nel backlog.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-146">At that point, the backend services will catch up on the backlog.</span></span>

![Diagramma che mostra web front-end continua a funzionare quando si verifica un errore di Database SQL](queue-centric-work-pattern/_static/image2.png)

<span data-ttu-id="ff8d4-148">Inoltre, ora è possibile aggiungere più logica di back-end senza doversi preoccupare di resilienza per il front-end.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-148">Moreover, now you can add more backend logic without worrying about the resiliency of the front end.</span></span> <span data-ttu-id="ff8d4-149">Ad esempio, voler inviare un messaggio di posta elettronica o messaggio SMS al proprietario, ogni volta che viene assegnato un nuovo Fix It.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-149">For example, you might want to send an email or SMS message to the owner whenever a new Fix It is assigned.</span></span> <span data-ttu-id="ff8d4-150">Se il messaggio di posta elettronica o SMS non è più disponibile, è possibile elaborare tutti gli altri elementi e quindi inserire un messaggio in una coda separata per l'invio di messaggi di posta elettronica/SMS.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-150">If the email or SMS service becomes unavailable, you can process everything else, and then put a message into a separate queue for sending email/SMS messages.</span></span>

<span data-ttu-id="ff8d4-151">In precedenza, il contratto di servizio effettivo era Web Apps &times; archiviazione &times; Database SQL = % 99,7.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-151">Previously, our effective SLA was Web Apps &times; Storage &times; SQL Database = 99.7%.</span></span> <span data-ttu-id="ff8d4-152">(Vedere [progettazione per sopravvivere a errori](design-to-survive-failures.md).)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-152">(See [Design to Survive Failures](design-to-survive-failures.md).)</span></span>

<span data-ttu-id="ff8d4-153">Quando si modifica l'app di usare una coda, il front-end web dipende solo le app Web e di archiviazione, per un contratto di servizio del 99,8% composito.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-153">When we change the app to use a queue, the web front end depends only on Web Apps and Storage, for a composite SLA of 99.8%.</span></span> <span data-ttu-id="ff8d4-154">Si noti che le code sono parte del servizio di archiviazione di Azure, pertanto vengono inclusi nel contratto di servizio stesso come risorsa di archiviazione blob.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-154">(Note that queues are part of the Azure storage service, so they are included in the same SLA as blob storage.)</span></span>

<span data-ttu-id="ff8d4-155">Se è necessario anche meglio 99,8%, è possibile creare due code in due aree diverse.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-155">If you need even better than 99.8%, you can create two queues in two different regions.</span></span> <span data-ttu-id="ff8d4-156">Designare uno come primario e l'altro come secondario.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-156">Designate one as the primary, and the other as the secondary.</span></span> <span data-ttu-id="ff8d4-157">Nell'app, eseguire il failover alla coda secondaria se la coda primaria non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-157">In your app, fail over to the secondary queue if the primary queue is not available.</span></span> <span data-ttu-id="ff8d4-158">La probabilità di entrambi è disponibile contemporaneamente è molto piccola.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-158">The chance of both being unavailable at the same time is very small.</span></span>

## <a name="rate-leveling-and-independent-scaling"></a><span data-ttu-id="ff8d4-159">Il livellamento delle velocità e scalabilità indipendente</span><span class="sxs-lookup"><span data-stu-id="ff8d4-159">Rate Leveling and Independent Scaling</span></span>

<span data-ttu-id="ff8d4-160">Le code sono utili anche per un elemento denominato *frequenza livellamento* oppure *livellamento del carico*.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-160">Queues are also useful for something called *rate leveling* or *load leveling*.</span></span>

<span data-ttu-id="ff8d4-161">Le app Web sono spesso soggette a picchi improvvisi di traffico.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-161">Web apps are often susceptible to sudden bursts in traffic.</span></span> <span data-ttu-id="ff8d4-162">Sebbene sia possibile usare la scalabilità automatica per aggiungere automaticamente i server web per gestire il traffico web un aumento, la scalabilità automatica potrebbe non essere in grado di reagire in modo sufficientemente rapido per gestire picchi improvvisi di carico.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-162">While you can use autoscaling to automatically add web servers to handle increased web traffic, autoscaling might not be able to react quickly enough to handle abrupt spikes in load.</span></span> <span data-ttu-id="ff8d4-163">Se i server web possono trasferire una parte del lavoro che sarà più possibile scrivendo un messaggio a una coda, possono gestire più traffico.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-163">If the web servers can offload some of the work they have to do by writing a message to a queue, they can handle more traffic.</span></span> <span data-ttu-id="ff8d4-164">Un servizio back-end può quindi leggere i messaggi dalla coda ed elaborarli.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-164">A backend service can then read messages from the queue and process them.</span></span> <span data-ttu-id="ff8d4-165">La profondità della coda verrà aumentare o ridurre in base alla variazione del carico in ingresso.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-165">The depth of the queue will grow or shrink as the incoming load varies.</span></span>

<span data-ttu-id="ff8d4-166">Con la maggior parte delle operazioni che richiedono molto tempo viene gestita da un servizio back-end, il livello web più facilmente può rispondere a picchi improvvisi di traffico.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-166">With much of its time-consuming work off-loaded to a backend service, the web tier can more easily respond to sudden spikes in traffic.</span></span> <span data-ttu-id="ff8d4-167">E risparmiare denaro in quanto qualsiasi quantità di traffico specificato può essere gestita da un numero inferiore di server web.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-167">And you save money because any given amount of traffic can be handled by fewer web servers.</span></span>

<span data-ttu-id="ff8d4-168">È possibile scalare il livello web e il servizio back-end in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-168">You can scale the web tier and backend service independently.</span></span> <span data-ttu-id="ff8d4-169">Ad esempio, potrebbe essere necessario ma un solo server l'elaborazione della coda dei messaggi e tre i server web.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-169">For example, you might need three web servers but only one server processing queue messages.</span></span> <span data-ttu-id="ff8d4-170">O se si esegue un'attività a elevato utilizzo di calcolo in background, potrebbe essere necessario ulteriori server di back-end.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-170">Or if you're running a compute-intensive task in the background, you might need more backend servers.</span></span>

![](queue-centric-work-pattern/_static/image3.png)

<span data-ttu-id="ff8d4-171">La scalabilità automatica funziona con i servizi back-end nonché con il livello web.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-171">Autoscaling works with backend services as well as with the web tier.</span></span> <span data-ttu-id="ff8d4-172">È possibile aumentare o ridurre il numero di macchine virtuali che elaborano le attività in coda, in base l'utilizzo della CPU di macchine virtuali di back-end.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-172">You can scale up or scale down the number of VMs that are processing the tasks in the queue, based on the CPU usage of the backend VMs.</span></span> <span data-ttu-id="ff8d4-173">In alternativa, è possibile una scalabilità automatica in base al numero di elementi presenti in una coda.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-173">Or, you can autoscale based on how many items are in a queue.</span></span> <span data-ttu-id="ff8d4-174">Ad esempio, è possibile indicare la scalabilità automatica per tentare di mantenere non più di 10 elementi nella coda.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-174">For example, you can tell autoscale to try to keep no more than 10 items in the queue.</span></span> <span data-ttu-id="ff8d4-175">Se la coda contiene più di 10 elementi, la scalabilità automatica per aggiungere le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-175">If the queue has more than 10 items, autoscale will add VMs.</span></span> <span data-ttu-id="ff8d4-176">Quando vengono aggiornati, scalabilità automatica verrà disinstallazione le macchine virtuali aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-176">When they catch up, autoscale will tear down the extra VMs.</span></span>

## <a name="adding-queues-to-the-fix-it-application"></a><span data-ttu-id="ff8d4-177">Aggiunta di lo mette in coda per la correzione dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="ff8d4-177">Adding Queues to the Fix It Application</span></span>

<span data-ttu-id="ff8d4-178">Per implementare il modello di accodamento, è necessario apportare due modifiche all'app Fix It.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-178">To implement the queue pattern, we need to make two changes to the Fix It app.</span></span>

- <span data-ttu-id="ff8d4-179">Quando un utente invia una nuova Fix It attività, inserire l'attività in coda, anziché la scrittura nel database.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-179">When a user submits a new Fix It task, put the task in the queue, instead of writing it to the database.</span></span>
- <span data-ttu-id="ff8d4-180">Creare un servizio back-end che elabora i messaggi nella coda.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-180">Create a back-end service that processes messages in the queue.</span></span>

<span data-ttu-id="ff8d4-181">Per la coda, si userà il [servizio di archiviazione code di Azure](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-181">For the queue, we'll use the [Azure Queue Storage Service](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span></span> <span data-ttu-id="ff8d4-182">Un'altra opzione consiste nell'usare [Bus di servizio di Azure](https://docs.microsoft.com/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-182">Another option is to use [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span></span>

<span data-ttu-id="ff8d4-183">Per decidere quale servizio di Accodamento da usare, considerare come l'app deve inviare e ricevere i messaggi in coda:</span><span class="sxs-lookup"><span data-stu-id="ff8d4-183">To decide which queue service to use, consider how your app needs to send and receive the messages in the queue:</span></span>

- <span data-ttu-id="ff8d4-184">Se hai che cooperano ai producer e consumer concorrenti, è consigliabile usare servizio di archiviazione code di Azure.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-184">If you have cooperating producers and competing consumers, consider using Azure Queue Storage Service.</span></span> <span data-ttu-id="ff8d4-185">"Produttori che hanno collaborato" significa che più processi sono aggiungere messaggi a una coda.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-185">"Cooperating producers" means multiple processes are adding messages to a queue.</span></span> <span data-ttu-id="ff8d4-186">"Consumer concorrente" significa che più processi esegue il pull dei messaggi dalla coda per l'elaborazione, ma ogni messaggio può essere elaborato solo da un "utente".</span><span class="sxs-lookup"><span data-stu-id="ff8d4-186">"Competing consumers" means multiple processes are pulling messages off the queue to process them, but any given message can only be processed by one "consumer."</span></span> <span data-ttu-id="ff8d4-187">Se è necessaria una velocità effettiva maggiore rispetto a cui è possibile ottenere con una singola coda, usare le code aggiuntive e/o altri account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-187">If you need more throughput than you can get with a single queue, use additional queues and/or additional storage accounts.</span></span>
- <span data-ttu-id="ff8d4-188">Se è necessario un [modello di pubblicazione/sottoscrizione](http://en.wikipedia.org/wiki/Publish/subscribe), è consigliabile usare le code del Bus di servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-188">If you need a [publish/subscribe model](http://en.wikipedia.org/wiki/Publish/subscribe), consider using Azure Service Bus Queues.</span></span>

<span data-ttu-id="ff8d4-189">L'app Fix It è appropriato per i producer che cooperano e modello di consumer concorrenti.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-189">The Fix It app fits the cooperating producers and competing consumers model.</span></span>

<span data-ttu-id="ff8d4-190">Un'altra considerazione riguarda la disponibilità dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-190">Another consideration is application availability.</span></span> <span data-ttu-id="ff8d4-191">Il servizio di archiviazione di Accodamento fa parte dello stesso servizio che viene usato per l'archiviazione blob, in modo da usarlo non ha alcun effetto sul contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-191">The Queue Storage Service is part of the same service that we're using for blob storage, so using it has no effect on our SLA.</span></span> <span data-ttu-id="ff8d4-192">Azure Service Bus è un servizio separato con il proprio contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-192">Azure Service Bus is a separate service with its own SLA.</span></span> <span data-ttu-id="ff8d4-193">Se usassimo le code del Bus di servizio, è necessario tenere in considerazione una percentuale di contratto di servizio aggiuntiva e contratto di servizio composito sarà inferiore.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-193">If we used Service Bus Queues, we would have to factor in an additional SLA percentage, and our composite SLA would be lower.</span></span> <span data-ttu-id="ff8d4-194">Quando si sceglie un servizio di accodamento, assicurarsi di che comprendere l'impatto di propria scelta sulla disponibilità dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-194">When you're choosing a queue service, make sure you understand the impact of your choice on application availability.</span></span> <span data-ttu-id="ff8d4-195">Per altre informazioni, vedere la [risorse](#resources) sezione.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-195">For more information, see the [Resources](#resources) section.</span></span>

## <a name="creating-queue-messages"></a><span data-ttu-id="ff8d4-196">Creazione di messaggi in coda</span><span class="sxs-lookup"><span data-stu-id="ff8d4-196">Creating Queue Messages</span></span>

<span data-ttu-id="ff8d4-197">Per inserire un'attività Fix It nella coda, il front-end web vengono eseguiti i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="ff8d4-197">To put a Fix It task on the queue, the web front end performs the following steps:</span></span>

1. <span data-ttu-id="ff8d4-198">Creare un [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) istanza.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-198">Create a [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instance.</span></span> <span data-ttu-id="ff8d4-199">Il `CloudQueueClient` istanza viene usata per eseguire le richieste nel servizio di Accodamento.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-199">The `CloudQueueClient` instance is used to execute requests against the Queue Service.</span></span>
2. <span data-ttu-id="ff8d4-200">Creare la coda, se non esiste ancora.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-200">Create the queue, if it doesn't exist yet.</span></span>
3. <span data-ttu-id="ff8d4-201">Serializzare l'attività Fix It.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-201">Serialize the Fix It task.</span></span>
4. <span data-ttu-id="ff8d4-202">Chiamare [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) per inserire il messaggio in coda.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-202">Call [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) to put the message onto the queue.</span></span>

<span data-ttu-id="ff8d4-203">Faremo questo lavoro nel costruttore e `SendMessageAsync` di un nuovo metodo `FixItQueueManager` classe.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-203">We'll do this work in the constructor and `SendMessageAsync` method of a new `FixItQueueManager` class.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample1.cs?highlight=11-12,16,18-25)]

<span data-ttu-id="ff8d4-204">Qui viene usato il [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) libreria per serializzare il fixit in formato JSON.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-204">Here we are using the [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library to serialize the fixit to JSON format.</span></span> <span data-ttu-id="ff8d4-205">È possibile usare qualsiasi approccio di serializzazione si preferisce.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-205">You can use whatever serialization approach you prefer.</span></span> <span data-ttu-id="ff8d4-206">JSON presenta il vantaggio di essere leggibile dall'utente, pur essendo meno dettagliati rispetto a XML.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-206">JSON has the advantage of being human-readable, while being less verbose than XML.</span></span>

<span data-ttu-id="ff8d4-207">Codice di produzione di qualità sarebbe aggiungere logica di gestione degli errori, sospendere se il database risulta non disponibile, gestione del recupero più pulito, creare la coda all'avvio dell'applicazione e gestire "[dei messaggi non elaborabili" messaggi](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-207">Production-quality code would add error handling logic, pause if the database became unavailable, handle recovery more cleanly, create the queue on application start-up, and manage "[poison" messages](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span></span> <span data-ttu-id="ff8d4-208">(Un messaggio non elaborabile è un messaggio che non può essere elaborato per qualche motivo.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-208">(A poison message is a message that cannot be processed for some reason.</span></span> <span data-ttu-id="ff8d4-209">Per evitare che i messaggi non elaborabili per entrare nella coda, in cui il ruolo di lavoro continuamente tenterà di elaborarli, esito negativo, ripetere l'operazione, esito negativo e così via.)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-209">You don't want poison messages to sit in the queue, where the worker role will continually try to process them, fail, try again, fail, and so on.)</span></span>

<span data-ttu-id="ff8d4-210">Nell'applicazione MVC front-end, è necessario aggiornare il codice che crea una nuova attività.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-210">In the front-end MVC application, we need to update the code that creates a new task.</span></span> <span data-ttu-id="ff8d4-211">Anziché inserire l'attività nel repository, chiamare il `SendMessageAsync` metodo illustrato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-211">Instead of putting the task into the repository, call the `SendMessageAsync` method shown above.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample2.cs?highlight=10)]

## <a name="processing-queue-messages"></a><span data-ttu-id="ff8d4-212">L'elaborazione dei messaggi di coda</span><span class="sxs-lookup"><span data-stu-id="ff8d4-212">Processing Queue Messages</span></span>

<span data-ttu-id="ff8d4-213">Per elaborare i messaggi nella coda, verrà creato un servizio back-end.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-213">To process messages in the queue, we'll create a backend service.</span></span> <span data-ttu-id="ff8d4-214">Il servizio back-end verrà eseguito un ciclo infinito che esegue i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="ff8d4-214">The backend service will run an infinite loop that performs the following steps:</span></span>

1. <span data-ttu-id="ff8d4-215">Ottiene il messaggio successivo dalla coda.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-215">Get the next message from the queue.</span></span>
2. <span data-ttu-id="ff8d4-216">Deserializzare il messaggio a un'attività Fix It.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-216">Deserialize the message to a Fix It task.</span></span>
3. <span data-ttu-id="ff8d4-217">Scrivere l'attività Fix It nel database.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-217">Write the Fix It task to the database.</span></span>

<span data-ttu-id="ff8d4-218">Per ospitare il servizio back-end, si creerà un servizio Cloud di Azure che contiene un *ruolo di lavoro*.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-218">To host the backend service, we'll create an Azure Cloud Service that contains a *worker role*.</span></span> <span data-ttu-id="ff8d4-219">Un ruolo di lavoro è costituito da una o più VM che possono eseguire l'elaborazione back-end.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-219">A worker role consists of one or more VMs that can do backend processing.</span></span> <span data-ttu-id="ff8d4-220">Il codice eseguito in queste macchine virtuali effettuerà il pull dei messaggi dalla coda man mano che diventano disponibili.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-220">The code that runs in these VMs will pull messages from the queue as they become available.</span></span> <span data-ttu-id="ff8d4-221">Per ogni messaggio, verrà deserializzare il payload JSON e scrivere un'istanza dell'entità di correzione, attività per il database, usando lo stesso repository che è stato usato in precedenza nel livello web.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-221">For each message, we'll deserialize the JSON payload and write an instance of the Fix It Task entity to the database, using the same repository that we used earlier in the web tier.</span></span>

<span data-ttu-id="ff8d4-222">I passaggi seguenti illustrano come aggiungere un ruolo di lavoro progetto di ruolo per una soluzione che include un progetto web standard.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-222">The following steps show how to add a worker role project to a solution that has a standard web project.</span></span> <span data-ttu-id="ff8d4-223">Questi passaggi hanno già eseguiti nel Fix It progetto che è possibile scaricare.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-223">These steps have already been done in the Fix It project that you can download.</span></span>

<span data-ttu-id="ff8d4-224">Aggiungere innanzitutto un progetto servizio Cloud alla soluzione Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-224">First add a Cloud Service project to the Visual Studio solution.</span></span> <span data-ttu-id="ff8d4-225">La soluzione e scegliere **Add**, quindi **nuovo progetto**.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-225">Right-click the solution and select **Add**, then **New Project**.</span></span> <span data-ttu-id="ff8d4-226">Nel riquadro sinistro, espandere **Visual c#** e selezionare **Cloud**.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-226">In the left pane, expand **Visual C#** and select **Cloud**.</span></span>

[![](queue-centric-work-pattern/_static/image5.png)](queue-centric-work-pattern/_static/image4.png)

<span data-ttu-id="ff8d4-227">Nel **nuovo servizio Cloud di Azure** finestra di dialogo espandere il **Visual c#** nodo nel riquadro sinistro.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-227">In the **New Azure Cloud Service** dialog, expand the **Visual C#** node on the left pane.</span></span> <span data-ttu-id="ff8d4-228">Selezionare **ruolo di lavoro** e fare clic sull'icona freccia destra.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-228">Select **Worker Role** and click the right-arrow icon.</span></span>

![](queue-centric-work-pattern/_static/image6.png)

<span data-ttu-id="ff8d4-229">(Si noti che è anche possibile aggiungere un *ruolo web*.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-229">(Notice that you can also add a *web role*.</span></span> <span data-ttu-id="ff8d4-230">È stato possibile eseguirlo il correggere front-end nello stesso servizio Cloud anziché eseguirla in un sito Web di Azure.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-230">We could run the Fix It front-end in the same Cloud Service instead of running it in an Azure Web Site.</span></span> <span data-ttu-id="ff8d4-231">Che presenta alcuni vantaggi in rendendo più semplice coordinare le connessioni tra server front-end e back-end.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-231">That has some advantages in making connections between front-end and back-end easier to coordinate.</span></span> <span data-ttu-id="ff8d4-232">Tuttavia, per mantenere semplice questa demo, abbiamo stiamo mantenendo il front-end in Azure App Service Web App e solo il back-end in esecuzione in un servizio Cloud.)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-232">However, to keep this demo simple, we're keeping the front-end in an Azure App Service Web App and only running the back-end in a Cloud Service.)</span></span>

<span data-ttu-id="ff8d4-233">Per il ruolo di lavoro viene assegnato un nome predefinito.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-233">A default name is assigned to the worker role.</span></span> <span data-ttu-id="ff8d4-234">Per modificare il nome, posizionare il mouse sopra il ruolo di lavoro nel riquadro di destra, quindi fare clic sull'icona a forma di matita.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-234">To change the name, hover the mouse over the worker role in the right pane, then click the pencil icon.</span></span>

![](queue-centric-work-pattern/_static/image7.png)

<span data-ttu-id="ff8d4-235">Fare clic su **OK** per completare la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-235">Click **OK** to complete the dialog.</span></span> <span data-ttu-id="ff8d4-236">Aggiunge due progetti alla soluzione di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-236">This adds two projects to the Visual Studio solution.</span></span>

- <span data-ttu-id="ff8d4-237">un progetto Azure che definisce il servizio cloud, incluse le informazioni di configurazione.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-237">an Azure project that defines the cloud service, including configuration information.</span></span>
- <span data-ttu-id="ff8d4-238">Un progetto di ruolo di lavoro che definisce il ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-238">A worker role project that defines the worker role.</span></span>

![](queue-centric-work-pattern/_static/image8.png)

<span data-ttu-id="ff8d4-239">Per altre informazioni, vedere [la creazione di un progetto Azure con Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-239">For more information, see [Creating an Azure Project with Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span></span>

<span data-ttu-id="ff8d4-240">All'interno del ruolo di lavoro, si esegue il polling per i messaggi chiamando il `ProcessMessageAsync` metodo di `FixItQueueManager` classe che abbiamo visto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-240">Inside the worker role, we poll for messages by calling the `ProcessMessageAsync` method of the `FixItQueueManager` class that we saw earlier.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample3.cs?highlight=25)]

<span data-ttu-id="ff8d4-241">Il `ProcessMessagesAsync` metodo verifica la presenza di un messaggio in attesa.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-241">The `ProcessMessagesAsync` method checks if there's a message waiting.</span></span> <span data-ttu-id="ff8d4-242">Se è presente uno, viene deserializzato il messaggio in un `FixItTask` entità e Salva l'entità nel database.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-242">If there is one, it deserializes the message into a `FixItTask` entity and saves the entity in the database.</span></span> <span data-ttu-id="ff8d4-243">Esegue un ciclo fino a quando la coda è vuota.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-243">It loops until the queue is empty.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample4.cs)]

<span data-ttu-id="ff8d4-244">Eseguire il polling per i messaggi in coda comporta una transazione di piccole dimensioni applicato un addebito, pertanto quando non è presente alcun messaggio in attesa di essere elaborati, il ruolo di lavoro `RunAsync` metodo attende un secondo prima di polling nuovamente chiamando `Task.Delay(1000)`.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-244">Polling for queue messages incurs a small transaction charge, so when there's no message waiting to be processed, the worker role's `RunAsync` method waits a second before polling again by calling `Task.Delay(1000)`.</span></span>

<span data-ttu-id="ff8d4-245">In un progetto web, aggiunta di codice asincrono di migliorare automaticamente le prestazioni perché IIS gestisce un pool di thread limitato.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-245">In a web project, adding asynchronous code can automatically improve performance because IIS manages a limited thread pool.</span></span> <span data-ttu-id="ff8d4-246">Ciò non avviene in un progetto di ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-246">That is not the case in a worker role project.</span></span> <span data-ttu-id="ff8d4-247">Per migliorare la scalabilità del ruolo di lavoro, è possibile scrivere il codice a thread multipli o usare codice asincrono per implementare [programmazione parallela](https://msdn.microsoft.com/library/ff963553.aspx).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-247">To improve scalability of the worker role, you can write multi-threaded code or use asynchronous code to implement [parallel programming](https://msdn.microsoft.com/library/ff963553.aspx).</span></span> <span data-ttu-id="ff8d4-248">L'esempio non implementa la programmazione parallela, ma illustra come rendere il codice asincrono in modo che è possibile implementare la programmazione parallela.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-248">The sample doesn't implement parallel programming but shows how to make the code asynchronous so you can implement parallel programming.</span></span>

## <a name="summary"></a><span data-ttu-id="ff8d4-249">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="ff8d4-249">Summary</span></span>

<span data-ttu-id="ff8d4-250">In questo capitolo è stato spiegato come migliorare la velocità di risposta dell'applicazione, l'affidabilità e scalabilità dall'implementazione del pattern di lavoro incentrato sulle code.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-250">In this chapter you've seen how to improve application responsiveness, reliability, and scalability by implementing the queue-centric work pattern.</span></span>

<span data-ttu-id="ff8d4-251">Questa è l'ultima 13 modelli illustrati in questo e-book, ma sono ovviamente disponibili molti altri modelli e procedure consigliate che consentono di compilare App cloud di successo.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-251">This is the last of the 13 patterns covered in this e-book, but there are of course many other patterns and practices that can help you build successful cloud apps.</span></span> <span data-ttu-id="ff8d4-252">Il [capitolo finale](more-patterns-and-guidance.md) vengono forniti collegamenti alle risorse per gli argomenti non sono stati inclusi in questi 13 modelli.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-252">The [final chapter](more-patterns-and-guidance.md) provides links to resources for topics that haven't been covered in these 13 patterns.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="ff8d4-253">Risorse</span><span class="sxs-lookup"><span data-stu-id="ff8d4-253">Resources</span></span>

<span data-ttu-id="ff8d4-254">Per altre informazioni sulle code, vedere le risorse seguenti.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-254">For more information about queues, see the following resources.</span></span>

<span data-ttu-id="ff8d4-255">Documentazione:</span><span class="sxs-lookup"><span data-stu-id="ff8d4-255">Documentation:</span></span>

- <span data-ttu-id="ff8d4-256">[Microsoft Azure Storage code parte 1: Introduzione a](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-256">[Microsoft Azure Storage Queues Part 1: Getting Started](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span></span> <span data-ttu-id="ff8d4-257">Articolo di Schacherl romano.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-257">Article by Roman Schacherl.</span></span>
- <span data-ttu-id="ff8d4-258">[L'esecuzione di attività in Background](https://msdn.microsoft.com/library/ff803365.aspx), il capitolo 5 del [spostando le applicazioni nel Cloud, 3rd Edition](https://msdn.microsoft.com/library/ff728592.aspx) da Microsoft Patterns and Practices.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-258">[Executing Background Tasks](https://msdn.microsoft.com/library/ff803365.aspx), chapter 5 of [Moving Applications to the Cloud, 3rd Edition](https://msdn.microsoft.com/library/ff728592.aspx) from Microsoft Patterns and Practices.</span></span> <span data-ttu-id="ff8d4-259">(In particolare, la sezione ["Usando le code di archiviazione di Azure"](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-259">(In particular, the section ["Using Azure Storage Queues"](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span></span>
- <span data-ttu-id="ff8d4-260">[Procedure consigliate per ottimizzare la scalabilità e la convenienza delle soluzioni di messaggistica basata su coda in Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-260">[Best Practices for Maximizing Scalability and Cost Effectiveness of Queue-Based Messaging Solutions on Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span></span> <span data-ttu-id="ff8d4-261">White paper per Valery Mizonov.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-261">White paper by Valery Mizonov.</span></span>
- <span data-ttu-id="ff8d4-262">[Confronto tra le code di Azure e code del Bus di servizio](https://msdn.microsoft.com/magazine/jj159884.aspx).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-262">[Comparing Azure Queues and Service Bus Queues](https://msdn.microsoft.com/magazine/jj159884.aspx).</span></span> <span data-ttu-id="ff8d4-263">Articolo di MSDN Magazine, fornisce informazioni aggiuntive che consentono di scegliere quale servizio di Accodamento da usare.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-263">MSDN Magazine article, provides additional information that can help you choose which queue service to use.</span></span> <span data-ttu-id="ff8d4-264">L'articolo indica che il Bus di servizio sia dipendente da ACS per l'autenticazione, ovvero che le code di Service bus sarebbero disponibili quando ACS è disponibile.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-264">The article mentions that Service Bus is dependent on ACS for authentication, which means your SB queues would be unavailable when ACS is unavailable.</span></span> <span data-ttu-id="ff8d4-265">Tuttavia, poiché l'articolo è stato scritto, Service bus è stata modificata per consentono di usare [token di firma di accesso condiviso](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) come alternativa ad ACS.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-265">However, since the article was written, SB was changed to enable you to use [SAS tokens](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) as an alternative to ACS.</span></span>
- <span data-ttu-id="ff8d4-266">[Microsoft Patterns and Practices - informazioni aggiuntive su Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-266">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="ff8d4-267">Vedere Introduzione alla messaggistica asincrona, modello di pipe e filtri, modello di transazioni di compensazione, modello di consumer concorrenti, modello CQRS.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-267">See Asynchronous Messaging primer, Pipes and Filters pattern, Compensating Transaction pattern, Competing Consumers pattern, CQRS pattern.</span></span>
- <span data-ttu-id="ff8d4-268">[CQRS Journey](https://msdn.microsoft.com/library/jj554200).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-268">[CQRS Journey](https://msdn.microsoft.com/library/jj554200).</span></span> <span data-ttu-id="ff8d4-269">E-book su CQRS di Microsoft Patterns and Practices.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-269">E-book about CQRS by Microsoft Patterns and Practices.</span></span>

<span data-ttu-id="ff8d4-270">Video:</span><span class="sxs-lookup"><span data-stu-id="ff8d4-270">Video:</span></span>

- <span data-ttu-id="ff8d4-271">[Operatore alternativo: Creazione di servizi Cloud scalabili, resilienti](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="ff8d4-271">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="ff8d4-272">Serie video in nove parti Marc Mercuri, Ulrich Homann e Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-272">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="ff8d4-273">Presenta i concetti generali e principi architetturali in modo estremamente accessibile e interessano, con storie ricavate dall'esperienza di Microsoft Customer Advisory Team (CAT) con i clienti effettivi.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-273">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="ff8d4-274">Per un'introduzione al servizio di archiviazione di Azure e code, vedere episodio 5 partire 35:13.</span><span class="sxs-lookup"><span data-stu-id="ff8d4-274">For an introduction to the Azure Storage service and queues, see episode 5 starting at 35:13.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ff8d4-275">[Precedente](distributed-caching.md)
> [Successivo](more-patterns-and-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="ff8d4-275">[Previous](distributed-caching.md)
[Next](more-patterns-and-guidance.md)</span></span>
