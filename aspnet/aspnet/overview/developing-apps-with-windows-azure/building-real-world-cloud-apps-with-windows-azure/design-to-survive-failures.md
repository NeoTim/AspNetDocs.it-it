---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/design-to-survive-failures
title: Progettare per sopravvivere agli errori (compilazione di app Cloud reali con Azure) | Microsoft Docs
author: MikeWasson
description: La creazione di app cloud del mondo reale con l'e-book di Azure si basa su una presentazione sviluppata da Scott Guthrie. Vengono illustrati 13 modelli e procedure che possono essere...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 364ce84e-5af8-4e08-afc9-75a512b01f84
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/design-to-survive-failures
msc.type: authoredcontent
ms.openlocfilehash: 9bf9acb8b4f8521d03c053c124c5fc4a07d6cb9a
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/28/2019
ms.locfileid: "74585659"
---
# <a name="design-to-survive-failures-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="9ac1a-104">Progettazione per sopravvivere agli errori (creazione di app Cloud reali con Azure)</span><span class="sxs-lookup"><span data-stu-id="9ac1a-104">Design to Survive Failures (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="9ac1a-105">di [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="9ac1a-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="9ac1a-106">[Scarica il progetto di correzione it](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) o [Scarica l'E-Book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="9ac1a-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="9ac1a-107">La **creazione di app cloud del mondo reale con** l'e-book di Azure si basa su una presentazione sviluppata da Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="9ac1a-108">Vengono illustrati 13 modelli e procedure che consentono di sviluppare correttamente app Web per il cloud.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="9ac1a-109">Per informazioni sull'e-book, vedere [il primo capitolo](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="9ac1a-110">Uno degli aspetti da considerare quando si compila qualsiasi tipo di applicazione, ma soprattutto uno che verrà eseguito nel cloud in cui verrà usato da molti utenti, è come progettare l'applicazione in modo che possa gestire correttamente gli errori e continuare a fornire valore per quanto riguarda possibile.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-110">One of the things you have to think about when you build any type of application, but especially one that will run in the cloud where lots of people will be using it, is how to design the app so that it can gracefully handle failures and continue to deliver value as much as possible.</span></span> <span data-ttu-id="9ac1a-111">Dato un tempo sufficiente, si verificherà un errore in qualsiasi ambiente o qualsiasi sistema software.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-111">Given enough time, things are going to go wrong in any environment or any software system.</span></span> <span data-ttu-id="9ac1a-112">Il modo in cui l'app gestisce tali situazioni determina il modo in cui i clienti otterranno e il tempo necessario per l'analisi e la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-112">How your app handles those situations determines how upset your customers will get and how much time you have to spend analyzing and fixing problems.</span></span>

## <a name="types-of-failures"></a><span data-ttu-id="9ac1a-113">Tipi di errori</span><span class="sxs-lookup"><span data-stu-id="9ac1a-113">Types of failures</span></span>

<span data-ttu-id="9ac1a-114">Esistono due categorie di errori di base che si desidera gestire in modo diverso:</span><span class="sxs-lookup"><span data-stu-id="9ac1a-114">There are two basic categories of failures that you'll want to handle differently:</span></span>

- <span data-ttu-id="9ac1a-115">Errori temporanei di correzione automatica, ad esempio problemi di connettività di rete intermittenti.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-115">Transient, self-healing failures such as intermittent network connectivity issues.</span></span>
- <span data-ttu-id="9ac1a-116">Si verificano errori che richiedono un intervento.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-116">Enduring failures that require intervention.</span></span>

<span data-ttu-id="9ac1a-117">Per gli errori temporanei, è possibile implementare un criterio di ripetizione per assicurarsi che la maggior parte del tempo l'app venga recuperata in modo rapido e automatico.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-117">For transient failures, you can implement a retry policy to ensure that most of the time the app recovers quickly and automatically.</span></span> <span data-ttu-id="9ac1a-118">I clienti potrebbero notare tempi di risposta leggermente più lunghi, ma in caso contrario non saranno interessati.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-118">Your customers might notice slightly longer response time, but otherwise they won't be affected.</span></span> <span data-ttu-id="9ac1a-119">Verranno illustrati alcuni modi per gestire questi errori nel capitolo relativo alla [gestione degli errori temporanei](transient-fault-handling.md).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-119">We'll show some ways to handle these errors in the [Transient Fault Handling chapter](transient-fault-handling.md).</span></span>

<span data-ttu-id="9ac1a-120">In caso di errori, è possibile implementare la funzionalità di monitoraggio e registrazione che invia una notifica tempestiva quando si verificano problemi e che facilita l'analisi della causa radice.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-120">For enduring failures, you can implement monitoring and logging functionality that notifies you promptly when issues arise and that facilitates root cause analysis.</span></span> <span data-ttu-id="9ac1a-121">Verranno illustrati alcuni modi per aiutare a rimanere oltre questi tipi di errori nel [capitolo monitoraggio e telemetria](monitoring-and-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-121">We'll show some ways to help you stay on top of these kinds of errors in the [Monitoring and Telemetry chapter](monitoring-and-telemetry.md).</span></span>

## <a name="failure-scope"></a><span data-ttu-id="9ac1a-122">Ambito errore</span><span class="sxs-lookup"><span data-stu-id="9ac1a-122">Failure scope</span></span>

<span data-ttu-id="9ac1a-123">È anche necessario considerare l'ambito dell'errore, ovvero se un singolo computer è interessato, un intero servizio, ad esempio il database SQL o l'archiviazione, oppure un'intera area.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-123">You also have to think about failure scope – whether a single machine is affected, a whole service such as SQL Database or Storage, or an entire region.</span></span>

![Ambito errore](design-to-survive-failures/_static/image1.png)

### <a name="machine-failures"></a><span data-ttu-id="9ac1a-125">Errori del computer</span><span class="sxs-lookup"><span data-stu-id="9ac1a-125">Machine failures</span></span>

<span data-ttu-id="9ac1a-126">In Azure, un server con errore viene sostituito automaticamente da uno nuovo e un'app Cloud ben progettata viene recuperata da questo tipo di errore in modo automatico e rapido.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-126">In Azure, a failed server is automatically replaced by a new one, and a well-designed cloud app recovers from this kind of failure automatically and quickly.</span></span> <span data-ttu-id="9ac1a-127">In precedenza abbiamo sottolineato i vantaggi di scalabilità di un livello Web senza stato e la facilità di ripristino da un server in cui si è verificato un errore è un altro vantaggio di questo</span><span class="sxs-lookup"><span data-stu-id="9ac1a-127">Earlier we stressed the scalability benefits of a stateless web tier, and ease of recovery from a failed server is another benefit of statelessness.</span></span> <span data-ttu-id="9ac1a-128">La facilità di ripristino è anche uno dei vantaggi delle funzionalità di piattaforma distribuita come servizio (PaaS), ad esempio il database SQL e le app Web del servizio app Azure.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-128">Ease of recovery is also one of the benefits of platform-as-a-service (PaaS) features such as SQL Database and Azure App Service Web Apps.</span></span> <span data-ttu-id="9ac1a-129">Gli errori hardware sono rari, ma quando si verificano questi servizi li gestiscono automaticamente. non è nemmeno necessario scrivere codice per gestire gli errori del computer quando si usa uno di questi servizi.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-129">Hardware failures are rare, but when they occur these services handle them automatically; you don't even have to write code to handle machine failures when you're using one of these services.</span></span>

### <a name="service-failures"></a><span data-ttu-id="9ac1a-130">Errori del servizio</span><span class="sxs-lookup"><span data-stu-id="9ac1a-130">Service failures</span></span>

<span data-ttu-id="9ac1a-131">Le app Cloud usano in genere più servizi.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-131">Cloud apps typically use multiple services.</span></span> <span data-ttu-id="9ac1a-132">Ad esempio, l'app Correggi it usa il servizio di database SQL, il servizio di archiviazione e l'app Web viene distribuita nel servizio app Azure.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-132">For example, the Fix It app uses the SQL Database service, the Storage service, and the web app is deployed to Azure App Service.</span></span> <span data-ttu-id="9ac1a-133">Quali sono le operazioni eseguite dall'app se uno dei servizi da cui si dipende non riesce?</span><span class="sxs-lookup"><span data-stu-id="9ac1a-133">What will your app do if one of the services you depend on fails?</span></span> <span data-ttu-id="9ac1a-134">Per alcuni errori del servizio un messaggio descrittivo "dispiace, riprovare più tardi" potrebbe essere il migliore possibile.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-134">For some service failures a friendly "sorry, try again later" message might be the best you can do.</span></span> <span data-ttu-id="9ac1a-135">In molti scenari, tuttavia, è possibile migliorare.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-135">But in many scenarios you can do better.</span></span> <span data-ttu-id="9ac1a-136">Ad esempio, quando l'archivio dati back-end non è attivo, è possibile accettare l'input dell'utente, visualizzare "la richiesta è stata ricevuta" e archiviare l'input in un altro luogo temporaneamente; Quando il servizio necessario è di nuovo operativo, è possibile recuperare l'input ed elaborarlo.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-136">For example, when your back-end data store is down, you can accept user input, display "your request has been received," and store the input someplace else temporarily; then when the service you need is operational again, you can retrieve the input and process it.</span></span>

<span data-ttu-id="9ac1a-137">Il capitolo del [modello di lavoro incentrato sulle code](queue-centric-work-pattern.md) Mostra un modo per gestire questo scenario.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-137">The [Queue-centric Work Pattern](queue-centric-work-pattern.md) chapter shows one way to handle this scenario.</span></span> <span data-ttu-id="9ac1a-138">Il Fix it app archivia le attività nel database SQL, ma non è necessario smettere di funzionare quando il database SQL non è attivo.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-138">The Fix It app stores tasks in SQL Database, but it doesn't have to quit working when SQL Database is down.</span></span> <span data-ttu-id="9ac1a-139">In questo capitolo verrà illustrato come archiviare l'input dell'utente per un'attività in una coda e come usare un processo di lavoro per leggere la coda e aggiornare l'attività.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-139">In that chapter we'll see how to store user input for a task in a queue, and use a worker process to read the queue and update the task.</span></span> <span data-ttu-id="9ac1a-140">Se SQL è inattivo, la possibilità di creare correzioni per le attività it non è interessata. il processo di lavoro può attendere ed elaborare nuove attività quando il database SQL è disponibile.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-140">If SQL is down, the ability to create Fix It tasks is unaffected; the worker process can wait and process new tasks when SQL Database is available.</span></span>

### <a name="region-failures"></a><span data-ttu-id="9ac1a-141">Errori di area</span><span class="sxs-lookup"><span data-stu-id="9ac1a-141">Region failures</span></span>

<span data-ttu-id="9ac1a-142">Le aree intere potrebbero non riuscire.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-142">Entire regions may fail.</span></span> <span data-ttu-id="9ac1a-143">Un'emergenza naturale potrebbe eliminare una data center, potrebbe essere resa flat da un meteorite, la linea di tronco nel Data Center può essere tagliata da un coltivatore che seppellisce una mucca con una terna e così via. Se l'app è ospitata nel Data Center colpito, cosa si può fare?</span><span class="sxs-lookup"><span data-stu-id="9ac1a-143">A natural disaster might destroy a data center, it might get flattened by a meteor, the trunk line into the datacenter could be cut by a farmer burying a cow with a backhoe, etc. If your app is hosted in the stricken datacenter what do you do?</span></span> <span data-ttu-id="9ac1a-144">È possibile configurare l'app in Azure per l'esecuzione simultanea in più aree, in modo che, se si verifica una situazione di emergenza, si continui a eseguire in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-144">It's possible to set up your app in Azure to run in multiple regions simultaneously so that if there's a disaster in one, you continue running in another region.</span></span> <span data-ttu-id="9ac1a-145">Tali errori sono occorrenze estremamente rare e la maggior parte delle app non attraversa i cerchi necessari per garantire il servizio ininterrotto attraverso errori di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-145">Such failures are extremely rare occurrences, and most apps don't jump through the hoops necessary to ensure uninterrupted service through failures of this sort.</span></span> <span data-ttu-id="9ac1a-146">Vedere la sezione relativa alle risorse alla fine del capitolo per informazioni su come rendere disponibile l'app anche in caso di errore di un'area.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-146">See the Resources section at the end of the chapter for information about how to keep your app available even through a region failure.</span></span>

<span data-ttu-id="9ac1a-147">Uno degli obiettivi di Azure consiste nel rendere molto più semplice la gestione di tutti questi tipi di errori. verranno illustrati alcuni esempi del modo in cui si esegue questa operazione nei capitoli seguenti.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-147">A goal of Azure is to make handling all of these kinds of failures a lot easier, and you'll see some examples of how we're doing that in the following chapters.</span></span>

## <a name="slas"></a><span data-ttu-id="9ac1a-148">Contratti</span><span class="sxs-lookup"><span data-stu-id="9ac1a-148">SLAs</span></span>

<span data-ttu-id="9ac1a-149">Spesso i contratti di servizio (SLA) sono in ascolto nell'ambiente cloud.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-149">People often hear about service-level agreements (SLAs) in the cloud environment.</span></span> <span data-ttu-id="9ac1a-150">Fondamentalmente, queste sono le promesse che le aziende rendono affidabili per quanto riguarda il servizio.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-150">Basically these are promises that companies make about how reliable their service is.</span></span> <span data-ttu-id="9ac1a-151">Un contratto di servizio del 99,9% indica che il servizio deve funzionare correttamente 99,9% del tempo.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-151">A 99.9% SLA means you should expect the service to be working correctly 99.9% of the time.</span></span> <span data-ttu-id="9ac1a-152">Si tratta di un valore piuttosto comune per un contratto di contratto e sembra un numero molto elevato, ma è possibile che non si renda conto della quantità di tempo di inattività del 1%.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-152">That's a fairly typical value for an SLA and it sounds like a very high number, but you might not realize how much down time .1% actually amounts to.</span></span> <span data-ttu-id="9ac1a-153">Di seguito è riportata una tabella che mostra il tempo di inattività di diverse percentuali di SLA rispetto a un anno, un mese e una settimana.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-153">Here's a table that shows how much downtime various SLA percentages amount to over a year, a month, and a week.</span></span>

![Tabella SLA](design-to-survive-failures/_static/image2.png)

<span data-ttu-id="9ac1a-155">Quindi, un contratto di servizio del 99,9% significa che il servizio potrebbe essere inattivo 8,76 ore all'anno o 43,2 minuti al mese.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-155">So a 99.9% SLA means your service could be down 8.76 hours a year or 43.2 minutes a month.</span></span> <span data-ttu-id="9ac1a-156">Si tratta di un tempo di inattività maggiore rispetto alla maggior parte degli utenti.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-156">That's more down time than most people realize.</span></span> <span data-ttu-id="9ac1a-157">Quindi, gli sviluppatori desiderano tenere presente che è possibile una certa quantità di tempo di inattività e gestirla in modo normale.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-157">So as a developer you want to be aware that a certain amount of down time is possible and handle it in a graceful way.</span></span> <span data-ttu-id="9ac1a-158">A un certo punto, qualcuno utilizzerà l'app e un servizio sarà inattivo e si desidera ridurre al minimo l'impatto negativo sul cliente.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-158">At some point someone is going to be using your app, and a service is going to be down, and you want to minimize the negative impact of that on the customer.</span></span>

<span data-ttu-id="9ac1a-159">Una cosa che è necessario conoscere in merito a un contratto di contratto è la tempistica a cui fa riferimento: l'orologio viene reimpostato ogni settimana, ogni mese o ogni anno?</span><span class="sxs-lookup"><span data-stu-id="9ac1a-159">One thing you should know about an SLA is what time-frame it refers to: does the clock get reset every week, every month, or every year?</span></span> <span data-ttu-id="9ac1a-160">In Azure il clock viene reimpostato ogni mese, il che è migliore per l'utente rispetto a un contratto di licenza annuale, perché un contratto di licenza annuale può nascondere i mesi negativi compensando questi ultimi con una serie di mesi validi.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-160">In Azure we reset the clock every month, which is better for you than a yearly SLA, since a yearly SLA could hide bad months by offsetting them with a series of good months.</span></span>

<span data-ttu-id="9ac1a-161">Naturalmente, aspiriamo sempre meglio rispetto al contratto di contratto; in genere si disporrà di un numero inferiore.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-161">Of course we always aspire to do better than the SLA; usually you'll be down much less than that.</span></span> <span data-ttu-id="9ac1a-162">Il suggerimento è che se il tempo di inattività è superiore al limite massimo consentito, è possibile richiedere denaro.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-162">The promise is that if we're ever down for longer than the maximum down time you can ask for money back.</span></span> <span data-ttu-id="9ac1a-163">La quantità di denaro che si ottiene probabilmente non comporterebbe in modo completo l'utente per l'effetto aziendale del tempo di inattività eccessivo, ma tale aspetto del contratto di lavoro funge da criterio di imposizione e informa che l'operazione viene eseguita molto seriamente.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-163">The amount of money you get back probably wouldn't fully compensate you for the business impact of the excess down time, but that aspect of the SLA acts as an enforcement policy and lets you know that we do take it very seriously.</span></span>

### <a name="composite-slas"></a><span data-ttu-id="9ac1a-164">Contratti di Service compositi</span><span class="sxs-lookup"><span data-stu-id="9ac1a-164">Composite SLAs</span></span>

<span data-ttu-id="9ac1a-165">Un aspetto importante da considerare quando si esaminano i contratti di servizio è l'effetto dell'uso di più servizi in un'app, con ogni servizio con un contratto di servizio separato.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-165">An important thing to think about when you're looking at SLAs is the impact of using multiple services in an app, with each service having a separate SLA.</span></span> <span data-ttu-id="9ac1a-166">Ad esempio, l'app Correggi it usa app Azure app Web del servizio, archiviazione di Azure e il database SQL.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-166">For example, the Fix It app uses Azure App Service Web Apps, Azure Storage, and SQL Database.</span></span> <span data-ttu-id="9ac1a-167">Di seguito sono riportati i numeri di contratto di contratto alla data in cui questo e-book viene scritto nel dicembre 2013:</span><span class="sxs-lookup"><span data-stu-id="9ac1a-167">Here are their SLA numbers as of the date this e-book is being written in December, 2013:</span></span>

![Sito Web SLA, archiviazione, database SQL](design-to-survive-failures/_static/image3.png)

<span data-ttu-id="9ac1a-169">Qual è il tempo di inattività massimo che ci si aspetta per l'app in base a questi contratti di servizio?</span><span class="sxs-lookup"><span data-stu-id="9ac1a-169">What is the maximum down time you would expect for the app based on these service SLAs?</span></span> <span data-ttu-id="9ac1a-170">Si potrebbe pensare che il tempo di inattività sarebbe uguale alla percentuale di SLA peggiore o al 99,9% in questo caso.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-170">You might think that your down time would be equal to the worst SLA percentage, or 99.9% in this case.</span></span> <span data-ttu-id="9ac1a-171">Questo sarebbe vero se tutti e tre i servizi hanno sempre avuto esito negativo nello stesso momento, ma ciò non è necessariamente quello che accade effettivamente.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-171">That would be true if all three services always failed at the same time, but that isn't necessarily what actually happens.</span></span> <span data-ttu-id="9ac1a-172">Ogni servizio può non riuscire in modo indipendente in momenti diversi, quindi è necessario calcolare il contratto di servizio composito moltiplicando i singoli numeri di contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-172">Each service may fail independently at different times, so you have to calculate the composite SLA by multiplying the individual SLA numbers.</span></span>

![SLA composito](design-to-survive-failures/_static/image4.png)

<span data-ttu-id="9ac1a-174">Quindi, l'app potrebbe essere inattiva non solo 43,2 minuti al mese, ma 3 volte tale quantità, 108 minuti al mese e ancora entro i limiti del contratto di lavoro di Azure.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-174">So your app could be down not just 43.2 minutes a month but 3 times that amount, 108 minutes a month – and still be within the Azure SLA limits.</span></span>

<span data-ttu-id="9ac1a-175">Questo problema non è univoco in Azure.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-175">This issue is not unique to Azure.</span></span> <span data-ttu-id="9ac1a-176">In realtà, offriamo i migliori contratti di servizio cloud per qualsiasi servizio cloud disponibile e avrai problemi analoghi da affrontare se usi i servizi cloud di qualsiasi fornitore.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-176">We actually provide the best cloud SLAs of any cloud service available, and you'll have similar issues to deal with if you use any vendor's cloud services.</span></span> <span data-ttu-id="9ac1a-177">Ciò che evidenzia è l'importanza di considerare come progettare l'applicazione per gestire gli errori inevitabili del servizio, in quanto potrebbero verificarsi abbastanza spesso da influito sui clienti o sugli utenti.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-177">What this highlights is the importance of thinking about how you can design your app to handle the inevitable service failures gracefully, because they might happen often enough to impact your customers or users.</span></span>

### <a name="cloud-slas-compared-to-enterprise-down-time-experience"></a><span data-ttu-id="9ac1a-178">Contratti di contratto con il cloud rispetto all'esperienza del tempo di inattività aziendale</span><span class="sxs-lookup"><span data-stu-id="9ac1a-178">Cloud SLAs compared to enterprise down-time experience</span></span>

<span data-ttu-id="9ac1a-179">Le persone a volte dicono "nell'app aziendale non ho mai questi problemi".</span><span class="sxs-lookup"><span data-stu-id="9ac1a-179">People sometimes say, "In my enterprise app I never have these problems."</span></span> <span data-ttu-id="9ac1a-180">Se si chiede la quantità di tempo di inattività al mese in cui si trova, in genere si afferma che "si verifica occasionalmente".</span><span class="sxs-lookup"><span data-stu-id="9ac1a-180">If you ask how much down time a month they actually have, they usually say, "Well, it happens occasionally."</span></span> <span data-ttu-id="9ac1a-181">E se viene chiesto con quale frequenza, ammettono che "a volte è necessario eseguire il backup o installare un nuovo server o aggiornare il software".</span><span class="sxs-lookup"><span data-stu-id="9ac1a-181">And if you ask how often, they admit that "Sometimes we do need to back up or install a new server or update software."</span></span> <span data-ttu-id="9ac1a-182">Ovviamente, questo viene conteggiato come tempo di inattività.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-182">Of course, that counts as down time.</span></span> <span data-ttu-id="9ac1a-183">La maggior parte delle app aziendali, a meno che non siano particolarmente cruciali, sono in realtà inattive per un periodo di tempo superiore a quello consentito dai contratti di servizio.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-183">Most enterprise apps unless they are especially mission-critical are actually down for more than the amount of time allowed by our service SLAs.</span></span> <span data-ttu-id="9ac1a-184">Tuttavia, quando si tratta di un server e di una propria infrastruttura e si è responsabili dell'IT e del relativo controllo, si tende a provare a ridurre i tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-184">But when it's your server and your infrastructure and you're responsible for it and in control of it, you tend to feel less angst about down times.</span></span> <span data-ttu-id="9ac1a-185">In un ambiente cloud si dipende da un altro utente e non si sa cosa accade, quindi è possibile che si preferisca preoccuparsi.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-185">In a cloud environment you're dependent on someone else and you don't know what's going on, so you might tend to get more worried about it.</span></span>

<span data-ttu-id="9ac1a-186">Quando un'azienda raggiunge una percentuale di tempo di attività maggiore rispetto a un contratto di contratto per il cloud, lo esegue spendendo molto più denaro sull'hardware.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-186">When an enterprise achieves a greater up-time percentage than you get from a cloud SLA, they do it by spending a lot more money on hardware.</span></span> <span data-ttu-id="9ac1a-187">Un servizio cloud può eseguire questa operazione, ma dovrebbe addebitare molto altro per i servizi.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-187">A cloud service could do that but would have to charge much more for its services.</span></span> <span data-ttu-id="9ac1a-188">Al contrario, si sfrutta un servizio economico e si progetta il software in modo che gli errori inevitabili provochino un'interferenza minima per i clienti.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-188">Instead, you take advantage of a cost-effective service and design your software so that the inevitable failures cause minimum disruption to your customers.</span></span> <span data-ttu-id="9ac1a-189">Il processo come una finestra di progettazione di app Cloud non è così tanto per evitare errori come per evitare catastrofi e a tale scopo si concentra sul software, non sull'hardware.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-189">Your job as a cloud app designer is not so much to avoid failure as to avoid catastrophe, and you do that by focusing on software, not on hardware.</span></span> <span data-ttu-id="9ac1a-190">Mentre le app aziendali si impegnano a massimizzare il tempo medio tra gli errori, le app Cloud si impegnano a ridurre al minimo il tempo medio per il ripristino.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-190">Whereas enterprise apps strive to maximize mean time between failures, cloud apps strive to minimize mean time to recover.</span></span>

### <a name="not-all-cloud-services-have-slas"></a><span data-ttu-id="9ac1a-191">Non tutti i servizi cloud hanno contratti di servizio</span><span class="sxs-lookup"><span data-stu-id="9ac1a-191">Not all cloud services have SLAs</span></span>

<span data-ttu-id="9ac1a-192">Tenere presente anche che non tutti i servizi cloud hanno anche un contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-192">Be aware also that not every cloud service even has an SLA.</span></span> <span data-ttu-id="9ac1a-193">Se l'app dipende da un servizio senza una garanzia di tempo di attività, è possibile che si verifichino tempi di inattività molto più lunghi di quanto si possa immaginare.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-193">If your app is dependent on a service with no up-time guarantee, you could be down far longer than you might imagine.</span></span> <span data-ttu-id="9ac1a-194">Ad esempio, se si Abilita l'accesso al sito usando un provider di social networking, ad esempio Facebook o Twitter, rivolgersi al provider di servizi per verificare se è presente un contratto di servizio e potrebbe non essere disponibile.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-194">For example, if you enable log-in to your site using a social provider such as Facebook or Twitter, check with the service provider to find out if there is an SLA, and you might find out there isn't one.</span></span> <span data-ttu-id="9ac1a-195">Tuttavia, se il servizio di autenticazione diventa inattivo o non è in grado di supportare il volume di richieste che vengono generate, i clienti vengono bloccati dall'app.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-195">But if the authentication service goes down or is unable to support the volume of requests you throw at it, your customers are locked out of your app.</span></span> <span data-ttu-id="9ac1a-196">È possibile che l'utente sia inattivo per giorni o più.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-196">You could be down for days or longer.</span></span> <span data-ttu-id="9ac1a-197">Gli autori di una nuova app hanno previsto centinaia di milioni di download e hanno preso una dipendenza dall'autenticazione di Facebook, ma non hanno parlato con Facebook prima di andare in diretta e hanno scoperto che non era previsto alcun contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-197">The creators of one new app expected hundreds of millions of downloads and took a dependency on Facebook authentication – but didn't talk to Facebook before going live and discovered too late that there was no SLA for that service.</span></span>

### <a name="not-all-downtime-counts-toward-slas"></a><span data-ttu-id="9ac1a-198">Non tutti i tempi di inattività vengono conteggiati nei contratti</span><span class="sxs-lookup"><span data-stu-id="9ac1a-198">Not all downtime counts toward SLAs</span></span>

<span data-ttu-id="9ac1a-199">È possibile che alcuni servizi cloud neghino intenzionalmente il servizio se la propria app li utilizza.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-199">Some cloud services may deliberately deny service if your app over-uses them.</span></span> <span data-ttu-id="9ac1a-200">Questa operazione viene definita *limitazione*.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-200">This is called *throttling*.</span></span> <span data-ttu-id="9ac1a-201">Se un servizio dispone di un contratto di servizio, deve indicare le condizioni in base alle quali è possibile che sia stato limitato e la progettazione dell'app deve evitare tali condizioni e rispondere in modo appropriato alla limitazione, se si verifica.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-201">If a service has an SLA, it should state the conditions under which you might be throttled, and your app design should avoid those conditions and react appropriately to the throttling if it happens.</span></span> <span data-ttu-id="9ac1a-202">Se, ad esempio, le richieste a un servizio iniziano ad avere esito negativo quando si supera un determinato numero al secondo, si desidera assicurarsi che i tentativi automatici non si verifichino così velocemente che la limitazione continui.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-202">For example, if requests to a service start to fail when you exceed a certain number per second, you want to make sure automatic retries don't happen so fast that they cause the throttling to continue.</span></span> <span data-ttu-id="9ac1a-203">Il capitolo relativo alla [gestione degli errori temporanei](transient-fault-handling.md)sarà più approfondito per quanto riguarda la limitazione delle richieste.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-203">We'll have more to say about throttling in the [Transient Fault Handling chapter](transient-fault-handling.md).</span></span>

## <a name="summary"></a><span data-ttu-id="9ac1a-204">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="9ac1a-204">Summary</span></span>

<span data-ttu-id="9ac1a-205">Questo capitolo ha provato a comprendere il motivo per cui un'app cloud reale deve essere progettata in modo da evitare gli errori normalmente.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-205">This chapter has tried to help you realize why a real world cloud app has to be designed to survive failures gracefully.</span></span> <span data-ttu-id="9ac1a-206">A partire dal [capitolo successivo](monitoring-and-telemetry.md), i modelli rimanenti di questa serie vengono illustrati in modo più dettagliato sulle strategie che è possibile usare per eseguire questa operazione:</span><span class="sxs-lookup"><span data-stu-id="9ac1a-206">Starting with the [next chapter](monitoring-and-telemetry.md), the remaining patterns in this series go into more detail about some strategies you can use to do that:</span></span>

- <span data-ttu-id="9ac1a-207">Disporre di un [monitoraggio e di una telemetria](monitoring-and-telemetry.md)corretti, in modo da individuare rapidamente gli errori che richiedono l'intervento e disporre di informazioni sufficienti per risolverli.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-207">Have good [monitoring and telemetry](monitoring-and-telemetry.md), so that you find out quickly about failures that require intervention, and you have sufficient information to resolve them.</span></span>
- <span data-ttu-id="9ac1a-208">[Gestire gli errori temporanei](transient-fault-handling.md) implementando la logica di ripetizione dei tentativi intelligente, in modo che l'app venga ripristinata automaticamente quando è possibile ed esegue il [fallback alla logica di un interruttore.](transient-fault-handling.md#circuitbreakers)</span><span class="sxs-lookup"><span data-stu-id="9ac1a-208">[Handle transient faults](transient-fault-handling.md) by implementing intelligent retry logic, so that your app recovers automatically when it can and falls back to [circuit breaker](transient-fault-handling.md#circuitbreakers) logic when it can't.</span></span>
- <span data-ttu-id="9ac1a-209">Utilizzare la [memorizzazione nella cache distribuita](distributed-caching.md) allo scopo di ridurre al minimo i problemi di velocità effettiva, latenza e connessione con l'accesso al database.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-209">Use [distributed caching](distributed-caching.md) in order to minimize throughput, latency, and connection problems with database access.</span></span>
- <span data-ttu-id="9ac1a-210">Implementare l'accoppiamento libero tramite il [modello di lavoro incentrato sulla coda](queue-centric-work-pattern.md), in modo che il front-end dell'app possa continuare a funzionare quando il back-end è inattivo.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-210">Implement loose coupling via the [queue-centric work pattern](queue-centric-work-pattern.md), so that your app front end can continue to work when the back end is down.</span></span>

## <a name="resources"></a><span data-ttu-id="9ac1a-211">Risorse</span><span class="sxs-lookup"><span data-stu-id="9ac1a-211">Resources</span></span>

<span data-ttu-id="9ac1a-212">Per ulteriori informazioni, vedere i capitoli successivi in questo e-book e le risorse seguenti.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-212">For more information, see later chapters in this e-book and the following resources.</span></span>

<span data-ttu-id="9ac1a-213">Documentazione:</span><span class="sxs-lookup"><span data-stu-id="9ac1a-213">Documentation:</span></span>

- <span data-ttu-id="9ac1a-214">[Failsafe: linee guida per architetture cloud resilienti](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-214">[Failsafe: Guidance for Resilient Cloud Architectures](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span></span> <span data-ttu-id="9ac1a-215">White paper di Marc Mercuri, Ulrich Homann e Andrew Townhill.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-215">White paper by Marc Mercuri, Ulrich Homann, and Andrew Townhill.</span></span> <span data-ttu-id="9ac1a-216">Versione di pagina Web della serie di video FailSafe.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-216">Web page version of the FailSafe video series.</span></span>
- <span data-ttu-id="9ac1a-217">[Procedure consigliate per la progettazione di servizi su larga scala nei servizi cloud di Azure](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-217">[Best Practices for the Design of Large-Scale Services on Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span></span> <span data-ttu-id="9ac1a-218">White paper di Mark Simms e Michael Thomassy.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-218">White paper by Mark Simms and Michael Thomassy.</span></span>
- <span data-ttu-id="9ac1a-219">[Informazioni tecniche sulla continuità aziendale di Azure](https://msdn.microsoft.com/library/windowsazure/hh873027.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-219">[Azure Business Continuity Technical Guidance](https://msdn.microsoft.com/library/windowsazure/hh873027.aspx).</span></span> <span data-ttu-id="9ac1a-220">White paper di Patrick Wickline e Jason Roth.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-220">White paper by Patrick Wickline and Jason Roth.</span></span>
- <span data-ttu-id="9ac1a-221">[Ripristino di emergenza e disponibilità elevata per le applicazioni Azure](https://msdn.microsoft.com/library/windowsazure/dn251004.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-221">[Disaster Recovery and High Availability for Azure Applications](https://msdn.microsoft.com/library/windowsazure/dn251004.aspx).</span></span> <span data-ttu-id="9ac1a-222">White paper di Michael McKeown, Hanu Kommalapati e Jason Roth.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-222">White paper by Michael McKeown, Hanu Kommalapati, and Jason Roth.</span></span>
- <span data-ttu-id="9ac1a-223">[Modelli e procedure Microsoft: informazioni aggiuntive su Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-223">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="9ac1a-224">Vedere linee guida per la distribuzione di più data center, modello di interruttore.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-224">See Multi Data Center Deployment guidance, Circuit breaker pattern.</span></span>
- <span data-ttu-id="9ac1a-225">[Supporto di Azure-contratti di servizio](https://azure.microsoft.com/support/legal/sla/).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-225">[Azure Support - Service Level Agreements](https://azure.microsoft.com/support/legal/sla/).</span></span>
- <span data-ttu-id="9ac1a-226">[Continuità aziendale nel database SQL di Azure](https://msdn.microsoft.com/library/windowsazure/hh852669.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-226">[Business Continuity in Azure SQL Database](https://msdn.microsoft.com/library/windowsazure/hh852669.aspx).</span></span> <span data-ttu-id="9ac1a-227">Documentazione sulle funzionalità di disponibilità elevata e ripristino di emergenza del database SQL.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-227">Documentation about SQL Database high availability and disaster recovery features.</span></span>
- <span data-ttu-id="9ac1a-228">[Disponibilità elevata e ripristino di emergenza per SQL Server in macchine virtuali di Azure](https://msdn.microsoft.com/library/windowsazure/jj870962.aspx).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-228">[High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](https://msdn.microsoft.com/library/windowsazure/jj870962.aspx).</span></span>

<span data-ttu-id="9ac1a-229">Video:</span><span class="sxs-lookup"><span data-stu-id="9ac1a-229">Videos:</span></span>

- <span data-ttu-id="9ac1a-230">[Failsafe: compilazione di servizi cloud scalabili e resilienti](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-230">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="9ac1a-231">Serie in nove parti di Ulrich Homann, Marc Mercuri e Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-231">Nine-part series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="9ac1a-232">Presenta concetti di alto livello e principi architetturali in modo molto accessibile e interessante, con storie tratte dall'esperienza del team di consulenza clienti Microsoft (CAT) con i clienti effettivi.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-232">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="9ac1a-233">Gli episodi 1 e 8 approfondiscono i motivi della progettazione delle app cloud per sopravvivere agli errori.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-233">Episodes 1 and 8 go in depth into the reasons for designing cloud apps to survive failures.</span></span> <span data-ttu-id="9ac1a-234">Vedere anche la discussione successiva sulla limitazione nell'episodio 2 a partire da 49:57, la discussione dei punti di errore e delle modalità di errore nell'episodio 2 a partire da 56:05 e la discussione degli interruttori in Episode 3 a partire da 40:55.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-234">See also the follow-up discussion of throttling in episode 2 starting at 49:57, the discussion of failure points and failure modes in episode 2 starting at 56:05, and the discussion of circuit breakers in episode 3 starting at 40:55.</span></span>
- <span data-ttu-id="9ac1a-235">[Creazione di grandi dimensioni: lezioni apprese dai clienti di Azure-parte II](https://channel9.msdn.com/Events/Build/2012/3-030).</span><span class="sxs-lookup"><span data-stu-id="9ac1a-235">[Building Big: Lessons learned from Azure customers - Part II](https://channel9.msdn.com/Events/Build/2012/3-030).</span></span> <span data-ttu-id="9ac1a-236">Mark Simms parla di progettazione per l'errore e la strumentazione di tutto.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-236">Mark Simms talks about designing for failure and instrumenting everything.</span></span> <span data-ttu-id="9ac1a-237">In modo analogo alla serie failsafe, ma passa ad altre procedure dettagliate.</span><span class="sxs-lookup"><span data-stu-id="9ac1a-237">Similar to the Failsafe series but goes into more how-to details.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9ac1a-238">[Precedente](unstructured-blob-storage.md)
> [Successivo](monitoring-and-telemetry.md)</span><span class="sxs-lookup"><span data-stu-id="9ac1a-238">[Previous](unstructured-blob-storage.md)
[Next](monitoring-and-telemetry.md)</span></span>
