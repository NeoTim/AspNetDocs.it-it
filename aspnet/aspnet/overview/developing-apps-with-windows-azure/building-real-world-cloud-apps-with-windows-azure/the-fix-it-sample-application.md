---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/the-fix-it-sample-application
title: "Appendice: L'applicazione di esempio Fix It (Creazione di app cloud reali con Azure) Documenti Microsoft"
author: MikeWasson
description: L'e-book Building Real World Cloud Apps with Azure si basa su una presentazione sviluppata da Scott Guthrie. Spiega 13 schemi e pratiche che possono...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 1bc333c5-f096-4ea7-b170-779accc21c1a
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/the-fix-it-sample-application
msc.type: authoredcontent
ms.openlocfilehash: 896196bdb6a6b0d12a6c798ead510e37dd38a9fc
ms.sourcegitcommit: ce28244209db8615bc9bdd576a2e2c88174d318d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2020
ms.locfileid: "80675992"
---
# <a name="appendix-the-fix-it-sample-application-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="e0a3e-104">Appendice: L'applicazione di esempio Fix It (Creazione di app cloud reali con Azure)Appendix: The Fix It Sample Application (Building Real-World Cloud Apps with Azure)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-104">Appendix: The Fix It Sample Application (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="e0a3e-105">di [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="e0a3e-106">Scarica the Fix It Project</span><span class="sxs-lookup"><span data-stu-id="e0a3e-106">Download The Fix It Project</span></span>](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4)

> <span data-ttu-id="e0a3e-107">L'e-book **Building Real World Cloud Apps with Azure** si basa su una presentazione sviluppata da Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="e0a3e-108">Vengono illustrati 13 modelli e procedure che consentono di sviluppare con successo app Web per il cloud.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="e0a3e-109">Per informazioni sull'e-book, vedere [il primo capitolo](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="e0a3e-110">Questa appendice all'e-book Building Real World Cloud Apps with Azure contiene le sezioni seguenti che forniscono informazioni aggiuntive sull'applicazione di esempio Fix It che è possibile scaricare:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-110">This appendix to the Building Real World Cloud Apps with Azure e-book contains the following sections that provide additional information about the Fix It sample application that you can download:</span></span>

- [<span data-ttu-id="e0a3e-111">Problemi noti</span><span class="sxs-lookup"><span data-stu-id="e0a3e-111">Known issues</span></span>](#knownissues)
- [<span data-ttu-id="e0a3e-112">Procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="e0a3e-112">Best practices</span></span>](#bestpractices)
- [<span data-ttu-id="e0a3e-113">Come eseguire l'app da Visual Studio nel computer localeHow to run the app from Visual Studio on your local computer</span><span class="sxs-lookup"><span data-stu-id="e0a3e-113">How to run the app from Visual Studio on your local computer</span></span>](#run-in-vs)
- [<span data-ttu-id="e0a3e-114">Come distribuire l'app di base in App Web del servizio app di Azure usando gli script di Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e0a3e-114">How to deploy the base app to Azure App Service Web Apps by using the Windows PowerShell scripts</span></span>](#deploybase)
- [<span data-ttu-id="e0a3e-115">Risoluzione dei problemi relativi agli script di Windows PowerShellTroubleshooting the Windows PowerShell scripts</span><span class="sxs-lookup"><span data-stu-id="e0a3e-115">Troubleshooting the Windows PowerShell scripts</span></span>](#troubleshooting)
- [<span data-ttu-id="e0a3e-116">Come distribuire l'app con l'elaborazione della coda alle app Web del servizio app di Azure e a un servizio cloud di AzureHow to deploy the app with queue processing to Azure App Web Apps and an Azure Cloud Service</span><span class="sxs-lookup"><span data-stu-id="e0a3e-116">How to deploy the app with queue processing to Azure App Service Web Apps and an Azure Cloud Service</span></span>](#deployqueues)

<a id="knownissues"></a>
## <a name="known-issues"></a><span data-ttu-id="e0a3e-117">Problemi noti</span><span class="sxs-lookup"><span data-stu-id="e0a3e-117">Known issues</span></span>

<span data-ttu-id="e0a3e-118">L'applicazione Fix It è stato originariamente sviluppato al fine di illustrare nel modo più semplice possibile alcuni dei modelli presentati in questo e-book.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-118">The Fix It app was originally developed in order to illustrate as simply as possible some of the patterns presented in this e-book.</span></span> <span data-ttu-id="e0a3e-119">Tuttavia, dal momento che l'e-book riguarda la creazione di applicazioni reali, abbiamo sottoposto il codice Fix It a un processo di revisione e test simile a quello che faremmo per il software rilasciato.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-119">However, since the e-book is about building real-world apps, we subjected the Fix It code to a review and testing process similar to what we'd do for released software.</span></span> <span data-ttu-id="e0a3e-120">Abbiamo trovato una serie di problemi, e come con qualsiasi applicazione reale, alcuni di loro abbiamo risolto e alcuni di loro abbiamo rinviato a una versione successiva.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-120">We found a number of issues, and as with any real-world application, some of them we fixed and some of them we deferred to a later release.</span></span>

<span data-ttu-id="e0a3e-121">L'elenco seguente include i problemi che devono essere risolti in un'applicazione di produzione, ma per un motivo o per l'altro abbiamo deciso di non risolvere nella versione iniziale dell'applicazione di esempio Fix It.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-121">The following list includes issues that should be addressed in a production application, but for one reason or another we decided not to address in the initial release of the Fix It sample application.</span></span>

### <a name="security"></a><span data-ttu-id="e0a3e-122">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="e0a3e-122">Security</span></span>

- <span data-ttu-id="e0a3e-123">Assicurarsi di non poter assegnare un'attività a un proprietario inesistente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-123">Ensure that you can't assign a task to a non-existent owner.</span></span>
- <span data-ttu-id="e0a3e-124">Assicurarsi di poter visualizzare e modificare solo le attività create o assegnate all'utente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-124">Ensure that you can only view and modify tasks that you created or are assigned to you.</span></span>
- <span data-ttu-id="e0a3e-125">Utilizzare HTTPS per le pagine di accesso e i cookie di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-125">Use HTTPS for sign-in pages and authentication cookies.</span></span>
- <span data-ttu-id="e0a3e-126">Specificare un limite di tempo per i cookie di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-126">Specify a time limit for authentication cookies.</span></span>

### <a name="input-validation"></a><span data-ttu-id="e0a3e-127">Convalida dell'input</span><span class="sxs-lookup"><span data-stu-id="e0a3e-127">Input validation</span></span>

<span data-ttu-id="e0a3e-128">In generale, un'app di produzione eseguirebbe più convalida dell'input rispetto all'app Fix It.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-128">In general, a production app would do more input validation than the Fix It app.</span></span> <span data-ttu-id="e0a3e-129">Ad esempio, la dimensione del file immagine / immagine consentita per il caricamento deve essere limitata.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-129">For example, the image size / image file size allowed for upload should be limited.</span></span>

### <a name="administrator-functionality"></a><span data-ttu-id="e0a3e-130">Funzionalità dell'amministratore</span><span class="sxs-lookup"><span data-stu-id="e0a3e-130">Administrator functionality</span></span>

<span data-ttu-id="e0a3e-131">Un amministratore deve essere in grado di modificare la proprietà delle attività esistenti.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-131">An administrator should be able to change ownership on existing tasks.</span></span> <span data-ttu-id="e0a3e-132">Ad esempio, il creatore di un'attività potrebbe lasciare l'azienda, senza che nessuno abbia l'autorità per mantenere l'attività a meno che non sia abilitato l'accesso amministrativo.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-132">For example, the creator of a task might leave the company, leaving no one with authority to maintain the task unless administrative access is enabled.</span></span>

### <a name="queue-message-processing"></a><span data-ttu-id="e0a3e-133">Elaborazione dei messaggi della coda</span><span class="sxs-lookup"><span data-stu-id="e0a3e-133">Queue message processing</span></span>

<span data-ttu-id="e0a3e-134">L'elaborazione dei messaggi in coda nell'app Fix It è stata progettata per essere semplice per illustrare il modello di lavoro incentrato sulla coda con una quantità minima di codice.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-134">Queue message processing in the Fix It app was designed to be simple in order to illustrate the queue-centric work pattern with a minimum amount of code.</span></span> <span data-ttu-id="e0a3e-135">Questo codice semplice non sarebbe adeguato per un'applicazione di produzione effettiva.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-135">This simple code would not be adequate for an actual production application.</span></span>

- <span data-ttu-id="e0a3e-136">Il codice non garantisce che ogni messaggio della coda verrà elaborato al massimo una volta.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-136">The code does not guarantee that each queue message will be processed at most once.</span></span> <span data-ttu-id="e0a3e-137">Quando si ottiene un messaggio dalla coda, si verifica un periodo di timeout, durante il quale il messaggio è invisibile ad altri listener della coda.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-137">When you get a message from the queue, there is a timeout period, during which the message is invisible to other queue listeners.</span></span> <span data-ttu-id="e0a3e-138">Se il timeout scade prima che il messaggio venga eliminato, il messaggio diventa nuovamente visibile.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-138">If the timeout expires before the message is deleted, the message becomes visible again.</span></span> <span data-ttu-id="e0a3e-139">Pertanto, se un'istanza del ruolo di lavoro impiega molto tempo nell'elaborazione di un messaggio, è teoricamente possibile che lo stesso messaggio venga elaborato due volte, generando un'attività duplicata nel database.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-139">Therefore, if a worker role instance spends a long time processing a message, it is theoretically possible for the same message to get processed twice, resulting in a duplicate task in the database.</span></span> <span data-ttu-id="e0a3e-140">Per altre informazioni su questo problema, vedere Uso delle code di Archiviazione di Azure .For more information about this issue, see [Using Azure Storage Queues](https://msdn.microsoft.com/library/ff803365.aspx#sec7).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-140">For more information about this issue, see [Using Azure Storage Queues](https://msdn.microsoft.com/library/ff803365.aspx#sec7).</span></span>
- <span data-ttu-id="e0a3e-141">La logica di polling della coda potrebbe essere più conveniente, eseguendo in batch il recupero dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-141">The queue polling logic could be more cost-effective, by batching message retrieval.</span></span> <span data-ttu-id="e0a3e-142">Ogni volta che chiami [CloudQueue.GetMessageAsync,](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessageasync.aspx)c'è un costo di transazione.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-142">Every time you call [CloudQueue.GetMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessageasync.aspx), there is a transaction cost.</span></span> <span data-ttu-id="e0a3e-143">Al contrario, è possibile chiamare [CloudQueue.GetMessagesAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessagesasync.aspx) (notare il plurale 's'), che ottiene più messaggi in una singola transazione.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-143">Instead, you can call [CloudQueue.GetMessagesAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessagesasync.aspx) (note the plural 's'), which gets multiple messages in a single transaction.</span></span> <span data-ttu-id="e0a3e-144">I costi di transazione per le code di archiviazione di Azure sono molto bassi, pertanto l'impatto sui costi non è sostanziale nella maggior parte degli scenari.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-144">The transaction costs for Azure Storage Queues are very low, so the impact on costs is not substantial in most scenarios.</span></span>
- <span data-ttu-id="e0a3e-145">Il ciclo stretto nel codice di elaborazione dei messaggi della coda causa l'affinità della CPU, che non utilizza macchine virtuali multi-core in modo efficiente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-145">The tight loop in the queue message-processing code causes CPU affinity, which does not utilize multi-core VMs efficiently.</span></span> <span data-ttu-id="e0a3e-146">Una progettazione migliore userebbe il parallelismo delle attività per eseguire diverse attività asincrone in parallelo.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-146">A better design would use task parallelism to run several async tasks in parallel.</span></span>
- <span data-ttu-id="e0a3e-147">L'elaborazione dei messaggi in coda ha solo una gestione rudimentale delle eccezioni.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-147">Queue message-processing has only rudimentary exception handling.</span></span> <span data-ttu-id="e0a3e-148">Ad esempio, il codice non gestisce i [messaggi non elaborabili.](https://msdn.microsoft.com/library/ms789028.aspx)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-148">For example, the code doesn't handle [poison messages](https://msdn.microsoft.com/library/ms789028.aspx).</span></span> <span data-ttu-id="e0a3e-149">Quando l'elaborazione dei messaggi causa un'eccezione, è necessario registrare l'errore ed eliminare il messaggio, altrimenti il ruolo di lavoro tenterà di elaborarlo nuovamente e il ciclo continuerà all'infinito.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-149">(When message processing causes an exception, you have to log the error and delete the message, or the worker role will try to process it again, and the loop will continue indefinitely.)</span></span>

### <a name="sql-queries-are-unbounded"></a><span data-ttu-id="e0a3e-150">Le query SQL sono senza limiti</span><span class="sxs-lookup"><span data-stu-id="e0a3e-150">SQL queries are unbounded</span></span>

<span data-ttu-id="e0a3e-151">Il codice Fix It corrente non pone alcun limite al numero di righe che le query per le pagine di indice potrebbero restituire.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-151">Current Fix It code places no limit on how many rows the queries for Index pages might return.</span></span> <span data-ttu-id="e0a3e-152">Se nel database viene immesso un volume elevato di attività, le dimensioni degli elenchi ricevuti potrebbero causare problemi di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-152">If a large volume of tasks is entered into the database, the size of the resulting lists received could cause performance issues.</span></span> <span data-ttu-id="e0a3e-153">La soluzione consiste nell'implementare il paging.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-153">The solution is to implement paging.</span></span> <span data-ttu-id="e0a3e-154">Per un esempio, vedere [Ordinamento, filtro e paging con Entity Framework in un'applicazione MVC ASP.NET](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-154">For an example, see [Sorting, Filtering, and Paging with the Entity Framework in an ASP.NET MVC Application](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md).</span></span>

### <a name="view-models-recommended"></a><span data-ttu-id="e0a3e-155">Visualizza i modelli consigliati</span><span class="sxs-lookup"><span data-stu-id="e0a3e-155">View models recommended</span></span>

<span data-ttu-id="e0a3e-156">L'app Fix It usa la classe di entità FixItTask per passare informazioni tra il controller e la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-156">The Fix It app uses the FixItTask entity class to pass information between the controller and the view.</span></span> <span data-ttu-id="e0a3e-157">È consigliabile utilizzare i modelli di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-157">A best practice is to use view models.</span></span> <span data-ttu-id="e0a3e-158">Il modello di dominio (ad esempio, la classe di entità FixItTask) è progettato in base a ciò che è necessario per la persistenza dei dati, mentre un modello di visualizzazione può essere progettato per la presentazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-158">The domain model (e.g., the FixItTask entity class) is designed around what is needed for data persistence, while a view model can be designed for data presentation.</span></span> <span data-ttu-id="e0a3e-159">Per ulteriori informazioni, vedere [12 ASP.NET MVC Best Practices](https://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-159">For more information, see [12 ASP.NET MVC Best Practices](https://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx).</span></span>

### <a name="secure-image-blob-recommended"></a><span data-ttu-id="e0a3e-160">Blob di immagini sicuro consigliatoSecure image blob recommended</span><span class="sxs-lookup"><span data-stu-id="e0a3e-160">Secure image blob recommended</span></span>

<span data-ttu-id="e0a3e-161">L'app Fix It archivia le immagini caricate come pubbliche, il che significa che chiunque trovi l'URL può accedere alle immagini.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-161">The Fix It app stores uploaded images as public, meaning that anyone who finds the URL can access the images.</span></span> <span data-ttu-id="e0a3e-162">Le immagini potrebbero essere protette invece che pubbliche.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-162">The images could be secured instead of public.</span></span>

### <a name="no-powershell-automation-scripts-for-queues"></a><span data-ttu-id="e0a3e-163">Nessun script di automazione di PowerShell per le code</span><span class="sxs-lookup"><span data-stu-id="e0a3e-163">No PowerShell automation scripts for queues</span></span>

<span data-ttu-id="e0a3e-164">Gli script di automazione di PowerShell di esempio sono stati scritti solo per la versione di base di Fix It che viene eseguita interamente nelle app Web del servizio app di Azure.Sample PowerShell automation scripts were written only for the base version of Fix It that runs entirely in Azure App Service Web Apps.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-164">Sample PowerShell automation scripts were written only for the base version of Fix It that runs entirely in Azure App Service Web Apps.</span></span> <span data-ttu-id="e0a3e-165">Non sono stati forniti script per l'impostazione e la distribuzione nell'app Web, oltre all'ambiente del servizio cloud necessario per l'elaborazione delle code.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-165">We haven't provided scripts for setting up and deploying to the web app plus Cloud Service environment required for queue processing.</span></span>

### <a name="special-handling-for-html-codes-in-user-input"></a><span data-ttu-id="e0a3e-166">Gestione speciale per i codici HTML nell'input dell'utente</span><span class="sxs-lookup"><span data-stu-id="e0a3e-166">Special handling for HTML codes in user input</span></span>

<span data-ttu-id="e0a3e-167">ASP.NET impedisce automaticamente molti modi in cui gli utenti malintenzionati potrebbero tentare attacchi di cross-site scripting immettendo script nelle caselle di testo di input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-167">ASP.NET automatically prevents many ways in which malicious users might attempt cross-site scripting attacks by entering script in user input text boxes.</span></span> <span data-ttu-id="e0a3e-168">E l'helper MVC `DisplayFor` utilizzato per visualizzare i titoli delle attività e le note codifica automaticamente automaticamente i valori che invia al browser.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-168">And the MVC `DisplayFor` helper used to display task titles and notes automatically HTML-encodes values that it sends to the browser.</span></span> <span data-ttu-id="e0a3e-169">Ma in un'app di produzione potresti voler adottare misure aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-169">But in a production app you might want to take additional measures.</span></span> <span data-ttu-id="e0a3e-170">Per ulteriori informazioni, vedere Convalida delle richieste [in ASP.NET](https://msdn.microsoft.com/library/hh882339.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-170">For more information, see [Request Validation in ASP.NET](https://msdn.microsoft.com/library/hh882339.aspx).</span></span>

<a id="bestpractices"></a>
## <a name="best-practices"></a><span data-ttu-id="e0a3e-171">Procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="e0a3e-171">Best practices</span></span>

<span data-ttu-id="e0a3e-172">Di seguito sono riportati alcuni problemi risolti dopo essere stati individuati nella revisione del codice e nel test della versione originale dell'app Fix It.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-172">Following are some issues that were fixed after being discovered in code review and testing of the original version of the Fix It app.</span></span> <span data-ttu-id="e0a3e-173">Alcuni sono stati causati dal programmatore originale non essendo a conoscenza di una particolare best practice, alcuni semplicemente perché il codice è stato scritto rapidamente e non era destinato per il software rilasciato.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-173">Some were caused by the original coder not being aware of a particular best practice, some simply because the code was written quickly and wasn't intended for released software.</span></span> <span data-ttu-id="e0a3e-174">Stiamo elencando i problemi qui nel caso in cui ci sia qualcosa che abbiamo imparato da questa recensione e test che potrebbe essere utile per gli altri che stanno anche sviluppando applicazioni web.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-174">We're listing the issues here in case there's something we learned from this review and testing that might be helpful to others who are also developing web apps.</span></span>

### <a name="dispose-the-database-repository"></a><span data-ttu-id="e0a3e-175">Eliminare l'archivio del database</span><span class="sxs-lookup"><span data-stu-id="e0a3e-175">Dispose the database repository</span></span>

<span data-ttu-id="e0a3e-176">La `FixItTaskRepository` classe deve eliminare `DbContext` l'istanza di Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-176">The `FixItTaskRepository` class must dispose the Entity Framework `DbContext` instance.</span></span> <span data-ttu-id="e0a3e-177">Abbiamo fatto questo `IDisposable` implementando nella `FixItTaskRepository` classe:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-177">We did this by implementing `IDisposable` in the `FixItTaskRepository` class:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample1.cs)]

<span data-ttu-id="e0a3e-178">Si noti che AutoFac rimuoverà automaticamente l'istanza, `FixItTaskRepository` pertanto non è necessario eliminarla in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-178">Note that AutoFac will automatically dispose the `FixItTaskRepository` instance, so we don't need to explicitly dispose it.</span></span>

<span data-ttu-id="e0a3e-179">Un'altra opzione `DbContext` consiste nel `FixItTaskRepository`rimuovere la variabile `DbContext` membro da , e `using` creare invece una variabile locale all'interno di ogni metodo del repository, all'interno di un'istruzione .</span><span class="sxs-lookup"><span data-stu-id="e0a3e-179">Another option is to remove the `DbContext` member variable from `FixItTaskRepository`, and instead create a local `DbContext` variable within each repository method, inside a `using` statement.</span></span> <span data-ttu-id="e0a3e-180">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-180">For example:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample2.cs)]

### <a name="register-singletons-as-such-with-di"></a><span data-ttu-id="e0a3e-181">Registrare i singleton come tali con DI</span><span class="sxs-lookup"><span data-stu-id="e0a3e-181">Register singletons as such with DI</span></span>

<span data-ttu-id="e0a3e-182">Poiché è necessaria `PhotoService` una `Logger` sola istanza della classe e della classe, queste classi devono essere [registrate come istanze singole per l'inserimento](https://code.google.com/p/autofac/wiki/InstanceScope) delle dipendenze in *DependenciesConfig.cs*:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-182">Since only one instance of the `PhotoService` class and `Logger` class is needed, these classes should be [registered as single instances for dependency injection](https://code.google.com/p/autofac/wiki/InstanceScope) in *DependenciesConfig.cs*:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample3.cs?highlight=1,3)]

### <a name="security-dont-show-error-details-to-users"></a><span data-ttu-id="e0a3e-183">Sicurezza: non mostrare dettagli sull'errore agli utenti</span><span class="sxs-lookup"><span data-stu-id="e0a3e-183">Security: Don't show error details to users</span></span>

<span data-ttu-id="e0a3e-184">L'app Fix It originale non disponeva di una pagina di errore generica e lasciava che tutte le eccezioni si propagasse all'interfaccia utente, pertanto alcune eccezioni, ad esempio errori di connessione al database, potrebbero causare la visualizzazione di un'analisi dello stack completa nel browser.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-184">The original Fix It app didn't have a generic error page and just let all exceptions bubble up to the UI, so some exceptions such as database connection errors could result in a full stack trace being displayed to the browser.</span></span> <span data-ttu-id="e0a3e-185">Informazioni dettagliate sugli errori possono talvolta facilitare gli attacchi da parte di utenti malintenzionati.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-185">Detailed error information can sometimes facilitate attacks by malicious users.</span></span> <span data-ttu-id="e0a3e-186">La soluzione consiste nel registrare i dettagli dell'eccezione e visualizzare una pagina di errore per l'utente che non include i dettagli dell'errore.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-186">The solution is to log the exception details and display an error page to the user that doesn't include error details.</span></span> <span data-ttu-id="e0a3e-187">L'app Fix It era già la registrazione e per `<customErrors mode=On>` visualizzare una pagina di errore, è stato aggiunto nel file Web.config.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-187">The Fix It app was already logging, and in order to display an error page, we added `<customErrors mode=On>` in the Web.config file.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample4.xml?highlight=2)]

<span data-ttu-id="e0a3e-188">Per impostazione predefinita, per gli errori viene visualizzata la visualizzazione di *visualizzazioni, ovvero Shared, Errorhtml.*</span><span class="sxs-lookup"><span data-stu-id="e0a3e-188">By default this causes *Views\Shared\Error.cshtml* to be displayed for errors.</span></span> <span data-ttu-id="e0a3e-189">È possibile personalizzare *Error.cshtml* o creare una `defaultRedirect` visualizzazione della pagina di errore personalizzata e aggiungere un attributo.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-189">You can customize *Error.cshtml* or create your own error page view and add a `defaultRedirect` attribute.</span></span> <span data-ttu-id="e0a3e-190">È inoltre possibile specificare pagine di errore diverse per errori specifici.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-190">You can also specify different error pages for specific errors.</span></span>

### <a name="security-only-allow-a-task-to-be-edited-by-its-creator"></a><span data-ttu-id="e0a3e-191">Sicurezza: consente solo a un'attività di essere modificata dal suo creatore</span><span class="sxs-lookup"><span data-stu-id="e0a3e-191">Security: only allow a task to be edited by its creator</span></span>

<span data-ttu-id="e0a3e-192">La pagina Indice dashboard mostra solo le attività create dall'utente connesso, ma un utente malintenzionato potrebbe creare un URL con un ID per l'attività di un altro utente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-192">The Dashboard Index page only shows tasks created by the logged-on user, but a malicious user could create a URL with an ID to another user's task.</span></span> <span data-ttu-id="e0a3e-193">Abbiamo aggiunto il codice in *DashboardController.cs* per restituire un 404 in questo caso:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-193">We added code in *DashboardController.cs* to return a 404 in that case:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample5.cs?highlight=9-14,24-29)]

### <a name="dont-swallow-exceptions"></a><span data-ttu-id="e0a3e-194">Non ingoiare eccezioni</span><span class="sxs-lookup"><span data-stu-id="e0a3e-194">Don't swallow exceptions</span></span>

<span data-ttu-id="e0a3e-195">L'applicazione Fix It originale appena restituito null dopo la registrazione di un'eccezione che ha causato da una query SQL:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-195">The original Fix It app just returned null after logging an exception that resulted from a SQL query:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample6.cs?highlight=4)]

<span data-ttu-id="e0a3e-196">In questo modo sarebbe guardare all'utente come se la query ha avuto esito positivo, ma semplicemente non ha restituito alcuna riga.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-196">This would make it look to the user as if the query succeeded but just didn't return any rows.</span></span> <span data-ttu-id="e0a3e-197">La soluzione consiste nel generare nuovamente l'eccezione dopo l'intercettazione e la registrazione:Solution is to re-throw the exception after catching and logging:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-197">Solution is to re-throw the exception after catching and logging:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample7.cs)]

### <a name="catch-all-exceptions-in-worker-roles"></a><span data-ttu-id="e0a3e-198">Intercettare tutte le eccezioni nei ruoli di lavoro</span><span class="sxs-lookup"><span data-stu-id="e0a3e-198">Catch all exceptions in worker roles</span></span>

<span data-ttu-id="e0a3e-199">Eventuali eccezioni non gestite in un ruolo di lavoro causeranno il riciclo della macchina virtuale, pertanto si desidera eseguire il wrapping di tutte le operazioni in un blocco try-catch e gestire tutte le eccezioni.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-199">Any unhandled exceptions in a worker role will cause the VM to be recycled, so you want to wrap everything you do in a try-catch block and handle all exceptions.</span></span>

### <a name="specify-length-for-string-properties-in-entity-classes"></a><span data-ttu-id="e0a3e-200">Specificare la lunghezza per le proprietà stringa nelle classi di entitàSpecify length for string properties in entity classes</span><span class="sxs-lookup"><span data-stu-id="e0a3e-200">Specify length for string properties in entity classes</span></span>

<span data-ttu-id="e0a3e-201">Per visualizzare codice semplice, la versione originale dell'app Fix It non ha specificato lunghezze per i campi dell'entità FixItTask e di conseguenza sono state definite come varchar(max) nel database.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-201">In order to display simple code, the original version of the Fix It app didn't specify lengths for the fields of the FixItTask entity, and as a result they were defined as varchar(max) in the database.</span></span> <span data-ttu-id="e0a3e-202">Di conseguenza, l'interfaccia utente accetterebbe quasi qualsiasi quantità di input.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-202">As a result, the UI would accept almost any amount of input.</span></span> <span data-ttu-id="e0a3e-203">Specificando lunghezze vengono impostati i limiti che si applicano sia all'input dell'utente nella pagina Web che alle dimensioni delle colonne nel database:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-203">Specifying lengths sets limits that apply both to user input in the web page and column size in the database:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample8.cs?highlight=4,7,10,12,14)]

### <a name="mark-private-members-as-readonly-when-they-arent-expected-to-change"></a><span data-ttu-id="e0a3e-204">Contrassegnare i membri privati come readonly quando non è previsto che cambino</span><span class="sxs-lookup"><span data-stu-id="e0a3e-204">Mark private members as readonly when they aren't expected to change</span></span>

<span data-ttu-id="e0a3e-205">Ad esempio, `DashboardController` nella classe `FixItTaskRepository` viene creata un'istanza di che non è prevista la modifica, pertanto è stata definita [readonly](https://msdn.microsoft.com/library/acdd6hb7.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-205">For example, in the `DashboardController` class an instance of `FixItTaskRepository` is created and isn't expected to change, so we defined it as [readonly](https://msdn.microsoft.com/library/acdd6hb7.aspx).</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample9.cs?highlight=3)]

### <a name="use-listany-instead-of-listcount-gt-0"></a><span data-ttu-id="e0a3e-206">Lista d'uso. Any() al posto di list. Count() &gt; 0</span><span class="sxs-lookup"><span data-stu-id="e0a3e-206">Use list.Any() instead of list.Count() &gt; 0</span></span>

<span data-ttu-id="e0a3e-207">Se si è interessati solo se uno o più elementi in [Any](https://msdn.microsoft.com/library/bb534972.aspx) un elenco soddisfano i criteri specificati, utilizzare il `Count` Any metodo, perché restituisce non appena viene trovato un elemento che si adatta ai criteri, mentre il metodo deve sempre scorrere ogni elemento.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-207">If you all you care about is whether one or more items in a list fit the specified criteria, use the [Any](https://msdn.microsoft.com/library/bb534972.aspx) method, because it returns as soon as an item fitting the criteria is found, whereas the `Count` method always has to iterate through every item.</span></span> <span data-ttu-id="e0a3e-208">Il file Dashboard *Index.cshtml* originariamente aveva questo codice:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-208">The Dashboard *Index.cshtml* file originally had this code:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample10.cshtml)]

<span data-ttu-id="e0a3e-209">L'abbiamo cambiato in questo:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-209">We changed it to this:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample11.cshtml?highlight=1)]

### <a name="generate-urls-in-mvc-views-using-mvc-helpers"></a><span data-ttu-id="e0a3e-210">Generare URL nelle visualizzazioni MVC usando gli helper MVCGenerate URLs in MVC views using MVC helpers</span><span class="sxs-lookup"><span data-stu-id="e0a3e-210">Generate URLs in MVC views using MVC helpers</span></span>

<span data-ttu-id="e0a3e-211">Per il pulsante **Crea una correzione** nella home page, l'app Fix It è hardcoded un elemento di ancoraggio:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-211">For the **Create a Fix It** button on the home page, the Fix It app hard coded an anchor element:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample12.cshtml)]

<span data-ttu-id="e0a3e-212">Per i collegamenti visualizzazione/azione come questo è preferibile utilizzare l'helper HTML [Url.Action,](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.action.aspx) ad esempio:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-212">For View/Action links like this it's better to use the [Url.Action](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.action.aspx) HTML helper, for example:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample13.cshtml)]

### <a name="use-taskdelay-instead-of-threadsleep-in-worker-role"></a><span data-ttu-id="e0a3e-213">Usare Task.Delay anziché Thread.Sleep nel ruolo di lavoroUse Task.Delay instead of Thread.Sleep in worker role</span><span class="sxs-lookup"><span data-stu-id="e0a3e-213">Use Task.Delay instead of Thread.Sleep in worker role</span></span>

<span data-ttu-id="e0a3e-214">Il modello di `Thread.Sleep` nuovo progetto inserisce il codice di esempio per un ruolo di lavoro, ma causando la sospensione del thread può causare il pool di thread generare thread non necessari aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-214">The new-project template puts `Thread.Sleep` in the sample code for a worker role, but causing the thread to sleep can cause the thread pool to spawn additional unnecessary threads.</span></span> <span data-ttu-id="e0a3e-215">È possibile evitare che utilizzando [Task.Delay](https://msdn.microsoft.com/library/hh139096.aspx) invece.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-215">You can avoid that by using [Task.Delay](https://msdn.microsoft.com/library/hh139096.aspx) instead.</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample14.cs?highlight=11)]

### <a name="avoid-async-void"></a><span data-ttu-id="e0a3e-216">Evitare l'annullamento asincronoAvoid async void</span><span class="sxs-lookup"><span data-stu-id="e0a3e-216">Avoid async void</span></span>

<span data-ttu-id="e0a3e-217">Se un metodo asincrono non deve restituire `Task` un valore, restituire un tipo anziché `void`.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-217">If an async method doesn't need to return a value, return a `Task` type rather than `void`.</span></span>

<span data-ttu-id="e0a3e-218">Questo esempio è `FixItQueueManager` tratto dalla classe :This example is from the class:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-218">This example is from the `FixItQueueManager` class:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample15.cs)]

<span data-ttu-id="e0a3e-219">È consigliabile utilizzare `async void` solo per i gestori eventi di primo livello.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-219">You should use `async void` only for top-level event handlers.</span></span> <span data-ttu-id="e0a3e-220">Se si definisce `async void`un metodo come , il chiamante non può **attendere** il metodo o intercettare eventuali eccezioni generate dal metodo.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-220">If you define a method as `async void`, the caller cannot **await** the method or catch any exceptions the method throws.</span></span> <span data-ttu-id="e0a3e-221">Per ulteriori informazioni, vedere [Procedure consigliate nella programmazione asincrona](https://msdn.microsoft.com/magazine/jj991977.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-221">For more information, see [Best Practices in Asynchronous Programming](https://msdn.microsoft.com/magazine/jj991977.aspx).</span></span>

### <a name="use-a-cancellation-token-to-break-from-worker-role-loop"></a><span data-ttu-id="e0a3e-222">Usare un token di annullamento per interrompere il ciclo del ruolo di lavoroUse a cancellation token to break from worker role loop</span><span class="sxs-lookup"><span data-stu-id="e0a3e-222">Use a cancellation token to break from worker role loop</span></span>

<span data-ttu-id="e0a3e-223">In genere, il **run** metodo su un ruolo di lavoro contiene un ciclo infinito.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-223">Typically, the **Run** method on a worker role contains an infinite loop.</span></span> <span data-ttu-id="e0a3e-224">Quando il ruolo di lavoro viene arrestato, viene chiamato il metodo [RoleEntryPoint.OnStop.](https://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-224">When the worker role is stopping, the [RoleEntryPoint.OnStop](https://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) method is called.</span></span> <span data-ttu-id="e0a3e-225">È necessario utilizzare questo metodo per annullare il lavoro che viene eseguito all'interno di **Run** metodo e uscire normalmente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-225">You should use this method to cancel the work that is being done inside the **Run** method and exit gracefully.</span></span> <span data-ttu-id="e0a3e-226">In caso contrario, il processo potrebbe essere terminato durante un'operazione.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-226">Otherwise, the process might be terminated in the middle of an operation.</span></span>

### <a name="opt-out-of-automatic-mime-sniffing-procedure"></a><span data-ttu-id="e0a3e-227">Disattivare la procedura di sniffing MIME automatico</span><span class="sxs-lookup"><span data-stu-id="e0a3e-227">Opt out of Automatic MIME Sniffing Procedure</span></span>

<span data-ttu-id="e0a3e-228">In alcuni casi, Internet Explorer segnala un tipo MIME diverso da quello specificato dal server Web.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-228">In some cases, Internet Explorer reports a MIME type different than the type specified by the web server.</span></span> <span data-ttu-id="e0a3e-229">Ad esempio, se Internet Explorer trova contenuto HTML in un file recapitato con l'intestazione di risposta HTTP Content-Type: text/plain, Internet Explorer determina che il rendering del contenuto deve essere eseguito come HTML.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-229">For instance, if Internet Explorer finds HTML content in a file delivered with the HTTP response header Content-Type: text/plain, Internet Explorer determines that the content should be rendered as HTML.</span></span> <span data-ttu-id="e0a3e-230">Sfortunatamente, questo "sniffing MIME" può anche causare problemi di sicurezza per i server che ospitano contenuto non attendibile.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-230">Unfortunately, this "MIME-sniffing" can also lead to security problems for servers hosting untrusted content.</span></span> <span data-ttu-id="e0a3e-231">Per combattere questo problema, Internet Explorer 8 ha apportato una serie di modifiche al codice di determinazione di tipo MIME e consente agli sviluppatori di applicazioni di [rifiutare esplicitamente lo sniffing MIME.](https://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-231">To combat this problem, Internet Explorer 8 has made a number of changes to MIME-type determination code and allows application developers to [opt out of MIME-sniffing](https://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx).</span></span> <span data-ttu-id="e0a3e-232">Il codice seguente è stato aggiunto al file *Web.config.*</span><span class="sxs-lookup"><span data-stu-id="e0a3e-232">The following code was added to the *Web.config* file.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample16.xml?highlight=2-7)]

### <a name="enable-bundling-and-minification"></a><span data-ttu-id="e0a3e-233">Abilitare l'aggregazione e la minimizzazione</span><span class="sxs-lookup"><span data-stu-id="e0a3e-233">Enable bundling and minification</span></span>

<span data-ttu-id="e0a3e-234">Quando Visual Studio crea un nuovo progetto web, l'aggregazione e la minimizzazione dei file JavaScript non sono abilitate per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-234">When Visual Studio creates a new web project, bundling and minification of JavaScript files is not enabled by default.</span></span> <span data-ttu-id="e0a3e-235">È stata aggiunta una riga di codice in BundleConfig.cs:We added a line of code in BundleConfig.cs:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-235">We added a line of code in BundleConfig.cs:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample17.cs?highlight=9)]

### <a name="set-an-expiration-time-out-for-authentication-cookies"></a><span data-ttu-id="e0a3e-236">Impostare un timeout di scadenza per i cookie di autenticazione</span><span class="sxs-lookup"><span data-stu-id="e0a3e-236">Set an expiration time-out for authentication cookies</span></span>

<span data-ttu-id="e0a3e-237">Per impostazione predefinita, i cookie di autenticazione scadono tra due settimane.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-237">By default, authentication cookies expire in two weeks.</span></span> <span data-ttu-id="e0a3e-238">Un tempo più breve è più sicuro.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-238">A shorter time is more secure.</span></span> <span data-ttu-id="e0a3e-239">È possibile modificare questa impostazione in *StartupAuth.cs:*</span><span class="sxs-lookup"><span data-stu-id="e0a3e-239">You can change this setting in *StartupAuth.cs*:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample18.cs?highlight=4-5)]

<a id="run-in-vs"></a>
## <a name="how-to-run-the-app-from-visual-studio-on-your-local-computer"></a><span data-ttu-id="e0a3e-240">Come eseguire l'app da Visual Studio nel computer localeHow to run the app from Visual Studio on your local computer</span><span class="sxs-lookup"><span data-stu-id="e0a3e-240">How to run the app from Visual Studio on your local computer</span></span>

<span data-ttu-id="e0a3e-241">Esistono due modi per eseguire l'app Fix It:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-241">There are two ways to run the Fix It app:</span></span>

- <span data-ttu-id="e0a3e-242">Eseguire l'applicazione di base che scrive nuove attività direttamente nel database SQL.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-242">Run the base application that writes new tasks directly to the SQL database.</span></span>
- <span data-ttu-id="e0a3e-243">Eseguire l'applicazione usando una coda più un servizio back-end per creare attività.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-243">Run the application using a queue plus a backend service to create tasks.</span></span> <span data-ttu-id="e0a3e-244">Il modello di coda è descritto nel capitolo Modello di [lavoro Centra-Centrico](queue-centric-work-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-244">The queue pattern is described in the chapter [Queue-Centric Work Pattern](queue-centric-work-pattern.md).</span></span>

<a id="runbase"></a>
### <a name="run-the-base-application"></a><span data-ttu-id="e0a3e-245">Eseguire l'applicazione di base</span><span class="sxs-lookup"><span data-stu-id="e0a3e-245">Run the base application</span></span>

1. <span data-ttu-id="e0a3e-246">Installare [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-246">Install [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017).</span></span>
2. <span data-ttu-id="e0a3e-247">Installare [Azure SDK per .NET per Visual Studio](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-247">Install the [Azure SDK for .NET for Visual Studio](https://azure.microsoft.com/downloads/).</span></span>
3. <span data-ttu-id="e0a3e-248">Scaricare il file .zip da [MSDN Code Gallery](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-248">Download the .zip file from the [MSDN Code Gallery](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4).</span></span>
4. <span data-ttu-id="e0a3e-249">In Esplora file fare clic con il pulsante destro del mouse sul file .zip e scegliere Proprietà, quindi nella finestra Proprietà fare clic su Sblocca.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-249">In File Explorer, right-click the .zip file and click Properties, then in the Properties window click Unblock.</span></span>
5. <span data-ttu-id="e0a3e-250">Decomprimere il file.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-250">Unzip the file.</span></span>
6. <span data-ttu-id="e0a3e-251">Fare doppio clic sul file sln per avviare Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-251">Double-click the .sln file to launch Visual Studio.</span></span>
7. <span data-ttu-id="e0a3e-252">Scegliere Gestione pacchetti **NuGet**dal menu **Strumenti** , quindi **Console gestione pacchetti**.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-252">From the **Tools** menu, click **NuGet Package Manager**, then **Package Manager Console**.</span></span>
8. <span data-ttu-id="e0a3e-253">Nella Console di gestione pacchetti (PMC), fare clic su Ripristina.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-253">In the Package Manager Console (PMC), click Restore.</span></span>
9. <span data-ttu-id="e0a3e-254">Uscire da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-254">Exit Visual Studio.</span></span>
10. <span data-ttu-id="e0a3e-255">Avviare l'emulatore di [archiviazione di Azure.](/azure/storage/common/storage-use-emulator)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-255">Start the [Azure storage emulator](/azure/storage/common/storage-use-emulator).</span></span>
11. <span data-ttu-id="e0a3e-256">Riavviare Visual Studio, aprendo il file di soluzione chiuso nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-256">Restart Visual Studio, opening the solution file you closed in the previous step.</span></span>
12. <span data-ttu-id="e0a3e-257">Assicurarsi che il progetto FixIt è impostato come progetto di avvio e quindi premere CTRL e F5 per eseguire il progetto.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-257">Make sure the FixIt project is set as the startup project, and then press CTRL+F5 to run the project.</span></span>

<a id="queueslocal"></a>
### <a name="run-the-application-with-queue-processing"></a><span data-ttu-id="e0a3e-258">Eseguire l'applicazione con l'elaborazione della codaRun the application with queue processing</span><span class="sxs-lookup"><span data-stu-id="e0a3e-258">Run the application with queue processing</span></span>

1. <span data-ttu-id="e0a3e-259">Seguire le istruzioni per [Eseguire l'applicazione di base](#runbase), quindi chiudere il browser e chiudere Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-259">Follow the directions for [Run the base application](#runbase), and then close the browser and close Visual Studio.</span></span>
2. <span data-ttu-id="e0a3e-260">Avviare Visual Studio con privilegi di amministratore.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-260">Start Visual Studio with administrator privileges.</span></span> <span data-ttu-id="e0a3e-261">Si userà l'emulatore di calcolo di Azure e ciò richiede privilegi di amministratore.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-261">(You'll be using the Azure compute emulator, and that requires administrator privileges.)</span></span>
3. <span data-ttu-id="e0a3e-262">Nel file *Web.config* dell'applicazione nel progetto *MyFixIt* (il `appSettings/UseQueues` progetto Web), modificare il valore di su "true":</span><span class="sxs-lookup"><span data-stu-id="e0a3e-262">In the application *Web.config* file in the *MyFixIt* project (the web project), change the value of `appSettings/UseQueues` to "true":</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample19.cmd?highlight=3)]
4. <span data-ttu-id="e0a3e-263">Se [l'emulatore](https://msdn.microsoft.com/library/windowsazure/hh403989.aspx) di archiviazione di Azure non è ancora in esecuzione, riavviarlo.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-263">If the [Azure storage emulator](https://msdn.microsoft.com/library/windowsazure/hh403989.aspx) isn't still running, start it again.</span></span>
5. <span data-ttu-id="e0a3e-264">Eseguire contemporaneamente il progetto Web FixIt e il progetto MyFixItCloudService.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-264">Run the FixIt web project and the MyFixItCloudService project simultaneously.</span></span>

    <span data-ttu-id="e0a3e-265">Utilizzo di Visual Studio:Using Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-265">Using Visual Studio:</span></span>

   1. <span data-ttu-id="e0a3e-266">Premere **F5** per eseguire il progetto FixIt.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-266">Press **F5** to run the FixIt project.</span></span>
   2. <span data-ttu-id="e0a3e-267">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul progetto MyFixItCloudService , quindi scegliere Avvia **debug** > **nuova istanza**.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-267">In **Solution Explorer**, right-click the MyFixItCloudService project, and then click **Debug** > **Start New Instance**.</span></span>

    <span data-ttu-id="e0a3e-268">Utilizzo di Visual Studio 2013 Express per Web:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-268">Using Visual Studio 2013 Express for Web:</span></span>

   3. <span data-ttu-id="e0a3e-269">In Esplora soluzioni fare clic con il pulsante destro del mouse sulla soluzione FixIt e scegliere **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-269">In Solution Explorer, right-click the FixIt solution and select **Properties**.</span></span>
   4. <span data-ttu-id="e0a3e-270">Selezionare **Più progetti di avvio**.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-270">Select **Multiple Startup Projects**.</span></span>
   5. <span data-ttu-id="e0a3e-271">Nell'elenco a discesa **Azione** in MyFixIt e MyFixItCloudService selezionare **Start**.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-271">In the **Action** dropdown list under MyFixIt and MyFixItCloudService, select **Start**.</span></span>
   6. <span data-ttu-id="e0a3e-272">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-272">Click **OK**.</span></span>
   7. <span data-ttu-id="e0a3e-273">Premere **F5** per eseguire entrambi i progetti.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-273">Press **F5** to run both projects.</span></span>

      <span data-ttu-id="e0a3e-274">Quando si esegue il progetto MyFixItCloudService, Visual Studio avvia l'emulatore di calcolo di Azure.When you run the MyFixItCloudService project, Visual Studio starts the Azure compute emulator.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-274">When you run the MyFixItCloudService project, Visual Studio starts the Azure compute emulator.</span></span> <span data-ttu-id="e0a3e-275">A seconda della configurazione del firewall, potrebbe essere necessario consentire l'emulatore attraverso il firewall.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-275">Depending on your firewall configuration, you might need to allow the emulator through the firewall.</span></span>

<a id="deploybase"></a>
## <a name="how-to-deploy-the-base-app-to-azure-app-service-web-apps-by-using-the-windows-powershell-scripts"></a><span data-ttu-id="e0a3e-276">Come distribuire l'app di base in App Web del servizio app di Azure usando gli script di Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e0a3e-276">How to deploy the base app to Azure App Service Web Apps by using the Windows PowerShell scripts</span></span>

<span data-ttu-id="e0a3e-277">Per illustrare il modello [Automatizza tutto,](automate-everything.md) l'app Fix It viene fornita con script che configurano un ambiente in Azure e distribuiscono il progetto nel nuovo ambiente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-277">To illustrate the [Automate Everything](automate-everything.md) pattern, the Fix It app is supplied with scripts that set up an environment in Azure and deploy the project to the new environment.</span></span> <span data-ttu-id="e0a3e-278">Le istruzioni seguenti spiegano come utilizzare gli script.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-278">The following instructions explain how to use the scripts.</span></span>

<span data-ttu-id="e0a3e-279">Se si vuole eseguire in Azure senza usare le code e le modifiche sono state apportate per l'esecuzione locale con le code, assicurarsi di impostare il valore useQueues appSetting su false prima di procedere con le istruzioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-279">If you want to run in Azure without using queues, and you made the changes to run locally with queues, make sure you set the UseQueues appSetting value back to false before proceeding with the following instructions.</span></span>

<span data-ttu-id="e0a3e-280">Queste istruzioni presuppongono che la soluzione Fix It sia già stata scaricata ed eseguita in locale e che si disponga di un account Azure o di una sottoscrizione di Azure che si è autorizzati a gestire.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-280">These instructions assume you have already downloaded and run the Fix It solution locally, and that you have an Azure account or have an Azure subscription that you are authorized to manage.</span></span>

1. <span data-ttu-id="e0a3e-281">Installare la console di **Azure PowerShell.Install** the Azure PowerShell console.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-281">Install the **Azure PowerShell** console.</span></span> <span data-ttu-id="e0a3e-282">Per istruzioni, vedere [Come installare e configurare Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.3.1).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-282">For instructions, see [How to install and configure Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.3.1).</span></span>

    <span data-ttu-id="e0a3e-283">Questa console personalizzata è configurata per funzionare con la sottoscrizione di Azure.This customized console is configured to work with your Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-283">This customized console is configured to work with your Azure subscription.</span></span> <span data-ttu-id="e0a3e-284">Il modulo di Azure viene installato nella directory Programmi e viene importato automaticamente in ogni utilizzo della console di Azure PowerShell.The Azure module is installed in the *Program Files* directory and is automatically imported on every used of the Azure PowerShell console.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-284">The Azure module is installed in the *Program Files* directory and is automatically imported on every use of the Azure PowerShell console.</span></span>

    <span data-ttu-id="e0a3e-285">Se si preferisce utilizzare un programma host diverso, ad esempio Windows PowerShell ISE, assicurarsi di usare il cmdlet [Import-Module](https://go.microsoft.com/fwlink/?LinkID=141553) per importare il modulo di Azure o usare un comando nel modulo di Azure per attivare l'importazione automatica del modulo.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-285">If you prefer to work in a different host program, such as Windows PowerShell ISE, be sure to use the [Import-Module](https://go.microsoft.com/fwlink/?LinkID=141553) cmdlet to import the Azure module or use a command in the Azure module to trigger automatic importing of the module.</span></span>
2. <span data-ttu-id="e0a3e-286">Avviare Azure PowerShell con l'opzione **Esegui come amministratore.**</span><span class="sxs-lookup"><span data-stu-id="e0a3e-286">Start Azure PowerShell with the **Run as administrator** option.</span></span>
3. <span data-ttu-id="e0a3e-287">Eseguire il cmdlet [Set-ExecutionPolicy](https://go.microsoft.com/fwlink/p/?linkid=293941) per impostare `RemoteSigned`i criteri di esecuzione di Azure PowerShell su .</span><span class="sxs-lookup"><span data-stu-id="e0a3e-287">Run the [Set-ExecutionPolicy](https://go.microsoft.com/fwlink/p/?linkid=293941) cmdlet to set the Azure PowerShell execution policy to `RemoteSigned`.</span></span> <span data-ttu-id="e0a3e-288">Immettere **Y** (per Sì) per completare la modifica del criterio.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-288">Enter **Y** (for Yes) to complete the policy change.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample20.cmd)]

    <span data-ttu-id="e0a3e-289">Questa impostazione consente di eseguire script locali senza firma digitale.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-289">This setting enables you to run local scripts that aren't digitally signed.</span></span> <span data-ttu-id="e0a3e-290">È anche possibile impostare `Unrestricted`i criteri di esecuzione su , eliminando la necessità di un passaggio di sblocco in un secondo momento, ma questa operazione non è consigliata per motivi di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-290">(You can also set the execution policy to `Unrestricted`, which would eliminate the need for the unblock step later, but this is not recommended for security reasons.)</span></span>
4. <span data-ttu-id="e0a3e-291">Eseguire `Add-AzureAccount` il cmdlet per configurare PowerShell con le credenziali per l'account.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-291">Run the `Add-AzureAccount` cmdlet to set up PowerShell with credentials for your account.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample21.cmd)]

    <span data-ttu-id="e0a3e-292">Queste credenziali scadono dopo un periodo di tempo ed `Add-AzureAccount` è necessario eseguire nuovamente il cmdlet.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-292">These credentials expire after a period of time and you have to re-run the `Add-AzureAccount` cmdlet.</span></span> <span data-ttu-id="e0a3e-293">Mentre questo e-book è in fase di scrittura, il limite di tempo prima della scadenza delle credenziali è di 12 ore.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-293">As this e-book is being written, the time limit before credentials expire is 12 hours.</span></span>
5. <span data-ttu-id="e0a3e-294">Se si dispone di più sottoscrizioni, usare il cmdlet Select-AzureSubscription per specificare la sottoscrizione in cui si vuole creare l'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-294">If you have multiple subscriptions, use the Select-AzureSubscription cmdlet to specify the subscription you want to create the test environment in.</span></span>
6. <span data-ttu-id="e0a3e-295">Importare un certificato di gestione per `Get-AzurePublishSettingsFile` la `Import-AzurePublishSettingsFile` stessa sottoscrizione di Azure usando i cmdlet e .</span><span class="sxs-lookup"><span data-stu-id="e0a3e-295">Import a management certificate for the same Azure subscription by using the `Get-AzurePublishSettingsFile` and `Import-AzurePublishSettingsFile` cmdlets.</span></span> <span data-ttu-id="e0a3e-296">Il primo di questi cmdlet scarica un file di certificato e nel secondo si specifica il percorso di tale file per importarlo.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-296">The first of these cmdlets downloads a certificate file, and in the second one you specify the location of that file in order to import it.</span></span> > [!IMPORTANT]
   > <span data-ttu-id="e0a3e-297">Mantenere il file scaricato in un percorso sicuro o eliminarlo al termine, perché contiene un certificato che può essere usato per gestire i servizi di Azure.Keep the downloaded file in a safe location or delete it when you're done with it, because it contains a certificate that can be used to manage your Azure services.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-297">Keep the downloaded file in a safe location or delete it when you're done with it, because it contains a certificate that can be used to manage your Azure services.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample22.cmd)]

    <span data-ttu-id="e0a3e-298">Il certificato viene utilizzato per una chiamata all'API REST che rileva l'indirizzo IP del computer di sviluppo per impostare una regola del firewall nel server di database SQL.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-298">The certificate is used for a REST API call that detects the development machine's IP address in order to set a firewall rule on the SQL Database server.</span></span>
7. <span data-ttu-id="e0a3e-299">Eseguire il cmdlet [Set-Location](https://go.microsoft.com/fwlink/p/?linkid=293912) (gli `chdir`alias `sl`sono `cd`, e ) per passare alla directory che contiene gli script.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-299">Run the [Set-Location](https://go.microsoft.com/fwlink/p/?linkid=293912) cmdlet (aliases are `cd`, `chdir`, and `sl`) to navigate to the directory that contains the scripts.</span></span> <span data-ttu-id="e0a3e-300">(Si trovano nella cartella *di automazione* nella cartella della soluzione Fix It.) Inserire il percorso tra virgolette se uno dei nomi di directory contiene spazi.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-300">(They're located in the *Automation* folder in the Fix It solution folder.) Put the path in quotes if any of the directory names contain spaces.</span></span> <span data-ttu-id="e0a3e-301">Ad esempio, per `c:\Sample Apps\FixIt\Automation` passare alla directory è possibile immettere il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-301">For example, to navigate to the `c:\Sample Apps\FixIt\Automation` directory you could enter the following command:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample23.cmd)]
8. <span data-ttu-id="e0a3e-302">Per consentire a Windows PowerShell di eseguire questi script, utilizzare il cmdlet [Unblock-File.](https://go.microsoft.com/fwlink/p/?linkid=294021)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-302">To allow Windows PowerShell to run these scripts, use the [Unblock-File](https://go.microsoft.com/fwlink/p/?linkid=294021) cmdlet.</span></span> <span data-ttu-id="e0a3e-303">Gli script vengono bloccati perché sono stati scaricati da Internet.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-303">(The scripts are blocked because they were downloaded from the Internet.)</span></span>

    > [!WARNING]
    > <span data-ttu-id="e0a3e-304">Sicurezza - `Unblock-File` Prima di eseguire su qualsiasi script o file eseguibile, aprire il file nel Blocco note, esaminare i comandi e verificare che non contengano codice dannoso.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-304">Security - Before running `Unblock-File` on any script or executable file, open the file in Notepad, examine the commands, and verify that they do not contain any malicious code.</span></span>

    <span data-ttu-id="e0a3e-305">Ad esempio, il comando `Unblock-File` seguente esegue il cmdlet su tutti gli script nella directory corrente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-305">For example, the following command runs the `Unblock-File` cmdlet on all scripts in the current directory.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample24.cmd)]
9. <span data-ttu-id="e0a3e-306">Per creare l'app Web per l'app Fix It di base (nessuna elaborazione delle code), eseguire lo script di creazione dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-306">To create the web app for the base (no queues processing) Fix It app, run the environment creation script.</span></span>

    <span data-ttu-id="e0a3e-307">Il `Name` parametro obbligatorio specifica il nome del database e viene utilizzato anche per l'account di archiviazione creato dallo script.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-307">The required `Name` parameter specifies the name of the database and is also used for the storage account that the script creates.</span></span> <span data-ttu-id="e0a3e-308">Il nome deve essere univoco a livello globale all'interno del dominio azurewebsites.net.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-308">The name must be globally unique within the azurewebsites.net domain.</span></span> <span data-ttu-id="e0a3e-309">Se si specifica un nome non univoco, ad esempio Fixit o Test (o `New-AzureWebsite` anche come nell'esempio, fixitdemo), il cmdlet ha esito negativo con un errore interno che segnala un conflitto.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-309">If you specify a name that is not unique, like Fixit or Test (or even as in the example, fixitdemo), the `New-AzureWebsite` cmdlet fails with an Internal Error that reports a conflict.</span></span> <span data-ttu-id="e0a3e-310">Lo script converte il nome in lettere minuscole in modo che sia conforme ai requisiti dei nomi per le app Web, gli account di archiviazione e i database.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-310">The script converts the name to all lower-case to comply with name requirements for web apps, storage accounts, and databases.</span></span>

    <span data-ttu-id="e0a3e-311">Il `SqlDatabasePassword` parametro obbligatorio consente di specificare la password per l'account amministratore che verrà creato per il database SQL.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-311">The required `SqlDatabasePassword` parameter specifies the password for the admin account that will be created for SQL Database.</span></span> <span data-ttu-id="e0a3e-312">Non includere caratteri XML speciali nella&amp; &lt; &gt; password (;).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-312">Don't include special XML characters in the password (&amp; &lt; &gt; ;).</span></span> <span data-ttu-id="e0a3e-313">Si tratta di una limitazione del modo in cui sono stati scritti gli script, non di Azure.This is a limitation of the way the scripts were written, not a limitation of Azure.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-313">This is a limitation of the way the scripts were written, not a limitation of Azure.</span></span>

    <span data-ttu-id="e0a3e-314">Ad esempio, se si desidera creare un'app Web denominata "fixitdemo" e utilizzare una password di amministratore di SQL Server di "Passw0rd1", è possibile immettere il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-314">For example, if you want to create a web app named "fixitdemo" and use a SQL Server administrator password of "Passw0rd1", you could enter the following command:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample25.cmd)]

    <span data-ttu-id="e0a3e-315">Il nome deve essere univoco nel dominio azurewebsites.net e la password deve soddisfare i requisiti del database SQL per la complessità della password.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-315">The name must be unique in the azurewebsites.net domain, and the password must meet SQL Database requirements for password complexity.</span></span> <span data-ttu-id="e0a3e-316">(L'esempio Passw0rd1 soddisfa i requisiti.)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-316">(The example Passw0rd1 does meet the requirements.)</span></span>

    <span data-ttu-id="e0a3e-317">Si noti che il comando inizia con ". \".</span><span class="sxs-lookup"><span data-stu-id="e0a3e-317">Note that the command begins with ".\".</span></span> <span data-ttu-id="e0a3e-318">Per impedire l'esecuzione di script dannosi, Windows PowerShell richiede di fornire il percorso completo del file di script quando si esegue uno script.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-318">To help prevent malicious execution of scripts, Windows PowerShell requires that you provide the fully qualified path to the script file when you run a script.</span></span> <span data-ttu-id="e0a3e-319">È possibile utilizzare un punto per\"indicare la directory corrente (". ) o fornire il percorso completo, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-319">You can use a dot to indicate the current directory (".\") or provide the fully qualified path, such as:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample26.cmd)]

    <span data-ttu-id="e0a3e-320">Per ulteriori informazioni sullo script, utilizzare il `Get-Help` cmdlet.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-320">For more information about the script, use the `Get-Help` cmdlet.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample27.cmd)]

    <span data-ttu-id="e0a3e-321">È possibile `Detailed`utilizzare `Full` `Parameters`i `Examples` parametri , , e del cmdlet Get-Help per filtrare la Guida restituita.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-321">You can use the `Detailed`, `Full`, `Parameters`, and `Examples` parameters of the Get-Help cmdlet to filter the help that is returned.</span></span>

    <span data-ttu-id="e0a3e-322">Se lo script ha esito negativo o genera errori, ad esempio "New-AzureWebsite: Call Set-AzureSubscription e Select-AzureSubscription prima", è possibile che la configurazione di Azure PowerShell non sia stata completata.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-322">If the script fails or generates errors, such as "New-AzureWebsite : Call Set-AzureSubscription and Select-AzureSubscription first," you might not have completed the configuration of Azure PowerShell.</span></span>

    <span data-ttu-id="e0a3e-323">Al termine dello script, è possibile usare il portale di gestione di Azure per visualizzare le risorse create, come illustrato nel capitolo [Automatizzare tutto.](automate-everything.md)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-323">After the script finishes, you can use the Azure Management Portal to see the resources that were created, as shown in the [Automate Everything](automate-everything.md) chapter.</span></span>
10. <span data-ttu-id="e0a3e-324">Per distribuire il progetto FixIt nel nuovo ambiente Azure, usare lo script *AzureWebsite.ps1.To* deploy the FixIt project to the new Azure environment, use the AzureWebsite.ps1 script.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-324">To deploy the FixIt project to the new Azure environment, use the *AzureWebsite.ps1* script.</span></span> <span data-ttu-id="e0a3e-325">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-325">For example:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample28.cmd)]

    <span data-ttu-id="e0a3e-326">Al termine della distribuzione, il browser viene aperto con Fix It in esecuzione in Azure.When deployment is done, the browser opens with Fix It running in Azure.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-326">When deployment is done, the browser opens with Fix It running in Azure.</span></span>

<a id="troubleshooting"></a>
## <a name="troubleshooting-the-windows-powershell-scripts"></a><span data-ttu-id="e0a3e-327">Risoluzione dei problemi relativi agli script di Windows PowerShellTroubleshooting the Windows PowerShell scripts</span><span class="sxs-lookup"><span data-stu-id="e0a3e-327">Troubleshooting the Windows PowerShell scripts</span></span>

<span data-ttu-id="e0a3e-328">Gli errori più comuni riscontrati durante l'esecuzione di questi script sono correlati alle autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-328">The most common errors encountered when running these scripts are related to permissions.</span></span> <span data-ttu-id="e0a3e-329">Assicurarsi `Add-AzureAccount` che `Import-AzurePublishSettingsFile` e che hanno avuto esito positivo e che sono stati usati per la stessa sottoscrizione di Azure.Make sure that and were successful and that you used them for the same Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-329">Make sure that `Add-AzureAccount` and `Import-AzurePublishSettingsFile` were successful and that you used them for the same Azure subscription.</span></span> <span data-ttu-id="e0a3e-330">Anche `Add-AzureAccount` se ha avuto successo potrebbe essere necessario eseguirlo di nuovo.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-330">Even if `Add-AzureAccount` was successful you might have to run it again.</span></span> <span data-ttu-id="e0a3e-331">Le autorizzazioni `Add-AzureAccount` aggiunte da scadranno tra 12 ore.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-331">The permissions added by `Add-AzureAccount` expire in 12 hours.</span></span>

### <a name="object-reference-not-set-to-an-instance-of-an-object"></a><span data-ttu-id="e0a3e-332">Riferimento oggetto non impostato su un'istanza di un oggetto.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-332">Object reference not set to an instance of an object.</span></span>

<span data-ttu-id="e0a3e-333">Se lo script restituisce errori, ad esempio "Riferimento all'oggetto non impostato su un'istanza di un oggetto", il che `Add-AzureAccount` significa che Windows PowerShell non riesce a trovare un oggetto da elaborare (si tratta di un'eccezione di riferimento null), eseguire il cmdlet e riprovare a eseguire lo script.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-333">If the script returns errors, such as "Object reference not set to an instance of an object," which means that Windows PowerShell can't find an object to process (this is a null reference exception), run the `Add-AzureAccount` cmdlet and try the script again.</span></span>

[!code-console[Main](the-fix-it-sample-application/samples/sample29.cmd)]

### <a name="internalerror-the-server-encountered-an-internal-error"></a><span data-ttu-id="e0a3e-334">InternalError: il server ha rilevato un errore interno.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-334">InternalError: The server encountered an internal error.</span></span>

<span data-ttu-id="e0a3e-335">Il `New-AzureWebsite` cmdlet restituisce un errore interno quando il nome non è univoco nel dominio azurewebsites.net.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-335">The `New-AzureWebsite` cmdlet returns an internal error when the name is not unique in the azurewebsites.net domain.</span></span> <span data-ttu-id="e0a3e-336">Per risolvere l'errore, usare un valore diverso per il nome, che si trova nel parametro Name di *New-AzureWebsiteEnv.ps1*.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-336">To resolve the error, use a different value for the name, which is in the Name parameter of *New-AzureWebsiteEnv.ps1*.</span></span>

[!code-console[Main](the-fix-it-sample-application/samples/sample30.cmd)]

### <a name="restarting-the-script"></a><span data-ttu-id="e0a3e-337">Riavvio dello script</span><span class="sxs-lookup"><span data-stu-id="e0a3e-337">Restarting the script</span></span>

<span data-ttu-id="e0a3e-338">Se è necessario riavviare lo script *New-AzureWebsiteEnv.ps1* perché non è riuscito prima di stampare il messaggio "Script è stato completato", è possibile eliminare le risorse create dallo script prima dell'arresto.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-338">If you need to restart the *New-AzureWebsiteEnv.ps1* script because it failed before it printed the "Script is complete" message, you might want to delete resources that the script created before it stopped.</span></span> <span data-ttu-id="e0a3e-339">Ad esempio, se lo script ha già creato l'app Web ContosoFixItDemo e lo si esegue nuovamente con lo stesso nome, lo script avrà esito negativo perché il nome è in uso.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-339">For example, if the script already created the ContosoFixItDemo web app and you run the script again with the same name, the script will fail because the name is in use.</span></span>

<span data-ttu-id="e0a3e-340">Per determinare le risorse create dallo script prima dell'arresto, utilizzare i cmdlet seguenti:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-340">To determine which resources the script created before it stopped, use the following cmdlets:</span></span>

- `Get-AzureWebsite`
- `Get-AzureSqlDatabaseServer`
- <span data-ttu-id="e0a3e-341">`Get-AzureSqlDatabase`: per eseguire questo cmdlet, assegnare un'epipeiazione al nome del server di database: `Get-AzureSqlDatabase``Get-AzureSqlDatabaseServer | Get-AzureSqlDatabase.`</span><span class="sxs-lookup"><span data-stu-id="e0a3e-341">`Get-AzureSqlDatabase`: To run this cmdlet, pipe the database server name to `Get-AzureSqlDatabase`:   `Get-AzureSqlDatabaseServer | Get-AzureSqlDatabase.`</span></span>

<span data-ttu-id="e0a3e-342">Per eliminare queste risorse, utilizzare i comandi seguenti.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-342">To delete these resources, use the following commands.</span></span> <span data-ttu-id="e0a3e-343">Si noti che se si elimina il server di database, si eliminano automaticamente i database associati al server.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-343">Note that if you delete the database server, you automatically delete the databases associated with the server.</span></span>

- `Get-AzureWebsite -Name <WebsiteName> | Remove-AzureWebsite`
- `Get-AzureSqlDatabase -Name <DatabaseName> -ServerName <DatabaseServerName> | Remove-SqlAzureDatabase`
- `Get-AzureSqlDatabaseServer | Remove-AzureSqlDatabaseServer`

<a id="deployqueues"></a>
## <a name="how-to-deploy-the-app-with-queue-processing-to-azure-app-service-web-apps-and-an-azure-cloud-service"></a><span data-ttu-id="e0a3e-344">Come distribuire l'app con l'elaborazione della coda alle app Web del servizio app di Azure e a un servizio cloud di AzureHow to deploy the app with queue processing to Azure App Web Apps and an Azure Cloud Service</span><span class="sxs-lookup"><span data-stu-id="e0a3e-344">How to deploy the app with queue processing to Azure App Service Web Apps and an Azure Cloud Service</span></span>

<span data-ttu-id="e0a3e-345">Per abilitare le code, apportare la seguente modifica nel file MyFixIt-Web.config.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-345">To enable queues, make the following change in the MyFixIt\Web.config file.</span></span> <span data-ttu-id="e0a3e-346">In `appSettings`, modificare `UseQueues` il valore di "true":</span><span class="sxs-lookup"><span data-stu-id="e0a3e-346">Under `appSettings`, change the value of `UseQueues` to "true":</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample31.xml)]

<span data-ttu-id="e0a3e-347">Distribuire quindi l'applicazione MVC in un'app Web nel servizio app di Azure, come descritto [in precedenza.](#deploybase)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-347">Then deploy the MVC application to an web app in Azure App Service, as described [earlier](#deploybase).</span></span>

<span data-ttu-id="e0a3e-348">Successivamente, creare un nuovo servizio cloud di Azure.Next, create a new Azure cloud service.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-348">Next, create a new Azure cloud service.</span></span> <span data-ttu-id="e0a3e-349">Gli script inclusi nell'app Fix It non creano o distribuiscono il servizio cloud, pertanto è necessario usare il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-349">The scripts included with the Fix It app do not create or deploy the cloud service, so you must use Azure portal for this.</span></span> <span data-ttu-id="e0a3e-350">Nel portale fare clic su **Nuova** -- **configurazione** -**Creazione rapida**servizio --  **cloud**e quindi immettere un URL e un percorso del data center.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-350">In the portal, click **New** -- **Compute** – **Cloud Service** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="e0a3e-351">Usare lo stesso data center in cui è stata distribuita l'app Web.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-351">Use the same data center where you deployed the web app.</span></span>

![](the-fix-it-sample-application/_static/image1.png)

<span data-ttu-id="e0a3e-352">Prima di poter distribuire il servizio cloud, è necessario aggiornare alcuni dei file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-352">Before you can deploy the cloud service, you need to update some of the configuration files.</span></span>

<span data-ttu-id="e0a3e-353">In MyFixIt.WorkerRole.app.config, `connectionStrings`in , sostituire `appdb` il valore della stringa di connessione con la stringa di connessione effettiva per il database SQL.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-353">In MyFixIt.WorkerRole\app.config, under `connectionStrings`, replace the value of the `appdb` connection string with the actual connection string for the SQL Database.</span></span> <span data-ttu-id="e0a3e-354">È possibile ottenere la stringa di connessione dal portale.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-354">You can get the connection string from the portal.</span></span> <span data-ttu-id="e0a3e-355">Nel portale fare clic su **Sql Databases** - **appdb** - Visualizza stringhe di**connessione database SQL per ADO .Net, ODBC, PHP e JDBC**.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-355">In the portal, click **SQL Databases** - **appdb** - **View SQL Database connection strings for ADO .Net, ODBC, PHP, and JDBC**.</span></span> <span data-ttu-id="e0a3e-356">Copiare la stringa di connessione ADO.NET e incollare il valore nel file app.config.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-356">Copy the ADO.NET connection string and paste the value into the app.config file.</span></span> <span data-ttu-id="e0a3e-357">Sostituirlo con\_\_la password del database.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-357">Replace "{your\_password\_here}" with your database password.</span></span> <span data-ttu-id="e0a3e-358">Supponendo che siano stati usati gli script per distribuire l'app MVC, è stata specificata la password del database nel parametro `SqlDatabasePassword` script.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-358">(Assuming you used the scripts to deploy the MVC app, you specified the database password in the `SqlDatabasePassword` script parameter.)</span></span>

<span data-ttu-id="e0a3e-359">Il risultato dovrebbe essere simile al seguente:The result should look like the following:</span><span class="sxs-lookup"><span data-stu-id="e0a3e-359">The result should look like the following:</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample32.xml)]

<span data-ttu-id="e0a3e-360">Nello stesso file MyFixIt.WorkerRole.app.config, in `appSettings`, sostituire i due valori segnaposto per l'account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-360">In the same MyFixIt.WorkerRole\app.config file, under `appSettings`, replace the two placeholder values for the Azure storage account.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample33.xml?highlight=2-3)]

<span data-ttu-id="e0a3e-361">È possibile ottenere la chiave di accesso dal portale.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-361">You can get the access key from the portal.</span></span> <span data-ttu-id="e0a3e-362">Vedere [Come gestire gli account di archiviazione](https://docs.microsoft.com/azure/storage/common/storage-create-storage-account).</span><span class="sxs-lookup"><span data-stu-id="e0a3e-362">See [How To Manage Storage Accounts](https://docs.microsoft.com/azure/storage/common/storage-create-storage-account).</span></span>

<span data-ttu-id="e0a3e-363">In MyFixItCloudService,ServiceConfiguration.Cloud.cscfg sostituire gli stessi due valori di segnaposto per l'account di archiviazione di Azure.In MyFixItCloudService'ServiceConfiguration.Cloud.cscfg, replace the same two placeholders values for the Azure storage account.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-363">In MyFixItCloudService\ServiceConfiguration.Cloud.cscfg, replace the same two placeholders values for the Azure storage account.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample34.xml?highlight=3)]

<span data-ttu-id="e0a3e-364">A questo punto si è pronti per distribuire il servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-364">Now you are ready to deploy the cloud service.</span></span> <span data-ttu-id="e0a3e-365">In Esplora soluzioni fare clic con il pulsante destro del mouse sul progetto MyFixItCloudService e scegliere **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="e0a3e-365">In Solution Explore, right-click the MyFixItCloudService project and select **Publish**.</span></span> <span data-ttu-id="e0a3e-366">Per altre informazioni, vedere "[Distribuire l'applicazione in Azure](https://www.windowsazure.com/develop/net/tutorials/multi-tier-web-site/2-download-and-run/#deployAz)", che è nella parte 2 di questa [esercitazione.](https://code.msdn.microsoft.com/Windows-Azure-Multi-Tier-eadceb36)</span><span class="sxs-lookup"><span data-stu-id="e0a3e-366">For more information, see "[Deploy the Application to Azure](https://www.windowsazure.com/develop/net/tutorials/multi-tier-web-site/2-download-and-run/#deployAz)", which is in part 2 of [this tutorial](https://code.msdn.microsoft.com/Windows-Azure-Multi-Tier-eadceb36).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="e0a3e-367">Indietro</span><span class="sxs-lookup"><span data-stu-id="e0a3e-367">Previous</span></span>](more-patterns-and-guidance.md)
