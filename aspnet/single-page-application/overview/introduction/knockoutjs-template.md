---
uid: single-page-application/overview/introduction/knockoutjs-template
title: 'Applicazione a pagina singola: modello knockout | Microsoft Docs'
author: MikeWasson
description: Modello knockout
ms.author: riande
ms.date: 01/30/2013
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: 3a551db1caa9636eb7f2e04c287d3ef371263584
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78578694"
---
# <a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="94d96-103">Applicazione a pagina singola: modello knockout</span><span class="sxs-lookup"><span data-stu-id="94d96-103">Single Page Application: KnockoutJS template</span></span>

<span data-ttu-id="94d96-104">di [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="94d96-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="94d96-105">Il modello MVC Knockout fa parte di ASP.NET and Web Tools 2012,2</span><span class="sxs-lookup"><span data-stu-id="94d96-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="94d96-106">Scarica ASP.NET and Web Tools 2012,2</span><span class="sxs-lookup"><span data-stu-id="94d96-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)

<span data-ttu-id="94d96-107">L'aggiornamento di ASP.NET and Web Tools 2012,2 include un modello di applicazione a pagina singola (SPA) per ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="94d96-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="94d96-108">Questo modello è stato progettato per iniziare rapidamente a creare app Web interattive sul lato client.</span><span class="sxs-lookup"><span data-stu-id="94d96-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="94d96-109">"Applicazione a pagina singola" (SPA) è il termine generale per un'applicazione Web che carica una singola pagina HTML e quindi aggiorna la pagina in modo dinamico, anziché caricare nuove pagine.</span><span class="sxs-lookup"><span data-stu-id="94d96-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="94d96-110">Al termine del caricamento iniziale della pagina, la SPA comunica con il server tramite richieste AJAX.</span><span class="sxs-lookup"><span data-stu-id="94d96-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="94d96-111">AJAX non è una novità, ma oggi sono disponibili Framework JavaScript che semplificano la creazione e la gestione di un'applicazione SPA sofisticata di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="94d96-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="94d96-112">Inoltre, HTML 5 e CSS3 semplificano la creazione di interfacce utente avanzate.</span><span class="sxs-lookup"><span data-stu-id="94d96-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="94d96-113">Per iniziare, il modello SPA crea un'applicazione "elenco attività" di esempio.</span><span class="sxs-lookup"><span data-stu-id="94d96-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="94d96-114">In questa esercitazione verrà illustrata una presentazione guidata del modello.</span><span class="sxs-lookup"><span data-stu-id="94d96-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="94d96-115">Prima di tutto si osserverà l'applicazione to-do list, quindi si analizzeranno i componenti tecnologici che lo rendono funzionante.</span><span class="sxs-lookup"><span data-stu-id="94d96-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="94d96-116">Creare un nuovo progetto di modello SPA</span><span class="sxs-lookup"><span data-stu-id="94d96-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="94d96-117">Requisiti:</span><span class="sxs-lookup"><span data-stu-id="94d96-117">Requirements:</span></span>

- <span data-ttu-id="94d96-118">Visual Studio 2012 o Visual Studio Express 2012 per il Web</span><span class="sxs-lookup"><span data-stu-id="94d96-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="94d96-119">ASP.NET Web Tools 2012,2 Update.</span><span class="sxs-lookup"><span data-stu-id="94d96-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="94d96-120">È possibile installare l'aggiornamento [qui](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span><span class="sxs-lookup"><span data-stu-id="94d96-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="94d96-121">Avviare Visual Studio e selezionare **nuovo progetto** nella pagina iniziale.</span><span class="sxs-lookup"><span data-stu-id="94d96-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="94d96-122">In alternativa, scegliere **nuovo** dal menu **file** , quindi **progetto**.</span><span class="sxs-lookup"><span data-stu-id="94d96-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="94d96-123">Nel riquadro **modelli** selezionare **modelli installati** ed espandere il nodo  **C# visivo** .</span><span class="sxs-lookup"><span data-stu-id="94d96-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="94d96-124">In **Visual C#** Selezionare **Web**.</span><span class="sxs-lookup"><span data-stu-id="94d96-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="94d96-125">Nell'elenco dei modelli di progetto selezionare **applicazione Web ASP.NET MVC 4**.</span><span class="sxs-lookup"><span data-stu-id="94d96-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="94d96-126">Assegnare un nome al progetto e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="94d96-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="94d96-127">Nella creazione guidata **nuovo progetto** selezionare **applicazione a pagina singola**.</span><span class="sxs-lookup"><span data-stu-id="94d96-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="94d96-128">Premere F5 per compilare ed eseguire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="94d96-129">Quando l'applicazione viene eseguita per la prima volta, viene visualizzata una schermata di accesso.</span><span class="sxs-lookup"><span data-stu-id="94d96-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="94d96-130">Fare clic sul collegamento &quot;iscrizione&quot; e creare un nuovo utente.</span><span class="sxs-lookup"><span data-stu-id="94d96-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="94d96-131">Dopo aver eseguito l'accesso, l'applicazione crea un elenco TODO predefinito con due elementi.</span><span class="sxs-lookup"><span data-stu-id="94d96-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="94d96-132">È possibile fare clic su "Aggiungi elenco TODO" per aggiungere un nuovo elenco.</span><span class="sxs-lookup"><span data-stu-id="94d96-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="94d96-133">Rinominare l'elenco, aggiungere elementi all'elenco e deselezionarli.</span><span class="sxs-lookup"><span data-stu-id="94d96-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="94d96-134">È anche possibile eliminare elementi o eliminare un intero elenco.</span><span class="sxs-lookup"><span data-stu-id="94d96-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="94d96-135">Le modifiche vengono salvate automaticamente in modo permanente in un database nel server (in realtà local DB a questo punto, perché l'applicazione viene eseguita localmente).</span><span class="sxs-lookup"><span data-stu-id="94d96-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="94d96-136">Architettura del modello SPA</span><span class="sxs-lookup"><span data-stu-id="94d96-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="94d96-137">Questo diagramma mostra i blocchi predefiniti principali per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="94d96-138">Sul lato server, ASP.NET MVC serve il codice HTML e gestisce anche l'autenticazione basata su form.</span><span class="sxs-lookup"><span data-stu-id="94d96-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="94d96-139">API Web ASP.NET gestisce tutte le richieste correlate a ToDoLists e ToDoItems, inclusi il recupero, la creazione, l'aggiornamento e l'eliminazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="94d96-140">Il client scambia i dati con l'API Web in formato JSON.</span><span class="sxs-lookup"><span data-stu-id="94d96-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="94d96-141">Entity Framework (EF) è il livello O/RM.</span><span class="sxs-lookup"><span data-stu-id="94d96-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="94d96-142">Viene mediato tra il mondo orientato a oggetti di ASP.NET e il database sottostante.</span><span class="sxs-lookup"><span data-stu-id="94d96-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="94d96-143">Il database utilizza il database locale, ma è possibile modificarlo nel file Web. config.</span><span class="sxs-lookup"><span data-stu-id="94d96-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="94d96-144">In genere si usa il database locale per lo sviluppo locale e quindi si esegue la distribuzione in un database SQL nel server, usando la migrazione del Code-First di EF.</span><span class="sxs-lookup"><span data-stu-id="94d96-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="94d96-145">Sul lato client, la libreria knockout. js gestisce gli aggiornamenti della pagina dalle richieste AJAX.</span><span class="sxs-lookup"><span data-stu-id="94d96-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="94d96-146">Knockout USA data binding per sincronizzare la pagina con i dati più recenti.</span><span class="sxs-lookup"><span data-stu-id="94d96-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="94d96-147">In questo modo, non è necessario scrivere codice che analizza i dati JSON e aggiorna il DOM.</span><span class="sxs-lookup"><span data-stu-id="94d96-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="94d96-148">Al contrario, si inseriscono gli attributi dichiarativi nel codice HTML che indicano a knockout come presentare i dati.</span><span class="sxs-lookup"><span data-stu-id="94d96-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="94d96-149">Un grande vantaggio di questa architettura è la separazione del livello di presentazione dalla logica dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="94d96-150">È possibile creare la parte dell'API Web senza conoscere l'aspetto della pagina Web.</span><span class="sxs-lookup"><span data-stu-id="94d96-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="94d96-151">Sul lato client viene creato un "modello di visualizzazione" per rappresentare i dati e il modello di visualizzazione USA knockout per l'associazione al codice HTML.</span><span class="sxs-lookup"><span data-stu-id="94d96-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="94d96-152">Questo consente di modificare facilmente il codice HTML senza modificare il modello di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="94d96-153">(Verrà esaminato un po' più avanti).</span><span class="sxs-lookup"><span data-stu-id="94d96-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="94d96-154">Modelli</span><span class="sxs-lookup"><span data-stu-id="94d96-154">Models</span></span>

<span data-ttu-id="94d96-155">Nel progetto di Visual Studio la cartella Models contiene i modelli utilizzati sul lato server.</span><span class="sxs-lookup"><span data-stu-id="94d96-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="94d96-156">Sono disponibili anche modelli sul lato client, che verranno riportati.</span><span class="sxs-lookup"><span data-stu-id="94d96-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

<span data-ttu-id="94d96-157">**TodoItem, todo**</span><span class="sxs-lookup"><span data-stu-id="94d96-157">**TodoItem, TodoList**</span></span>

<span data-ttu-id="94d96-158">Questi sono i modelli di database per Entity Framework Code First.</span><span class="sxs-lookup"><span data-stu-id="94d96-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="94d96-159">Si noti che questi modelli hanno proprietà che puntano l'uno all'altro.</span><span class="sxs-lookup"><span data-stu-id="94d96-159">Notice that these models have properties that point to each other.</span></span> <span data-ttu-id="94d96-160">`ToDoList` contiene una raccolta di ToDoItems e ogni `ToDoItem` riporta un riferimento al relativo oggetto padre.</span><span class="sxs-lookup"><span data-stu-id="94d96-160">`ToDoList` contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="94d96-161">Queste proprietà sono denominate proprietà di navigazione e rappresentano la relazione uno-a-molti un elenco attività e i relativi elementi attività.</span><span class="sxs-lookup"><span data-stu-id="94d96-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="94d96-162">La classe `ToDoItem` usa anche l'attributo **[ForeignKey]** per specificare che `ToDoListId` è una chiave esterna nella tabella `ToDoList`.</span><span class="sxs-lookup"><span data-stu-id="94d96-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="94d96-163">Ciò indica a EF di aggiungere un vincolo FOREIGN KEY al database.</span><span class="sxs-lookup"><span data-stu-id="94d96-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

<span data-ttu-id="94d96-164">**TodoItemDto, TodoListDto**</span><span class="sxs-lookup"><span data-stu-id="94d96-164">**TodoItemDto, TodoListDto**</span></span>

<span data-ttu-id="94d96-165">Queste classi definiscono i dati che verranno inviati al client.</span><span class="sxs-lookup"><span data-stu-id="94d96-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="94d96-166">"DTO" è l'acronimo di "Data Transfer Object".</span><span class="sxs-lookup"><span data-stu-id="94d96-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="94d96-167">DTO definisce il modo in cui le entità verranno serializzate in JSON.</span><span class="sxs-lookup"><span data-stu-id="94d96-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="94d96-168">In generale, esistono diversi motivi per usare dto:</span><span class="sxs-lookup"><span data-stu-id="94d96-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="94d96-169">Per controllare quali proprietà vengono serializzate.</span><span class="sxs-lookup"><span data-stu-id="94d96-169">To control which properties are serialized.</span></span> <span data-ttu-id="94d96-170">DTO può contenere un subset delle proprietà del modello di dominio.</span><span class="sxs-lookup"><span data-stu-id="94d96-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="94d96-171">Questa operazione può essere eseguita per motivi di sicurezza (per nascondere i dati sensibili) o semplicemente per ridurre la quantità di dati inviati.</span><span class="sxs-lookup"><span data-stu-id="94d96-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="94d96-172">Per modificare la forma dei dati, ad esempio per rendere flat una struttura di dati più complessa.</span><span class="sxs-lookup"><span data-stu-id="94d96-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="94d96-173">Per evitare la logica di business DTO (separazione dei problemi).</span><span class="sxs-lookup"><span data-stu-id="94d96-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="94d96-174">Se per qualche motivo non è possibile serializzare i modelli di dominio.</span><span class="sxs-lookup"><span data-stu-id="94d96-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="94d96-175">Ad esempio, i riferimenti circolari possono causare problemi durante la serializzazione di un oggetto. sono disponibili modi per gestire questo problema nell'API Web (vedere [gestione di riferimenti a oggetti circolari](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)). Tuttavia, l'uso di un DTO semplicemente evita il problema.</span><span class="sxs-lookup"><span data-stu-id="94d96-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="94d96-176">Nel modello SPA, dto contiene gli stessi dati dei modelli di dominio.</span><span class="sxs-lookup"><span data-stu-id="94d96-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="94d96-177">Tuttavia, sono ancora utili perché evitano riferimenti circolari dalle proprietà di navigazione e dimostrano il modello DTO generale.</span><span class="sxs-lookup"><span data-stu-id="94d96-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

<span data-ttu-id="94d96-178">**AccountModels.cs**</span><span class="sxs-lookup"><span data-stu-id="94d96-178">**AccountModels.cs**</span></span>

<span data-ttu-id="94d96-179">Questo file contiene i modelli per l'appartenenza al sito.</span><span class="sxs-lookup"><span data-stu-id="94d96-179">This file contains models for site membership.</span></span> <span data-ttu-id="94d96-180">La classe `UserProfile` definisce lo schema per i profili utente nel database di appartenenze.</span><span class="sxs-lookup"><span data-stu-id="94d96-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="94d96-181">(In questo caso, le uniche informazioni sono l'ID utente e il nome utente). Le altre classi del modello in questo file vengono usate per creare i moduli di registrazione e di accesso dell'utente.</span><span class="sxs-lookup"><span data-stu-id="94d96-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="94d96-182">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="94d96-182">Entity Framework</span></span>

<span data-ttu-id="94d96-183">Il modello SPA USA Code First EF.</span><span class="sxs-lookup"><span data-stu-id="94d96-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="94d96-184">In Code First sviluppo, i modelli vengono definiti prima nel codice e quindi EF utilizza il modello per creare il database.</span><span class="sxs-lookup"><span data-stu-id="94d96-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="94d96-185">È anche possibile usare EF con un database esistente ([database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span><span class="sxs-lookup"><span data-stu-id="94d96-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span></span>

<span data-ttu-id="94d96-186">La classe `TodoItemContext` nella cartella Models deriva da **DbContext**.</span><span class="sxs-lookup"><span data-stu-id="94d96-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="94d96-187">Questa classe fornisce il "glue" tra i modelli e EF.</span><span class="sxs-lookup"><span data-stu-id="94d96-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="94d96-188">Il `TodoItemContext` include una raccolta di `ToDoItem` e una raccolta di `TodoList`.</span><span class="sxs-lookup"><span data-stu-id="94d96-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="94d96-189">Per eseguire una query sul database, è sufficiente scrivere una query LINQ su queste raccolte.</span><span class="sxs-lookup"><span data-stu-id="94d96-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="94d96-190">Ecco ad esempio come è possibile selezionare tutti gli elenchi attività per l'utente "Alice":</span><span class="sxs-lookup"><span data-stu-id="94d96-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="94d96-191">È inoltre possibile aggiungere nuovi elementi alla raccolta, aggiornare elementi o eliminare elementi dalla raccolta e salvare in modo permanente le modifiche apportate al database.</span><span class="sxs-lookup"><span data-stu-id="94d96-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="94d96-192">Controller di API Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="94d96-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="94d96-193">In API Web ASP.NET i controller sono oggetti che gestiscono le richieste HTTP.</span><span class="sxs-lookup"><span data-stu-id="94d96-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="94d96-194">Come indicato in precedenza, il modello di applicazione a singola pagina usa l'API Web per abilitare le operazioni CRUD nelle istanze `ToDoList` e `ToDoItem`.</span><span class="sxs-lookup"><span data-stu-id="94d96-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="94d96-195">I controller si trovano nella cartella controller della soluzione.</span><span class="sxs-lookup"><span data-stu-id="94d96-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- <span data-ttu-id="94d96-196">`TodoController`: gestisce le richieste HTTP per gli elementi attività</span><span class="sxs-lookup"><span data-stu-id="94d96-196">`TodoController`: Handles HTTP requests for to-do items</span></span>
- <span data-ttu-id="94d96-197">`TodoListController`: gestisce le richieste HTTP per gli elenchi di attività.</span><span class="sxs-lookup"><span data-stu-id="94d96-197">`TodoListController`: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="94d96-198">Questi nomi sono significativi, perché l'API Web corrisponde al percorso URI al nome del controller.</span><span class="sxs-lookup"><span data-stu-id="94d96-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="94d96-199">Per informazioni su come l'API Web instrada le richieste HTTP ai controller, vedere [routing in API Web ASP.NET](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="94d96-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="94d96-200">Esaminiamo la classe `ToDoListController`.</span><span class="sxs-lookup"><span data-stu-id="94d96-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="94d96-201">Contiene un singolo membro dati:</span><span class="sxs-lookup"><span data-stu-id="94d96-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="94d96-202">Il `TodoItemContext` viene usato per comunicare con EF, come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="94d96-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="94d96-203">I metodi sul controller implementano le operazioni CRUD.</span><span class="sxs-lookup"><span data-stu-id="94d96-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="94d96-204">API Web esegue il mapping delle richieste HTTP dal client ai metodi del controller, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="94d96-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="94d96-205">Richiesta HTTP</span><span class="sxs-lookup"><span data-stu-id="94d96-205">HTTP Request</span></span> | <span data-ttu-id="94d96-206">Controller (metodo)</span><span class="sxs-lookup"><span data-stu-id="94d96-206">Controller Method</span></span> | <span data-ttu-id="94d96-207">Description</span><span class="sxs-lookup"><span data-stu-id="94d96-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="94d96-208">GET /api/todo</span><span class="sxs-lookup"><span data-stu-id="94d96-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="94d96-209">Ottiene una raccolta di elenchi di attività.</span><span class="sxs-lookup"><span data-stu-id="94d96-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="94d96-210">Ottieni*ID* /API/todo/</span><span class="sxs-lookup"><span data-stu-id="94d96-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="94d96-211">Ottiene un elenco attività in base all'ID</span><span class="sxs-lookup"><span data-stu-id="94d96-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="94d96-212">Inserisci*ID* /API/todo/</span><span class="sxs-lookup"><span data-stu-id="94d96-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="94d96-213">Aggiorna un elenco attività.</span><span class="sxs-lookup"><span data-stu-id="94d96-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="94d96-214">POST /api/todo</span><span class="sxs-lookup"><span data-stu-id="94d96-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="94d96-215">Crea un nuovo elenco attività.</span><span class="sxs-lookup"><span data-stu-id="94d96-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="94d96-216">Elimina*ID* /API/todo/</span><span class="sxs-lookup"><span data-stu-id="94d96-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="94d96-217">Elimina un elenco TODO.</span><span class="sxs-lookup"><span data-stu-id="94d96-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="94d96-218">Si noti che gli URI per alcune operazioni contengono segnaposto per il valore ID.</span><span class="sxs-lookup"><span data-stu-id="94d96-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="94d96-219">Ad esempio, per eliminare un elenco con ID 42, l'URI viene `/api/todo/42`.</span><span class="sxs-lookup"><span data-stu-id="94d96-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="94d96-220">Per altre informazioni sull'uso dell'API Web per le operazioni CRUD, vedere [creazione di un'API Web che supporta operazioni CRUD](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span><span class="sxs-lookup"><span data-stu-id="94d96-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="94d96-221">Il codice per questo controller è piuttosto semplice.</span><span class="sxs-lookup"><span data-stu-id="94d96-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="94d96-222">Ecco alcuni punti interessanti:</span><span class="sxs-lookup"><span data-stu-id="94d96-222">Here are some interesting points:</span></span>

- <span data-ttu-id="94d96-223">Il metodo `GetTodoLists` usa una query LINQ per filtrare i risultati in base all'ID dell'utente che ha eseguito l'accesso.</span><span class="sxs-lookup"><span data-stu-id="94d96-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="94d96-224">In questo modo, un utente vedrà solo i dati che vi appartengono.</span><span class="sxs-lookup"><span data-stu-id="94d96-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="94d96-225">Si noti inoltre che un'istruzione SELECT viene utilizzata per convertire le istanze di `ToDoList` in `TodoListDto` istanze.</span><span class="sxs-lookup"><span data-stu-id="94d96-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="94d96-226">I metodi PUT e POST controllano lo stato del modello prima di modificare il database.</span><span class="sxs-lookup"><span data-stu-id="94d96-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="94d96-227">Se **ModelState. IsValid** è false, questi metodi restituiscono http 400, richiesta non valida.</span><span class="sxs-lookup"><span data-stu-id="94d96-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="94d96-228">Altre informazioni sulla convalida del modello in API Web sono valide per la [convalida del modello](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="94d96-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="94d96-229">La classe controller viene inoltre decorata con l'attributo **[autorizzate]** .</span><span class="sxs-lookup"><span data-stu-id="94d96-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="94d96-230">Questo attributo controlla se la richiesta HTTP è autenticata.</span><span class="sxs-lookup"><span data-stu-id="94d96-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="94d96-231">Se la richiesta non è autenticata, il client riceve HTTP 401, non autorizzato.</span><span class="sxs-lookup"><span data-stu-id="94d96-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="94d96-232">Per altre informazioni sull'autenticazione [, vedere autenticazione e autorizzazione in API Web ASP.NET](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="94d96-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="94d96-233">La classe `TodoController` è molto simile a `TodoListController`.</span><span class="sxs-lookup"><span data-stu-id="94d96-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="94d96-234">La differenza principale consiste nel fatto che non definisce metodi GET, perché il client otterrà gli elementi attività insieme a ogni elenco attività.</span><span class="sxs-lookup"><span data-stu-id="94d96-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="94d96-235">Controller e visualizzazioni MVC</span><span class="sxs-lookup"><span data-stu-id="94d96-235">MVC Controllers and Views</span></span>

<span data-ttu-id="94d96-236">I controller MVC si trovano anche nella cartella controller della soluzione.</span><span class="sxs-lookup"><span data-stu-id="94d96-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> <span data-ttu-id="94d96-237">`HomeController` esegue il rendering del codice HTML principale per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-237">`HomeController` renders the main HTML for the application.</span></span> <span data-ttu-id="94d96-238">La visualizzazione per il controller Home è definita in views/Home/index. cshtml.</span><span class="sxs-lookup"><span data-stu-id="94d96-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="94d96-239">La visualizzazione Home esegue il rendering di contenuto diverso a seconda che l'utente sia connesso:</span><span class="sxs-lookup"><span data-stu-id="94d96-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="94d96-240">Quando gli utenti accedono, visualizzano l'interfaccia utente principale.</span><span class="sxs-lookup"><span data-stu-id="94d96-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="94d96-241">In caso contrario, viene visualizzato il pannello di accesso.</span><span class="sxs-lookup"><span data-stu-id="94d96-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="94d96-242">Si noti che questo rendering condizionale si verifica sul lato server.</span><span class="sxs-lookup"><span data-stu-id="94d96-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="94d96-243">Non provare mai a nascondere il contenuto sensibile sul lato&#8212;client, un elemento inviato in una risposta HTTP è visibile a un utente che sta controllando i messaggi HTTP non elaborati.</span><span class="sxs-lookup"><span data-stu-id="94d96-243">Never try to hide sensitive content on the client side&#8212;anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="94d96-244">JavaScript sul lato client e Knockout. js</span><span class="sxs-lookup"><span data-stu-id="94d96-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="94d96-245">A questo punto è possibile trasformare il lato server dell'applicazione nel client.</span><span class="sxs-lookup"><span data-stu-id="94d96-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="94d96-246">Il modello SPA usa una combinazione di jQuery ed knockout. js per creare un'interfaccia utente interattiva e uniforme.</span><span class="sxs-lookup"><span data-stu-id="94d96-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="94d96-247">Knockout. js è una libreria JavaScript che semplifica l'associazione di HTML ai dati.</span><span class="sxs-lookup"><span data-stu-id="94d96-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="94d96-248">Knockout. js usa un modello denominato "Model-View-ViewModel".</span><span class="sxs-lookup"><span data-stu-id="94d96-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="94d96-249">Il modello è i dati di dominio (elenchi ToDo e elementi ToDo).</span><span class="sxs-lookup"><span data-stu-id="94d96-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="94d96-250">La visualizzazione è il documento HTML.</span><span class="sxs-lookup"><span data-stu-id="94d96-250">The view is the HTML document.</span></span>
- <span data-ttu-id="94d96-251">Il modello di visualizzazione è un oggetto JavaScript che include i dati del modello.</span><span class="sxs-lookup"><span data-stu-id="94d96-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="94d96-252">Il modello di visualizzazione è un'astrazione del codice dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="94d96-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="94d96-253">Non conosce la rappresentazione HTML.</span><span class="sxs-lookup"><span data-stu-id="94d96-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="94d96-254">Rappresenta invece le funzionalità astratte della vista, ad esempio "un elenco di elementi ToDo".</span><span class="sxs-lookup"><span data-stu-id="94d96-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="94d96-255">La vista è associata a dati al modello di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="94d96-256">Gli aggiornamenti al modello di visualizzazione vengono riflessi automaticamente nella visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="94d96-257">Le associazioni funzionano anche nell'altra direzione.</span><span class="sxs-lookup"><span data-stu-id="94d96-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="94d96-258">Gli eventi nel DOM (ad esempio, i clic) sono associati a funzioni nel modello di visualizzazione, che attivano le chiamate AJAX.</span><span class="sxs-lookup"><span data-stu-id="94d96-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="94d96-259">Il modello SPA organizza il codice JavaScript lato client in tre livelli:</span><span class="sxs-lookup"><span data-stu-id="94d96-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="94d96-260">todo. DataContext. js: invia richieste AJAX.</span><span class="sxs-lookup"><span data-stu-id="94d96-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="94d96-261">todo. Model. js: definisce i modelli.</span><span class="sxs-lookup"><span data-stu-id="94d96-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="94d96-262">todo. ViewModel. js: definisce il modello di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="94d96-263">Questi file di script si trovano nella cartella Scripts/app della soluzione.</span><span class="sxs-lookup"><span data-stu-id="94d96-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="94d96-264">**todo. DataContext** gestisce tutte le chiamate AJAX ai controller API Web.</span><span class="sxs-lookup"><span data-stu-id="94d96-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="94d96-265">(Le chiamate AJAX per l'accesso sono definite altrove, in ajaxLogin. js).</span><span class="sxs-lookup"><span data-stu-id="94d96-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="94d96-266">**todo. Model. js** definisce i modelli lato client (browser) per gli elenchi di attività.</span><span class="sxs-lookup"><span data-stu-id="94d96-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="94d96-267">Sono disponibili due classi di modello: todoItem e todo.</span><span class="sxs-lookup"><span data-stu-id="94d96-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="94d96-268">Molte delle proprietà nelle classi del modello sono di tipo "Ko. osservabile".</span><span class="sxs-lookup"><span data-stu-id="94d96-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="94d96-269">Gli osservabili sono il modo in cui viene magicato.</span><span class="sxs-lookup"><span data-stu-id="94d96-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="94d96-270">Dalla [documentazione di Knockout](http://knockoutjs.com/documentation/introduction.html): un osservabile è un "oggetto JavaScript che può notificare ai Sottoscrittori le modifiche".</span><span class="sxs-lookup"><span data-stu-id="94d96-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="94d96-271">Quando viene modificato il valore di un oggetto osservabile, Knockout Aggiorna tutti gli elementi HTML associati a tali osservabili.</span><span class="sxs-lookup"><span data-stu-id="94d96-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="94d96-272">Ad esempio, todoItem presenta osservabili per le proprietà title e Undone:</span><span class="sxs-lookup"><span data-stu-id="94d96-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="94d96-273">È anche possibile sottoscrivere un osservabile nel codice.</span><span class="sxs-lookup"><span data-stu-id="94d96-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="94d96-274">La classe todoItem, ad esempio, sottoscrive le modifiche apportate alle proprietà "e" e "title":</span><span class="sxs-lookup"><span data-stu-id="94d96-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

<span data-ttu-id="94d96-275">**Visualizza modello**</span><span class="sxs-lookup"><span data-stu-id="94d96-275">**View Model**</span></span>

<span data-ttu-id="94d96-276">Il modello di visualizzazione è definito in todo. ViewModel. js.</span><span class="sxs-lookup"><span data-stu-id="94d96-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="94d96-277">Il modello di visualizzazione è il punto centrale in cui l'applicazione associa gli elementi della pagina HTML ai dati del dominio.</span><span class="sxs-lookup"><span data-stu-id="94d96-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="94d96-278">Nel modello SPA il modello di visualizzazione contiene una matrice osservabile di todoLists.</span><span class="sxs-lookup"><span data-stu-id="94d96-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="94d96-279">Il codice seguente nel modello di visualizzazione indica a knockout di applicare le associazioni:</span><span class="sxs-lookup"><span data-stu-id="94d96-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="94d96-280">HTML e data binding</span><span class="sxs-lookup"><span data-stu-id="94d96-280">HTML and Data Binding</span></span>

<span data-ttu-id="94d96-281">Il codice HTML principale per la pagina è definito in views/Home/index. cshtml.</span><span class="sxs-lookup"><span data-stu-id="94d96-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="94d96-282">Poiché si usa il data binding, il codice HTML è solo un modello per ciò di cui viene effettivamente eseguito il rendering.</span><span class="sxs-lookup"><span data-stu-id="94d96-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="94d96-283">Knockout USA associazioni *dichiarative* .</span><span class="sxs-lookup"><span data-stu-id="94d96-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="94d96-284">Per associare gli elementi della pagina ai dati, è necessario aggiungere un attributo "data-bind" all'elemento.</span><span class="sxs-lookup"><span data-stu-id="94d96-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="94d96-285">Di seguito è riportato un esempio molto semplice, tratto dalla documentazione di Knockout:</span><span class="sxs-lookup"><span data-stu-id="94d96-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="94d96-286">In questo esempio, Knockout aggiorna il contenuto dell'elemento **&lt;span&gt;** con il valore di `myItems.count()`.</span><span class="sxs-lookup"><span data-stu-id="94d96-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="94d96-287">Ogni volta che questo valore viene modificato, Knockout aggiorna il documento.</span><span class="sxs-lookup"><span data-stu-id="94d96-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="94d96-288">Knockout fornisce una serie di tipi di binding diversi.</span><span class="sxs-lookup"><span data-stu-id="94d96-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="94d96-289">Di seguito sono riportate alcune delle associazioni utilizzate nel modello di SPA:</span><span class="sxs-lookup"><span data-stu-id="94d96-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="94d96-290">**foreach**: consente di scorrere un ciclo e applicare lo stesso markup a ogni elemento dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="94d96-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="94d96-291">Viene usato per eseguire il rendering degli elenchi di attività e degli elementi attività.</span><span class="sxs-lookup"><span data-stu-id="94d96-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="94d96-292">All'interno di **foreach**, i binding vengono applicati agli elementi dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="94d96-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="94d96-293">**Visible**: usato per impostare la visibilità.</span><span class="sxs-lookup"><span data-stu-id="94d96-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="94d96-294">Nascondere il markup quando una raccolta è vuota o rendere visibile il messaggio di errore.</span><span class="sxs-lookup"><span data-stu-id="94d96-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="94d96-295">**value**: usato per popolare i valori del form.</span><span class="sxs-lookup"><span data-stu-id="94d96-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="94d96-296">**clic**: associa un evento click a una funzione nel modello di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="94d96-297">Protezione anti-CSRF</span><span class="sxs-lookup"><span data-stu-id="94d96-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="94d96-298">La richiesta tra siti falsa (CSRF) è un attacco in cui un sito dannoso invia una richiesta a un sito vulnerabile in cui l'utente è attualmente connesso.</span><span class="sxs-lookup"><span data-stu-id="94d96-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="94d96-299">Per evitare gli attacchi CSRF, ASP.NET MVC usa i *token antifalsificazione*, detti anche token di verifica della richiesta.</span><span class="sxs-lookup"><span data-stu-id="94d96-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="94d96-300">L'idea è che il server inserisce un token generato in modo casuale in una pagina Web.</span><span class="sxs-lookup"><span data-stu-id="94d96-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="94d96-301">Quando il client invia dati al server, deve includere questo valore nel messaggio di richiesta.</span><span class="sxs-lookup"><span data-stu-id="94d96-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="94d96-302">I token antifalsificazione funzionano perché la pagina dannosa non è in grado di leggere i token dell'utente, a causa dei criteri di stessa origine.</span><span class="sxs-lookup"><span data-stu-id="94d96-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="94d96-303">I criteri della stessa origine impediscono ai documenti ospitati in due siti diversi di accedere al contenuto.</span><span class="sxs-lookup"><span data-stu-id="94d96-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="94d96-304">ASP.NET MVC offre supporto incorporato per i token antifalsificazione, tramite la classe [antifalsificazione](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) e l'attributo [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) .</span><span class="sxs-lookup"><span data-stu-id="94d96-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="94d96-305">Attualmente questa funzionalità non è incorporata nell'API Web.</span><span class="sxs-lookup"><span data-stu-id="94d96-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="94d96-306">Tuttavia, il modello SPA include un'implementazione personalizzata per l'API Web.</span><span class="sxs-lookup"><span data-stu-id="94d96-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="94d96-307">Questo codice viene definito nella classe `ValidateHttpAntiForgeryTokenAttribute`, che si trova nella cartella filtri della soluzione.</span><span class="sxs-lookup"><span data-stu-id="94d96-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="94d96-308">Per altre informazioni sull'anti-CSRF nell'API Web, vedere [prevenzione degli attacchi di richiesta intersito falsificazione (CSRF)](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span><span class="sxs-lookup"><span data-stu-id="94d96-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="94d96-309">Conclusione</span><span class="sxs-lookup"><span data-stu-id="94d96-309">Conclusion</span></span>

<span data-ttu-id="94d96-310">Il modello SPA è progettato per iniziare a scrivere rapidamente applicazioni Web moderne e interattive.</span><span class="sxs-lookup"><span data-stu-id="94d96-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="94d96-311">Usa la libreria knockout. js per separare la presentazione (markup HTML) dalla logica dei dati e dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="94d96-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="94d96-312">Ma Knockout non è l'unica libreria JavaScript che è possibile usare per creare una SPA.</span><span class="sxs-lookup"><span data-stu-id="94d96-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="94d96-313">Per esplorare altre opzioni, vedere i [modelli di Spa creati dalla community](../templates/index.md).</span><span class="sxs-lookup"><span data-stu-id="94d96-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
