---
uid: signalr/overview/getting-started/real-time-web-applications-with-signalr
title: 'Lab pratico: Le applicazioni Web in tempo reale con SignalR | Microsoft Docs'
author: bradygaster
description: Applicazioni Web in tempo reale offrono la possibilità di eseguire il push del contenuto ai client connessi come accade, in tempo reale lato server. Per gli sviluppatori ASP.NET, ASP...
ms.author: bradyg
ms.date: 07/16/2014
ms.assetid: ba07958c-42e1-4da0-81db-ba6925ed6db0
msc.legacyurl: /signalr/overview/getting-started/real-time-web-applications-with-signalr
msc.type: authoredcontent
ms.openlocfilehash: 9e39fd3f2fc9d4e791002450085215096c222fcd
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2019
ms.locfileid: "65120009"
---
# <a name="hands-on-lab-real-time-web-applications-with-signalr"></a><span data-ttu-id="9e6ea-104">Lab pratico: Applicazioni Web in tempo reale con SignalR</span><span class="sxs-lookup"><span data-stu-id="9e6ea-104">Hands On Lab: Real-Time Web Applications with SignalR</span></span>

<span data-ttu-id="9e6ea-105">da [Camp Web Team](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-105">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

[<span data-ttu-id="9e6ea-106">Download Web Camp Training Kit, versione di ottobre 2015</span><span class="sxs-lookup"><span data-stu-id="9e6ea-106">Download Web Camps Training Kit, October 2015 Release</span></span>](https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b)

> <span data-ttu-id="9e6ea-107">Applicazioni Web in tempo reale offrono la possibilità di eseguire il push del contenuto ai client connessi come accade, in tempo reale lato server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-107">Real-time Web applications feature the ability to push server-side content to the connected clients as it happens, in real-time.</span></span> <span data-ttu-id="9e6ea-108">Per gli sviluppatori ASP.NET **ASP.NET SignalR** è una libreria per aggiungere funzionalità web in tempo reale alle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-108">For ASP.NET developers, **ASP.NET SignalR** is a library to add real-time web functionality to their applications.</span></span> <span data-ttu-id="9e6ea-109">Sfrutta i trasporti diversi, automaticamente selezionando il trasporto disponibile meglio assegnato del client e più disponibile il trasporto del server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-109">It takes advantage of several transports, automatically selecting the best available transport given the client and server's best available transport.</span></span> <span data-ttu-id="9e6ea-110">Sfrutta **WebSocket**, un'API di HTML5 che consente la comunicazione bidirezionale tra il browser e server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-110">It takes advantage of **WebSocket**, an HTML5 API that enables bi-directional communication between the browser and server.</span></span>
> 
> <span data-ttu-id="9e6ea-111">**SignalR** fornisce anche un'API semplice e dettagliata per l'esecuzione di server a client RPC (chiamare le funzioni JavaScript nei browser dei client dal codice .NET sul lato server) nell'applicazione ASP.NET, nonché l'aggiunta di hook utili per la gestione connessione, ad esempio connettere/disconnettere gli eventi, le connessioni di raggruppamento e l'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-111">**SignalR** also provides a simple, high-level API for doing server to client RPC (call JavaScript functions in your clients' browsers from server-side .NET code) in your ASP.NET application, as well as adding useful hooks for connection management, such as connect/disconnect events, grouping connections, and authorization.</span></span>
> 
> <span data-ttu-id="9e6ea-112">**SignalR** è un'astrazione su alcuni dei trasporti che sono necessari per svolgere il lavoro in tempo reale tra client e server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-112">**SignalR** is an abstraction over some of the transports that are required to do real-time work between client and server.</span></span> <span data-ttu-id="9e6ea-113">Oggetto **SignalR** viene avviato come HTTP, connessione e viene quindi promosso a un **WebSocket** connessione se disponibile.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-113">A **SignalR** connection starts as HTTP, and is then promoted to a **WebSocket** connection if available.</span></span> <span data-ttu-id="9e6ea-114">**WebSocket** è il trasporto ideale per **SignalR**, dal momento che rende l'uso più efficiente della memoria del server, ha la latenza più bassa e le funzionalità più sottostante (ad esempio comunicazione full duplex tra client e Server), ma ha anche i più rigorosi requisiti: **WebSocket** richiede che il server di usare **Windows Server 2012** oppure **Windows 8**, insieme a **.NET Framework 4.5**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-114">**WebSocket** is the ideal transport for **SignalR**, since it makes the most efficient use of server memory, has the lowest latency, and has the most underlying features (such as full duplex communication between client and server), but it also has the most stringent requirements: **WebSocket** requires the server to be using **Windows Server 2012** or **Windows 8**, along with **.NET Framework 4.5**.</span></span> <span data-ttu-id="9e6ea-115">Se non vengono soddisfatti questi requisiti, **SignalR** proverà a usare altri tipi di trasporto per rendere le connessioni (ad esempio *Ajax polling prolungato*).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-115">If these requirements are not met, **SignalR** will attempt to use other transports to make its connections (like *Ajax long polling*).</span></span>
> 
> <span data-ttu-id="9e6ea-116">Il **SignalR** API contiene due modelli per la comunicazione tra client e server: **Le connessioni permanenti** e **hub**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-116">The **SignalR** API contains two models for communicating between clients and servers: **Persistent Connections** and **Hubs**.</span></span> <span data-ttu-id="9e6ea-117">Oggetto **connessione** rappresenta un semplice endpoint per l'invio di singolo destinatario, raggruppati o trasmettere i messaggi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-117">A **Connection** represents a simple endpoint for sending single-recipient, grouped, or broadcast messages.</span></span> <span data-ttu-id="9e6ea-118">Oggetto **Hub** è una pipeline più alto livello basata sull'API di connessione che consente il client e server di chiamare direttamente i metodi a vicenda.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-118">A **Hub** is a more high-level pipeline built upon the Connection API that allows your client and server to call methods on each other directly.</span></span>
> 
> ![Architettura di SignalR](real-time-web-applications-with-signalr/_static/image1.png)
> 
> <span data-ttu-id="9e6ea-120">Tutto il codice di esempio e frammenti di codice sono inclusi nel Kit di formazione Camp Web, versione di ottobre 2015, disponibile all'indirizzo [ https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b ](https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-120">All sample code and snippets are included in the Web Camps Training Kit, October 2015 Release, available at [https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b](https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b).</span></span>  <span data-ttu-id="9e6ea-121">Si noti che il collegamento di programma di installazione in questa pagina non funziona più; Usare invece uno dei collegamenti nella sezione risorse.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-121">Please note that the Installer link on that page no longer works; use one of the links under the Assets section instead.</span></span>

<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="9e6ea-122">Panoramica</span><span class="sxs-lookup"><span data-stu-id="9e6ea-122">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="9e6ea-123">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="9e6ea-123">Objectives</span></span>

<span data-ttu-id="9e6ea-124">In questo laboratorio pratico, si apprenderà come:</span><span class="sxs-lookup"><span data-stu-id="9e6ea-124">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="9e6ea-125">Inviare notifiche dal server al client tramite SignalR.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-125">Send notifications from server to client using SignalR.</span></span>
- <span data-ttu-id="9e6ea-126">Scalabilità orizzontale SignalR applicazione utilizzando **SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-126">Scale Out your SignalR application using **SQL Server**.</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="9e6ea-127">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="9e6ea-127">Prerequisites</span></span>

<span data-ttu-id="9e6ea-128">Di seguito è necessario per completare questo laboratorio pratico:</span><span class="sxs-lookup"><span data-stu-id="9e6ea-128">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="9e6ea-129">[Visual Studio Express 2013 per Web](https://www.microsoft.com/visualstudio/) o versione successiva</span><span class="sxs-lookup"><span data-stu-id="9e6ea-129">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="9e6ea-130">Configurazione</span><span class="sxs-lookup"><span data-stu-id="9e6ea-130">Setup</span></span>

<span data-ttu-id="9e6ea-131">Per eseguire gli esercizi in questo laboratorio pratico, è necessario configurare prima di tutto l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-131">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="9e6ea-132">Aprire una finestra di Windows Explorer e passare a del lab **origine** cartella.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-132">Open a Windows Explorer window and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="9e6ea-133">Fare doppio clic su **Setup. cmd** e selezionare **Esegui come amministratore** per avviare il processo di installazione che la configurazione dell'ambiente e installare i frammenti di codice di Visual Studio per questo ambiente lab.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-133">Right-click **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="9e6ea-134">Se viene visualizzata la finestra di dialogo controllo dell'Account utente, confermare l'azione per continuare.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-134">If the User Account Control dialog box is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="9e6ea-135">Assicurarsi che tutte le dipendenze per questo ambiente lab che sono stati verificati prima di eseguire il programma di installazione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-135">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>

<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="9e6ea-136">Usando i frammenti di codice</span><span class="sxs-lookup"><span data-stu-id="9e6ea-136">Using the Code Snippets</span></span>

<span data-ttu-id="9e6ea-137">In tutto il documento di laboratorio, verrà invitati a inserire blocchi di codice.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-137">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="9e6ea-138">Per praticità, la maggior parte di questo codice viene fornito come Visual Studio frammenti di codice che è possibile accedere da all'interno di Visual Studio 2013, per evitare che sia necessario aggiungerla manualmente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-138">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="9e6ea-139">Ogni esercizio è accompagnata da una soluzione inizia che si trova nel **iniziare** cartella dell'esercizio che consente di seguire ogni esercizio indipendentemente dagli altri.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-139">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="9e6ea-140">Tenere presente che i frammenti di codice aggiunti durante un esercizio non sono presenti queste soluzioni di avvio e potrebbero non funzionare fino a quando non si have completato l'esercizio.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-140">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="9e6ea-141">All'interno del codice sorgente per un esercizio, si noterà anche un **End** cartella che contiene una soluzione di Visual Studio con il codice che scaturisce da completare i passaggi nell'esercizio corrispondente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-141">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="9e6ea-142">È possibile usare queste soluzioni come prassi consigliata se ti serve assistenza aggiuntiva durante l'esecuzione in questo laboratorio pratico.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-142">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>

---

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="9e6ea-143">Esercizi</span><span class="sxs-lookup"><span data-stu-id="9e6ea-143">Exercises</span></span>

<span data-ttu-id="9e6ea-144">Questo laboratorio pratico include gli esercizi seguenti:</span><span class="sxs-lookup"><span data-stu-id="9e6ea-144">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="9e6ea-145">Utilizzo di dati in tempo reale tramite SignalR</span><span class="sxs-lookup"><span data-stu-id="9e6ea-145">Working with Real-Time Data Using SignalR</span></span>](#Exercise1)
2. [<span data-ttu-id="9e6ea-146">Scalabilità orizzontale mediante SQL Server</span><span class="sxs-lookup"><span data-stu-id="9e6ea-146">Scaling Out Using SQL Server</span></span>](#Exercise2)

<span data-ttu-id="9e6ea-147">Tempo stimato per completare questa esercitazione: **60 minuti**</span><span class="sxs-lookup"><span data-stu-id="9e6ea-147">Estimated time to complete this lab: **60 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="9e6ea-148">Al primo avvio di Visual Studio, è necessario selezionare una delle raccolte di impostazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-148">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="9e6ea-149">Ogni raccolta predefinita è pensata per associare un particolare stile di sviluppo e determina i layout delle finestre, il comportamento dell'editor, frammenti di codice IntelliSense e opzioni della finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-149">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="9e6ea-150">Le procedure descritte in questa esercitazione vengono descritte le azioni necessarie per eseguire una determinata attività in Visual Studio quando si usa la **delle impostazioni di sviluppo generale** raccolta.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-150">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="9e6ea-151">Se si sceglie una raccolta di impostazioni diverse per l'ambiente di sviluppo, possono essere presenti differenze nei passaggi che è necessario tenere conto.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-151">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>

<a id="Exercise1"></a>
### <a name="exercise-1-working-with-real-time-data-using-signalr"></a><span data-ttu-id="9e6ea-152">Esercizio 1: Utilizzo di dati in tempo reale tramite SignalR</span><span class="sxs-lookup"><span data-stu-id="9e6ea-152">Exercise 1: Working with Real-Time Data Using SignalR</span></span>

<span data-ttu-id="9e6ea-153">Mentre chat viene spesso usata come esempio, è possibile eseguire un intero molte altre funzionalità Web in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-153">While chat is often used as an example, you can do a whole lot more with real-time Web functionality.</span></span> <span data-ttu-id="9e6ea-154">Ogni volta che un utente consente di aggiornare una pagina web per visualizzare i nuovi dati o implementa la pagina Ajax tempo di polling per recuperare nuovi dati, è possibile usare SignalR.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-154">Any time a user refreshes a web page to see new data or the page implements Ajax long polling to retrieve new data, you can use SignalR.</span></span>

<span data-ttu-id="9e6ea-155">SignalR supporta **push del server** oppure **broadcasting** funzionalità; gestisce automaticamente la gestione della connessione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-155">SignalR supports **server push** or **broadcasting** functionality; it handles connection management automatically.</span></span> <span data-ttu-id="9e6ea-156">In connessioni HTTP classica per la comunicazione tra client e server, viene ristabilita per ogni richiesta di connessione, ma SignalR fornisce una connessione permanente tra il client e server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-156">In classic HTTP connections for client-server communication, connection is re-established for each request, but SignalR provides persistent connection between the client and server.</span></span> <span data-ttu-id="9e6ea-157">In SignalR che il codice server effettua una chiamata a un codice client nel browser tramite le chiamate RPC (Remote Procedure), anziché il modello di richiesta-risposta sappiamo oggi stesso.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-157">In SignalR the server code calls out to a client code in the browser using Remote Procedure Calls (RPC), rather than the request-response model we know today.</span></span>

<span data-ttu-id="9e6ea-158">In questo esercizio, si configurerà il **fanatico Quiz** applicazione per usare SignalR per visualizzare il dashboard di statistiche e le metriche aggiornate senza la necessità di aggiornare l'intera pagina.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-158">In this exercise, you will configure the **Geek Quiz** application to use SignalR to display the Statistics dashboard with the updated metrics without the need to refresh the entire page.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--exploring-the-geek-quiz-statistics-page"></a><span data-ttu-id="9e6ea-159">Attività 1: esplorare la pagina delle statistiche di Quiz fanatico</span><span class="sxs-lookup"><span data-stu-id="9e6ea-159">Task 1 – Exploring the Geek Quiz Statistics Page</span></span>

<span data-ttu-id="9e6ea-160">In questa attività verrà passano attraverso l'applicazione e verificare come viene visualizzata la pagina delle statistiche e come è possibile migliorare il modo le informazioni vengono aggiornate.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-160">In this task, you will go through the application and verify how the statistics page is shown and how you can improve the way the information is updated.</span></span>

1. <span data-ttu-id="9e6ea-161">Aprire **Visual Studio Express 2013 per il Web** e aprire il **GeekQuiz.sln** soluzione che si trova nel **Source\Ex1 WorkingWithRealTimeData\Begin** cartella.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-161">Open **Visual Studio Express 2013 for Web** and open the **GeekQuiz.sln** solution located in the **Source\Ex1-WorkingWithRealTimeData\Begin** folder.</span></span>
2. <span data-ttu-id="9e6ea-162">Premere **F5** per eseguire la soluzione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-162">Press **F5** to run the solution.</span></span> <span data-ttu-id="9e6ea-163">Il **Accedi** schermata dovrebbe essere visualizzata nel browser.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-163">The **Log in** page should appear in the browser.</span></span>

    <span data-ttu-id="9e6ea-164">![Esecuzione della soluzione](real-time-web-applications-with-signalr/_static/image2.png "esecuzione della soluzione")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-164">![Running the solution](real-time-web-applications-with-signalr/_static/image2.png "Running the solution")</span></span>

    <span data-ttu-id="9e6ea-165">*Esecuzione della soluzione*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-165">*Running the solution*</span></span>
3. <span data-ttu-id="9e6ea-166">Fare clic su **registrare** nell'angolo superiore destro della pagina per creare un nuovo utente nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-166">Click **Register** in the upper-right corner of the page to create a new user in the application.</span></span>

    <span data-ttu-id="9e6ea-167">![Registrare collegamento](real-time-web-applications-with-signalr/_static/image3.png "collegamento Register")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-167">![Register link](real-time-web-applications-with-signalr/_static/image3.png "Register link")</span></span>

    <span data-ttu-id="9e6ea-168">*Collegamento Register*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-168">*Register link*</span></span>
4. <span data-ttu-id="9e6ea-169">Nel **registrare** pagina, immettere una **nome utente** e **Password**, quindi fare clic su **registrare**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-169">In the **Register** page, enter a **User name** and **Password**, and then click **Register**.</span></span>

    <span data-ttu-id="9e6ea-170">![La registrazione di un utente](real-time-web-applications-with-signalr/_static/image4.png "la registrazione di un utente")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-170">![Registering a user](real-time-web-applications-with-signalr/_static/image4.png "Registering a user")</span></span>

    <span data-ttu-id="9e6ea-171">*La registrazione di un utente*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-171">*Registering a user*</span></span>
5. <span data-ttu-id="9e6ea-172">L'applicazione Registra nuovo account e l'utente viene autenticato e reindirizzato alla home page che mostra la prima domanda di quiz.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-172">The application registers the new account and the user is authenticated and redirected back to the home page showing the first quiz question.</span></span>
6. <span data-ttu-id="9e6ea-173">Aprire il **statistiche** pagina in una nuova finestra e inserire le **Home** pagina e **statistiche** pagina side-by-side.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-173">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side.</span></span>

    <span data-ttu-id="9e6ea-174">![Windows side-by-side](real-time-web-applications-with-signalr/_static/image5.png "Side-by windows lato")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-174">![Side-by-side windows](real-time-web-applications-with-signalr/_static/image5.png "Side by side windows")</span></span>

    <span data-ttu-id="9e6ea-175">*Windows side-by-side*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-175">*Side-by-side windows*</span></span>
7. <span data-ttu-id="9e6ea-176">Nel **Home** pagina, rispondere alla domanda facendo clic su una delle opzioni.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-176">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="9e6ea-177">![Rispondere alla domanda](real-time-web-applications-with-signalr/_static/image6.png "rispondere alla domanda")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-177">![Answering a question](real-time-web-applications-with-signalr/_static/image6.png "Answering a question")</span></span>

    <span data-ttu-id="9e6ea-178">*Rispondere alla domanda*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-178">*Answering a question*</span></span>
8. <span data-ttu-id="9e6ea-179">Dopo aver fatto clic su uno dei pulsanti, apparirà la risposta.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-179">After clicking one of the buttons, the answer should appear.</span></span>

    <span data-ttu-id="9e6ea-180">![Rispondere alla domanda corretta](real-time-web-applications-with-signalr/_static/image7.png "rispondere alla domanda corretta")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-180">![Question answered correct](real-time-web-applications-with-signalr/_static/image7.png "Question answered correct")</span></span>

    <span data-ttu-id="9e6ea-181">*Domande cui rispondere*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-181">*Question answered correctly*</span></span>
9. <span data-ttu-id="9e6ea-182">Si noti che le informazioni fornite nella pagina delle statistiche sono obsolete.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-182">Notice that the information provided in the Statistics page is outdated.</span></span> <span data-ttu-id="9e6ea-183">Aggiornare la pagina per visualizzare i risultati aggiornati.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-183">Refresh the page in order to see the updated results.</span></span>

    <span data-ttu-id="9e6ea-184">![Pagina statistiche](real-time-web-applications-with-signalr/_static/image8.png "pagina statistiche")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-184">![Statistics page](real-time-web-applications-with-signalr/_static/image8.png "Statistics page")</span></span>

    <span data-ttu-id="9e6ea-185">*Pagina delle statistiche*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-185">*Statistics page*</span></span>
10. <span data-ttu-id="9e6ea-186">Tornare a Visual Studio e arrestare il debug.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-186">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--adding-signalr-to-geek-quiz-to-show-online-charts"></a><span data-ttu-id="9e6ea-187">Attività 2: aggiunta di SignalR per fanatico Quiz per mostrare grafici Online</span><span class="sxs-lookup"><span data-stu-id="9e6ea-187">Task 2 – Adding SignalR to Geek Quiz to Show Online Charts</span></span>

<span data-ttu-id="9e6ea-188">In questa attività verrà aggiungere SignalR alla soluzione e inviare gli aggiornamenti ai client automaticamente quando una nuova risposta viene inviata al server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-188">In this task, you will add SignalR to the solution and send updates to the clients automatically when a new answer is sent to the server.</span></span>

1. <span data-ttu-id="9e6ea-189">Dal **strumenti** menu in Visual Studio, selezionare **NuGet Gestione pacchetti**, quindi fare clic su **la Console di Gestione pacchetti**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-189">From the **Tools** menu in Visual Studio, select **NuGet Package Manager**, and then click **Package Manager Console**.</span></span>
2. <span data-ttu-id="9e6ea-190">Nel **Console di gestione pacchetti** finestra, eseguire il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="9e6ea-190">In the **Package Manager Console** window, execute the following command:</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample1.ps1)]

    <span data-ttu-id="9e6ea-191">![Installazione del pacchetto di SignalR](real-time-web-applications-with-signalr/_static/image9.png "installazione del pacchetto di SignalR")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-191">![SignalR package installation](real-time-web-applications-with-signalr/_static/image9.png "SignalR package installation")</span></span>

    <span data-ttu-id="9e6ea-192">*Installazione del pacchetto di SignalR*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-192">*SignalR package installation*</span></span>

   > [!NOTE]
   > <span data-ttu-id="9e6ea-193">Quando si installa **SignalR** NuGet pacchetti versione 2.0.2 da una nuova applicazione MVC 5, sarà necessario aggiornare manualmente **OWIN** pacchetti alla versione 2.0.1 (o versione successiva) prima di installare SignalR.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-193">When installing **SignalR** NuGet packages version 2.0.2 from a brand new MVC 5 application, you will need to manually update **OWIN** packages to version 2.0.1 (or higher) before installing SignalR.</span></span> <span data-ttu-id="9e6ea-194">A tale scopo, è possibile eseguire lo script seguente nella **Console di gestione pacchetti**:</span><span class="sxs-lookup"><span data-stu-id="9e6ea-194">To do this, you can execute the following script in the **Package Manager Console**:</span></span>
   > 
   > [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample2.ps1)]
   > 
   > <span data-ttu-id="9e6ea-195">In una versione futura di SignalR, le dipendenze OWIN verranno aggiornate automaticamente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-195">In a future release of SignalR, OWIN dependencies will be automatically updated.</span></span>
3. <span data-ttu-id="9e6ea-196">Nella **Esplora soluzioni**, espandere il **script** cartella e notare che SignalR *js* sono stati aggiunti file alla soluzione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-196">In **Solution Explorer**, expand the **Scripts** folder and notice that the SignalR *js* files were added to the solution.</span></span>

    <span data-ttu-id="9e6ea-197">![Riferimenti di SignalR JavaScript](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript fa riferimento")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-197">![SignalR JavaScript references](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript references")</span></span>

    <span data-ttu-id="9e6ea-198">*Riferimenti di SignalR JavaScript*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-198">*SignalR JavaScript references*</span></span>
4. <span data-ttu-id="9e6ea-199">In **Esplora soluzioni**, fare doppio clic il **GeekQuiz** progetto, selezionare **Add** | **nuova cartella**e denominarla  **Hub**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-199">In **Solution Explorer**, right-click the **GeekQuiz** project, select **Add** | **New Folder**, and name it **Hubs**.</span></span>
5. <span data-ttu-id="9e6ea-200">Fare doppio clic il **hub** cartella e selezionare **Add | Nuovo elemento**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-200">Right-click the **Hubs** folder and select **Add | New Item**.</span></span>

    <span data-ttu-id="9e6ea-201">![Aggiungi nuovo elemento](real-time-web-applications-with-signalr/_static/image11.png "Aggiungi nuovo elemento")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-201">![Add new item](real-time-web-applications-with-signalr/_static/image11.png "Add new item")</span></span>

    <span data-ttu-id="9e6ea-202">*Aggiungi nuovo elemento*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-202">*Add new item*</span></span>
6. <span data-ttu-id="9e6ea-203">Nel **Aggiungi nuovo elemento** finestra di dialogo, seleziona il **Visual c# | Web | SignalR** nodo nel riquadro sinistro, seleziona **classe tramite SignalR Hub (v2)** nel riquadro centrale, denominare il file **StatisticsHub.cs** e fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-203">In the **Add New Item** dialog box, select the **Visual C# | Web | SignalR** node in the left pane, select **SignalR Hub Class (v2)** from the center pane, name the file **StatisticsHub.cs** and click **Add**.</span></span>

    <span data-ttu-id="9e6ea-204">![Finestra di dialogo Aggiungi nuovo elemento](real-time-web-applications-with-signalr/_static/image12.png "finestra di dialogo Aggiungi nuovo elemento")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-204">![Add new item dialog box](real-time-web-applications-with-signalr/_static/image12.png "Add new item dialog box")</span></span>

    <span data-ttu-id="9e6ea-205">*Aggiungi finestra di dialogo Nuovo elemento*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-205">*Add new item dialog box*</span></span>
7. <span data-ttu-id="9e6ea-206">Sostituire il codice nel **StatisticsHub** classe con il codice seguente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-206">Replace the code in the **StatisticsHub** class with the following code.</span></span>

    <span data-ttu-id="9e6ea-207">(Code - Snippet *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-207">(Code Snippet - *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample3.cs)]
8. <span data-ttu-id="9e6ea-208">Aprire **Startup.cs** e aggiungere la riga seguente alla fine delle **configurazione** (metodo).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-208">Open **Startup.cs** and add the following line at the end of the **Configuration** method.</span></span>

    <span data-ttu-id="9e6ea-209">(Code - Snippet *RealTimeSignalR - Ex1 - MapSignalR*)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-209">(Code Snippet - *RealTimeSignalR - Ex1 - MapSignalR*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample4.cs)]
9. <span data-ttu-id="9e6ea-210">Aprire il **StatisticsService.cs** pagina all'interno di **servizi** cartella e aggiungere quanto segue direttive using.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-210">Open the **StatisticsService.cs** page inside the **Services** folder and add the following using directives.</span></span>

    <span data-ttu-id="9e6ea-211">(Code - Snippet *RealTimeSignalR - Ex1 - UsingDirectives*)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-211">(Code Snippet - *RealTimeSignalR - Ex1 - UsingDirectives*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample5.cs)]
10. <span data-ttu-id="9e6ea-212">Per notificare ai client connessi degli aggiornamenti, è innanzitutto recuperare una **contesto** oggetto per la connessione corrente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-212">To notify connected clients of updates, you first retrieve a **Context** object for the current connection.</span></span> <span data-ttu-id="9e6ea-213">Il **Hub** oggetto contiene i metodi per inviare messaggi a un unico client o client di trasmettere a connesse tutte le soluzioni.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-213">The **Hub** object contains methods to send messages to a single client or broadcast to all connected clients.</span></span> <span data-ttu-id="9e6ea-214">Aggiungere il metodo seguente per il **StatisticsService** classe per trasmettere i dati delle statistiche.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-214">Add the following method to the **StatisticsService** class to broadcast the statistics data.</span></span>

    <span data-ttu-id="9e6ea-215">(Code - Snippet *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-215">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample6.cs)]

    > [!NOTE]
    > <span data-ttu-id="9e6ea-216">Nel codice precedente, si utilizza un nome di metodo arbitrario per chiamare una funzione nel client (ad esempio: *updateStatistics*).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-216">In the code above, you are using an arbitrary method name to call a function on the client (i.e.: *updateStatistics*).</span></span> <span data-ttu-id="9e6ea-217">Il nome del metodo specificato viene interpretato come un oggetto dinamico, ovvero che non IntelliSense o convalida in fase di compilazione appositamente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-217">The method name that you specify is interpreted as a dynamic object, which means there is no IntelliSense or compile-time validation for it.</span></span> <span data-ttu-id="9e6ea-218">L'espressione viene valutata in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-218">The expression is evaluated at run time.</span></span> <span data-ttu-id="9e6ea-219">Quando viene eseguita la chiamata al metodo, il nome del metodo e i valori dei parametri SignalR invia al client.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-219">When the method call executes, SignalR sends the method name and the parameter values to the client.</span></span> <span data-ttu-id="9e6ea-220">Se il client dispone di un metodo che corrisponde al nome, che viene chiamato il metodo e i valori dei parametri vengono passati al metodo.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-220">If the client has a method that matches the name, that method is called and the parameter values are passed to it.</span></span> <span data-ttu-id="9e6ea-221">Se non viene trovato alcun metodo corrispondente nel client, viene generato alcun errore.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-221">If no matching method is found on the client, no error is raised.</span></span> <span data-ttu-id="9e6ea-222">Per altre informazioni, consultare [Guida all'API di ASP.NET SignalR Hubs](../guide-to-the-api/hubs-api-guide-server.md).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-222">For more information, refer to [ASP.NET SignalR Hubs API Guide](../guide-to-the-api/hubs-api-guide-server.md).</span></span>
11. <span data-ttu-id="9e6ea-223">Aprire il **TriviaController.cs** pagina all'interno la **controller** cartella e aggiungere quanto segue direttive using.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-223">Open the **TriviaController.cs** page inside the **Controllers** folder and add the following using directives.</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample7.cs)]
12. <span data-ttu-id="9e6ea-224">Aggiungere il codice evidenziato seguente per il **Post** metodo di azione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-224">Add the following highlighted code to the **Post** action method.</span></span>

    <span data-ttu-id="9e6ea-225">(Code - Snippet *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-225">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample8.cs)]
13. <span data-ttu-id="9e6ea-226">Aprire il **Statistics.cshtml** pagina all'interno di **viste | Home** cartella.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-226">Open the **Statistics.cshtml** page inside the **Views | Home** folder.</span></span> <span data-ttu-id="9e6ea-227">Individuare il **script** sezione e aggiungere i riferimenti allo script seguente all'inizio della sezione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-227">Locate the **Scripts** section and add the following script references at the beginning of the section.</span></span>

    <span data-ttu-id="9e6ea-228">(Code - Snippet *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-228">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample9.cshtml)]

    > [!NOTE]
    > <span data-ttu-id="9e6ea-229">Quando si aggiungono SignalR e altre librerie di script al progetto di Visual Studio, la gestione dei pacchetti potrebbe installare una versione del file script SignalR più recenti rispetto a quella illustrata in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-229">When you add SignalR and other script libraries to your Visual Studio project, the Package Manager might install a version of the SignalR script file that is more recent than the version shown in this topic.</span></span> <span data-ttu-id="9e6ea-230">Assicurarsi che il riferimento allo script nel codice corrisponda alla versione della libreria di script installata nel progetto.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-230">Make sure that the script reference in your code matches the version of the script library installed in your project.</span></span>
14. <span data-ttu-id="9e6ea-231">Aggiungere il codice evidenziato seguente per connettere il client per l'hub SignalR e aggiornare i dati delle statistiche quando viene ricevuto un nuovo messaggio dall'hub.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-231">Add the following highlighted code to connect the client to the SignalR hub and update the statistics data when a new message is received from the hub.</span></span>

    <span data-ttu-id="9e6ea-232">(Code - Snippet *RealTimeSignalR - Ex1 - SignalRClientCode*)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-232">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRClientCode*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample10.cshtml)]

    <span data-ttu-id="9e6ea-233">In questo codice, la creazione di un Proxy di Hub e la registrazione di un gestore eventi per restare in attesa per i messaggi inviati dal server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-233">In this code, you are creating a Hub Proxy and registering an event handler to listen for messages sent by the server.</span></span> <span data-ttu-id="9e6ea-234">In questo caso, in ascolto dei messaggi inviati tramite il *updateStatistics* (metodo).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-234">In this case, you listen for messages sent through the *updateStatistics* method.</span></span>

<a id="Ex1Task3"></a>
#### <a name="task-3--running-the-solution"></a><span data-ttu-id="9e6ea-235">Attività 3: esecuzione della soluzione</span><span class="sxs-lookup"><span data-stu-id="9e6ea-235">Task 3 – Running the Solution</span></span>

<span data-ttu-id="9e6ea-236">In questa attività si eseguirà la soluzione per verificare che la visualizzazione delle statistiche viene aggiornata automaticamente tramite SignalR dopo aver risposto a una nuova domanda.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-236">In this task, you will run the solution to verify that the statistics view is updated automatically using SignalR after answering a new question.</span></span>

1. <span data-ttu-id="9e6ea-237">Premere **F5** per eseguire la soluzione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-237">Press **F5** to run the solution.</span></span>

    > [!NOTE]
    > <span data-ttu-id="9e6ea-238">Se non è già stato effettuato l'accesso all'applicazione, accedere con l'utente che è stato creato nell'attività 1.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-238">If not already logged in to the application, log in with the user you created in Task 1.</span></span>
2. <span data-ttu-id="9e6ea-239">Aprire il **statistiche** pagina in una nuova finestra e inserire le **Home** pagina e **statistiche** pagina side-by-side come è stato fatto nell'attività 1.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-239">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side as you did in Task 1.</span></span>
3. <span data-ttu-id="9e6ea-240">Nel **Home** pagina, rispondere alla domanda facendo clic su una delle opzioni.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-240">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="9e6ea-241">![Rispondere a un'altra domanda](real-time-web-applications-with-signalr/_static/image13.png "rispondendo a un'altra domanda")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-241">![Answering another question](real-time-web-applications-with-signalr/_static/image13.png "Answering another question")</span></span>

    <span data-ttu-id="9e6ea-242">*Rispondere a un'altra domanda*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-242">*Answering another question*</span></span>
4. <span data-ttu-id="9e6ea-243">Dopo aver fatto clic su uno dei pulsanti, apparirà la risposta.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-243">After clicking one of the buttons, the answer should appear.</span></span> <span data-ttu-id="9e6ea-244">Si noti che le informazioni statistiche nella pagina viene aggiornate automaticamente dopo aver risposto alla domanda con le informazioni aggiornate senza la necessità di aggiornare l'intera pagina.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-244">Notice that the Statistics information on the page is updated automatically after answering the question with the updated information without the need to refresh the entire page.</span></span>

    <span data-ttu-id="9e6ea-245">![Pagina statistiche aggiornata dopo la risposta](real-time-web-applications-with-signalr/_static/image14.png "pagina statistiche aggiornata dopo la risposta")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-245">![Statistics page refreshed after answer](real-time-web-applications-with-signalr/_static/image14.png "Statistics page refreshed after answer")</span></span>

    <span data-ttu-id="9e6ea-246">*Pagina di statistiche aggiornata dopo la risposta*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-246">*Statistics page refreshed after answer*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-scaling-out-using-sql-server"></a><span data-ttu-id="9e6ea-247">Esercizio 2: Scalabilità orizzontale mediante SQL Server</span><span class="sxs-lookup"><span data-stu-id="9e6ea-247">Exercise 2: Scaling Out Using SQL Server</span></span>

<span data-ttu-id="9e6ea-248">Quando si ridimensiona un'applicazione web, in genere è possibile scegliere tra *aumento* e *la scalabilità orizzontale* opzioni.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-248">When scaling a web application, you can generally choose between *scaling up* and *scaling out* options.</span></span> <span data-ttu-id="9e6ea-249">*Scalabilità verticale* comporta l'utilizzo di un server di dimensioni maggiori, con più risorse (CPU, RAM e così via) durante *scalare in orizzontale* significa aggiungere più server per gestire il carico.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-249">*Scale up* means using a larger server, with more resources (CPU, RAM, etc.) while *scale out* means adding more servers to handle the load.</span></span> <span data-ttu-id="9e6ea-250">Il problema può verificarsi con il secondo è che i client possono ottenere indirizzati a server diversi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-250">The problem with the latter is that the clients can get routed to different servers.</span></span> <span data-ttu-id="9e6ea-251">Un client connesso a un server non riceverà i messaggi inviati da un altro server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-251">A client that is connected to one server will not receive messages sent from another server.</span></span>

<span data-ttu-id="9e6ea-252">È possibile risolvere questi problemi usando un componente chiamato *backplane*per inoltrare i messaggi tra i server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-252">You can solve these issues by using a component called *backplane*, to forward messages between servers.</span></span> <span data-ttu-id="9e6ea-253">Con un backplane abilitato, ogni istanza dell'applicazione invia messaggi al backplane e li inoltra il backplane alle altre istanze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-253">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span>

<span data-ttu-id="9e6ea-254">Esistono attualmente tre tipi dei ripiani posteriori per SignalR:</span><span class="sxs-lookup"><span data-stu-id="9e6ea-254">There are currently three types of backplanes for SignalR:</span></span>

- <span data-ttu-id="9e6ea-255">**Windows Azure Service Bus**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-255">**Windows Azure Service Bus**.</span></span> <span data-ttu-id="9e6ea-256">Service Bus è un'infrastruttura di messaggistica che consente ai componenti di invio di messaggi regime.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-256">Service Bus is a messaging infrastructure that allows components to send loosely coupled messages.</span></span>
- <span data-ttu-id="9e6ea-257">**SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-257">**SQL Server**.</span></span> <span data-ttu-id="9e6ea-258">Il backplane di SQL Server scrive i messaggi delle tabelle SQL.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-258">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="9e6ea-259">Backplane utilizza Service Broker di messaggistica efficiente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-259">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="9e6ea-260">Tuttavia funziona anche se Service Broker non è abilitato.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-260">However, it also works if Service Broker is not enabled.</span></span>
- <span data-ttu-id="9e6ea-261">**Redis**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-261">**Redis**.</span></span> <span data-ttu-id="9e6ea-262">Redis è un archivio chiave-valore in memoria.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-262">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="9e6ea-263">Redis supporta un modello publish/subscribe ("pub/sub") per l'invio di messaggi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-263">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>

<span data-ttu-id="9e6ea-264">Ogni messaggio viene inviato tramite un bus di messaggi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-264">Every message is sent through a message bus.</span></span> <span data-ttu-id="9e6ea-265">Un bus di messaggi implementa il [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interfaccia, che fornisce un'astrazione di pubblicazione/sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-265">A message bus implements the [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="9e6ea-266">Sostituendo il valore predefinito di lavoro dei ripiani posteriori delle **IMessageBus** con bus progettato per il backplane.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-266">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span>

<span data-ttu-id="9e6ea-267">Ogni istanza del server si connette al backplane tramite il bus.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-267">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="9e6ea-268">Quando viene inviato un messaggio, passa al backplane e backplane lo invia a ogni server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-268">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="9e6ea-269">Quando un server riceve un messaggio da un backplane, archivia il messaggio nella propria cache locale.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-269">When a server receives a message from the backplane, it stores the message in its local cache.</span></span> <span data-ttu-id="9e6ea-270">Il server recapita quindi i messaggi al client dalla cache locale.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-270">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="9e6ea-271">Per altre informazioni sull'uso di backplane SignalR, leggere questo [articolo](../performance/scaleout-in-signalr.md).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-271">For more information about how the SignalR backplane works, read this [article](../performance/scaleout-in-signalr.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9e6ea-272">Esistono alcuni scenari in cui un backplane può diventare un collo di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-272">There are some scenarios where a backplane can become a bottleneck.</span></span> <span data-ttu-id="9e6ea-273">Ecco alcuni scenari tipici di SignalR:</span><span class="sxs-lookup"><span data-stu-id="9e6ea-273">Here are some typical SignalR scenarios:</span></span>
> 
> - <span data-ttu-id="9e6ea-274">[Trasmissione del server](tutorial-server-broadcast-with-signalr.md) (ad esempio, le quotazioni di borsa): I ripiani posteriori delle funziona bene per questo scenario, perché il server controlla la frequenza con cui vengono inviati i messaggi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-274">[Server broadcast](tutorial-server-broadcast-with-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
> - <span data-ttu-id="9e6ea-275">[Da client a](tutorial-getting-started-with-signalr.md) (ad esempio, avvia una chat): In questo scenario, il backplane potrebbe essere un collo di bottiglia se il numero di messaggi viene ridimensionato con il numero di client. vale a dire, se la frequenza dei messaggi aumenta in modo i client in modo proporzionale man mano join.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-275">[Client-to-client](tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
> - <span data-ttu-id="9e6ea-276">[In tempo reale ad alta frequenza](tutorial-high-frequency-realtime-with-signalr.md) (ad esempio i giochi in tempo reale): Backplane non è consigliato per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-276">[High-frequency realtime](tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>

<span data-ttu-id="9e6ea-277">In questo esercizio si userà **SQL Server** per distribuire i messaggi tra le **fanatico Quiz** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-277">In this exercise, you will use **SQL Server** to distribute messages across the **Geek Quiz** application.</span></span> <span data-ttu-id="9e6ea-278">Si eseguirà queste attività in un computer singolo test per informazioni su come impostare la configurazione, ma per ottenere l'effetto completo, è necessario distribuire l'applicazione di SignalR in due o più server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-278">You will run these tasks on a single test machine to learn how to set up the configuration, but in order to get the full effect, you will need to deploy the SignalR application to two or more servers.</span></span> <span data-ttu-id="9e6ea-279">È anche necessario installare SQL Server in uno dei server o in un server dedicato distinto.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-279">You must also install SQL Server on one of the servers, or on a separate dedicated server.</span></span>

![Scalabilità orizzontale mediante SQL Server diagramma](real-time-web-applications-with-signalr/_static/image15.png)

<a id="Ex2Task1"></a>
#### <a name="task-1---understanding-the-scenario"></a><span data-ttu-id="9e6ea-281">Attività 1: comprendere lo Scenario</span><span class="sxs-lookup"><span data-stu-id="9e6ea-281">Task 1 - Understanding the Scenario</span></span>

<span data-ttu-id="9e6ea-282">In questa attività si eseguiranno 2 istanze di **fanatico Quiz** simulando IIS più istanze nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-282">In this task, you will run 2 instances of **Geek Quiz** simulating multiple IIS instances on your local machine.</span></span> <span data-ttu-id="9e6ea-283">In questo scenario, per rispondere alle domande di elementi semplici su un'applicazione di aggiornamento non riceveranno una notifica nella pagina delle statistiche della seconda istanza.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-283">In this scenario, when answering trivia questions on one application, update won't be notified on the statistics page of the second instance.</span></span> <span data-ttu-id="9e6ea-284">Questa simulazione è simile a un ambiente in cui l'applicazione viene distribuita in più istanze e l'utilizzo di un servizio di bilanciamento del carico per comunicare con essi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-284">This simulation resembles an environment where your application is deployed on multiple instances and using a load balancer to communicate with them.</span></span>

1. <span data-ttu-id="9e6ea-285">Aprire il **Begin.sln** soluzione che si trova nel **inizio/origine/Ex2-ScalingOutWithSQLServer** cartella.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-285">Open the **Begin.sln** solution located in the **Source/Ex2-ScalingOutWithSQLServer/Begin** folder.</span></span> <span data-ttu-id="9e6ea-286">Una volta caricata, si noterà nella **Esplora Server** che la soluzione contiene due progetti con identiche di strutture ma diversi nomi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-286">Once loaded, you will notice on the **Server Explorer** that the solution has two projects with identical structures but different names.</span></span> <span data-ttu-id="9e6ea-287">Ciò consente di simulare due istanze della stessa applicazione in esecuzione nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-287">This will simulate running two instances of the same application on your local machine.</span></span>

    <span data-ttu-id="9e6ea-288">![Iniziare a soluzione simulando 2 istanze del Quiz fanatico](real-time-web-applications-with-signalr/_static/image16.png "iniziare soluzione simulando 2 istanze del Quiz fanatico")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-288">![Begin Solution Simulating 2 Instances of Geek Quiz](real-time-web-applications-with-signalr/_static/image16.png "Begin Solution Simulating 2 Instances of Geek Quiz")</span></span>

    <span data-ttu-id="9e6ea-289">*Iniziare a soluzione simulando 2 istanze del Quiz fanatico*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-289">*Begin Solution Simulating 2 Instances of Geek Quiz*</span></span>
2. <span data-ttu-id="9e6ea-290">Aprire la pagina delle proprietà della soluzione facendo clic sul nodo della soluzione e selezionando **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-290">Open the properties page of the solution by right-clicking the solution node and selecting **Properties**.</span></span> <span data-ttu-id="9e6ea-291">Sotto **progetto di avvio**, selezionare **progetti di avvio multipli** e modificare i **azione** valore per entrambi i progetti in *avviare*.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-291">Under **Startup Project**, select **Multiple startup projects** and change the **Action** value for both projects to *Start*.</span></span>

    <span data-ttu-id="9e6ea-292">![Avviare più progetti](real-time-web-applications-with-signalr/_static/image17.png "avviare più progetti")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-292">![Starting Multiple Projects](real-time-web-applications-with-signalr/_static/image17.png "Starting Multiple Projects")</span></span>

    <span data-ttu-id="9e6ea-293">*Avviare più progetti*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-293">*Starting Multiple Projects*</span></span>
3. <span data-ttu-id="9e6ea-294">Premere **F5** per eseguire la soluzione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-294">Press **F5** to run the solution.</span></span> <span data-ttu-id="9e6ea-295">L'applicazione verrà avviata due istanze di **fanatico Quiz** in porte diverse, simulazione di più istanze della stessa applicazione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-295">The application will launch two instances of **Geek Quiz** in different ports, simulating multiple instances of the same application.</span></span> <span data-ttu-id="9e6ea-296">Aggiungere uno dei browser a sinistra e l'altro a destra dello schermo.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-296">Pin one of the browsers on left and the other on the right of your screen.</span></span> <span data-ttu-id="9e6ea-297">Accedere con le credenziali o registrare un nuovo utente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-297">Log in with your credentials or register a new user.</span></span> <span data-ttu-id="9e6ea-298">Una volta effettuato l'accesso, mantenere la pagina elementi semplici a sinistra e passare al **statistiche** pagina nel browser sul lato destro.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-298">Once logged in, keep the Trivia page on the left and go to the **Statistics** page in the browser on the right.</span></span>

    ![Quiz fanatico Side-by-Side](real-time-web-applications-with-signalr/_static/image18.png)

    <span data-ttu-id="9e6ea-300">*Quiz fanatico Side-by-Side*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-300">*Geek Quiz Side by Side*</span></span>

    ![Quiz fanatico in porte diverse](real-time-web-applications-with-signalr/_static/image19.png)

    <span data-ttu-id="9e6ea-302">*Quiz fanatico in porte diverse*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-302">*Geek Quiz in Different Ports*</span></span>
4. <span data-ttu-id="9e6ea-303">Iniziare a rispondere alle domande nel browser a sinistra e si noterà che il **statistiche** pagina del browser a destra non viene aggiornata.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-303">Start answering questions in the left browser and you will notice that the **Statistics** page in the right browser is not being updated.</span></span> <span data-ttu-id="9e6ea-304">Infatti **SignalR** memorizzare nella cache locale viene utilizzato per distribuire i messaggi tra i client e questo scenario simula più istanze, pertanto la cache non è condivisa tra di essi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-304">This is because **SignalR** uses a local cache to distribute messages across their clients and this scenario is simulating multiple instances, therefore the cache is not shared between them.</span></span> <span data-ttu-id="9e6ea-305">È possibile verificare che **SignalR** stia funzionando, gli stessi passaggi di test, ma con una singola app.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-305">You can verify that **SignalR** is working by testing the same steps but using a single app.</span></span> <span data-ttu-id="9e6ea-306">Nelle attività seguenti si configurerà un backplane per replicare i messaggi tra istanze.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-306">In the following tasks you will configure a backplane to replicate the messages across instances.</span></span>
5. <span data-ttu-id="9e6ea-307">Tornare a Visual Studio e arrestare il debug.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-307">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-sql-server-backplane"></a><span data-ttu-id="9e6ea-308">Attività 2: creazione di SQL Server Backplane</span><span class="sxs-lookup"><span data-stu-id="9e6ea-308">Task 2 – Creating the SQL Server Backplane</span></span>

<span data-ttu-id="9e6ea-309">In questa attività si creerà un database che verrà utilizzato come un backplane per il **fanatico Quiz** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-309">In this task, you will create a database that will serve as a backplane for the **Geek Quiz** application.</span></span> <span data-ttu-id="9e6ea-310">Si userà **Esplora oggetti di SQL Server** per esplorare il server e inizializzare il database.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-310">You will use **SQL Server Object Explorer** to browse your server and initialize the database.</span></span> <span data-ttu-id="9e6ea-311">Inoltre, si abiliterà il **Service Broker**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-311">Additionally, you will enable the **Service Broker**.</span></span>

1. <span data-ttu-id="9e6ea-312">Nella **Visual Studio**aprire dal menu **View** e selezionare **Esplora oggetti di SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-312">In **Visual Studio**, open menu **View** and select **SQL Server Object Explorer**.</span></span>
2. <span data-ttu-id="9e6ea-313">Connettersi all'istanza di Local DB facendo clic con il **SQL Server** nodo e selezionando **Aggiungi SQL Server...**  opzione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-313">Connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="9e6ea-314">![Aggiunta di un'istanza di SQL Server](real-time-web-applications-with-signalr/_static/image20.png "aggiunta di un'istanza di SQL Server")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-314">![Adding a SQL Server Instance](real-time-web-applications-with-signalr/_static/image20.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="9e6ea-315">*Aggiunta di un'istanza di SQL Server da Esplora oggetti di SQL Server*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-315">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
3. <span data-ttu-id="9e6ea-316">Impostare il **nome server** al *\v11.0 (localdb)* e lasciare **l'autenticazione di Windows** come modalità di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-316">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="9e6ea-317">Fare clic su **Connect** per continuare.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-317">Click **Connect** to continue.</span></span>

    <span data-ttu-id="9e6ea-318">![La connessione a LocalDB](real-time-web-applications-with-signalr/_static/image21.png "la connessione a LocalDB")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-318">![Connecting to LocalDB](real-time-web-applications-with-signalr/_static/image21.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="9e6ea-319">*La connessione a LocalDB*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-319">*Connecting to LocalDB*</span></span>
4. <span data-ttu-id="9e6ea-320">Ora che si è connessi all'istanza di Local DB, è necessario creare un database che rappresenterà il backplane di SQL Server per SignalR.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-320">Now that you are connected to your LocalDB instance, you will need to create a database that will represent the SQL Server backplane for SignalR.</span></span> <span data-ttu-id="9e6ea-321">A tale scopo, fare doppio clic il **database** nodo e selezionare **aggiungere un nuovo Database**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-321">To do this, right-click the **Databases** node and select **Add New Database**.</span></span>

    <span data-ttu-id="9e6ea-322">![Aggiunta di un nuovo database](real-time-web-applications-with-signalr/_static/image22.png "aggiungendo un nuovo database")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-322">![Adding a new database](real-time-web-applications-with-signalr/_static/image22.png "Adding a new database")</span></span>

    <span data-ttu-id="9e6ea-323">*Aggiunta di un nuovo database*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-323">*Adding a new database*</span></span>
5. <span data-ttu-id="9e6ea-324">Impostare il nome del database su *SignalR* e fare clic su **OK** per crearlo.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-324">Set the database name to *SignalR* and click **OK** to create it.</span></span>

    <span data-ttu-id="9e6ea-325">![Creazione del database di SignalR](real-time-web-applications-with-signalr/_static/image23.png "creazione del database di SignalR")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-325">![Creating the SignalR database](real-time-web-applications-with-signalr/_static/image23.png "Creating the SignalR database")</span></span>

    <span data-ttu-id="9e6ea-326">*Creazione del database di SignalR*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-326">*Creating the SignalR database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="9e6ea-327">È possibile scegliere qualsiasi nome per il database.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-327">You can choose any name for the database.</span></span>
6. <span data-ttu-id="9e6ea-328">Per ricevere gli aggiornamenti in modo più efficiente da un backplane, è consigliabile abilitare Service Broker per il database.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-328">To receive updates more efficiently from the backplane, it is recommended to enable Service Broker for the database.</span></span> <span data-ttu-id="9e6ea-329">Service Broker fornisce il supporto nativo per la messaggistica e Accodamento in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-329">Service Broker provides native support for messaging and queuing in SQL Server.</span></span> <span data-ttu-id="9e6ea-330">Backplane funziona anche senza Service Broker.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-330">The backplane also works without Service Broker.</span></span> <span data-ttu-id="9e6ea-331">Aprire una nuova query facendo clic con il database e quindi scegliere **nuova Query**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-331">Open a new query by right-clicking the database and select **New Query**.</span></span>

    <span data-ttu-id="9e6ea-332">![Apertura di una nuova Query](real-time-web-applications-with-signalr/_static/image24.png "aprendo una nuova Query")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-332">![Opening a New Query](real-time-web-applications-with-signalr/_static/image24.png "Opening a New Query")</span></span>

    <span data-ttu-id="9e6ea-333">*Apertura di una nuova Query*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-333">*Opening a New Query*</span></span>
7. <span data-ttu-id="9e6ea-334">Per verificare se Service Broker è abilitato, eseguire una query il **viene\_broker\_abilitata** colonna il **Sys. Databases** vista del catalogo.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-334">To check whether Service Broker is enabled, query the **is\_broker\_enabled** column in the **sys.databases** catalog view.</span></span> <span data-ttu-id="9e6ea-335">Eseguire lo script seguente nella finestra di query aperti di recente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-335">Execute the following script in the recently opened query window.</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample11.sql)]

    <span data-ttu-id="9e6ea-336">![Ricerca dello stato di Service Broker](real-time-web-applications-with-signalr/_static/image25.png "ricerca dello stato di Service Broker")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-336">![Querying the Service Broker Status](real-time-web-applications-with-signalr/_static/image25.png "Querying the Service Broker Status")</span></span>

    <span data-ttu-id="9e6ea-337">*Ricerca dello stato di Service Broker*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-337">*Querying the Service Broker Status*</span></span>
8. <span data-ttu-id="9e6ea-338">Se il valore della **viene\_broker\_abilitata** colonna nel database è &quot;0&quot;, usare il comando seguente per abilitarlo.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-338">If the value of the **is\_broker\_enabled** column in your database is &quot;0&quot;, use the following command to enable it.</span></span> <span data-ttu-id="9e6ea-339">Sostituire **&lt;YOUR-DATABASE&gt;** con il nome è impostato durante la creazione del database (ad esempio: SignalR).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-339">Replace **&lt;YOUR-DATABASE&gt;** with the name you set when creating the database (e.g.: SignalR).</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample12.sql)]

    <span data-ttu-id="9e6ea-340">![Abilitare Service Broker](real-time-web-applications-with-signalr/_static/image26.png "abilitare Service Broker")</span><span class="sxs-lookup"><span data-stu-id="9e6ea-340">![Enabling Service Broker](real-time-web-applications-with-signalr/_static/image26.png "Enabling Service Broker")</span></span>

    <span data-ttu-id="9e6ea-341">*Abilitare Service Broker*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-341">*Enabling Service Broker*</span></span>

    > [!NOTE]
    > <span data-ttu-id="9e6ea-342">Se questa query viene visualizzato un deadlock, assicurarsi che non sono presenti applicazioni connesse al database.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-342">If this query appears to deadlock, make sure there are no applications connected to the DB.</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--configuring-the-signalr-application"></a><span data-ttu-id="9e6ea-343">Attività 3: configurazione dell'applicazione di SignalR</span><span class="sxs-lookup"><span data-stu-id="9e6ea-343">Task 3 – Configuring the SignalR Application</span></span>

<span data-ttu-id="9e6ea-344">In questa attività si configurerà **fanatico Quiz** per connettersi al backplane SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-344">In this task, you will configure **Geek Quiz** to connect to the SQL Server backplane.</span></span> <span data-ttu-id="9e6ea-345">Prima di tutto si aggiungerà il **SignalR.SqlServer** stringa pacchetto NuGet e impostare la connessione al database backplane.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-345">You will first add the **SignalR.SqlServer** NuGet package and set the connection string to your backplane database.</span></span>

1. <span data-ttu-id="9e6ea-346">Aprire il **Console di gestione pacchetti** dalla **Tools** > **Gestione pacchetti NuGet**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-346">Open the **Package Manager Console** from **Tools** > **NuGet Package Manager**.</span></span> <span data-ttu-id="9e6ea-347">Assicurarsi che **GeekQuiz** selezionato nel progetto di **progetto predefinito** elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-347">Make sure that **GeekQuiz** project is selected in the **Default project** drop-down list.</span></span> <span data-ttu-id="9e6ea-348">Digitare il comando seguente per installare il **Microsoft.AspNet.SignalR.SqlServer** pacchetto NuGet.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-348">Type the following command to install the **Microsoft.AspNet.SignalR.SqlServer** NuGet package.</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample13.ps1)]
2. <span data-ttu-id="9e6ea-349">Ripetere il passaggio precedente, ma questa volta per il progetto **GeekQuiz2**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-349">Repeat the previous step but this time for project **GeekQuiz2**.</span></span>
3. <span data-ttu-id="9e6ea-350">Per configurare il backplane di SQL Server, aprire il **Startup.cs** file del **GeekQuiz** del progetto e aggiungere il codice seguente per il **configura** (metodo).</span><span class="sxs-lookup"><span data-stu-id="9e6ea-350">To configure the SQL Server backplane, open the **Startup.cs** file of the **GeekQuiz** project and add the following code to the **Configure** method.</span></span> <span data-ttu-id="9e6ea-351">Sostituire **&lt;YOUR-DATABASE&gt;** con il nome del database usata durante la creazione il backplane di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-351">Replace **&lt;YOUR-DATABASE&gt;** with your database name you used when creating the SQL Server backplane.</span></span> <span data-ttu-id="9e6ea-352">Ripetere questo passaggio per la **GeekQuiz2** progetto.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-352">Repeat this step for the **GeekQuiz2** project.</span></span>

    <span data-ttu-id="9e6ea-353">(Code - Snippet *RealTimeSignalR - Ex2 - StartupConfiguration*)</span><span class="sxs-lookup"><span data-stu-id="9e6ea-353">(Code Snippet - *RealTimeSignalR - Ex2 - StartupConfiguration*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample14.cs)]
4. <span data-ttu-id="9e6ea-354">Ora che entrambi i progetti configurati per utilizzare il backplane di SQL Server, premere **F5** eseguirli contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-354">Now that both projects are configured to use the SQL Server backplane, press **F5** to run them simultaneously.</span></span>
5. <span data-ttu-id="9e6ea-355">Anche in questo caso **Visual Studio** avvierà due istanze di **fanatico Quiz** in porte diverse.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-355">Again, **Visual Studio** will launch two instances of **Geek Quiz** in different ports.</span></span> <span data-ttu-id="9e6ea-356">Aggiungere uno dei browser a sinistra e l'altro a destra dello schermo e accedere con le proprie credenziali.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-356">Pin one of the browsers on the left and the other on the right of your screen and log in with your credentials.</span></span> <span data-ttu-id="9e6ea-357">Mantenere la pagina elementi semplici a sinistra e passare a **statistiche** pagein del browser a destra.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-357">Keep the Trivia page on the left and go to **Statistics** pagein the right browser.</span></span>
6. <span data-ttu-id="9e6ea-358">Iniziare a rispondere alle domande nel browser a sinistra.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-358">Start answering questions in the left browser.</span></span> <span data-ttu-id="9e6ea-359">Questa volta, il **statistiche** pagina viene aggiornata grazie al backplane.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-359">This time, the **Statistics** page is updated thanks to the backplane.</span></span> <span data-ttu-id="9e6ea-360">Passare tra le applicazioni (**statistiche** ora è a sinistra, e **elementi semplici** è a destra) e ripetere il test per convalidare che è in corso per entrambe le istanze.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-360">Switch between applications (**Statistics** is now on the left, and **Trivia** is on the right) and repeat the test to validate that it is working for both instances.</span></span> <span data-ttu-id="9e6ea-361">Backplane viene utilizzato come un *cache condivisa* dei messaggi per tutti i server collegati e ogni server verranno archiviati i messaggi nella propria cache locale per la distribuzione ai client connessi.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-361">The backplane serves as a *shared cache* of messages for each connected server, and each server will store the messages in their own local cache to distribute to connected clients.</span></span>
7. <span data-ttu-id="9e6ea-362">Tornare a Visual Studio e arrestare il debug.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-362">Go back to Visual Studio and stop debugging.</span></span>
8. <span data-ttu-id="9e6ea-363">Il componente backplane di SQL Server genera automaticamente le tabelle necessarie nel database specificato.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-363">The SQL Server backplane component automatically generates the necessary tables on the specified database.</span></span> <span data-ttu-id="9e6ea-364">Nel **Esplora oggetti di SQL Server** panel, aprire il database creato per il backplane (ad esempio: SignalR) ed espandere le tabelle.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-364">In the **SQL Server Object Explorer** panel, open the database you created for the backplane (e.g.: SignalR) and expand its tables.</span></span> <span data-ttu-id="9e6ea-365">Verrà visualizzata nelle tabelle seguenti:</span><span class="sxs-lookup"><span data-stu-id="9e6ea-365">You should see the following tables:</span></span>

    ![Backplane generate tabelle](real-time-web-applications-with-signalr/_static/image27.png)

    <span data-ttu-id="9e6ea-367">*Backplane generate tabelle*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-367">*Backplane Generated Tables*</span></span>
9. <span data-ttu-id="9e6ea-368">Fare doppio clic il **SignalR.Messages\_0** tabella e selezionare **visualizzare i dati**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-368">Right-click the **SignalR.Messages\_0** table and select **View Data**.</span></span>

    ![Tabella della vista SignalR Backplane messaggi](real-time-web-applications-with-signalr/_static/image28.png)

    <span data-ttu-id="9e6ea-370">*Tabella della vista SignalR Backplane messaggi*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-370">*View SignalR Backplane Messages Table*</span></span>
10. <span data-ttu-id="9e6ea-371">È possibile visualizzare i diversi messaggi inviati per il **Hub** per rispondere alle domande gli elementi semplici.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-371">You can see the different messages sent to the **Hub** when answering the trivia questions.</span></span> <span data-ttu-id="9e6ea-372">Backplane distribuisce questi messaggi per qualsiasi istanza connessa.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-372">The backplane distributes these messages to any connected instance.</span></span>

    ![Tabella di messaggi backplane](real-time-web-applications-with-signalr/_static/image29.png)

    <span data-ttu-id="9e6ea-374">*Tabella di messaggi backplane*</span><span class="sxs-lookup"><span data-stu-id="9e6ea-374">*Backplane Messages Table*</span></span>

---

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="9e6ea-375">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="9e6ea-375">Summary</span></span>

<span data-ttu-id="9e6ea-376">In questo laboratorio pratico, si è appreso come aggiungere **SignalR** alle applicazione e inviare notifiche dal server ai client connessi mediante **hub**.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-376">In this hands-on lab, you have learned how to add **SignalR** to your application and send notifications from the server to your connected clients using **Hubs**.</span></span> <span data-ttu-id="9e6ea-377">Inoltre, si è appreso come scalare orizzontalmente l'applicazione usando un *backplane* componente quando l'applicazione viene distribuita in più istanze IIS.</span><span class="sxs-lookup"><span data-stu-id="9e6ea-377">Additionally, you learned how to scale out your application by using a *backplane* component when your application is deployed in multiple IIS instances.</span></span>
