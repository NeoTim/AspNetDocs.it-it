---
uid: web-forms/overview/moving-to-aspnet-20/membership
title: Appartenenza | Microsoft Docs
author: microsoft
description: Sistema di appartenenze ASP.NET si basa sul successo del modello di autenticazione form da ASP.NET 1.x. Autenticazione basata su form ASP.NET fornisce un modo pratico per incorp...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: f2339485-5d78-4c5e-8c0a-dc9b8a315345
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/membership
msc.type: authoredcontent
ms.openlocfilehash: da6fc205bd852a818d65425586cec38fdb08d310
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2019
ms.locfileid: "65131049"
---
# <a name="membership"></a><span data-ttu-id="2f1b4-104">Appartenenza</span><span class="sxs-lookup"><span data-stu-id="2f1b4-104">Membership</span></span>

<span data-ttu-id="2f1b4-105">by [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="2f1b4-106">Sistema di appartenenze ASP.NET si basa sul successo del modello di autenticazione form da ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-106">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="2f1b4-107">Autenticazione basata su form ASP.NET fornisce un modo pratico per incorporare un modulo di accesso nell'applicazione ASP.NET e convalidare gli utenti in un database o un altro archivio dati.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-107">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span>

<span data-ttu-id="2f1b4-108">Sistema di appartenenze ASP.NET si basa sul successo del modello di autenticazione form da ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-108">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="2f1b4-109">Autenticazione basata su form ASP.NET fornisce un modo pratico per incorporare un modulo di accesso nell'applicazione ASP.NET e convalidare gli utenti in un database o un altro archivio dati.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-109">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span> <span data-ttu-id="2f1b4-110">I membri della classe FormsAuthentication rendono possibile la gestione dei cookie per l'autenticazione, verificare la presenza di un account di accesso valido, accedere a un utente e così via. Tuttavia, l'implementazione di autenticazione basata su form in un'applicazione di ASP.NET 1.x possono richiedere una notevole quantità di codice.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-110">The members of the FormsAuthentication class make it possible to handle cookies for authentication, check for a valid login, log a user out etc. However, implementing Forms authentication in an ASP.NET 1.x application can require a fair amount of code.</span></span>

<span data-ttu-id="2f1b4-111">L'appartenenza di ASP.NET 2.0 è un miglioramento importante rispetto all'uso di autenticazione basata su form da solo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-111">Membership in ASP.NET 2.0 is a major advancement over using Forms authentication alone.</span></span> <span data-ttu-id="2f1b4-112">(L'appartenenza è più efficace quando è associata l'autenticazione basata su form, ma utilizzando l'autenticazione basata su form non è un requisito). Come si vedrà a breve, è possibile utilizzare i controlli di accesso e le appartenenze di ASP.NET in ASP.NET 2.0 per implementare un sistema di appartenenze potente senza scrivere molto codice affatto.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-112">(Membership is most robust when coupled with Forms authentication, but using Forms authentication is not a requirement.) As you'll soon see, you can use ASP.NET Membership and the login controls in ASP.NET 2.0 to implement a powerful membership system without writing much code at all.</span></span>

## <a name="implementing-membership-in-aspnet-20"></a><span data-ttu-id="2f1b4-113">Implementazione di appartenenza in ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="2f1b4-113">Implementing Membership in ASP.NET 2.0</span></span>

<span data-ttu-id="2f1b4-114">L'appartenenza viene implementato seguendo i quattro passaggi.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-114">Membership is implemented by following four steps.</span></span> <span data-ttu-id="2f1b4-115">Tenere presente che esistono molti passaggi secondari che sono coinvolti, nonché configurazione facoltativa che può essere implementato anche.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-115">Keep in mind that there are many sub-steps that are involved as well as optional configuration that can be implemented as well.</span></span> <span data-ttu-id="2f1b4-116">Questi passaggi sono concepiti per illustrare il quadro generale della configurazione di appartenenza.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-116">These steps are meant to illustrate the big picture of configuring membership.</span></span>

1. <span data-ttu-id="2f1b4-117">Creare il database di appartenenza (se SQL Server viene usato come archivio di appartenenza.)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-117">Create your membership database (if SQL Server is used as the membership store.)</span></span>
2. <span data-ttu-id="2f1b4-118">Specificare le opzioni di appartenenza nei file di configurazione delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-118">Specify the membership options in your applications configuration files.</span></span> <span data-ttu-id="2f1b4-119">(L'appartenenza è abilitata per impostazione predefinita).</span><span class="sxs-lookup"><span data-stu-id="2f1b4-119">(Membership is enabled by default.)</span></span>
3. <span data-ttu-id="2f1b4-120">Determinare il tipo di archivio di appartenenza che si desidera usare.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-120">Determine the type of membership store you want to use.</span></span> <span data-ttu-id="2f1b4-121">Le opzioni sono:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-121">Options are:</span></span> 

    - <span data-ttu-id="2f1b4-122">Microsoft SQL Server (versione 7.0 o versioni successive)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-122">Microsoft SQL Server (version 7.0 or later)</span></span>
    - <span data-ttu-id="2f1b4-123">Active Directory Store</span><span class="sxs-lookup"><span data-stu-id="2f1b4-123">Active Directory Store</span></span>
    - <span data-ttu-id="2f1b4-124">Provider di appartenenze personalizzato</span><span class="sxs-lookup"><span data-stu-id="2f1b4-124">Custom membership provider</span></span>
4. <span data-ttu-id="2f1b4-125">Configurare l'applicazione per l'autenticazione basata su form ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-125">Configure the application for ASP.NET Forms authentication.</span></span> <span data-ttu-id="2f1b4-126">Ancora una volta, l'appartenenza è progettato per sfruttare i vantaggi dell'autenticazione basata su form, ma utilizzando l'autenticazione basata su form non è un requisito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-126">Once again, Membership is designed to take advantage of Forms authentication, but using Forms authentication is not a requirement.</span></span>
5. <span data-ttu-id="2f1b4-127">Definire gli account utente per l'appartenenza e configurare i ruoli se lo si desidera.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-127">Define user accounts for membership and configure roles if desired.</span></span>

## <a name="creating-the-membership-database"></a><span data-ttu-id="2f1b4-128">Creazione del Database di appartenenza</span><span class="sxs-lookup"><span data-stu-id="2f1b4-128">Creating the Membership Database</span></span>

<span data-ttu-id="2f1b4-129">Se si usa SQL Server 7.0 o versioni successive come archivio di appartenenza, è possibile usare aspnet\_utilità regsql (disponibile più facilmente da di Visual Studio .NET 2005 prompt dei comandi) per configurare il database.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-129">If you're using SQL Server 7.0 or later as your membership store, you can use the aspnet\_regsql utility (available most easily from the Visual Studio .NET 2005 Command Prompt) to configure your database.</span></span> <span data-ttu-id="2f1b4-130">Aspnet\_regsql utilità può essere usato come uno strumento del prompt dei comandi o tramite una procedura guidata GUI.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-130">The aspnet\_regsql utility can be used as a command prompt tool or via a GUI wizard.</span></span> <span data-ttu-id="2f1b4-131">Il metodo di procedura guidata è il modo più semplice per configurare il database.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-131">The wizard method is the easiest way to configure your database.</span></span> <span data-ttu-id="2f1b4-132">Per accedere alla procedura guidata, è sufficiente eseguire il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-132">To access the wizard, simply run the following command:</span></span>

`aspnet_regsql W`

<span data-ttu-id="2f1b4-133">Quando si esegue il comando, verrà visualizzata con l'installazione guidata di ASP.NET SQL Server come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-133">Once you run that command, you will be presented with the ASP.NET SQL Server Setup Wizard as shown below.</span></span>

![](membership/_static/image1.jpg)

<span data-ttu-id="2f1b4-134">**Figura 1**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-134">**Figure 1**</span></span>

<span data-ttu-id="2f1b4-135">L'installazione guidata di ASP.NET SQL Server crea il sito Web dell'istanza che è specificare nella procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-135">The ASP.NET SQL Server Setup Wizard creates the Web site in the instance you specify in the wizard.</span></span> <span data-ttu-id="2f1b4-136">Tuttavia, ASP.NET utilizzerà la stringa di connessione nel file Machine. config per connettersi al database.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-136">However, ASP.NET will use the connection string in the machine.config file to connect to your database.</span></span> <span data-ttu-id="2f1b4-137">Per impostazione predefinita, questa stringa di connessione faranno riferimento a un'istanza di SQL Server 2005, pertanto se si usa un'istanza di SQL Server 2000 o SQL Server 7.0, è necessario modificare la stringa di connessione nel file Machine. config.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-137">By default, this connection string will point to a SQL Server 2005 instance, so if you are using a SQL Server 2000 or SQL Server 7.0 instance, you will need to modify the connection string in the machine.config file.</span></span> <span data-ttu-id="2f1b4-138">Stringa di connessione può essere disponibile qui:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-138">That connection string can be located here:</span></span>

[!code-xml[Main](membership/samples/sample1.xml)]

<span data-ttu-id="2f1b4-139">Sfortunatamente, se non si modifica la stringa di connessione, ASP.NET non fornirà un errore descrittivo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-139">Unfortunately, if you don't modify the connection string, ASP.NET will not give you a descriptive error.</span></span> <span data-ttu-id="2f1b4-140">Solo continuerà a ricevere lamentele da parte per segnalare che il database è ancora stato creato.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-140">It will just continue to complain saying that you haven't created the database.</span></span> <span data-ttu-id="2f1b4-141">Nel caso precedente, ho modificato la stringa di connessione in modo da puntare alla mia istanza di SQL Server 2000 locale.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-141">In the case above, I have modified the connection string to point to my local SQL Server 2000 instance.</span></span>

## <a name="specifying-configuration-and-adding-users-and-roles"></a><span data-ttu-id="2f1b4-142">Specifica di configurazione e l'aggiunta di utenti e ruoli</span><span class="sxs-lookup"><span data-stu-id="2f1b4-142">Specifying Configuration and Adding Users and Roles</span></span>

<span data-ttu-id="2f1b4-143">Il passaggio successivo nella configurazione appartenenza consiste nell'aggiungere le informazioni necessarie al file Web. config dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-143">The next step in configuring Membership is to add the necessary information to the web.config file of the application.</span></span> <span data-ttu-id="2f1b4-144">In ASP.NET 1.x, modificando il file Web. config talvolta era difficile a causa della mancanza di Intellisense e l'uso di lowerCamelCase.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-144">In ASP.NET 1.x, modifying the web.config file was sometimes difficult because of the use of lowerCamelCase and the lack of Intellisense.</span></span> <span data-ttu-id="2f1b4-145">Visual Studio .NET 2005 rende molto più semplice con Intellisense per i file di configurazione dell'attività, ma ASP.NET 2.0 fa un ulteriore passo fornendo un'interfaccia Web per la modifica dei file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-145">Visual Studio .NET 2005 makes the task much easier with Intellisense for configuration files, but ASP.NET 2.0 goes one step further by providing a Web interface for editing configuration files.</span></span>

<span data-ttu-id="2f1b4-146">È possibile avviare l'interfaccia Web facendo clic sul pulsante di configurazione ASP.NET sulla barra degli strumenti Esplora soluzioni, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-146">You can launch the Web interface by clicking the ASP.NET Configuration button on the Solution Explorer toolbar as shown below.</span></span> <span data-ttu-id="2f1b4-147">È anche possibile avviare l'interfaccia Web tramite i popup visualizzate quando vengono inseriti i controlli di accesso.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-147">You can also launch the Web interface via pop-ups that are displayed when Login controls are inserted.</span></span>

![](membership/_static/image2.jpg)

<span data-ttu-id="2f1b4-148">**Figura 2**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-148">**Figure 2**</span></span>

<span data-ttu-id="2f1b4-149">Verrà avviato lo strumento Amministrazione sito Web di ASP.NET illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-149">This launches the ASP.NET Web Site Administration Tool shown below.</span></span> <span data-ttu-id="2f1b4-150">L'amministrazione del sito Web ASP.NET è un'interfaccia con quattro schede che rende più semplice gestire le impostazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-150">The ASP.NET Web Site Administration is a four-tab interface that makes it easy to manage application settings.</span></span> <span data-ttu-id="2f1b4-151">Sono disponibili le schede seguenti:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-151">The following tabs are available:</span></span>

- <span data-ttu-id="2f1b4-152">**Home**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-152">**Home**</span></span>
- <span data-ttu-id="2f1b4-153">**Sicurezza** configurare l'accesso, ruoli e utenti.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-153">**Security** Configure users, roles, and access.</span></span>
- <span data-ttu-id="2f1b4-154">**Applicazione** Configura impostazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-154">**Application** Configure application settings.</span></span>
- <span data-ttu-id="2f1b4-155">**Provider** configurare e testare il provider di appartenenze delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-155">**Provider** Configure and test your applications membership provider.</span></span>

<span data-ttu-id="2f1b4-156">Lo strumento Amministrazione sito Web consente facilmente creare nuovi utenti, creare nuovi ruoli e per gestire utenti e ruoli.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-156">The Web Site Administration Tool allows you to easily create new users, create new roles, and to manage users and roles.</span></span> <span data-ttu-id="2f1b4-157">Questa possibilità non è disponibile nell'interfaccia di Windows.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-157">This ability is not available in the Windows interface.</span></span> <span data-ttu-id="2f1b4-158">L'interfaccia di Windows consente di definire in modo semplice le impostazioni di autorizzazione e aggiungere, eliminare e gestire i provider, che non sono presenti nello strumento Amministrazione sito Web.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-158">The Windows interface allows you to easily define authorization settings and to add, delete, and manage providers, capabilities that are not in the Web Site Administration Tool.</span></span>

<span data-ttu-id="2f1b4-159">Per avviare l'interfaccia di Windows, aprire lo snap-in Internet Information Services, fare doppio clic sull'applicazione e scegliere Proprietà.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-159">To launch the Windows interface, open the Internet Information Services snap-in, right-click on your application, and choose Properties.</span></span> <span data-ttu-id="2f1b4-160">Fare clic sulla scheda ASP.NET e quindi fare clic sul pulsante Modifica configurazione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-160">Click the ASP.NET tab and then click the Edit Configuration button.</span></span> <span data-ttu-id="2f1b4-161">(L'applicazione deve essere eseguito con ASP.NET 2.0 per il pulsante di modifica configurazione deve essere abilitata.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-161">(The application must be running under ASP.NET 2.0 for the Edit Configuration button to be enabled.</span></span> <span data-ttu-id="2f1b4-162">È possibile configurare la versione di ASP.NET in anche la finestra di dialogo ASP.NET.) La finestra di dialogo Impostazioni di configurazione ASP.NET viene visualizzato come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-162">You can configure the ASP.NET version in the ASP.NET dialog as well.) The ASP.NET Configuration Settings dialog is displayed as shown below.</span></span>

![](membership/_static/image3.jpg)

<span data-ttu-id="2f1b4-163">**Figura 3**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-163">**Figure 3**</span></span>

<span data-ttu-id="2f1b4-164">Nella scheda Generale, sono elencate le stringhe di connessione e le impostazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-164">On the General tab, connection strings and application settings are listed.</span></span> <span data-ttu-id="2f1b4-165">Tutte le impostazioni in corsivo vengono definite in un file di configurazione padre (Machine. config o Web. config a un livello superiore) e le impostazioni non in corsivo sono dal file di configurazione delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-165">Any settings in italics are defined in a parent configuration file (either the machine.config or a web.config at a higher level) and settings not in italics are from the applications configuration file.</span></span> <span data-ttu-id="2f1b4-166">Se un'impostazione viene aggiunto, rimosso o modificato a livello di applicazione, ASP.NET verrà aggiungere, rimuovere o modificare l'impostazione in Web. config livelli applicazione invece di rimuovere l'impostazione dal file di configurazione da cui viene ereditato.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-166">If a setting is added, removed, or edited at the application level, ASP.NET will add, remove, or modify the setting at the application levels web.config instead of removing the setting from the configuration file from which it is inherited.</span></span>

<span data-ttu-id="2f1b4-167">Di seguito è illustrata la scheda di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-167">The Authentication tab is shown below.</span></span> <span data-ttu-id="2f1b4-168">Si tratta in cui si configureranno le impostazioni di appartenenza.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-168">This is where you will configure your membership settings.</span></span> <span data-ttu-id="2f1b4-169">Form di impostazioni di autenticazione provider di appartenenze, e i provider di ruoli possono essere configurati qui.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-169">Forms authentication settings, membership providers, and role providers can be configured here.</span></span>

![](membership/_static/image4.jpg)

<span data-ttu-id="2f1b4-170">**Figura 4**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-170">**Figure 4**</span></span>

## <a name="implementing-membership-in-your-application"></a><span data-ttu-id="2f1b4-171">Implementazione di appartenenza nell'applicazione</span><span class="sxs-lookup"><span data-stu-id="2f1b4-171">Implementing Membership in Your Application</span></span>

<span data-ttu-id="2f1b4-172">Il modo più semplice per implementare l'appartenenza di ASP.NET 2.0 nell'applicazione è usare i controlli di accesso specificati.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-172">The easiest way to implement ASP.NET 2.0 membership in your application is to use the provided Logon controls.</span></span> <span data-ttu-id="2f1b4-173">Questo metodo consente di implementare le nozioni di base dell'appartenenza di ASP.NET 2.0 senza scrivere alcun codice affatto.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-173">This method allows you to implement the basics of ASP.NET 2.0 membership without writing any code at all.</span></span>

<span data-ttu-id="2f1b4-174">I seguenti controlli di accesso sono disponibili in ASP.NET 2.0:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-174">The following Logon controls are available in ASP.NET 2.0:</span></span>

## <a name="login-control"></a><span data-ttu-id="2f1b4-175">Controllo degli accessi</span><span class="sxs-lookup"><span data-stu-id="2f1b4-175">Login Control</span></span>

<span data-ttu-id="2f1b4-176">Il controllo di accesso fornisce un'interfaccia per un utente per accedere al sistema di appartenenza.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-176">The Login control provides an interface for someone to log into your membership system.</span></span> <span data-ttu-id="2f1b4-177">Si fornisce una casella di testo Nome utente e password e un pulsante di accesso.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-177">It provides you with a username and password textbox and a login button.</span></span> <span data-ttu-id="2f1b4-178">Molte altre funzionalità comuni, ad esempio un collegamento per la registrazione per le persone che non hanno ancora stato fatto in modo che, una casella di controllo che consente all'utente di accesso in modalità automatica durante le successive visite, un collegamento per un promemoria della password e così via. Tutte le funzionalità di controllo di accesso sono personalizzabili mediante le proprietà del controllo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-178">Many other common features such as a link to register for people who have not yet done so, a checkbox that allows the user to automatically login on subsequent visits, a link for a password reminder, etc. All features of the Login control are customizable via the properties of the control.</span></span>

<span data-ttu-id="2f1b4-179">In ASP.NET 1.x, gli sviluppatori dovevano scrivere una notevole quantità di codice per eseguire una ricerca quando si usa l'autenticazione basata su form.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-179">In ASP.NET 1.x, developers had to write a fair amount of code to do a lookup when using Forms authentication.</span></span> <span data-ttu-id="2f1b4-180">Con l'appartenenza di ASP.NET 2.0, è possibile convalidare gli utenti senza scrivere alcun codice affatto.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-180">With ASP.NET 2.0 membership, you can validate users without writing any code at all.</span></span> <span data-ttu-id="2f1b4-181">ASP.NET eseguirà automaticamente la ricerca dell'utente per l'utente.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-181">ASP.NET will automatically do the look-up of the user for you.</span></span> <span data-ttu-id="2f1b4-182">(Se si usa il controllo di accesso senza l'utilizzo di appartenenza ASP.NET, è possibile usare la **OnAuthenticate** metodo per convalidare l'utente.)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-182">(If you are using the Login control without using ASP.NET membership, you can use the **OnAuthenticate** method to validate the user.)</span></span>

## <a name="loginview-control"></a><span data-ttu-id="2f1b4-183">Controllo LoginView</span><span class="sxs-lookup"><span data-stu-id="2f1b4-183">LoginView Control</span></span>

<span data-ttu-id="2f1b4-184">Il controllo LoginView è un controllo basato su modelli che sono disponibili due modelli per impostazione predefinita. il modello AnonymousTemplate e LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-184">The LoginView control is a templated control that provides two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="2f1b4-185">Il modello che viene visualizzato è determinato dal o meno l'utente è connesso al sistema di appartenenza.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-185">The template that is displayed is determined by whether or not the user is logged into your membership system.</span></span> <span data-ttu-id="2f1b4-186">Questo controllo è in genere usato per visualizzare un controllo di accesso quando un utente non ha ancora effettuato e un controllo LoginStatus e/o altri controlli di accesso quando l'utente ha effettuato l'accesso.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-186">This control is typically used to display a Login control when a user has not yet logged in and a LoginStatus control and/or other login controls when the user has logged in.</span></span> <span data-ttu-id="2f1b4-187">Se si usa la gestione dei ruoli in un'applicazione ASP.NET, il controllo LoginView può visualizzare un modello specifico in base ai ruoli degli utenti.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-187">If you are using role management in your ASP.NET application, the LoginView control can display a specific template based upon the users role.</span></span> <span data-ttu-id="2f1b4-188">(Più in ASP.NET gestione dei ruoli verrà trattata in un secondo momento.)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-188">(More on ASP.NET role management will be covered later.)</span></span>

## <a name="passwordrecovery-control"></a><span data-ttu-id="2f1b4-189">Controllo PassaggiwordRecovery</span><span class="sxs-lookup"><span data-stu-id="2f1b4-189">PasswordRecovery Control</span></span>

<span data-ttu-id="2f1b4-190">Il controllo PassaggiwordRecovery consente agli utenti di ricevere un messaggio di posta elettronica con la propria password corrente o reimpostare la propria password.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-190">The PasswordRecovery control allows users to receive an email with his or her current password or reset his or her password.</span></span> <span data-ttu-id="2f1b4-191">Come testo non crittografato e le password crittografate possono essere ripristinate e inviato tramite posta elettronica agli utenti.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-191">Clear text and encrypted passwords can be recovered and emailed to users.</span></span> <span data-ttu-id="2f1b4-192">Se viene eseguito l'hashing della password, non può essere recuperato.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-192">If the password is hashed, it cannot be recovered.</span></span> <span data-ttu-id="2f1b4-193">L'utente sarà invece necessario eseguire la reimpostazione della password.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-193">Instead the user will be required to perform a password reset.</span></span>

## <a name="loginstatus-control"></a><span data-ttu-id="2f1b4-194">Controllo LoginStatus</span><span class="sxs-lookup"><span data-stu-id="2f1b4-194">LoginStatus Control</span></span>

<span data-ttu-id="2f1b4-195">Il controllo LoginStatus consente di visualizzare un indicatore di accesso agli utenti che non sono connessi e un indicatore di disconnessione per gli utenti sono attualmente connessi.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-195">The LoginStatus control is used to display a login indicator to users who are not logged in and a logout indicator to users who are currently logged in.</span></span> <span data-ttu-id="2f1b4-196">La proprietà Request.IsAuthenticated viene utilizzata per determinare quali indicatori da visualizzare.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-196">The Request.IsAuthenticated property is used to determine which indicator to display.</span></span> <span data-ttu-id="2f1b4-197">L'indicatore visualizzato dal controllo LoginStatus può essere un testo (implementata tramite il **LoginText** e **LogoutText** delle proprietà) o immagini (implementata tramite il **LoginImageUrl**e **LogoutImageUrl** proprietà.)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-197">The indicator displayed by the LoginStatus control can be text (implemented via the **LoginText** and **LogoutText** properties) or images (implemented via the **LoginImageUrl** and **LogoutImageUrl** properties.)</span></span>

<span data-ttu-id="2f1b4-198">Quando si esegue la disconnessione tramite il controllo LoginStatus, egli viene reindirizzato all'URL specificato per il **LogoutPageUrl** proprietà.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-198">When a user logs out via the LoginStatus control, he or she is redirected to the URL specified by the **LogoutPageUrl** property.</span></span> <span data-ttu-id="2f1b4-199">Se tale proprietà non è impostata, viene aggiornata la pagina corrente.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-199">If that property is not set, the current page is refreshed.</span></span> <span data-ttu-id="2f1b4-200">Poiché il sito è probabilmente protetto dall'autenticazione basata su form, l'aggiornamento della pagina corrente reindirizzerà l'utente alla pagina di accesso per il sito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-200">Since the site is likely protected by Forms authentication, the refresh of the current page will redirect the user to the login page for the site.</span></span>

## <a name="loginname-control"></a><span data-ttu-id="2f1b4-201">Controllo LoginName</span><span class="sxs-lookup"><span data-stu-id="2f1b4-201">LoginName Control</span></span>

<span data-ttu-id="2f1b4-202">Il controllo LoginName Visualizza il nome utente dell'utente attualmente connesso al sito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-202">The LoginName control displays the username of the user currently logged into the site.</span></span>

## <a name="createuserwizard-control"></a><span data-ttu-id="2f1b4-203">Controllo CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="2f1b4-203">CreateUserWizard Control</span></span>

<span data-ttu-id="2f1b4-204">Il controllo CreateUserWizard offre agli utenti un modo pratico per registrarsi per il sistema di appartenenza.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-204">The CreateUserWizard control provides users with a convenient way to register for your membership system.</span></span> <span data-ttu-id="2f1b4-205">È possibile aggiungere passaggi (implementati come una raccolta di WizardStep) tramite l'interfaccia illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-205">You can add steps (implemented as a collection of WizardSteps) via the interface shown below.</span></span>

![](membership/_static/image5.jpg)

<span data-ttu-id="2f1b4-206">**Figura 5**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-206">**Figure 5**</span></span>

<span data-ttu-id="2f1b4-207">CreateUserWizard è un controllo basato su modelli che deriva dalla classe di procedura guidata e fornisce i modelli seguenti:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-207">The CreateUserWizard is a templated control that derives from the Wizard class and provides the following templates:</span></span>

- <span data-ttu-id="2f1b4-208">**Modello HeaderTemplate** questo modello consente di controllare l'aspetto dell'intestazione della procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-208">**HeaderTemplate** This template controls the appearance of the header of the wizard.</span></span>
- <span data-ttu-id="2f1b4-209">**SidebarTemplate** questo modello consente di controllare l'aspetto della barra laterale della procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-209">**SidebarTemplate** This template controls the appearance of the sidebar of the wizard.</span></span>
- <span data-ttu-id="2f1b4-210">**StartNavigationTemplate** controlli questo modello sono l'aspetto del riquadro di spostamento della procedura guidata in fase di avvio.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-210">**StartNavigationTemplate** This template controls the appearance of the navigation are of the wizard at the start step.</span></span>
- <span data-ttu-id="2f1b4-211">**StepNavigationTemplate** questo modello consente di controllare l'aspetto dell'area di navigazione quando non è nel passaggio di inizio o fine.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-211">**StepNavigationTemplate** This template controls the appearance of the navigation area when not in the start or finish step.</span></span>
- <span data-ttu-id="2f1b4-212">**FinishNavigationTemplate** questo modello consente di controllare l'aspetto del riquadro di spostamento quando nel passaggio finale.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-212">**FinishNavigationTemplate** This template controls the appearance of the navigation area when on the finish step.</span></span>

<span data-ttu-id="2f1b4-213">Inoltre, per ogni passaggio che aggiunta alla procedura guidata, ASP.NET creerà un modello personalizzato che contiene un elemento ContentTemplate sia un CustomNavigationTemplate per tale passaggio.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-213">Additionally, for each step that you add to the Wizard, ASP.NET will create a custom template that contains both a ContentTemplate and a CustomNavigationTemplate for that step.</span></span> <span data-ttu-id="2f1b4-214">Per informazioni dettagliate sulla personalizzazione CreateUserWizard, vedere la documentazione di VS.NET 2005:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-214">For full details on customizing the CreateUserWizard, see the VS.NET 2005 documentation:</span></span>

## <a name="changepassword-control"></a><span data-ttu-id="2f1b4-215">Controllo ChangePassword</span><span class="sxs-lookup"><span data-stu-id="2f1b4-215">ChangePassword Control</span></span>

<span data-ttu-id="2f1b4-216">Il controllo ChangePassword consente agli utenti di modificare la propria password.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-216">The ChangePassword control allows users to change his or her password.</span></span> <span data-ttu-id="2f1b4-217">Se la proprietà DisplayUserName è true (è false per impostazione predefinita), l'utente può modificare la password quando non si è connessi.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-217">If the DisplayUserName property is true (it is false by default), the user can change his or her password when they are not logged in.</span></span> <span data-ttu-id="2f1b4-218">Se l'utente *è* ancora effettuato l'accesso e la proprietà DisplayUserName è true, l'utente sarà in grado di modificare la password di un altro utente che non viene registrato nella fornitura di essi conosce l'ID utente dell'utente.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-218">If the user *is* already logged in and the DisplayUserName property is true, the user will be able to change the password of another user that is not logged in providing they know the user ID of that user.</span></span>

<span data-ttu-id="2f1b4-219">Tenere presente che se si desidera che gli utenti siano in grado di modificare le password senza dover effettuare l'accesso, è necessario assicurarsi che la pagina in cui viene visualizzato il controllo ChangePassword consenta l'accesso anonimo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-219">Keep in mind that if you want users to be able to change passwords without having to log in, you will need to ensure that the page on which the ChangePassword control is displayed allows anonymous access.</span></span> <span data-ttu-id="2f1b4-220">Ovviamente, gli utenti dovranno fornire la vecchia password per poter modificare la password.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-220">Obviously, users will have to provide their old password in order to change their password.</span></span>

## <a name="role-management"></a><span data-ttu-id="2f1b4-221">Gestione dei ruoli</span><span class="sxs-lookup"><span data-stu-id="2f1b4-221">Role Management</span></span>

<span data-ttu-id="2f1b4-222">Gestione dei ruoli consente di assegnare gli utenti a un ruolo specifico e quindi limitare l'accesso a determinati file o cartelle in base a tale ruolo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-222">Role management allows you to assign users to a particular role and then restrict access to certain file or folders based on that role.</span></span> <span data-ttu-id="2f1b4-223">Gestione dei ruoli fornisce anche un'API in modo da poter a livello di codice individuare ruolo apportate o determinare tutti gli utenti in un determinato ruolo e rispondere di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-223">Role management also provides an API so that you can programmatically determine someones role or determine all users in a particular role and respond accordingly.</span></span>

<span data-ttu-id="2f1b4-224">Gestione dei ruoli non è un requisito di appartenenza ASP.NET, né è un requisito per poter utilizzare la gestione dei ruoli di appartenenza.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-224">Role management is not a requirement in ASP.NET membership, nor is membership a requirement in order to use role management.</span></span> <span data-ttu-id="2f1b4-225">Tuttavia, due integrano tra loro senza problemi ed è probabile che gli sviluppatori verranno usati in combinazione tra loro.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-225">However, the two supplement each other nicely and it is likely that developers will use them in conjunction with each other.</span></span>

<span data-ttu-id="2f1b4-226">Per abilitare la gestione dei ruoli all'interno dell'applicazione, apportare la modifica seguente nel file Web. config:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-226">To enable role management in your application, make the following change in your web.config file:</span></span>

[!code-xml[Main](membership/samples/sample2.xml)]

<span data-ttu-id="2f1b4-227">Quando la **cacheRolesInCookie** attributo è impostato su true, memorizzazione nella cache ASP.NET un'appartenenza a ruoli utenti in un cookie sul client.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-227">When the **cacheRolesInCookie** attribute is set to true, ASP.NET caches a users role membership in a cookie on the client.</span></span> <span data-ttu-id="2f1b4-228">In questo modo le ricerche di ruolo essere eseguita senza le chiamate a RoleProvider.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-228">This allows role lookups to occur without calls into the RoleProvider.</span></span> <span data-ttu-id="2f1b4-229">Quando si usa questo attributo, gli sviluppatori sono invitati a verificare che il **cookieProtection** attributo è impostato su tutte.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-229">When using this attribute, developers are encouraged to ensure that the **cookieProtection** attribute is set to All.</span></span> <span data-ttu-id="2f1b4-230">(Questo è l'impostazione predefinita). Ciò garantisce che i dati del cookie vengono crittografati e consente di garantire che il contenuto dei cookie non è stato alterato.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-230">(This is the default setting.) This ensures that the cookie data are encrypted and helps to ensure that the cookies contents haven't been altered.</span></span> <span data-ttu-id="2f1b4-231">È possibile aggiungere i ruoli usando lo strumento Amministrazione sito Web.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-231">Roles can be added using the Web Site Administration Tool.</span></span> <span data-ttu-id="2f1b4-232">Consente di definire i ruoli, configurare l'accesso alle parti del sito in base ai ruoli e assegnare utenti ai ruoli.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-232">It allows you to easily define roles, configure access to parts of the site based on those roles, and assign users to roles.</span></span>

![](membership/_static/image6.jpg)

<span data-ttu-id="2f1b4-233">**Figura 6**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-233">**Figure 6**</span></span>

<span data-ttu-id="2f1b4-234">Come illustrato in precedenza, è sufficiente immettere il nome del ruolo e quindi facendo clic su Aggiungi ruolo è possibile aggiungere nuovi ruoli.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-234">As shown above, new roles can be added by simply entering the name of the role and then clicking Add Role.</span></span> <span data-ttu-id="2f1b4-235">Ruoli esistenti possono essere gestiti o eliminati facendo clic sul collegamento appropriato nell'elenco dei ruoli esistenti.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-235">Existing roles can be managed or deleted by clicking the appropriate link in the list of existing roles.</span></span>

<span data-ttu-id="2f1b4-236">Quando si gestisce un ruolo, è possibile aggiungere o rimuovere gli utenti, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-236">When you manage a role, you can add or remove users as shown below.</span></span>

![](membership/_static/image7.jpg)

<span data-ttu-id="2f1b4-237">**Figura 7**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-237">**Figure 7**</span></span>

<span data-ttu-id="2f1b4-238">Selezionando la casella di controllo è nel ruolo utente, è possibile aggiungere facilmente un utente a un ruolo specifico.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-238">By checking the User Is In Role checkbox, you can easily add a user to a specific role.</span></span> <span data-ttu-id="2f1b4-239">ASP.NET aggiornerà automaticamente il database di appartenenza con le voci appropriate.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-239">ASP.NET will automatically update your membership database with the appropriate entries.</span></span> <span data-ttu-id="2f1b4-240">È anche possibile configurare le regole di accesso per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-240">You will also want to configure access rules for your application.</span></span> <span data-ttu-id="2f1b4-241">ASP.NET 1.x sviluppatori ha familiarità con questa operazione tramite il &lt;autorizzazione&gt; elemento nel file Web. config e che l'opzione è ancora disponibile in ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-241">ASP.NET 1.x developers are familiar with doing this via the &lt;authorization&gt; element in the web.config file, and that option is still available in ASP.NET 2.0.</span></span> <span data-ttu-id="2f1b4-242">Tuttavia, più semplice gestire l'accesso delle regole utilizzando la strumento Amministrazione sito Web come mostrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-242">However, its easier to manage access rules using the Web Site Administration Tool as shown below.</span></span>

![](membership/_static/image8.jpg)

<span data-ttu-id="2f1b4-243">**Figura 8**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-243">**Figure 8**</span></span>

<span data-ttu-id="2f1b4-244">In questo caso, viene evidenziata la cartella di amministrazione (difficile vedere perché lo strumento viene evidenziato in grigio chiaro) e il ruolo di amministratore è stato concesso l'accesso.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-244">In this case, the Administration folder is highlighted (its difficult to see because the tool highlights it in light gray) and the Administrators role has been granted access.</span></span> <span data-ttu-id="2f1b4-245">Vengono negati tutti gli altri utenti.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-245">All other users are denied.</span></span> <span data-ttu-id="2f1b4-246">È possibile fare clic sull'icona di head per selezionare una regola e quindi usare i pulsanti Sposta su e Sposta giù per organizzare le regole.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-246">You can click on the head icon to select a rule and then use the Move Up and Move Down buttons to arrange the rules.</span></span> <span data-ttu-id="2f1b4-247">Come con ASP.NET &lt;autorizzazione&gt; elemento, le regole vengono elaborate nell'ordine in cui vengono visualizzati.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-247">As with the ASP.NET &lt;authorization&gt; element, rules are processed in the order in which they appear.</span></span> <span data-ttu-id="2f1b4-248">In altre parole, se l'ordine delle regole della ripresa precedente sono stata annullata, nessuno avrebbe accesso alla cartella Administration perché la prima regola che ASP.NET incontrerebbe sarebbe la regola che neghi a tutti gli utenti della cartella.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-248">In other words, if the order of rules in the shot above were reversed, no one would have access to the Administration folder because the first rule that ASP.NET would encounter would be the rule that denies everyone to the folder.</span></span>

<span data-ttu-id="2f1b4-249">ASP.NET 2.0 aggiunge un file Web. config nella cartella per cui si specifica una regola di accesso.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-249">ASP.NET 2.0 adds a web.config file to the folder for which you are specifying an access rule.</span></span> <span data-ttu-id="2f1b4-250">Le regole di accesso possono essere modificate tramite il file di configurazione o tramite lo strumento Amministrazione sito Web.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-250">Access rules can be edited via the configuration file or via the Web Site Administration Tool.</span></span> <span data-ttu-id="2f1b4-251">In altre parole, lo strumento Amministrazione sito Web è semplicemente un'interfaccia attraverso cui il file di configurazione può essere modificato in un ambiente intuitivo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-251">In other words, the Web Site Administration Tool is simply an interface through which the configuration file can be edited in a user-friendly environment.</span></span>

## <a name="using-roles-in-code"></a><span data-ttu-id="2f1b4-252">Utilizzo dei ruoli nel codice</span><span class="sxs-lookup"><span data-stu-id="2f1b4-252">Using Roles in Code</span></span>

<span data-ttu-id="2f1b4-253">L'API per la gestione dei ruoli non è stato modificato dopo la versione 1.x.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-253">The API for role management has not changed since version 1.x.</span></span> <span data-ttu-id="2f1b4-254">Il **IsInRole** metodo viene utilizzato per determinare se un utente è incluso un particolare ruolo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-254">The **IsInRole** method is used to determine if a user is in a particular role.</span></span>

[!code-csharp[Main](membership/samples/sample3.cs)]

<span data-ttu-id="2f1b4-255">ASP.NET crea anche un'istanza RolePrincipal come membro del contesto corrente.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-255">ASP.NET also creates a RolePrincipal instance as a member of the current context.</span></span> <span data-ttu-id="2f1b4-256">L'oggetto RolePrincipal può essere utilizzato per ottenere tutti i ruoli a cui l'utente appartiene come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-256">The RolePrincipal object can be used to obtain all of the roles to which the user belongs as follows:</span></span>

[!code-csharp[Main](membership/samples/sample4.cs)]

## <a name="using-rolegroups-with-the-loginview-control"></a><span data-ttu-id="2f1b4-257">Utilizzo RoleGroup con il controllo LoginView</span><span class="sxs-lookup"><span data-stu-id="2f1b4-257">Using RoleGroups with the LoginView Control</span></span>

<span data-ttu-id="2f1b4-258">Ora che avete la comprensione della gestione dei ruoli e appartenenza, consente di illustrare brevemente come il controllo LoginView sfrutta i vantaggi di questa funzionalità in ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-258">Now that you have an understanding of role management and membership, lets discuss briefly how the LoginView control takes advantage of this capability in ASP.NET 2.0.</span></span> <span data-ttu-id="2f1b4-259">Come indicato in precedenza, il controllo LoginView è un controllo basato su modelli che contiene due modelli per impostazione predefinita. il modello AnonymousTemplate e LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-259">As previously discussed, the LoginView control is a templated control that contains two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="2f1b4-260">All'interno di LoginView attività di finestra di dialogo è un collegamento (mostrato sotto) che consente di eseguire upravit kolekci RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-260">Within the LoginView Tasks dialog is a link (shown below) that allows you to edit RoleGroups.</span></span>

![](membership/_static/image9.jpg)

<span data-ttu-id="2f1b4-261">**Figura 9**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-261">**Figure 9**</span></span>

<span data-ttu-id="2f1b4-262">Ogni oggetto RoleGroup contiene una matrice di stringhe che definisce i ruoli che RoleGroup si applica a.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-262">Each RoleGroup object contains an array of strings that defines which roles that RoleGroup applies to.</span></span> <span data-ttu-id="2f1b4-263">Per aggiungere un nuovo RoleGroup per il controllo LoginView, fare clic sul collegamento di modifica RoleGroup.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-263">To add a new RoleGroup to the LoginView control, click the Edit RoleGroups link.</span></span> <span data-ttu-id="2f1b4-264">Nell'immagine precedente, si noterà che è stato aggiunto un nuovo RoleGroup per gli amministratori.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-264">In the image above, you can see that I have added a new RoleGroup for Administrators.</span></span> <span data-ttu-id="2f1b4-265">Selezionando tale RoleGroup (RoleGroup[0]) dall'elenco a discesa di visualizzazioni, è possibile configurare un modello che verrà visualizzato solo ai membri del ruolo amministratori di.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-265">By selecting that RoleGroup (RoleGroup[0]) from the Views dropdown, I can configure a template that will only be displayed to members of the Administrators role.</span></span> <span data-ttu-id="2f1b4-266">Nell'immagine seguente, è stato aggiunto un nuovo RoleGroup che si applica ai membri del ruolo relativo alle vendite e il ruolo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-266">In the image below, I have added a new RoleGroup that applies to members of the Sales role and the Distribution role.</span></span> <span data-ttu-id="2f1b4-267">Questo modo viene aggiunta un secondario RoleGroup l'elenco a discesa di viste nella finestra di dialogo Attività LoginView e qualsiasi elemento aggiunto a tale modello sarà visibile per tutti gli utenti di vendita o di distribuzione ruolo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-267">This adds a second RoleGroup to the Views dropdown in the LoginView Tasks dialog and anything added to that template will be visible by any user in either the Sales or Distribution role.</span></span>

![](membership/_static/image10.jpg)

<span data-ttu-id="2f1b4-268">**Figura 10**</span><span class="sxs-lookup"><span data-stu-id="2f1b4-268">**Figure 10**</span></span>

## <a name="overriding-the-existing-membership-provider"></a><span data-ttu-id="2f1b4-269">Si esegue l'override del Provider di appartenenza esistente</span><span class="sxs-lookup"><span data-stu-id="2f1b4-269">Overriding the Existing Membership Provider</span></span>

<span data-ttu-id="2f1b4-270">Esistono un paio di modi che è possibile estendere le funzionalità di appartenenza ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-270">There are a couple of ways that you can extend the functionality of ASP.NET membership.</span></span> <span data-ttu-id="2f1b4-271">Prima di tutto, è ovviamente possibile modificare la funzionalità esistente della classe SqlMembershipProvider ereditino da esso ed eseguendo l'override di metodi.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-271">First of all, you can obviously change the existing functionality of the SqlMembershipProvider class by inheriting from it and overriding its methods.</span></span> <span data-ttu-id="2f1b4-272">Ad esempio, se si desidera implementare la propria funzionalità quando gli utenti vengono creati, è possibile creare la propria classe che eredita da SqlMembershipProvider come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-272">For example, if you want to implement your own functionality when users are created, you can create your own class that inherits from SqlMembershipProvider as follows:</span></span>

[!code-csharp[Main](membership/samples/sample5.cs)]

<span data-ttu-id="2f1b4-273">Se, d'altra parte, si desidera creare un proprio provider (per archiviare le informazioni di appartenenza in un database di Access, ad esempio), è possibile creare un provider personalizzato.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-273">If, on the other hand, you want to create your own provider (to store your membership information in an Access database, for example), you can create your own provider.</span></span>

## <a name="creating-your-own-membership-provider"></a><span data-ttu-id="2f1b4-274">Creazione di un proprio Provider di appartenenza</span><span class="sxs-lookup"><span data-stu-id="2f1b4-274">Creating Your Own Membership Provider</span></span>

<span data-ttu-id="2f1b4-275">Per creare il proprio provider di appartenenze, è necessario innanzitutto creare una classe che eredita dalla classe MembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-275">To create your own membership provider, you will first need to create a class that inherits from the MembershipProvider class.</span></span> <span data-ttu-id="2f1b4-276">Se si usa Visual Basic.NET, Visual Studio 2005 aggiungerà gli stub per tutti i metodi che è necessario eseguire l'override.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-276">If you are using VB.NET, Visual Studio 2005 will add the stubs for all of the methods that you need to override.</span></span> <span data-ttu-id="2f1b4-277">Se si usa c#, dipende dalle nostre scelte è quindi necessario aggiungere gli stub.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-277">If you are using C#, its up to you to add the stubs.</span></span>

<span data-ttu-id="2f1b4-278">È necessario eseguire l'override di seguito:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-278">You will need to override the following:</span></span>

- <span data-ttu-id="2f1b4-279">Proprietà ApplicationName</span><span class="sxs-lookup"><span data-stu-id="2f1b4-279">ApplicationName property</span></span>
- <span data-ttu-id="2f1b4-280">ChangePassword (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-280">ChangePassword function</span></span>
- <span data-ttu-id="2f1b4-281">ChangePasswordQuestionAndAnswer function</span><span class="sxs-lookup"><span data-stu-id="2f1b4-281">ChangePasswordQuestionAndAnswer function</span></span>
- <span data-ttu-id="2f1b4-282">CreateUser (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-282">CreateUser function</span></span>
- <span data-ttu-id="2f1b4-283">DeleteUser (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-283">DeleteUser function</span></span>
- <span data-ttu-id="2f1b4-284">Proprietà EnablePasswordReset</span><span class="sxs-lookup"><span data-stu-id="2f1b4-284">EnablePasswordReset property</span></span>
- <span data-ttu-id="2f1b4-285">Proprietà EnablePasswordRetrieval</span><span class="sxs-lookup"><span data-stu-id="2f1b4-285">EnablePasswordRetrieval property</span></span>
- <span data-ttu-id="2f1b4-286">FindUsersByEmail (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-286">FindUsersByEmail function</span></span>
- <span data-ttu-id="2f1b4-287">FindUsersByName (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-287">FindUsersByName function</span></span>
- <span data-ttu-id="2f1b4-288">GetAllUsers (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-288">GetAllUsers function</span></span>
- <span data-ttu-id="2f1b4-289">GetNumberOfUsersOnline (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-289">GetNumberOfUsersOnline function</span></span>
- <span data-ttu-id="2f1b4-290">GetPassword (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-290">GetPassword function</span></span>
- <span data-ttu-id="2f1b4-291">GetUser (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-291">GetUser function</span></span>
- <span data-ttu-id="2f1b4-292">GetUserNameByEmail (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-292">GetUserNameByEmail function</span></span>
- <span data-ttu-id="2f1b4-293">Proprietà MaxInvalidPasswordAttempts</span><span class="sxs-lookup"><span data-stu-id="2f1b4-293">MaxInvalidPasswordAttempts property</span></span>
- <span data-ttu-id="2f1b4-294">Proprietà MinRequiredNonAlphanumericCharacters</span><span class="sxs-lookup"><span data-stu-id="2f1b4-294">MinRequiredNonAlphanumericCharacters property</span></span>
- <span data-ttu-id="2f1b4-295">Proprietà MinRequiredPasswordLength</span><span class="sxs-lookup"><span data-stu-id="2f1b4-295">MinRequiredPasswordLength property</span></span>
- <span data-ttu-id="2f1b4-296">Proprietà PasswordAttemptWindow</span><span class="sxs-lookup"><span data-stu-id="2f1b4-296">PasswordAttemptWindow property</span></span>
- <span data-ttu-id="2f1b4-297">Proprietà PasswordFormat</span><span class="sxs-lookup"><span data-stu-id="2f1b4-297">PasswordFormat property</span></span>
- <span data-ttu-id="2f1b4-298">Proprietà PasswordStrengthRegularExpression</span><span class="sxs-lookup"><span data-stu-id="2f1b4-298">PasswordStrengthRegularExpression property</span></span>
- <span data-ttu-id="2f1b4-299">Proprietà RequiresQuestionAndAnswer</span><span class="sxs-lookup"><span data-stu-id="2f1b4-299">RequiresQuestionAndAnswer property</span></span>
- <span data-ttu-id="2f1b4-300">Proprietà RequiresUniqueEmail</span><span class="sxs-lookup"><span data-stu-id="2f1b4-300">RequiresUniqueEmail property</span></span>
- <span data-ttu-id="2f1b4-301">ResetPassword (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-301">ResetPassword function</span></span>
- <span data-ttu-id="2f1b4-302">Unlock (funzione) utente</span><span class="sxs-lookup"><span data-stu-id="2f1b4-302">Unlock user function</span></span>
- <span data-ttu-id="2f1b4-303">UpdateUser (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-303">UpdateUser function</span></span>
- <span data-ttu-id="2f1b4-304">ValidateUser (funzione)</span><span class="sxs-lookup"><span data-stu-id="2f1b4-304">ValidateUser function</span></span>

<span data-ttu-id="2f1b4-305">Memorizzate piuttosto un elenco per implementare gli sviluppatori c#.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-305">Thats quite a list to implement as a C# developer.</span></span> <span data-ttu-id="2f1b4-306">Può risultare più semplice creare la classe in Visual Basic.NET senza alcuna implementazione e quindi usare .NET Reflector o uno strumento simile per Converti il codice c#.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-306">You may find it easier to create the class in VB.NET without any implementation and then use .NET Reflector or a similar tool to convert the code to C#.</span></span>

<span data-ttu-id="2f1b4-307">La stringa di connessione e altre proprietà devono essere impostati sui valori predefiniti nel metodo Initialize.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-307">The connection string and other properties should be set to their defaults in the Initialize method.</span></span> <span data-ttu-id="2f1b4-308">(Il metodo Initialize viene generato quando il provider viene caricato in fase di esecuzione). Il secondo parametro per il metodo Initialize JE typu NameValueCollection ed è un riferimento per la &lt;aggiungere&gt; elemento associato con il provider personalizzato nel file Web. config.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-308">(The Initialize method is fired when the provider is loaded at runtime.) The second parameter to the Initialize method is of type System.Collections.Specialized.NameValueCollection and is a reference to the &lt;add&gt; element that is associated with your custom provider in the web.config file.</span></span> <span data-ttu-id="2f1b4-309">Tale voce è simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="2f1b4-309">That entry looks like the following:</span></span>

[!code-xml[Main](membership/samples/sample6.xml)]

<span data-ttu-id="2f1b4-310">Di seguito è riportato un esempio del metodo Initialize.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-310">Here is an example of the Initialize method.</span></span>

[!code-csharp[Main](membership/samples/sample7.cs)]

<span data-ttu-id="2f1b4-311">Per convalidare l'utente durante l'invio di form di accesso, è necessario usare il metodo ValidateUser.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-311">In order to validate the user when they submit your login form, you will need to use the ValidateUser method.</span></span> <span data-ttu-id="2f1b4-312">Questo metodo viene attivata quando l'utente fa clic sul pulsante di accesso nel controllo di accesso.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-312">This method fires when the user clicks the login button in the Login control.</span></span> <span data-ttu-id="2f1b4-313">Si inserirà il codice che effettua la ricerca dell'utente in questo metodo.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-313">You will place your code that does the user lookup in this method.</span></span>

<span data-ttu-id="2f1b4-314">Come può notare, scrivere il proprio provider di appartenenze non è difficile e permette di estendere questa potente funzionalità di ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="2f1b4-314">As you can see, writing your own membership provider is not difficult and allows you to extend this powerful functionality of ASP.NET 2.0.</span></span>
