---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
title: "Distribuzione di un'applicazione Web ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: distribuzione in IIS come ambiente di test-5 di 12 | Microsoft Docs"
author: tdykstra
description: Questa serie di esercitazioni illustra come distribuire (pubblicare) un progetto di applicazione Web ASP.NET che include un database di SQL Server Compact usando Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: 493b2a66-816c-485c-8315-952ed1085ccc
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
msc.type: authoredcontent
ms.openlocfilehash: 5d85232ff2cb229d771d517db7173721c9e277bf
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78635128"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-iis-as-a-test-environment---5-of-12"></a><span data-ttu-id="96e68-103">Distribuzione di un'applicazione Web ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: distribuzione in IIS come ambiente di test-5 di 12</span><span class="sxs-lookup"><span data-stu-id="96e68-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to IIS as a Test Environment - 5 of 12</span></span>

<span data-ttu-id="96e68-104">di [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="96e68-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="96e68-105">Scarica progetto Starter</span><span class="sxs-lookup"><span data-stu-id="96e68-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="96e68-106">Questa serie di esercitazioni illustra come distribuire (pubblicare) un progetto di applicazione Web ASP.NET che include un database di SQL Server Compact usando Visual Studio 2012 RC o Visual Studio Express 2012 RC per il Web.</span><span class="sxs-lookup"><span data-stu-id="96e68-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="96e68-107">È anche possibile usare Visual Studio 2010 se si installa l'aggiornamento pubblicazione sul Web.</span><span class="sxs-lookup"><span data-stu-id="96e68-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="96e68-108">Per un'introduzione alla serie, vedere [la prima esercitazione della serie](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="96e68-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="96e68-109">Per un'esercitazione in cui vengono illustrate le funzionalità di distribuzione introdotte dopo la versione RC di Visual Studio 2012, viene illustrato come distribuire SQL Server edizioni diverse da SQL Server Compact e viene illustrato come eseguire la distribuzione in app Azure app Web del servizio, vedere [distribuzione web ASP.NET con Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="96e68-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="96e68-110">Panoramica</span><span class="sxs-lookup"><span data-stu-id="96e68-110">Overview</span></span>

<span data-ttu-id="96e68-111">Questa esercitazione illustra come distribuire un'applicazione Web ASP.NET in IIS nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="96e68-111">This tutorial shows how to deploy an ASP.NET web application to IIS on the local computer.</span></span>

<span data-ttu-id="96e68-112">Quando si sviluppa un'applicazione, in genere si esegue il test eseguendola in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="96e68-112">When you develop an application, you generally test by running it in Visual Studio.</span></span> <span data-ttu-id="96e68-113">Per impostazione predefinita, questo significa che si sta usando il Server di sviluppo Visual Studio (noto anche come Cassini).</span><span class="sxs-lookup"><span data-stu-id="96e68-113">By default, this means you're using the Visual Studio Development Server (also known as Cassini).</span></span> <span data-ttu-id="96e68-114">Il Server di sviluppo Visual Studio consente di eseguire facilmente test durante lo sviluppo in Visual Studio, ma non funziona esattamente come IIS.</span><span class="sxs-lookup"><span data-stu-id="96e68-114">The Visual Studio Development Server makes it easy to test during development in Visual Studio, but it doesn't work exactly like IIS.</span></span> <span data-ttu-id="96e68-115">Di conseguenza, è possibile che un'applicazione venga eseguita correttamente quando si esegue il test in Visual Studio, ma non riesce quando viene distribuita in IIS in un ambiente host.</span><span class="sxs-lookup"><span data-stu-id="96e68-115">As a result, it's possible that an application will run correctly when you test it in Visual Studio, but fail when it's deployed to IIS in a hosting environment.</span></span>

<span data-ttu-id="96e68-116">È possibile testare l'applicazione in modo più affidabile nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="96e68-116">You can test your application more reliably in these ways:</span></span>

1. <span data-ttu-id="96e68-117">Usare IIS Express o IIS completo invece del Server di sviluppo Visual Studio quando si esegue il test in Visual Studio durante lo sviluppo.</span><span class="sxs-lookup"><span data-stu-id="96e68-117">Use IIS Express or full IIS instead of the Visual Studio Development Server when you test in Visual Studio during development.</span></span> <span data-ttu-id="96e68-118">Questo metodo in genere emula più accuratamente il modo in cui il sito verrà eseguito in IIS.</span><span class="sxs-lookup"><span data-stu-id="96e68-118">This method generally emulates more accurately how your site will run under IIS.</span></span> <span data-ttu-id="96e68-119">Tuttavia, questo metodo non verifica il processo di distribuzione o verifica che il risultato del processo di distribuzione venga eseguito correttamente.</span><span class="sxs-lookup"><span data-stu-id="96e68-119">However, this method does not test your deployment process or validate that the result of the deployment process will run correctly.</span></span>
2. <span data-ttu-id="96e68-120">Distribuire l'applicazione in IIS nel computer di sviluppo usando lo stesso processo che verrà usato in un secondo momento per distribuirlo nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="96e68-120">Deploy the application to IIS on your development computer by using the same process that you'll use later to deploy it to your production environment.</span></span> <span data-ttu-id="96e68-121">Questo metodo consente di convalidare il processo di distribuzione, oltre a convalidare che l'applicazione verrà eseguita correttamente in IIS.</span><span class="sxs-lookup"><span data-stu-id="96e68-121">This method validates your deployment process in addition to validating that your application will run correctly under IIS.</span></span>
3. <span data-ttu-id="96e68-122">Distribuire l'applicazione in un ambiente di test più vicino possibile all'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="96e68-122">Deploy the application to a test environment that is as close as possible to your production environment.</span></span> <span data-ttu-id="96e68-123">Poiché l'ambiente di produzione per queste esercitazioni è un provider di hosting di terze parti, l'ambiente di test ideale sarebbe un secondo account con il provider di hosting.</span><span class="sxs-lookup"><span data-stu-id="96e68-123">Since the production environment for these tutorials is a third-party hosting provider, the ideal test environment would be a second account with the hosting provider.</span></span> <span data-ttu-id="96e68-124">Il secondo account verrà usato solo per i test, ma verrà configurato esattamente come l'account di produzione.</span><span class="sxs-lookup"><span data-stu-id="96e68-124">You would use this second account only for testing, but it would be set up the same way as the production account.</span></span>

<span data-ttu-id="96e68-125">Questa esercitazione illustra i passaggi per l'opzione 2.</span><span class="sxs-lookup"><span data-stu-id="96e68-125">This tutorial shows the steps for option 2.</span></span> <span data-ttu-id="96e68-126">Il materiale sussidiario per l'opzione 3 è disponibile alla fine dell'esercitazione [distribuzione nell'ambiente di produzione](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) . al termine di questa esercitazione sono disponibili collegamenti alle risorse per l'opzione 1.</span><span class="sxs-lookup"><span data-stu-id="96e68-126">Guidance for option 3 is provided at the end of the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, and at the end of this tutorial there are links to resources for option 1.</span></span>

<span data-ttu-id="96e68-127">Promemoria: se si riceve un messaggio di errore o un elemento non funziona durante l'esercitazione, assicurarsi di controllare la pagina relativa alla [risoluzione dei problemi](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="96e68-127">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="configuring-the-application-to-run-in-medium-trust"></a><span data-ttu-id="96e68-128">Configurazione dell'applicazione per l'esecuzione con attendibilità media</span><span class="sxs-lookup"><span data-stu-id="96e68-128">Configuring the Application to Run in Medium Trust</span></span>

<span data-ttu-id="96e68-129">Prima di installare IIS e la relativa distribuzione, è necessario modificare l'impostazione di un file Web. config per fare in modo che il sito venga eseguito in modo analogo a quello in un tipico ambiente di hosting condiviso.</span><span class="sxs-lookup"><span data-stu-id="96e68-129">Before installing IIS and deploying to it, you'll change a Web.config file setting in order to make the site run more like it will in a typical shared hosting environment.</span></span>

<span data-ttu-id="96e68-130">I provider di hosting in genere eseguono il sito Web in *attendibilità media*, il che significa che alcune operazioni non sono consentite.</span><span class="sxs-lookup"><span data-stu-id="96e68-130">Hosting providers typically run your web site in *medium trust*, which means there are some things it is not allowed to do.</span></span> <span data-ttu-id="96e68-131">Ad esempio, il codice dell'applicazione non riesce ad accedere al registro di sistema di Windows e non è in grado di leggere o scrivere file esterni alla gerarchia di cartelle dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="96e68-131">For example, application code can't access the Windows registry and can't read or write files that are outside of your application's folder hierarchy.</span></span> <span data-ttu-id="96e68-132">Per impostazione predefinita, l'applicazione viene eseguita con *attendibilità elevata* nel computer locale, il che significa che l'applicazione potrebbe essere in grado di eseguire operazioni che potrebbero avere esito negativo quando viene distribuita nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="96e68-132">By default your application runs in *high trust* on your local computer, which means that the application might be able to do things that would fail when you deploy it to production.</span></span> <span data-ttu-id="96e68-133">Pertanto, per fare in modo che l'ambiente di test rispecchi in modo più accurato l'ambiente di produzione, l'applicazione verrà configurata per l'esecuzione in attendibilità media.</span><span class="sxs-lookup"><span data-stu-id="96e68-133">Therefore, to make the test environment more accurately reflect the production environment, you'll configure the application to run in medium trust.</span></span>

<span data-ttu-id="96e68-134">Nel file Web. config dell'applicazione aggiungere un elemento **trust** nell'elemento **System. Web** , come illustrato in questo esempio.</span><span class="sxs-lookup"><span data-stu-id="96e68-134">In the application Web.config file, add a **trust** element in the **system.web** element, as shown in this example.</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample1.xml?highlight=4)]

<span data-ttu-id="96e68-135">L'applicazione verrà ora eseguita in attendibilità media in IIS anche nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="96e68-135">The application will now run in medium trust in IIS even on your local computer.</span></span> <span data-ttu-id="96e68-136">Questa impostazione consente di rilevare il prima possibile qualsiasi tentativo da codice dell'applicazione di eseguire operazioni che potrebbero avere esito negativo in produzione.</span><span class="sxs-lookup"><span data-stu-id="96e68-136">This setting enables you to catch as early as possible any attempts by application code to do something that would fail in production.</span></span>

> [!NOTE]
> <span data-ttu-id="96e68-137">Se si usa Migrazioni Code First di Entity Framework, assicurarsi che sia installata la versione 5,0 o successiva.</span><span class="sxs-lookup"><span data-stu-id="96e68-137">If you are using Entity Framework Code First Migrations, make sure that you have version 5.0 or later installed.</span></span> <span data-ttu-id="96e68-138">In Entity Framework versione 4,3, le migrazioni richiedono l'attendibilità totale per aggiornare lo schema del database.</span><span class="sxs-lookup"><span data-stu-id="96e68-138">In Entity Framework version 4.3, Migrations requires full trust in order to update the database schema.</span></span>

## <a name="installing-iis-and-web-deploy"></a><span data-ttu-id="96e68-139">Installazione di IIS e Distribuzione Web</span><span class="sxs-lookup"><span data-stu-id="96e68-139">Installing IIS and Web Deploy</span></span>

<span data-ttu-id="96e68-140">Per eseguire la distribuzione in IIS nel computer di sviluppo, è necessario che siano installati IIS e Distribuzione Web.</span><span class="sxs-lookup"><span data-stu-id="96e68-140">To deploy to IIS on your development computer, you must have IIS and Web Deploy installed.</span></span> <span data-ttu-id="96e68-141">Questi non sono inclusi nella configurazione predefinita di Windows 7.</span><span class="sxs-lookup"><span data-stu-id="96e68-141">These are not included in the default Windows 7 configuration.</span></span> <span data-ttu-id="96e68-142">Se sono già stati installati sia IIS che Distribuzione Web, passare alla sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="96e68-142">If you have already installed both IIS and Web Deploy, skip to the next section.</span></span>

<span data-ttu-id="96e68-143">L'installazione [guidata piattaforma Web](https://www.microsoft.com/web/downloads/platform.aspx) è il modo migliore per installare iis e distribuzione Web, poiché l'installazione guidata piattaforma Web installa una configurazione consigliata per IIS e installa automaticamente i prerequisiti per iis e distribuzione Web se necessario.</span><span class="sxs-lookup"><span data-stu-id="96e68-143">Using the [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) is the preferred way to install IIS and Web Deploy, because the Web Platform Installer installs a recommended configuration for IIS and it automatically installs the prerequisites for IIS and Web Deploy if necessary.</span></span>

<span data-ttu-id="96e68-144">Per eseguire l'installazione guidata piattaforma Web per installare IIS e Distribuzione Web, utilizzare il collegamento seguente.</span><span class="sxs-lookup"><span data-stu-id="96e68-144">To run Web Platform Installer to install IIS and Web Deploy, use the following link.</span></span> <span data-ttu-id="96e68-145">Se IIS è già installato, Distribuzione Web o uno dei componenti necessari, l'installazione guidata piattaforma Web installa solo le informazioni mancanti.</span><span class="sxs-lookup"><span data-stu-id="96e68-145">If you already have installed IIS, Web Deploy or any of their required components, the Web Platform Installer installs only what is missing.</span></span>

- [<span data-ttu-id="96e68-146">Installare IIS e Distribuzione Web usando WebPI</span><span class="sxs-lookup"><span data-stu-id="96e68-146">Install IIS and Web Deploy using WebPI</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=IIS7;ASPNET;NETFramework4;WDeploy)

## <a name="setting-the-default-application-pool-to-net-4"></a><span data-ttu-id="96e68-147">Impostazione del pool di applicazioni predefinito su .NET 4</span><span class="sxs-lookup"><span data-stu-id="96e68-147">Setting the Default Application Pool to .NET 4</span></span>

<span data-ttu-id="96e68-148">Dopo l'installazione di IIS, eseguire **Gestione IIS** per assicurarsi che il .NET Framework versione 4 venga assegnato al pool di applicazioni predefinito.</span><span class="sxs-lookup"><span data-stu-id="96e68-148">After installing IIS, run **IIS Manager** to make sure that the .NET Framework version 4 is assigned to the default application pool.</span></span>

<span data-ttu-id="96e68-149">Dal menu **Start** di Windows selezionare **Esegui**, immettere "inetmgr", quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="96e68-149">From the Windows **Start** menu, select **Run**, enter "inetmgr", and then click **OK**.</span></span> <span data-ttu-id="96e68-150">Se il comando **Run** non è presente nel menu **Start** , è possibile premere il tasto Windows e R per aprirlo.</span><span class="sxs-lookup"><span data-stu-id="96e68-150">(If the **Run** command is not in your **Start** menu, you can press the Windows Key and R to open it.</span></span> <span data-ttu-id="96e68-151">In alternativa, fare clic con il pulsante destro del mouse sulla barra delle applicazioni, scegliere **Proprietà**, selezionare la scheda **menu Start** , fare clic su **Personalizza**e selezionare **Esegui comando**.</span><span class="sxs-lookup"><span data-stu-id="96e68-151">Or right-click the taskbar, click **Properties**, select the **Start Menu** tab, click **Customize**, and select **Run command**.)</span></span>

<span data-ttu-id="96e68-152">Nel riquadro **connessioni** espandere il nodo del server e selezionare **pool di applicazioni**.</span><span class="sxs-lookup"><span data-stu-id="96e68-152">In the **Connections** pane, expand the server node and select **Application Pools**.</span></span> <span data-ttu-id="96e68-153">Nel riquadro **pool di applicazioni** , se **DefaultAppPool** viene assegnato a .NET Framework versione 4 come illustrato nella figura seguente, passare alla sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="96e68-153">In the **Application Pools** pane, if **DefaultAppPool** is assigned to the .NET framework version 4 as in the following illustration, skip to the next section.</span></span>

<span data-ttu-id="96e68-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span></span>

<span data-ttu-id="96e68-155">Se vengono visualizzati solo due pool di applicazioni e entrambi sono impostati sulla .NET Framework 2,0, è necessario installare ASP.NET 4 in IIS:</span><span class="sxs-lookup"><span data-stu-id="96e68-155">If you see only two application pools and both of them are set to the .NET Framework 2.0, you have to install ASP.NET 4 in IIS:</span></span>

- <span data-ttu-id="96e68-156">Aprire una finestra del prompt dei comandi facendo clic con il pulsante destro del mouse su **prompt dei comandi** nel menu **Start** di Windows e selezionando **Esegui come amministratore**.</span><span class="sxs-lookup"><span data-stu-id="96e68-156">Open a command prompt window by right-clicking **Command Prompt** in the Windows **Start** menu and selecting **Run as Administrator**.</span></span> <span data-ttu-id="96e68-157">Eseguire quindi [aspnet\_regiis. exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) per installare ASP.NET 4 in IIS, usando i comandi seguenti.</span><span class="sxs-lookup"><span data-stu-id="96e68-157">Then run [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) to install ASP.NET 4 in IIS, using the following commands.</span></span> <span data-ttu-id="96e68-158">Nei sistemi a 64 bit sostituire "Framework" con "Framework64".</span><span class="sxs-lookup"><span data-stu-id="96e68-158">(In 64-bit systems, replace "Framework" with "Framework64".)</span></span>

    [!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample2.cmd)]

    <span data-ttu-id="96e68-159">[![aspnet_regiis_installing_ASP. NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span></span>

    <span data-ttu-id="96e68-160">Questo comando crea nuovi pool di applicazioni per il .NET Framework 4, ma il pool di applicazioni predefinito verrà comunque impostato su 2,0.</span><span class="sxs-lookup"><span data-stu-id="96e68-160">This command creates new application pools for the .NET Framework 4, but the default application pool will still be set to 2.0.</span></span> <span data-ttu-id="96e68-161">Si distribuirà un'applicazione destinata a .NET 4 al pool di applicazioni, quindi è necessario modificare il pool di applicazioni in .NET 4.</span><span class="sxs-lookup"><span data-stu-id="96e68-161">You'll be deploying an application that targets .NET 4 to that application pool, so you have to change the application pool to .NET 4.</span></span>

<span data-ttu-id="96e68-162">Se è stato chiuso **Gestione IIS**, eseguirlo di nuovo, espandere il nodo del server e fare clic su **pool di applicazioni** per visualizzare di nuovo il riquadro pool di **applicazioni** .</span><span class="sxs-lookup"><span data-stu-id="96e68-162">If you closed **IIS Manager**, run it again, expand the server node, and click **Application Pools** to display the **Application Pools** pane again.</span></span>

<span data-ttu-id="96e68-163">Nel riquadro **pool di applicazioni** fare clic **su DefaultAppPool**, quindi nel riquadro **azioni** fare clic su **impostazioni di base**.</span><span class="sxs-lookup"><span data-stu-id="96e68-163">In the **Application Pools** pane, click **DefaultAppPool**, and then in the **Actions** pane click **Basic Settings**.</span></span>

<span data-ttu-id="96e68-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span></span>

<span data-ttu-id="96e68-165">Nella finestra di dialogo **Modifica pool di applicazioni** modificare **.NET Framework versione** in **.NET Framework v 4.0.30319** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="96e68-165">In the **Edit Application Pool** dialog box, change **.NET Framework version** to **.NET Framework v4.0.30319** and click **OK**.</span></span>

<span data-ttu-id="96e68-166">[![Selecting_. NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span></span>

<span data-ttu-id="96e68-167">A questo punto è possibile procedere alla pubblicazione in IIS.</span><span class="sxs-lookup"><span data-stu-id="96e68-167">You are now ready to publish to IIS.</span></span>

## <a name="publishing-to-iis"></a><span data-ttu-id="96e68-168">Pubblicazione in IIS</span><span class="sxs-lookup"><span data-stu-id="96e68-168">Publishing to IIS</span></span>

<span data-ttu-id="96e68-169">Esistono diversi modi per eseguire la distribuzione con Visual Studio 2010 e Distribuzione Web:</span><span class="sxs-lookup"><span data-stu-id="96e68-169">There are several ways you can deploy using Visual Studio 2010 and Web Deploy:</span></span>

- <span data-ttu-id="96e68-170">Usare la pubblicazione con un clic di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="96e68-170">Use Visual Studio one-click publish.</span></span>
- <span data-ttu-id="96e68-171">Creare un *pacchetto di distribuzione* e installarlo utilizzando l'interfaccia utente di gestione IIS.</span><span class="sxs-lookup"><span data-stu-id="96e68-171">Create a *deployment package* and install it using the IIS Manager UI.</span></span> <span data-ttu-id="96e68-172">Il pacchetto di distribuzione è costituito da un file con *estensione zip* che contiene tutti i file e i metadati necessari per installare un sito in IIS.</span><span class="sxs-lookup"><span data-stu-id="96e68-172">The deployment package consists of a *.zip* file that contains all the files and metadata needed to install a site in IIS.</span></span>
- <span data-ttu-id="96e68-173">Creare un pacchetto di distribuzione e installarlo utilizzando la riga di comando.</span><span class="sxs-lookup"><span data-stu-id="96e68-173">Create a deployment package and install it using the command line.</span></span>

<span data-ttu-id="96e68-174">Il processo passato nelle esercitazioni precedenti per configurare Visual Studio per automatizzare le attività di distribuzione si applica a tutti questi tre metodi.</span><span class="sxs-lookup"><span data-stu-id="96e68-174">The process you went through in the previous tutorials to set up Visual Studio to automate deployment tasks applies to all of these three methods.</span></span> <span data-ttu-id="96e68-175">In queste esercitazioni verrà usato il primo di questi metodi.</span><span class="sxs-lookup"><span data-stu-id="96e68-175">In these tutorials you'll use the first of these methods.</span></span> <span data-ttu-id="96e68-176">Per informazioni sull'uso dei pacchetti di distribuzione, vedere [mappa del contenuto della distribuzione di ASP.NET](https://msdn.microsoft.com/library/bb386521.aspx).</span><span class="sxs-lookup"><span data-stu-id="96e68-176">For information about using deployment packages, see [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span></span>

<span data-ttu-id="96e68-177">Prima della pubblicazione, assicurarsi di eseguire Visual Studio in modalità amministratore.</span><span class="sxs-lookup"><span data-stu-id="96e68-177">Before publishing, make sure that you are running Visual Studio in administrator mode.</span></span> <span data-ttu-id="96e68-178">Nel menu **Start** di Windows 7, fare clic con il pulsante destro del mouse sull'icona per la versione di Visual Studio in uso e scegliere **Esegui come amministratore**. La modalità amministratore è obbligatoria per la pubblicazione solo quando si esegue la pubblicazione in IIS nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="96e68-178">(In the Windows 7 **Start** menu, right-click the icon for the version of Visual Studio you're using and select **Run as Administrator**.) Administrator mode is required for publishing only when you are publishing to IIS on the local computer.</span></span>

<span data-ttu-id="96e68-179">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul progetto ContosoUniversity (non sul progetto CONTOSOUNIVERSITY. dal) e scegliere **pubblica**.</span><span class="sxs-lookup"><span data-stu-id="96e68-179">In **Solution Explorer**, right-click the ContosoUniversity project (not the ContosoUniversity.DAL project) and select **Publish**.</span></span>

<span data-ttu-id="96e68-180">Viene visualizzata la procedura guidata **Pubblica sito Web** .</span><span class="sxs-lookup"><span data-stu-id="96e68-180">The **Publish Web** wizard appears.</span></span>

![Publish_Web_wizard_Profile_tab](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image9.png)

<span data-ttu-id="96e68-182">Nell'elenco a discesa selezionare **&lt;nuovo...&gt;** .</span><span class="sxs-lookup"><span data-stu-id="96e68-182">In the drop-down list, select **&lt;New...&gt;**.</span></span>

<span data-ttu-id="96e68-183">Nella finestra di dialogo **nuovo profilo** immettere "test", quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="96e68-183">In the **New Profile** dialog box, enter "Test", and then click **OK**.</span></span>

![New_Profile_dialog_box](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image10.png)

<span data-ttu-id="96e68-185">Questo nome è lo stesso del nodo centrale del file di trasformazione Web. test. config creato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="96e68-185">This name is the same as the middle node of the Web.Test.config transform file that you created earlier.</span></span> <span data-ttu-id="96e68-186">Questo corrisponde a ciò che determina l'applicazione delle trasformazioni Web. test. config quando si esegue la pubblicazione utilizzando questo profilo.</span><span class="sxs-lookup"><span data-stu-id="96e68-186">This correspondence is what causes the Web.Test.config transformations to be applied when you publish by using this profile.</span></span>

<span data-ttu-id="96e68-187">La procedura guidata passa automaticamente alla scheda **connessione** .</span><span class="sxs-lookup"><span data-stu-id="96e68-187">The wizard automatically advances to the **Connection** tab.</span></span>

<span data-ttu-id="96e68-188">Nella casella **URL servizio** immettere *localhost*.</span><span class="sxs-lookup"><span data-stu-id="96e68-188">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="96e68-189">Nella casella **sito/applicazione** immettere *Default Web site/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="96e68-189">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="96e68-190">Nella casella **URL di destinazione** immettere `http://localhost/ContosoUniversity`.</span><span class="sxs-lookup"><span data-stu-id="96e68-190">In the **Destination URL** box, enter `http://localhost/ContosoUniversity`.</span></span>

<span data-ttu-id="96e68-191">L'impostazione dell' **URL di destinazione** non è obbligatoria.</span><span class="sxs-lookup"><span data-stu-id="96e68-191">The **Destination URL** setting isn't required.</span></span> <span data-ttu-id="96e68-192">Al termine della distribuzione dell'applicazione, Visual Studio apre automaticamente il browser predefinito a questo URL.</span><span class="sxs-lookup"><span data-stu-id="96e68-192">When Visual Studio finishes deploying the application, it automatically opens your default browser to this URL.</span></span> <span data-ttu-id="96e68-193">Se non si desidera che il browser venga aperto automaticamente dopo la distribuzione, lasciare vuota questa casella.</span><span class="sxs-lookup"><span data-stu-id="96e68-193">If you don't want the browser to open automatically after deployment, leave this box blank.</span></span>

![Publish_Web_wizard_Connection_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image11.png)

<span data-ttu-id="96e68-195">Fare clic su **convalida connessione** per verificare che le impostazioni siano corrette ed è possibile connettersi a IIS nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="96e68-195">Click **Validate Connection** to verify that the settings are correct and you can connect to IIS on the local computer.</span></span>

<span data-ttu-id="96e68-196">Un segno di spunta verde verifica che la connessione abbia esito positivo.</span><span class="sxs-lookup"><span data-stu-id="96e68-196">A green check mark verifies that the connection is successful.</span></span>

![Publish_Web_wizard_Connection_tab_validated](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image12.png)

<span data-ttu-id="96e68-198">Fare clic su **Avanti** per passare alla scheda **Impostazioni** .</span><span class="sxs-lookup"><span data-stu-id="96e68-198">Click **Next** to advance to the **Settings** tab.</span></span>

<span data-ttu-id="96e68-199">Nella casella di riepilogo a discesa **configurazione** è specificata la configurazione della build da distribuire.</span><span class="sxs-lookup"><span data-stu-id="96e68-199">The **Configuration** drop-down box specifies the build configuration to deploy.</span></span> <span data-ttu-id="96e68-200">Il valore predefinito è release, ovvero quello che si desidera.</span><span class="sxs-lookup"><span data-stu-id="96e68-200">The default value is Release, which is what you want.</span></span>

<span data-ttu-id="96e68-201">Lasciare deselezionata la casella **di controllo Rimuovi file aggiuntivi nella destinazione** .</span><span class="sxs-lookup"><span data-stu-id="96e68-201">Leave the **Remove additional files at destination** check box cleared.</span></span> <span data-ttu-id="96e68-202">Poiché si tratta della prima distribuzione, non saranno ancora presenti file nella cartella di destinazione.</span><span class="sxs-lookup"><span data-stu-id="96e68-202">Since this is your first deployment, there won't be any files in the destination folder yet.</span></span>

<span data-ttu-id="96e68-203">Nella sezione **database** immettere il valore seguente nella casella stringa di connessione per **schoolContext**:</span><span class="sxs-lookup"><span data-stu-id="96e68-203">In the **Databases** section, enter the following value in the connection string box for **SchoolContext**:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample3.cmd)]

<span data-ttu-id="96e68-204">Il processo di distribuzione inserisce questa stringa di connessione nel file Web. config distribuito perché è selezionata l'opzione **Usa questa stringa di connessione in fase di esecuzione** .</span><span class="sxs-lookup"><span data-stu-id="96e68-204">The deployment process will put this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

<span data-ttu-id="96e68-205">Inoltre, in **schoolContext**selezionare **applica migrazioni Code First**.</span><span class="sxs-lookup"><span data-stu-id="96e68-205">Also under **SchoolContext**, select **Apply Code First Migrations**.</span></span> <span data-ttu-id="96e68-206">Questa opzione fa in modo che il processo di distribuzione configuri il file Web. config distribuito per specificare l'inizializzatore `MigrateDatabaseToLatestVersion`.</span><span class="sxs-lookup"><span data-stu-id="96e68-206">This option causes the deployment process to configure the deployed Web.config file to specify the `MigrateDatabaseToLatestVersion` initializer.</span></span> <span data-ttu-id="96e68-207">Questo inizializzatore aggiorna automaticamente il database alla versione più recente quando l'applicazione accede al database per la prima volta dopo la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="96e68-207">This initializer automatically updates the database to the latest version when the application accesses the database for the first time after deployment.</span></span>

<span data-ttu-id="96e68-208">Nella casella stringa di connessione per **DefaultConnection**immettere il valore seguente:</span><span class="sxs-lookup"><span data-stu-id="96e68-208">In the connection string box for **DefaultConnection**, enter the following value:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample4.cmd)]

<span data-ttu-id="96e68-209">Lasciare deselezionata l' **aggiornamento database** .</span><span class="sxs-lookup"><span data-stu-id="96e68-209">Leave **Update database** cleared.</span></span> <span data-ttu-id="96e68-210">Il database di appartenenza verrà distribuito copiando il file SDF nei dati dell'app\_e non si vuole che il processo di distribuzione esegua altre operazioni con il database.</span><span class="sxs-lookup"><span data-stu-id="96e68-210">The membership database will be deployed by copying the .sdf file in App\_Data, and you don't want the deployment process to do anything else with this database.</span></span>

![Publish_Web_wizard_Settings_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image13.png)

<span data-ttu-id="96e68-212">Fare clic su **Avanti** per passare alla scheda **Anteprima** .</span><span class="sxs-lookup"><span data-stu-id="96e68-212">Click **Next** to advance to the **Preview** tab.</span></span>

<span data-ttu-id="96e68-213">Nella scheda **Anteprima** fare clic su **Avvia anteprima** per visualizzare un elenco dei file che verranno copiati.</span><span class="sxs-lookup"><span data-stu-id="96e68-213">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span>

![Publish_Web_wizard_Preview_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image14.png)

![Publish_Web_wizard_Preview_tab_Test_with_file_list](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image15.png)

<span data-ttu-id="96e68-216">Fare clic su **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="96e68-216">Click **Publish**.</span></span>

<span data-ttu-id="96e68-217">Se Visual Studio non è in modalità amministratore, è possibile che venga visualizzato un messaggio di errore che indica un errore di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="96e68-217">If Visual Studio is not in administrator mode, you might get an error message that indicates a permissions error.</span></span> <span data-ttu-id="96e68-218">In tal caso, chiudere Visual Studio, aprirlo in modalità amministratore e provare di nuovo a eseguire la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="96e68-218">In that case, close Visual Studio, open it in administrator mode, and try to publish again.</span></span>

<span data-ttu-id="96e68-219">Se Visual Studio è in modalità amministratore, la finestra di **output** segnala la compilazione e la pubblicazione riuscite.</span><span class="sxs-lookup"><span data-stu-id="96e68-219">If Visual Studio is in administrator mode, the **Output** window reports successful build and publish.</span></span>

![Output_window_publish_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image16.png)

<span data-ttu-id="96e68-221">Il browser si apre automaticamente alla Home page di Contoso University in esecuzione in IIS nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="96e68-221">The browser automatically opens to the Contoso University Home page running in IIS on the local computer.</span></span>

<span data-ttu-id="96e68-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span></span>

## <a name="testing-in-the-test-environment"></a><span data-ttu-id="96e68-223">Test nell'ambiente di test</span><span class="sxs-lookup"><span data-stu-id="96e68-223">Testing in the Test Environment</span></span>

<span data-ttu-id="96e68-224">Si noti che l'indicatore di ambiente Mostra "(test)" anziché "(dev)", che indica che la trasformazione *Web. config* per l'indicatore dell'ambiente è stata completata.</span><span class="sxs-lookup"><span data-stu-id="96e68-224">Notice that the environment indicator shows "(Test)" instead of "(Dev)", which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

<span data-ttu-id="96e68-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span></span>

<span data-ttu-id="96e68-226">Eseguire la pagina **students** per verificare che il database distribuito non disponga di studenti.</span><span class="sxs-lookup"><span data-stu-id="96e68-226">Run the **Students** page to verify that the deployed database has no students.</span></span> <span data-ttu-id="96e68-227">Quando si seleziona questa pagina, l'operazione di caricamento potrebbe richiedere alcuni minuti perché Code First crea il database e quindi esegue il `Seed` metodo.</span><span class="sxs-lookup"><span data-stu-id="96e68-227">When you select this page it may take a few minutes to load because Code First creates the database and then runs the `Seed` method.</span></span> <span data-ttu-id="96e68-228">Questa operazione non è stata eseguita nel home page perché l'applicazione non ha ancora tentato di accedere al database.</span><span class="sxs-lookup"><span data-stu-id="96e68-228">(It didn't do that when you were on the home page because the application didn't try to access the database yet.)</span></span>

<span data-ttu-id="96e68-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span></span>

<span data-ttu-id="96e68-230">Eseguire la pagina **insegnanti** per verificare che Code First il seeding del database con i dati dell'insegnante:</span><span class="sxs-lookup"><span data-stu-id="96e68-230">Run the **Instructors** page to verify that Code First seeded the database with instructor data:</span></span>

<span data-ttu-id="96e68-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span></span>

<span data-ttu-id="96e68-232">Selezionare **Aggiungi studenti** dal menu **students (studenti** ), aggiungere uno studente, quindi visualizzare il nuovo studente nella pagina **students (studenti** ) per verificare che sia possibile scrivere correttamente nel database:</span><span class="sxs-lookup"><span data-stu-id="96e68-232">Select **Add Students** from the **Students** menu, add a student, and then view the new student in the **Students** page to verify that you can successfully write to the database:</span></span>

<span data-ttu-id="96e68-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span></span>

<span data-ttu-id="96e68-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span></span>

<span data-ttu-id="96e68-235">Dal menu **corsi** selezionare **Aggiorna crediti**.</span><span class="sxs-lookup"><span data-stu-id="96e68-235">From the **Courses** menu, select **Update Credits**.</span></span> <span data-ttu-id="96e68-236">La pagina di **aggiornamento crediti** richiede autorizzazioni di amministratore, pertanto viene visualizzata la pagina **di accesso** .</span><span class="sxs-lookup"><span data-stu-id="96e68-236">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="96e68-237">Immettere le credenziali dell'account amministratore create in precedenza ("admin" e "pas $ w0rd").</span><span class="sxs-lookup"><span data-stu-id="96e68-237">Enter the administrator account credentials that you created earlier ("admin" and "Pas$w0rd").</span></span> <span data-ttu-id="96e68-238">Viene visualizzata la pagina **Update Credits** , che verifica che l'account Administrator creato nell'esercitazione precedente sia stato distribuito correttamente nell'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="96e68-238">The **Update Credits** page is displayed, which verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="96e68-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span></span>

<span data-ttu-id="96e68-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span></span>

<span data-ttu-id="96e68-241">Verificare che sia presente una cartella *ELMAH* con solo il file segnaposto.</span><span class="sxs-lookup"><span data-stu-id="96e68-241">Verify that an *Elmah* folder exists with only the placeholder file in it.</span></span>

<span data-ttu-id="96e68-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="96e68-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span></span>

<a id="efcfmigrations"></a>

## <a name="reviewing-the-automatic-webconfig-changes-for-code-first-migrations"></a><span data-ttu-id="96e68-243">Revisione delle modifiche automatiche di Web. config per Migrazioni Code First</span><span class="sxs-lookup"><span data-stu-id="96e68-243">Reviewing the Automatic Web.config Changes for Code First Migrations</span></span>

<span data-ttu-id="96e68-244">Aprire il file *Web. config* nell'applicazione distribuita in *C:\inetpub\wwwroot\ContosoUniversity* . è possibile vedere il punto in cui il processo di distribuzione è stato configurato migrazioni Code First per aggiornare automaticamente il database alla versione più recente.</span><span class="sxs-lookup"><span data-stu-id="96e68-244">Open the *Web.config* file in the deployed application at *C:\inetpub\wwwroot\ContosoUniversity* and you can see where the deployment process configured Code First Migrations to automatically update the database to the latest version.</span></span>

![](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image35.png)

<span data-ttu-id="96e68-245">Il processo di distribuzione ha creato anche una nuova stringa di connessione per Migrazioni Code First da usare esclusivamente per l'aggiornamento dello schema del database:</span><span class="sxs-lookup"><span data-stu-id="96e68-245">The deployment process also created a new connection string for Code First Migrations to use exclusively for updating the database schema:</span></span>

![DatabasePublish_connection_string](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image36.png)

<span data-ttu-id="96e68-247">Questa stringa di connessione aggiuntiva consente di specificare un account utente per gli aggiornamenti dello schema del database e un account utente diverso per l'accesso ai dati dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="96e68-247">This additional connection string enables you to specify one user account for database schema updates, and a different user account for application data access.</span></span> <span data-ttu-id="96e68-248">Ad esempio, è possibile assegnare il ruolo di proprietario del\_di database a Migrazioni Code First e i ruoli DB\_DataReader e DB\_DataWriter all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="96e68-248">For example, you could assign the db\_owner role to Code First Migrations, and db\_datareader and db\_datawriter roles to the application.</span></span> <span data-ttu-id="96e68-249">Si tratta di un modello di difesa in profondità comune che impedisce al codice potenzialmente dannoso nell'applicazione di modificare lo schema del database.</span><span class="sxs-lookup"><span data-stu-id="96e68-249">This is a common defense-in-depth pattern that prevents potentially malicious code in the application from changing the database schema.</span></span> <span data-ttu-id="96e68-250">Ad esempio, questo potrebbe verificarsi in un attacco SQL injection riuscito. Questo modello non viene usato da queste esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="96e68-250">(For example, this might happen in a successful SQL injection attack.) This pattern is not used by these tutorials.</span></span> <span data-ttu-id="96e68-251">Non si applica a SQL Server Compact e non si applica quando si esegue la migrazione a SQL Server in un'esercitazione successiva di questa serie.</span><span class="sxs-lookup"><span data-stu-id="96e68-251">It does not apply to SQL Server Compact, and it does not apply when you migrate to SQL Server in a later tutorial in this series.</span></span> <span data-ttu-id="96e68-252">Il sito di Cytanium offre un solo account utente per accedere al database SQL Server creato in Cytanium.</span><span class="sxs-lookup"><span data-stu-id="96e68-252">The Cytanium site offers just one user account for accessing the SQL Server database that you create at Cytanium.</span></span> <span data-ttu-id="96e68-253">Se si è in grado di implementare questo modello nello scenario, è possibile eseguire questa operazione attenendosi alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="96e68-253">If you are able to implement this pattern in your scenario, you can do it by performing the following steps:</span></span>

1. <span data-ttu-id="96e68-254">Nella scheda **Impostazioni** della procedura guidata **Pubblica sito Web** , immettere la stringa di connessione che specifica un utente con autorizzazioni complete per l'aggiornamento dello schema del database e deselezionare la casella di controllo **Usa questa stringa di connessione in fase di esecuzione** .</span><span class="sxs-lookup"><span data-stu-id="96e68-254">In the **Settings** tab of the **Publish Web** wizard, enter the connection string that specifies a user with full database schema update permissions, and clear the **Use this connection string at runtime** check box.</span></span> <span data-ttu-id="96e68-255">Il file Web. config distribuito diventa la stringa di connessione `DatabasePublish`.</span><span class="sxs-lookup"><span data-stu-id="96e68-255">In the deployed Web.config file, this becomes the `DatabasePublish` connection string.</span></span>
2. <span data-ttu-id="96e68-256">Creare una trasformazione del file Web. config per la stringa di connessione che si desidera venga utilizzata dall'applicazione in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="96e68-256">Create a Web.config file transformation for the connection string that you want the application to use at run time.</span></span>

<span data-ttu-id="96e68-257">A questo punto l'applicazione è stata distribuita in IIS nel computer di sviluppo ed è stata testata.</span><span class="sxs-lookup"><span data-stu-id="96e68-257">You have now deployed your application to IIS on your development computer and tested it there.</span></span> <span data-ttu-id="96e68-258">In questo modo si verifica che il processo di distribuzione abbia copiato il contenuto dell'applicazione nel percorso corretto (esclusi i file che non si desidera distribuire) e che Distribuzione Web configurato correttamente IIS durante la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="96e68-258">This verifies that the deployment process copied the application's content to the right location (excluding the files that you did not want to deploy), and also that Web Deploy configured IIS correctly during deployment.</span></span> <span data-ttu-id="96e68-259">Nell'esercitazione successiva verrà eseguito un ulteriore test per trovare un'attività di distribuzione che non è ancora stata eseguita: impostazione delle autorizzazioni per le cartelle nella cartella *ELMAH*</span><span class="sxs-lookup"><span data-stu-id="96e68-259">In the next tutorial, you'll run one more test that finds a deployment task that has not yet been done: setting folder permissions on the *Elmah* folder.</span></span>

## <a name="more-information"></a><span data-ttu-id="96e68-260">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="96e68-260">More Information</span></span>

<span data-ttu-id="96e68-261">Per informazioni sull'esecuzione di IIS o IIS Express in Visual Studio, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="96e68-261">For information about running IIS or IIS Express in Visual Studio, see the following resources:</span></span>

- <span data-ttu-id="96e68-262">[IIS Express Panoramica](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) sul sito IIS.NET.</span><span class="sxs-lookup"><span data-stu-id="96e68-262">[IIS Express Overview](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) on the IIS.net site.</span></span>
- <span data-ttu-id="96e68-263">[Introduzione a IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) nel Blog di Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="96e68-263">[Introducing IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) on Scott Guthrie's blog.</span></span>
- <span data-ttu-id="96e68-264">[Procedura: specificare il server Web per i progetti Web in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span><span class="sxs-lookup"><span data-stu-id="96e68-264">[How to: Specify the Web Server for Web Projects in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span></span>
- <span data-ttu-id="96e68-265">[Differenze principali tra IIS e il server di sviluppo ASP.NET](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) nel sito di ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="96e68-265">[Core Differences Between IIS and the ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) on the ASP.NET site.</span></span>
- <span data-ttu-id="96e68-266">[Testare l'applicazione ASP.NET MVC o Web Forms in IIS 7 in 30 secondi nel](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) Blog di Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="96e68-266">[Test your ASP.NET MVC or Web Forms Application on IIS 7 in 30 seconds](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="96e68-267">Questa voce fornisce esempi del motivo per cui i test con il Server di sviluppo Visual Studio (Cassini) non sono affidabili come i test in IIS Express e perché i test in IIS Express non sono affidabili come i test in IIS.</span><span class="sxs-lookup"><span data-stu-id="96e68-267">This entry provides examples of why testing with the Visual Studio Development Server (Cassini) is not as reliable as testing in IIS Express, and why testing in IIS Express is not as reliable as testing in IIS.</span></span>

<span data-ttu-id="96e68-268">Per informazioni sui problemi che possono verificarsi quando l'applicazione è in esecuzione in attendibilità media, vedere [hosting di applicazioni ASP.NET in un trust medio](http://www.4guysfromrolla.com/articles/100307-1.aspx) nei 4 ragazzi dal sito Rolla.</span><span class="sxs-lookup"><span data-stu-id="96e68-268">For information about what issues might arise when your application runs in medium trust, see [Hosting ASP.NET Applications in Medium Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) on the 4 Guys from Rolla site.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="96e68-269">[Precedente](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
> [Successivo](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="96e68-269">[Previous](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
[Next](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span></span>
