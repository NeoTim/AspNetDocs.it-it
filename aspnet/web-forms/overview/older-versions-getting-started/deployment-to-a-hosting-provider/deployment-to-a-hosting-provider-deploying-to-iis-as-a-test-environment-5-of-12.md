---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
title: "Distribuzione di un'applicazione Web ASP.NET con SQL Server Compact tramite Visual Studio o Visual Web Developer: Distribuzione in IIS come ambiente di Test - 5 di 12 | Microsoft Docs"
author: tdykstra
description: Questa serie di esercitazioni illustra come distribuire un ASP.NET (pubblicazione) progetto di applicazione web che include un database di SQL Server Compact tramite Visual s...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: 493b2a66-816c-485c-8315-952ed1085ccc
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
msc.type: authoredcontent
ms.openlocfilehash: ba939012e8fb11a50992eeaef70e8ebf61cea851
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57058808"
---
<a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-iis-as-a-test-environment---5-of-12"></a><span data-ttu-id="c0359-103">Distribuzione di un'applicazione Web ASP.NET con SQL Server Compact tramite Visual Studio o Visual Web Developer: Distribuzione in IIS come ambiente di Test - 5 di 12</span><span class="sxs-lookup"><span data-stu-id="c0359-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to IIS as a Test Environment - 5 of 12</span></span>
====================
<span data-ttu-id="c0359-104">da [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="c0359-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="c0359-105">Download progetto iniziale</span><span class="sxs-lookup"><span data-stu-id="c0359-105">Download Starter Project</span></span>](http://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="c0359-106">Questa serie di esercitazioni illustra come distribuire un ASP.NET (pubblicazione) progetto di applicazione web che include un database di SQL Server Compact tramite Visual Studio 2012 RC o Visual Studio Express 2012 RC per Web.</span><span class="sxs-lookup"><span data-stu-id="c0359-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="c0359-107">Se si installa l'aggiornamento della pubblicazione sul Web, è anche possibile usare Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="c0359-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="c0359-108">Per un'introduzione alla serie, vedere [la prima esercitazione della serie](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="c0359-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="c0359-109">Per un'esercitazione che illustra le funzionalità di distribuzione introdotte dopo la versione di Visual Studio 2012 RC, illustra come distribuire le edizioni di SQL Server diverse da SQL Server Compact e Mostra come distribuire in App Web di servizio App di Azure, vedere [distribuzione Web ASP.NET con Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="c0359-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>


## <a name="overview"></a><span data-ttu-id="c0359-110">Panoramica</span><span class="sxs-lookup"><span data-stu-id="c0359-110">Overview</span></span>

<span data-ttu-id="c0359-111">Questa esercitazione illustra come distribuire un'applicazione web ASP.NET in IIS nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="c0359-111">This tutorial shows how to deploy an ASP.NET web application to IIS on the local computer.</span></span>

<span data-ttu-id="c0359-112">Quando si sviluppa un'applicazione, in genere testare eseguendolo in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c0359-112">When you develop an application, you generally test by running it in Visual Studio.</span></span> <span data-ttu-id="c0359-113">Per impostazione predefinita, questo significa che si usa Visual Studio Development Server (noto anche come Cassini).</span><span class="sxs-lookup"><span data-stu-id="c0359-113">By default, this means you're using the Visual Studio Development Server (also known as Cassini).</span></span> <span data-ttu-id="c0359-114">Visual Studio Development Server rende più semplice testare durante lo sviluppo in Visual Studio, ma non funziona esattamente come IIS.</span><span class="sxs-lookup"><span data-stu-id="c0359-114">The Visual Studio Development Server makes it easy to test during development in Visual Studio, but it doesn't work exactly like IIS.</span></span> <span data-ttu-id="c0359-115">Di conseguenza, è possibile che un'applicazione verrà eseguita correttamente quando si eseguirne il test in Visual Studio, ma non riesce quando viene distribuito a IIS in un ambiente di hosting.</span><span class="sxs-lookup"><span data-stu-id="c0359-115">As a result, it's possible that an application will run correctly when you test it in Visual Studio, but fail when it's deployed to IIS in a hosting environment.</span></span>

<span data-ttu-id="c0359-116">È possibile testare l'applicazione in modo più affidabile nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="c0359-116">You can test your application more reliably in these ways:</span></span>

1. <span data-ttu-id="c0359-117">Usa IIS Express o IIS completo invece di Visual Studio Development Server quando esegue il test in Visual Studio durante lo sviluppo.</span><span class="sxs-lookup"><span data-stu-id="c0359-117">Use IIS Express or full IIS instead of the Visual Studio Development Server when you test in Visual Studio during development.</span></span> <span data-ttu-id="c0359-118">Questo metodo emula a livello generale con maggiore precisione la modalità di esecuzione del sito in IIS.</span><span class="sxs-lookup"><span data-stu-id="c0359-118">This method generally emulates more accurately how your site will run under IIS.</span></span> <span data-ttu-id="c0359-119">Tuttavia, questo metodo non testa il processo di distribuzione o convalidare che il risultato del processo di distribuzione verrà eseguito correttamente.</span><span class="sxs-lookup"><span data-stu-id="c0359-119">However, this method does not test your deployment process or validate that the result of the deployment process will run correctly.</span></span>
2. <span data-ttu-id="c0359-120">Distribuire l'applicazione in IIS nel computer di sviluppo utilizzando la stessa procedura che si userà in un secondo momento per la distribuzione in ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="c0359-120">Deploy the application to IIS on your development computer by using the same process that you'll use later to deploy it to your production environment.</span></span> <span data-ttu-id="c0359-121">Questo metodo convalida il processo di distribuzione, oltre a verificare che l'applicazione verrà eseguita correttamente in IIS.</span><span class="sxs-lookup"><span data-stu-id="c0359-121">This method validates your deployment process in addition to validating that your application will run correctly under IIS.</span></span>
3. <span data-ttu-id="c0359-122">Distribuire l'applicazione in un ambiente di test che è più vicino possibile all'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="c0359-122">Deploy the application to a test environment that is as close as possible to your production environment.</span></span> <span data-ttu-id="c0359-123">Poiché l'ambiente di produzione per queste esercitazioni è un provider di hosting di terze parti, l'ambiente di test ideale sarebbe un secondo account con il provider di hosting.</span><span class="sxs-lookup"><span data-stu-id="c0359-123">Since the production environment for these tutorials is a third-party hosting provider, the ideal test environment would be a second account with the hosting provider.</span></span> <span data-ttu-id="c0359-124">Utilizzare questo secondo account solo per i test, ma sia necessario configurare esattamente come l'account di produzione.</span><span class="sxs-lookup"><span data-stu-id="c0359-124">You would use this second account only for testing, but it would be set up the same way as the production account.</span></span>

<span data-ttu-id="c0359-125">Questa esercitazione illustra i passaggi per l'opzione 2.</span><span class="sxs-lookup"><span data-stu-id="c0359-125">This tutorial shows the steps for option 2.</span></span> <span data-ttu-id="c0359-126">Vengono fornite istruzioni per l'opzione 3 alla fine del [distribuzione nell'ambiente di produzione](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) esercitazione e alla fine di questa esercitazione sono disponibili collegamenti alle risorse per l'opzione 1.</span><span class="sxs-lookup"><span data-stu-id="c0359-126">Guidance for option 3 is provided at the end of the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, and at the end of this tutorial there are links to resources for option 1.</span></span>

<span data-ttu-id="c0359-127">Promemoria: Se viene visualizzato un messaggio di errore o qualcosa non funziona durante l'esecuzione dell'esercitazione, assicurarsi di controllare la [risoluzione dei problemi pagina](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="c0359-127">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="configuring-the-application-to-run-in-medium-trust"></a><span data-ttu-id="c0359-128">Configurazione dell'applicazione per l'esecuzione in attendibilità media</span><span class="sxs-lookup"><span data-stu-id="c0359-128">Configuring the Application to Run in Medium Trust</span></span>

<span data-ttu-id="c0359-129">Prima di installare IIS e distribuzione di ad esso, sarà necessario modificare un'impostazione del file Web. config per eseguire il sito più simile si verifica in un ambiente di hosting condiviso tipico.</span><span class="sxs-lookup"><span data-stu-id="c0359-129">Before installing IIS and deploying to it, you'll change a Web.config file setting in order to make the site run more like it will in a typical shared hosting environment.</span></span>

<span data-ttu-id="c0359-130">I provider di hosting esegue in genere il sito web in *attendibilità media*, che significa che esistono alcuni aspetti non è consentito eseguire.</span><span class="sxs-lookup"><span data-stu-id="c0359-130">Hosting providers typically run your web site in *medium trust*, which means there are some things it is not allowed to do.</span></span> <span data-ttu-id="c0359-131">Ad esempio, il codice dell'applicazione non è possibile accedere al Registro di Windows e Impossibile leggere o scrivere i file che non rientrano nella gerarchia di cartelle dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0359-131">For example, application code can't access the Windows registry and can't read or write files that are outside of your application's folder hierarchy.</span></span> <span data-ttu-id="c0359-132">Per impostazione predefinita l'applicazione viene eseguita *attendibilità alta* nel computer locale, a indicare che l'applicazione potrebbe essere in grado di eseguire operazioni che non riesce quando viene distribuito nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="c0359-132">By default your application runs in *high trust* on your local computer, which means that the application might be able to do things that would fail when you deploy it to production.</span></span> <span data-ttu-id="c0359-133">Pertanto, per rendere l'ambiente di test che più riflettere l'ambiente di produzione, si configurerà l'esecuzione in attendibilità media dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0359-133">Therefore, to make the test environment more accurately reflect the production environment, you'll configure the application to run in medium trust.</span></span>

<span data-ttu-id="c0359-134">Nel file Web. config dell'applicazione, aggiungere un **trust** elemento le **System. Web** elemento, come illustrato in questo esempio.</span><span class="sxs-lookup"><span data-stu-id="c0359-134">In the application Web.config file, add a **trust** element in the **system.web** element, as shown in this example.</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample1.xml?highlight=4)]

<span data-ttu-id="c0359-135">L'applicazione verrà ora eseguita in attendibilità media in IIS anche nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="c0359-135">The application will now run in medium trust in IIS even on your local computer.</span></span> <span data-ttu-id="c0359-136">Questa impostazione consente di intercettare il prima possibile eventuali tentativi dal codice dell'applicazione per eseguire un'operazione che avrà esito negativo nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="c0359-136">This setting enables you to catch as early as possible any attempts by application code to do something that would fail in production.</span></span>

> [!NOTE]
> <span data-ttu-id="c0359-137">Se si usa migrazioni di Entity Framework Code First, assicurarsi di avere la versione 5.0 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="c0359-137">If you are using Entity Framework Code First Migrations, make sure that you have version 5.0 or later installed.</span></span> <span data-ttu-id="c0359-138">In Entity Framework versione 4.3, migrazioni richiede attendibilità totale per aggiornare lo schema del database.</span><span class="sxs-lookup"><span data-stu-id="c0359-138">In Entity Framework version 4.3, Migrations requires full trust in order to update the database schema.</span></span>


## <a name="installing-iis-and-web-deploy"></a><span data-ttu-id="c0359-139">Distribuzione di installazione Web e IIS</span><span class="sxs-lookup"><span data-stu-id="c0359-139">Installing IIS and Web Deploy</span></span>

<span data-ttu-id="c0359-140">Per distribuire in IIS nel computer di sviluppo, è necessario che IIS e distribuzione Web installati.</span><span class="sxs-lookup"><span data-stu-id="c0359-140">To deploy to IIS on your development computer, you must have IIS and Web Deploy installed.</span></span> <span data-ttu-id="c0359-141">Questi non sono inclusi nella configurazione predefinita di Windows 7.</span><span class="sxs-lookup"><span data-stu-id="c0359-141">These are not included in the default Windows 7 configuration.</span></span> <span data-ttu-id="c0359-142">Se già stato installato IIS e distribuzione Web, passare alla sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="c0359-142">If you have already installed both IIS and Web Deploy, skip to the next section.</span></span>

<span data-ttu-id="c0359-143">Usando il [instalace Webové Platformy](https://www.microsoft.com/web/downloads/platform.aspx) è il modo migliore per installare IIS e distribuzione Web, perché l'installazione guidata piattaforma Web installa una configurazione consigliata per IIS e installa automaticamente i prerequisiti per IIS e Web La distribuzione se necessario.</span><span class="sxs-lookup"><span data-stu-id="c0359-143">Using the [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) is the preferred way to install IIS and Web Deploy, because the Web Platform Installer installs a recommended configuration for IIS and it automatically installs the prerequisites for IIS and Web Deploy if necessary.</span></span>

<span data-ttu-id="c0359-144">Per eseguire l'installazione guidata piattaforma Web per installare IIS e distribuzione Web, usare il collegamento seguente.</span><span class="sxs-lookup"><span data-stu-id="c0359-144">To run Web Platform Installer to install IIS and Web Deploy, use the following link.</span></span> <span data-ttu-id="c0359-145">Se è già stato installato IIS, distribuzione Web o dei relativi componenti necessari, l'installazione guidata piattaforma Web installa solo cosa manca.</span><span class="sxs-lookup"><span data-stu-id="c0359-145">If you already have installed IIS, Web Deploy or any of their required components, the Web Platform Installer installs only what is missing.</span></span>

- [<span data-ttu-id="c0359-146">Installare IIS e distribuzione Web tramite WebPI</span><span class="sxs-lookup"><span data-stu-id="c0359-146">Install IIS and Web Deploy using WebPI</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=IIS7;ASPNET;NETFramework4;WDeploy)

## <a name="setting-the-default-application-pool-to-net-4"></a><span data-ttu-id="c0359-147">Impostare il Pool di applicazioni predefinito per .NET 4</span><span class="sxs-lookup"><span data-stu-id="c0359-147">Setting the Default Application Pool to .NET 4</span></span>

<span data-ttu-id="c0359-148">Dopo aver installato IIS, eseguire **Gestione IIS** per assicurarsi che .NET Framework versione 4 sia assegnato al pool di applicazioni predefinito.</span><span class="sxs-lookup"><span data-stu-id="c0359-148">After installing IIS, run **IIS Manager** to make sure that the .NET Framework version 4 is assigned to the default application pool.</span></span>

<span data-ttu-id="c0359-149">Dalla finestra di Windows **avviare** dal menu **eseguito**, immettere "inetmgr" e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c0359-149">From the Windows **Start** menu, select **Run**, enter "inetmgr", and then click **OK**.</span></span> <span data-ttu-id="c0359-150">(Se il **eseguiti** comando non è nel **avviare** menu, è possibile premere il tasto Windows e R per aprirlo.</span><span class="sxs-lookup"><span data-stu-id="c0359-150">(If the **Run** command is not in your **Start** menu, you can press the Windows Key and R to open it.</span></span> <span data-ttu-id="c0359-151">O sulla barra delle applicazioni, fare clic su **delle proprietà**, selezionare il **dal Menu di avvio** scheda, fare clic su **Personalizza**e selezionare **eseguire comando**.)</span><span class="sxs-lookup"><span data-stu-id="c0359-151">Or right-click the taskbar, click **Properties**, select the **Start Menu** tab, click **Customize**, and select **Run command**.)</span></span>

<span data-ttu-id="c0359-152">Nel **connessioni** riquadro, espandere il nodo del server e selezionare **pool di applicazioni**.</span><span class="sxs-lookup"><span data-stu-id="c0359-152">In the **Connections** pane, expand the server node and select **Application Pools**.</span></span> <span data-ttu-id="c0359-153">Nel **pool di applicazioni** riquadro, se **DefaultAppPool** viene assegnato a .NET framework versione 4 come illustrato nella figura seguente, passare alla sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="c0359-153">In the **Application Pools** pane, if **DefaultAppPool** is assigned to the .NET framework version 4 as in the following illustration, skip to the next section.</span></span>

<span data-ttu-id="c0359-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span></span>

<span data-ttu-id="c0359-155">Se viene visualizzato solo due pool di applicazioni e di entrambi gli elementi configurati per .NET Framework 2.0, è necessario installare ASP.NET 4 in IIS:</span><span class="sxs-lookup"><span data-stu-id="c0359-155">If you see only two application pools and both of them are set to the .NET Framework 2.0, you have to install ASP.NET 4 in IIS:</span></span>

- <span data-ttu-id="c0359-156">Aprire una finestra del prompt dei comandi facendo clic **prompt dei comandi** nella finestra di Windows **avviare** dal menu e selezionando **Esegui come amministratore**.</span><span class="sxs-lookup"><span data-stu-id="c0359-156">Open a command prompt window by right-clicking **Command Prompt** in the Windows **Start** menu and selecting **Run as Administrator**.</span></span> <span data-ttu-id="c0359-157">Quindi eseguire [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) installare ASP.NET 4 in IIS, usando i comandi seguenti.</span><span class="sxs-lookup"><span data-stu-id="c0359-157">Then run [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) to install ASP.NET 4 in IIS, using the following commands.</span></span> <span data-ttu-id="c0359-158">(Nei sistemi a 64 bit, sostituire "Framework" con "Framework64").</span><span class="sxs-lookup"><span data-stu-id="c0359-158">(In 64-bit systems, replace "Framework" with "Framework64".)</span></span>

    [!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample2.cmd)]

    <span data-ttu-id="c0359-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span></span>

    <span data-ttu-id="c0359-160">Questo comando Crea nuovo pool di applicazioni per .NET Framework 4, ma il pool di applicazioni predefinito verrà ancora impostato su 2.0.</span><span class="sxs-lookup"><span data-stu-id="c0359-160">This command creates new application pools for the .NET Framework 4, but the default application pool will still be set to 2.0.</span></span> <span data-ttu-id="c0359-161">Verrà distribuita un'applicazione destinata a .NET 4 per tale pool di applicazioni, pertanto è necessario modificare il pool di applicazioni in .NET 4.</span><span class="sxs-lookup"><span data-stu-id="c0359-161">You'll be deploying an application that targets .NET 4 to that application pool, so you have to change the application pool to .NET 4.</span></span>

<span data-ttu-id="c0359-162">Se è stato chiuso **Gestione IIS**eseguirlo di nuovo, espandere il nodo del server e fare clic su **pool di applicazioni** per visualizzare il **pool di applicazioni** nuovo riquadro.</span><span class="sxs-lookup"><span data-stu-id="c0359-162">If you closed **IIS Manager**, run it again, expand the server node, and click **Application Pools** to display the **Application Pools** pane again.</span></span>

<span data-ttu-id="c0359-163">Nel **pool di applicazioni** riquadro, fare clic su **DefaultAppPool**, quindi nel **azioni** riquadro fare clic su **le impostazioni di base**.</span><span class="sxs-lookup"><span data-stu-id="c0359-163">In the **Application Pools** pane, click **DefaultAppPool**, and then in the **Actions** pane click **Basic Settings**.</span></span>

<span data-ttu-id="c0359-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span></span>

<span data-ttu-id="c0359-165">Nel **modifica Pool di applicazioni** della finestra di dialogo Modifica **versione di .NET Framework** al **.NET Framework v4.0.30319** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c0359-165">In the **Edit Application Pool** dialog box, change **.NET Framework version** to **.NET Framework v4.0.30319** and click **OK**.</span></span>

<span data-ttu-id="c0359-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span></span>

<span data-ttu-id="c0359-167">A questo punto si è pronti per la pubblicazione in IIS.</span><span class="sxs-lookup"><span data-stu-id="c0359-167">You are now ready to publish to IIS.</span></span>

## <a name="publishing-to-iis"></a><span data-ttu-id="c0359-168">Pubblicazione in IIS</span><span class="sxs-lookup"><span data-stu-id="c0359-168">Publishing to IIS</span></span>

<span data-ttu-id="c0359-169">Esistono diversi modi, è possibile distribuire con Visual Studio 2010 e distribuzione Web:</span><span class="sxs-lookup"><span data-stu-id="c0359-169">There are several ways you can deploy using Visual Studio 2010 and Web Deploy:</span></span>

- <span data-ttu-id="c0359-170">Usare Visual Studio, pubblicare un solo clic.</span><span class="sxs-lookup"><span data-stu-id="c0359-170">Use Visual Studio one-click publish.</span></span>
- <span data-ttu-id="c0359-171">Creare un *pacchetto di distribuzione* e installarlo utilizzando la UI Gestione IIS.</span><span class="sxs-lookup"><span data-stu-id="c0359-171">Create a *deployment package* and install it using the IIS Manager UI.</span></span> <span data-ttu-id="c0359-172">Il pacchetto di distribuzione è costituito un *zip* file che contiene tutti i file e i metadati necessari per installare un sito in IIS.</span><span class="sxs-lookup"><span data-stu-id="c0359-172">The deployment package consists of a *.zip* file that contains all the files and metadata needed to install a site in IIS.</span></span>
- <span data-ttu-id="c0359-173">Creare un pacchetto di distribuzione e installarlo dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="c0359-173">Create a deployment package and install it using the command line.</span></span>

<span data-ttu-id="c0359-174">Il processo che è stato eseguito nelle esercitazioni precedenti per configurare Visual Studio per automatizzare le attività di distribuzione si applica a tutti di questi tre metodi.</span><span class="sxs-lookup"><span data-stu-id="c0359-174">The process you went through in the previous tutorials to set up Visual Studio to automate deployment tasks applies to all of these three methods.</span></span> <span data-ttu-id="c0359-175">In queste esercitazioni si userà il primo di questi metodi.</span><span class="sxs-lookup"><span data-stu-id="c0359-175">In these tutorials you'll use the first of these methods.</span></span> <span data-ttu-id="c0359-176">Per informazioni sull'uso di pacchetti di distribuzione, vedere [mappa del contenuto ASP.NET distribuzione](https://msdn.microsoft.com/library/bb386521.aspx).</span><span class="sxs-lookup"><span data-stu-id="c0359-176">For information about using deployment packages, see [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span></span>

<span data-ttu-id="c0359-177">Prima della pubblicazione, assicurarsi che si esegue Visual Studio in modalità amministratore.</span><span class="sxs-lookup"><span data-stu-id="c0359-177">Before publishing, make sure that you are running Visual Studio in administrator mode.</span></span> <span data-ttu-id="c0359-178">(In Windows 7 **avviare** menu, fare doppio clic sull'icona per la versione di Visual Studio in uso e selezionare **Esegui come amministratore**.) Modalità amministratore è necessaria per la pubblicazione solo quando esegue la pubblicazione in IIS nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="c0359-178">(In the Windows 7 **Start** menu, right-click the icon for the version of Visual Studio you're using and select **Run as Administrator**.) Administrator mode is required for publishing only when you are publishing to IIS on the local computer.</span></span>

<span data-ttu-id="c0359-179">Nelle **Esplora soluzioni**, fare clic sul progetto ContosoUniversity (non sul progetto ContosoUniversity.DAL) e selezionare **Publish**.</span><span class="sxs-lookup"><span data-stu-id="c0359-179">In **Solution Explorer**, right-click the ContosoUniversity project (not the ContosoUniversity.DAL project) and select **Publish**.</span></span>

<span data-ttu-id="c0359-180">Il **pubblica sul Web** procedura guidata viene visualizzata.</span><span class="sxs-lookup"><span data-stu-id="c0359-180">The **Publish Web** wizard appears.</span></span>

![Publish_Web_wizard_Profile_tab](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image9.png)

<span data-ttu-id="c0359-182">Nell'elenco a discesa, selezionare  **&lt;New... &gt;**.</span><span class="sxs-lookup"><span data-stu-id="c0359-182">In the drop-down list, select **&lt;New...&gt;**.</span></span>

<span data-ttu-id="c0359-183">Nel **nuovo profilo** della finestra di dialogo immettere "Test" e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c0359-183">In the **New Profile** dialog box, enter "Test", and then click **OK**.</span></span>

![New_Profile_dialog_box](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image10.png)

<span data-ttu-id="c0359-185">Questo nome è che identico al nodo centrale del Web.Test.config trasformare il file creato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c0359-185">This name is the same as the middle node of the Web.Test.config transform file that you created earlier.</span></span> <span data-ttu-id="c0359-186">Questa corrispondenza è quello che determina le trasformazioni Web.Test.config da applicare durante la pubblicazione utilizzando questo profilo.</span><span class="sxs-lookup"><span data-stu-id="c0359-186">This correspondence is what causes the Web.Test.config transformations to be applied when you publish by using this profile.</span></span>

<span data-ttu-id="c0359-187">La procedura guidata passa automaticamente per il **connessione** scheda.</span><span class="sxs-lookup"><span data-stu-id="c0359-187">The wizard automatically advances to the **Connection** tab.</span></span>

<span data-ttu-id="c0359-188">Nel **URL del servizio** casella, immettere *localhost*.</span><span class="sxs-lookup"><span data-stu-id="c0359-188">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="c0359-189">Nel **sito/applicazione** casella, immettere *Default Web Site/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="c0359-189">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="c0359-190">Nel **URL di destinazione** immettere `http://localhost/ContosoUniversity`.</span><span class="sxs-lookup"><span data-stu-id="c0359-190">In the **Destination URL** box, enter `http://localhost/ContosoUniversity`.</span></span>

<span data-ttu-id="c0359-191">Il **URL di destinazione** impostazione non è obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="c0359-191">The **Destination URL** setting isn't required.</span></span> <span data-ttu-id="c0359-192">Quando Visual Studio ha completato la distribuzione dell'applicazione, venga automaticamente aperto il browser predefinito usando l'URL.</span><span class="sxs-lookup"><span data-stu-id="c0359-192">When Visual Studio finishes deploying the application, it automatically opens your default browser to this URL.</span></span> <span data-ttu-id="c0359-193">Se non si desidera il browser per aprire automaticamente dopo la distribuzione, lasciare vuota questa casella.</span><span class="sxs-lookup"><span data-stu-id="c0359-193">If you don't want the browser to open automatically after deployment, leave this box blank.</span></span>

![Publish_Web_wizard_Connection_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image11.png)

<span data-ttu-id="c0359-195">Fare clic su **convalida connessione** per verificare che le impostazioni siano corrette e che è possibile connettersi a IIS nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="c0359-195">Click **Validate Connection** to verify that the settings are correct and you can connect to IIS on the local computer.</span></span>

<span data-ttu-id="c0359-196">Un segno di spunta verde verifica che la connessione ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="c0359-196">A green check mark verifies that the connection is successful.</span></span>

![Publish_Web_wizard_Connection_tab_validated](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image12.png)

<span data-ttu-id="c0359-198">Fare clic su **successivo** per passare alle **impostazioni** scheda.</span><span class="sxs-lookup"><span data-stu-id="c0359-198">Click **Next** to advance to the **Settings** tab.</span></span>

<span data-ttu-id="c0359-199">Il **configurazione** casella di riepilogo a discesa consente di specificare la configurazione della build per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="c0359-199">The **Configuration** drop-down box specifies the build configuration to deploy.</span></span> <span data-ttu-id="c0359-200">Il valore predefinito è una versione, che si desidera eseguire.</span><span class="sxs-lookup"><span data-stu-id="c0359-200">The default value is Release, which is what you want.</span></span>

<span data-ttu-id="c0359-201">Lasciare il **Rimuovi file aggiuntivi nella destinazione** casella di controllo deselezionata.</span><span class="sxs-lookup"><span data-stu-id="c0359-201">Leave the **Remove additional files at destination** check box cleared.</span></span> <span data-ttu-id="c0359-202">Poiché si tratta della prima distribuzione, non saranno tutti i file nella cartella di destinazione ancora.</span><span class="sxs-lookup"><span data-stu-id="c0359-202">Since this is your first deployment, there won't be any files in the destination folder yet.</span></span>

<span data-ttu-id="c0359-203">Nel **database** , quindi immettere il seguente valore nella casella stringa di connessione per **SchoolContext**:</span><span class="sxs-lookup"><span data-stu-id="c0359-203">In the **Databases** section, enter the following value in the connection string box for **SchoolContext**:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample3.cmd)]

<span data-ttu-id="c0359-204">Il processo di distribuzione inserirà questa stringa di connessione nel file Web. config distribuito in quanto **utilizzare questa stringa di connessione in fase di esecuzione** sia selezionata.</span><span class="sxs-lookup"><span data-stu-id="c0359-204">The deployment process will put this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

<span data-ttu-id="c0359-205">Anche in **SchoolContext**, selezionare **applicare le migrazioni Code First**.</span><span class="sxs-lookup"><span data-stu-id="c0359-205">Also under **SchoolContext**, select **Apply Code First Migrations**.</span></span> <span data-ttu-id="c0359-206">Questa opzione fa sì che il processo di distribuzione configurare il file Web. config distribuito di specificare il `MigrateDatabaseToLatestVersion` inizializzatore.</span><span class="sxs-lookup"><span data-stu-id="c0359-206">This option causes the deployment process to configure the deployed Web.config file to specify the `MigrateDatabaseToLatestVersion` initializer.</span></span> <span data-ttu-id="c0359-207">Quando l'applicazione accede al database per la prima volta dopo la distribuzione, questo inizializzatore Aggiorna automaticamente il database alla versione più recente.</span><span class="sxs-lookup"><span data-stu-id="c0359-207">This initializer automatically updates the database to the latest version when the application accesses the database for the first time after deployment.</span></span>

<span data-ttu-id="c0359-208">Nella casella stringa di connessione per **DefaultConnection**, immettere il valore seguente:</span><span class="sxs-lookup"><span data-stu-id="c0359-208">In the connection string box for **DefaultConnection**, enter the following value:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample4.cmd)]

<span data-ttu-id="c0359-209">Lasciare **aggiornare il database** deselezionata.</span><span class="sxs-lookup"><span data-stu-id="c0359-209">Leave **Update database** cleared.</span></span> <span data-ttu-id="c0359-210">Il database di appartenenza verrà distribuito copiando il file con estensione sdf nell'App\_dati e non si desidera il processo di distribuzione eseguire altre operazioni con il database.</span><span class="sxs-lookup"><span data-stu-id="c0359-210">The membership database will be deployed by copying the .sdf file in App\_Data, and you don't want the deployment process to do anything else with this database.</span></span>

![Publish_Web_wizard_Settings_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image13.png)

<span data-ttu-id="c0359-212">Fare clic su **successivo** per passare alle **anteprima** scheda.</span><span class="sxs-lookup"><span data-stu-id="c0359-212">Click **Next** to advance to the **Preview** tab.</span></span>

<span data-ttu-id="c0359-213">Nel **Preview** scheda, fare clic su **Avvia anteprima** per visualizzare un elenco dei file che verranno copiati.</span><span class="sxs-lookup"><span data-stu-id="c0359-213">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span>

![Publish_Web_wizard_Preview_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image14.png)

![Publish_Web_wizard_Preview_tab_Test_with_file_list](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image15.png)

<span data-ttu-id="c0359-216">Fare clic su **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="c0359-216">Click **Publish**.</span></span>

<span data-ttu-id="c0359-217">Se Visual Studio non è in modalità amministratore, si potrebbe ottenere un messaggio di errore che indica un errore di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="c0359-217">If Visual Studio is not in administrator mode, you might get an error message that indicates a permissions error.</span></span> <span data-ttu-id="c0359-218">In tal caso, chiudere Visual Studio, aprirlo in modalità amministratore e provare a eseguire nuovamente la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="c0359-218">In that case, close Visual Studio, open it in administrator mode, and try to publish again.</span></span>

<span data-ttu-id="c0359-219">Se Visual Studio è in modalità amministratore, il **Output** finestra report ha esito positivo, compilare e pubblicare.</span><span class="sxs-lookup"><span data-stu-id="c0359-219">If Visual Studio is in administrator mode, the **Output** window reports successful build and publish.</span></span>

![Output_window_publish_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image16.png)

<span data-ttu-id="c0359-221">Il browser si aprirà automaticamente alla pagina principale di Contoso University in esecuzione in IIS nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="c0359-221">The browser automatically opens to the Contoso University Home page running in IIS on the local computer.</span></span>

<span data-ttu-id="c0359-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span></span>

## <a name="testing-in-the-test-environment"></a><span data-ttu-id="c0359-223">Test nell'ambiente di Test</span><span class="sxs-lookup"><span data-stu-id="c0359-223">Testing in the Test Environment</span></span>

<span data-ttu-id="c0359-224">Si noti che l'indicatore di ambiente Visualizza "(Test)" anziché "(Dev)", che mostra che il *Web. config* trasformazione per l'indicatore di ambiente ha avuto esito positivo.</span><span class="sxs-lookup"><span data-stu-id="c0359-224">Notice that the environment indicator shows "(Test)" instead of "(Dev)", which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

<span data-ttu-id="c0359-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span></span>

<span data-ttu-id="c0359-226">Eseguire la **studenti** pagina per verificare che il database distribuito non disponga di alcun studenti.</span><span class="sxs-lookup"><span data-stu-id="c0359-226">Run the **Students** page to verify that the deployed database has no students.</span></span> <span data-ttu-id="c0359-227">Quando si seleziona questa pagina potrebbero occorrere alcuni minuti per caricare perché Code First consente di creare il database e quindi esegue il `Seed` (metodo).</span><span class="sxs-lookup"><span data-stu-id="c0359-227">When you select this page it may take a few minutes to load because Code First creates the database and then runs the `Seed` method.</span></span> <span data-ttu-id="c0359-228">(Non che quando erano nella home page, poiché l'applicazione non tenta di accedere al database ancora.)</span><span class="sxs-lookup"><span data-stu-id="c0359-228">(It didn't do that when you were on the home page because the application didn't try to access the database yet.)</span></span>

<span data-ttu-id="c0359-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span></span>

<span data-ttu-id="c0359-230">Eseguire la **instructors (insegnanti)** pagina per verificare che Code First effettuato il seeding del database con dati instructor:</span><span class="sxs-lookup"><span data-stu-id="c0359-230">Run the **Instructors** page to verify that Code First seeded the database with instructor data:</span></span>

<span data-ttu-id="c0359-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span></span>

<span data-ttu-id="c0359-232">Selezionare **aggiungere gli studenti** dal **studenti** dal menu Aggiungi uno studente e quindi visualizzare il nuovo studente nella **studenti** pagina per verificare che è possibile scrivere nel database :</span><span class="sxs-lookup"><span data-stu-id="c0359-232">Select **Add Students** from the **Students** menu, add a student, and then view the new student in the **Students** page to verify that you can successfully write to the database:</span></span>

<span data-ttu-id="c0359-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span></span>

<span data-ttu-id="c0359-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span></span>

<span data-ttu-id="c0359-235">Dal **corsi** dal menu **crediti Update**.</span><span class="sxs-lookup"><span data-stu-id="c0359-235">From the **Courses** menu, select **Update Credits**.</span></span> <span data-ttu-id="c0359-236">Il **aggiornamento crediti** pagina richiede autorizzazioni di amministratore, in modo che il **Accedi** viene visualizzata la pagina.</span><span class="sxs-lookup"><span data-stu-id="c0359-236">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="c0359-237">Immettere le credenziali dell'account amministratore creato precedenti ("admin" e "Pas w0rd$").</span><span class="sxs-lookup"><span data-stu-id="c0359-237">Enter the administrator account credentials that you created earlier ("admin" and "Pas$w0rd").</span></span> <span data-ttu-id="c0359-238">Il **crediti Update** pagina viene visualizzata, verifica che l'account amministratore creato nell'esercitazione precedente è stato distribuito correttamente nell'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="c0359-238">The **Update Credits** page is displayed, which verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="c0359-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span></span>

<span data-ttu-id="c0359-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span></span>

<span data-ttu-id="c0359-241">Verificare che un *Elmah* esiste con solo il file segnaposto nella relativa cartella.</span><span class="sxs-lookup"><span data-stu-id="c0359-241">Verify that an *Elmah* folder exists with only the placeholder file in it.</span></span>

<span data-ttu-id="c0359-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="c0359-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span></span>

<a id="efcfmigrations"></a>

## <a name="reviewing-the-automatic-webconfig-changes-for-code-first-migrations"></a><span data-ttu-id="c0359-243">Revisione delle modifiche automatico Web. config per le migrazioni Code First</span><span class="sxs-lookup"><span data-stu-id="c0359-243">Reviewing the Automatic Web.config Changes for Code First Migrations</span></span>

<span data-ttu-id="c0359-244">Aprire il *Web. config* file nell'applicazione distribuita *C:\inetpub\wwwroot\ContosoUniversity* ed è possibile visualizzare dove il processo di distribuzione configurato le migrazioni Code First per automaticamente aggiornare il database alla versione più recente.</span><span class="sxs-lookup"><span data-stu-id="c0359-244">Open the *Web.config* file in the deployed application at *C:\inetpub\wwwroot\ContosoUniversity* and you can see where the deployment process configured Code First Migrations to automatically update the database to the latest version.</span></span>

![](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image35.png)

<span data-ttu-id="c0359-245">Il processo di distribuzione creato anche una nuova stringa di connessione per le migrazioni Code First usare esclusivamente per l'aggiornamento dello schema del database:</span><span class="sxs-lookup"><span data-stu-id="c0359-245">The deployment process also created a new connection string for Code First Migrations to use exclusively for updating the database schema:</span></span>

![DatabasePublish_connection_string](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image36.png)

<span data-ttu-id="c0359-247">Questa stringa di connessione aggiuntive consente di specificare un account utente per gli aggiornamenti dello schema di database e un account utente diverso per accedere ai dati dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0359-247">This additional connection string enables you to specify one user account for database schema updates, and a different user account for application data access.</span></span> <span data-ttu-id="c0359-248">Ad esempio, è possibile assegnare il database\_ruolo di proprietario per le migrazioni Code First e db\_datareader e db\_datawriter ruoli all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0359-248">For example, you could assign the db\_owner role to Code First Migrations, and db\_datareader and db\_datawriter roles to the application.</span></span> <span data-ttu-id="c0359-249">Si tratta di un modello comune di difesa in profondità che impedisce a codice potenzialmente dannoso dell'applicazione di modificare lo schema del database.</span><span class="sxs-lookup"><span data-stu-id="c0359-249">This is a common defense-in-depth pattern that prevents potentially malicious code in the application from changing the database schema.</span></span> <span data-ttu-id="c0359-250">(Ad esempio, questa situazione può verificarsi in un attacco injection SQL.) Questo modello non viene utilizzato da queste esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="c0359-250">(For example, this might happen in a successful SQL injection attack.) This pattern is not used by these tutorials.</span></span> <span data-ttu-id="c0359-251">Non è applicabile a SQL Server Compact, e non è applicabile quando esegue la migrazione a SQL Server in un'esercitazione successiva di questa serie.</span><span class="sxs-lookup"><span data-stu-id="c0359-251">It does not apply to SQL Server Compact, and it does not apply when you migrate to SQL Server in a later tutorial in this series.</span></span> <span data-ttu-id="c0359-252">Il sito Cytanium offre solo un account utente per l'accesso al database di SQL Server creato su Cytanium.</span><span class="sxs-lookup"><span data-stu-id="c0359-252">The Cytanium site offers just one user account for accessing the SQL Server database that you create at Cytanium.</span></span> <span data-ttu-id="c0359-253">Se si è in grado di implementare questo modello nel proprio scenario, è possibile farlo attenendosi alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="c0359-253">If you are able to implement this pattern in your scenario, you can do it by performing the following steps:</span></span>

1. <span data-ttu-id="c0359-254">Nel **impostazioni** scheda della finestra di **Pubblica sito Web** procedura guidata, immettere la stringa di connessione che specifica l'utente con autorizzazioni per l'aggiornamento dello schema completo del database e deselezionare il **Usa questa stringa di connessione in fase di esecuzione** casella di controllo.</span><span class="sxs-lookup"><span data-stu-id="c0359-254">In the **Settings** tab of the **Publish Web** wizard, enter the connection string that specifies a user with full database schema update permissions, and clear the **Use this connection string at runtime** check box.</span></span> <span data-ttu-id="c0359-255">Nel file Web. config distribuito, questo diventa il `DatabasePublish` stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="c0359-255">In the deployed Web.config file, this becomes the `DatabasePublish` connection string.</span></span>
2. <span data-ttu-id="c0359-256">Creare una trasformazione del file Web. config per la stringa di connessione che si desidera che l'applicazione da usare in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="c0359-256">Create a Web.config file transformation for the connection string that you want the application to use at run time.</span></span>

<span data-ttu-id="c0359-257">Abbiamo distribuito l'applicazione in IIS nel computer di sviluppo e testata non esiste.</span><span class="sxs-lookup"><span data-stu-id="c0359-257">You have now deployed your application to IIS on your development computer and tested it there.</span></span> <span data-ttu-id="c0359-258">Verifica che il processo di distribuzione copiato il contenuto dell'applicazione nel percorso corretto (esclusi i file non desiderati per la distribuzione) e anche tale distribuzione Web configurato IIS correttamente durante la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="c0359-258">This verifies that the deployment process copied the application's content to the right location (excluding the files that you did not want to deploy), and also that Web Deploy configured IIS correctly during deployment.</span></span> <span data-ttu-id="c0359-259">Nella prossima esercitazione, si eseguirà un test più che consente di trovare un'attività di distribuzione che non è ancora stato fatto: impostazione delle autorizzazioni di cartella per il *Elmah* cartella.</span><span class="sxs-lookup"><span data-stu-id="c0359-259">In the next tutorial, you'll run one more test that finds a deployment task that has not yet been done: setting folder permissions on the *Elmah* folder.</span></span>

## <a name="more-information"></a><span data-ttu-id="c0359-260">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="c0359-260">More Information</span></span>

<span data-ttu-id="c0359-261">Per informazioni sull'esecuzione di IIS o IIS Express in Visual Studio, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="c0359-261">For information about running IIS or IIS Express in Visual Studio, see the following resources:</span></span>

- <span data-ttu-id="c0359-262">[Panoramica di IIS Express](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) sul sito IIS.net.</span><span class="sxs-lookup"><span data-stu-id="c0359-262">[IIS Express Overview](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) on the IIS.net site.</span></span>
- <span data-ttu-id="c0359-263">[Introduzione a IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) sul blog Guthrie.</span><span class="sxs-lookup"><span data-stu-id="c0359-263">[Introducing IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) on Scott Guthrie's blog.</span></span>
- <span data-ttu-id="c0359-264">[Procedura: Specificare il Server Web per i progetti Web in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span><span class="sxs-lookup"><span data-stu-id="c0359-264">[How to: Specify the Web Server for Web Projects in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span></span>
- <span data-ttu-id="c0359-265">[Principali differenze tra IIS e ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) sul sito ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c0359-265">[Core Differences Between IIS and the ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) on the ASP.NET site.</span></span>
- <span data-ttu-id="c0359-266">[Verifica di ASP.NET MVC o applicazione Web Form in IIS 7 in 30 secondi](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) sul blog di Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="c0359-266">[Test your ASP.NET MVC or Web Forms Application on IIS 7 in 30 seconds](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="c0359-267">Questa voce vengono forniti esempi di perché il test con Visual Studio Development Server (Cassini) non è così affidabile come test in IIS Express e il motivo per cui il test in IIS Express non è così affidabile come test in IIS.</span><span class="sxs-lookup"><span data-stu-id="c0359-267">This entry provides examples of why testing with the Visual Studio Development Server (Cassini) is not as reliable as testing in IIS Express, and why testing in IIS Express is not as reliable as testing in IIS.</span></span>

<span data-ttu-id="c0359-268">Per informazioni su quali problemi potrebbero verificarsi quando l'applicazione viene eseguita in attendibilità media, vedere [che ospita le applicazioni ASP.NET in attendibilità media](http://www.4guysfromrolla.com/articles/100307-1.aspx) sui 4 utenti malintenzionati Rolla sito.</span><span class="sxs-lookup"><span data-stu-id="c0359-268">For information about what issues might arise when your application runs in medium trust, see [Hosting ASP.NET Applications in Medium Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) on the 4 Guys from Rolla site.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c0359-269">[Precedente](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
> [Successivo](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="c0359-269">[Previous](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
[Next](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span></span>
