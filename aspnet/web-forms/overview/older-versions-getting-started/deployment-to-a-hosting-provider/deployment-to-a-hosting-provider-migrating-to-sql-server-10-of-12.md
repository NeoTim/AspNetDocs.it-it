---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
title: "Distribuzione di un'applicazione Web ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: migrazione a SQL Server-10 di 12 | Microsoft Docs"
author: tdykstra
description: Questa serie di esercitazioni illustra come distribuire (pubblicare) un progetto di applicazione Web ASP.NET che include un database di SQL Server Compact usando Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: a89d6f32-b71b-4036-8ff7-5f8ac2a6eca8
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
msc.type: authoredcontent
ms.openlocfilehash: c5281a42596d95e725b32e652c75785abe0fd64e
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78573465"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-migrating-to-sql-server---10-of-12"></a><span data-ttu-id="8afa1-103">Distribuzione di un'applicazione Web ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: migrazione a SQL Server-10 di 12</span><span class="sxs-lookup"><span data-stu-id="8afa1-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Migrating to SQL Server - 10 of 12</span></span>

<span data-ttu-id="8afa1-104">di [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="8afa1-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="8afa1-105">Scarica progetto Starter</span><span class="sxs-lookup"><span data-stu-id="8afa1-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="8afa1-106">Questa serie di esercitazioni illustra come distribuire (pubblicare) un progetto di applicazione Web ASP.NET che include un database di SQL Server Compact usando Visual Studio 2012 RC o Visual Studio Express 2012 RC per il Web.</span><span class="sxs-lookup"><span data-stu-id="8afa1-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="8afa1-107">È anche possibile usare Visual Studio 2010 se si installa l'aggiornamento pubblicazione sul Web.</span><span class="sxs-lookup"><span data-stu-id="8afa1-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="8afa1-108">Per un'introduzione alla serie, vedere [la prima esercitazione della serie](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="8afa1-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="8afa1-109">Per un'esercitazione in cui vengono illustrate le funzionalità di distribuzione introdotte dopo la versione RC di Visual Studio 2012, viene illustrato come distribuire SQL Server edizioni diverse da SQL Server Compact e viene illustrato come eseguire la distribuzione in app Azure app Web del servizio, vedere [distribuzione web ASP.NET con Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="8afa1-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="8afa1-110">Panoramica</span><span class="sxs-lookup"><span data-stu-id="8afa1-110">Overview</span></span>

<span data-ttu-id="8afa1-111">Questa esercitazione illustra come eseguire la migrazione da SQL Server Compact a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8afa1-111">This tutorial shows you how to migrate from SQL Server Compact to SQL Server.</span></span> <span data-ttu-id="8afa1-112">Questo può essere utile per sfruttare le funzionalità di SQL Server che SQL Server Compact non supporta, ad esempio stored procedure, trigger, viste o replica.</span><span class="sxs-lookup"><span data-stu-id="8afa1-112">One reason you might want to do that is to take advantage of SQL Server features that SQL Server Compact does not support, such as stored procedures, triggers, views, or replication.</span></span> <span data-ttu-id="8afa1-113">Per ulteriori informazioni sulle differenze tra SQL Server Compact e SQL Server, vedere l'esercitazione sulla [distribuzione di SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) .</span><span class="sxs-lookup"><span data-stu-id="8afa1-113">For more information about the differences between SQL Server Compact and SQL Server, see the [Deploying SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span></span>

### <a name="sql-server-express-versus-full-sql-server-for-development"></a><span data-ttu-id="8afa1-114">SQL Server Express rispetto alla SQL Server completa per lo sviluppo</span><span class="sxs-lookup"><span data-stu-id="8afa1-114">SQL Server Express versus full SQL Server for Development</span></span>

<span data-ttu-id="8afa1-115">Dopo aver deciso di eseguire l'aggiornamento a SQL Server, potrebbe essere necessario usare SQL Server o SQL Server Express negli ambienti di sviluppo e test.</span><span class="sxs-lookup"><span data-stu-id="8afa1-115">Once you've decided to upgrade to SQL Server, you might want to use SQL Server or SQL Server Express in your development and test environments.</span></span> <span data-ttu-id="8afa1-116">Oltre alle differenze nel supporto degli strumenti e nelle caratteristiche del motore di database, esistono differenze nelle implementazioni del provider tra SQL Server Compact e altre versioni di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8afa1-116">In addition to the differences in tool support and in database engine features, there are differences in provider implementations between SQL Server Compact and other versions of SQL Server.</span></span> <span data-ttu-id="8afa1-117">Queste differenze possono causare lo stesso codice per generare risultati diversi.</span><span class="sxs-lookup"><span data-stu-id="8afa1-117">These differences can cause the same code to generate different results.</span></span> <span data-ttu-id="8afa1-118">Se pertanto si decide di tenere SQL Server Compact come database di sviluppo, è necessario testare accuratamente il sito in SQL Server o SQL Server Express in un ambiente di test prima di ogni distribuzione in produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-118">Therefore, if you decide to keep SQL Server Compact as your development database, you should thoroughly test your site in SQL Server or SQL Server Express in a test environment before each deployment to production.</span></span>

<span data-ttu-id="8afa1-119">A differenza di SQL Server Compact, SQL Server Express è essenzialmente lo stesso motore di database e usa lo stesso provider .NET come SQL Server completo.</span><span class="sxs-lookup"><span data-stu-id="8afa1-119">Unlike SQL Server Compact, SQL Server Express is essentially the same database engine and uses the same .NET provider as full SQL Server.</span></span> <span data-ttu-id="8afa1-120">Quando si esegue il test con SQL Server Express, è possibile avere la certezza di ottenere gli stessi risultati che si otterranno con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8afa1-120">When you test with SQL Server Express, you can be confident of getting the same results as you will with SQL Server.</span></span> <span data-ttu-id="8afa1-121">È possibile utilizzare la maggior parte degli strumenti di database con SQL Server Express che è possibile utilizzare con SQL Server (un'eccezione significativa [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)) e supporta altre funzionalità di SQL Server come stored procedure, viste, trigger e replica.</span><span class="sxs-lookup"><span data-stu-id="8afa1-121">You can use most of the same database tools with SQL Server Express that you can use with SQL Server (a notable exception being [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), and it supports other features of SQL Server like stored procedures, views, triggers, and replication.</span></span> <span data-ttu-id="8afa1-122">Tuttavia, in genere è necessario utilizzare la SQL Server completa in un sito Web di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-122">(You typically have to use full SQL Server in a production website, however.</span></span> <span data-ttu-id="8afa1-123">SQL Server Express può essere eseguito in un ambiente host condiviso, ma non è stato progettato per questo e molti provider di hosting non lo supportano.</span><span class="sxs-lookup"><span data-stu-id="8afa1-123">SQL Server Express can run in a shared hosting environment, but it was not designed for that, and many hosting providers do not support it.)</span></span>

<span data-ttu-id="8afa1-124">Se si usa Visual Studio 2012, in genere si sceglie SQL Server Express database locale per l'ambiente di sviluppo, perché questo è quello che viene installato per impostazione predefinita con Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8afa1-124">If you are using Visual Studio 2012, you typically choose SQL Server Express LocalDB for your development environment because that is what is installed by default with Visual Studio.</span></span> <span data-ttu-id="8afa1-125">Tuttavia, il database locale non funziona in IIS, pertanto per l'ambiente di test è necessario utilizzare SQL Server o SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="8afa1-125">However, LocalDB does not work in IIS, so for your test environment you have to use either SQL Server or SQL Server Express.</span></span>

### <a name="combining-databases-versus-keeping-them-separate"></a><span data-ttu-id="8afa1-126">Combinare i database e mantenerli separati</span><span class="sxs-lookup"><span data-stu-id="8afa1-126">Combining Databases versus Keeping Them Separate</span></span>

<span data-ttu-id="8afa1-127">L'applicazione Contoso University dispone di due database SQL Server Compact: il database delle appartenenze (*ASPNET. sdf*) e il database dell'applicazione (*School. sdf*).</span><span class="sxs-lookup"><span data-stu-id="8afa1-127">The Contoso University application has two SQL Server Compact databases: the membership database (*aspnet.sdf*) and the application database (*School.sdf*).</span></span> <span data-ttu-id="8afa1-128">Quando si esegue la migrazione, è possibile eseguire la migrazione di questi database a due database distinti o a un singolo database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-128">When you migrate, you can migrate these databases to two separate databases or to a single database.</span></span> <span data-ttu-id="8afa1-129">Potrebbe essere necessario combinarli per facilitare i join del database tra il database dell'applicazione e il database di appartenenza.</span><span class="sxs-lookup"><span data-stu-id="8afa1-129">You might want to combine them in order to facilitate database joins between your application database and your membership database.</span></span> <span data-ttu-id="8afa1-130">Il piano di hosting potrebbe anche fornire un motivo per combinarli.</span><span class="sxs-lookup"><span data-stu-id="8afa1-130">Your hosting plan might also provide a reason to combine them.</span></span> <span data-ttu-id="8afa1-131">Ad esempio, il provider di hosting potrebbe addebitare più database per più database o addirittura non consentire più di un database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-131">For example, the hosting provider might charge more for multiple databases or might not even allow more than one database.</span></span> <span data-ttu-id="8afa1-132">Questo è il caso dell'account di hosting Cytanium Lite usato per questa esercitazione, che consente un solo database SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8afa1-132">That's the case with the Cytanium Lite hosting account that's used for this tutorial, which allows only a single SQL Server database.</span></span>

<span data-ttu-id="8afa1-133">In questa esercitazione si eseguirà la migrazione dei due database in questo modo:</span><span class="sxs-lookup"><span data-stu-id="8afa1-133">In this tutorial, you'll migrate your two databases this way:</span></span>

- <span data-ttu-id="8afa1-134">Eseguire la migrazione a due database del database locale nell'ambiente di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="8afa1-134">Migrate to two LocalDB databases in the development environment.</span></span>
- <span data-ttu-id="8afa1-135">Eseguire la migrazione a due database SQL Server Express nell'ambiente di testing.</span><span class="sxs-lookup"><span data-stu-id="8afa1-135">Migrate to two SQL Server Express databases in the test environment.</span></span>
- <span data-ttu-id="8afa1-136">Eseguire la migrazione a un database completo SQL Server combinato nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-136">Migrate to one combined full SQL Server database in the production environment.</span></span>

<span data-ttu-id="8afa1-137">Promemoria: se si riceve un messaggio di errore o un elemento non funziona durante l'esercitazione, assicurarsi di controllare la pagina relativa alla [risoluzione dei problemi](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="8afa1-137">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="installing-sql-server-express"></a><span data-ttu-id="8afa1-138">Installazione di SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="8afa1-138">Installing SQL Server Express</span></span>

<span data-ttu-id="8afa1-139">SQL Server Express viene installato automaticamente per impostazione predefinita con Visual Studio 2010, ma per impostazione predefinita non viene installato con Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="8afa1-139">SQL Server Express is automatically installed by default with Visual Studio 2010, but by default it is not installed with Visual Studio 2012.</span></span> <span data-ttu-id="8afa1-140">Per installare SQL Server 2012 Express, fare clic sul collegamento seguente</span><span class="sxs-lookup"><span data-stu-id="8afa1-140">To install SQL Server 2012 Express, click the following link</span></span>

- [<span data-ttu-id="8afa1-141">SQL Server Express 2012</span><span class="sxs-lookup"><span data-stu-id="8afa1-141">SQL Server Express 2012</span></span>](https://www.microsoft.com/download/details.aspx?id=29062)

<span data-ttu-id="8afa1-142">Scegliere *ita/x64/SQLEXPR\_x64\_ita. exe* o *enu/x86/SQLEXPR\_x86\_ENU. exe*e nell'installazione guidata accettare le impostazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="8afa1-142">Choose *ENU/x64/SQLEXPR\_x64\_ENU.exe* or *ENU/x86/SQLEXPR\_x86\_ENU.exe*, and in the installation wizard accept the default settings.</span></span> <span data-ttu-id="8afa1-143">Per ulteriori informazioni sulle opzioni di installazione, vedere [installare SQL Server 2012 dall'installazione guidata (programma](https://msdn.microsoft.com/library/ms143219.aspx)di installazione).</span><span class="sxs-lookup"><span data-stu-id="8afa1-143">For more information about installation options, see [Install SQL Server 2012 from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span></span>

## <a name="creating-sql-server-express-databases-for-the-test-environment"></a><span data-ttu-id="8afa1-144">Creazione di SQL Server Express database per l'ambiente di test</span><span class="sxs-lookup"><span data-stu-id="8afa1-144">Creating SQL Server Express Databases for the Test Environment</span></span>

<span data-ttu-id="8afa1-145">Il passaggio successivo consiste nel creare i database di appartenenza e dell'Istituto di istruzione di ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8afa1-145">The next step is to create the ASP.NET membership and School databases.</span></span>

<span data-ttu-id="8afa1-146">Dal menu **Visualizza** selezionare **Esplora server** (**Esplora database** in Visual Web Developer), quindi fare clic con il pulsante destro del mouse su **connessioni dati** e scegliere **Crea nuovo SQL Server database**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-146">From the **View** menu select **Server Explorer** (**Database Explorer** in Visual Web Developer), and then right-click **Data Connections** and select **Create New SQL Server Database**.</span></span>

![Selecting_Create_New_SQL_Server_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image1.png)

<span data-ttu-id="8afa1-148">Nella finestra di dialogo **Crea nuovo database di SQL Server** , immettere ".\SQLEXPRESS" nella **casella nome server** e "ASPNET-test" nella casella **nuovo nome database** , quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-148">In the **Create New SQL Server Database** dialog box, enter ".\SQLExpress" in the **Server name** box and "aspnet-Test" in the **New database name** box, then click **OK**.</span></span>

![Create_New_SQL_Server_Database_aspnet](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image2.png)

<span data-ttu-id="8afa1-150">Seguire la stessa procedura per creare un nuovo database di SQL Server Express School denominato "School-test".</span><span class="sxs-lookup"><span data-stu-id="8afa1-150">Follow the same procedure to create a new SQL Server Express School database named "School-Test".</span></span>

<span data-ttu-id="8afa1-151">Si sta aggiungendo "test" a questi nomi di database perché in un secondo momento si creerà un'istanza aggiuntiva di ogni database per l'ambiente di sviluppo ed è necessario essere in grado di distinguere i due set di database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-151">(You're appending "Test" to these database names because later you'll create an additional instance of each database for the development environment, and you need to be able to differentiate the two sets of databases.)</span></span>

<span data-ttu-id="8afa1-152">**Esplora server** ora Visualizza i due nuovi database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-152">**Server Explorer** now shows the two new databases.</span></span>

![New_databases_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image3.png)

## <a name="creating-a-grant-script-for-the-new-databases"></a><span data-ttu-id="8afa1-154">Creazione di uno script di concessione per i nuovi database</span><span class="sxs-lookup"><span data-stu-id="8afa1-154">Creating a Grant Script for the New Databases</span></span>

<span data-ttu-id="8afa1-155">Quando l'applicazione viene eseguita in IIS nel computer di sviluppo, l'applicazione accede al database usando le credenziali del pool di applicazioni predefinito.</span><span class="sxs-lookup"><span data-stu-id="8afa1-155">When the application runs in IIS on your development computer, the application accesses the database by using the default application pool's credentials.</span></span> <span data-ttu-id="8afa1-156">Tuttavia, per impostazione predefinita, l'identità del pool di applicazioni non dispone dell'autorizzazione per aprire i database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-156">However, by default, the application pool identity does not have permission to open the databases.</span></span> <span data-ttu-id="8afa1-157">Quindi, è necessario eseguire uno script per concedere tale autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-157">So you have to run a script to grant that permission.</span></span> <span data-ttu-id="8afa1-158">In questa sezione viene creato lo script che verrà eseguito in un secondo momento per assicurarsi che l'applicazione possa aprire i database durante l'esecuzione in IIS.</span><span class="sxs-lookup"><span data-stu-id="8afa1-158">In this section you create the script that you'll run later to make sure that the application can open the databases when it runs in IIS.</span></span>

<span data-ttu-id="8afa1-159">Nella cartella *SolutionFiles* della soluzione creata nell'esercitazione [distribuzione in ambiente di produzione](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) creare un nuovo file SQL denominato *Grant. SQL*.</span><span class="sxs-lookup"><span data-stu-id="8afa1-159">In the solution's *SolutionFiles* folder that you created in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, create a new SQL file named *Grant.sql*.</span></span> <span data-ttu-id="8afa1-160">Copiare i seguenti comandi SQL nel file, quindi salvare e chiudere il file:</span><span class="sxs-lookup"><span data-stu-id="8afa1-160">Copy the following SQL commands into the file, and then save and close the file:</span></span>

[!code-sql[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample1.sql)]

> [!NOTE]
> <span data-ttu-id="8afa1-161">Questo script è progettato per funzionare con SQL Server 2008 e con le impostazioni di IIS in Windows 7, così come sono specificate in questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-161">This script is designed to work with SQL Server 2008 and with the IIS settings in Windows 7 as they are specified in this tutorial.</span></span> <span data-ttu-id="8afa1-162">Se si usa una versione diversa di SQL Server o di Windows o se si configura IIS nel computer in modo diverso, potrebbe essere necessario apportare modifiche a questo script.</span><span class="sxs-lookup"><span data-stu-id="8afa1-162">If you're using a different version of SQL Server or of Windows, or if you set up IIS on your computer differently, changes to this script might be required.</span></span> <span data-ttu-id="8afa1-163">Per ulteriori informazioni sugli script di SQL Server, vedere [documentazione online di SQL Server](https://go.microsoft.com/fwlink/?LinkId=132511).</span><span class="sxs-lookup"><span data-stu-id="8afa1-163">For more information about SQL Server scripts, see [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8afa1-164">**Nota sulla sicurezza** Questo script fornisce le autorizzazioni di database\_proprietario all'utente che accede al database in fase di esecuzione, che è ciò che si avrà nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-164">**Security Note** This script gives db\_owner permissions to the user that accesses the database at run time, which is what you'll have in the production environment.</span></span> <span data-ttu-id="8afa1-165">In alcuni scenari potrebbe essere necessario specificare un utente che disponga di autorizzazioni complete per l'aggiornamento dello schema del database solo per la distribuzione e specificare per la fase di esecuzione un utente diverso che disponga di autorizzazioni solo per la lettura e la scrittura dei dati.</span><span class="sxs-lookup"><span data-stu-id="8afa1-165">In some scenarios you might want to specify a user that has full database schema update permissions only for deployment, and specify for run time a different user that has permissions only to read and write data.</span></span> <span data-ttu-id="8afa1-166">Per ulteriori informazioni, vedere **la pagina relativa alla revisione delle modifiche automatiche di Web. config per migrazioni Code First** nella [distribuzione in IIS come ambiente di test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="8afa1-166">For more information, see **Reviewing the Automatic Web.config Changes for Code First Migrations** in [Deploying to IIS as a Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span></span>

## <a name="configuring-database-deployment-for-the-test-environment"></a><span data-ttu-id="8afa1-167">Configurazione della distribuzione di database per l'ambiente di test</span><span class="sxs-lookup"><span data-stu-id="8afa1-167">Configuring Database Deployment for the Test Environment</span></span>

<span data-ttu-id="8afa1-168">Successivamente, verrà configurato Visual Studio in modo che esegua le attività seguenti per ogni database:</span><span class="sxs-lookup"><span data-stu-id="8afa1-168">Next, you'll configure Visual Studio so that it will do the following tasks for each database:</span></span>

- <span data-ttu-id="8afa1-169">Generare uno script SQL per la creazione della struttura del database di origine (tabelle, colonne, vincoli e così via) nel database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-169">Generate a SQL script that creates the source database's structure (tables, columns, constraints, etc.) in the destination database.</span></span>
- <span data-ttu-id="8afa1-170">Genera uno script SQL che inserisce i dati del database di origine nelle tabelle del database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-170">Generate a SQL script that inserts the source database's data into the tables in the destination database.</span></span>
- <span data-ttu-id="8afa1-171">Eseguire gli script generati e lo script di concessione creato nel database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-171">Run the generated scripts, and the Grant script that you created, in the destination database.</span></span>

<span data-ttu-id="8afa1-172">Aprire la finestra delle **proprietà del progetto** e selezionare la scheda **pacchetto/pubblica SQL** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-172">Open the **Project Properties** window and select the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="8afa1-173">Verificare che nell'elenco a discesa **configurazione** sia selezionato **attivo (versione)** o **versione** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-173">Make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="8afa1-174">Fare clic su **Abilita questa pagina**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-174">Click **Enable this Page**.</span></span>

![Package_Publish_SQL_tab_Enable_This_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image4.png)

<span data-ttu-id="8afa1-176">La scheda **pacchetto/pubblica SQL** è generalmente disabilitata perché specifica un metodo di distribuzione legacy.</span><span class="sxs-lookup"><span data-stu-id="8afa1-176">The **Package/Publish SQL** tab is normally disabled because it specifies a legacy deployment method.</span></span> <span data-ttu-id="8afa1-177">Per la maggior parte degli scenari, è necessario configurare la distribuzione del database nella procedura guidata **Pubblica sito Web** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-177">For most scenarios, you should configure database deployment in the **Publish Web** wizard.</span></span> <span data-ttu-id="8afa1-178">La migrazione da SQL Server Compact a SQL Server o SQL Server Express è un caso speciale per cui questo metodo è una scelta ottimale.</span><span class="sxs-lookup"><span data-stu-id="8afa1-178">Migrating from SQL Server Compact to SQL Server or SQL Server Express is a special case for which this method is a good choice.</span></span>

<span data-ttu-id="8afa1-179">Fare clic su **Importa da Web. config**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-179">Click **Import from Web.config**.</span></span>

![Selecting_Import_from_Web.config](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image5.png)

<span data-ttu-id="8afa1-181">Visual Studio cerca le stringhe di connessione nel file *Web. config* , ne trova uno per il database di appartenenza e uno per il database School e aggiunge una riga corrispondente a ogni stringa di connessione nella tabella delle **voci del database** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-181">Visual Studio looks for connection strings in the *Web.config* file, finds one for the membership database and one for the School database, and adds a row corresponding to each connection string in the **Database Entries** table.</span></span> <span data-ttu-id="8afa1-182">Le stringhe di connessione trovate per i database di SQL Server Compact esistenti e il passaggio successivo consiste nel configurare come e dove distribuire questi database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-182">The connection strings it finds are for the existing SQL Server Compact databases, and your next step will be to configure how and where to deploy these databases.</span></span>

<span data-ttu-id="8afa1-183">Immettere le impostazioni di distribuzione del database nella sezione **Dettagli voce database** sotto la tabella **voci di database** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-183">You enter database deployment settings in the **Database Entry Details** section below the **Database Entries** table.</span></span> <span data-ttu-id="8afa1-184">Le impostazioni visualizzate nella sezione **Dettagli immissione database** riguardano la riga selezionata nella tabella **voci di database** , come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="8afa1-184">The settings shown in the **Database Entry Details** section pertain to whichever row in the **Database Entries** table is selected, as shown in the following illustration.</span></span>

![Database_Entry_Details_section_of_Package_Publish_SQL_tab](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image6.png)

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="8afa1-186">Configurazione delle impostazioni di distribuzione per il database delle appartenenze</span><span class="sxs-lookup"><span data-stu-id="8afa1-186">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="8afa1-187">Selezionare la riga **DefaultConnection-Deployment** nella tabella **voci di database** per configurare le impostazioni che si applicano al database delle appartenenze.</span><span class="sxs-lookup"><span data-stu-id="8afa1-187">Select the **DefaultConnection-Deployment** row in the **Database Entries** table in order to configure settings that apply to the membership database.</span></span>

<span data-ttu-id="8afa1-188">In **stringa di connessione per database di destinazione**immettere una stringa di connessione che punta al nuovo database di appartenenza SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="8afa1-188">In **Connection string for destination database**, enter a connection string that points to the new SQL Server Express membership database.</span></span> <span data-ttu-id="8afa1-189">È possibile ottenere la stringa di connessione necessaria dall' **Esplora server**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-189">You can get the connection string you need from **Server Explorer**.</span></span> <span data-ttu-id="8afa1-190">In **Esplora server**espandere **connessioni dati** e selezionare il database **AspnetTest** , quindi nella finestra **Proprietà** copiare il valore della **stringa di connessione** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-190">In **Server Explorer**, expand **Data Connections** and select the **aspnetTest** database, then from the **Properties** window copy the **Connection String** value.</span></span>

![aspnet_connection_string_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image7.png)

<span data-ttu-id="8afa1-192">La stessa stringa di connessione viene riprodotta qui:</span><span class="sxs-lookup"><span data-stu-id="8afa1-192">The same connection string is reproduced here:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample2.cmd)]

<span data-ttu-id="8afa1-193">Copiare e incollare la stringa di connessione nella **stringa di connessione per il database di destinazione** nella scheda **pacchetto/pubblica SQL** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-193">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="8afa1-194">Assicurarsi che sia selezionata l'opzione **Estrai dati e/o schema da un database esistente** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-194">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span> <span data-ttu-id="8afa1-195">Questo è ciò che fa in modo che gli script SQL vengano generati e eseguiti automaticamente nel database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-195">This is what causes SQL scripts to be automatically generated and run in the destination database.</span></span>

<span data-ttu-id="8afa1-196">La **stringa di connessione per il valore del database di origine** viene estratta dal file *Web. config* e punta al database di sviluppo SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="8afa1-196">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="8afa1-197">Si tratta del database di origine che verrà usato per generare gli script che verranno eseguiti in un secondo momento nel database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-197">This is the source database that will be used to generate the scripts that will run later in the destination database.</span></span> <span data-ttu-id="8afa1-198">Poiché si desidera distribuire la versione di produzione del database, modificare "aspnet-Dev. sdf" in "aspnet-Prod. sdf".</span><span class="sxs-lookup"><span data-stu-id="8afa1-198">Since you want to deploy the production version of the database, change "aspnet-Dev.sdf" to "aspnet-Prod.sdf".</span></span>

<span data-ttu-id="8afa1-199">Modificare le **Opzioni di scripting del database** dallo **schema solo** a **schemi e dati**, dal momento che si desidera copiare i dati (account utente e ruoli), nonché la struttura del database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-199">Change **Database scripting options** from **Schema Only** to **Schema and data**, since you want to copy your data (user accounts and roles) as well as the database structure.</span></span>

<span data-ttu-id="8afa1-200">Per configurare la distribuzione per l'esecuzione degli script di concessione creati in precedenza, è necessario aggiungerli alla sezione **script di database** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-200">To configure deployment to run the grant scripts that you created earlier, you have to add them to the **Database Scripts** section.</span></span> <span data-ttu-id="8afa1-201">Fare clic su **Aggiungi script**e nella finestra di dialogo **Aggiungi script SQL** passare alla cartella in cui è stato archiviato lo script di concessione (si tratta della cartella che contiene il file della soluzione).</span><span class="sxs-lookup"><span data-stu-id="8afa1-201">Click **Add Script**, and in the **Add SQL Scripts** dialog box, navigate to the folder where you stored the grant script (this is the folder that contains your solution file).</span></span> <span data-ttu-id="8afa1-202">Selezionare il file denominato *Grant. SQL*e fare clic su **Apri**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-202">Select the file named *Grant.sql*, and click **Open**.</span></span>

<span data-ttu-id="8afa1-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="8afa1-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span></span>

<span data-ttu-id="8afa1-204">Le impostazioni per la riga **DefaultConnection-Deployment** nelle **voci del database** hanno ora un aspetto simile a quello illustrato nella figura seguente:</span><span class="sxs-lookup"><span data-stu-id="8afa1-204">The settings for the **DefaultConnection-Deployment** row in **Database Entries** now look like the following illustration:</span></span>

![Database_Entry_Details_for_DefaultConnection_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image10.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="8afa1-206">Configurazione delle impostazioni di distribuzione per il database School</span><span class="sxs-lookup"><span data-stu-id="8afa1-206">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="8afa1-207">Selezionare quindi la riga **schoolContext-Deployment** nella tabella delle **voci del database** per configurare le impostazioni di distribuzione per il database School.</span><span class="sxs-lookup"><span data-stu-id="8afa1-207">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure deployment settings for the School database.</span></span>

<span data-ttu-id="8afa1-208">È possibile usare lo stesso metodo usato in precedenza per ottenere la stringa di connessione per il nuovo database di SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="8afa1-208">You can use the same method you used earlier to get the connection string for the new SQL Server Express database.</span></span> <span data-ttu-id="8afa1-209">Copiare questa stringa di connessione nella **stringa di connessione per il database di destinazione** nella scheda **pacchetto/pubblica SQL** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-209">Copy this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample3.cmd)]

<span data-ttu-id="8afa1-210">Assicurarsi che sia selezionata l'opzione **Estrai dati e/o schema da un database esistente** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-210">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span>

<span data-ttu-id="8afa1-211">La **stringa di connessione per il valore del database di origine** viene estratta dal file *Web. config* e punta al database di sviluppo SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="8afa1-211">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="8afa1-212">Modificare "School-Dev. sdf" in "School-Prod. sdf" per distribuire la versione di produzione del database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-212">Change "School-Dev.sdf" to "School-Prod.sdf" to deploy the production version of the database.</span></span> <span data-ttu-id="8afa1-213">Non è mai stato creato un file School-Prod. sdf nella cartella app\_data, quindi copiare il file dall'ambiente di test alla cartella app\_data nella cartella del progetto ContosoUniversity in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="8afa1-213">(You never created a School-Prod.sdf file in the App\_Data folder, so you'll copy that file from the test environment to the App\_Data folder in the ContosoUniversity project folder later.)</span></span>

<span data-ttu-id="8afa1-214">Modificare le **Opzioni di scripting del database per lo** **schema e i dati**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-214">Change **Database scripting options** to **Schema and data**.</span></span>

<span data-ttu-id="8afa1-215">Si vuole anche eseguire lo script per concedere l'autorizzazione di lettura e scrittura per il database all'identità del pool di applicazioni, quindi aggiungere il file di script *Grant. SQL* come è stato fatto per il database delle appartenenze.</span><span class="sxs-lookup"><span data-stu-id="8afa1-215">You also want to run the script to grant read and write permission for this database to the application pool identity, so add the *Grant.sql* script file as you did for the membership database.</span></span>

<span data-ttu-id="8afa1-216">Al termine, le impostazioni per la riga **schoolContext-Deployment** nelle voci del **database** sono simili a quelle illustrate nella figura seguente:</span><span class="sxs-lookup"><span data-stu-id="8afa1-216">When you're done, the settings for the **SchoolContext-Deployment** row in **Database Entries** look like the following illustration:</span></span>

![Database_Entry_Details_for_SchoolContext_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image11.png)

<span data-ttu-id="8afa1-218">Salvare le modifiche apportate alla scheda **pubblicazione/pubblicazione pacchetto SQL** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-218">Save the changes to the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="8afa1-219">Copiare il file *School-prod. sdf* dalla cartella *c:\inetpub\wwwroot\ContosoUniversity\App\_data* alla cartella *app\_data* nel progetto ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="8afa1-219">Copy the *School-Prod.sdf* file from the *c:\inetpub\wwwroot\ContosoUniversity\App\_Data* folder to the *App\_Data* folder in the ContosoUniversity project.</span></span>

### <a name="specifying-transacted-mode-for-the-grant-script"></a><span data-ttu-id="8afa1-220">Specifica della modalità transazionale per lo script Grant</span><span class="sxs-lookup"><span data-stu-id="8afa1-220">Specifying Transacted Mode for the Grant Script</span></span>

<span data-ttu-id="8afa1-221">Il processo di distribuzione genera script che distribuiscono lo schema e i dati del database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-221">The deployment process generates scripts that deploy the database schema and data.</span></span> <span data-ttu-id="8afa1-222">Per impostazione predefinita, questi script vengono eseguiti in una transazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-222">By default, these scripts run in a transaction.</span></span> <span data-ttu-id="8afa1-223">Tuttavia, per impostazione predefinita, gli script personalizzati, come gli script di concessione, non vengono eseguiti in una transazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-223">However, custom scripts (like the grant scripts) by default do not run in a transaction.</span></span> <span data-ttu-id="8afa1-224">Se il processo di distribuzione combina le modalità di transazione, è possibile che si ottenga un errore di timeout quando gli script vengono eseguiti durante la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-224">If the deployment process mixes transaction modes, you might get a timeout error when the scripts run during deployment.</span></span> <span data-ttu-id="8afa1-225">In questa sezione si modifica il file di progetto per configurare gli script personalizzati da eseguire in una transazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-225">In this section, you edit the project file in order to configure the custom scripts to run in a transaction.</span></span>

<span data-ttu-id="8afa1-226">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul progetto **ContosoUniversity** e scegliere **Scarica progetto**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-226">In **Solution Explorer**, right-click the **ContosoUniversity** project and select **Unload Project**.</span></span>

![Unload_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image12.png)

<span data-ttu-id="8afa1-228">Quindi fare di nuovo clic con il pulsante destro del mouse sul progetto e scegliere **modifica ContosoUniversity. csproj**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-228">Then right-click the project again and select **Edit ContosoUniversity.csproj**.</span></span>

![Edit_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image13.png)

<span data-ttu-id="8afa1-230">Nell'editor di Visual Studio viene visualizzato il contenuto XML del file di progetto.</span><span class="sxs-lookup"><span data-stu-id="8afa1-230">The Visual Studio editor shows you the XML content of the project file.</span></span> <span data-ttu-id="8afa1-231">Si noti che sono presenti diversi elementi `PropertyGroup`.</span><span class="sxs-lookup"><span data-stu-id="8afa1-231">Notice that there are several `PropertyGroup` elements.</span></span> <span data-ttu-id="8afa1-232">Nell'immagine il contenuto degli elementi `PropertyGroup` è stato omesso.</span><span class="sxs-lookup"><span data-stu-id="8afa1-232">(In the image, the contents of the `PropertyGroup` elements have been omitted.)</span></span>

![Finestra Editor file di progetto](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image15.png)

<span data-ttu-id="8afa1-234">Il primo, che non ha un attributo `Condition`, è per le impostazioni che si applicano indipendentemente dalla configurazione della build.</span><span class="sxs-lookup"><span data-stu-id="8afa1-234">The first one, which has no `Condition` attribute, is for settings that apply regardless of build configuration.</span></span> <span data-ttu-id="8afa1-235">Un `PropertyGroup` elemento si applica solo alla configurazione della build di debug (si noti l'attributo `Condition`), uno si applica solo alla configurazione della build di rilascio e uno si applica solo alla configurazione della build di test.</span><span class="sxs-lookup"><span data-stu-id="8afa1-235">One `PropertyGroup` element applies only to the Debug build configuration (note the `Condition` attribute), one applies only to the Release build configuration, and one applies only to the Test build configuration.</span></span> <span data-ttu-id="8afa1-236">All'interno dell'elemento `PropertyGroup` per la configurazione della build di rilascio, verrà visualizzato un elemento `PublishDatabaseSettings` che contiene le impostazioni immesse nella scheda **Pubblicazione/creazione pacchetto SQL** . È presente un elemento `Object` che corrisponde a tutti gli script di concessione specificati (si notino le due istanze di "Grant. SQL").</span><span class="sxs-lookup"><span data-stu-id="8afa1-236">Within the `PropertyGroup` element for the Release build configuration, you'll see a `PublishDatabaseSettings` element that contains the settings you entered on the **Package/Publish SQL** tab. There is an `Object` element that corresponds to each of the grant scripts you specified (notice the two instances of "Grant.sql").</span></span> <span data-ttu-id="8afa1-237">Per impostazione predefinita, l'attributo `Transacted` dell'elemento `Source` per ogni script di concessione è `False`.</span><span class="sxs-lookup"><span data-stu-id="8afa1-237">By default, the `Transacted` attribute of the `Source` element for each grant script is `False`.</span></span>

![Transacted_false](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image16.png)

<span data-ttu-id="8afa1-239">Modificare il valore dell'attributo `Transacted` dell'elemento `Source` in `True`.</span><span class="sxs-lookup"><span data-stu-id="8afa1-239">Change the value of the `Transacted` attribute of the `Source` element to `True`.</span></span>

![Transacted_true](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image17.png)

<span data-ttu-id="8afa1-241">Salvare e chiudere il file di progetto, quindi fare clic con il pulsante destro del mouse sul progetto in **Esplora soluzioni** e selezionare **Ricarica progetto**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-241">Save and close the project file, and then right-click the project in **Solution Explorer** and select **Reload Project**.</span></span>

![Reload_project](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image18.png)

## <a name="setting-up-webconfig-transformations-for-the-connection-strings"></a><span data-ttu-id="8afa1-243">Impostazione delle trasformazioni di Web. config per le stringhe di connessione</span><span class="sxs-lookup"><span data-stu-id="8afa1-243">Setting up Web.Config Transformations for the Connection Strings</span></span>

<span data-ttu-id="8afa1-244">Le stringhe di connessione per i nuovi database di SQL Express immessi nella scheda **Pubblicazione/creazione pacchetto SQL** vengono utilizzate da distribuzione Web solo per l'aggiornamento del database di destinazione durante la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-244">The connection strings for the new SQL Express databases that you entered on the **Package/Publish SQL** tab are used by Web Deploy only for updating the destination database during deployment.</span></span> <span data-ttu-id="8afa1-245">È comunque necessario configurare le trasformazioni di *Web. config* in modo che le stringhe di connessione nel file *Web. config* distribuito puntino ai nuovi database di SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="8afa1-245">You still have to set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file point to the new SQL Server Express databases.</span></span> <span data-ttu-id="8afa1-246">Quando si utilizza la scheda **pacchetto/pubblica SQL** , non è possibile configurare le stringhe di connessione nel profilo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-246">(When you use the **Package/Publish SQL** tab, you can't configure connection strings in the publish profile.)</span></span>

<span data-ttu-id="8afa1-247">Aprire *Web. test. config* e sostituire l'elemento `connectionStrings` con l'elemento `connectionStrings` nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="8afa1-247">Open *Web.Test.config* and replace the `connectionStrings` element with the `connectionStrings` element in the following example.</span></span> <span data-ttu-id="8afa1-248">Assicurarsi di copiare solo l'elemento connectionStrings, non il codice circostante riportato qui per fornire il contesto.</span><span class="sxs-lookup"><span data-stu-id="8afa1-248">(Make sure you only copy the connectionStrings element, not the surrounding code that is shown here to provide context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample4.xml?highlight=2-11)]

<span data-ttu-id="8afa1-249">Questo codice fa in modo che gli attributi `connectionString` e `providerName` di ogni elemento `add` vengano sostituiti nel file *Web. config* distribuito.</span><span class="sxs-lookup"><span data-stu-id="8afa1-249">This code causes the `connectionString` and `providerName` attributes of each `add` element to be replaced in the deployed *Web.config* file.</span></span> <span data-ttu-id="8afa1-250">Queste stringhe di connessione non sono identiche a quelle immesse nella scheda **pubblicazione/pubblicazione pacchetto SQL** . È stata aggiunta l'impostazione "MultipleActiveResultSets = true" perché è necessaria per il Entity Framework e il provider universali.</span><span class="sxs-lookup"><span data-stu-id="8afa1-250">These connection strings are not identical to the ones you entered in the **Package/Publish SQL** tab. The setting "MultipleActiveResultSets=True" has been added to them because it's required for the Entity Framework and the Universal Providers.</span></span>

## <a name="installing-sql-server-compact"></a><span data-ttu-id="8afa1-251">Installazione di SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="8afa1-251">Installing SQL Server Compact</span></span>

<span data-ttu-id="8afa1-252">Il pacchetto NuGet SqlServerCompact fornisce gli assembly del motore di database SQL Server Compact per l'applicazione Contoso University.</span><span class="sxs-lookup"><span data-stu-id="8afa1-252">The SqlServerCompact NuGet package provides the SQL Server Compact database engine assemblies for the Contoso University application.</span></span> <span data-ttu-id="8afa1-253">Tuttavia, non si tratta dell'applicazione, ma Distribuzione Web che deve essere in grado di leggere i database SQL Server Compact per creare gli script da eseguire nei database SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8afa1-253">But now it is not the application but Web Deploy that must be able to read the SQL Server Compact databases, in order to create scripts to run in the SQL Server databases.</span></span> <span data-ttu-id="8afa1-254">Per consentire Distribuzione Web di leggere SQL Server Compact database, installare SQL Server Compact nel computer di sviluppo usando il collegamento seguente: [Microsoft SQL Server Compact 4,0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span><span class="sxs-lookup"><span data-stu-id="8afa1-254">To enable Web Deploy to read SQL Server Compact databases, install SQL Server Compact on the development computer by using the following link: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span></span>

## <a name="deploying-to-the-test-environment"></a><span data-ttu-id="8afa1-255">Distribuzione nell'ambiente di test</span><span class="sxs-lookup"><span data-stu-id="8afa1-255">Deploying to the Test Environment</span></span>

<span data-ttu-id="8afa1-256">Per eseguire la pubblicazione nell'ambiente di test, è necessario creare un profilo di pubblicazione configurato per utilizzare la scheda pubblicazione **/creazione pacchetto SQL** per la pubblicazione del database anziché le impostazioni del database del profilo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-256">In order to publish to the Test environment, you have to create a publish profile that is configured to use the **Package/Publish SQL** tab for database publishing instead of the publish profile database settings.</span></span>

<span data-ttu-id="8afa1-257">Prima di tutto, eliminare il profilo di test esistente.</span><span class="sxs-lookup"><span data-stu-id="8afa1-257">First, delete the existing Test profile.</span></span>

<span data-ttu-id="8afa1-258">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul progetto ContosoUniversity e scegliere **pubblica**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-258">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="8afa1-259">Selezionare la scheda **profilo** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-259">Select the **Profile** tab.</span></span>

<span data-ttu-id="8afa1-260">Fare clic su **Manage Profiles** (Gestisci profili).</span><span class="sxs-lookup"><span data-stu-id="8afa1-260">Click **Manage Profiles**.</span></span>

<span data-ttu-id="8afa1-261">Selezionare **test**, fare clic su **Rimuovi**e quindi su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-261">Select **Test**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="8afa1-262">Chiudere la procedura guidata **Pubblica sito Web** per salvare la modifica.</span><span class="sxs-lookup"><span data-stu-id="8afa1-262">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="8afa1-263">Successivamente, creare un nuovo profilo di test e utilizzarlo per pubblicare il progetto.</span><span class="sxs-lookup"><span data-stu-id="8afa1-263">Next, create a new Test profile and use it to publish the project.</span></span>

<span data-ttu-id="8afa1-264">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul progetto ContosoUniversity e scegliere **pubblica**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-264">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="8afa1-265">Selezionare la scheda **profilo** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-265">Select the **Profile** tab.</span></span>

<span data-ttu-id="8afa1-266">Selezionare **&lt;nuova&gt;** dall'elenco a discesa e immettere "test" come nome del profilo.</span><span class="sxs-lookup"><span data-stu-id="8afa1-266">Select **&lt;New...&gt;** from the drop-down list, and enter "Test" as the profile name.</span></span>

<span data-ttu-id="8afa1-267">Nella casella **URL servizio** immettere *localhost*.</span><span class="sxs-lookup"><span data-stu-id="8afa1-267">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="8afa1-268">Nella casella **sito/applicazione** immettere *Default Web site/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="8afa1-268">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="8afa1-269">Nella casella **URL di destinazione** immettere `http://localhost/ContosoUniversity/`.</span><span class="sxs-lookup"><span data-stu-id="8afa1-269">In the **Destination URL** box, enter `http://localhost/ContosoUniversity/`.</span></span>

<span data-ttu-id="8afa1-270">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-270">Click **Next**.</span></span>

<span data-ttu-id="8afa1-271">Nella scheda **Impostazioni** viene visualizzato un avviso indicante che la scheda **Pubblicazione/creazione pacchetto SQL** è stata configurata ed è possibile eseguirne l'override facendo clic su Abilita nuovi miglioramenti alla pubblicazione del database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-271">The **Settings** tab warns you that the **Package/Publish SQL** tab has been configured, and it gives you an opportunity to override them by clicking enable the new database publishing improvements.</span></span> <span data-ttu-id="8afa1-272">Per questa distribuzione non si desidera ignorare le impostazioni della scheda **pubblicazione/pubblicazione pacchetto SQL** , quindi è sufficiente fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-272">For this deployment you don't want to override the **Package/Publish SQL** tab settings, so just click **Next**.</span></span>

![Publish_Web_wizard_Settings_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image19.png)

<span data-ttu-id="8afa1-274">Un messaggio nella scheda **Anteprima** indica che non è stato **selezionato alcun database per la pubblicazione**, ma ciò significa solo che la pubblicazione del database non è configurata nel profilo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-274">A message on the **Preview** tab indicates that **No databases are selected to publish**, but this only means that database publishing is not configured in the publish profile.</span></span>

<span data-ttu-id="8afa1-275">Fare clic su **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-275">Click **Publish**.</span></span>

![Publish_Web_wizard_Preview_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image20.png)

<span data-ttu-id="8afa1-277">Visual Studio distribuisce l'applicazione e apre il browser all'home page del sito nell'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="8afa1-277">Visual Studio deploys the application and opens the browser to the home page of the site in the test environment.</span></span> <span data-ttu-id="8afa1-278">Eseguire la pagina insegnanti per vedere che visualizza gli stessi dati visualizzati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="8afa1-278">Run the Instructors page to see that it displays the same data that you saw earlier.</span></span> <span data-ttu-id="8afa1-279">Eseguire la pagina **Aggiungi studenti** , aggiungere un nuovo studente e visualizzare il nuovo studente nella pagina **students (studenti** ).</span><span class="sxs-lookup"><span data-stu-id="8afa1-279">Run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="8afa1-280">Ciò consente di verificare che sia possibile aggiornare il database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-280">This verifies that the you can update the database.</span></span> <span data-ttu-id="8afa1-281">Selezionare la pagina **Update Credits** (è necessario accedere) per verificare che il database delle appartenenze sia stato distribuito e che sia possibile accedervi.</span><span class="sxs-lookup"><span data-stu-id="8afa1-281">Select the **Update Credits** page (you'll need to log in) to verify that the membership database was deployed and you have access to it.</span></span>

## <a name="creating-a-sql-server-database-for-the-production-environment"></a><span data-ttu-id="8afa1-282">Creazione di un database di SQL Server per l'ambiente di produzione</span><span class="sxs-lookup"><span data-stu-id="8afa1-282">Creating a SQL Server Database for the Production Environment</span></span>

<span data-ttu-id="8afa1-283">Ora che è stata eseguita la distribuzione nell'ambiente di test, si è pronti per configurare la distribuzione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-283">Now that you've deployed to the test environment, you're ready to set up deployment to production.</span></span> <span data-ttu-id="8afa1-284">Si inizia come per l'ambiente di testing creando un database in cui eseguire la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-284">You begin as you did for the test environment, by creating a database to deploy to.</span></span> <span data-ttu-id="8afa1-285">Come è possibile ricordare dalla panoramica, il piano di hosting di Cytanium Lite consente un solo database di SQL Server, quindi è necessario configurare un solo database, non due.</span><span class="sxs-lookup"><span data-stu-id="8afa1-285">As you recall from the Overview, the Cytanium Lite hosting plan only allows a single SQL Server database, so you will set up only one database, not two.</span></span> <span data-ttu-id="8afa1-286">Tutte le tabelle e i dati dei database di appartenenza e dell'Istituto di istruzione SQL Server Compact verranno distribuiti in un database SQL Server in produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-286">All of the tables and data from the membership and School SQL Server Compact databases will be deployed into one SQL Server database in production.</span></span>

<span data-ttu-id="8afa1-287">Passare al pannello di controllo di Cytanium in [http://panel.cytanium.com](http://panel.cytanium.com).</span><span class="sxs-lookup"><span data-stu-id="8afa1-287">Go to the Cytanium control panel at [http://panel.cytanium.com](http://panel.cytanium.com).</span></span> <span data-ttu-id="8afa1-288">Mantenere il puntatore del mouse su **database** , quindi fare clic su **SQL Server 2008**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-288">Hold the mouse over **Databases** and then click **SQL Server 2008**.</span></span>

<span data-ttu-id="8afa1-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="8afa1-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span></span>

<span data-ttu-id="8afa1-290">Nella pagina **SQL Server 2008** fare clic su **Crea database**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-290">In the **SQL Server 2008** page, click **Create Database**.</span></span>

<span data-ttu-id="8afa1-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="8afa1-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span></span>

<span data-ttu-id="8afa1-292">Assegnare un nome al database "School" e fare clic su **Save**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-292">Name the database "School" and click **Save**.</span></span> <span data-ttu-id="8afa1-293">La pagina aggiunge automaticamente il prefisso "contoso", quindi il nome effettivo sarà "contosouSchool".</span><span class="sxs-lookup"><span data-stu-id="8afa1-293">(The page automatically adds the prefix "contosou", so the effective name will be "contosouSchool".)</span></span>

<span data-ttu-id="8afa1-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8afa1-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span></span>

<span data-ttu-id="8afa1-295">Nella stessa pagina fare clic su **Crea utente**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-295">On the same page, click **Create User**.</span></span> <span data-ttu-id="8afa1-296">Nei server di Cytanium, invece di usare la sicurezza integrata di Windows e consentire all'identità del pool di applicazioni di aprire il database, verrà creato un utente con l'autorità per aprire il database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-296">On Cytanium's servers, rather than using integrated Windows security and letting the application pool identity open your database, you'll create a user that has authority to open your database.</span></span> <span data-ttu-id="8afa1-297">Le credenziali dell'utente verranno aggiunte alle stringhe di connessione che vengono inserite nel file *Web. config* di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-297">You'll add the user's credentials to the connection strings that go in the production *Web.config* file.</span></span> <span data-ttu-id="8afa1-298">In questo passaggio vengono create le credenziali.</span><span class="sxs-lookup"><span data-stu-id="8afa1-298">In this step you create those credentials.</span></span>

<span data-ttu-id="8afa1-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="8afa1-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span></span>

<span data-ttu-id="8afa1-300">Compilare i campi obbligatori nella pagina **proprietà utente SQL** :</span><span class="sxs-lookup"><span data-stu-id="8afa1-300">Fill in the required fields in the **SQL User Properties** page:</span></span>

- <span data-ttu-id="8afa1-301">Immettere "ContosoUniversityUser" come nome.</span><span class="sxs-lookup"><span data-stu-id="8afa1-301">Enter "ContosoUniversityUser" as the name.</span></span>
- <span data-ttu-id="8afa1-302">Immettere una password.</span><span class="sxs-lookup"><span data-stu-id="8afa1-302">Enter a password.</span></span>
- <span data-ttu-id="8afa1-303">Selezionare **contosouSchool** come database predefinito.</span><span class="sxs-lookup"><span data-stu-id="8afa1-303">Select **contosouSchool** as the default database.</span></span>
- <span data-ttu-id="8afa1-304">Selezionare la casella di controllo **contosouSchool** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-304">Select the **contosouSchool** check box.</span></span>

<span data-ttu-id="8afa1-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="8afa1-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span></span>

## <a name="configuring-database-deployment-for-the-production-environment"></a><span data-ttu-id="8afa1-306">Configurazione della distribuzione di database per l'ambiente di produzione</span><span class="sxs-lookup"><span data-stu-id="8afa1-306">Configuring Database Deployment for the Production Environment</span></span>

<span data-ttu-id="8afa1-307">A questo punto si è pronti per configurare le impostazioni di distribuzione del database nella scheda **pubblicazione/pubblicazione pacchetto SQL** , come in precedenza per l'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="8afa1-307">Now you're ready to set up database deployment settings in the **Package/Publish SQL** tab, as you did earlier for the test environment.</span></span>

<span data-ttu-id="8afa1-308">Aprire la finestra delle **proprietà del progetto** , selezionare la scheda **pacchetto/pubblica SQL** e assicurarsi che sia selezionata l'opzione **attiva (versione)** o **versione** nell'elenco a discesa **configurazione** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-308">Open the **Project Properties** window, select the **Package/Publish SQL** tab, and make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="8afa1-309">Quando si configurano le impostazioni di distribuzione per ogni database, la differenza principale tra le operazioni eseguite per gli ambienti di produzione e di test è la modalità di configurazione delle stringhe di connessione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-309">When you configure deployment settings for each database, the key difference between what you do for production and test environments is in how you configure connection strings.</span></span> <span data-ttu-id="8afa1-310">Per l'ambiente di test sono state immesse diverse stringhe di connessione al database di destinazione, ma per l'ambiente di produzione la stringa di connessione di destinazione sarà la stessa per entrambi i database.</span><span class="sxs-lookup"><span data-stu-id="8afa1-310">For the test environment you entered different destination database connection strings, but for the production environment the destination connection string will be the same for both databases.</span></span> <span data-ttu-id="8afa1-311">Questo perché si distribuiscono entrambi i database in un database di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-311">This is because you are deploying both databases to one database in production.</span></span>

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="8afa1-312">Configurazione delle impostazioni di distribuzione per il database delle appartenenze</span><span class="sxs-lookup"><span data-stu-id="8afa1-312">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="8afa1-313">Per configurare le impostazioni che si applicano al database di appartenenza, selezionare la riga **DefaultConnection-Deployment** nella tabella **voci di database** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-313">To configure settings that apply to the membership database, select the **DefaultConnection-Deployment** row in the **Database Entries** table.</span></span>

<span data-ttu-id="8afa1-314">In **stringa di connessione per database di destinazione**immettere una stringa di connessione che punta al nuovo database di produzione SQL Server appena creato.</span><span class="sxs-lookup"><span data-stu-id="8afa1-314">In **Connection string for destination database**, enter a connection string that points to the new production SQL Server database that you just created.</span></span> <span data-ttu-id="8afa1-315">È possibile ottenere la stringa di connessione dal messaggio di posta elettronica di benvenuto.</span><span class="sxs-lookup"><span data-stu-id="8afa1-315">You can get the connection string from your welcome email.</span></span> <span data-ttu-id="8afa1-316">La parte pertinente del messaggio di posta elettronica contiene la stringa di connessione di esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="8afa1-316">The relevant part of the email contains the following sample connection string:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample5.cmd)]

<span data-ttu-id="8afa1-317">Dopo aver sostituito le tre variabili, la stringa di connessione necessaria è simile a questo esempio:</span><span class="sxs-lookup"><span data-stu-id="8afa1-317">After you replace the three variables, the connection string you need looks like this example:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample6.cmd)]

<span data-ttu-id="8afa1-318">Copiare e incollare la stringa di connessione nella **stringa di connessione per il database di destinazione** nella scheda **pacchetto/pubblica SQL** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-318">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="8afa1-319">Assicurarsi che **i dati di pull e/o lo schema da un database esistente** siano ancora selezionati e che le **Opzioni di scripting del database** siano ancora **schema e dati**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-319">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="8afa1-320">Nella casella **script di database** deselezionare la casella di controllo accanto allo script Grant. SQL.</span><span class="sxs-lookup"><span data-stu-id="8afa1-320">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

![Disable_Grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image31.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="8afa1-322">Configurazione delle impostazioni di distribuzione per il database School</span><span class="sxs-lookup"><span data-stu-id="8afa1-322">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="8afa1-323">Selezionare quindi la riga **schoolContext-Deployment** nella tabella delle **voci del database** per configurare le impostazioni del database School.</span><span class="sxs-lookup"><span data-stu-id="8afa1-323">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure the School database settings.</span></span>

<span data-ttu-id="8afa1-324">Copiare la stessa stringa di connessione nella **stringa di connessione per il database di destinazione** copiato nel campo per il database delle appartenenze.</span><span class="sxs-lookup"><span data-stu-id="8afa1-324">Copy the same connection string into **Connection string for destination database** that you copied into that field for the membership database.</span></span>

<span data-ttu-id="8afa1-325">Assicurarsi che **i dati di pull e/o lo schema da un database esistente** siano ancora selezionati e che le **Opzioni di scripting del database** siano ancora **schema e dati**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-325">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="8afa1-326">Nella casella **script di database** deselezionare la casella di controllo accanto allo script Grant. SQL.</span><span class="sxs-lookup"><span data-stu-id="8afa1-326">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

<span data-ttu-id="8afa1-327">Salvare le modifiche apportate alla scheda **pubblicazione/pubblicazione pacchetto SQL** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-327">Save the changes to the **Package/Publish SQL** tab.</span></span>

## <a name="setting-up-webconfig-transforms-for-the-connection-strings-to-production-databases"></a><span data-ttu-id="8afa1-328">Impostazione delle trasformazioni di Web. config per le stringhe di connessione nei database di produzione</span><span class="sxs-lookup"><span data-stu-id="8afa1-328">Setting Up Web.Config Transforms for the Connection Strings to Production Databases</span></span>

<span data-ttu-id="8afa1-329">Successivamente, si configureranno le trasformazioni di *Web. config* in modo che le stringhe di connessione nel file *Web. config* distribuito facciano riferimento al nuovo database di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-329">Next, you'll set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file to point to the new production database.</span></span> <span data-ttu-id="8afa1-330">La stringa di connessione immessa nella scheda **pacchetto/pubblica SQL** per distribuzione Web da usare corrisponde a quella usata dall'applicazione, ad eccezione dell'aggiunta dell'opzione `MultipleResultSets`.</span><span class="sxs-lookup"><span data-stu-id="8afa1-330">The connection string that you entered on the **Package/Publish SQL** tab for Web Deploy to use is the same as the one the application needs to use, except for the addition of the `MultipleResultSets` option.</span></span>

<span data-ttu-id="8afa1-331">Aprire *Web. Production. config* e sostituire l'elemento `connectionStrings` con un elemento `connectionStrings` simile all'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="8afa1-331">Open *Web.Production.config* and replace the `connectionStrings` element with a `connectionStrings` element that looks like the following example.</span></span> <span data-ttu-id="8afa1-332">(Copiare solo l'elemento `connectionStrings`, non i tag circostanti forniti per mostrare il contesto).</span><span class="sxs-lookup"><span data-stu-id="8afa1-332">(Only copy the `connectionStrings` element, not the surrounding tags that are provided to show the context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample7.xml?highlight=2-11)]

<span data-ttu-id="8afa1-333">A volte viene visualizzato un Consiglio che indica di crittografare sempre le stringhe di connessione nel file *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="8afa1-333">You sometimes see advice that tells you to always encrypt connection strings in the *Web.config* file.</span></span> <span data-ttu-id="8afa1-334">Questo potrebbe essere appropriato se si stava distribuendo ai server nella rete aziendale.</span><span class="sxs-lookup"><span data-stu-id="8afa1-334">This might be appropriate if you were deploying to servers on your own company's network.</span></span> <span data-ttu-id="8afa1-335">Quando si esegue la distribuzione in un ambiente host condiviso, tuttavia, le procedure di sicurezza del provider di hosting sono attendibili e non è necessario o pratico crittografare le stringhe di connessione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-335">When you are deploying to a shared hosting environment, though, you're trusting the security practices of the hosting provider, and it's not necessary or practical to encrypt the connection strings.</span></span>

## <a name="deploying-to-the-production-environment"></a><span data-ttu-id="8afa1-336">Distribuzione nell'ambiente di produzione</span><span class="sxs-lookup"><span data-stu-id="8afa1-336">Deploying to the Production Environment</span></span>

<span data-ttu-id="8afa1-337">A questo punto si è pronti per la distribuzione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-337">Now you're ready to deploy to production.</span></span> <span data-ttu-id="8afa1-338">Distribuzione Web leggerà i database SQL Server Compact nella cartella *App\_data* del progetto e creerà di nuovo tutte le tabelle e i dati nel database di SQL Server di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-338">Web Deploy will read the SQL Server Compact databases in your project's *App\_Data* folder and re-create all of their tables and data in the production SQL Server database.</span></span> <span data-ttu-id="8afa1-339">Per eseguire la pubblicazione utilizzando le impostazioni della scheda **Pubblicazione/creazione pacchetto Web** , è necessario creare un nuovo profilo di pubblicazione per la produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-339">In order to publish by using the **Package/Publish Web** tab settings, you have to create a new publish profile for production.</span></span>

<span data-ttu-id="8afa1-340">Prima di tutto, eliminare il profilo di produzione esistente come il profilo di test precedente.</span><span class="sxs-lookup"><span data-stu-id="8afa1-340">First, delete the existing Production profile as you did the Test profile earlier.</span></span>

<span data-ttu-id="8afa1-341">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul progetto ContosoUniversity e scegliere **pubblica**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-341">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="8afa1-342">Selezionare la scheda **profilo** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-342">Select the **Profile** tab.</span></span>

<span data-ttu-id="8afa1-343">Fare clic su **Manage Profiles** (Gestisci profili).</span><span class="sxs-lookup"><span data-stu-id="8afa1-343">Click **Manage Profiles**.</span></span>

<span data-ttu-id="8afa1-344">Selezionare **produzione**, fare clic su **Rimuovi**e quindi su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-344">Select **Production**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="8afa1-345">Chiudere la procedura guidata **Pubblica sito Web** per salvare la modifica.</span><span class="sxs-lookup"><span data-stu-id="8afa1-345">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="8afa1-346">Successivamente, creare un nuovo profilo di produzione e utilizzarlo per pubblicare il progetto.</span><span class="sxs-lookup"><span data-stu-id="8afa1-346">Next, create a new Production profile and use it to publish the project.</span></span>

<span data-ttu-id="8afa1-347">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul progetto ContosoUniversity e scegliere **pubblica**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-347">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="8afa1-348">Selezionare la scheda **profilo** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-348">Select the **Profile** tab.</span></span>

<span data-ttu-id="8afa1-349">Fare clic su **Importa**e selezionare il file con estensione publishsettings scaricato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="8afa1-349">Click **Import**, and select the .publishsettings file that you downloaded earlier.</span></span>

<span data-ttu-id="8afa1-350">Nella scheda **connessione** modificare l'URL di **destinazione** con l'URL temporaneo corretto, che in questo esempio è http://contosouniversity.com.vserver01.cytanium.com.</span><span class="sxs-lookup"><span data-stu-id="8afa1-350">On the **Connection** tab, change the **Destination URL** to the correct temporary URL, which in this example is http://contosouniversity.com.vserver01.cytanium.com.</span></span>

<span data-ttu-id="8afa1-351">Rinominare il profilo in produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-351">Rename the profile to Production.</span></span> <span data-ttu-id="8afa1-352">Selezionare la scheda **profilo** e fare clic su **Gestisci profili** a tale scopo.</span><span class="sxs-lookup"><span data-stu-id="8afa1-352">(Select the **Profile** tab and click **Manage Profiles** to do that).</span></span>

<span data-ttu-id="8afa1-353">Chiudere la procedura guidata **Pubblica sito Web** per salvare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="8afa1-353">Close the **Publish Web** wizard to save your changes.</span></span>

<span data-ttu-id="8afa1-354">In un'applicazione reale in cui il database è stato aggiornato in produzione, è necessario eseguire due passaggi aggiuntivi prima di pubblicare:</span><span class="sxs-lookup"><span data-stu-id="8afa1-354">In a real application in which the database was being updated in production, you would do two additional steps now before you publish:</span></span>

1. <span data-ttu-id="8afa1-355">Caricare l' *app\_offline. htm*, come illustrato nell'esercitazione [Deploying to the production environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) .</span><span class="sxs-lookup"><span data-stu-id="8afa1-355">Upload *app\_offline.htm*, as shown in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span></span>
2. <span data-ttu-id="8afa1-356">Usare la funzionalità **file Manager** del pannello di controllo Cytanium per copiare i file *ASPNET-prod. sdf* e *School-prod. sdf* dal sito di produzione alla cartella *app\_data* del progetto ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="8afa1-356">Use the **File Manager** feature of the Cytanium control panel to copy the *aspnet-Prod.sdf* and *School-Prod.sdf* files from the production site to the *App\_Data* folder of the ContosoUniversity project.</span></span> <span data-ttu-id="8afa1-357">Ciò garantisce che i dati distribuiti nel nuovo database di SQL Server includano gli ultimi aggiornamenti effettuati dal sito Web di produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-357">This ensures that the data you're deploying to the new SQL Server database includes the latest updates made by your production website.</span></span>

<span data-ttu-id="8afa1-358">Nella barra degli strumenti **pubblica sul Web fare clic su pubblica** , verificare che il profilo di **produzione** sia selezionato, quindi fare clic su **pubblica**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-358">In the **Web One Click Publish** toolbar, make sure that the **Production** profile is selected, and then click **Publish**.</span></span>

<span data-ttu-id="8afa1-359">Se l'app è stata caricata <em>\_offline. htm</em> prima della pubblicazione, è necessario usare l'utilità <strong>file Manager</strong> nel pannello di controllo Cytanium per eliminare l' <em>app\_offline.</em> htm prima di eseguire il test.</span><span class="sxs-lookup"><span data-stu-id="8afa1-359">If you uploaded <em>app\_offline.htm</em> before publishing, you have to use the <strong>File Manager</strong> utility in the Cytanium control panel to delete <em>app\_offline.</em>htm before you test.</span></span> <span data-ttu-id="8afa1-360">È anche possibile eliminare contemporaneamente i file <em>SDF</em> dalla cartella <em>app\_data</em> .</span><span class="sxs-lookup"><span data-stu-id="8afa1-360">You can also at the same time delete the <em>.sdf</em> files from the <em>App\_Data</em> folder.</span></span>

<span data-ttu-id="8afa1-361">È ora possibile aprire un browser e passare all'URL del sito pubblico per testare l'applicazione nello stesso modo in cui è stato eseguito dopo la distribuzione nell'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="8afa1-361">You can now open a browser and go to the URL of your public site to test the application the same way you did after deploying to the test environment.</span></span>

## <a name="switching-to-sql-server-express-localdb-in-development"></a><span data-ttu-id="8afa1-362">Passare a SQL Server Express database locale nello sviluppo</span><span class="sxs-lookup"><span data-stu-id="8afa1-362">Switching to SQL Server Express LocalDB in Development</span></span>

<span data-ttu-id="8afa1-363">Come illustrato nella panoramica, in genere è preferibile usare lo stesso motore di database in fase di sviluppo da usare per il test e la produzione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-363">As was explained in the Overview, it's generally best to use the same database engine in development that you use in test and production.</span></span> <span data-ttu-id="8afa1-364">Tenere presente che il vantaggio dell'utilizzo di SQL Server Express in fase di sviluppo è che il database funziona nello stesso modo negli ambienti di sviluppo, test e produzione. In questa sezione verrà configurato il progetto ContosoUniversity per l'uso di SQL Server Express database locale quando si esegue l'applicazione da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8afa1-364">(Remember that the advantage to using SQL Server Express in development is that the database will work the same in your development, test, and production environments.) In this section you'll set up the ContosoUniversity project to use SQL Server Express LocalDB when you run the application from Visual Studio.</span></span>

<span data-ttu-id="8afa1-365">Il modo più semplice per eseguire questa migrazione è consentire a Code First e al sistema di appartenenza di creare i nuovi database di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="8afa1-365">The simplest way to perform this migration is to let Code First and the membership system create both new development databases for you.</span></span> <span data-ttu-id="8afa1-366">L'utilizzo di questo metodo per eseguire la migrazione richiede tre passaggi:</span><span class="sxs-lookup"><span data-stu-id="8afa1-366">Using this method to migrate requires three steps:</span></span>

1. <span data-ttu-id="8afa1-367">Modificare le stringhe di connessione per specificare nuovi database del database locale di SQL Express.</span><span class="sxs-lookup"><span data-stu-id="8afa1-367">Change the connection strings to specify new SQL Express LocalDB databases.</span></span>
2. <span data-ttu-id="8afa1-368">Eseguire lo strumento Amministrazione sito Web per creare un utente amministratore.</span><span class="sxs-lookup"><span data-stu-id="8afa1-368">Run the Web Site Administration Tool to create an administrator user.</span></span> <span data-ttu-id="8afa1-369">Verrà creato il database delle appartenenze.</span><span class="sxs-lookup"><span data-stu-id="8afa1-369">This creates the membership database.</span></span>
3. <span data-ttu-id="8afa1-370">Usare il comando Migrazioni Code First Update-database per creare e inizializzare il database dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="8afa1-370">Use the Code First Migrations update-database command to create and seed the application database.</span></span>

### <a name="updating-connection-strings-in-the-webconfig-file"></a><span data-ttu-id="8afa1-371">Aggiornamento delle stringhe di connessione nel file Web. config</span><span class="sxs-lookup"><span data-stu-id="8afa1-371">Updating Connection Strings in the Web.config file</span></span>

<span data-ttu-id="8afa1-372">Aprire il file *Web. config* e sostituire l'elemento `connectionStrings` con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="8afa1-372">Open the *Web.config* file and replace the `connectionStrings` element with the following code:</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample8.xml)]

### <a name="creating-the-membership-database"></a><span data-ttu-id="8afa1-373">Creazione del database di appartenenza</span><span class="sxs-lookup"><span data-stu-id="8afa1-373">Creating the Membership Database</span></span>

<span data-ttu-id="8afa1-374">In **Esplora soluzioni**selezionare il progetto ContosoUniversity e quindi fare clic su **configurazione ASP.NET** nel menu **progetto** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-374">In **Solution Explorer**, select the ContosoUniversity project, and then click **ASP.NET Configuration** in the **Project** menu.</span></span>

<span data-ttu-id="8afa1-375">Selezionare la scheda Sicurezza.</span><span class="sxs-lookup"><span data-stu-id="8afa1-375">Select the Security tab.</span></span>

<span data-ttu-id="8afa1-376">Fare clic su **Crea o Gestisci ruoli**, quindi creare un ruolo di **amministratore** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-376">Click **Create or Manage Roles**, and then create an **Administrator** role.</span></span>

<span data-ttu-id="8afa1-377">Tornare alla scheda sicurezza.</span><span class="sxs-lookup"><span data-stu-id="8afa1-377">Return to the Security tab.</span></span>

<span data-ttu-id="8afa1-378">Fare clic su **Crea utente**, quindi selezionare la casella di controllo **amministratore** e creare un utente denominato admin.</span><span class="sxs-lookup"><span data-stu-id="8afa1-378">Click **Create user**, and then select the **Administrator** check box and create a user named admin.</span></span>

<span data-ttu-id="8afa1-379">Chiudere lo **strumento Amministrazione sito Web**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-379">Close the **Web Site Administration Tool**.</span></span>

### <a name="creating-the-school-database"></a><span data-ttu-id="8afa1-380">Creazione del database School</span><span class="sxs-lookup"><span data-stu-id="8afa1-380">Creating the School Database</span></span>

<span data-ttu-id="8afa1-381">Aprire la finestra console di gestione pacchetti.</span><span class="sxs-lookup"><span data-stu-id="8afa1-381">Open the Package Manager Console window.</span></span>

<span data-ttu-id="8afa1-382">Nell'elenco a discesa **progetto predefinito** selezionare il progetto CONTOSOUNIVERSITY. dal.</span><span class="sxs-lookup"><span data-stu-id="8afa1-382">In the **Default project** drop-down list, select the ContosoUniversity.DAL project.</span></span>

<span data-ttu-id="8afa1-383">Immettere il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="8afa1-383">Enter the following command:</span></span>

[!code-powershell[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample9.ps1)]

<span data-ttu-id="8afa1-384">Migrazioni Code First applica la migrazione iniziale che crea il database e quindi applica la migrazione AddBirthDate, quindi esegue il metodo Seed.</span><span class="sxs-lookup"><span data-stu-id="8afa1-384">Code First Migrations applies the Initial migration that creates the database and then applies the AddBirthDate migration, then it runs the Seed method.</span></span>

<span data-ttu-id="8afa1-385">Eseguire il sito premendo CTRL-F5.</span><span class="sxs-lookup"><span data-stu-id="8afa1-385">Run the site by pressing Control-F5.</span></span> <span data-ttu-id="8afa1-386">Come per gli ambienti di test e di produzione, eseguire la pagina **Aggiungi studenti** , aggiungere un nuovo studente, quindi visualizzare il nuovo studente nella pagina **students (studenti** ).</span><span class="sxs-lookup"><span data-stu-id="8afa1-386">As you did for the test and production environments, run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="8afa1-387">In questo modo si verifica che il database School sia stato creato e inizializzato e che l'utente disponga dell'accesso in lettura e scrittura.</span><span class="sxs-lookup"><span data-stu-id="8afa1-387">This verifies that the School database was created and initialized and that you have read and write access to it.</span></span>

<span data-ttu-id="8afa1-388">Selezionare la pagina di **aggiornamento crediti** e accedere per verificare che il database di appartenenza sia stato distribuito e che sia possibile accedervi.</span><span class="sxs-lookup"><span data-stu-id="8afa1-388">Select the **Update Credits** page and log in to verify that the membership database was deployed and that you have access to it.</span></span> <span data-ttu-id="8afa1-389">Se non è stata eseguita la migrazione degli account utente, creare un account amministratore e quindi selezionare la pagina **crediti di aggiornamento** per verificarne il funzionamento.</span><span class="sxs-lookup"><span data-stu-id="8afa1-389">If you did not migrate your user accounts, create an administrator account and then select the **Update Credits** page to verify that it works.</span></span>

## <a name="cleaning-up-sql-server-compact-files"></a><span data-ttu-id="8afa1-390">Pulizia dei file di SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="8afa1-390">Cleaning Up SQL Server Compact Files</span></span>

<span data-ttu-id="8afa1-391">Non sono più necessari i file e i pacchetti NuGet inclusi per supportare SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="8afa1-391">You no longer need files and NuGet packages that were included to support SQL Server Compact.</span></span> <span data-ttu-id="8afa1-392">Se si desidera (questo passaggio non è obbligatorio), è possibile eliminare i file e i riferimenti non necessari.</span><span class="sxs-lookup"><span data-stu-id="8afa1-392">If you want (this step is not required), you can clean up unneeded files and references.</span></span>

<span data-ttu-id="8afa1-393">In **Esplora soluzioni**eliminare i file *con estensione sdf* dalla cartella *app\_data* e dalle cartelle *amd64* e *x86* dalla cartella *bin* .</span><span class="sxs-lookup"><span data-stu-id="8afa1-393">In **Solution Explorer**, delete the *.sdf* files from the *App\_Data* folder and the *amd64* and *x86* folders from the *bin* folder.</span></span>

<span data-ttu-id="8afa1-394">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sulla soluzione, non su uno dei progetti, quindi fare clic su **Gestisci pacchetti NuGet per la soluzione**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-394">In **Solution Explorer**, right-click the solution (not one of the projects), and then click **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="8afa1-395">Nel riquadro sinistro della finestra di dialogo **Gestisci pacchetti NuGet** selezionare **pacchetti installati**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-395">In the left pane of the **Manage NuGet Packages** dialog box, select **Installed packages**.</span></span>

<span data-ttu-id="8afa1-396">Selezionare il pacchetto **EntityFramework. SqlServerCompact** e fare clic su **Gestisci**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-396">Select the **EntityFramework.SqlServerCompact** package and click **Manage**.</span></span>

<span data-ttu-id="8afa1-397">Nella finestra di dialogo **Seleziona progetti** è selezionato entrambi i progetti.</span><span class="sxs-lookup"><span data-stu-id="8afa1-397">In the **Select Projects** dialog box, both projects are selected.</span></span> <span data-ttu-id="8afa1-398">Per disinstallare il pacchetto in entrambi i progetti, deselezionare entrambe le caselle di controllo, quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="8afa1-398">To uninstall the package in both projects, clear both check boxes, then click **OK**.</span></span>

<span data-ttu-id="8afa1-399">Nella finestra di dialogo in cui viene chiesto se si desidera disinstallare anche i pacchetti dipendenti, fare clic su No.</span><span class="sxs-lookup"><span data-stu-id="8afa1-399">In the dialog box that asks if you want to uninstall the dependent packages also, click No.</span></span> <span data-ttu-id="8afa1-400">Uno di questi è il pacchetto di Entity Framework che è necessario gestire.</span><span class="sxs-lookup"><span data-stu-id="8afa1-400">One of these is the Entity Framework package that you have to keep.</span></span>

<span data-ttu-id="8afa1-401">Seguire la stessa procedura per disinstallare il pacchetto **SqlServerCompact** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-401">Follow the same procedure to uninstall the **SqlServerCompact** package.</span></span> <span data-ttu-id="8afa1-402">I pacchetti devono essere disinstallati in questo ordine perché il pacchetto **EntityFramework. SqlServerCompact** dipende dal pacchetto **SqlServerCompact** .</span><span class="sxs-lookup"><span data-stu-id="8afa1-402">(The packages must be uninstalled in this order because the **EntityFramework.SqlServerCompact** package depends on the **SqlServerCompact** package.)</span></span>

<span data-ttu-id="8afa1-403">La migrazione a SQL Server Express e SQL Server completa è stata completata.</span><span class="sxs-lookup"><span data-stu-id="8afa1-403">You have now successfully migrated to SQL Server Express and full SQL Server.</span></span> <span data-ttu-id="8afa1-404">Nell'esercitazione successiva verrà apportata una modifica a un altro database e verrà illustrato come distribuire le modifiche al database quando i database di test e produzione utilizzano SQL Server Express e SQL Server completi.</span><span class="sxs-lookup"><span data-stu-id="8afa1-404">In the next tutorial you'll make another database change, and you'll see how to deploy database changes when your test and production databases use SQL Server Express and full SQL Server.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8afa1-405">[Precedente](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
> [Successivo](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="8afa1-405">[Previous](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span></span>
