---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
title: Configurazione dell'applicazione Web di produzione per l'uso del database di produzione (VB) | Microsoft Docs
author: rick-anderson
description: Come illustrato nelle esercitazioni precedenti, non è insolito che le informazioni di configurazione differiscano tra gli ambienti di sviluppo e di produzione. Si tratta di es...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: a64a7aa0-6608-449e-83bf-1ef8cceee504
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
msc.type: authoredcontent
ms.openlocfilehash: 7fe4f545a76992ad687827af447d9a9e95bea73f
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78636227"
---
# <a name="configuring-the-production-web-application-to-use-the-production-database-vb"></a><span data-ttu-id="14574-104">Configurazione dell'applicazione Web di produzione per l'uso del database di produzione (VB)</span><span class="sxs-lookup"><span data-stu-id="14574-104">Configuring the Production Web Application to Use the Production Database (VB)</span></span>

<span data-ttu-id="14574-105">di [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="14574-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="14574-106">[Scarica codice](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) o [Scarica PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="14574-106">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span></span>

> <span data-ttu-id="14574-107">Come illustrato nelle esercitazioni precedenti, non è insolito che le informazioni di configurazione differiscano tra gli ambienti di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-107">As discussed in earlier tutorials, it is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="14574-108">Ciò vale soprattutto per le applicazioni Web basate sui dati, in quanto le stringhe di connessione del database sono diverse tra gli ambienti di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-108">This is especially true for data-driven web applications, as the database connection strings differ between the development and production environments.</span></span> <span data-ttu-id="14574-109">Questa esercitazione illustra come configurare l'ambiente di produzione per includere la stringa di connessione appropriata in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="14574-109">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="introduction"></a><span data-ttu-id="14574-110">Introduzione</span><span class="sxs-lookup"><span data-stu-id="14574-110">Introduction</span></span>

<span data-ttu-id="14574-111">Le applicazioni Web basate sui dati utilizzano in genere un database diverso in fase di sviluppo rispetto alla fase di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-111">Data-driven web applications usually use a different database when in development than when in production.</span></span> <span data-ttu-id="14574-112">Per le applicazioni ospitate da un provider host Web e sviluppate localmente, il database di sviluppo si trova in genere nel computer dello sviluppatore mentre il database di produzione è ospitato in un server di database nella struttura della società di hosting Web.</span><span class="sxs-lookup"><span data-stu-id="14574-112">For applications hosted by a web host provider and developed locally, the development database typically resides on the developer s computer while the production database is hosted on a database server at the web hosting company s facility.</span></span> <span data-ttu-id="14574-113">La distribuzione di un'applicazione Web basata sui dati comporta la copia del database di sviluppo nel server di database di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-113">Deploying a data-driven web application entails copying the development database to the production database server.</span></span> <span data-ttu-id="14574-114">Nell'esercitazione precedente sono stati esaminati i modi per eseguire questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="14574-114">In the previous tutorial we looked at ways to accomplish this step.</span></span>

<span data-ttu-id="14574-115">L'applicazione Web utilizza le informazioni contenute in una *stringa di connessione* per stabilire una connessione con il database.</span><span class="sxs-lookup"><span data-stu-id="14574-115">The web application uses the information in a *connection string* to establish a connection with the database.</span></span> <span data-ttu-id="14574-116">La stringa di connessione, che in genere è archiviata in `Web.config`, specifica il nome del server di database, il nome del database, il contesto di sicurezza e altre informazioni.</span><span class="sxs-lookup"><span data-stu-id="14574-116">The connection string, which is typically stored in `Web.config`, specifies the database server name, the name of the database, the security context, and other information.</span></span> <span data-ttu-id="14574-117">Poiché il database utilizzato dall'applicazione Web dipende dal fatto che l'applicazione Web sia in esecuzione negli ambienti di sviluppo o di produzione, le stringhe di connessione devono essere diverse tra i due ambienti.</span><span class="sxs-lookup"><span data-stu-id="14574-117">Because the database used by the web application depends on whether the web application is running in the development or production environments, the connection strings must differ between the two environments.</span></span>

<span data-ttu-id="14574-118">Non è insolito che le informazioni di configurazione differiscano tra gli ambienti di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-118">It is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="14574-119">Le *differenze di configurazione comuni tra l'esercitazione di sviluppo e produzione* illustrano le tecniche per la gestione di informazioni di configurazione separate tra questi due ambienti, oltre a una breve discussione sulle stringhe di connessione del database.</span><span class="sxs-lookup"><span data-stu-id="14574-119">The *Common Configuration Differences Between Development and Production* tutorial discussed techniques for maintaining separate configuration information between these two environments, as well as a brief discussion on database connection strings.</span></span> <span data-ttu-id="14574-120">Questa esercitazione illustra come configurare l'ambiente di produzione per includere la stringa di connessione appropriata in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="14574-120">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="examining-the-connection-string-information"></a><span data-ttu-id="14574-121">Analisi delle informazioni sulla stringa di connessione</span><span class="sxs-lookup"><span data-stu-id="14574-121">Examining the Connection String Information</span></span>

<span data-ttu-id="14574-122">La stringa di connessione utilizzata dall'applicazione Web Book revisioni è archiviata nel file di configurazione dell'applicazione, `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="14574-122">The connection string used by the Book Reviews web application is stored in the application s configuration file, `Web.config`.</span></span> <span data-ttu-id="14574-123">`Web.config` include una sezione speciale per l'archiviazione delle stringhe di connessione, denominate [&lt;connectionstrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span><span class="sxs-lookup"><span data-stu-id="14574-123">`Web.config` includes a special section for storing connection strings, aptly named [&lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span></span> <span data-ttu-id="14574-124">Il file di `Web.config` per il sito Web di recensioni Book dispone di una stringa di connessione definita in questa sezione denominata `ReviewsConnectionString`:</span><span class="sxs-lookup"><span data-stu-id="14574-124">The `Web.config` file for the Book Reviews website has one connection string defined in this section named `ReviewsConnectionString`:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample1.xml)]

<span data-ttu-id="14574-125">Stringa di connessione-Data Source = .\SQLEXPRESS; AttachDbFilename = | DataDirectory | \Reviews.MDF; sicurezza integrata = true; Utente Instance = true-è costituito da un numero di opzioni e valori, con coppie di opzioni/valori delimitate da un punto e virgola e ogni opzione e valore delimitati da un segno di uguale.</span><span class="sxs-lookup"><span data-stu-id="14574-125">The connection string - Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Reviews.mdf;Integrated Security=True;User Instance=True - is composed of a number of options and values, with option/value pairs delimited by a semicolon and each option and value delimited by an equals sign.</span></span> <span data-ttu-id="14574-126">Le quattro opzioni usate in questa stringa di connessione sono:</span><span class="sxs-lookup"><span data-stu-id="14574-126">The four options used in this connection string are:</span></span>

- <span data-ttu-id="14574-127">`Data Source`: specifica il percorso del server di database e il nome dell'istanza del server di database (se presente).</span><span class="sxs-lookup"><span data-stu-id="14574-127">`Data Source` - specifies the location of the database server and the database server instance name (if any).</span></span> <span data-ttu-id="14574-128">Il valore, `.\SQLEXPRESS`, è un esempio in cui sono presenti un server di database e un nome di istanza.</span><span class="sxs-lookup"><span data-stu-id="14574-128">The value, `.\SQLEXPRESS`, is an example where there is a database server and an instance name.</span></span> <span data-ttu-id="14574-129">Il periodo specifica che il server di database si trova nello stesso computer dell'applicazione; il nome dell'istanza è `SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="14574-129">The period specifies that the database server is on the same computer as the application; the instance name is `SQLEXPRESS`.</span></span>
- <span data-ttu-id="14574-130">`AttachDbFilename`: specifica il percorso del file di database.</span><span class="sxs-lookup"><span data-stu-id="14574-130">`AttachDbFilename` - specifies the location of the database file.</span></span> <span data-ttu-id="14574-131">Il valore contiene il segnaposto `|DataDirectory|`, che viene risolto nel percorso completo della cartella di `App_Data` dell'applicazione in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="14574-131">The value contains the placeholder `|DataDirectory|`, which is resolved to the full path of the application s `App_Data` folder at runtime.</span></span>
- <span data-ttu-id="14574-132">`Integrated Security`: valore booleano che indica se utilizzare un nome utente/password specificato durante la connessione al database (false) o le credenziali dell'account di Windows corrente (true).</span><span class="sxs-lookup"><span data-stu-id="14574-132">`Integrated Security` - a Boolean value that indicates whether to use a specified username/password when connecting to the database (false) or the current Windows account credentials (true).</span></span>
- <span data-ttu-id="14574-133">`User Instance`: un'opzione di configurazione specifica per le edizioni SQL Server Express che indica se consentire agli utenti non amministratori nel computer locale di connettersi e connettersi a un database di SQL Server Express Edition.</span><span class="sxs-lookup"><span data-stu-id="14574-133">`User Instance` - a configuration option specific to the SQL Server Express Editions that indicates whether to allow non-Administrative users on the local computer attach and connect to a SQL Server Express Edition database.</span></span> <span data-ttu-id="14574-134">Per ulteriori informazioni su questa impostazione, vedere [SQL Server Express istanze utente](https://msdn.microsoft.com/library/ms254504.aspx) .</span><span class="sxs-lookup"><span data-stu-id="14574-134">See [SQL Server Express User Instances](https://msdn.microsoft.com/library/ms254504.aspx) for more information on this setting.</span></span>

<span data-ttu-id="14574-135">Le opzioni della stringa di connessione consentite dipendono dal database a cui ci si connette e dal provider di database [ADO.NET](http://ADO.NET) in uso.</span><span class="sxs-lookup"><span data-stu-id="14574-135">The allowable connection string options depend on the database you are connecting to and the [ADO.NET](http://ADO.NET) database provider being used.</span></span> <span data-ttu-id="14574-136">La stringa di connessione per la connessione a un database di Microsoft SQL Server, ad esempio, è diversa da quella utilizzata per connettersi a un database Oracle.</span><span class="sxs-lookup"><span data-stu-id="14574-136">For example, the connection string for connecting to a Microsoft SQL Server database differs from that used to connect to an Oracle database.</span></span> <span data-ttu-id="14574-137">Analogamente, la connessione a un database di Microsoft SQL Server utilizzando il provider SqlClient utilizza una stringa di connessione diversa rispetto a quando si utilizza il provider OLE DB.</span><span class="sxs-lookup"><span data-stu-id="14574-137">Likewise, connecting to a Microsoft SQL Server database using the SqlClient provider uses a different connection string than when using the OLE-DB provider.</span></span>

<span data-ttu-id="14574-138">È possibile compilare manualmente la stringa di connessione del database usando un sito come [connectionStrings.com](http://www.connectionstrings.com/) come risorsa per le opzioni disponibili.</span><span class="sxs-lookup"><span data-stu-id="14574-138">You can build the database connection string by hand using a site like [ConnectionStrings.com](http://www.connectionstrings.com/) as a resource for what options are available.</span></span> <span data-ttu-id="14574-139">Tuttavia, un approccio più semplice consiste nell'aggiungere il database al Esplora server in Visual Studio e quindi acquisire la stringa di connessione dal Finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="14574-139">However, an easier approach is to add the database to the Server Explorer in Visual Studio and then to grab the connection string from the Properties window.</span></span> <span data-ttu-id="14574-140">È possibile utilizzare questa seconda tecnica per costruire la stringa di connessione al server di database di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-140">Let s use this latter technique for constructing the connection string to the production database server.</span></span>

<span data-ttu-id="14574-141">Aprire Visual Studio e passare alla finestra Esplora server (in Visual Web Developer questa finestra è denominata Esplora database).</span><span class="sxs-lookup"><span data-stu-id="14574-141">Open Visual Studio and then navigate to the Server Explorer window (in Visual Web Developer, this window is called Database Explorer).</span></span> <span data-ttu-id="14574-142">Fare clic con il pulsante destro del mouse sull'opzione connessioni dati e scegliere l'opzione Aggiungi connessione dal menu di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="14574-142">Right-click on the Data Connections option and choose the Add Connection option from the context menu.</span></span> <span data-ttu-id="14574-143">Viene visualizzata la procedura guidata illustrata nella figura 1.</span><span class="sxs-lookup"><span data-stu-id="14574-143">This brings up the wizard shown in Figure 1.</span></span> <span data-ttu-id="14574-144">Scegliere l'origine dati appropriata e fare clic su continua.</span><span class="sxs-lookup"><span data-stu-id="14574-144">Choose the appropriate data source and click Continue.</span></span>

<span data-ttu-id="14574-145">[![scegliere di aggiungere un nuovo database al Esplora server](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="14574-145">[![Choose to Add a New Database to the Server Explorer](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span></span> 

<span data-ttu-id="14574-146">**Figura 1**: scegliere di aggiungere un nuovo Database al Esplora server ([fare clic per visualizzare l'immagine con dimensioni complete](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="14574-146">**Figure 1**: Choose to Add a New Database to the Server Explorer ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span></span>

<span data-ttu-id="14574-147">Specificare quindi le varie informazioni di connessione al database (vedere la figura 2).</span><span class="sxs-lookup"><span data-stu-id="14574-147">Next, specify the various database connection information (see Figure 2).</span></span> <span data-ttu-id="14574-148">Quando ci si è iscritti con la società di hosting Web, è necessario fornire informazioni su come connettersi al database, ovvero il nome del server di database, il nome del database, il nome utente e la password da utilizzare per la connessione al database e così via.</span><span class="sxs-lookup"><span data-stu-id="14574-148">When you signed up with your web hosting company they should have provided information on how to connect to the database - the database server name, the database name, the username and password to use to connect to the database, and so on.</span></span> <span data-ttu-id="14574-149">Dopo aver immesso queste informazioni, fare clic su OK per completare la procedura guidata e aggiungere il database al Esplora server.</span><span class="sxs-lookup"><span data-stu-id="14574-149">After entering this information click OK to complete this wizard and to add the database to the Server Explorer.</span></span>

<span data-ttu-id="14574-150">[![specificare le informazioni di connessione al database](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="14574-150">[![Specify the Database Connection Information](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span></span> 

<span data-ttu-id="14574-151">**Figura 2**: specificare le informazioni di connessione al database ([fare clic per visualizzare l'immagine con dimensioni complete](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="14574-151">**Figure 2**: Specify the Database Connection Information ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="14574-152">Il database dell'ambiente di produzione dovrebbe ora essere elencato nella Esplora server.</span><span class="sxs-lookup"><span data-stu-id="14574-152">The production environment database should now be listed in the Server Explorer.</span></span> <span data-ttu-id="14574-153">Selezionare il database dal Esplora server e passare al Finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="14574-153">Select the database from the Server Explorer and go to the Properties window.</span></span> <span data-ttu-id="14574-154">Qui sarà disponibile una proprietà denominata stringa di connessione con la stringa di connessione del database.</span><span class="sxs-lookup"><span data-stu-id="14574-154">There you will find a property named Connection String with the database s connection string.</span></span> <span data-ttu-id="14574-155">Supponendo che si stia usando un database di Microsoft SQL Server in produzione e il provider SqlClient, la stringa di connessione dovrebbe avere un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="14574-155">Assuming you are using a Microsoft SQL Server database on production and the SqlClient provider your connection string should look similar to the following:</span></span>

<span data-ttu-id="14574-156"><strong>Origine dati =<em>ServerName</em>; Catalogo iniziale =<em>DatabaseName</em>; Mantieni informazioni di sicurezza = true; ID utente =<em>nomeutente</em>; Password =*password</strong>*</span><span class="sxs-lookup"><span data-stu-id="14574-156"><strong>Data Source=<em>serverName</em>; Initial Catalog=<em>databaseName</em>; Persist Security Info=True; User ID=<em>username</em>; Password=*password</strong>*</span></span>

<span data-ttu-id="14574-157">Dove *nomeserver*, *DatabaseName*, *username*e *password* sono con i valori per il nome del server di database, il nome del database e il nome utente e la password forniti dall'azienda dell'host Web.</span><span class="sxs-lookup"><span data-stu-id="14574-157">Where *serverName*, *databaseName*, *username*, and *password* are with the values for the database server name, the database name, and the username and password supplied to you by your web host company.</span></span>

## <a name="deploying-the-book-reviews-web-application"></a><span data-ttu-id="14574-158">Distribuzione dell'applicazione Web Book revisioni</span><span class="sxs-lookup"><span data-stu-id="14574-158">Deploying the Book Reviews Web Application</span></span>

<span data-ttu-id="14574-159">Nell'esercitazione precedente è stata eseguita la copia del database di sviluppo nell'ambiente di produzione, ma non è stata esplorata la distribuzione dell'applicazione basata sui dati.</span><span class="sxs-lookup"><span data-stu-id="14574-159">The preceding tutorial stepped through copying the development database to the production environment, but did not explore deploying the data-driven application.</span></span> <span data-ttu-id="14574-160">A questo punto l'ambiente di produzione contiene il database, ma usa la versione dell'applicazione Book revisioni con le verifiche statiche.</span><span class="sxs-lookup"><span data-stu-id="14574-160">At this point the production environment contains the database but is using the version of the Book Reviews application with static reviews.</span></span> <span data-ttu-id="14574-161">È necessario distribuire la nuova applicazione basata sui dati nel server di produzione insieme alle informazioni di configurazione aggiornate.</span><span class="sxs-lookup"><span data-stu-id="14574-161">We need to deploy the new, data-driven application to the production server along with the updated configuration information.</span></span>

<span data-ttu-id="14574-162">Si consiglia di distribuire l'applicazione basata sui dati dall'ambiente di sviluppo alla produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-162">Take a moment to deploy the data-driven application from the development environment to production.</span></span> <span data-ttu-id="14574-163">Questo processo è stato analizzato in dettaglio nelle esercitazioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="14574-163">This process was covered in detail in previous tutorials.</span></span> <span data-ttu-id="14574-164">Se è necessario un aggiornamento, vedere la pagina relativa alla *distribuzione del sito Web tramite un client FTP* o la *distribuzione del sito Web con* le esercitazioni di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="14574-164">If you need a refresher, see the *Deploying Your Website Using an FTP Client* or the *Deploying Your Website Using Visual Studio* tutorials.</span></span> <span data-ttu-id="14574-165">È necessario assicurarsi che la stringa di connessione del database di produzione sia quella usata nell'ambiente di produzione, il che significa che è necessario distribuire un file di `Web.config` alternativo.</span><span class="sxs-lookup"><span data-stu-id="14574-165">You will need to ensure that the production database connection string is the one used in the production environment, which means that an alternate `Web.config` file must be deployed.</span></span> <span data-ttu-id="14574-166">In particolare, l'elemento `<connectionStrings>` `Web.config` file modificato deve contenere la stringa di connessione del database di produzione e dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="14574-166">Specifically, this modified `Web.config` file s `<connectionStrings>` element needs to contain the production database connection string and should look similar to the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample2.xml)]

<span data-ttu-id="14574-167">Si noti che la stringa di connessione nell'elemento `<connectionStrings>` ha lo stesso nome (`ReviewsConnectionString`), ma ora contiene la stringa di connessione al database di produzione invece della stringa di connessione del database di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="14574-167">Note that the connection string in the `<connectionStrings>` element is named the same (`ReviewsConnectionString`), but now contains the production database connection string instead of the development database connection string.</span></span>

<span data-ttu-id="14574-168">A meno che non si disponga di un flusso di lavoro di distribuzione più formalizzato, modificare manualmente il file di `Web.config` per utilizzare la stringa di connessione del database di produzione prima di distribuire (ricordandosi di ripristinarlo nuovamente utilizzando la stringa di connessione del database di sviluppo) o mantenere un file `Web.config` separato con le informazioni di configurazione dell'ambiente di produzione che vengono caricate nell'ambiente di produzione come parte del processo</span><span class="sxs-lookup"><span data-stu-id="14574-168">Unless you have a more formalized deployment workflow, either manually modify the `Web.config` file to use the production database connection string before deploying (remembering to revert it back to using the development database connection string afterwards) or maintain a separate `Web.config` file with the production environment configuration information that gets uploaded to the production environment as part of the deployment process.</span></span>

> [!NOTE]
> <span data-ttu-id="14574-169">Se si distribuisce accidentalmente un file di `Web.config` contenente la stringa di connessione del database di sviluppo, si verifica un errore quando l'applicazione in fase di produzione tenta di connettersi al database.</span><span class="sxs-lookup"><span data-stu-id="14574-169">If you accidentally deploy a `Web.config` file that contains the development database connection string then there will be an error when the application on production attempts to connect to the database.</span></span> <span data-ttu-id="14574-170">Questo errore si manifesta come `SqlException` con un messaggio che segnala che il server non è stato trovato o non è accessibile.</span><span class="sxs-lookup"><span data-stu-id="14574-170">This error manifests as a `SqlException` with a message reporting that the server was not found or was not accessible.</span></span>

<span data-ttu-id="14574-171">Una volta che il sito è stato distribuito in produzione, visitare il sito di produzione tramite il browser.</span><span class="sxs-lookup"><span data-stu-id="14574-171">Once the site has been deployed to production, visit the production site through your browser.</span></span> <span data-ttu-id="14574-172">Quando si esegue l'applicazione basata sui dati in locale, dovrebbe essere visualizzata e apprezzata la stessa esperienza utente.</span><span class="sxs-lookup"><span data-stu-id="14574-172">You should see and enjoy the same user experience as when running the data-driven application locally.</span></span> <span data-ttu-id="14574-173">Naturalmente, quando si visita il sito Web in produzione, il sito viene alimentato dal server di database di produzione, mentre visitare il sito Web nell'ambiente di sviluppo usa il database in fase di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="14574-173">Of course when you visit the website on production the site is powered by the production database server, whereas visiting the website in the development environment uses the database in development.</span></span> <span data-ttu-id="14574-174">Nella figura 3 viene illustrata la pagina di revisione *ASP.NET 3,5 in 24 ore* dal sito Web nell'ambiente di produzione. si noti l'URL nella barra degli indirizzi del browser.</span><span class="sxs-lookup"><span data-stu-id="14574-174">Figure 3 shows the *Teach Yourself ASP.NET 3.5 in 24 Hours* review page from the website in the production environment (note the URL in the browser s Address bar).</span></span>

<span data-ttu-id="14574-175">[![l'applicazione basata sui dati è ora disponibile nell'ambiente di produzione.](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="14574-175">[![The Data-Driven Application is Now Available On Production!](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span></span> 

<span data-ttu-id="14574-176">**Figura 3**: l'applicazione basata sui dati è ora disponibile nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-176">**Figure 3**: The Data-Driven Application is Now Available On Production!</span></span> <span data-ttu-id="14574-177">([Fare clic per visualizzare l'immagine con dimensioni complete](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="14574-177">([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span></span>

### <a name="storing-connection-strings-in-a-separate-configuration-file"></a><span data-ttu-id="14574-178">Archiviazione di stringhe di connessione in un file di configurazione separato</span><span class="sxs-lookup"><span data-stu-id="14574-178">Storing Connection Strings in a Separate Configuration File</span></span>

<span data-ttu-id="14574-179">Una tecnica comune per la gestione di informazioni di configurazione separate negli ambienti di sviluppo e di produzione consiste nel disporre di due versioni del `Web.config`: una per l'ambiente di sviluppo e una per la produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-179">A common technique for maintaining separate configuration information on the development and production environments is to have two versions of the `Web.config`: one for the development environment and one for production.</span></span> <span data-ttu-id="14574-180">In fase di distribuzione è possibile copiare la versione `Web.config` appropriata nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-180">At deploy-time the appropriate `Web.config` version can be copied to the production environment.</span></span> <span data-ttu-id="14574-181">Idealmente, questo processo viene automatizzato come parte del flusso di lavoro di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="14574-181">Ideally, this process would be automated as part of the deployment workflow.</span></span>

<span data-ttu-id="14574-182">Anziché mantenere due file di `Web.config` distinti, facoltativamente, è possibile fornire differenze più granulari.</span><span class="sxs-lookup"><span data-stu-id="14574-182">Instead of maintaining two separate `Web.config` files you can, optionally, provide more granular differences.</span></span> <span data-ttu-id="14574-183">Gli elementi che costituiscono il file di `Web.config` possono essere definiti in un file di configurazione esterno a cui viene fatto riferimento nel file di `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="14574-183">The elements that make up the `Web.config` file can be defined in an external configuration files that are then referenced in the `Web.config` file.</span></span> <span data-ttu-id="14574-184">In breve, è possibile disporre di un file di `Web.config` per entrambi gli ambienti che fa riferimento a un file databaseConnectionStrings. config, che conterrà le stringhe di connessione utilizzate dall'applicazione e sarebbe univoco per ogni ambiente.</span><span class="sxs-lookup"><span data-stu-id="14574-184">In a nutshell you can have one `Web.config` file for both environments that references a databaseConnectionStrings.config file, which would contain the connection strings used by the application and would be unique for each environment.</span></span> <span data-ttu-id="14574-185">Ho scoperto che la separazione delle diverse informazioni di configurazione in file distinti fornisce un file di `Web.config` più semplice e ordinato e descrive in modo più chiaro le differenze di configurazione tra gli ambienti di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-185">I find that separating the differing configuration information into separate files provides a tidier and simpler `Web.config` file and more clearly outlines the configuration differences between the development and production environments.</span></span>

<span data-ttu-id="14574-186">Per utilizzare questa tecnica, iniziare creando una nuova cartella nell'applicazione Web denominata `ConfigSections`.</span><span class="sxs-lookup"><span data-stu-id="14574-186">To use this technique, start by creating a new folder in the web application named `ConfigSections`.</span></span> <span data-ttu-id="14574-187">Aggiungere quindi due file alla nuova cartella denominata databaseConnectionStrings. dev. config e databaseConnectionStrings. Production. config. Copiare quindi l'elemento `<connectionStrings>` da `Web.config` nei file databaseConnectionStrings. dev. config e databaseConnectionStrings. Production. config, quindi modificare la stringa di connessione nel file databaseConnectionStrings. Production. config in modo che specifichi la stringa di connessione del database di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-187">Next, add two files to this new folder named databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config. Next, copy the `<connectionStrings>` element from `Web.config` into the databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files, and then modify the connection string in the databaseConnectionStrings.production.config file so that it specifies the production database connection string.</span></span> <span data-ttu-id="14574-188">Ad esempio, il file databaseConnectionStrings. dev. config deve contenere solo l'elemento `<connectionStrings>` con una stringa di connessione che fa riferimento al database di sviluppo:</span><span class="sxs-lookup"><span data-stu-id="14574-188">For example, the databaseConnectionStrings.dev.config file should contain just the `<connectionStrings>` element with a connection string that references the development database:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample3.xml)]

<span data-ttu-id="14574-189">Analogamente, il file databaseConnectionStrings. Production. config deve contenere solo un elemento `<connectionStrings>`, ma uno con la stringa di connessione del database di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-189">Similarly, the databaseConnectionStrings.production.config file should contain just a `<connectionStrings>` element, but one that has the production database connection string.</span></span>

<span data-ttu-id="14574-190">Creare una copia del file databaseConnectionStrings. dev. config e denominarla databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="14574-190">Make a copy of the databaseConnectionStrings.dev.config file and name it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="14574-191">È possibile assegnare un nome al file di configurazione diverso da databaseConnectionStrings. config, se si desidera, ad esempio `connectionStrings.config` o `dbInfo.config`.</span><span class="sxs-lookup"><span data-stu-id="14574-191">You can name the configuration file something other than databaseConnectionStrings.config, if you d like, such as `connectionStrings.config` or `dbInfo.config`.</span></span> <span data-ttu-id="14574-192">Tuttavia, assicurarsi di denominare il file con un'estensione `.config` come `.config` i file sono, per impostazione predefinita, non serviti dal motore ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="14574-192">However, be sure to name the file with a `.config` extension as `.config` files are, by default, not served by the ASP.NET engine.</span></span> <span data-ttu-id="14574-193">Se si assegna un nome al file in un altro modo, ad esempio `connectionStrings.txt`, un utente potrebbe puntare il browser a [www.yoursite.com/configsettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) e visualizzare il contenuto del file.</span><span class="sxs-lookup"><span data-stu-id="14574-193">If you name the file something else, like `connectionStrings.txt`, a user could point their browser to [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) and view the contents of the file!</span></span>

<span data-ttu-id="14574-194">A questo punto la cartella `ConfigSections` deve contenere tre file (vedere la figura 4).</span><span class="sxs-lookup"><span data-stu-id="14574-194">At this point the `ConfigSections` folder should contain three files (see Figure 4).</span></span> <span data-ttu-id="14574-195">I file databaseConnectionStrings. dev. config e databaseConnectionStrings. Production. config contengono rispettivamente le stringhe di connessione per gli ambienti di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-195">The databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files contain the connection strings for the development and production environments, respectively.</span></span> <span data-ttu-id="14574-196">Il file databaseConnectionStrings. config contiene le informazioni sulla stringa di connessione che verranno utilizzate dall'applicazione Web in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="14574-196">The databaseConnectionStrings.config file contains the connection string information that will be used by the web application at runtime.</span></span> <span data-ttu-id="14574-197">Di conseguenza, il file databaseConnectionStrings. config deve essere identico al file databaseConnectionStrings. dev. config nell'ambiente di sviluppo, mentre in fase di produzione il file databaseConnectionStrings. config deve essere identico a databaseConnectionStrings. Production. config.</span><span class="sxs-lookup"><span data-stu-id="14574-197">Consequently, the databaseConnectionStrings.config file should be identical to the databaseConnectionStrings.dev.config file in the development environment, whereas on production the databaseConnectionStrings.config file should be identical to databaseConnectionStrings.production.config.</span></span>

<span data-ttu-id="14574-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="14574-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span></span> 

<span data-ttu-id="14574-199">**Figura 4**: ConfigSections ([fare clic per visualizzare l'immagine con dimensioni complete](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="14574-199">**Figure 4**: ConfigSections ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span></span>

<span data-ttu-id="14574-200">È ora necessario indicare `Web.config` per usare il file databaseConnectionStrings. config per l'archivio delle stringhe di connessione.</span><span class="sxs-lookup"><span data-stu-id="14574-200">We now need to instruct `Web.config` to use the databaseConnectionStrings.config file for its connection string store.</span></span> <span data-ttu-id="14574-201">Aprire `Web.config` e sostituire l'elemento `<connectionStrings>` esistente con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="14574-201">Open `Web.config` and replace the existing `<connectionStrings>` element with the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample4.xml)]

<span data-ttu-id="14574-202">L'attributo `configSource` specifica un percorso fisico relativo al file di `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="14574-202">The `configSource` attribute specifies a physical path relative to the `Web.config` file.</span></span> <span data-ttu-id="14574-203">Se il file di `.config` esterno si trova nella stessa directory di `Web.config`, impostare questo attributo sul nome file del `.config` file.</span><span class="sxs-lookup"><span data-stu-id="14574-203">If the external `.config` file is in the same directory as `Web.config` then set this attribute to the file name of the `.config` file.</span></span> <span data-ttu-id="14574-204">Se si trova in una sottodirectory, come nel caso di databaseConnectionStrings. config, specificare la sottocartella usando una barra rovesciata per delimitare la cartella e i nomi file, ad esempio ConfigSections\databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="14574-204">If it s in a subdirectory, as is the case with databaseConnectionStrings.config, specify the subfolder using a backslash to delimit the folder and file names, like ConfigSections\databaseConnectionStrings.config.</span></span>

<span data-ttu-id="14574-205">Con questa modifica, gli ambienti di sviluppo e produzione contengono lo stesso file di `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="14574-205">With this modification, the development and production environments contain the same `Web.config` file.</span></span> <span data-ttu-id="14574-206">A questo punto l'unica differenza è il file databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="14574-206">Now the only difference is the databaseConnectionStrings.config file.</span></span> <span data-ttu-id="14574-207">Copiare il file databaseConnectionStrings. Production. config in produzione e rinominarlo in databaseConnectionStrings. config. Se, in futuro, sono presenti modifiche alla stringa di connessione al database di produzione, sarà necessario inserirle nel file databaseConnectionStrings. Production. config e quindi caricare il file nell'ambiente di produzione, rinominarlo databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="14574-207">Copy the databaseConnectionStrings.production.config file to production and rename it to databaseConnectionStrings.config. If, in the future, there are changes to the production database connection string you will need to make them to the databaseConnectionStrings.production.config file and then upload that file to production, renaming it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="14574-208">È possibile specificare le informazioni per qualsiasi elemento `Web.config` in un file separato e utilizzare l'attributo `configSource` per fare riferimento a tale file dall'interno `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="14574-208">You may specify the information for any `Web.config` element in a separate file and use the `configSource` attribute to reference that file from within `Web.config`.</span></span>

## <a name="summary"></a><span data-ttu-id="14574-209">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="14574-209">Summary</span></span>

<span data-ttu-id="14574-210">Le applicazioni basate sui dati utilizzano in genere database diversi negli ambienti di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="14574-210">Data-driven applications usually use different databases in the development and production environments.</span></span> <span data-ttu-id="14574-211">Di conseguenza, le stringhe di connessione del database archiviate nella configurazione dell'applicazione Web devono essere univoche per ogni ambiente.</span><span class="sxs-lookup"><span data-stu-id="14574-211">Consequently, the database connection strings stored in the web application s configuration must be unique per environment.</span></span> <span data-ttu-id="14574-212">In questa esercitazione è stato illustrato come determinare la stringa di connessione al database di produzione e i modi per mantenere le informazioni univoche sulle stringhe di connessione nei due ambienti.</span><span class="sxs-lookup"><span data-stu-id="14574-212">In this tutorial we looked at how to determine the production database connection string and ways to maintain unique connection string information in the two environments.</span></span>

<span data-ttu-id="14574-213">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="14574-213">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="14574-214">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="14574-214">Further Reading</span></span>

<span data-ttu-id="14574-215">Per ulteriori informazioni sugli argomenti trattati in questa esercitazione, fare riferimento alle risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="14574-215">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="14574-216">Stringhe di connessione e file di configurazione</span><span class="sxs-lookup"><span data-stu-id="14574-216">Connection Strings and Configuration Files</span></span>](https://msdn.microsoft.com/library/ms254494.aspx)
- [<span data-ttu-id="14574-217">Informazioni sulle stringhe di configurazione del database @ ConnectionStrings.com</span><span class="sxs-lookup"><span data-stu-id="14574-217">Database Configuration Strings Information @ ConnectionStrings.com</span></span>](http://www.connectionstrings.com/)
- [<span data-ttu-id="14574-218">Spostare le impostazioni dal file Web. config</span><span class="sxs-lookup"><span data-stu-id="14574-218">Move Settings Out of the Web.config File</span></span>](http://www.asp101.com/tips/index.asp?id=154)
- [<span data-ttu-id="14574-219">Documentazione tecnica per l'elemento &lt;connectionStrings&gt;</span><span class="sxs-lookup"><span data-stu-id="14574-219">Technical Documentation for the &lt;connectionStrings&gt; Element</span></span>](https://msdn.microsoft.com/library/bf7sd233.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="14574-220">[Precedente](deploying-a-database-vb.md)
> [Successivo](configuring-a-website-that-uses-application-services-vb.md)</span><span class="sxs-lookup"><span data-stu-id="14574-220">[Previous](deploying-a-database-vb.md)
[Next](configuring-a-website-that-uses-application-services-vb.md)</span></span>
