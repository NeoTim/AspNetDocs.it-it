---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
title: Configurazione dell'applicazione Web di produzione per usare il Database di produzione (VB) | Microsoft Docs
author: rick-anderson
description: Come illustrato nelle esercitazioni precedenti, non è insolito per le informazioni di configurazione in modo diverso tra gli ambienti di sviluppo e produzione. Si tratta di es...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: a64a7aa0-6608-449e-83bf-1ef8cceee504
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
msc.type: authoredcontent
ms.openlocfilehash: 3d6e25de44a7c84ef0919d1cfd8ab4c6b368e0ea
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57058528"
---
<a name="configuring-the-production-web-application-to-use-the-production-database-vb"></a><span data-ttu-id="e70fb-104">Configurazione dell'applicazione Web di produzione per l'uso del database di produzione (VB)</span><span class="sxs-lookup"><span data-stu-id="e70fb-104">Configuring the Production Web Application to Use the Production Database (VB)</span></span>
====================
<span data-ttu-id="e70fb-105">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="e70fb-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e70fb-106">[Scaricare il codice](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) o [Scarica il PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="e70fb-106">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span></span>

> <span data-ttu-id="e70fb-107">Come illustrato nelle esercitazioni precedenti, non è insolito per le informazioni di configurazione in modo diverso tra gli ambienti di sviluppo e produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-107">As discussed in earlier tutorials, it is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="e70fb-108">Ciò vale soprattutto per le applicazioni web basate sui dati, come le stringhe di connessione del database differiscono tra ambienti di sviluppo e produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-108">This is especially true for data-driven web applications, as the database connection strings differ between the development and production environments.</span></span> <span data-ttu-id="e70fb-109">Questa esercitazione illustra alcuni modi per configurare l'ambiente di produzione in modo da includere la stringa di connessione appropriate in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="e70fb-109">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>


## <a name="introduction"></a><span data-ttu-id="e70fb-110">Introduzione</span><span class="sxs-lookup"><span data-stu-id="e70fb-110">Introduction</span></span>

<span data-ttu-id="e70fb-111">Le applicazioni web basate sui dati, in genere, utilizzare un database diverso quando in fase di sviluppo rispetto a quando nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-111">Data-driven web applications usually use a different database when in development than when in production.</span></span> <span data-ttu-id="e70fb-112">Per le applicazioni ospitate da un provider di hosting web e sviluppato in locale, lo sviluppo in genere si trova il database nel computer s dello sviluppatore mentre il database di produzione è ospitato in un server di database alla struttura s società di hosting web.</span><span class="sxs-lookup"><span data-stu-id="e70fb-112">For applications hosted by a web host provider and developed locally, the development database typically resides on the developer s computer while the production database is hosted on a database server at the web hosting company s facility.</span></span> <span data-ttu-id="e70fb-113">Distribuzione di un'applicazione web basata sui dati vengono copiati nel database di sviluppo al server di database di produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-113">Deploying a data-driven web application entails copying the development database to the production database server.</span></span> <span data-ttu-id="e70fb-114">Nell'esercitazione precedente abbiamo esaminato modi per eseguire questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="e70fb-114">In the previous tutorial we looked at ways to accomplish this step.</span></span>

<span data-ttu-id="e70fb-115">L'applicazione web Usa le informazioni contenute in un *stringa di connessione* per stabilire una connessione con il database.</span><span class="sxs-lookup"><span data-stu-id="e70fb-115">The web application uses the information in a *connection string* to establish a connection with the database.</span></span> <span data-ttu-id="e70fb-116">La stringa di connessione, che in genere viene archiviata in `Web.config`, specifica il nome del server di database, il nome del database, il contesto di sicurezza e altre informazioni.</span><span class="sxs-lookup"><span data-stu-id="e70fb-116">The connection string, which is typically stored in `Web.config`, specifies the database server name, the name of the database, the security context, and other information.</span></span> <span data-ttu-id="e70fb-117">Poiché il database utilizzato dall'applicazione web dipende dal fatto che l'applicazione web è in esecuzione negli ambienti di sviluppo o produzione, le stringhe di connessione devono essere diversa tra i due ambienti.</span><span class="sxs-lookup"><span data-stu-id="e70fb-117">Because the database used by the web application depends on whether the web application is running in the development or production environments, the connection strings must differ between the two environments.</span></span>

<span data-ttu-id="e70fb-118">Non è insolito per le informazioni di configurazione in modo diverso tra gli ambienti di sviluppo e produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-118">It is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="e70fb-119">Il *differenze di configurazione comuni tra sviluppo e produzione* esercitazione illustrato le tecniche per la gestione delle informazioni di configurazione separato tra questi due ambienti, nonché una breve discussione su stringhe di connessione di database.</span><span class="sxs-lookup"><span data-stu-id="e70fb-119">The *Common Configuration Differences Between Development and Production* tutorial discussed techniques for maintaining separate configuration information between these two environments, as well as a brief discussion on database connection strings.</span></span> <span data-ttu-id="e70fb-120">Questa esercitazione illustra alcuni modi per configurare l'ambiente di produzione in modo da includere la stringa di connessione appropriate in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="e70fb-120">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="examining-the-connection-string-information"></a><span data-ttu-id="e70fb-121">Esaminare le informazioni sulla stringa di connessione</span><span class="sxs-lookup"><span data-stu-id="e70fb-121">Examining the Connection String Information</span></span>

<span data-ttu-id="e70fb-122">La stringa di connessione utilizzata dall'applicazione web le recensioni dei libri è archiviata nel file di configurazione dell'applicazione s, `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="e70fb-122">The connection string used by the Book Reviews web application is stored in the application s configuration file, `Web.config`.</span></span> <span data-ttu-id="e70fb-123">`Web.config` include una sezione speciale per l'archiviazione delle stringhe di connessione, il nome appropriato [ &lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span><span class="sxs-lookup"><span data-stu-id="e70fb-123">`Web.config` includes a special section for storing connection strings, aptly named [&lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span></span> <span data-ttu-id="e70fb-124">Il `Web.config` file per il sito Web le recensioni dei libri è una stringa di connessione definita in questa sezione denominata `ReviewsConnectionString`:</span><span class="sxs-lookup"><span data-stu-id="e70fb-124">The `Web.config` file for the Book Reviews website has one connection string defined in this section named `ReviewsConnectionString`:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample1.xml)]

<span data-ttu-id="e70fb-125">La stringa di connessione - origine dati =. \SQLEXPRESS; AttachDbFilename = | DataDirectory|\Reviews.mdf;Integrated Security = True; User Instance = True: è costituito da un numero di opzioni e i valori, con coppie di opzione/valore delimitate da punto e virgola e ogni opzione e il valore delimitate da un segno di uguale.</span><span class="sxs-lookup"><span data-stu-id="e70fb-125">The connection string - Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Reviews.mdf;Integrated Security=True;User Instance=True - is composed of a number of options and values, with option/value pairs delimited by a semicolon and each option and value delimited by an equals sign.</span></span> <span data-ttu-id="e70fb-126">Le quattro opzioni usate nella stringa di connessione sono:</span><span class="sxs-lookup"><span data-stu-id="e70fb-126">The four options used in this connection string are:</span></span>

- <span data-ttu-id="e70fb-127">`Data Source` -Specifica il percorso del server di database e il nome dell'istanza server database (se presente).</span><span class="sxs-lookup"><span data-stu-id="e70fb-127">`Data Source` - specifies the location of the database server and the database server instance name (if any).</span></span> <span data-ttu-id="e70fb-128">Il valore, `.\SQLEXPRESS`, è riportato un esempio in cui è presente un server di database e un nome di istanza.</span><span class="sxs-lookup"><span data-stu-id="e70fb-128">The value, `.\SQLEXPRESS`, is an example where there is a database server and an instance name.</span></span> <span data-ttu-id="e70fb-129">Il periodo di specifica che il server di database è nello stesso computer come applicazione. il nome dell'istanza è `SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="e70fb-129">The period specifies that the database server is on the same computer as the application; the instance name is `SQLEXPRESS`.</span></span>
- <span data-ttu-id="e70fb-130">`AttachDbFilename` -Specifica il percorso del file di database.</span><span class="sxs-lookup"><span data-stu-id="e70fb-130">`AttachDbFilename` - specifies the location of the database file.</span></span> <span data-ttu-id="e70fb-131">Il valore contiene il segnaposto `|DataDirectory|`, che viene risolto il percorso completo di s applicazione `App_Data` cartella in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-131">The value contains the placeholder `|DataDirectory|`, which is resolved to the full path of the application s `App_Data` folder at runtime.</span></span>
- <span data-ttu-id="e70fb-132">`Integrated Security` -un valore booleano che indica se utilizzare un nome utente/password specificata durante la connessione al database (false) o di Windows corrente le credenziali dell'account (true).</span><span class="sxs-lookup"><span data-stu-id="e70fb-132">`Integrated Security` - a Boolean value that indicates whether to use a specified username/password when connecting to the database (false) or the current Windows account credentials (true).</span></span>
- <span data-ttu-id="e70fb-133">`User Instance` -un'opzione di configurazione specifica per edizioni di SQL Server Express che indica se consentire agli utenti senza privilegi di amministratore nel computer locale collegarsi e connettersi a un database di SQL Server Express Edition.</span><span class="sxs-lookup"><span data-stu-id="e70fb-133">`User Instance` - a configuration option specific to the SQL Server Express Editions that indicates whether to allow non-Administrative users on the local computer attach and connect to a SQL Server Express Edition database.</span></span> <span data-ttu-id="e70fb-134">Visualizzare [istanze di SQL Server Express utente](https://msdn.microsoft.com/library/ms254504.aspx) per altre informazioni su questa impostazione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-134">See [SQL Server Express User Instances](https://msdn.microsoft.com/library/ms254504.aspx) for more information on this setting.</span></span>
  

<span data-ttu-id="e70fb-135">Le opzioni di stringa di connessione consentite variano a seconda del database a cui ci si connette a e il [ADO.NET](http://ADO.NET) provider del database utilizzato.</span><span class="sxs-lookup"><span data-stu-id="e70fb-135">The allowable connection string options depend on the database you are connecting to and the [ADO.NET](http://ADO.NET) database provider being used.</span></span> <span data-ttu-id="e70fb-136">Ad esempio, la stringa di connessione per la connessione a Microsoft SQL Server database è diverso da usare per connettersi a un database Oracle.</span><span class="sxs-lookup"><span data-stu-id="e70fb-136">For example, the connection string for connecting to a Microsoft SQL Server database differs from that used to connect to an Oracle database.</span></span> <span data-ttu-id="e70fb-137">Allo stesso modo, ci si connette a un database di Microsoft SQL Server tramite il provider SqlClient utilizza una stringa di connessione diversa rispetto all'uso di provider OLE DB.</span><span class="sxs-lookup"><span data-stu-id="e70fb-137">Likewise, connecting to a Microsoft SQL Server database using the SqlClient provider uses a different connection string than when using the OLE-DB provider.</span></span>

<span data-ttu-id="e70fb-138">È possibile compilare la stringa di connessione di database manualmente utilizzando un sito, ad esempio [ConnectionStrings.com](http://www.connectionstrings.com/) come una risorsa per i quali sono le opzioni sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="e70fb-138">You can build the database connection string by hand using a site like [ConnectionStrings.com](http://www.connectionstrings.com/) as a resource for what options are available.</span></span> <span data-ttu-id="e70fb-139">Tuttavia, un approccio più semplice consiste nell'aggiungere il database in Esplora Server in Visual Studio e quindi recuperare la stringa di connessione dalla finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="e70fb-139">However, an easier approach is to add the database to the Server Explorer in Visual Studio and then to grab the connection string from the Properties window.</span></span> <span data-ttu-id="e70fb-140">Consentire s usare questa tecnica quest'ultima per costruire la stringa di connessione al server di database di produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-140">Let s use this latter technique for constructing the connection string to the production database server.</span></span>

<span data-ttu-id="e70fb-141">Aprire Visual Studio e quindi passare alla finestra di Esplora Server (in Visual Web Developer, questa finestra è denominata Database Explorer).</span><span class="sxs-lookup"><span data-stu-id="e70fb-141">Open Visual Studio and then navigate to the Server Explorer window (in Visual Web Developer, this window is called Database Explorer).</span></span> <span data-ttu-id="e70fb-142">Fare doppio clic sull'opzione connessioni dati e scegliere l'opzione Aggiungi connessione dal menu di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="e70fb-142">Right-click on the Data Connections option and choose the Add Connection option from the context menu.</span></span> <span data-ttu-id="e70fb-143">Verrà visualizzata la procedura guidata illustrata nella figura 1.</span><span class="sxs-lookup"><span data-stu-id="e70fb-143">This brings up the wizard shown in Figure 1.</span></span> <span data-ttu-id="e70fb-144">Scegliere l'origine dati appropriata e fare clic su Continua.</span><span class="sxs-lookup"><span data-stu-id="e70fb-144">Choose the appropriate data source and click Continue.</span></span>


<span data-ttu-id="e70fb-145">[![Scegliere di aggiungere un nuovo Database in Esplora Server](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="e70fb-145">[![Choose to Add a New Database to the Server Explorer](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span></span> 

<span data-ttu-id="e70fb-146">**Figura 1**: Scegliere di aggiungere un nuovo Database in Esplora Server ([fare clic per visualizzare l'immagine con dimensioni normali](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="e70fb-146">**Figure 1**: Choose to Add a New Database to the Server Explorer ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span></span>


<span data-ttu-id="e70fb-147">Successivamente, specificare i vari database le informazioni di connessione (vedere la figura 2).</span><span class="sxs-lookup"><span data-stu-id="e70fb-147">Next, specify the various database connection information (see Figure 2).</span></span> <span data-ttu-id="e70fb-148">Quando si è effettuata l'iscrizione con la società di hosting web si devono fornite informazioni su come connettersi al database - il nome del server di database, il nome del database, il nome utente e password da usare per connettersi al database e così via.</span><span class="sxs-lookup"><span data-stu-id="e70fb-148">When you signed up with your web hosting company they should have provided information on how to connect to the database - the database server name, the database name, the username and password to use to connect to the database, and so on.</span></span> <span data-ttu-id="e70fb-149">Dopo aver immesso queste informazioni fare clic su OK per completare questa procedura guidata e aggiungere il database in Esplora Server.</span><span class="sxs-lookup"><span data-stu-id="e70fb-149">After entering this information click OK to complete this wizard and to add the database to the Server Explorer.</span></span>


<span data-ttu-id="e70fb-150">[![Specificare le informazioni di connessione di Database](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="e70fb-150">[![Specify the Database Connection Information](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span></span> 

<span data-ttu-id="e70fb-151">**Figura 2**: Specificare le informazioni di connessione di Database ([fare clic per visualizzare l'immagine con dimensioni normali](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="e70fb-151">**Figure 2**: Specify the Database Connection Information ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span></span>


<span data-ttu-id="e70fb-152">Il database ambiente di produzione dovrebbe ora essere elencato in Esplora Server.</span><span class="sxs-lookup"><span data-stu-id="e70fb-152">The production environment database should now be listed in the Server Explorer.</span></span> <span data-ttu-id="e70fb-153">Selezionare il database da Esplora Server e passare alla finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="e70fb-153">Select the database from the Server Explorer and go to the Properties window.</span></span> <span data-ttu-id="e70fb-154">Qui troverai una proprietà denominata stringa di connessione con la stringa di connessione database s.</span><span class="sxs-lookup"><span data-stu-id="e70fb-154">There you will find a property named Connection String with the database s connection string.</span></span> <span data-ttu-id="e70fb-155">Supponendo che si usa un database Microsoft SQL Server in ambiente di produzione e il provider SqlClient la stringa di connessione dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="e70fb-155">Assuming you are using a Microsoft SQL Server database on production and the SqlClient provider your connection string should look similar to the following:</span></span>

<span data-ttu-id="e70fb-156"><strong>Origine dati =<em>serverName</em>; Catalogo iniziale =<em>databaseName</em>; Persist Security Info = True; ID utente =<em>username</em>; Password =*password</strong>*</span><span class="sxs-lookup"><span data-stu-id="e70fb-156"><strong>Data Source=<em>serverName</em>; Initial Catalog=<em>databaseName</em>; Persist Security Info=True; User ID=<em>username</em>; Password=*password</strong>*</span></span>

<span data-ttu-id="e70fb-157">In cui *serverName*, *databaseName*, *username*, e *password* sono con i valori per il nome del server di database, il database nome e il nome utente e la password è fornito dall'azienda host web.</span><span class="sxs-lookup"><span data-stu-id="e70fb-157">Where *serverName*, *databaseName*, *username*, and *password* are with the values for the database server name, the database name, and the username and password supplied to you by your web host company.</span></span>

## <a name="deploying-the-book-reviews-web-application"></a><span data-ttu-id="e70fb-158">Distribuzione dell'applicazione Web di revisioni Rubrica</span><span class="sxs-lookup"><span data-stu-id="e70fb-158">Deploying the Book Reviews Web Application</span></span>

<span data-ttu-id="e70fb-159">L'esercitazione precedente si sono esaminati copia del database di sviluppo all'ambiente di produzione, ma non è stato esplorare la distribuzione dell'applicazione basate sui dati.</span><span class="sxs-lookup"><span data-stu-id="e70fb-159">The preceding tutorial stepped through copying the development database to the production environment, but did not explore deploying the data-driven application.</span></span> <span data-ttu-id="e70fb-160">A questo punto l'ambiente di produzione contiene il database, ma usa la versione dell'applicazione libro esamina con le verifiche statiche.</span><span class="sxs-lookup"><span data-stu-id="e70fb-160">At this point the production environment contains the database but is using the version of the Book Reviews application with static reviews.</span></span> <span data-ttu-id="e70fb-161">È necessario distribuire l'applicazione di nuovo, guidate dai dati al server di produzione insieme alle informazioni di configurazione aggiornate.</span><span class="sxs-lookup"><span data-stu-id="e70fb-161">We need to deploy the new, data-driven application to the production server along with the updated configuration information.</span></span>

<span data-ttu-id="e70fb-162">Si consiglia di distribuire l'applicazione basate sui dati dall'ambiente di sviluppo nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-162">Take a moment to deploy the data-driven application from the development environment to production.</span></span> <span data-ttu-id="e70fb-163">Questo processo è stato analizzato in dettaglio nelle esercitazioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="e70fb-163">This process was covered in detail in previous tutorials.</span></span> <span data-ttu-id="e70fb-164">Se è necessario un aggiornamento, vedere la *la distribuzione del sito Web usando un FTP Client* o nella *distribuzione del sito Web con Visual Studio* esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="e70fb-164">If you need a refresher, see the *Deploying Your Website Using an FTP Client* or the *Deploying Your Website Using Visual Studio* tutorials.</span></span> <span data-ttu-id="e70fb-165">È necessario assicurarsi che la stringa di connessione di database di produzione è quello utilizzato nell'ambiente di produzione, il che significa che un'alternativa `Web.config` file deve essere distribuito.</span><span class="sxs-lookup"><span data-stu-id="e70fb-165">You will need to ensure that the production database connection string is the one used in the production environment, which means that an alternate `Web.config` file must be deployed.</span></span> <span data-ttu-id="e70fb-166">In particolare, questa impostazione modificata `Web.config` file s `<connectionStrings>` elemento deve contenere la stringa di connessione di database di produzione e dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="e70fb-166">Specifically, this modified `Web.config` file s `<connectionStrings>` element needs to contain the production database connection string and should look similar to the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample2.xml)]

<span data-ttu-id="e70fb-167">Si noti che la stringa di connessione nel `<connectionStrings>` viene assegnato lo stesso elemento (`ReviewsConnectionString`), ma che adesso contiene la stringa di connessione del database di produzione anziché la stringa di connessione di database di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="e70fb-167">Note that the connection string in the `<connectionStrings>` element is named the same (`ReviewsConnectionString`), but now contains the production database connection string instead of the development database connection string.</span></span>

<span data-ttu-id="e70fb-168">A meno che non si dispone di un flusso di lavoro di distribuzione più formale, modificare manualmente il `Web.config` file da usare la stringa di connessione di database di produzione prima della distribuzione (ricordando di ripristinarla tornare a usare la stringa di connessione di database di sviluppo in un secondo momento) o mantenere separato `Web.config` file con le informazioni di configurazione Ambiente di produzione che viene caricate nell'ambiente di produzione come parte del processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-168">Unless you have a more formalized deployment workflow, either manually modify the `Web.config` file to use the production database connection string before deploying (remembering to revert it back to using the development database connection string afterwards) or maintain a separate `Web.config` file with the production environment configuration information that gets uploaded to the production environment as part of the deployment process.</span></span>

> [!NOTE]
> <span data-ttu-id="e70fb-169">Se si distribuisce accidentalmente un `Web.config` file che contiene la stringa di connessione di database di sviluppo, vi sarà un errore quando l'applicazione in produzione prova a connettersi al database.</span><span class="sxs-lookup"><span data-stu-id="e70fb-169">If you accidentally deploy a `Web.config` file that contains the development database connection string then there will be an error when the application on production attempts to connect to the database.</span></span> <span data-ttu-id="e70fb-170">Questo errore manifesta come un `SqlException` con un messaggio di creazione di report che il server non è stato trovato o non è accessibile.</span><span class="sxs-lookup"><span data-stu-id="e70fb-170">This error manifests as a `SqlException` with a message reporting that the server was not found or was not accessible.</span></span>


<span data-ttu-id="e70fb-171">Dopo aver distribuito il sito alla produzione, visitare il sito di produzione tramite il browser.</span><span class="sxs-lookup"><span data-stu-id="e70fb-171">Once the site has been deployed to production, visit the production site through your browser.</span></span> <span data-ttu-id="e70fb-172">È consigliabile vedere e sfruttare la stessa esperienza utente durante l'esecuzione locale dell'applicazione basate sui dati.</span><span class="sxs-lookup"><span data-stu-id="e70fb-172">You should see and enjoy the same user experience as when running the data-driven application locally.</span></span> <span data-ttu-id="e70fb-173">Naturalmente quando si visita il sito Web in produzione al sito si basa su server di database di produzione, mentre visitando il sito Web nell'ambiente di sviluppo viene utilizzato il database in fase di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="e70fb-173">Of course when you visit the website on production the site is powered by the production database server, whereas visiting the website in the development environment uses the database in development.</span></span> <span data-ttu-id="e70fb-174">Figura 3 mostra le *insegnare manualmente ASP.NET 3.5 in 24 ore* esaminare pagina dal sito Web nell'ambiente di produzione (si noti l'URL nella barra degli indirizzi del browser s).</span><span class="sxs-lookup"><span data-stu-id="e70fb-174">Figure 3 shows the *Teach Yourself ASP.NET 3.5 in 24 Hours* review page from the website in the production environment (note the URL in the browser s Address bar).</span></span>


<span data-ttu-id="e70fb-175">[![Le applicazioni guidate dai dati è ora disponibile in produzione.](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="e70fb-175">[![The Data-Driven Application is Now Available On Production!](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span></span> 

<span data-ttu-id="e70fb-176">**Figura 3**: Le applicazioni guidate dai dati è ora disponibile in produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-176">**Figure 3**: The Data-Driven Application is Now Available On Production!</span></span> <span data-ttu-id="e70fb-177">([Fare clic per visualizzare l'immagine con dimensioni normali](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="e70fb-177">([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span></span>


### <a name="storing-connection-strings-in-a-separate-configuration-file"></a><span data-ttu-id="e70fb-178">L'archiviazione delle stringhe di connessione in un File di configurazione separato</span><span class="sxs-lookup"><span data-stu-id="e70fb-178">Storing Connection Strings in a Separate Configuration File</span></span>

<span data-ttu-id="e70fb-179">Una tecnica comune per la gestione delle informazioni di configurazione separato per gli ambienti di sviluppo e di produzione è avere due versioni del `Web.config`: uno per l'ambiente di sviluppo e uno per la produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-179">A common technique for maintaining separate configuration information on the development and production environments is to have two versions of the `Web.config`: one for the development environment and one for production.</span></span> <span data-ttu-id="e70fb-180">In fase di distribuzione appropriato `Web.config` versione può essere copiata nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-180">At deploy-time the appropriate `Web.config` version can be copied to the production environment.</span></span> <span data-ttu-id="e70fb-181">In teoria, questo processo potrebbe essere automatizzato nell'ambito del flusso di lavoro di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-181">Ideally, this process would be automated as part of the deployment workflow.</span></span>

<span data-ttu-id="e70fb-182">Anziché mantenere due `Web.config` file, facoltativamente, è possibile forniscono le differenze più granulare.</span><span class="sxs-lookup"><span data-stu-id="e70fb-182">Instead of maintaining two separate `Web.config` files you can, optionally, provide more granular differences.</span></span> <span data-ttu-id="e70fb-183">Gli elementi che costituiscono il `Web.config` file può essere definite in un file di configurazione esterni che vengono usati nel `Web.config` file.</span><span class="sxs-lookup"><span data-stu-id="e70fb-183">The elements that make up the `Web.config` file can be defined in an external configuration files that are then referenced in the `Web.config` file.</span></span> <span data-ttu-id="e70fb-184">In pratica è possibile avere un `Web.config` file per entrambi gli ambienti che fa riferimento a un file databaseConnectionStrings.config, che contiene le stringhe di connessione utilizzata dall'applicazione e sono univoci per ogni ambiente.</span><span class="sxs-lookup"><span data-stu-id="e70fb-184">In a nutshell you can have one `Web.config` file for both environments that references a databaseConnectionStrings.config file, which would contain the connection strings used by the application and would be unique for each environment.</span></span> <span data-ttu-id="e70fb-185">È possibile individuare che fornisce una più ordinata che separa le informazioni di configurazione diverse in file separati e più semplice `Web.config` file e altro ancora in modo chiaro vengono descritte le differenze di configurazione tra gli ambienti di sviluppo e produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-185">I find that separating the differing configuration information into separate files provides a tidier and simpler `Web.config` file and more clearly outlines the configuration differences between the development and production environments.</span></span>

<span data-ttu-id="e70fb-186">Per usare questa tecnica, iniziare creando una nuova cartella nell'applicazione web denominata `ConfigSections`.</span><span class="sxs-lookup"><span data-stu-id="e70fb-186">To use this technique, start by creating a new folder in the web application named `ConfigSections`.</span></span> <span data-ttu-id="e70fb-187">Successivamente, aggiungere due file a questa nuova cartella denominata databaseConnectionStrings.dev.config e databaseConnectionStrings.production.config. Successivamente, copiare il `<connectionStrings>` elemento da `Web.config` nei file databaseConnectionStrings.dev.config e databaseConnectionStrings.production.config e quindi modificare la stringa di connessione nel databaseConnectionStrings.production.config del file in modo che specifichi la stringa di connessione di database di produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-187">Next, add two files to this new folder named databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config. Next, copy the `<connectionStrings>` element from `Web.config` into the databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files, and then modify the connection string in the databaseConnectionStrings.production.config file so that it specifies the production database connection string.</span></span> <span data-ttu-id="e70fb-188">Ad esempio, il file di databaseConnectionStrings.dev.config deve contenere solo il `<connectionStrings>` elemento con una stringa di connessione che fa riferimento al database di sviluppo:</span><span class="sxs-lookup"><span data-stu-id="e70fb-188">For example, the databaseConnectionStrings.dev.config file should contain just the `<connectionStrings>` element with a connection string that references the development database:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample3.xml)]

<span data-ttu-id="e70fb-189">Analogamente, il file databaseConnectionStrings.production.config deve contenere solo un `<connectionStrings>` elemento, ma quello contenente la stringa di connessione di database di produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-189">Similarly, the databaseConnectionStrings.production.config file should contain just a `<connectionStrings>` element, but one that has the production database connection string.</span></span>

<span data-ttu-id="e70fb-190">Creare una copia del file databaseConnectionStrings.dev.config e denominarlo databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="e70fb-190">Make a copy of the databaseConnectionStrings.dev.config file and name it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="e70fb-191">È possibile assegnare un nome file di configurazione diverso databaseConnectionStrings.config, se d desiderato, ad esempio `connectionStrings.config` o `dbInfo.config`.</span><span class="sxs-lookup"><span data-stu-id="e70fb-191">You can name the configuration file something other than databaseConnectionStrings.config, if you d like, such as `connectionStrings.config` or `dbInfo.config`.</span></span> <span data-ttu-id="e70fb-192">Tuttavia, assicurarsi di assegnare un nome del file con un `.config` estensione come `.config` file, per impostazione predefinita, non vengono serviti dal motore di ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e70fb-192">However, be sure to name the file with a `.config` extension as `.config` files are, by default, not served by the ASP.NET engine.</span></span> <span data-ttu-id="e70fb-193">Se si assegnano nomi file di un altro elemento, ad esempio `connectionStrings.txt`, un utente può puntare il browser al [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) e visualizzare il contenuto del file.</span><span class="sxs-lookup"><span data-stu-id="e70fb-193">If you name the file something else, like `connectionStrings.txt`, a user could point their browser to [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) and view the contents of the file!</span></span>


<span data-ttu-id="e70fb-194">A questo punto il `ConfigSections` cartella deve contenere tre file (vedere la figura 4).</span><span class="sxs-lookup"><span data-stu-id="e70fb-194">At this point the `ConfigSections` folder should contain three files (see Figure 4).</span></span> <span data-ttu-id="e70fb-195">I file databaseConnectionStrings.dev.config e databaseConnectionStrings.production.config contengono le stringhe di connessione per gli ambienti di sviluppo e produzione, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="e70fb-195">The databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files contain the connection strings for the development and production environments, respectively.</span></span> <span data-ttu-id="e70fb-196">Il file databaseConnectionStrings.config contiene le informazioni sulla stringa di connessione che verrà usati dall'applicazione web in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-196">The databaseConnectionStrings.config file contains the connection string information that will be used by the web application at runtime.</span></span> <span data-ttu-id="e70fb-197">Di conseguenza, il file databaseConnectionStrings.config deve essere identico al file databaseConnectionStrings.dev.config nell'ambiente di sviluppo, mentre in produzione, il file databaseConnectionStrings.config deve essere identico a databaseConnectionStrings.production.config.</span><span class="sxs-lookup"><span data-stu-id="e70fb-197">Consequently, the databaseConnectionStrings.config file should be identical to the databaseConnectionStrings.dev.config file in the development environment, whereas on production the databaseConnectionStrings.config file should be identical to databaseConnectionStrings.production.config.</span></span>


<span data-ttu-id="e70fb-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="e70fb-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span></span> 

<span data-ttu-id="e70fb-199">**Figura 4**: ConfigSections ([fare clic per visualizzare l'immagine con dimensioni normali](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="e70fb-199">**Figure 4**: ConfigSections ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span></span>


<span data-ttu-id="e70fb-200">È ora necessario indicare a `Web.config` per utilizzare il file databaseConnectionStrings.config per il proprio archivio di stringhe di connessione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-200">We now need to instruct `Web.config` to use the databaseConnectionStrings.config file for its connection string store.</span></span> <span data-ttu-id="e70fb-201">Aprire `Web.config` e sostituire l'elemento `<connectionStrings>` esistente con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="e70fb-201">Open `Web.config` and replace the existing `<connectionStrings>` element with the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample4.xml)]

<span data-ttu-id="e70fb-202">Il `configSource` attributo specifica un percorso fisico relativo al `Web.config` file.</span><span class="sxs-lookup"><span data-stu-id="e70fb-202">The `configSource` attribute specifies a physical path relative to the `Web.config` file.</span></span> <span data-ttu-id="e70fb-203">Se esterno `.config` file si trova nella stessa directory `Web.config` quindi impostare questo attributo al nome del file del `.config` file.</span><span class="sxs-lookup"><span data-stu-id="e70fb-203">If the external `.config` file is in the same directory as `Web.config` then set this attribute to the file name of the `.config` file.</span></span> <span data-ttu-id="e70fb-204">Se è in una sottodirectory, come avviene con databaseConnectionStrings.config, specificano la sottocartella con una barra rovesciata per delimitare i nomi di file e cartelle, ad esempio ConfigSections\databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="e70fb-204">If it s in a subdirectory, as is the case with databaseConnectionStrings.config, specify the subfolder using a backslash to delimit the folder and file names, like ConfigSections\databaseConnectionStrings.config.</span></span>

<span data-ttu-id="e70fb-205">Grazie a questa modifica, gli ambienti di sviluppo e produzione contengono gli stessi `Web.config` file.</span><span class="sxs-lookup"><span data-stu-id="e70fb-205">With this modification, the development and production environments contain the same `Web.config` file.</span></span> <span data-ttu-id="e70fb-206">A questo punto l'unica differenza è il file databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="e70fb-206">Now the only difference is the databaseConnectionStrings.config file.</span></span> <span data-ttu-id="e70fb-207">Copiare il file databaseConnectionStrings.production.config nell'ambiente di produzione e rinominarlo in databaseConnectionStrings.config. Se, in futuro, sono state apportate modifiche alla stringa di connessione di database di produzione è necessario renderli al file databaseConnectionStrings.production.config e quindi caricare il file nell'ambiente di produzione, rinominarlo databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="e70fb-207">Copy the databaseConnectionStrings.production.config file to production and rename it to databaseConnectionStrings.config. If, in the future, there are changes to the production database connection string you will need to make them to the databaseConnectionStrings.production.config file and then upload that file to production, renaming it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="e70fb-208">È possibile specificare le informazioni di presenza `Web.config` elemento in un file separato e usare il `configSource` attributo fare riferimento a tale file dall'interno `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="e70fb-208">You may specify the information for any `Web.config` element in a separate file and use the `configSource` attribute to reference that file from within `Web.config`.</span></span>


## <a name="summary"></a><span data-ttu-id="e70fb-209">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="e70fb-209">Summary</span></span>

<span data-ttu-id="e70fb-210">Le applicazioni basate sui dati in genere usano database diversi in ambienti di sviluppo e produzione.</span><span class="sxs-lookup"><span data-stu-id="e70fb-210">Data-driven applications usually use different databases in the development and production environments.</span></span> <span data-ttu-id="e70fb-211">Di conseguenza, le stringhe di connessione di database archiviate nella configurazione di s dell'applicazione web devono essere univoche per ogni ambiente.</span><span class="sxs-lookup"><span data-stu-id="e70fb-211">Consequently, the database connection strings stored in the web application s configuration must be unique per environment.</span></span> <span data-ttu-id="e70fb-212">In questa esercitazione è stato illustrato come determinare la stringa di connessione di database di produzione e i modi per mantenere le informazioni sulla stringa di connessione univoco nei due ambienti.</span><span class="sxs-lookup"><span data-stu-id="e70fb-212">In this tutorial we looked at how to determine the production database connection string and ways to maintain unique connection string information in the two environments.</span></span>

<span data-ttu-id="e70fb-213">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="e70fb-213">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="e70fb-214">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="e70fb-214">Further Reading</span></span>

<span data-ttu-id="e70fb-215">Per altre informazioni sugli argomenti trattati in questa esercitazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="e70fb-215">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="e70fb-216">Stringhe di connessione e file di configurazione</span><span class="sxs-lookup"><span data-stu-id="e70fb-216">Connection Strings and Configuration Files</span></span>](https://msdn.microsoft.com/library/ms254494.aspx)
- [<span data-ttu-id="e70fb-217">Informazioni @ ConnectionStrings.com le stringhe di configurazione del database</span><span class="sxs-lookup"><span data-stu-id="e70fb-217">Database Configuration Strings Information @ ConnectionStrings.com</span></span>](http://www.connectionstrings.com/)
- [<span data-ttu-id="e70fb-218">Spostare le impostazioni dal File Web. config</span><span class="sxs-lookup"><span data-stu-id="e70fb-218">Move Settings Out of the Web.config File</span></span>](http://www.asp101.com/tips/index.asp?id=154)
- [<span data-ttu-id="e70fb-219">Documentazione tecnica per il &lt;connectionStrings&gt; elemento</span><span class="sxs-lookup"><span data-stu-id="e70fb-219">Technical Documentation for the &lt;connectionStrings&gt; Element</span></span>](https://msdn.microsoft.com/library/bf7sd233.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="e70fb-220">[Precedente](deploying-a-database-vb.md)
> [Successivo](configuring-a-website-that-uses-application-services-vb.md)</span><span class="sxs-lookup"><span data-stu-id="e70fb-220">[Previous](deploying-a-database-vb.md)
[Next](configuring-a-website-that-uses-application-services-vb.md)</span></span>
