---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
title: Configurazione di un sito Web che utilizza i servizi dell'applicazione (c#) | Microsoft Docs
author: rick-anderson
description: Verze Technologie ASP.NET 2.0 introdotto una serie di servizi delle applicazioni, che fanno parte di .NET Framework e vengono usati come una suite di blocchi predefiniti di servizi che yo...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 1e33d1c6-3f9f-4c26-81e2-2a8f8907bb05
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
msc.type: authoredcontent
ms.openlocfilehash: fe6097c32e4584fd4c577fb8d2afee9b3483c22f
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/09/2019
ms.locfileid: "59418417"
---
# <a name="configuring-a-website-that-uses-application-services-c"></a><span data-ttu-id="89c6c-103">Configurazione di un sito Web che usa i servizi per le applicazioni (C#)</span><span class="sxs-lookup"><span data-stu-id="89c6c-103">Configuring a Website that Uses Application Services (C#)</span></span>

<span data-ttu-id="89c6c-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="89c6c-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="89c6c-105">[Scaricare il codice](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) o [Scarica il PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="89c6c-105">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span></span>

> <span data-ttu-id="89c6c-106">Verze Technologie ASP.NET 2.0 introdotto una serie di servizi delle applicazioni, che fanno parte di .NET Framework e vengono usati come una suite di servizi di blocchi predefiniti che è possibile usare per aggiungere funzionalità avanzate per l'applicazione web.</span><span class="sxs-lookup"><span data-stu-id="89c6c-106">ASP.NET version 2.0 introduced a series of application services, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="89c6c-107">Questa esercitazione illustra come configurare un sito Web nell'ambiente di produzione usare i servizi dell'applicazione e risolve i problemi comuni con la gestione degli account utente e i ruoli nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-107">This tutorial explores how to configure a website in the production environment to use application services and addresses common issues with managing user accounts and roles on the production environment.</span></span>


## <a name="introduction"></a><span data-ttu-id="89c6c-108">Introduzione</span><span class="sxs-lookup"><span data-stu-id="89c6c-108">Introduction</span></span>

<span data-ttu-id="89c6c-109">Verze Technologie ASP.NET 2.0 introdotto una serie di *servizi delle applicazioni*, che fanno parte di .NET Framework e servire come una suite di blocchi predefiniti di servizi che si possono usare per aggiungere funzionalità avanzate per l'applicazione web.</span><span class="sxs-lookup"><span data-stu-id="89c6c-109">ASP.NET version 2.0 introduced a series of *application services*, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="89c6c-110">I servizi delle applicazioni includono:</span><span class="sxs-lookup"><span data-stu-id="89c6c-110">The application services include:</span></span>

- <span data-ttu-id="89c6c-111">**Appartenenza** : un'API per la creazione e gestione degli account utente.</span><span class="sxs-lookup"><span data-stu-id="89c6c-111">**Membership** - an API for creating and managing user accounts.</span></span>
- <span data-ttu-id="89c6c-112">**Ruoli** : un'API per la classificazione degli utenti in gruppi.</span><span class="sxs-lookup"><span data-stu-id="89c6c-112">**Roles** - an API for categorizing users into groups.</span></span>
- <span data-ttu-id="89c6c-113">**Profilo** : un'API per l'archiviazione dei contenuti personalizzato, specifico dell'utente.</span><span class="sxs-lookup"><span data-stu-id="89c6c-113">**Profile** - an API for storing custom, user-specific content.</span></span>
- <span data-ttu-id="89c6c-114">**Mappa del sito** : un'API per la definizione di una struttura logica sito s sotto forma di una gerarchia, che può quindi essere visualizzata tramite i controlli di navigazione, ad esempio menu e percorsi di navigazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-114">**Site Map** - an API for defining a site s logical structure in the form of a hierarchy, which can then be displayed via navigation controls, such as menus and breadcrumbs.</span></span>
- <span data-ttu-id="89c6c-115">**Personalizzazione** : un'API per la gestione delle preferenze di personalizzazione, generalmente utilizzate con [ *WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span><span class="sxs-lookup"><span data-stu-id="89c6c-115">**Personalization** - an API for maintaining customization preferences, most often used with [*WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span></span>
- <span data-ttu-id="89c6c-116">**Monitoraggio dell'integrità** : un'API per il monitoraggio delle prestazioni, sicurezza, gli errori e altre metriche di integrità di sistema per un'applicazione web in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-116">**Health Monitoring** - an API for monitoring performance, security, errors, and other system health metrics for a running web application.</span></span>
  

<span data-ttu-id="89c6c-117">I servizi delle applicazioni API non sono associati a un'implementazione specifica.</span><span class="sxs-lookup"><span data-stu-id="89c6c-117">The application services APIs are not tied to a specific implementation.</span></span> <span data-ttu-id="89c6c-118">In alternativa, è indicare i servizi delle applicazioni di utilizzare un determinato *provider*, e che il provider implementa il servizio utilizzando una tecnologia specifica.</span><span class="sxs-lookup"><span data-stu-id="89c6c-118">Instead, you instruct the application services to use a particular *provider*, and that provider implements the service using a particular technology.</span></span> <span data-ttu-id="89c6c-119">I provider di usati più comune per le applicazioni web basati su Internet ospitate in una società di hosting web sono i provider che usano un'implementazione di database di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89c6c-119">The most commonly used providers for Internet-based web applications hosted at a web hosting company are those providers that use a SQL Server database implementation.</span></span> <span data-ttu-id="89c6c-120">Ad esempio, il `SqlMembershipProvider` è un provider per l'API di appartenenza che archivia informazioni sull'account utente in un database Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89c6c-120">For example, the `SqlMembershipProvider` is a provider for the Membership API that stores user account information in a Microsoft SQL Server database.</span></span>

<span data-ttu-id="89c6c-121">Usando i servizi delle applicazioni e i provider di SQL Server rende piuttosto complicato quando si distribuisce l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-121">Using the application services and SQL Server providers adds some challenges when deploying the application.</span></span> <span data-ttu-id="89c6c-122">Per i principianti, gli oggetti di database di servizi dell'applicazione devono essere stati creati correttamente nel database di sviluppo e produzione e inizializzati in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-122">For starters, the application services database objects must be properly created on both the development and production databases and appropriately initialized.</span></span> <span data-ttu-id="89c6c-123">Sono inoltre presenti importanti impostazioni di configurazione che è necessario apportare.</span><span class="sxs-lookup"><span data-stu-id="89c6c-123">There are also important configuration settings that need to be made.</span></span>

> [!NOTE]
> <span data-ttu-id="89c6c-124">I servizi delle applicazioni API sono state progettate con il [ *modello di provider*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), uno schema progettuale che consente un'API s dettagli di implementazione essere fornito in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-124">The application services APIs were designed using the [*provider model*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), a design pattern that allows for an API s implementation details to be provided at runtime.</span></span> <span data-ttu-id="89c6c-125">.NET Framework viene fornito con un numero di provider di servizi di applicazione che può essere utilizzato, ad esempio la `SqlMembershipProvider` e `SqlRoleProvider`, quali sono i provider per l'appartenenza e ruoli API che usano un Server SQL database implementazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-125">The .NET Framework ships with a number of application service providers that can be used, such as the `SqlMembershipProvider` and `SqlRoleProvider`, which are providers for the Membership and Roles APIs that use a SQL Server database implementation.</span></span> <span data-ttu-id="89c6c-126">È anche possibile creare e plug-in un provider personalizzato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-126">You can also create and plug-in a custom provider.</span></span> <span data-ttu-id="89c6c-127">In effetti, l'applicazione web le recensioni dei libri già contiene un provider personalizzato per l'API di mappa del sito (`ReviewSiteMapProvider`), che costruisce la mappa del sito dai dati di `Genres` e `Books` nelle tabelle del database.</span><span class="sxs-lookup"><span data-stu-id="89c6c-127">In fact, the Book Reviews web application already contains a custom provider for the Site Map API (`ReviewSiteMapProvider`), which constructs the site map from the data in the `Genres` and `Books` tables in the database.</span></span>


<span data-ttu-id="89c6c-128">Questa esercitazione inizia con uno sguardo al modo in cui l'applicazione web le recensioni dei libri per usare le API di ruoli e appartenenza esteso.</span><span class="sxs-lookup"><span data-stu-id="89c6c-128">This tutorial starts with a look at how I extended the Book Reviews web application to use the Membership and Roles APIs.</span></span> <span data-ttu-id="89c6c-129">Quindi illustra in modo dettagliato la distribuzione di un'applicazione web che usa i servizi dell'applicazione con un'implementazione di database di SQL Server e si conclude con una risoluzione dei problemi comuni con la gestione degli account utente e i ruoli nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-129">It then walks through deploying a web application that uses application services with a SQL Server database implementation, and concludes by addressing common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="updates-to-the-book-reviews-application"></a><span data-ttu-id="89c6c-130">Aggiornamenti all'applicazione le verifiche della Rubrica</span><span class="sxs-lookup"><span data-stu-id="89c6c-130">Updates to the Book Reviews Application</span></span>

<span data-ttu-id="89c6c-131">Ultimi esercitazioni che l'applicazione web di verifiche di libro è stato aggiornato da un sito Web statico per un'applicazione web dinamiche guidate dai dati completata con un set di pagine di amministrazione per la gestione di generi e recensioni.</span><span class="sxs-lookup"><span data-stu-id="89c6c-131">Over the past couple tutorials the Book Reviews web application was updated from a static website to a dynamic, data-driven web application complete with a set of administration pages for managing genres and reviews.</span></span> <span data-ttu-id="89c6c-132">Tuttavia, in questa sezione di amministrazione non è protetto, qualsiasi utente che conosce l'URL della pagina Amministrazione (o verrà automaticamente dedotto) può walzer e creare, modificare o eliminare le revisioni nel nostro sito.</span><span class="sxs-lookup"><span data-stu-id="89c6c-132">However, this administration section is currently not protected - any user who knows (or guesses) the administration page URL can waltz in and create, edit, or delete reviews on our site.</span></span> <span data-ttu-id="89c6c-133">Un modo comune per proteggere determinate parti di un sito Web consiste nell'implementare gli account utente e quindi usare le regole di autorizzazione URL per limitare l'accesso a determinati utenti o ruoli.</span><span class="sxs-lookup"><span data-stu-id="89c6c-133">A common way to protect certain portions of a website is to implement user accounts and then use URL authorization rules to restrict access to certain users or roles.</span></span> <span data-ttu-id="89c6c-134">L'applicazione web le recensioni dei libri disponibile per il download in questa esercitazione supporta i ruoli e account utente.</span><span class="sxs-lookup"><span data-stu-id="89c6c-134">The Book Reviews web application available for download with this tutorial supports user accounts and roles.</span></span> <span data-ttu-id="89c6c-135">Ha un unico ruolo definito denominato amministratore e solo gli utenti di questo ruolo possono accedere alle pagine di amministrazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-135">It has a single role defined named Admin and only users in this role can access the administration pages.</span></span>

> [!NOTE]
> <span data-ttu-id="89c6c-136">Ho creato tre account utente nell'applicazione web le recensioni dei libri: Scott Jisun e Alice.</span><span class="sxs-lookup"><span data-stu-id="89c6c-136">I ve created three user accounts in the Book Reviews web application: Scott, Jisun, and Alice.</span></span> <span data-ttu-id="89c6c-137">Tutti e tre gli utenti hanno la stessa password: **password!**</span><span class="sxs-lookup"><span data-stu-id="89c6c-137">All three users have the same password: **password!**</span></span> <span data-ttu-id="89c6c-138">In cui Scott e Jisun fanno parte del ruolo di amministratore, Alice non è presente.</span><span class="sxs-lookup"><span data-stu-id="89c6c-138">Scott and Jisun are in the Admin role, Alice is not.</span></span> <span data-ttu-id="89c6c-139">Le pagine di amministrazione non s sito sono ancora accessibili agli utenti anonimi.</span><span class="sxs-lookup"><span data-stu-id="89c6c-139">The site s non-administration pages are still accessible to anonymous users.</span></span> <span data-ttu-id="89c6c-140">Vale a dire, non è necessario accedere a visitare il sito, a meno che non si desidera amministrare, nel qual caso è necessario accedere come utente nel ruolo di amministratore.</span><span class="sxs-lookup"><span data-stu-id="89c6c-140">That is, you do not need to sign in to visit the site, unless you want to administer it, in which case you must sign in as a user in the Admin role.</span></span>


<span data-ttu-id="89c6c-141">Pagina master le recensioni dei libri applicazione s è stata aggiornata per includere un'interfaccia utente diversa per gli utenti autenticati e anonimi.</span><span class="sxs-lookup"><span data-stu-id="89c6c-141">The Book Reviews application s master page has been updated to include a different user interface for authenticated and anonymous users.</span></span> <span data-ttu-id="89c6c-142">Se un utente anonimo visita il sito vede un collegamento di accesso nell'angolo superiore destro.</span><span class="sxs-lookup"><span data-stu-id="89c6c-142">If an anonymous user visits the site she sees a Login link in the upper right corner.</span></span> <span data-ttu-id="89c6c-143">Un utente autenticato vede il messaggio ", Bentornato *username*!"</span><span class="sxs-lookup"><span data-stu-id="89c6c-143">An authenticated user sees the message, "Welcome back, *username*!"</span></span> <span data-ttu-id="89c6c-144">e un collegamento per effettuare la disconnessione. Esiste anche una pagina di accesso s (`~/Login.aspx`), che contiene un controllo di accesso Web che fornisce l'interfaccia utente e per la logica per l'autenticazione di un visitatore.</span><span class="sxs-lookup"><span data-stu-id="89c6c-144">and a link to log out. There s also a login page (`~/Login.aspx`), which contains a Login Web control that provides the user interface and logic for authenticating a visitor.</span></span> <span data-ttu-id="89c6c-145">Solo gli amministratori possono creare nuovi account.</span><span class="sxs-lookup"><span data-stu-id="89c6c-145">Only administrators can create new accounts.</span></span> <span data-ttu-id="89c6c-146">(Sono presenti pagine per la creazione e la gestione degli account utente di `~/Admin` cartella.)</span><span class="sxs-lookup"><span data-stu-id="89c6c-146">(There are pages for creating and managing user accounts in the `~/Admin` folder.)</span></span>

### <a name="configuring-the-membership-and-roles-apis"></a><span data-ttu-id="89c6c-147">La configurazione di appartenenza e ruoli API</span><span class="sxs-lookup"><span data-stu-id="89c6c-147">Configuring the Membership and Roles APIs</span></span>

<span data-ttu-id="89c6c-148">L'applicazione web le recensioni dei libri Usa le API di ruoli e appartenenza per supportare gli account utente e raggruppare gli utenti in ruoli (vale a dire, il ruolo di amministratore).</span><span class="sxs-lookup"><span data-stu-id="89c6c-148">The Book Reviews web application uses the Membership and Roles APIs to support user accounts and to group those users into roles (namely, the Admin role).</span></span> <span data-ttu-id="89c6c-149">Il `SqlMembershipProvider` e `SqlRoleProvider` vengono utilizzate le classi di provider perché si desidera archiviare informazioni sui ruoli e account in un database di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89c6c-149">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes are used because we want to store account and role information in a SQL Server database.</span></span>

> [!NOTE]
> <span data-ttu-id="89c6c-150">Questa esercitazione non intende essere un esame approfondito la configurazione di un'applicazione web per supportare le API di ruoli e appartenenza.</span><span class="sxs-lookup"><span data-stu-id="89c6c-150">This tutorial is not intended to be a detailed examination at configuring a web application to support the Membership and Roles APIs.</span></span> <span data-ttu-id="89c6c-151">Per un'analisi approfondita queste API e i passaggi da eseguire per configurare un sito Web per il loro uso, consultare il [ *sito Web di sicurezza esercitazioni*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="89c6c-151">For a thorough look at these APIs and the steps you need to take to configure a website to use them, please read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>


<span data-ttu-id="89c6c-152">Usare i servizi delle applicazioni con un database di SQL Server, che è innanzitutto necessario aggiungere gli oggetti di database usati da questi provider per il database in cui si desidera che l'account utente e le informazioni sui ruoli archiviate.</span><span class="sxs-lookup"><span data-stu-id="89c6c-152">To use the application services with a SQL Server database you must first add the database objects used by these providers to the database where you want the user account and role information stored.</span></span> <span data-ttu-id="89c6c-153">Questi oggetti di database necessarie includono un'ampia gamma di tabelle, viste e stored procedure.</span><span class="sxs-lookup"><span data-stu-id="89c6c-153">These requisite database objects include a variety of tables, views, and stored procedures.</span></span> <span data-ttu-id="89c6c-154">Se non diversamente specificato, il `SqlMembershipProvider` e `SqlRoleProvider` classi provider usano un database di SQL Server Express Edition denominato `ASPNETDB` che si trova in s applicazione `App_Data` cartella; se tale database non esiste, viene creato automaticamente con gli oggetti di database necessari da questi provider in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-154">Unless specified otherwise, the `SqlMembershipProvider` and `SqlRoleProvider` provider classes use a SQL Server Express Edition database named `ASPNETDB` located in the application s `App_Data` folder; if such a database does not exist, it is automatically created with the necessary database objects by these providers at runtime.</span></span>

<span data-ttu-id="89c6c-155">È possibile, e in genere ideale, per creare l'applicazione Servizi gli oggetti di database nello stesso database dove sono archiviati i dati specifici dell'applicazione s sito Web.</span><span class="sxs-lookup"><span data-stu-id="89c6c-155">It is possible, and usually ideal, to create the application services database objects in the same database where the website s application-specific data is stored.</span></span> <span data-ttu-id="89c6c-156">.NET Framework viene fornito con uno strumento denominato `aspnet_regsql.exe` che installa gli oggetti di database in un database specificato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-156">The .NET Framework ships with a tool named `aspnet_regsql.exe` that installs the database objects on a specified database.</span></span> <span data-ttu-id="89c6c-157">Ho voluto e consente di aggiungere questi oggetti a questo strumento il `Reviews.mdf` del database nel `App_Data` cartella (database di sviluppo).</span><span class="sxs-lookup"><span data-stu-id="89c6c-157">I have gone ahead and used this tool to add these objects to the `Reviews.mdf` database in the `App_Data` folder (the development database).</span></span> <span data-ttu-id="89c6c-158">Si vedrà come utilizzare questo strumento più avanti in questa esercitazione quando si aggiungono questi oggetti nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-158">We'll see how to use this tool later in this tutorial when we add these objects to the production database.</span></span>

<span data-ttu-id="89c6c-159">Se si aggiunge l'applicazione di servizi gli oggetti di database a un database diverso da `ASPNETDB` sarà necessario personalizzare il `SqlMembershipProvider` e `SqlRoleProvider` provider classi delle configurazioni in modo che utilizzino il database appropriato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-159">If you add the application services database objects to a database other than `ASPNETDB` you will need to customize the `SqlMembershipProvider` and `SqlRoleProvider` provider classes configurations so that they use the appropriate database.</span></span> <span data-ttu-id="89c6c-160">Per personalizzare il provider di appartenenze aggiungere un [  *&lt;appartenenza&gt; elemento* ](https://msdn.microsoft.com/library/1b9hw62f.aspx) all'interno di `<system.web>` sezione `Web.config`; usare il [  *&lt;roleManager&gt; elemento* ](https://msdn.microsoft.com/library/ms164660.aspx) per configurare il provider di ruoli.</span><span class="sxs-lookup"><span data-stu-id="89c6c-160">To customize the Membership provider add a [*&lt;membership&gt; element*](https://msdn.microsoft.com/library/1b9hw62f.aspx) within the `<system.web>` section in `Web.config`; use the [*&lt;roleManager&gt; element*](https://msdn.microsoft.com/library/ms164660.aspx) to configure the Roles provider.</span></span> <span data-ttu-id="89c6c-161">Il frammento di codice seguente è tratto dall'applicazione s le recensioni dei libri `Web.config` e Mostra le impostazioni di configurazione per le API di ruoli e appartenenza.</span><span class="sxs-lookup"><span data-stu-id="89c6c-161">The following snippet is taken from the Book Reviews application s `Web.config` and shows the configure settings for the Membership and Roles APIs.</span></span> <span data-ttu-id="89c6c-162">Si noti che sia registrato un nuovo provider - `ReviewMembership` e `ReviewRole` -che usano il `SqlMembershipProvider` e `SqlRoleProvider` provider, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="89c6c-162">Note that both register a new provider - `ReviewMembership` and `ReviewRole` - that use the `SqlMembershipProvider` and `SqlRoleProvider` providers, respectively.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample1.xml)]

<span data-ttu-id="89c6c-163">Il `Web.config` file s `<authentication>` elemento è stato configurato anche per supportare l'autenticazione basata su form.</span><span class="sxs-lookup"><span data-stu-id="89c6c-163">The `Web.config` file s `<authentication>` element has also been configured to support forms-based authentication.</span></span>
  

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample2.xml)]

### <a name="limiting-access-to-the-administration-pages"></a><span data-ttu-id="89c6c-164">Limitare l'accesso alle pagine di amministrazione</span><span class="sxs-lookup"><span data-stu-id="89c6c-164">Limiting Access to the Administration Pages</span></span>

<span data-ttu-id="89c6c-165">ASP.NET semplifica concedere o negare l'accesso a un determinato file o una cartella dall'utente o al ruolo tramite il *autorizzazione URL* funzionalità.</span><span class="sxs-lookup"><span data-stu-id="89c6c-165">ASP.NET makes it easy to grant or deny access to a particular file or folder by user or by role via its *URL authorization* feature.</span></span> <span data-ttu-id="89c6c-166">(Illustrata brevemente autorizzazione URL nel *differenze principali tra IIS e ASP.NET Development Server* esercitazione ed è stato illustrato come il Server di sviluppo ASP.NET e IIS si applicano le regole di autorizzazione URL in modo diverso per statico rispetto a contenuto dinamico.) Poiché si vuole proibire l'accesso al `~/Admin` cartella ad eccezione di tali utenti il ruolo di amministratore, è necessario aggiungere regole di autorizzazione URL per questa cartella.</span><span class="sxs-lookup"><span data-stu-id="89c6c-166">(We briefly discussed URL authorization in the *Core Differences Between IIS and the ASP.NET Development Server* tutorial and showed how IIS and the ASP.NET Development Server apply URL authorization rules differently for static versus dynamic content.) Because we want to prohibit access to the `~/Admin` folder except for those users in the Admin role, we need to add URL authorization rules to this folder.</span></span> <span data-ttu-id="89c6c-167">In particolare, le regole di autorizzazione URL necessario consentire agli utenti il ruolo di amministratore e negare tutti gli altri utenti.</span><span class="sxs-lookup"><span data-stu-id="89c6c-167">Specifically, the URL authorization rules need to allow users in the Admin role and deny all other users.</span></span> <span data-ttu-id="89c6c-168">Questa operazione viene eseguita mediante l'aggiunta di un `Web.config` file per il `~/Admin` cartella con il contenuto seguente:</span><span class="sxs-lookup"><span data-stu-id="89c6c-168">This is accomplished by adding a `Web.config` file to the `~/Admin` folder with the following contents:</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample3.xml)]

<span data-ttu-id="89c6c-169">Per altre informazioni sulle funzionalità di autorizzazione URL ASP.NET s e su come usarlo per spiegare chiaramente le regole di autorizzazione per gli utenti e per i ruoli, assicurarsi di leggere il [ *basata sull'utente Authorization* ](../../older-versions-security/membership/user-based-authorization-cs.md) e [ *Autorizzazione basata sui ruoli* ](../../older-versions-security/roles/role-based-authorization-cs.md) esercitazioni dalla mia [ *sito Web di sicurezza esercitazioni*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="89c6c-169">For more information on ASP.NET s URL authorization feature and how to use it to spell out authorization rules for users and for roles, be sure to read the [*User-Based Authorization*](../../older-versions-security/membership/user-based-authorization-cs.md) and [*Role-Based Authorization*](../../older-versions-security/roles/role-based-authorization-cs.md) tutorials from my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

## <a name="deploying-a-web-application-that-uses-application-services"></a><span data-ttu-id="89c6c-170">Distribuzione di un'applicazione Web che utilizza i servizi dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="89c6c-170">Deploying a Web Application That Uses Application Services</span></span>

<span data-ttu-id="89c6c-171">Quando si distribuisce un sito Web che usa un provider che archivia le informazioni di servizi dell'applicazione in un database e servizi dell'applicazione, è fondamentale che gli oggetti di database necessari per i servizi delle applicazioni creati nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-171">When deploying a website that uses application services and a provider that stores the application services information in a database, it is imperative that the database objects needed by the application services be created on the production database.</span></span> <span data-ttu-id="89c6c-172">Inizialmente non contiene il database di produzione questi oggetti, questa operazione quando l'applicazione viene distribuita prima di tutto (o quando viene distribuito per la prima volta dopo l'aggiunta di servizi delle applicazioni), è necessario eseguire passaggi aggiuntivi per ottenere questi oggetti di database richiesti di database di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-172">Initially the production database does not contain these objects, so when the application is first deployed (or when it is deployed for the first time after application services have been added), you must take extra steps to get these requisite database objects on the production database.</span></span>

<span data-ttu-id="89c6c-173">Un altro problema può verificarsi quando si distribuisce un sito Web che utilizza i servizi dell'applicazione se si intende eseguire la replica degli account utente creati nell'ambiente di sviluppo all'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-173">Another challenge can arise when deploying a website that uses application services if you intend to replicate the user accounts created in the development environment to the production environment.</span></span> <span data-ttu-id="89c6c-174">A seconda della configurazione di appartenenza e ruoli, è possibile che anche se si copiano correttamente gli account utente che sono stati creati nell'ambiente di sviluppo per il database di produzione, questi utenti non possono accedere all'applicazione web nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-174">Depending on the Membership and Roles configuration, it is possible that even if you successfully copy the user accounts that were created in the development environment to the production database, these users cannot sign into the web application in production.</span></span> <span data-ttu-id="89c6c-175">Verranno esaminare la causa del problema e illustra come impedire che si verifichi.</span><span class="sxs-lookup"><span data-stu-id="89c6c-175">We'll look at the cause of this issue and discuss how to prevent it from happening.</span></span>

<span data-ttu-id="89c6c-176">ASP.NET viene fornito con un interessante [ *Web Site Administration Tool (WSAT)* ](https://msdn.microsoft.com/library/yy40ytx0.aspx) che può essere avviato da Visual Studio e consente all'utente le regole di account, ruoli e autorizzazione a essere gestiti attraverso una basata sul web interfaccia.</span><span class="sxs-lookup"><span data-stu-id="89c6c-176">ASP.NET ships with a nice [*Web Site Administration Tool (WSAT)*](https://msdn.microsoft.com/library/yy40ytx0.aspx) that can be launched from Visual Studio and allows the user account, roles, and authorization rules to be managed through a web-based interface.</span></span> <span data-ttu-id="89c6c-177">Sfortunatamente, il WSAT funziona solo per i siti Web locale, vale a dire che non può essere usato per gestire in remoto gli account utente, ruoli e le regole di autorizzazione per l'applicazione web nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-177">Unfortunately, the WSAT only works for local websites, meaning that it cannot be used to remotely manage user accounts, roles, and authorization rules for the web application in the production environment.</span></span> <span data-ttu-id="89c6c-178">Esamineremo diversi modi per implementare un comportamento simile a WSAT dal sito Web di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-178">We'll look at different ways to implement WSAT-like behavior from your production website.</span></span>

### <a name="adding-the-database-objects-using-aspnetregsqlexe"></a><span data-ttu-id="89c6c-179">Aggiunta di oggetti di Database mediante aspnet\_regsql.exe</span><span class="sxs-lookup"><span data-stu-id="89c6c-179">Adding the Database Objects Using aspnet\_regsql.exe</span></span>

<span data-ttu-id="89c6c-180">Il *distribuzione di un Database* esercitazione ha illustrato come copiare le tabelle e i dati dal database di sviluppo nel database di produzione e queste tecniche sono certamente utilizzabile per copiare gli oggetti di database di servizi di applicazione per il database di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-180">The *Deploying a Database* tutorial showed how to copy the tables and data from the development database to the production database, and these techniques can certainly be used to copy the application services database objects to the production database.</span></span> <span data-ttu-id="89c6c-181">Un'altra opzione consiste di `aspnet_regsql.exe` strumento che aggiunge o rimuove gli oggetti di database di servizi di applicazione da un database.</span><span class="sxs-lookup"><span data-stu-id="89c6c-181">Another option is the `aspnet_regsql.exe` tool, which adds or removes the application services database objects from a database.</span></span>

> [!NOTE]
> <span data-ttu-id="89c6c-182">Il `aspnet_regsql.exe` strumento crea gli oggetti di database in un database specificato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-182">The `aspnet_regsql.exe` tool creates the database objects on a specified database.</span></span> <span data-ttu-id="89c6c-183">Non eseguire la migrazione di dati in tali oggetti di database dal database di sviluppo per il database di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-183">It does not migrate data in those database objects from the development database to the production database.</span></span> <span data-ttu-id="89c6c-184">Se si intende copiare le informazioni di account e il ruolo utente nel database di sviluppo per il database di produzione usare le tecniche illustrate nel *distribuzione di un Database* esercitazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-184">If you mean to copy the user account and role information in the development database to the production database use the techniques covered in the *Deploying a Database* tutorial.</span></span>


<span data-ttu-id="89c6c-185">Let s esaminare come aggiungere gli oggetti di database al database di produzione usando il `aspnet_regsql.exe` dello strumento.</span><span class="sxs-lookup"><span data-stu-id="89c6c-185">Let s look at how to add the database objects to the production database using the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="89c6c-186">Iniziare aprendo Esplora Windows e passare alla directory .NET Framework versione 2.0 nel computer, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span><span class="sxs-lookup"><span data-stu-id="89c6c-186">Start by opening Windows Explorer and navigating to the .NET Framework version 2.0 directory on your computer, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span></span> <span data-ttu-id="89c6c-187">Vi deve trovare la `aspnet_regsql.exe` dello strumento.</span><span class="sxs-lookup"><span data-stu-id="89c6c-187">There you should find the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="89c6c-188">Questo strumento può essere usato dalla riga di comando, ma include anche un'interfaccia utente grafica. Fare doppio clic il `aspnet_regsql.exe` file per avviare il componente con interfaccia grafica.</span><span class="sxs-lookup"><span data-stu-id="89c6c-188">This tool can be used from the command-line, but it also includes a graphical user interface; double-click the `aspnet_regsql.exe` file to launch its graphical component.</span></span>

<span data-ttu-id="89c6c-189">Lo strumento si avvia visualizzando una schermata iniziale che spiega lo scopo.</span><span class="sxs-lookup"><span data-stu-id="89c6c-189">The tool starts by displaying a splash screen explaining its purpose.</span></span> <span data-ttu-id="89c6c-190">Fare clic su Avanti per passare alla schermata di "Selezionare un'opzione di installazione", come illustrata nella figura 1.</span><span class="sxs-lookup"><span data-stu-id="89c6c-190">Click Next to advance to the "Select a Setup Option" screen, which is shown in Figure 1.</span></span> <span data-ttu-id="89c6c-191">Da qui è possibile scegliere di aggiungere i servizi delle applicazioni di oggetti di database o rimuoverli da un database.</span><span class="sxs-lookup"><span data-stu-id="89c6c-191">From here you can choose to add the application services database objects or remove them from a database.</span></span> <span data-ttu-id="89c6c-192">Poiché si vuole aggiungere questi oggetti nel database di produzione, selezionare l'opzione "Configura SQL Server per i servizi dell'applicazione" e fare clic su Avanti.</span><span class="sxs-lookup"><span data-stu-id="89c6c-192">Because we want to add these objects to the production database, select the "Configure SQL Server for application services" option and click Next.</span></span>


[![C<span data-ttu-id="89c6c-193">impostare come configurare SQL Server per i servizi applicazione]</span><span class="sxs-lookup"><span data-stu-id="89c6c-193">hoose to Configure SQL Server for Application Services]</span></span>(configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)

<span data-ttu-id="89c6c-194">**Figura 1**: Scegliere di configurare SQL Server per i servizi dell'applicazione ([fare clic per visualizzare l'immagine con dimensioni normali](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="89c6c-194">**Figure 1**: Choose to Configure SQL Server for Application Services ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span></span>


<span data-ttu-id="89c6c-195">Nella finestra "Selezionare il Server e Database" schermata richiede per le informazioni per connettersi al database.</span><span class="sxs-lookup"><span data-stu-id="89c6c-195">In "Select the Server and Database" screen prompts for information to connect to the database.</span></span> <span data-ttu-id="89c6c-196">Immettere il server di database, le credenziali di sicurezza e il nome del database fornito all'utente da società di hosting web e fare clic su Avanti.</span><span class="sxs-lookup"><span data-stu-id="89c6c-196">Enter the database server, the security credentials, and the database name supplied to you by your web hosting company and click Next.</span></span>

> [!NOTE]
> <span data-ttu-id="89c6c-197">Dopo aver immesso il server di database e credenziali è potrebbe verificarsi un errore quando si espande l'elenco di riepilogo a discesa di database.</span><span class="sxs-lookup"><span data-stu-id="89c6c-197">After entering your database server and credentials you may get an error when expanding the database drop-down list.</span></span> <span data-ttu-id="89c6c-198">Il `aspnet_regsql.exe` dello strumento di query di `sysdatabases` tabella di sistema per recuperare un elenco di database nel server, ma alcuni web hosting bloccare le aziende i server di database in modo che queste informazioni non sono disponibili pubblicamente.</span><span class="sxs-lookup"><span data-stu-id="89c6c-198">The `aspnet_regsql.exe` tool queries the `sysdatabases` system table to retrieve a list of databases on the server, but some web hosting companies lock down their database servers so that this information is not publicly available.</span></span> <span data-ttu-id="89c6c-199">Se si verifica questo errore è possibile digitare il nome del database direttamente nell'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="89c6c-199">If you get this error you can type the database name directly into the drop-down list.</span></span>


[![S<span data-ttu-id="89c6c-200">gli oggetti degli strumenti con il Database le informazioni di connessione dotto]</span><span class="sxs-lookup"><span data-stu-id="89c6c-200">upply the Tool With Your Database s Connection Information]</span></span>(configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)

<span data-ttu-id="89c6c-201">**Figura 2**: Specificare gli oggetti degli strumenti con il Database le informazioni di connessione ([fare clic per visualizzare l'immagine con dimensioni normali](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="89c6c-201">**Figure 2**: Supply the Tool With Your Database s Connection Information ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="89c6c-202">La schermata successiva sono riepilogate le azioni che verranno eseguite, vale a dire che gli oggetti di database dell'applicazione Servizi stanno per essere aggiunto al database specificato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-202">The subsequent screen summarizes the actions that are about to take place, namely that the application services database objects are going to be added to the specified database.</span></span> <span data-ttu-id="89c6c-203">Fare clic su Avanti per completare questa azione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-203">Click Next to complete this action.</span></span> <span data-ttu-id="89c6c-204">Dopo alcuni istanti, viene visualizzata la schermata finale, notare che sono stati aggiunti gli oggetti di database (vedere la figura 3).</span><span class="sxs-lookup"><span data-stu-id="89c6c-204">After a few moments, the final screen is displayed, noting that the database objects have been added (see Figure 3).</span></span>


[![S<span data-ttu-id="89c6c-205">rrore!</span><span class="sxs-lookup"><span data-stu-id="89c6c-205">uccess!</span></span> <span data-ttu-id="89c6c-206">Gli oggetti di Database di servizi di applicazione sono stati aggiunti al Database di produzione]</span><span class="sxs-lookup"><span data-stu-id="89c6c-206">The Application Services Database Objects Were Added to the Production Database]</span></span>(configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)

<span data-ttu-id="89c6c-207">**Figura 3**: Operazione completata</span><span class="sxs-lookup"><span data-stu-id="89c6c-207">**Figure 3**: Success!</span></span> <span data-ttu-id="89c6c-208">L'applicazione Servizi di Database sono oggetti aggiunti al Database di produzione ([fare clic per visualizzare l'immagine con dimensioni normali](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="89c6c-208">The Application Services Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span></span>


<span data-ttu-id="89c6c-209">Per verificare che gli oggetti di database di servizi di applicazione sono stati aggiunti al database di produzione, aprire SQL Server Management Studio e connettersi al database di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-209">To verify that the application services database objects were successfully added to the production database, open SQL Server Management Studio and connect to your production database.</span></span> <span data-ttu-id="89c6c-210">Come illustrato nella figura 4, si noterà ora le tabelle di database di servizi di applicazione nel database `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`e così via.</span><span class="sxs-lookup"><span data-stu-id="89c6c-210">As Figure 4 shows, you should now see the application services database tables in your database, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`, and so forth.</span></span>


[![C<span data-ttu-id="89c6c-211">conferma che nel Database di produzione sono stati aggiunti gli oggetti di Database]</span><span class="sxs-lookup"><span data-stu-id="89c6c-211">onfirm That the Database Objects Were Added to the Production Database]</span></span>(configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)

<span data-ttu-id="89c6c-212">**Figura 4**: Verificare che gli oggetti di Database sono stati aggiunti al Database di produzione ([fare clic per visualizzare l'immagine con dimensioni normali](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="89c6c-212">**Figure 4**: Confirm That the Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span></span>


<span data-ttu-id="89c6c-213">È necessario usare il `aspnet_regsql.exe` strumento quando si distribuisce l'applicazione web per la prima volta o per la prima volta dopo avere avviato usando i servizi delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="89c6c-213">You will only need to use the `aspnet_regsql.exe` tool when deploying your web application for the first time or for the first time after you have started using the application services.</span></span> <span data-ttu-id="89c6c-214">Dopo aver installato questi oggetti di database nel database di produzione che non dovranno essere nuovamente aggiunto o modificato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-214">Once these database objects are on the production database they won't need to be re-added or modified.</span></span>

### <a name="copying-user-accounts-from-development-to-production"></a><span data-ttu-id="89c6c-215">Copia gli account utente, dallo sviluppo alla produzione</span><span class="sxs-lookup"><span data-stu-id="89c6c-215">Copying User Accounts from Development to Production</span></span>

<span data-ttu-id="89c6c-216">Quando si usa la `SqlMembershipProvider` e `SqlRoleProvider` classi del provider per archiviare le informazioni di servizi dell'applicazione in un database di SQL Server, le informazioni di account e il ruolo utente vengono archiviate in un'ampia gamma di tabelle di database, tra cui `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, e `aspnet_UsersInRoles`, tra gli altri.</span><span class="sxs-lookup"><span data-stu-id="89c6c-216">When using the `SqlMembershipProvider` and `SqlRoleProvider` provider classes to store the application services information in a SQL Server database, the user account and role information is stored in a variety of database tables, including `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, and `aspnet_UsersInRoles`, among others.</span></span> <span data-ttu-id="89c6c-217">Se durante lo sviluppo si creano gli account utente nell'ambiente di sviluppo è possibile replicare gli account utente nell'ambiente di produzione copiando i record corrispondenti da tabelle di database applicabile.</span><span class="sxs-lookup"><span data-stu-id="89c6c-217">If during development you create user accounts in the development environment you can replicate those user accounts in production by copying the corresponding records from the applicable database tables.</span></span> <span data-ttu-id="89c6c-218">Se si usa la pubblicazione guidata Database per distribuire gli oggetti di database di servizi di applicazione che si sia scelto anche per copiare i record, che genera gli account utente creati in fase di sviluppo per essere anche in produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-218">If you used the Database Publishing Wizard to deploy the application services database objects you may have also elected to copy the records, which would result in the user accounts created in development to also be on production.</span></span> <span data-ttu-id="89c6c-219">Tuttavia, a seconda delle impostazioni di configurazione, è probabile che gli utenti con account creati in fase di sviluppo e copiati nell'ambiente di produzione sono in grado di accedere dal sito Web di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-219">But, depending on your configuration settings, you may find that those users whose accounts were created in development and copied to production are unable to login from the production website.</span></span> <span data-ttu-id="89c6c-220">Quali sono i vantaggi?</span><span class="sxs-lookup"><span data-stu-id="89c6c-220">What gives?</span></span>

<span data-ttu-id="89c6c-221">Il `SqlMembershipProvider` e `SqlRoleProvider` classi del provider sono state progettate in modo che un singolo database può essere utilizzato come un archivio utente, per dispongono di più applicazioni, in cui ogni applicazione può, in teoria, gli utenti con sovrapposizione dei nomi utente e i ruoli con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="89c6c-221">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes were designed such that a single database could serve as a user store for multiple applications, where each application could, in theory, have users with overlapping usernames and roles with the same name.</span></span> <span data-ttu-id="89c6c-222">Per consentire questa flessibilità, il database conserva un elenco delle applicazioni nel `aspnet_Applications` tabella e ogni utente è associato a una di queste applicazioni.</span><span class="sxs-lookup"><span data-stu-id="89c6c-222">To allow for this flexibility, the database maintains a list of applications in the `aspnet_Applications` table, and each user is associated with one of these applications.</span></span> <span data-ttu-id="89c6c-223">In particolare, il `aspnet_Users` tabella ha un `ApplicationId` colonna che associa ogni utente a un record nel `aspnet_Applications` tabella.</span><span class="sxs-lookup"><span data-stu-id="89c6c-223">Specifically, the `aspnet_Users` table has an `ApplicationId` column that ties each user to a record in the `aspnet_Applications` table.</span></span>

<span data-ttu-id="89c6c-224">Oltre al `ApplicationId` colonna, il `aspnet_Applications` tabella include inoltre un `ApplicationName` colonna che fornisce un nome più Converto per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-224">In addition to the `ApplicationId` column, the `aspnet_Applications` table also includes an `ApplicationName` column, which provides a more human-friendly name for the application.</span></span> <span data-ttu-id="89c6c-225">Quando un sito Web tenta di usare un account utente, ad esempio la convalida di credenziali di un utente s dalla pagina di accesso, è necessario indicare il `SqlMembershipProvider` classe dell'applicazione da usare.</span><span class="sxs-lookup"><span data-stu-id="89c6c-225">When a website attempts to work with a user account, such as validating a user s credentials from the login page, it must tell the `SqlMembershipProvider` class what application to work with.</span></span> <span data-ttu-id="89c6c-226">Avviene in genere ciò specificando il nome dell'applicazione e questo valore deriva dalla configurazione del provider s nel `Web.config` : in particolare tramite il `applicationName` attributo.</span><span class="sxs-lookup"><span data-stu-id="89c6c-226">It usually does this by supplying the application name, and the this value comes from the provider s configuration in `Web.config` - specifically via the `applicationName` attribute.</span></span>

<span data-ttu-id="89c6c-227">Ma cosa succede se il `applicationName` attributo viene omesso in `Web.config`?</span><span class="sxs-lookup"><span data-stu-id="89c6c-227">But what happens if the `applicationName` attribute is not specified in `Web.config`?</span></span> <span data-ttu-id="89c6c-228">In questo caso l'appartenenza al sistema utilizza il percorso radice dell'applicazione come il `applicationName` valore.</span><span class="sxs-lookup"><span data-stu-id="89c6c-228">In such a case the Membership system uses the application root path as the `applicationName` value.</span></span> <span data-ttu-id="89c6c-229">Se il `applicationName` attributo non è impostato in modo esplicito `Web.config`, quindi, è possibile che l'ambiente di sviluppo e l'ambiente di produzione usare una radice dell'applicazione diverso e pertanto verrà associati a diversi dell'applicazione nomi dei servizi dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-229">If the `applicationName` attribute is not explicitly set in `Web.config`, then, there is the possibility that the development environment and production environment use a different application root and therefore will be associated with different application names in the application services.</span></span> <span data-ttu-id="89c6c-230">Se si verifica una mancata corrispondenza di questo tipo, quindi gli utenti creati nell'ambiente di sviluppo avrà un `ApplicationId` che non corrisponde al valore di `ApplicationId` valore per l'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-230">If such a mismatch occurs then those users created in the development environment will have an `ApplicationId` value that does not match with the `ApplicationId` value for the production environment.</span></span> <span data-ttu-id="89c6c-231">Il risultato finale è che gli utenti non saranno in grado di eseguire l'accesso.</span><span class="sxs-lookup"><span data-stu-id="89c6c-231">The net result is that those users won't be able to login.</span></span>

> [!NOTE]
> <span data-ttu-id="89c6c-232">Se ci si ritrova in questo caso - con gli account utente copiati nell'ambiente di produzione con una mancata corrispondenza `ApplicationId` valore, è possibile scrivere una query per aggiornare questi errato `ApplicationId` i valori per il `ApplicationId` utilizzata in produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-232">If you find yourself in this situation - with user accounts copied to production with a mismatched `ApplicationId` value - you could write a query to update these incorrect `ApplicationId` values to the `ApplicationId` used on production.</span></span> <span data-ttu-id="89c6c-233">Al termine dell'aggiornamento, gli utenti con account creati nell'ambiente di sviluppo a questo punto sarebbe in grado di accedere all'applicazione web in produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-233">Once updated, the users whose accounts were created on the development environment would now be able to sign into the web application on production.</span></span>


<span data-ttu-id="89c6c-234">La buona notizia è che vi sia un semplice passaggio da eseguire per assicurarsi che i due ambienti usino gli stessi `ApplicationId` - impostare in modo esplicito il `applicationName` attributo `Web.config` per tutti i provider di servizi di applicazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-234">The good news is that there is a simple step you can take to ensure that the two environments use the same `ApplicationId` - explicitly set the `applicationName` attribute in `Web.config` for all of your application services providers.</span></span> <span data-ttu-id="89c6c-235">Impostato in modo esplicito il `applicationName` attributo su "BookReviews" il `<membership>` e `<roleManager>` elementi come questo frammento di codice da `Web.config` Mostra.</span><span class="sxs-lookup"><span data-stu-id="89c6c-235">I explicitly set the `applicationName` attribute to "BookReviews" in the `<membership>` and `<roleManager>` elements as this snippet from `Web.config` shows.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample4.xml)]

<span data-ttu-id="89c6c-236">Per altre informazioni sull'impostazione di `applicationName` attributo e i motivi per cui, fare riferimento a [ *Scott Guthrie* ](https://weblogs.asp.net/scottgu/) , il post di blog [ *sempre impostato applicationName proprietà durante la configurazione di appartenenza ASP.NET e altri provider*](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="89c6c-236">For more discussion on setting the `applicationName` attribute and the rationale behind it, refer to [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s blog post, [*Always set the applicationName property when configuring ASP.NET Membership and other Providers*](https://weblogs.asp.net/scottgu/443634).</span></span>

### <a name="managing-user-accounts-in-the-production-environment"></a><span data-ttu-id="89c6c-237">Gestione degli account utente nell'ambiente di produzione</span><span class="sxs-lookup"><span data-stu-id="89c6c-237">Managing User Accounts in the Production Environment</span></span>

<span data-ttu-id="89c6c-238">ASP.NET Web Site Administration Tool (WSAT) semplifica creare e gestire gli account utente, definire e applicare i ruoli e spiegare chiaramente le regole di autorizzazione basata su utenti e ruoli.</span><span class="sxs-lookup"><span data-stu-id="89c6c-238">The ASP.NET Web Site Administration Tool (WSAT) makes it easy to create and manage user accounts, define and apply roles, and spell out user- and role-based authorization rules.</span></span> <span data-ttu-id="89c6c-239">È possibile avviare il WSAT da Visual Studio passare a Esplora soluzioni e scegliendo l'icona di configurazione di ASP.NET o per i menu sito Web o un progetto e selezionando la voce di menu configurazione ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="89c6c-239">You can launch the WSAT from Visual Studio by going to the Solution Explorer and clicking the ASP.NET Configuration icon or by going to the Website or Project menus and selecting the ASP.NET Configuration menu item.</span></span> <span data-ttu-id="89c6c-240">Sfortunatamente, il WSAT funzionano solo con i siti Web locali.</span><span class="sxs-lookup"><span data-stu-id="89c6c-240">Unfortunately, the WSAT can only work with local websites.</span></span> <span data-ttu-id="89c6c-241">Pertanto, è possibile utilizzare il WSAT dalla workstation per gestire il sito Web nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-241">Therefore, you cannot use the WSAT from your workstation to manage the website in the production environment.</span></span>

<span data-ttu-id="89c6c-242">La buona notizia è che tutte le funzionalità esposte fornito dal WSAT è disponibile a livello di codice tramite l'appartenenza e ruoli API; Inoltre, molte delle schermate di WSAT usare i controlli correlati all'accesso ASP.NET standard.</span><span class="sxs-lookup"><span data-stu-id="89c6c-242">The good news is that all of the functionality exposed provided by the WSAT is available programmatically through the Membership and Roles APIs; furthermore, many of the WSAT screens use the standard ASP.NET Login-related controls.</span></span> <span data-ttu-id="89c6c-243">In breve, è possibile aggiungere le pagine ASP.NET nel sito Web che offrono le funzionalità di gestione necessarie.</span><span class="sxs-lookup"><span data-stu-id="89c6c-243">In short, you can add ASP.NET pages to your website that offer the necessary management capabilities.</span></span>

<span data-ttu-id="89c6c-244">È importante ricordare che un'esercitazione precedente aggiornato l'applicazione web le recensioni dei libri per includere un `~/Admin` e questa cartella è stato configurato per consentire agli utenti il ruolo di amministratore.</span><span class="sxs-lookup"><span data-stu-id="89c6c-244">Recall that an earlier tutorial updated the Book Reviews web application to include an `~/Admin` folder, and this folder has been configured to only allow users in the Admin role.</span></span> <span data-ttu-id="89c6c-245">Ho aggiunto una pagina in tale cartella denominata `CreateAccount.aspx` da cui un amministratore può creare un nuovo account utente.</span><span class="sxs-lookup"><span data-stu-id="89c6c-245">I added a page to that folder named `CreateAccount.aspx` from which an administrator can create a new user account.</span></span> <span data-ttu-id="89c6c-246">Questa pagina Usa il controllo CreateUserWizard per visualizzare la logica di back-end e interfaccia utente per la creazione di un nuovo account utente.</span><span class="sxs-lookup"><span data-stu-id="89c6c-246">This page uses the CreateUserWizard control to display the user interface and backend logic for creating a new user account.</span></span> <span data-ttu-id="89c6c-247">Novità più, personalizzate del controllo per includere una casella di controllo in cui viene richiesto se il nuovo utente deve anche essere aggiunto al ruolo di amministratore (vedere la figura 5).</span><span class="sxs-lookup"><span data-stu-id="89c6c-247">What s more, I customized the control to include a CheckBox that prompts whether the new user should also be added to the Admin role (see Figure 5).</span></span> <span data-ttu-id="89c6c-248">Con un po' di lavoro è possibile creare un set personalizzato di pagine che implementa le attività correlate alla gestione utente e il ruolo che in caso contrario a fornire il WSAT.</span><span class="sxs-lookup"><span data-stu-id="89c6c-248">With a little bit of work you can build a custom set of pages that implements the user and role management-related tasks that would otherwise be provided by the WSAT.</span></span>

> [!NOTE]
> <span data-ttu-id="89c6c-249">Per altre informazioni sull'uso di appartenenza e ruoli API con i controlli correlati all'accesso Web di ASP.NET, assicurarsi di leggere mio [ *sito Web di sicurezza esercitazioni*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="89c6c-249">For more information on using the Membership and Roles APIs along with the Login-related ASP.NET Web controls, be sure to read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span> <span data-ttu-id="89c6c-250">Per altre informazioni sulla personalizzazione del controllo CreateUserWizard, vedere la [ *creazione degli account utente* ](../../older-versions-security/membership/creating-user-accounts-cs.md) e [ *archiviare informazioni utente aggiuntive* ](../../older-versions-security/membership/storing-additional-user-information-cs.md) esercitazioni o guarda [ *Erich Peterson* ](http://www.erichpeterson.com/) articolo s [ *personalizzare il controllo CreateUserWizard* ](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="89c6c-250">For more on customizing the CreateUserWizard control refer to the [*Creating User Accounts*](../../older-versions-security/membership/creating-user-accounts-cs.md) and [*Storing Additional User Information*](../../older-versions-security/membership/storing-additional-user-information-cs.md) tutorials, or check out [*Erich Peterson*](http://www.erichpeterson.com/) s article, [*Customizing the CreateUserWizard Control*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span></span>


[![A<span data-ttu-id="89c6c-251">dministrators possono creare nuovi account utente]</span><span class="sxs-lookup"><span data-stu-id="89c6c-251">dministrators Can Create New User Accounts]</span></span>(configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)

<span data-ttu-id="89c6c-252">**Figura 5**: Gli amministratori possono creare nuovi account utente ([fare clic per visualizzare l'immagine con dimensioni normali](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="89c6c-252">**Figure 5**: Administrators Can Create New User Accounts ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span></span>


<span data-ttu-id="89c6c-253">Se necessaria la funzionalità completa l'estrazione WSAT [ *Rolling Your proprio strumento Amministrazione sito Web*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in cui l'autore Dan Clem descrive il processo di compilazione di uno strumento simile a WSAT personalizzato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-253">If you need the full functionality of the WSAT check out [*Rolling Your Own Web Site Administration Tool*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in which author Dan Clem walks through the process of building a custom WSAT-like tool.</span></span> <span data-ttu-id="89c6c-254">Dan condivide il suo codice sorgente s dell'applicazione (in c#) e vengono fornite istruzioni dettagliate per aggiungerla al sito Web ospitato.</span><span class="sxs-lookup"><span data-stu-id="89c6c-254">Dan shares his application s source code (in C#) and provides step-by-step instructions for adding it to your hosted website.</span></span>

## <a name="summary"></a><span data-ttu-id="89c6c-255">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="89c6c-255">Summary</span></span>

<span data-ttu-id="89c6c-256">Quando si distribuisce un'applicazione web che usa l'implementazione di database di servizi di applicazione è necessario assicurarsi che il database di produzione contiene gli oggetti di database necessari.</span><span class="sxs-lookup"><span data-stu-id="89c6c-256">When deploying a web application that uses the application services database implementation you must first ensure that the production database has the requisite database objects.</span></span> <span data-ttu-id="89c6c-257">È possibile aggiungere questi oggetti usando le tecniche descritte nel *distribuzione di un Database* esercitazione; in alternativa, è possibile usare il `aspnet_regsql.exe` dello strumento, come abbiamo visto in questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-257">These objects can be added using the techniques discussed in the *Deploying a Database* tutorial; alternatively, you can use the `aspnet_regsql.exe` tool, as we saw in this tutorial.</span></span> <span data-ttu-id="89c6c-258">Altri problemi illustrate nel sono incentrate sulla sincronizzazione utilizzato negli ambienti di sviluppo e produzione (che è importante se si desidera che gli utenti e ruoli creati nell'ambiente di sviluppo per essere valido in produzione) e le tecniche per il nome di applicazione gestione di utenti e ai ruoli nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="89c6c-258">Other challenges we touched on center around synchronizing the application name used in the development and production environments (which is important if you want users and roles created in the development environment to be valid on production) and techniques for managing the users and roles in the production environment.</span></span>

<span data-ttu-id="89c6c-259">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="89c6c-259">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="89c6c-260">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="89c6c-260">Further Reading</span></span>

<span data-ttu-id="89c6c-261">Per altre informazioni sugli argomenti trattati in questa esercitazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="89c6c-261">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [*<span data-ttu-id="89c6c-262">Strumento di registrazione ASP.NET SQL Server (aspnet_regsql.exe)</span><span class="sxs-lookup"><span data-stu-id="89c6c-262">ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)</span></span>*](https://msdn.microsoft.com/library/ms229862.aspx)
- [*<span data-ttu-id="89c6c-263">Creare il Database di servizi dell'applicazione per SQL Server</span><span class="sxs-lookup"><span data-stu-id="89c6c-263">Creating the Application Services Database for SQL Server</span></span>*](https://msdn.microsoft.com/library/x28wfk74.aspx)
- [*<span data-ttu-id="89c6c-264">Creazione dello Schema di appartenenza in SQL Server</span><span class="sxs-lookup"><span data-stu-id="89c6c-264">Creating the Membership Schema in SQL Server</span></span>*](../../older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs.md)
- [*<span data-ttu-id="89c6c-265">Analisi ASP.NET s appartenenza, ruoli e profilo</span><span class="sxs-lookup"><span data-stu-id="89c6c-265">Examining ASP.NET s Membership, Roles, and Profile</span></span>*](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [*<span data-ttu-id="89c6c-266">In sequenza il proprio strumento Amministrazione sito Web</span><span class="sxs-lookup"><span data-stu-id="89c6c-266">Rolling Your Own Web Site Administration Tool</span></span>*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)
- [*<span data-ttu-id="89c6c-267">Sito Web sicurezza esercitazioni</span><span class="sxs-lookup"><span data-stu-id="89c6c-267">Website Security Tutorials</span></span>*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)
- [*<span data-ttu-id="89c6c-268">Panoramica sullo strumento Amministrazione sito Web</span><span class="sxs-lookup"><span data-stu-id="89c6c-268">Web Site Administration Tool Overview</span></span>*](https://msdn.microsoft.com/library/yy40ytx0.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="89c6c-269">[Precedente](configuring-the-production-web-application-to-use-the-production-database-cs.md)
> [Successivo](strategies-for-database-development-and-deployment-cs.md)</span><span class="sxs-lookup"><span data-stu-id="89c6c-269">[Previous](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[Next](strategies-for-database-development-and-deployment-cs.md)</span></span>
