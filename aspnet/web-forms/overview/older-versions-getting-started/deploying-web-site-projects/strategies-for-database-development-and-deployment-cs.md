---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-cs
title: Strategie per lo sviluppo e la distribuzioneC#di database () | Microsoft Docs
author: rick-anderson
description: Quando si distribuisce un'applicazione guidata dai dati per la prima volta, è possibile copiare in modo cieco il database nell'ambiente di sviluppo nell'ambiente di produzione. B...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 3e8b0627-3eb7-488e-807e-067cba7cec05
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-cs
msc.type: authoredcontent
ms.openlocfilehash: 4d9dbaf41926b43af171619ee34f58da84b5dab1
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78627785"
---
# <a name="strategies-for-database-development-and-deployment-c"></a><span data-ttu-id="cb8b5-104">Strategie per lo sviluppo e la distribuzione del database (C#)</span><span class="sxs-lookup"><span data-stu-id="cb8b5-104">Strategies for Database Development and Deployment (C#)</span></span>

<span data-ttu-id="cb8b5-105">di [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="cb8b5-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="cb8b5-106">Scaricare PDF</span><span class="sxs-lookup"><span data-stu-id="cb8b5-106">Download PDF</span></span>](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial10_DBDevel_cs.pdf)

> <span data-ttu-id="cb8b5-107">Quando si distribuisce un'applicazione guidata dai dati per la prima volta, è possibile copiare in modo cieco il database nell'ambiente di sviluppo nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-107">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="cb8b5-108">Tuttavia, l'esecuzione di una copia cieca nelle distribuzioni successive sovrascriverà tutti i dati immessi nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-108">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="cb8b5-109">La distribuzione di un database implica invece l'applicazione delle modifiche apportate al database di sviluppo dall'ultima distribuzione nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-109">Instead, deploying a database involves applying the changes made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="cb8b5-110">In questa esercitazione vengono esaminate tali problemi e vengono offerte diverse strategie per semplificare l'applicazione delle modifiche apportate al database dopo l'ultima distribuzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-110">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="introduction"></a><span data-ttu-id="cb8b5-111">Introduzione</span><span class="sxs-lookup"><span data-stu-id="cb8b5-111">Introduction</span></span>

<span data-ttu-id="cb8b5-112">Come illustrato nelle esercitazioni precedenti, la distribuzione di un'applicazione ASP.NET comporta la copia del contenuto pertinente dall'ambiente di sviluppo all'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-112">As discussed in previous tutorials, deploying an ASP.NET application entails copying the pertinent content from the development environment to the production environment.</span></span> <span data-ttu-id="cb8b5-113">La distribuzione non è un evento unico, bensì un evento che si verifica ogni volta che viene rilasciata una nuova versione del software o quando vengono identificati e risolti i bug o le problematiche di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-113">Deployment is not a one-time event, but rather something that happens every time a new version of the software is released or when bugs or security concerns have been identified and addressed.</span></span> <span data-ttu-id="cb8b5-114">Quando si copiano pagine, immagini, file JavaScript e altri file di ASP.NET nell'ambiente di produzione, non è necessario preoccuparsi di come questi file sono stati modificati dopo l'ultima distribuzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-114">When copying ASP.NET pages, images, JavaScript files, and other such files to the production environment you do not need to concern yourself with how these file have been changed since the last deployment.</span></span> <span data-ttu-id="cb8b5-115">È possibile copiare in modo cieco il file nell'ambiente di produzione, sovrascrivendo il contenuto esistente.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-115">You can blindly copy the file to production, overwriting the existing content.</span></span> <span data-ttu-id="cb8b5-116">Sfortunatamente, questa semplicità non si estende alla distribuzione del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-116">Unfortunately, this simplicity does not extend to deploying the database.</span></span>

<span data-ttu-id="cb8b5-117">Quando si distribuisce un'applicazione guidata dai dati per la prima volta, è possibile copiare in modo cieco il database nell'ambiente di sviluppo nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-117">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="cb8b5-118">Tuttavia, l'esecuzione di una copia cieca nelle distribuzioni successive sovrascriverà tutti i dati immessi nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-118">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="cb8b5-119">La distribuzione di un database implica invece l'applicazione delle *modifiche* apportate al database di sviluppo dall'ultima distribuzione nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-119">Instead, deploying a database involves applying the *changes* made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="cb8b5-120">In questa esercitazione vengono esaminate tali problemi e vengono offerte diverse strategie per semplificare l'applicazione delle modifiche apportate al database dopo l'ultima distribuzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-120">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="the-challenges-of-deploying-a-database"></a><span data-ttu-id="cb8b5-121">Problemi di distribuzione di un database</span><span class="sxs-lookup"><span data-stu-id="cb8b5-121">The Challenges of Deploying a Database</span></span>

<span data-ttu-id="cb8b5-122">Prima che un'applicazione guidata dai dati venisse distribuita per la prima volta, esiste un solo database, ovvero il database nell'ambiente di sviluppo, motivo per cui quando si distribuisce un'applicazione guidata dai dati per la prima volta, è possibile copiare in modo cieco il database nel ambiente di sviluppo nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-122">Before a data-driven application has been deployed for the first time, there is only one database, namely the database in the development environment, which is why when deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="cb8b5-123">Tuttavia, una volta distribuita l'applicazione, sono presenti due copie del database: una in fase di sviluppo e una nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-123">But once the application has been deployed there are two copies of the database: one in development and one in production.</span></span>

<span data-ttu-id="cb8b5-124">Tra le distribuzioni i database di sviluppo e di produzione possono non essere sincronizzati. Sebbene lo schema del database di produzione rimanga invariato, è possibile che lo schema del database di sviluppo cambi quando vengono aggiunte nuove funzionalità.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-124">Between deployments the development and production databases can become out of sync. While the production database s schema remains unchanged, the development database s schema may change as new features are added.</span></span> <span data-ttu-id="cb8b5-125">È possibile aggiungere o rimuovere colonne, tabelle, viste o stored procedure.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-125">You might add or remove columns, tables, views, or stored procedures.</span></span> <span data-ttu-id="cb8b5-126">Potrebbero inoltre essere presenti dati importanti che vengono aggiunti al database di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-126">There may also be important data that gets added to the development database.</span></span> <span data-ttu-id="cb8b5-127">Molte applicazioni guidate dai dati includono tabelle di ricerca compilate con dati hardcoded, specifici dell'applicazione, che non sono modificabili dall'utente.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-127">Many data-driven applications include lookup tables populated with hard-coded, application-specific data that are not user-editable.</span></span> <span data-ttu-id="cb8b5-128">Ad esempio, un sito Web dell'asta potrebbe avere un elenco a discesa con scelte che descrivono la condizione dell'elemento di cui è in corso l'asta: nuovo, come nuovo, positivo e equo.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-128">For example, an auction website might have a drop-down list with choices that describe the condition of the item being auctioned: New, Like New, Good, and Fair.</span></span> <span data-ttu-id="cb8b5-129">Anziché impostare come hardcoded queste opzioni direttamente nell'elenco a discesa, è in genere preferibile inserirle in una tabella di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-129">Rather than hard-coding these options directly in the drop-down list it is usually better to place them in a database table.</span></span> <span data-ttu-id="cb8b5-130">Se, durante lo sviluppo, viene aggiunta una nuova condizione denominata poor alla tabella, quando si distribuisce l'applicazione è necessario aggiungere questo stesso record alla tabella di ricerca nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-130">If, during development, a new condition named Poor is added to the table then when deploying the application this same record needs to be added to the lookup table in the production database.</span></span>

<span data-ttu-id="cb8b5-131">Idealmente, la distribuzione del database implica la copia del database dallo sviluppo alla produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-131">Ideally, deploying the database would involve copying the database from development to production.</span></span> <span data-ttu-id="cb8b5-132">Tenere tuttavia presente che dopo aver distribuito l'applicazione e aver ripreso lo sviluppo, il database di produzione viene popolato con dati reali da utenti reali.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-132">But keep in mind that after you have deployed the application and resumed development, the production database is being populated with real data from real users.</span></span> <span data-ttu-id="cb8b5-133">Se pertanto si desidera semplicemente copiare il database dallo sviluppo alla produzione alla successiva distribuzione, è necessario sovrascrivere il database di produzione e perdere i dati esistenti.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-133">Therefore, if you were to simply copy the database from development to production at the next deployment you would overwrite the production database and lose its existing data.</span></span> <span data-ttu-id="cb8b5-134">Il risultato finale è che la distribuzione del database si riduce all'applicazione delle modifiche apportate al database di sviluppo dall'ultima distribuzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-134">The net result is that deploying the database boils down to applying the changes made to the development database since the last deployment.</span></span>

<span data-ttu-id="cb8b5-135">Poiché la distribuzione di un database comporta l'applicazione delle modifiche nello schema e, possibilmente, dei dati dall'ultima distribuzione, una cronologia delle modifiche deve essere gestita (o determinata in fase di distribuzione), in modo che tali modifiche possano essere applicate alla produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-135">Because deploying a database involves applying the changes in the schema and, possibly, the data since the last deployment, a history of changes must be maintained (or determined at deploy-time) so that those changes can be applied on production.</span></span> <span data-ttu-id="cb8b5-136">Sono disponibili diverse tecniche per la gestione e l'applicazione delle modifiche al modello di dati.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-136">There are a variety of techniques for managing and applying changes to the data model.</span></span>

### <a name="defining-the-baseline"></a><span data-ttu-id="cb8b5-137">Definizione della linea di base</span><span class="sxs-lookup"><span data-stu-id="cb8b5-137">Defining the Baseline</span></span>

<span data-ttu-id="cb8b5-138">Per gestire le modifiche apportate al database dell'applicazione, è necessario avere uno stato iniziale, una linea di base a cui vengono applicate le modifiche.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-138">To maintain the changes to your application s database you need to have some starting state, a baseline to which the changes are applied to.</span></span> <span data-ttu-id="cb8b5-139">A un estremo lo stato iniziale potrebbe essere un database vuoto senza tabelle, viste o stored procedure.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-139">At one extreme the starting state could be an empty database with no tables, views, or stored procedures.</span></span> <span data-ttu-id="cb8b5-140">Una linea di base di questo tipo produce un log delle modifiche di grandi dimensioni poiché deve includere la creazione di tutte le tabelle, le viste e le stored procedure del database insieme alle modifiche apportate dopo la distribuzione iniziale.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-140">Such a baseline results in a large change log because it must include the creation of all of the database s tables, views, and stored procedures along with any changes made after the initial deployment.</span></span> <span data-ttu-id="cb8b5-141">All'altra estremità dello spettro è possibile impostare la linea di base come la versione del database inizialmente distribuita nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-141">At the other end of the spectrum you could set the baseline as the version of the database that is initially deployed to the production environment.</span></span> <span data-ttu-id="cb8b5-142">Questa scelta comporta un log delle modifiche molto più piccolo, perché include solo le modifiche apportate al database dopo la prima distribuzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-142">This choice results in a much smaller change log because it only includes the changes made to the database following the first deployment.</span></span> <span data-ttu-id="cb8b5-143">Si tratta dell'approccio che preferisco.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-143">This is the approach I prefer.</span></span> <span data-ttu-id="cb8b5-144">Naturalmente è possibile scegliere un approccio più intermedio, definendo la linea di base come un certo punto tra la creazione iniziale del database e la prima distribuzione del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-144">And of course you can choose a more middle of the road approach, defining the baseline as some point between the initial creation of the database and when the database is first deployed.</span></span>

<span data-ttu-id="cb8b5-145">Dopo aver scelto una linea di base, provare a generare uno script SQL che può essere eseguito per ricreare la versione di base.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-145">Once you have chosen a baseline consider generating a SQL script that can be executed to recreate the baseline version.</span></span> <span data-ttu-id="cb8b5-146">Tale script consente di ricreare rapidamente la versione di base del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-146">Such a script makes it possible to quickly recreate the baseline version of the database.</span></span> <span data-ttu-id="cb8b5-147">Questa funzionalità è particolarmente utile nei progetti di grandi dimensioni, in cui possono essere presenti più sviluppatori che lavorano sul progetto o ambienti aggiuntivi, ad esempio test o staging, per ognuno dei quali è necessaria una propria copia del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-147">This functionality is especially useful in larger projects, where there may be multiple developers working on the project or additional environments, such as testing or staging, that each need their own copy of the database.</span></span>

<span data-ttu-id="cb8b5-148">Sono disponibili diversi strumenti a disposizione per generare uno script SQL della versione di base.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-148">There are a variety of tools at your disposal to generate a SQL script of the baseline version.</span></span> <span data-ttu-id="cb8b5-149">Da SQL Server Management Studio (SSMS) è possibile fare clic con il pulsante destro del mouse sul database, passare al sottomenu attività e scegliere l'opzione genera script.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-149">From SQL Server Management Studio (SSMS) you can right-click on the database, go to the Tasks submenu, and choose the Generate Scripts option.</span></span> <span data-ttu-id="cb8b5-150">Verrà avviata la creazione guidata script, che è possibile impostare per generare un file contenente i comandi SQL per creare gli oggetti del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-150">This launches the Script Wizard, which you can instruct to generate a file that contains the SQL commands to create your database s objects.</span></span> <span data-ttu-id="cb8b5-151">Un'altra opzione è la pubblicazione guidata database, che consente di generare i comandi SQL per creare solo lo schema del database, ma anche i dati nelle tabelle di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-151">Another option is the Database Publishing Wizard, which can generate the SQL commands to not only create the database schema, but also the data in the database tables.</span></span> <span data-ttu-id="cb8b5-152">La pubblicazione guidata database è stata esaminata in dettaglio nell'esercitazione *distribuzione di un database* .</span><span class="sxs-lookup"><span data-stu-id="cb8b5-152">The Database Publishing Wizard was examined in detail back in the *Deploying a Database* tutorial.</span></span> <span data-ttu-id="cb8b5-153">Indipendentemente dallo strumento usato, è necessario disporre di un file di script che può essere usato per ricreare la versione di base del database, in caso di necessità.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-153">Regardless of what tool you use, in the end you should have a script file that you can use to recreate the baseline version of your database, should the need arise.</span></span>

## <a name="documenting-the-database-changes-in-prose"></a><span data-ttu-id="cb8b5-154">Documentazione delle modifiche del database in prosa</span><span class="sxs-lookup"><span data-stu-id="cb8b5-154">Documenting the Database Changes in Prose</span></span>

<span data-ttu-id="cb8b5-155">Il modo più semplice per gestire un log delle modifiche al modello di dati durante la fase di sviluppo consiste nel registrare le modifiche in prosa.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-155">The simplest way to maintain a log of changes to the data model during the development phase is to record the changes in prose.</span></span> <span data-ttu-id="cb8b5-156">Se, ad esempio, durante lo sviluppo di un'applicazione già distribuita si aggiunge una nuova colonna alla tabella `Employees`, si rimuove una colonna dalla tabella `Orders` e si aggiunge una nuova tabella (`ProductCategories`), si manterrà un file di testo o un documento di Microsoft Word con la cronologia seguente:</span><span class="sxs-lookup"><span data-stu-id="cb8b5-156">For example, if during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`), you would maintain a text file or Microsoft Word document with the following history:</span></span>

<a id="0.4_table01"></a>

| <span data-ttu-id="cb8b5-157">**Data di modifica**</span><span class="sxs-lookup"><span data-stu-id="cb8b5-157">**Change Date**</span></span> | <span data-ttu-id="cb8b5-158">**Modificare i dettagli**</span><span class="sxs-lookup"><span data-stu-id="cb8b5-158">**Change Details**</span></span> |
| --- | --- |
| <span data-ttu-id="cb8b5-159">2009-02-03:</span><span class="sxs-lookup"><span data-stu-id="cb8b5-159">2009-02-03:</span></span> | <span data-ttu-id="cb8b5-160">Aggiunta della colonna `DepartmentID` (`int`, NOT NULL) alla tabella `Employees`.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-160">Added column `DepartmentID` (`int`, NOT NULL) to the `Employees` table.</span></span> <span data-ttu-id="cb8b5-161">Aggiunta di un vincolo FOREIGN KEY da `Departments.DepartmentID` a `Employees.DepartmentID`.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-161">Added a foreign key constraint from `Departments.DepartmentID` to `Employees.DepartmentID`.</span></span> |
| <span data-ttu-id="cb8b5-162">2009-02-05:</span><span class="sxs-lookup"><span data-stu-id="cb8b5-162">2009-02-05:</span></span> | <span data-ttu-id="cb8b5-163">Rimuovere `TotalWeight` di colonna dalla tabella `Orders`.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-163">Removed column `TotalWeight` from the `Orders` table.</span></span> <span data-ttu-id="cb8b5-164">Dati già acquisiti nei record di `OrderDetails` associati.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-164">Data already captured in associated `OrderDetails` records.</span></span> |
| <span data-ttu-id="cb8b5-165">2009-02-12:</span><span class="sxs-lookup"><span data-stu-id="cb8b5-165">2009-02-12:</span></span> | <span data-ttu-id="cb8b5-166">Creazione della tabella `ProductCategories`.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-166">Created the `ProductCategories` table.</span></span> <span data-ttu-id="cb8b5-167">Sono disponibili tre colonne: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`) e `Active` (`bit`, `NOT NULL`).</span><span class="sxs-lookup"><span data-stu-id="cb8b5-167">There are three columns: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), and `Active` (`bit`, `NOT NULL`).</span></span> <span data-ttu-id="cb8b5-168">È stato aggiunto un vincolo PRIMARY KEY a `ProductCategoryID`e il valore predefinito è 1 per `Active`.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-168">Added a primary key constraint to `ProductCategoryID`, and a default value of 1 to `Active`.</span></span> |

<span data-ttu-id="cb8b5-169">Questo approccio presenta numerosi svantaggi.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-169">There are a number of drawbacks to this approach.</span></span> <span data-ttu-id="cb8b5-170">Per i principianti, non c'è speranza per l'automazione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-170">For starters, there is no hope for automation.</span></span> <span data-ttu-id="cb8b5-171">Ogni volta che queste modifiche devono essere applicate a un database, ad esempio quando viene distribuita l'applicazione, uno sviluppatore deve implementare manualmente ogni modifica, una alla volta.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-171">Anytime these changes need to be applied to a database - such as when the application is deployed - a developer must manually implement each change, one at a time.</span></span> <span data-ttu-id="cb8b5-172">Inoltre, se è necessario ricostruire una particolare versione del database dalla linea di base utilizzando il log delle modifiche, l'operazione richiederà più tempo quando le dimensioni del log aumentano.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-172">Moreover, if you need to reconstruct a particular version of the database from the baseline using the change log, doing so will take more and more time as the size of the log grows.</span></span> <span data-ttu-id="cb8b5-173">Un altro svantaggio di questo metodo è che la chiarezza e il livello di dettaglio di ogni voce del log delle modifiche vengono lasciati alla persona che registra la modifica.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-173">Another drawback to this method is that the clarity and level of detail of each change log entry is left to the person recording the change.</span></span> <span data-ttu-id="cb8b5-174">In un team con più sviluppatori potrebbero essere presenti voci più dettagliate, più leggibili o più precise di altre.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-174">In a team with multiple developers some may make more detailed, more readable, or more precise entries than others.</span></span> <span data-ttu-id="cb8b5-175">Sono inoltre possibili errori di digitazione e altri errori di immissione di dati correlati agli utenti.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-175">Also, typos and other human-related data entry errors are possible.</span></span>

<span data-ttu-id="cb8b5-176">Il vantaggio principale della documentazione delle modifiche del database in prosa è la semplicità.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-176">The primary benefit of documenting the database changes in prose is simplicity.</span></span> <span data-ttu-id="cb8b5-177">Non è necessario avere familiarità con la sintassi SQL per la creazione e la modifica di oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-177">You don t need familiarity with the SQL syntax for creating and altering database objects.</span></span> <span data-ttu-id="cb8b5-178">È invece possibile registrare le modifiche in prosa e implementarle tramite l'interfaccia utente grafica di SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-178">Instead, you can record the changes in prose and implement them through SQL Server Management Studio s graphical user interface.</span></span>

<span data-ttu-id="cb8b5-179">La gestione del log delle modifiche in prosa è, di per sé, non è molto sofisticata e non può essere utilizzata correttamente con determinati progetti, ad esempio quelli che hanno un ambito elevato, presentano modifiche frequenti al modello di dati o coinvolgono più sviluppatori.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-179">Maintaining your change log in prose is, admittedly, not very sophisticated and won't work well with certain projects, such as ones that are large in scope, have frequent changes to the data model, or involve multiple developers.</span></span> <span data-ttu-id="cb8b5-180">Tuttavia, questo approccio funziona molto bene in progetti di piccole dimensioni che hanno solo modifiche occasionali al modello di dati e in cui lo sviluppatore di soli non dispone di uno sfondo sicuro nella sintassi SQL per la creazione e la modifica di oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-180">But I have seen this approach work quite well in small, one-man projects that have only occasional changes to the data model and where the solo developer does not have a strong background in the SQL syntax for creating and altering database objects.</span></span>

> [!NOTE]
> <span data-ttu-id="cb8b5-181">Sebbene le informazioni nel log delle modifiche siano tecnicamente necessarie solo fino alla fase di distribuzione, è consigliabile mantenere una cronologia delle modifiche.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-181">While the information in the change log is, technically, only needed until deploy-time, I recommend keeping a history of changes.</span></span> <span data-ttu-id="cb8b5-182">Tuttavia, invece di gestire un singolo file di log delle modifiche in continua crescita, è consigliabile disporre di un file di log delle modifiche diverso per ogni versione del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-182">But rather than maintaining a single, ever growing change log file, consider having a different change log file for each database version.</span></span> <span data-ttu-id="cb8b5-183">In genere, è consigliabile eseguire la versione del database ogni volta che viene distribuita.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-183">Typically you will want to version the database each time it is deployed.</span></span> <span data-ttu-id="cb8b5-184">Mantenendo un log dei log delle modifiche è possibile, a partire dalla linea di base, ricreare qualsiasi versione del database eseguendo gli script di log delle modifiche a partire dalla versione 1 e continuando fino a raggiungere la versione che è necessario ricreare.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-184">By maintaining a log of change logs you can, starting from the baseline, recreate any database version by executing the change log scripts starting from version 1 and continuing until you reach the version you need to recreate.</span></span>

## <a name="recording-the-sql-change-statements"></a><span data-ttu-id="cb8b5-185">Registrazione delle istruzioni SQL Change</span><span class="sxs-lookup"><span data-stu-id="cb8b5-185">Recording the SQL Change Statements</span></span>

<span data-ttu-id="cb8b5-186">Lo svantaggio principale della gestione del log delle modifiche in prosa è la mancanza di automazione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-186">The primary drawback of maintaining the change log in prose is the lack of automation.</span></span> <span data-ttu-id="cb8b5-187">Idealmente, l'implementazione delle modifiche del database nel database di produzione in fase di distribuzione sarebbe semplice come fare clic su un pulsante per eseguire uno script anziché eseguire manualmente un elenco di istruzioni.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-187">Ideally, implementing the database changes to the production database at deploy-time would be as easy as clicking a button to execute a script rather than having to manually perform a list of instructions.</span></span> <span data-ttu-id="cb8b5-188">Tale automazione è possibile mantenendo un log delle modifiche che contiene i comandi SQL utilizzati per modificare il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-188">Such automation is possible by maintaining a change log that contains those SQL commands used to alter the data model.</span></span>

<span data-ttu-id="cb8b5-189">La sintassi SQL include una serie di istruzioni per la creazione e la modifica di diversi oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-189">The SQL syntax includes a number of statements for creating and modifying various database objects.</span></span> <span data-ttu-id="cb8b5-190">Ad esempio, l' [*istruzione CREATE TABLE*](https://msdn.microsoft.com/library/ms174979.aspx), se eseguita, crea una nuova tabella con le colonne e i vincoli specificati.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-190">For example, the [*CREATE TABLE statement*](https://msdn.microsoft.com/library/ms174979.aspx), when executed, creates a new table with the specified columns and constraints.</span></span> <span data-ttu-id="cb8b5-191">L' [*istruzione ALTER TABLE*](https://msdn.microsoft.com/library/ms190273.aspx) modifica una tabella esistente, aggiungendo, rimuovendo o modificando le colonne o i vincoli.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-191">The [*ALTER TABLE statement*](https://msdn.microsoft.com/library/ms190273.aspx) modifies an existing table, adding, removing, or modifying its columns or constraints.</span></span> <span data-ttu-id="cb8b5-192">Sono inoltre disponibili istruzioni per la creazione, la modifica e l'eliminazione di indici, viste, funzioni definite dall'utente, stored procedure, trigger e altri oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-192">There are also statements to create, modify, and drop indexes, views, user-defined functions, stored procedures, triggers, and other database objects.</span></span>

<span data-ttu-id="cb8b5-193">Tornando all'esempio precedente, immagine che durante lo sviluppo di un'applicazione già distribuita si aggiunge una nuova colonna alla tabella `Employees`, si rimuove una colonna dalla tabella `Orders` e si aggiunge una nuova tabella (`ProductCategories`).</span><span class="sxs-lookup"><span data-stu-id="cb8b5-193">Returning to our earlier example, image that during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`).</span></span> <span data-ttu-id="cb8b5-194">Tali azioni comporteranno un file di log delle modifiche con i seguenti comandi SQL:</span><span class="sxs-lookup"><span data-stu-id="cb8b5-194">Such actions would result in a change log file with the following SQL commands:</span></span>

[!code-sql[Main](strategies-for-database-development-and-deployment-cs/samples/sample1.sql)]

<span data-ttu-id="cb8b5-195">Il push di queste modifiche nel database di produzione in fase di distribuzione è un'operazione con un clic: aprire SQL Server Management Studio, connettersi al database di produzione, aprire una nuova finestra query, incollare il contenuto del log delle modifiche e fare clic su Esegui per eseguire lo script.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-195">Pushing these changes to the production database at deploy-time is a one-click operation: open SQL Server Management Studio, connect to your production database, open a New Query window, paste the contents of the change log, and click Execute to run the script.</span></span>

## <a name="using-a-comparison-tool-to-synchronize-the-data-models"></a><span data-ttu-id="cb8b5-196">Utilizzo di uno strumento di confronto per sincronizzare i modelli di dati</span><span class="sxs-lookup"><span data-stu-id="cb8b5-196">Using a Comparison Tool to Synchronize the Data Models</span></span>

<span data-ttu-id="cb8b5-197">La documentazione delle modifiche del database in prosa è semplice, ma l'implementazione delle modifiche richiede che uno sviluppatore modifichi ogni modifica nel database di produzione una alla volta. la documentazione dei comandi Change SQL consente di implementare le modifiche nel database di produzione in modo semplice e rapido, facendo clic su un pulsante, ma è necessario acquisire familiarità con le istruzioni e la sintassi SQL per la creazione e la modifica di oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-197">Documenting database changes in prose is easy, but implementing the changes requires a developer to make each change on the production database one at a time; documenting the change SQL commands makes implementing those changes on the production database as easy and quick as clicking a button, but requires learning and mastering the SQL statements and syntax for creating and altering database objects.</span></span> <span data-ttu-id="cb8b5-198">Gli strumenti di confronto dei database hanno il meglio di entrambi gli approcci ed eliminano il peggior.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-198">Database comparison tools take the best from both approaches and discard the worst.</span></span>

<span data-ttu-id="cb8b5-199">Uno strumento di confronto di database confronta lo schema o i dati di due database e visualizza un report di riepilogo che mostra il modo in cui i database sono diversi.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-199">A database comparison tool compares the schema or data of two databases and displays a summary report showing you how the databases differ.</span></span> <span data-ttu-id="cb8b5-200">Quindi, facendo clic su un pulsante, è possibile generare i comandi SQL per la sincronizzazione di uno o più oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-200">Then, with the click of a button, you can generate the SQL commands for synchronizing one or more database objects.</span></span> <span data-ttu-id="cb8b5-201">In breve, è possibile utilizzare uno strumento di confronto del database per confrontare i database di sviluppo e di produzione in fase di distribuzione, generando un file contenente i comandi SQL che, quando eseguiti, applicheranno le modifiche allo schema del database di produzione in modo che rispecchia lo schema del database di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-201">In a nutshell, you can use a database comparison tool to compare the development and production databases at deploy-time, generating a file that contains the SQL commands that, when executed, will apply the changes to the production database s schema so that it mirrors the development database s schema.</span></span>

<span data-ttu-id="cb8b5-202">Sono disponibili diversi strumenti di confronto dei database di terze parti offerti da molti fornitori diversi.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-202">There are a variety of third-party database comparison tools offered by many different vendors.</span></span> <span data-ttu-id="cb8b5-203">Uno di questi esempi è [*SQL compare*](http://www.red-gate.com/products/SQL_Compare/), di [*Red Gate Software*](http://www.red-gate.com/).</span><span class="sxs-lookup"><span data-stu-id="cb8b5-203">One such example is [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), by [*Red Gate Software*](http://www.red-gate.com/).</span></span> <span data-ttu-id="cb8b5-204">Consente di esaminare il processo di utilizzo di SQL compare per confrontare e sincronizzare gli schemi dei database di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-204">Let s walk through the process of using SQL Compare to compare and synchronize the development and production databases schemas.</span></span>

> [!NOTE]
> <span data-ttu-id="cb8b5-205">Al momento della stesura di questo articolo, la versione corrente di SQL compare è la versione 7,1, con l'edizione standard che costa $395.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-205">At the time of this writing the current version of SQL Compare was version 7.1, with the Standard Edition costing $395.</span></span> <span data-ttu-id="cb8b5-206">È possibile seguire la procedura scaricando una versione di valutazione gratuita di 14 giorni.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-206">You can follow along by downloading a free 14-day trial.</span></span>

<span data-ttu-id="cb8b5-207">Quando SQL compare avvia la finestra di dialogo progetti di confronto, Visualizza i progetti di confronto SQL salvati.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-207">When SQL Compare starts the Comparison Projects dialog box opens, showing the saved SQL Compare projects.</span></span> <span data-ttu-id="cb8b5-208">Creare un nuovo progetto.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-208">Create a new project.</span></span> <span data-ttu-id="cb8b5-209">Viene avviata la configurazione guidata progetto, che richiede informazioni sui database da confrontare (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="cb8b5-209">This launches the Project Configuration wizard, which prompts for information about the databases to compare (see Figure 1).</span></span> <span data-ttu-id="cb8b5-210">Immettere le informazioni per i database dell'ambiente di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-210">Enter the information for the development and production environment databases.</span></span>

<span data-ttu-id="cb8b5-211">[![confrontare i database di sviluppo e di produzione](strategies-for-database-development-and-deployment-cs/_static/image2.jpg)](strategies-for-database-development-and-deployment-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="cb8b5-211">[![Compare the Development and Production Databases](strategies-for-database-development-and-deployment-cs/_static/image2.jpg)](strategies-for-database-development-and-deployment-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="cb8b5-212">**Figura 1**: confrontare i database di sviluppo e di produzione ([fare clic per visualizzare l'immagine con dimensioni complete](strategies-for-database-development-and-deployment-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="cb8b5-212">**Figure 1**: Compare the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image3.jpg))</span></span>

> [!NOTE]
> <span data-ttu-id="cb8b5-213">Se il database dell'ambiente di sviluppo è un file di database di SQL Express Edition nella cartella `App_Data` del sito Web, sarà necessario registrare il database nel server di database SQL Server Express per selezionarlo dalla finestra di dialogo mostrata nella figura 1.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-213">If your development environment database is a SQL Express Edition database file in the `App_Data` folder of your website you will need to register the database in the SQL Server Express database server in order to select it from the dialog box shown in Figure 1.</span></span> <span data-ttu-id="cb8b5-214">Il modo più semplice per eseguire questa operazione consiste nell'aprire SQL Server Management Studio (SSMS), connettersi al server di database SQL Server Express e collegare il database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-214">The easiest way to accomplish this is to open SQL Server Management Studio (SSMS), connect to the SQL Server Express database server, and attach the database.</span></span> <span data-ttu-id="cb8b5-215">Se SSMS non è installato nel computer, è possibile scaricare e installare la versione gratuita di [*SQL Server 2008 Management Studio Basic*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span><span class="sxs-lookup"><span data-stu-id="cb8b5-215">If you do not have SSMS installed on your computer you can download and install the free [*SQL Server 2008 Management Studio Basic version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span></span>

<span data-ttu-id="cb8b5-216">Oltre a selezionare i database da confrontare, è anche possibile specificare una serie di impostazioni di confronto nella scheda Opzioni. Una delle opzioni che è possibile attivare è il "ignorare i nomi di vincolo e di indice".</span><span class="sxs-lookup"><span data-stu-id="cb8b5-216">In addition to selecting the databases to compare, you can also specify a variety of comparison settings from the Options tab. One option you may want to turn on is the "Ignore constraint and index names."</span></span> <span data-ttu-id="cb8b5-217">Si ricordi che nell'esercitazione precedente sono stati aggiunti gli oggetti di database dei servizi dell'applicazione ai database di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-217">Recall that in the preceding tutorial we added the application services database objects to the development and production databases.</span></span> <span data-ttu-id="cb8b5-218">Se è stato utilizzato lo strumento `aspnet_regsql.exe` per creare questi oggetti nel database di produzione, si noterà che i nomi dei vincoli PRIMARY KEY e Unique sono diversi tra i database di sviluppo e di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-218">If you used the `aspnet_regsql.exe` tool to create these objects on the production database then you will find that the primary key and unique constraint names differ between the development and production databases.</span></span> <span data-ttu-id="cb8b5-219">Di conseguenza, SQL compare contrassegna tutte le tabelle dei servizi dell'applicazione come diverse.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-219">Consequently, SQL Compare will flag all of the application services tables as differing.</span></span> <span data-ttu-id="cb8b5-220">È possibile lasciare deselezionata l'opzione "Ignora nomi di vincoli e indici" e sincronizzare i nomi dei vincoli oppure indicare a SQL compare di ignorare tali differenze.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-220">You can either leave the "Ignore constraint and index names" unchecked and synchronize the constraint names, or instruct SQL Compare to ignore these differences.</span></span>

<span data-ttu-id="cb8b5-221">Dopo aver selezionato i database da confrontare (ed esaminando le opzioni di confronto), fare clic sul pulsante Confronta ora per avviare il confronto.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-221">After selecting the databases to compare (and reviewing the comparison options), click the Compare Now button to begin the comparison.</span></span> <span data-ttu-id="cb8b5-222">Nei prossimi secondi, SQL compare esamina gli schemi dei due database e genera un report di come sono diversi.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-222">Over the next several seconds, SQL Compare examines the schemas of the two databases and generates a report of how they differ.</span></span> <span data-ttu-id="cb8b5-223">Ho apportato alcune modifiche al database di sviluppo per illustrare il modo in cui tali discrepanze sono indicate nell'interfaccia SQL compare.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-223">I ve purposefully made some modifications to the development database to show how such discrepancies are noted in the SQL Compare interface.</span></span> <span data-ttu-id="cb8b5-224">Come illustrato nella figura 2, ho aggiunto una colonna di `BirthDate` alla tabella `Authors`, ho rimosso la colonna `ISBN` dalla tabella `Books` e ho aggiunto una nuova tabella, `Ratings`, che consente agli utenti di visitare il sito di valutare i libri esaminati.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-224">As Figure 2 shows, I ve added a `BirthDate` column to the `Authors` table, removed the `ISBN` column from the `Books` table, and added a new table, `Ratings`, which is meant to let users visiting the site rate the reviewed books.</span></span>

> [!NOTE]
> <span data-ttu-id="cb8b5-225">Le modifiche apportate al modello di dati in questa esercitazione sono state eseguite per illustrare l'utilizzo di uno strumento di confronto del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-225">The data model changes made in this tutorial were done to illustrate using a database comparison tool.</span></span> <span data-ttu-id="cb8b5-226">Queste modifiche non vengono trovate nel database nelle esercitazioni future.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-226">You will not find these changes in the database in future tutorials.</span></span>

<span data-ttu-id="cb8b5-227">[![SQL compare elenca le differenze tra i database di sviluppo e di produzione](strategies-for-database-development-and-deployment-cs/_static/image5.jpg)](strategies-for-database-development-and-deployment-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="cb8b5-227">[![SQL Compare Lists the Differences Between the Development and Production Databases](strategies-for-database-development-and-deployment-cs/_static/image5.jpg)](strategies-for-database-development-and-deployment-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="cb8b5-228">**Figura 2**: SQL compare elenca le differenze tra i database di sviluppo e di produzione ([fare clic per visualizzare l'immagine con dimensioni complete](strategies-for-database-development-and-deployment-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="cb8b5-228">**Figure 2**: SQL Compare Lists the Differences Between the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image6.jpg))</span></span>

<span data-ttu-id="cb8b5-229">SQL compare suddivide gli oggetti di database in gruppi, mostrando rapidamente quali oggetti sono presenti in entrambi i database, ma sono diversi, quali oggetti sono presenti in un database ma non l'altro e quali oggetti sono identici.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-229">SQL Compare breaks down the database objects into groups, quickly showing you what objects exist in both databases but are different, which objects exist in one database but not the other, and which objects are identical.</span></span> <span data-ttu-id="cb8b5-230">Come si può notare, esistono due oggetti che sono presenti in entrambi i database, ma sono diversi: la tabella `Authors`, che include una colonna aggiunta, e la tabella `Books`, che ne è stata rimossa.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-230">As you can see, there are two objects that exist in both databases but are different: the `Authors` table, which had a column added, and the `Books` table, which had one removed.</span></span> <span data-ttu-id="cb8b5-231">Esiste un oggetto che esiste solo nel database di sviluppo, ovvero la tabella `Ratings` appena creata.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-231">There is one object that exists only in the development database, namely the newly created `Ratings` table.</span></span> <span data-ttu-id="cb8b5-232">In entrambi i database sono presenti 117 oggetti identici.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-232">And there are 117 objects that are identical in both databases.</span></span>

<span data-ttu-id="cb8b5-233">Selezionando un oggetto di database viene visualizzata la finestra differenze SQL, che mostra il modo in cui questi oggetti sono diversi.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-233">Selecting a database object displays the SQL Differences window, which shows how these objects differ.</span></span> <span data-ttu-id="cb8b5-234">La finestra differenze SQL, visualizzata nella parte inferiore della figura 2, evidenzia che la tabella `Authors` nel database di sviluppo dispone della colonna `BirthDate`, che non è presente nella tabella `Authors` nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-234">The SQL Differences window, displayed at the bottom in Figure 2, highlights that the `Authors` table in the development database has the `BirthDate` column, which is not found in the `Authors` table on the production database.</span></span>

<span data-ttu-id="cb8b5-235">Dopo aver esaminato le differenze e aver selezionato quali oggetti si desidera sincronizzare, il passaggio successivo consiste nel generare i comandi SQL necessari per aggiornare lo schema del database di produzione in modo che corrisponda al database di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-235">After reviewing the differences and selecting which objects you want to synchronize, the next step is to generate the SQL commands needed to update the production database s schema to match the development database.</span></span> <span data-ttu-id="cb8b5-236">Questa operazione viene eseguita tramite la procedura guidata di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-236">This is accomplished through the Synchronization Wizard.</span></span> <span data-ttu-id="cb8b5-237">La sincronizzazione guidata consente di confermare gli oggetti da sincronizzare e riepilogare il piano di azione (vedere la figura 3).</span><span class="sxs-lookup"><span data-stu-id="cb8b5-237">The Synchronization Wizard confirms what objects to synchronize and summarizes the action plan (see Figure 3).</span></span> <span data-ttu-id="cb8b5-238">È possibile sincronizzare immediatamente i database o generare uno script con i comandi SQL che possono essere eseguiti per lo svago.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-238">You can synchronize the databases immediately or generate a script with the SQL commands that can be run at your leisure.</span></span>

<span data-ttu-id="cb8b5-239">[![utilizzare la sincronizzazione guidata per sincronizzare gli schemi dei database](strategies-for-database-development-and-deployment-cs/_static/image8.jpg)](strategies-for-database-development-and-deployment-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="cb8b5-239">[![Use the Synchronization Wizard to Synchronize Your Databases Schemas](strategies-for-database-development-and-deployment-cs/_static/image8.jpg)](strategies-for-database-development-and-deployment-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="cb8b5-240">**Figura 3**: utilizzare la sincronizzazione guidata per sincronizzare gli schemi di database ([fare clic per visualizzare l'immagine con dimensioni complete](strategies-for-database-development-and-deployment-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="cb8b5-240">**Figure 3**: Use the Synchronization Wizard to Synchronize Your Databases Schemas ([Click to view full-size image](strategies-for-database-development-and-deployment-cs/_static/image9.jpg))</span></span>

<span data-ttu-id="cb8b5-241">Gli strumenti di confronto del database come Red Gate Software s SQL compare rendono più semplice l'applicazione delle modifiche allo schema del database di sviluppo al database di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-241">Database comparison tools like Red Gate Software s SQL Compare make applying the changes to the development database schema to the production database as easy as point and click.</span></span>

> [!NOTE]
> <span data-ttu-id="cb8b5-242">SQL compare Confronta e sincronizza due *schemi*di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-242">SQL Compare compares and synchronizes two databases *schemas*.</span></span> <span data-ttu-id="cb8b5-243">Sfortunatamente, non esegue il confronto e la sincronizzazione dei dati all'interno di due tabelle di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-243">Unfortunately, it does not compare and synchronize the data within two databases tables.</span></span> <span data-ttu-id="cb8b5-244">Red Gate Software offre un prodotto denominato [*SQL data compare*](http://www.red-gate.com/products/SQL_Data_Compare/) che confronta e sincronizza i dati tra due database, ma è un prodotto separato da SQL compare e costa un altro $395.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-244">Red Gate Software does offer a product named [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) that compares and synchronizes the data between two databases, but it is a separate product from SQL Compare and costs another $395.</span></span>

## <a name="taking-the-application-offline-during-deployment"></a><span data-ttu-id="cb8b5-245">Portare offline l'applicazione durante la distribuzione</span><span class="sxs-lookup"><span data-stu-id="cb8b5-245">Taking the Application Offline During Deployment</span></span>

<span data-ttu-id="cb8b5-246">Come illustrato in questa esercitazione, la distribuzione è un processo che prevede più passaggi: copiare le pagine ASP.NET, le pagine master, i file CSS, i file JavaScript, le immagini e altri contenuti necessari dall'ambiente di sviluppo alla produzione ambiente copia delle informazioni di configurazione specifiche dell'ambiente di produzione, se necessario; e l'applicazione delle modifiche al modello di dati dall'ultima distribuzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-246">As we ve seen throughout these tutorials, deployment is a process that involves multiple steps: copying the ASP.NET pages, master pages, CSS files, JavaScript files, images, and other necessary content from the development environment to the production environment; copying up the production environment-specific configuration information, if needed; and applying the changes to the data model since the last deployment.</span></span> <span data-ttu-id="cb8b5-247">A seconda del numero di file e della complessità delle modifiche del database, questi passaggi possono richiedere da alcuni secondi a diversi minuti per il completamento.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-247">Depending on the number of files and the complexity of your database changes, these steps can take anywhere from a few seconds to several minutes to complete.</span></span> <span data-ttu-id="cb8b5-248">Durante questa finestra, l'applicazione Web è in flusso e gli utenti che visitano il sito possono riscontrare errori o comportamenti imprevisti.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-248">During this window the web application is in flux and users visiting the site may experience errors or unexpected behavior.</span></span>

<span data-ttu-id="cb8b5-249">Quando si distribuisce un sito Web, è preferibile portare l'applicazione Web "offline" fino a quando la distribuzione non è stata completata.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-249">When deploying a website it is best to take the web application "offline" until deployment has completed.</span></span> <span data-ttu-id="cb8b5-250">Portare l'applicazione offline (e riportarla al termine del processo di distribuzione) è facile quanto caricare un file e quindi eliminarlo.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-250">Taking the application offline (and bringing it back up once the deployment process has finished) is as easy as uploading a file and then deleting it.</span></span> <span data-ttu-id="cb8b5-251">A partire da ASP.NET 2,0, la semplice presenza di un file denominato `app_offline.htm` nella directory radice dell'applicazione porta l'intero sito Web "offline".</span><span class="sxs-lookup"><span data-stu-id="cb8b5-251">Starting with ASP.NET 2.0, the mere presence of a file named `app_offline.htm` in the application s root directory takes the entire website "offline."</span></span> <span data-ttu-id="cb8b5-252">Qualsiasi richiesta a una pagina di ASP.NET in tale sito viene automaticamente risposta con il contenuto del file di `app_offline.htm`.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-252">Any request to an ASP.NET page on that site is automatically responded with the contents of the `app_offline.htm` file.</span></span> <span data-ttu-id="cb8b5-253">Una volta rimosso il file, l'applicazione torna in linea.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-253">Once that file is removed, the application comes back online.</span></span>

<span data-ttu-id="cb8b5-254">Quando si porta offline un'applicazione durante la distribuzione, è sufficiente caricare un file di `app_offline.htm` nella directory radice dell'ambiente di produzione prima di iniziare il processo di distribuzione e quindi eliminarlo (o rinominarlo in un altro) al termine della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-254">Taking an application offline during deployment, then, is as simple as uploading an `app_offline.htm` file to the production environment s root directory prior to beginning the deployment process and then deleting it (or renaming it to something else) once deployment is complete.</span></span> <span data-ttu-id="cb8b5-255">Per altre informazioni su questa tecnica, fare riferimento all'articolo di John Peterson s, portando un' [*applicazione ASP.NET offline*](http://www.15seconds.com/issue/061207.htm).</span><span class="sxs-lookup"><span data-stu-id="cb8b5-255">For more information on this technique refer to John Peterson s article, Taking an [*ASP.NET Application Offline*](http://www.15seconds.com/issue/061207.htm).</span></span>

## <a name="summary"></a><span data-ttu-id="cb8b5-256">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="cb8b5-256">Summary</span></span>

<span data-ttu-id="cb8b5-257">Il problema principale della distribuzione di un'applicazione basata sui dati riguarda la distribuzione del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-257">The main challenge in deploying a data-driven application centers around deploying the database.</span></span> <span data-ttu-id="cb8b5-258">Poiché sono presenti due versioni del database, una nell'ambiente di sviluppo e una nell'ambiente di produzione, questi due schemi di database possono risultare non sincronizzati Man mano che vengono aggiunte nuove funzionalità in fase di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-258">Because there are two versions of the database - one in the development environment and one in the production environment - these two databases schemas can become out of sync as new features are added in development.</span></span> <span data-ttu-id="cb8b5-259">Poiché il database di produzione viene popolato con dati reali da utenti reali, non è possibile sovrascrivere il database di produzione con il database di sviluppo modificato come quando si distribuiscono i file che costituiscono l'applicazione (pagine ASP.NET, file di immagine e così via).</span><span class="sxs-lookup"><span data-stu-id="cb8b5-259">What s more, because the production database as being populated with real data from real users, you cannot overwrite the production database with the modified development database like you can when deploying the files that make up the application (the ASP.NET pages, image files, and so forth).</span></span> <span data-ttu-id="cb8b5-260">Al contrario, la distribuzione di un database comporta l'implementazione del set preciso di modifiche apportate al database di sviluppo nel database di produzione dopo l'ultima distribuzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-260">Instead, deploying a database entails implementing the precise set of changes made to the development database on the production database since the last deployment.</span></span>

<span data-ttu-id="cb8b5-261">Questa esercitazione ha esaminato tre tecniche per la gestione e l'applicazione di un log delle modifiche del database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-261">This tutorial looked at three techniques for maintaining and applying a log of database changes.</span></span> <span data-ttu-id="cb8b5-262">L'approccio più semplice consiste nel registrare le modifiche in prosa.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-262">The simplest approach is to record the changes in prose.</span></span> <span data-ttu-id="cb8b5-263">Questa tattica rende l'implementazione di queste modifiche nel database di produzione un processo manuale, non richiede la conoscenza dei comandi SQL per la creazione e la modifica di oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-263">While this tactic makes implementing these changes on the production database a manual process, it does not require knowledge of the SQL commands for creating and altering database objects.</span></span> <span data-ttu-id="cb8b5-264">Un approccio più sofisticato, che è molto più appetibile in progetti o progetti di maggiori dimensioni con più sviluppatori, consiste nel registrare le modifiche come una serie di comandi SQL.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-264">A more sophisticated approach, and one that is much more palatable in larger projects or projects with multiple developers, is to record the changes as a series of SQL commands.</span></span> <span data-ttu-id="cb8b5-265">Questo consente di velocizzare le modifiche apportate al database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-265">This greatly hastens rolling out these changes to the target database.</span></span> <span data-ttu-id="cb8b5-266">Il meglio di entrambi gli approcci può essere eseguito usando uno strumento di confronto dei database, ad esempio Red Gate Software s SQL compare.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-266">The best of both approaches can be achieved by using a database comparison tool, such as Red Gate Software s SQL Compare.</span></span>

<span data-ttu-id="cb8b5-267">Questa esercitazione conclude l'attenzione sulla distribuzione di un'applicazione basata sui dati.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-267">This tutorial concludes our focus on deploying a data-driven application.</span></span> <span data-ttu-id="cb8b5-268">Il set di esercitazioni successivo esamina come rispondere agli errori nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-268">The next set of tutorials looks at how to respond to errors in the production environment.</span></span> <span data-ttu-id="cb8b5-269">Si esaminerà il modo in cui visualizzare una pagina di errore descrittiva piuttosto che lo schermo giallo della morte.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-269">We'll look at how to display a friendly error page rather instead of the Yellow Screen of Death.</span></span> <span data-ttu-id="cb8b5-270">Verrà illustrato come registrare i dettagli dell'errore e come avvisare l'utente quando si verificano tali errori.</span><span class="sxs-lookup"><span data-stu-id="cb8b5-270">And we'll see how to log the error s details and how to alert you when such errors occur.</span></span>

<span data-ttu-id="cb8b5-271">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="cb8b5-271">Happy Programming!</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="cb8b5-272">[Precedente](configuring-a-website-that-uses-application-services-cs.md)
> [Successivo](displaying-a-custom-error-page-cs.md)</span><span class="sxs-lookup"><span data-stu-id="cb8b5-272">[Previous](configuring-a-website-that-uses-application-services-cs.md)
[Next](displaying-a-custom-error-page-cs.md)</span></span>
