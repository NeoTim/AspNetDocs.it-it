---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
title: Informazioni sui servizi Web di ASP.NET AJAX | Microsoft Docs
author: scottcate
description: I servizi Web sono parte integrante di .NET Framework che fornisce una soluzione multipiattaforma per lo scambio di dati tra sistemi distribuiti. Sebbene Web...
ms.author: riande
ms.date: 03/28/2008
ms.assetid: 3332d6e7-e2e1-4144-b805-e71d51e7e415
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
msc.type: authoredcontent
ms.openlocfilehash: eac3d53fd871d0cb5a2870488ce752c057cc5b1a
ms.sourcegitcommit: 45754124123403520b9fa2e706a4d1292494159b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/12/2020
ms.locfileid: "86162822"
---
# <a name="understanding-aspnet-ajax-web-services"></a><span data-ttu-id="c5f5b-104">Informazioni sui servizi Web di ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="c5f5b-104">Understanding ASP.NET AJAX Web Services</span></span>

<span data-ttu-id="c5f5b-105">di [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="c5f5b-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="c5f5b-106">Scarica il PDF</span><span class="sxs-lookup"><span data-stu-id="c5f5b-106">Download PDF</span></span>](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial05_Web_Services_with_MS_Ajax_cs.pdf)

> <span data-ttu-id="c5f5b-107">I servizi Web sono parte integrante di .NET Framework che fornisce una soluzione multipiattaforma per lo scambio di dati tra sistemi distribuiti.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-107">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="c5f5b-108">Sebbene i servizi Web vengono in genere utilizzati per consentire diversi sistemi operativi, modelli a oggetti e linguaggi di programmazione per inviare e ricevere dati, possono essere utilizzati anche per inserire in modo dinamico i dati in una pagina ASP.NET AJAX o inviare dati da una pagina a un sistema back-end.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-108">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="c5f5b-109">Questa operazione può essere eseguita senza ricorrere a operazioni di postback.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-109">All of this can be done without resorting to postback operations.</span></span>

## <a name="calling-web-services-with-aspnet-ajax"></a><span data-ttu-id="c5f5b-110">Chiamata di servizi Web con ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="c5f5b-110">Calling Web Services with ASP.NET AJAX</span></span>

<span data-ttu-id="c5f5b-111">Dan Wahlin</span><span class="sxs-lookup"><span data-stu-id="c5f5b-111">Dan Wahlin</span></span>

<span data-ttu-id="c5f5b-112">I servizi Web sono parte integrante di .NET Framework che fornisce una soluzione multipiattaforma per lo scambio di dati tra sistemi distribuiti.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-112">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="c5f5b-113">Sebbene i servizi Web vengono in genere utilizzati per consentire diversi sistemi operativi, modelli a oggetti e linguaggi di programmazione per inviare e ricevere dati, possono essere utilizzati anche per inserire in modo dinamico i dati in una pagina ASP.NET AJAX o inviare dati da una pagina a un sistema back-end.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-113">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="c5f5b-114">Questa operazione può essere eseguita senza ricorrere a operazioni di postback.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-114">All of this can be done without resorting to postback operations.</span></span>

<span data-ttu-id="c5f5b-115">Sebbene il controllo UpdatePanel ASP.NET AJAX fornisca un modo semplice per consentire a AJAX qualsiasi pagina di ASP.NET, in alcuni casi è possibile che sia necessario accedere in modo dinamico ai dati sul server senza utilizzare un UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-115">While the ASP.NET AJAX UpdatePanel control provides a simple way to AJAX enable any ASP.NET page, there may be times when you need to dynamically access data on the server without using an UpdatePanel.</span></span> <span data-ttu-id="c5f5b-116">Questo articolo illustra come eseguire questa operazione tramite la creazione e l'utilizzo di servizi Web all'interno di pagine ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-116">In this article you'll see how to accomplish this by creating and consuming Web Services within ASP.NET AJAX pages.</span></span>

<span data-ttu-id="c5f5b-117">Questo articolo è incentrato sulle funzionalità disponibili nelle estensioni di base di ASP.NET AJAX, oltre che su un controllo abilitato per il servizio Web in ASP.NET AJAX Toolkit denominato AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-117">This article will focus on functionality available in the core ASP.NET AJAX Extensions as well as a Web Service enabled control in the ASP.NET AJAX Toolkit called the AutoCompleteExtender.</span></span> <span data-ttu-id="c5f5b-118">Gli argomenti trattati includono la definizione di servizi Web abilitati per AJAX, la creazione di proxy client e la chiamata di servizi Web con JavaScript.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-118">Topics covered include defining AJAX-enabled Web Services, creating client proxies and calling Web Services with JavaScript.</span></span> <span data-ttu-id="c5f5b-119">Si vedrà anche come le chiamate del servizio Web possono essere effettuate direttamente ai metodi della pagina ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-119">You'll also see how Web Service calls can be made directly to ASP.NET page methods.</span></span>

## <a name="web-services-configuration"></a><span data-ttu-id="c5f5b-120">Configurazione dei servizi Web</span><span class="sxs-lookup"><span data-stu-id="c5f5b-120">Web Services Configuration</span></span>

<span data-ttu-id="c5f5b-121">Quando viene creato un nuovo progetto di sito Web con Visual Studio 2008, il file di web.config include una serie di nuove aggiunte che potrebbero non essere note agli utenti delle versioni precedenti di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-121">When a new Web Site project is created with Visual Studio 2008, the web.config file has a number of new additions that may be unfamiliar to users of previous versions of Visual Studio.</span></span> <span data-ttu-id="c5f5b-122">Alcune di queste modifiche eseguono il mapping del prefisso "ASP" ai controlli AJAX ASP.NET in modo che possano essere utilizzate nelle pagine mentre altre definiscono gli elementi HttpHandlers e HttpModules richiesti.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-122">Some of these modifications map the "asp" prefix to ASP.NET AJAX controls so they can be used in pages while others define required HttpHandlers and HttpModules.</span></span> <span data-ttu-id="c5f5b-123">Il listato 1 Mostra le modifiche apportate all' `<httpHandlers>` elemento in web.config che influiscono sulle chiamate al servizio Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-123">Listing 1 shows modifications made to the `<httpHandlers>` element in web.config that affects Web Service calls.</span></span> <span data-ttu-id="c5f5b-124">Il valore predefinito di HttpHandler utilizzato per elaborare le chiamate con estensione asmx viene rimosso e sostituito con una classe ScriptHandlerFactory situata nell'assembly System.Web.Extensions.dll.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-124">The default HttpHandler used to process .asmx calls is removed and replaced with a ScriptHandlerFactory class located in the System.Web.Extensions.dll assembly.</span></span> <span data-ttu-id="c5f5b-125">System.Web.Extensions.dll contiene tutte le funzionalità di base usate da ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-125">System.Web.Extensions.dll contains all of the core functionality used by ASP.NET AJAX.</span></span>

<span data-ttu-id="c5f5b-126">**Listato 1. Configurazione del gestore del servizio Web AJAX ASP.NET**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-126">**Listing 1. ASP.NET AJAX Web Service Handler Configuration**</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample1.xml)]

<span data-ttu-id="c5f5b-127">Questa sostituzione HttpHandler viene eseguita per consentire le chiamate JavaScript Object Notation (JSON) da pagine ASP.NET AJAX ai servizi Web .NET usando un proxy del servizio Web JavaScript.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-127">This HttpHandler replacement is made in order to allow JavaScript Object Notation (JSON) calls to be made from ASP.NET AJAX pages to .NET Web Services using a JavaScript Web Service proxy.</span></span> <span data-ttu-id="c5f5b-128">ASP.NET AJAX invia messaggi JSON ai servizi Web in contrapposizione alle chiamate di Simple Object Access Protocol Standard (SOAP) generalmente associate ai servizi Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-128">ASP.NET AJAX sends JSON messages to Web Services as opposed to the standard Simple Object Access Protocol (SOAP) calls typically associated with Web Services.</span></span> <span data-ttu-id="c5f5b-129">In questo modo si ottiene un messaggio di richiesta e risposta più piccolo complessivo.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-129">This results in smaller request and response messages overall.</span></span> <span data-ttu-id="c5f5b-130">Consente inoltre di elaborare i dati in modo più efficiente dal lato client poiché la libreria JavaScript AJAX ASP.NET è ottimizzata per l'uso con oggetti JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-130">It also allows for more efficient client-side processing of data since the ASP.NET AJAX JavaScript library is optimized to work with JSON objects.</span></span> <span data-ttu-id="c5f5b-131">L'elenco 2 e l'elenco 3 mostrano esempi di messaggi di richiesta e risposta del servizio Web serializzati in formato JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-131">Listing 2 and Listing 3 show examples of Web Service request and response messages serialized to JSON format.</span></span> <span data-ttu-id="c5f5b-132">Il messaggio di richiesta visualizzato nel listato 2 passa un parametro Country con un valore "Belgium", mentre il messaggio di risposta nel listato 3 passa una matrice di oggetti Customer e le relative proprietà associate.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-132">The request message shown in Listing 2 passes a country parameter with a value of "Belgium" while the response message in Listing 3 passes an array of Customer objects and their associated properties.</span></span>

<span data-ttu-id="c5f5b-133">**Listato 2. Messaggio di richiesta del servizio Web serializzato in JSON**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-133">**Listing 2. Web Service Request Message Serialized to JSON**</span></span>

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample2.json)]

> <span data-ttu-id="c5f5b-134">*>[!NOTE]il nome dell'operazione viene definito come parte dell'URL del servizio Web. i messaggi di richiesta, inoltre, non vengono sempre inviati tramite JSON. I servizi Web possono usare l'attributo ScriptMethod con il parametro UseHttpGet impostato su true, che fa sì che i parametri vengano passati tramite i parametri della stringa di query.*</span><span class="sxs-lookup"><span data-stu-id="c5f5b-134">*> [!NOTE] the operation name is defined as part of the URL to the web service; additionally, request messages are not always submitted via JSON. Web Services can utilize the ScriptMethod attribute with the UseHttpGet parameter set to true, which causes parameters to be passed via a the query string parameters.*</span></span>

<span data-ttu-id="c5f5b-135">**Listato 3. Messaggio di risposta del servizio Web serializzato in JSON**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-135">**Listing 3. Web Service Response Message Serialized to JSON**</span></span>

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample3.json)]

<span data-ttu-id="c5f5b-136">Nella sezione successiva si vedrà come creare servizi Web in grado di gestire i messaggi di richiesta JSON e rispondere con tipi semplici e complessi.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-136">In the next section you'll see how to create Web Services capable of handling JSON request messages and responding with both simple and complex types.</span></span>

## <a name="creating-ajax-enabled-web-services"></a><span data-ttu-id="c5f5b-137">Creazione di servizi Web abilitati per AJAX</span><span class="sxs-lookup"><span data-stu-id="c5f5b-137">Creating AJAX-Enabled Web Services</span></span>

<span data-ttu-id="c5f5b-138">Il framework ASP.NET AJAX offre diversi modi per chiamare i servizi Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-138">The ASP.NET AJAX framework provides several different ways to call Web Services.</span></span> <span data-ttu-id="c5f5b-139">È possibile usare il controllo AutoCompleteExtender (disponibile in ASP.NET AJAX Toolkit) o JavaScript.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-139">You can use the AutoCompleteExtender control (available in the ASP.NET AJAX Toolkit) or JavaScript.</span></span> <span data-ttu-id="c5f5b-140">Tuttavia, prima di chiamare un servizio, è necessario abilitarlo per AJAX, in modo che possa essere chiamato dal codice di script client.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-140">However, before calling a service you have to AJAX-enable it so that it can be called by client-script code.</span></span>

<span data-ttu-id="c5f5b-141">Se non si ha familiarità con i servizi Web di ASP.NET, è facile creare e abilitare i servizi AJAX.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-141">Whether or not you're new to ASP.NET Web Services, you'll find it straightforward to create and AJAX-enable services.</span></span> <span data-ttu-id="c5f5b-142">In .NET Framework è supportata la creazione di servizi Web di ASP.NET, poiché la versione iniziale in 2002 e le estensioni AJAX di ASP.NET forniscono funzionalità AJAX aggiuntive che si basano sul set predefinito di funzionalità di .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-142">The .NET framework has supported the creation of ASP.NET Web Services since its initial release in 2002 and the ASP.NET AJAX Extensions provide additional AJAX functionality that builds upon the .NET framework's default set of features.</span></span> <span data-ttu-id="c5f5b-143">Visual Studio .NET 2008 Beta 2 dispone del supporto incorporato per la creazione di file del servizio Web. asmx e deriva automaticamente il codice associato accanto alle classi della classe System. Web. Services. WebService.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-143">Visual Studio .NET 2008 Beta 2 has built-in support for creating .asmx Web Service files and automatically derives associated code beside classes from the System.Web.Services.WebService class.</span></span> <span data-ttu-id="c5f5b-144">Quando si aggiungono metodi alla classe, è necessario applicare l'attributo WebMethod per poter essere chiamati dagli utenti del servizio Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-144">As you add methods into the class you must apply the WebMethod attribute in order for them to be called by Web Service consumers.</span></span>

<span data-ttu-id="c5f5b-145">Il listato 4 illustra un esempio di applicazione dell'attributo WebMethod a un metodo denominato GetCustomersByCountry ().</span><span class="sxs-lookup"><span data-stu-id="c5f5b-145">Listing 4 shows an example of applying the WebMethod attribute to a method named GetCustomersByCountry().</span></span>

<span data-ttu-id="c5f5b-146">**Listato 4. Uso dell'attributo WebMethod in un servizio Web**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-146">**Listing 4. Using the WebMethod Attribute in a Web Service**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample4.cs)]

<span data-ttu-id="c5f5b-147">Il metodo GetCustomersByCountry () accetta un parametro Country e restituisce una matrice di oggetti Customer.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-147">The GetCustomersByCountry() method accepts a country parameter and returns a Customer object array.</span></span> <span data-ttu-id="c5f5b-148">Il valore Country passato al metodo viene inoltrato a una classe di livello business che a sua volta chiama una classe del livello dati per recuperare i dati dal database, compilare le proprietà dell'oggetto Customer con i dati e restituire la matrice.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-148">The country value passed into the method is forwarded to a business layer class which in turn calls a data layer class to retrieve the data from the database, fill the Customer object properties with data and return the array.</span></span>

## <a name="using-the-scriptservice-attribute"></a><span data-ttu-id="c5f5b-149">Utilizzo dell'attributo ScriptService</span><span class="sxs-lookup"><span data-stu-id="c5f5b-149">Using the ScriptService Attribute</span></span>

<span data-ttu-id="c5f5b-150">Mentre l'aggiunta dell'attributo WebMethod consente la chiamata al metodo GetCustomersByCountry () da parte dei client che inviano messaggi SOAP standard al servizio Web, non sono consentite le chiamate JSON dalle applicazioni ASP.NET AJAX predefinite.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-150">While adding the WebMethod attribute allows the GetCustomersByCountry() method to be called by clients that send standard SOAP messages to the Web Service, it doesn't allow JSON calls to be made from ASP.NET AJAX applications out of the box.</span></span> <span data-ttu-id="c5f5b-151">Per consentire le chiamate JSON, è necessario applicare l'attributo dell'estensione ASP.NET AJAX `ScriptService` alla classe del servizio Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-151">To allow JSON calls to be made you have to apply the ASP.NET AJAX Extension's `ScriptService` attribute to the Web Service class.</span></span> <span data-ttu-id="c5f5b-152">Questo consente a un servizio Web di inviare messaggi di risposta formattati usando JSON e consente allo script lato client di chiamare un servizio inviando messaggi JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-152">This enables a Web Service to send response messages formatted using JSON and allows client-side script to call a service by sending JSON messages.</span></span>

<span data-ttu-id="c5f5b-153">L'elenco 5 Mostra un esempio di applicazione dell'attributo ScriptService a una classe del servizio Web denominata CustomersService.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-153">Listing 5 shows an example of applying the ScriptService attribute to a Web Service class named CustomersService.</span></span>

<span data-ttu-id="c5f5b-154">**Listato 5. Uso dell'attributo ScriptService per l'abilitazione di un servizio Web in AJAX**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-154">**Listing 5. Using the ScriptService Attribute to AJAX-enable a Web Service**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample5.cs)]

<span data-ttu-id="c5f5b-155">L'attributo ScriptService funge da indicatore che indica che può essere chiamato dal codice di script AJAX.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-155">The ScriptService attribute acts as a marker that indicates it can be called from AJAX script code.</span></span> <span data-ttu-id="c5f5b-156">Non gestisce effettivamente alcuna delle attività di serializzazione o deserializzazione JSON eseguite dietro le quinte.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-156">It doesn't actually handle any of the JSON serialization or deserialization tasks that occur behind the scenes.</span></span> <span data-ttu-id="c5f5b-157">ScriptHandlerFactory (configurato in web.config) e altre classi correlate eseguono la maggior parte dell'elaborazione JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-157">The ScriptHandlerFactory (configured in web.config) and other related classes do the bulk of JSON processing.</span></span>

## <a name="using-the-scriptmethod-attribute"></a><span data-ttu-id="c5f5b-158">Utilizzo dell'attributo ScriptMethod</span><span class="sxs-lookup"><span data-stu-id="c5f5b-158">Using the ScriptMethod Attribute</span></span>

<span data-ttu-id="c5f5b-159">L'attributo ScriptService è l'unico attributo ASP.NET AJAX che deve essere definito in un servizio Web .NET per poter essere usato da pagine ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-159">The ScriptService attribute is the only ASP.NET AJAX attribute that has to be defined in a .NET Web Service in order for it to be used by ASP.NET AJAX pages.</span></span> <span data-ttu-id="c5f5b-160">Un altro attributo denominato ScriptMethod, tuttavia, può anche essere applicato direttamente ai metodi Web in un servizio.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-160">However, another attribute named ScriptMethod can also be applied directly to Web Methods in a service.</span></span> <span data-ttu-id="c5f5b-161">ScriptMethod definisce tre proprietà, tra cui `UseHttpGet` , `ResponseFormat` e `XmlSerializeString` .</span><span class="sxs-lookup"><span data-stu-id="c5f5b-161">ScriptMethod defines three properties including `UseHttpGet`, `ResponseFormat` and `XmlSerializeString`.</span></span> <span data-ttu-id="c5f5b-162">La modifica dei valori di queste proprietà può essere utile nei casi in cui il tipo di richiesta accettato da un metodo Web deve essere modificato per ottenere, quando un metodo Web deve restituire dati XML non elaborati sotto forma di `XmlDocument` un `XmlElement` oggetto o o quando i dati restituiti da un servizio devono sempre essere serializzati come XML anziché JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-162">Changing the values of these properties can be useful in cases where the type of request accepted by a Web Method needs to be changed to GET, when a Web Method needs to return raw XML data in the form of an `XmlDocument` or `XmlElement` object or when data returned from a service should always be serialized as XML instead of JSON.</span></span>

<span data-ttu-id="c5f5b-163">È possibile utilizzare la proprietà UseHttpGet quando un metodo Web accetta richieste GET anziché richieste POST.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-163">The UseHttpGet property can be used when a Web Method should accept GET requests as opposed to POST requests.</span></span> <span data-ttu-id="c5f5b-164">Le richieste vengono inviate tramite un URL con parametri di input del metodo Web convertiti in parametri QueryString.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-164">Requests are sent using a URL with Web Method input parameters converted to QueryString parameters.</span></span> <span data-ttu-id="c5f5b-165">Per impostazione predefinita, la proprietà UseHttpGet è impostata su false e deve essere impostata su solo `true` quando le operazioni sono note come sicure e quando i dati sensibili non vengono passati a un servizio Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-165">The UseHttpGet property defaults to false and should only be set to `true` when operations are known to be safe and when sensitive data is not passed to a Web Service.</span></span> <span data-ttu-id="c5f5b-166">L'elenco 6 Mostra un esempio di utilizzo dell'attributo ScriptMethod con la proprietà UseHttpGet.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-166">Listing 6 shows an example of using the ScriptMethod attribute with the UseHttpGet property.</span></span>

<span data-ttu-id="c5f5b-167">**Elenco 6. Utilizzo dell'attributo ScriptMethod con la proprietà UseHttpGet.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-167">**Listing 6. Using the ScriptMethod attribute with the UseHttpGet property.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample6.cs)]

<span data-ttu-id="c5f5b-168">Di seguito è riportato un esempio delle intestazioni inviate quando viene chiamato il metodo Web HttpGetEcho illustrato nel listato 6:</span><span class="sxs-lookup"><span data-stu-id="c5f5b-168">An example of the headers sent when the HttpGetEcho Web Method shown in Listing 6 is called are shown next:</span></span>

`GET /CustomerViewer/DemoService.asmx/HttpGetEcho?input=%22Input Value%22 HTTP/1.1`

<span data-ttu-id="c5f5b-169">Oltre a consentire ai metodi Web di accettare richieste HTTP GET, l'attributo ScriptMethod può essere usato anche quando è necessario restituire le risposte XML da un servizio anziché da JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-169">In addition to allowing Web Methods to accept HTTP GET requests, the ScriptMethod attribute can also be used when XML responses need to be returned from a service rather than JSON.</span></span> <span data-ttu-id="c5f5b-170">Ad esempio, un servizio Web può recuperare un feed RSS da un sito remoto e restituirlo come oggetto XmlDocument o XmlElement.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-170">For example, a Web Service may retrieve an RSS feed from a remote site and return it as an XmlDocument or XmlElement object.</span></span> <span data-ttu-id="c5f5b-171">L'elaborazione dei dati XML può quindi essere eseguita nel client.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-171">Processing of the XML data can then occur on the client.</span></span>

<span data-ttu-id="c5f5b-172">L'elenco 7 Mostra un esempio di utilizzo della proprietà ResponseFormat per specificare che i dati XML devono essere restituiti da un metodo Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-172">Listing 7 shows an example of using the ResponseFormat property to specify that XML data should be returned from a Web Method.</span></span>

<span data-ttu-id="c5f5b-173">**Listato 7. Utilizzo dell'attributo ScriptMethod con la proprietà ResponseFormat.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-173">**Listing 7. Using the ScriptMethod attribute with the ResponseFormat property.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample7.cs)]

<span data-ttu-id="c5f5b-174">È inoltre possibile utilizzare la proprietà ResponseFormat insieme alla proprietà XmlSerializeString.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-174">The ResponseFormat property can also be used along with the XmlSerializeString property.</span></span> <span data-ttu-id="c5f5b-175">Il valore predefinito della proprietà XmlSerializeString è false, che indica che tutti i tipi restituiti, ad eccezione delle stringhe restituite da un metodo Web, vengono serializzati come XML quando la `ResponseFormat` proprietà è impostata su `ResponseFormat.Xml` .</span><span class="sxs-lookup"><span data-stu-id="c5f5b-175">The XmlSerializeString property has a default value of false which means that all return types except strings returned from a Web Method are serialized as XML when the `ResponseFormat` property is set to `ResponseFormat.Xml`.</span></span> <span data-ttu-id="c5f5b-176">Quando `XmlSerializeString` è impostato su `true` , tutti i tipi restituiti da un metodo Web vengono serializzati come XML, inclusi i tipi di stringa.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-176">When `XmlSerializeString` is set to `true`, all types returned from a Web Method are serialized as XML including string types.</span></span> <span data-ttu-id="c5f5b-177">Se la proprietà ResponseFormat ha un valore della `ResponseFormat.Json` proprietà XmlSerializeString, viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-177">If the ResponseFormat property has a value of `ResponseFormat.Json` the XmlSerializeString property is ignored.</span></span>

<span data-ttu-id="c5f5b-178">L'elenco 8 Mostra un esempio di utilizzo della proprietà XmlSerializeString per forzare la serializzazione delle stringhe come XML.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-178">Listing 8 shows an example of using the XmlSerializeString property to force strings to be serialized as XML.</span></span>

<span data-ttu-id="c5f5b-179">**Listato 8. Utilizzo dell'attributo ScriptMethod con la proprietà XmlSerializeString**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-179">**Listing 8. Using the ScriptMethod attribute with the XmlSerializeString property**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample8.cs)]

<span data-ttu-id="c5f5b-180">Il valore restituito dalla chiamata al metodo Web GetXmlString illustrato nel listato 8 è riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="c5f5b-180">The value returned from calling the GetXmlString Web Method shown in Listing 8 is shown next:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample9.cs)]

<span data-ttu-id="c5f5b-181">Sebbene il formato JSON predefinito riduca al minimo le dimensioni complessive dei messaggi di richiesta e risposta e venga utilizzato più facilmente dai client ASP.NET AJAX in modo incrociato, le proprietà ResponseFormat e XmlSerializeString possono essere utilizzate quando le applicazioni client quali Internet Explorer 5 o versioni successive prevedono la restituzione di dati XML da un metodo Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-181">Although the default JSON format minimizes the overall size of request and response messages and is more readily consumed by ASP.NET AJAX clients in a cross-browser manner, the ResponseFormat and XmlSerializeString properties can be utilized when client applications such as Internet Explorer 5 or higher expect XML data to be returned from a Web Method.</span></span>

## <a name="working-with-complex-types"></a><span data-ttu-id="c5f5b-182">Utilizzo di tipi complessi</span><span class="sxs-lookup"><span data-stu-id="c5f5b-182">Working with Complex Types</span></span>

<span data-ttu-id="c5f5b-183">Il listato 5 ha mostrato un esempio di restituzione di un tipo complesso denominato Customer da un servizio Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-183">Listing 5 showed an example of returning a complex type named Customer from a Web Service.</span></span> <span data-ttu-id="c5f5b-184">La classe Customer definisce diversi tipi semplici interni come proprietà quali FirstName e LastName.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-184">The Customer class defines several different simple types internally as properties such as FirstName and LastName.</span></span> <span data-ttu-id="c5f5b-185">I tipi complessi usati come parametro di input o tipo restituito in un metodo Web con supporto AJAX vengono serializzati automaticamente in JSON prima di essere inviati al lato client.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-185">Complex types used as an input parameter or return type on an AJAX-enabled Web Method are automatically serialized into JSON before being sent to the client-side.</span></span> <span data-ttu-id="c5f5b-186">Tuttavia, i tipi complessi annidati (quelli definiti internamente in un altro tipo) non vengono resi disponibili per il client come oggetti autonomi per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-186">However, nested complex types (those defined internally within another type) are not made available to the client as standalone objects by default.</span></span>

<span data-ttu-id="c5f5b-187">Nei casi in cui è necessario utilizzare anche un tipo complesso annidato utilizzato da un servizio Web in una pagina client, è possibile aggiungere l'attributo ASP.NET AJAX GenerateScriptType al servizio Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-187">In cases where a nested complex type used by a Web Service must also be used in a client page, the ASP.NET AJAX GenerateScriptType attribute can be added to the Web Service.</span></span> <span data-ttu-id="c5f5b-188">Ad esempio, la classe CustomerDetails mostrata nel listato 9 contiene le proprietà Address e Gender che ***rappresentano tipi complessi annidati.***</span><span class="sxs-lookup"><span data-stu-id="c5f5b-188">For example, the CustomerDetails class shown in Listing 9 contains Address and Gender properties which ***represent nested complex types.***</span></span>

<span data-ttu-id="c5f5b-189">**Elenco 9. La classe CustomerDetails illustrata di seguito contiene due tipi complessi annidati.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-189">**Listing 9. The CustomerDetails class shown here contains two nested complex types.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample10.cs)]

<span data-ttu-id="c5f5b-190">Gli oggetti Address e Gender definiti nella classe CustomerDetails illustrata nel listato 9 non verranno automaticamente resi disponibili per l'uso sul lato client tramite JavaScript perché sono tipi annidati (Address è una classe e Gender è un'enumerazione).</span><span class="sxs-lookup"><span data-stu-id="c5f5b-190">The Address and Gender objects defined within the CustomerDetails class shown in Listing 9 won't automatically be made available for use on the client-side via JavaScript since they are nested types (Address is a class and Gender is an enumeration).</span></span> <span data-ttu-id="c5f5b-191">Nelle situazioni in cui è necessario che un tipo annidato utilizzato all'interno di un servizio Web sia disponibile sul lato client, è possibile usare l'attributo GenerateScriptType indicato in precedenza (vedere l'elenco 10).</span><span class="sxs-lookup"><span data-stu-id="c5f5b-191">In situations where a nested type used within a Web Service must be available on the client-side, the GenerateScriptType attribute mentioned earlier can be used (see Listing 10).</span></span> <span data-ttu-id="c5f5b-192">Questo attributo può essere aggiunto più volte nei casi in cui vengono restituiti tipi complessi nidificati diversi da un servizio.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-192">This attribute can be added multiple times in cases where different nested complex types are returned from a service.</span></span> <span data-ttu-id="c5f5b-193">Può essere applicato direttamente alla classe del servizio Web o a metodi Web specifici.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-193">It can be applied directly to the Web Service class or above specific Web Methods.</span></span>

<span data-ttu-id="c5f5b-194">**Listato 10. Utilizzo dell'attributo GenerateScriptService per definire i tipi annidati che devono essere disponibili per il client.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-194">**Listing 10. Using the GenerateScriptService attribute to define nested types that should be available to the client.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample11.cs)]

<span data-ttu-id="c5f5b-195">Applicando l' `GenerateScriptType` attributo al servizio Web, i tipi di indirizzo e sesso saranno resi disponibili automaticamente per l'uso da parte del codice JavaScript AJAX ASP.NET sul lato client.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-195">By applying the `GenerateScriptType` attribute to the Web Service, the Address and Gender types will automatically be made available for use by client-side ASP.NET AJAX JavaScript code.</span></span> <span data-ttu-id="c5f5b-196">Un esempio di JavaScript generato e inviato automaticamente al client mediante l'aggiunta dell'attributo GenerateScriptType in un servizio Web viene visualizzato nel listato 11.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-196">An example of the JavaScript that is automatically generated and sent to the client by adding the GenerateScriptType attribute on a Web Service is shown in Listing 11.</span></span> <span data-ttu-id="c5f5b-197">Più avanti nell'articolo verrà illustrato come utilizzare i tipi complessi annidati.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-197">You'll see how to use nested complex types later in the article.</span></span>

<span data-ttu-id="c5f5b-198">**Listato 11. Tipi complessi annidati resi disponibili per una pagina ASP.NET AJAX.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-198">**Listing 11. Nested complex types made available to an ASP.NET AJAX page.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample12.cs)]

<span data-ttu-id="c5f5b-199">Ora che si è appreso come creare servizi Web e renderli accessibili alle pagine di ASP.NET AJAX, è possibile esaminare come creare e usare proxy JavaScript in modo che i dati possano essere recuperati o inviati ai servizi Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-199">Now that you've seen how to create Web Services and make them accessible to ASP.NET AJAX pages, let's take a look at how to create and use JavaScript proxies so that data can be retrieved or sent to Web Services.</span></span>

## <a name="creating-javascript-proxies"></a><span data-ttu-id="c5f5b-200">Creazione di proxy JavaScript</span><span class="sxs-lookup"><span data-stu-id="c5f5b-200">Creating JavaScript Proxies</span></span>

<span data-ttu-id="c5f5b-201">La chiamata a un servizio Web standard (.NET o un'altra piattaforma) implica in genere la creazione di un oggetto proxy che protegge dall'utente le complessità dell'invio di messaggi di richiesta e risposta SOAP.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-201">Calling a standard Web Service (.NET or another platform) typically involves creating a proxy object that shields you from the complexities of sending SOAP request and response messages.</span></span> <span data-ttu-id="c5f5b-202">Con le chiamate al servizio Web AJAX ASP.NET, i proxy JavaScript possono essere creati e usati per chiamare facilmente i servizi senza doversi preoccupare della serializzazione e deserializzazione dei messaggi JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-202">With ASP.NET AJAX Web Service calls, JavaScript proxies can be created and used to easily call services without worrying about serializing and deserializing JSON messages.</span></span> <span data-ttu-id="c5f5b-203">I proxy JavaScript possono essere generati automaticamente tramite il controllo ASP.NET AJAX ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-203">JavaScript proxies can be automatically generated by using the ASP.NET AJAX ScriptManager control.</span></span>

<span data-ttu-id="c5f5b-204">La creazione di un proxy JavaScript che può chiamare servizi Web viene eseguita utilizzando la proprietà dei servizi di ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-204">Creating a JavaScript proxy that can call Web Services is accomplished by using the ScriptManager's Services property.</span></span> <span data-ttu-id="c5f5b-205">Questa proprietà consente di definire uno o più servizi che una pagina ASP.NET AJAX può chiamare in modo asincrono per inviare o ricevere dati senza richiedere operazioni di postback.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-205">This property allows you to define one or more services that an ASP.NET AJAX page can call asynchronously to send or receive data without requiring postback operations.</span></span> <span data-ttu-id="c5f5b-206">Si definisce un servizio usando il controllo AJAX ASP.NET `ServiceReference` e assegnando l'URL del servizio Web alla proprietà del controllo `Path` .</span><span class="sxs-lookup"><span data-stu-id="c5f5b-206">You define a service by using the ASP.NET AJAX `ServiceReference` control and assigning the Web Service URL to the control's `Path` property.</span></span> <span data-ttu-id="c5f5b-207">L'elenco 12 Mostra un esempio di riferimento a un servizio denominato CustomersService. asmx.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-207">Listing 12 shows an example of referencing a service named CustomersService.asmx.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample13.aspx)]

<span data-ttu-id="c5f5b-208">**Listato 12. Definizione di un servizio Web utilizzato in una pagina ASP.NET AJAX.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-208">**Listing 12. Defining a Web Service used in an ASP.NET AJAX page.**</span></span>

<span data-ttu-id="c5f5b-209">L'aggiunta di un riferimento a CustomersService. asmx tramite il controllo ScriptManager causa la generazione dinamica di un proxy JavaScript che fa riferimento alla pagina.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-209">Adding a reference to the CustomersService.asmx through the ScriptManager control causes a JavaScript proxy to be dynamically generated and referenced by the page.</span></span> <span data-ttu-id="c5f5b-210">Il proxy viene incorporato usando il &lt; tag script &gt; e caricato dinamicamente chiamando il file CustomersService. asmx e aggiungendo/JS alla fine.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-210">The proxy is embedded by using the &lt;script&gt; tag and dynamically loaded by calling the CustomersService.asmx file and appending /js to the end of it.</span></span> <span data-ttu-id="c5f5b-211">Nell'esempio seguente viene illustrato il modo in cui il proxy JavaScript viene incorporato nella pagina quando il debug è disabilitato in web.config:</span><span class="sxs-lookup"><span data-stu-id="c5f5b-211">The following example shows how the JavaScript proxy is embedded in the page when debugging is disabled in web.config:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample14.html)]

> <span data-ttu-id="c5f5b-212">*>[!NOTE]Se si vuole visualizzare il codice proxy JavaScript effettivo che viene generato, è possibile digitare l'URL del servizio Web .NET desiderato nella casella degli indirizzi di Internet Explorer e aggiungere/JS alla fine.*</span><span class="sxs-lookup"><span data-stu-id="c5f5b-212">*> [!NOTE] If you'd like to see the actual JavaScript proxy code that is generated you can type the URL to the desired .NET Web Service into Internet Explorer's address box and append /js to the end of it.*</span></span>

<span data-ttu-id="c5f5b-213">Se il debug è abilitato in web.config una versione di debug del proxy JavaScript verrà incorporata nella pagina, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="c5f5b-213">If debugging is enabled in web.config a debug version of the JavaScript proxy will be embedded in the page as shown next:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample15.html)]

<span data-ttu-id="c5f5b-214">Il proxy JavaScript creato da ScriptManager può anche essere incorporato direttamente nella pagina anziché fare riferimento usando l' &lt; &gt; attributo src del tag script.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-214">The JavaScript proxy created by the ScriptManager can also be embedded directly into the page rather than referenced using the &lt;script&gt; tag's src attribute.</span></span> <span data-ttu-id="c5f5b-215">Questa operazione può essere eseguita impostando la proprietà InlineScript del controllo ServiceReference su true (il valore predefinito è false).</span><span class="sxs-lookup"><span data-stu-id="c5f5b-215">This can be done by setting the ServiceReference control's InlineScript property to true (the default is false).</span></span> <span data-ttu-id="c5f5b-216">Questo può essere utile quando un proxy non è condiviso tra più pagine e quando si vuole ridurre il numero di chiamate di rete effettuate al server.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-216">This can be useful when a proxy isn't shared across multiple pages and when you'd like to reduce the number of network calls made to the server.</span></span> <span data-ttu-id="c5f5b-217">Quando InlineScript è impostato su true, lo script del proxy non verrà memorizzato nella cache dal browser, quindi il valore predefinito di false è consigliato nei casi in cui il proxy viene usato da più pagine in un'applicazione ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-217">When InlineScript is set to true the proxy script won't be cached by the browser so the default value of false is recommended in cases where the proxy is used by multiple pages in an ASP.NET AJAX application.</span></span> <span data-ttu-id="c5f5b-218">Di seguito è riportato un esempio di utilizzo della proprietà InlineScript:</span><span class="sxs-lookup"><span data-stu-id="c5f5b-218">An example of using the InlineScript property is shown next:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample16.aspx)]

## <a name="using-javascript-proxies"></a><span data-ttu-id="c5f5b-219">Uso di proxy JavaScript</span><span class="sxs-lookup"><span data-stu-id="c5f5b-219">Using JavaScript Proxies</span></span>

<span data-ttu-id="c5f5b-220">Quando si fa riferimento a un servizio Web da una pagina ASP.NET AJAX usando il controllo ScriptManager, è possibile effettuare una chiamata al servizio Web e i dati restituiti possono essere gestiti tramite funzioni di callback.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-220">Once a Web Service is referenced by an ASP.NET AJAX page using the ScriptManager control, a call can be made to the Web Service and the returned data can be handled using callback functions.</span></span> <span data-ttu-id="c5f5b-221">Un servizio Web viene chiamato facendo riferimento al relativo spazio dei nomi (se esistente), al nome della classe e al nome del metodo Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-221">A Web Service is called by referencing its namespace (if one exists), class name and Web Method name.</span></span> <span data-ttu-id="c5f5b-222">Tutti i parametri passati al servizio Web possono essere definiti insieme a una funzione di callback che gestisce i dati restituiti.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-222">Any parameters passed to the Web Service can be defined along with a callback function that handles the returned data.</span></span>

<span data-ttu-id="c5f5b-223">Un esempio di utilizzo di un proxy JavaScript per chiamare un metodo Web denominato GetCustomersByCountry () viene visualizzato nel listato 13.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-223">An example of using a JavaScript proxy to call a Web Method named GetCustomersByCountry() is shown in Listing 13.</span></span> <span data-ttu-id="c5f5b-224">La funzione GetCustomersByCountry () viene chiamata quando un utente finale fa clic su un pulsante nella pagina.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-224">The GetCustomersByCountry() function is called when an end user clicks a button on the page.</span></span>

<span data-ttu-id="c5f5b-225">**Listato 13. Chiamata di un servizio Web con un proxy JavaScript.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-225">**Listing 13. Calling a Web Service with a JavaScript proxy.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample17.js)]

<span data-ttu-id="c5f5b-226">Questa chiamata fa riferimento allo spazio dei nomi InterfaceTraining, alla classe CustomersService e al metodo Web GetCustomersByCountry definito nel servizio.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-226">This call references the InterfaceTraining namespace, CustomersService class and GetCustomersByCountry Web Method defined in the service.</span></span> <span data-ttu-id="c5f5b-227">Passa un valore Country ottenuto da una casella di testo e una funzione di callback denominata OnWSRequestComplete che deve essere richiamata quando la chiamata al servizio Web asincrono restituisce.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-227">It passes a country value obtained from a textbox as well as a callback function named OnWSRequestComplete that should be invoked when the asynchronous Web Service call returns.</span></span> <span data-ttu-id="c5f5b-228">OnWSRequestComplete gestisce la matrice di oggetti Customer restituiti dal servizio e li converte in una tabella visualizzata nella pagina.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-228">OnWSRequestComplete handles the array of Customer objects returned from the service and converts them into a table that is displayed in the page.</span></span> <span data-ttu-id="c5f5b-229">L'output generato dalla chiamata è illustrato nella figura 1.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-229">The output generated from the call is shown in Figure 1.</span></span>

<span data-ttu-id="c5f5b-230">[![Dati di binding ottenuti eseguendo una chiamata AJAX asincrona a un servizio Web.](understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c5f5b-230">[![Binding data obtained by making an asynchronous AJAX call to a Web Service.](understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)</span></span>

<span data-ttu-id="c5f5b-231">**Figura 1**: associazione dei dati ottenuti tramite una chiamata AJAX asincrona a un servizio Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-231">**Figure 1**: Binding data obtained by making an asynchronous AJAX call to a Web Service.</span></span>  <span data-ttu-id="c5f5b-232">([Fare clic per visualizzare l'immagine con dimensioni complete](understanding-asp-net-ajax-web-services/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="c5f5b-232">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image3.png))</span></span>

<span data-ttu-id="c5f5b-233">I proxy JavaScript possono anche effettuare chiamate unidirezionali ai servizi Web nei casi in cui è necessario chiamare un metodo Web, ma il proxy non deve attendere una risposta.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-233">JavaScript proxies can also make one-way calls to Web Services in cases where a Web Method should be called but the proxy shouldn't wait for a response.</span></span> <span data-ttu-id="c5f5b-234">Ad esempio, è possibile chiamare un servizio Web per avviare un processo, ad esempio un flusso di lavoro, ma non attendere un valore restituito dal servizio.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-234">For example, you may want to call a Web Service to start a process such as a work-flow but not wait for a return value from the service.</span></span> <span data-ttu-id="c5f5b-235">Nei casi in cui deve essere effettuata una chiamata unidirezionale a un servizio, la funzione di callback mostrata nel listato 13 può semplicemente essere omessa.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-235">In cases where a one-way call needs to be made to a service, the callback function shown in Listing 13 can simply be omitted.</span></span> <span data-ttu-id="c5f5b-236">Poiché non viene definita alcuna funzione di callback, l'oggetto proxy non attende che il servizio Web restituisca dati.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-236">Since no callback function is defined the proxy object will not wait for the Web Service to return data.</span></span>

## <a name="handling-errors"></a><span data-ttu-id="c5f5b-237">Gestione degli errori</span><span class="sxs-lookup"><span data-stu-id="c5f5b-237">Handling Errors</span></span>

<span data-ttu-id="c5f5b-238">I callback asincroni ai servizi Web possono rilevare tipi diversi di errori, ad esempio la rete inattiva, il servizio Web non disponibile o un'eccezione restituita.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-238">Asynchronous callbacks to Web Services can encounter different types of errors such as the network being down, the Web Service being unavailable or an exception being returned.</span></span> <span data-ttu-id="c5f5b-239">Fortunatamente, gli oggetti proxy JavaScript generati da ScriptManager consentono di definire più callback per gestire errori ed errori, oltre al callback di esito positivo mostrato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-239">Fortunately, JavaScript proxy objects generated by the ScriptManager allow multiple callbacks to be defined to handle errors and failures in addition to the success callback shown earlier.</span></span> <span data-ttu-id="c5f5b-240">Una funzione di callback di errore può essere definita immediatamente dopo la funzione di callback standard nella chiamata al metodo Web, come illustrato nel listato 14.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-240">An error callback function can be defined immediately after the standard callback function in the call to the Web Method as shown in Listing 14.</span></span>

<span data-ttu-id="c5f5b-241">**Listato 14. Definizione di una funzione di callback di errore e visualizzazione degli errori.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-241">**Listing 14. Defining an error callback function and displaying errors.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample18.js)]

<span data-ttu-id="c5f5b-242">Qualsiasi errore che si verifica quando viene chiamato il servizio Web attiverà la chiamata della funzione di callback OnWSRequestFailed () che accetta un oggetto che rappresenta l'errore come parametro.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-242">Any errors that occur when the Web Service is called will trigger the OnWSRequestFailed() callback function to be called which accepts an object representing the error as a parameter.</span></span> <span data-ttu-id="c5f5b-243">L'oggetto Error espone diverse funzioni per determinare la cause dell'errore, nonché l'eventuale timeout della chiamata. L'elenco 14 Mostra un esempio di utilizzo delle diverse funzioni di errore e la figura 2 illustra un esempio dell'output generato dalle funzioni.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-243">The error object exposes several different functions to determine the cause of the error as well as whether or not the call timed out. Listing 14 shows an example of using the different error functions and Figure 2 shows an example of the output generated by the functions.</span></span>

<span data-ttu-id="c5f5b-244">[![Output generato chiamando le funzioni di errore ASP.NET AJAX.](understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="c5f5b-244">[![Output generated by calling ASP.NET AJAX error functions.](understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)</span></span>

<span data-ttu-id="c5f5b-245">**Figura 2**: output generato chiamando le funzioni di errore ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-245">**Figure 2**: Output generated by calling ASP.NET AJAX error functions.</span></span>  <span data-ttu-id="c5f5b-246">([Fare clic per visualizzare l'immagine con dimensioni complete](understanding-asp-net-ajax-web-services/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="c5f5b-246">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image6.png))</span></span>

## <a name="handling-xml-data-returned-from-a-web-service"></a><span data-ttu-id="c5f5b-247">Gestione dei dati XML restituiti da un servizio Web</span><span class="sxs-lookup"><span data-stu-id="c5f5b-247">Handling XML Data Returned from a Web Service</span></span>

<span data-ttu-id="c5f5b-248">In precedenza è stato illustrato come un metodo Web può restituire dati XML non elaborati usando l'attributo ScriptMethod insieme alla relativa proprietà ResponseFormat.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-248">Earlier you saw how a Web Method could return raw XML data by using the ScriptMethod attribute along with its ResponseFormat property.</span></span> <span data-ttu-id="c5f5b-249">Quando ResponseFormat è impostato su ResponseFormat.Xml, i dati restituiti dal servizio Web vengono serializzati come XML anziché come JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-249">When ResponseFormat is set to ResponseFormat.Xml, data returned from the Web Service is serialized as XML rather than JSON.</span></span> <span data-ttu-id="c5f5b-250">Questa operazione può essere utile quando i dati XML devono essere passati direttamente al client per l'elaborazione utilizzando JavaScript o XSLT.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-250">This can be useful when XML data needs to be passed directly to the client for processing using JavaScript or XSLT.</span></span> <span data-ttu-id="c5f5b-251">Attualmente, Internet Explorer 5 o versione successiva fornisce il migliore modello a oggetti lato client per l'analisi e il filtraggio dei dati XML a causa del supporto incorporato di MSXML.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-251">At the current time, Internet Explorer 5 or higher provides the best client-side object model for parsing and filtering XML data due to its built-in support for MSXML.</span></span>

<span data-ttu-id="c5f5b-252">Il recupero di dati XML da un servizio Web non è diverso dal recupero di altri tipi di dati.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-252">Retrieving XML data from a Web Service is no different than retrieving other data types.</span></span> <span data-ttu-id="c5f5b-253">Per iniziare, richiamare il proxy JavaScript per chiamare la funzione appropriata e definire una funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-253">Start by invoking the JavaScript proxy to call the appropriate function and define a callback function.</span></span> <span data-ttu-id="c5f5b-254">Una volta restituita la chiamata, è possibile elaborare i dati nella funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-254">Once the call returns you can then process the data in the callback function.</span></span>

<span data-ttu-id="c5f5b-255">L'elenco 15 Mostra un esempio di chiamata a un metodo Web denominato GetRssFeed () che restituisce un oggetto XmlElement.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-255">Listing 15 shows an example of calling a Web Method named GetRssFeed() that returns an XmlElement object.</span></span> <span data-ttu-id="c5f5b-256">GetRssFeed () accetta un solo parametro che rappresenta l'URL per il feed RSS da recuperare.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-256">GetRssFeed() accepts a single parameter representing the URL for the RSS feed to retrieve.</span></span>

<span data-ttu-id="c5f5b-257">**Listato 15. Utilizzo di dati XML restituiti da un servizio Web.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-257">**Listing 15. Working with XML data returned from a Web Service.**</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample19.html)]

<span data-ttu-id="c5f5b-258">Questo esempio passa un URL a un feed RSS ed elabora i dati XML restituiti nella funzione OnWSRequestComplete ().</span><span class="sxs-lookup"><span data-stu-id="c5f5b-258">This example passes a URL to an RSS feed and processes the returned XML data in the OnWSRequestComplete() function.</span></span> <span data-ttu-id="c5f5b-259">OnWSRequestComplete () verifica innanzitutto se il browser è Internet Explorer per sapere se il parser MSXML è disponibile o meno.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-259">OnWSRequestComplete() first checks to see if the browser is Internet Explorer to know whether or not the MSXML parser is available.</span></span> <span data-ttu-id="c5f5b-260">In tal caso, viene usata un'istruzione XPath per individuare tutti &lt; i &gt; tag degli elementi all'interno del feed RSS.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-260">If it is, an XPath statement is used to locate all &lt;item&gt; tags within the RSS feed.</span></span> <span data-ttu-id="c5f5b-261">Ogni elemento viene quindi iterato e i &lt; &gt; tag title e &lt; link associati &gt; vengono individuati ed elaborati per visualizzare i dati di ogni elemento.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-261">Each item is then iterated through and the associated &lt;title&gt; and &lt;link&gt; tags are located and processed to display each item's data.</span></span> <span data-ttu-id="c5f5b-262">Nella figura 3 viene illustrato un esempio di output generato dall'esecuzione di una chiamata ASP.NET AJAX tramite un proxy JavaScript al metodo Web GetRssFeed ().</span><span class="sxs-lookup"><span data-stu-id="c5f5b-262">Figure 3 shows an example of the output generated from making an ASP.NET AJAX call through a JavaScript proxy to the GetRssFeed() Web Method.</span></span>

## <a name="handling-complex-types"></a><span data-ttu-id="c5f5b-263">Gestione di tipi complessi</span><span class="sxs-lookup"><span data-stu-id="c5f5b-263">Handling Complex Types</span></span>

<span data-ttu-id="c5f5b-264">I tipi complessi accettati o restituiti da un servizio Web vengono esposti automaticamente tramite un proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-264">Complex types accepted or returned by a Web Service are automatically exposed through a JavaScript proxy.</span></span> <span data-ttu-id="c5f5b-265">Tuttavia, i tipi complessi annidati non sono direttamente accessibili sul lato client, a meno che l'attributo GenerateScriptType non venga applicato al servizio come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-265">However, nested complex types are not directly accessible on the client-side unless the GenerateScriptType attribute is applied to the service as discussed earlier.</span></span> <span data-ttu-id="c5f5b-266">Perché si vuole usare un tipo complesso annidato sul lato client?</span><span class="sxs-lookup"><span data-stu-id="c5f5b-266">Why would you want to use a nested complex type on the client-side?</span></span>

<span data-ttu-id="c5f5b-267">Per rispondere a questa domanda, si supponga che una pagina ASP.NET AJAX visualizzi i dati dei clienti e consenta agli utenti finali di aggiornare l'indirizzo di un cliente.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-267">To answer this question, assume that an ASP.NET AJAX page displays customer data and allows end users to update a customer's address.</span></span> <span data-ttu-id="c5f5b-268">Se il servizio Web specifica che il tipo di indirizzo (un tipo complesso definito all'interno di una classe CustomerDetails) può essere inviato al client, il processo di aggiornamento può essere suddiviso in funzioni separate per un migliore riutilizzo del codice.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-268">If the Web Service specifies that the Address type (a complex type defined within a CustomerDetails class) can be sent to the client then the update process can be divided into separate functions for better code re-use.</span></span>

<span data-ttu-id="c5f5b-269">[![Output creato dalla chiamata a un servizio Web che restituisce dati RSS.](understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c5f5b-269">[![Output creating from calling a Web Service that returns RSS data.](understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)</span></span>

<span data-ttu-id="c5f5b-270">**Figura 3**: output creato dalla chiamata a un servizio Web che restituisce dati RSS.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-270">**Figure 3**: Output creating from calling a Web Service that returns RSS data.</span></span>  <span data-ttu-id="c5f5b-271">([Fare clic per visualizzare l'immagine con dimensioni complete](understanding-asp-net-ajax-web-services/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="c5f5b-271">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image9.png))</span></span>

<span data-ttu-id="c5f5b-272">Il listato 16 Mostra un esempio di codice sul lato client che richiama un oggetto Address definito in uno spazio dei nomi del modello, lo compila con dati aggiornati e lo assegna alla proprietà Address di un oggetto CustomerDetails.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-272">Listing 16 shows an example of client-side code that invokes an Address object defined in a Model namespace, fills it with updated data and assigns it to a CustomerDetails object's Address property.</span></span> <span data-ttu-id="c5f5b-273">L'oggetto CustomerDetails viene quindi passato al servizio Web per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-273">The CustomerDetails object is then passed to the Web Service for processing.</span></span>

<span data-ttu-id="c5f5b-274">**Listato 16. Uso di tipi complessi annidati**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-274">**Listing 16. Using nested complex types**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample20.js)]

## <a name="creating-and-using-page-methods"></a><span data-ttu-id="c5f5b-275">Creazione e utilizzo di metodi di pagina</span><span class="sxs-lookup"><span data-stu-id="c5f5b-275">Creating and Using Page Methods</span></span>

<span data-ttu-id="c5f5b-276">I servizi Web offrono un modo eccellente per esporre i servizi riutilizzabili a una vasta gamma di client, incluse le pagine ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-276">Web Services provide an excellent way to expose re-useable services to a variety of clients including ASP.NET AJAX pages.</span></span> <span data-ttu-id="c5f5b-277">In alcuni casi, tuttavia, una pagina deve recuperare i dati che non verranno mai usati o condivisi da altre pagine.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-277">However, there may be cases where a page needs to retrieve data that won't ever be used or shared by other pages.</span></span> <span data-ttu-id="c5f5b-278">In questo caso, la creazione di un file con estensione asmx per consentire alla pagina di accedere ai dati può sembrare esagerata perché il servizio viene usato solo da una singola pagina.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-278">In this case, making an .asmx file to allow the page to access the data may seem like overkill since the service is only used by a single page.</span></span>

<span data-ttu-id="c5f5b-279">ASP.NET AJAX fornisce un altro meccanismo per effettuare chiamate simili ai servizi Web senza creare file con estensione asmx autonomi.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-279">ASP.NET AJAX provides another mechanism for making Web Service-like calls without creating standalone .asmx files.</span></span> <span data-ttu-id="c5f5b-280">Questa operazione viene eseguita usando una tecnica denominata "metodi di pagina".</span><span class="sxs-lookup"><span data-stu-id="c5f5b-280">This is done by using a technique referred to as "page methods".</span></span> <span data-ttu-id="c5f5b-281">I metodi di pagina sono metodi statici (Shared in VB.NET) incorporati direttamente in una pagina o in un file code-beside a cui è applicato l'attributo WebMethod.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-281">Page methods are static (shared in VB.NET) methods embedded directly in a page or code-beside file that have the WebMethod attribute applied to them.</span></span> <span data-ttu-id="c5f5b-282">L'applicazione dell'attributo WebMethod può essere chiamata usando un oggetto JavaScript speciale denominato PageMethods che viene creato dinamicamente in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-282">By applying the WebMethod attribute they can be called using a special JavaScript object named PageMethods that gets dynamically created at runtime.</span></span> <span data-ttu-id="c5f5b-283">L'oggetto PageMethods funge da proxy che protegge dall'utente dal processo di serializzazione/deserializzazione JSON.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-283">The PageMethods object acts as a proxy that shields you from the JSON serialization/deserialization process.</span></span> <span data-ttu-id="c5f5b-284">Si noti che, per utilizzare l'oggetto PageMethods, è necessario impostare la proprietà EnablePageMethods di ScriptManager su true.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-284">Note that in order to use the PageMethods object you must set the ScriptManager's EnablePageMethods property to true.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample21.aspx)]

<span data-ttu-id="c5f5b-285">L'elenco 17 Mostra un esempio di definizione di due metodi di pagina in una classe code-beside ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-285">Listing 17 shows an example of defining two page methods in an ASP.NET code-beside class.</span></span> <span data-ttu-id="c5f5b-286">Questi metodi recuperano i dati da una classe di livello business presente nella \_ cartella del codice dell'app del sito Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-286">These methods retrieve data from a business layer class located in the App\_Code folder of the Website.</span></span>

<span data-ttu-id="c5f5b-287">**Listato 17. Definizione di metodi di pagina.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-287">**Listing 17. Defining page methods.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample22.cs)]

<span data-ttu-id="c5f5b-288">Quando ScriptManager rileva la presenza di metodi Web nella pagina, genera un riferimento dinamico all'oggetto PageMethods indicato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-288">When ScriptManager detects the presence of Web Methods in the page it generates a dynamic reference to the PageMethods object mentioned earlier.</span></span> <span data-ttu-id="c5f5b-289">La chiamata a un metodo Web viene eseguita facendo riferimento alla classe PageMethods seguita dal nome del metodo e da eventuali dati di parametro necessari che devono essere passati.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-289">Calling a Web Method is accomplished by referencing the PageMethods class followed by the name of the method and any necessary parameter data that should be passed.</span></span> <span data-ttu-id="c5f5b-290">Il listato 18 Mostra esempi di chiamata dei due metodi di pagina illustrati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-290">Listing 18 shows examples of calling the two page methods shown earlier.</span></span>

<span data-ttu-id="c5f5b-291">**Listato 18. Chiamata di metodi di pagina con l'oggetto JavaScript PageMethods.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-291">**Listing 18. Calling page methods with the PageMethods JavaScript object.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample23.js)]

<span data-ttu-id="c5f5b-292">L'uso dell'oggetto PageMethods è molto simile all'uso di un oggetto proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-292">Using the PageMethods object is very similar to using a JavaScript proxy object.</span></span> <span data-ttu-id="c5f5b-293">È necessario innanzitutto specificare tutti i dati dei parametri che devono essere passati al metodo di pagina e quindi definire la funzione di callback da chiamare quando viene restituita la chiamata asincrona.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-293">You first specify all of the parameter data that should be passed to the page method and then define the callback function that should be called when the asynchronous call returns.</span></span> <span data-ttu-id="c5f5b-294">È anche possibile specificare un callback di errore (vedere l'elenco 14 per un esempio di gestione degli errori).</span><span class="sxs-lookup"><span data-stu-id="c5f5b-294">A failure callback can also be specified (refer to Listing 14 for an example of handling failures).</span></span>

## <a name="the-autocompleteextender-and-the-aspnet-ajax-toolkit"></a><span data-ttu-id="c5f5b-295">AutoCompleteExtender e ASP.NET AJAX Toolkit</span><span class="sxs-lookup"><span data-stu-id="c5f5b-295">The AutoCompleteExtender and the ASP.NET AJAX Toolkit</span></span>

<span data-ttu-id="c5f5b-296">ASP.NET AJAX Toolkit (disponibile in [http://ajax.asp.net](http://ajax.asp.net) ) offre diversi controlli che possono essere usati per accedere ai servizi Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-296">The ASP.NET AJAX Toolkit (available from [http://ajax.asp.net](http://ajax.asp.net)) offers several controls that can be used to access Web Services.</span></span> <span data-ttu-id="c5f5b-297">In particolare, il Toolkit contiene un utile controllo denominato `AutoCompleteExtender` che può essere usato per chiamare i servizi Web e visualizzare i dati nelle pagine senza scrivere alcun codice JavaScript.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-297">Specifically, the toolkit contains a useful control named `AutoCompleteExtender` that can be used to call Web Services and show data in pages without writing any JavaScript code at all.</span></span>

<span data-ttu-id="c5f5b-298">Il controllo AutoCompleteExtender può essere usato per estendere le funzionalità esistenti di una casella di testo e consentire agli utenti di individuare più facilmente i dati che stanno cercando.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-298">The AutoCompleteExtender control can be used to extend existing functionality of a textbox and help users more easily locate data they're looking for.</span></span> <span data-ttu-id="c5f5b-299">Quando digitano in una casella di testo, il controllo può essere usato per eseguire query in un servizio Web e Visualizza i risultati sotto la casella di testo in modo dinamico.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-299">As they type into a textbox the control can be used to query a Web Service and shows results below the textbox dynamically.</span></span> <span data-ttu-id="c5f5b-300">Nella figura 4 viene illustrato un esempio di utilizzo del controllo AutoCompleteExtender per visualizzare gli ID cliente per un'applicazione di supporto.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-300">Figure 4 shows an example of using the AutoCompleteExtender control to display customer ids for a support application.</span></span> <span data-ttu-id="c5f5b-301">Quando l'utente digita caratteri diversi nella casella di testo, verranno visualizzati elementi diversi sotto in base al relativo input.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-301">As the user types different characters into the textbox, different items will be shown below it based upon their input.</span></span> <span data-ttu-id="c5f5b-302">Gli utenti possono quindi selezionare l'ID cliente desiderato.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-302">Users can then select the desired customer id.</span></span>

<span data-ttu-id="c5f5b-303">L'uso di AutoCompleteExtender all'interno di una pagina ASP.NET AJAX richiede che l'assembly AjaxControlToolkit.dll venga aggiunto alla cartella bin del sito Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-303">Using the AutoCompleteExtender within an ASP.NET AJAX page requires that the AjaxControlToolkit.dll assembly be added to the Website's bin folder.</span></span> <span data-ttu-id="c5f5b-304">Una volta aggiunto l'assembly del Toolkit, è necessario farvi riferimento in web.config in modo che i controlli in esso contenuti siano disponibili per tutte le pagine di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-304">Once the toolkit assembly has been added, you'll want to reference it in web.config so that the controls it contains are available to all pages in an application.</span></span> <span data-ttu-id="c5f5b-305">A tale scopo, è possibile aggiungere il tag seguente nel &lt; tag dei controlli web.config &gt; :</span><span class="sxs-lookup"><span data-stu-id="c5f5b-305">This can be done by adding the following tag within web.config's &lt;controls&gt; tag:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample24.xml)]

<span data-ttu-id="c5f5b-306">Nei casi in cui è sufficiente usare il controllo in una pagina specifica, è possibile farvi riferimento aggiungendo la direttiva Reference nella parte superiore di una pagina, come illustrato di seguito anziché aggiornare web.config:</span><span class="sxs-lookup"><span data-stu-id="c5f5b-306">In cases where you only need to use the control in a specific page you can reference it by adding the Reference directive to the top of a page as shown next rather than updating web.config:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample25.aspx)]

<span data-ttu-id="c5f5b-307">[![Uso del controllo AutoCompleteExtender.](understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="c5f5b-307">[![Using the AutoCompleteExtender control.](understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)</span></span>

<span data-ttu-id="c5f5b-308">**Figura 4**: uso del controllo AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-308">**Figure 4**: Using the AutoCompleteExtender control.</span></span>  <span data-ttu-id="c5f5b-309">([Fare clic per visualizzare l'immagine con dimensioni complete](understanding-asp-net-ajax-web-services/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="c5f5b-309">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image12.png))</span></span>

<span data-ttu-id="c5f5b-310">Una volta che il sito Web è stato configurato per l'uso di ASP.NET AJAX Toolkit, è possibile aggiungere un controllo AutoCompleteExtender nella pagina in modo analogo all'aggiunta di un normale controllo server ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-310">Once the Website has been configured to use the ASP.NET AJAX Toolkit, an AutoCompleteExtender control can be added into the page much like you'd add a regular ASP.NET server control.</span></span> <span data-ttu-id="c5f5b-311">L'elenco 19 Mostra un esempio di utilizzo del controllo per chiamare un servizio Web.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-311">Listing 19 shows an example of using the control to call a Web Service.</span></span>

<span data-ttu-id="c5f5b-312">**Listato 19. Uso del controllo AutoCompleteExtender di ASP.NET AJAX Toolkit.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-312">**Listing 19. Using the ASP.NET AJAX Toolkit AutoCompleteExtender control.**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample26.aspx)]

<span data-ttu-id="c5f5b-313">AutoCompleteExtender dispone di diverse proprietà, tra cui le proprietà ID standard e runat trovate nei controlli server.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-313">The AutoCompleteExtender has several different properties including the standard ID and runat properties found on server controls.</span></span> <span data-ttu-id="c5f5b-314">Inoltre, consente di definire il numero di caratteri che un utente finale digita prima di eseguire una query sul servizio Web per i dati.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-314">In addition to these, it allows you to define how many characters an end user types before the Web Service is queried for data.</span></span> <span data-ttu-id="c5f5b-315">La proprietà MinimumPrefixLength mostrata nel listato 19 fa in modo che il servizio venga chiamato ogni volta che un carattere viene digitato nella casella di testo.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-315">The MinimumPrefixLength property shown in Listing 19 causes the service to be called each time a character is typed into the textbox.</span></span> <span data-ttu-id="c5f5b-316">È necessario prestare attenzione a impostare questo valore poiché ogni volta che l'utente digita un carattere, il servizio Web verrà chiamato per cercare i valori corrispondenti ai caratteri della casella di testo.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-316">You'll want to be careful setting this value since each time the user types a character the Web Service will be called to search for values that match the characters in the textbox.</span></span> <span data-ttu-id="c5f5b-317">Il servizio Web da chiamare e il metodo Web di destinazione vengono definiti rispettivamente usando le proprietà ServicePath e ServiceMethod.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-317">The Web Service to call as well as the target Web Method are defined using the ServicePath and ServiceMethod properties respectively.</span></span> <span data-ttu-id="c5f5b-318">Infine, la proprietà TargetControlID identifica la casella di testo a cui associare il controllo AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-318">Finally, the TargetControlID property identifies which textbox to hook the AutoCompleteExtender control to.</span></span>

<span data-ttu-id="c5f5b-319">Il servizio Web chiamato deve avere l'attributo ScriptService applicato come descritto in precedenza e il metodo Web di destinazione deve accettare due parametri denominati prefixText e count.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-319">The Web Service being called must have the ScriptService attribute applied as discussed earlier and the target Web Method must accept two parameters named prefixText and count.</span></span> <span data-ttu-id="c5f5b-320">Il parametro prefixText rappresenta i caratteri digitati dall'utente finale e il parametro Count rappresenta il numero di elementi da restituire (il valore predefinito è 10).</span><span class="sxs-lookup"><span data-stu-id="c5f5b-320">The prefixText parameter represents the characters typed by the end user and the count parameter represents how many items to return (the default is 10).</span></span> <span data-ttu-id="c5f5b-321">L'elenco 20 Mostra un esempio del metodo Web getcustomerids chiamato dal controllo AutoCompleteExtender illustrato in precedenza nel listato 19.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-321">Listing 20 shows an example of the GetCustomerIDs Web Method called by the AutoCompleteExtender control shown earlier in Listing 19.</span></span> <span data-ttu-id="c5f5b-322">Il metodo Web chiama un metodo del livello business che a sua volta chiama un metodo a livello di dati che gestisce il filtro dei dati e la restituzione dei risultati corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-322">The Web Method calls a business layer method that in turn calls a data layer method that handles filtering the data and returning the matching results.</span></span> <span data-ttu-id="c5f5b-323">Il codice per il metodo livello dati è illustrato nel listato 21.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-323">The code for the data layer method is shown in Listing 21.</span></span>

<span data-ttu-id="c5f5b-324">**Listato 20. Filtraggio dei dati inviati dal controllo AutoCompleteExtender.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-324">**Listing 20. Filtering data sent from the AutoCompleteExtender control.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample27.cs)]

<span data-ttu-id="c5f5b-325">**Listato 21. Filtrare i risultati in base all'input dell'utente finale.**</span><span class="sxs-lookup"><span data-stu-id="c5f5b-325">**Listing 21. Filtering results based upon end user input.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample28.cs)]

## <a name="conclusion"></a><span data-ttu-id="c5f5b-326">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="c5f5b-326">Conclusion</span></span>

<span data-ttu-id="c5f5b-327">ASP.NET AJAX offre un supporto eccellente per chiamare i servizi Web senza scrivere molto codice JavaScript personalizzato per gestire i messaggi di richiesta e risposta.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-327">ASP.NET AJAX provides excellent support for calling Web Services without writing a lot of custom JavaScript code to handle the request and response messages.</span></span> <span data-ttu-id="c5f5b-328">In questo articolo è stato illustrato come abilitare AJAX per l'elaborazione dei messaggi JSON e come definire proxy JavaScript tramite il controllo ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-328">In this article you've seen how to AJAX-enable .NET Web Services to enable them to process JSON messages and how to define JavaScript proxies using the ScriptManager control.</span></span> <span data-ttu-id="c5f5b-329">È stato anche illustrato come i proxy JavaScript possono essere usati per chiamare i servizi Web, gestire tipi semplici e complessi e gestire gli errori.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-329">You've also seen how JavaScript proxies can be used to call Web Services, handle simple and complex types and deal with failures.</span></span> <span data-ttu-id="c5f5b-330">Infine, è stato illustrato come usare i metodi di pagina per semplificare il processo di creazione e di chiamata del servizio Web e il modo in cui il controllo AutoCompleteExtender può fornire supporto agli utenti finali durante la digitazione.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-330">Finally, you've seen how page methods can be used to simplify the process of creating and making Web Service calls and how the AutoCompleteExtender control can provide help to end users as they type.</span></span> <span data-ttu-id="c5f5b-331">Sebbene l'UpdatePanel disponibile in ASP.NET AJAX sarà sicuramente il controllo scelto per molti programmatori AJAX grazie alla sua semplicità, sapere come chiamare i servizi Web tramite proxy JavaScript può essere utile in molte applicazioni.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-331">Although the UpdatePanel available in ASP.NET AJAX will certainly be the control of choice for many AJAX programmers due to its simplicity, knowing how to call Web Services through JavaScript proxies can be useful in many applications.</span></span>

## <a name="bio"></a><span data-ttu-id="c5f5b-332">Biografia</span><span class="sxs-lookup"><span data-stu-id="c5f5b-332">Bio</span></span>

<span data-ttu-id="c5f5b-333">Dan Wahlin (Microsoft Most Valuable Professional per ASP.NET e i servizi Web XML) è un consulente per lo sviluppo di .NET e un consulente di architettura in formazione tecnica sull'interfaccia ( [http://www.interfacett.com](http://www.interfacett.com) ).</span><span class="sxs-lookup"><span data-stu-id="c5f5b-333">Dan Wahlin (Microsoft Most Valuable Professional for ASP.NET and XML Web Services) is a .NET development instructor and architecture consultant at Interface Technical Training ([http://www.interfacett.com](http://www.interfacett.com)).</span></span> <span data-ttu-id="c5f5b-334">Dan ha fondato il sito Web di XML for ASP.NET Developers ([www.XMLforASP.NET](http://www.XMLforASP.NET)), si trova nell'ufficio del relatore di INETA e parla di diverse conferenze.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-334">Dan founded the XML for ASP.NET Developers Web site ([www.XMLforASP.NET](http://www.XMLforASP.NET)), is on the INETA Speaker's Bureau and speaks at several conferences.</span></span> <span data-ttu-id="c5f5b-335">Dan co-creato Professional Windows DNA (Wrox), ASP.NET: suggerimenti, esercitazioni e codice (Sams), ASP.NET 1,1 Insider Solutions, Professional ASP.NET 2,0 AJAX (Wrox), ASP.NET 2,0 MVP hack e authored XML for ASP.NET Developers (Sams).</span><span class="sxs-lookup"><span data-stu-id="c5f5b-335">Dan co-authored Professional Windows DNA (Wrox), ASP.NET: Tips, Tutorials and Code (Sams), ASP.NET 1.1 Insider Solutions, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks and authored XML for ASP.NET Developers (Sams).</span></span> <span data-ttu-id="c5f5b-336">Quando non scrive codice, articoli o libri, Dan gode di scrivere e registrare musica e giocare a golf e basket con la moglie e i figli.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-336">When he's not writing code, articles or books, Dan enjoys writing and recording music and playing golf and basketball with his wife and kids.</span></span>

<span data-ttu-id="c5f5b-337">Scott Cate collabora con le tecnologie Web Microsoft a partire dal 1997 ed è il Presidente di myKB.com ([www.myKB.com](http://www.myKB.com)), dove si specializza nella scrittura di applicazioni basate su ASP.NET incentrate sulle soluzioni software della Knowledge base.</span><span class="sxs-lookup"><span data-stu-id="c5f5b-337">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="c5f5b-338">Scott può essere contattato tramite posta elettronica all'indirizzo [scott.cate@myKB.com](mailto:scott.cate@myKB.com) o al suo Blog all' [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="c5f5b-338">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c5f5b-339">[Precedente](understanding-asp-net-ajax-localization.md) 
>  [Avanti](understanding-asp-net-ajax-debugging-capabilities.md)</span><span class="sxs-lookup"><span data-stu-id="c5f5b-339">[Previous](understanding-asp-net-ajax-localization.md)
[Next](understanding-asp-net-ajax-debugging-capabilities.md)</span></span>
