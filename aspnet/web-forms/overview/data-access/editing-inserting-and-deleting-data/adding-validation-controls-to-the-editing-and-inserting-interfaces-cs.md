---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
title: Aggiunta di controlli di convalida alle interfacce di modifica e inserimentoC#() | Microsoft Docs
author: rick-anderson
description: In questa esercitazione verrà illustrato quanto sia semplice aggiungere controlli di convalida a EditItemTemplate e InsertItemTemplate di un controllo Web di dati, per fornire un'ulteriore...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 2086cb1a-ab78-49ae-9c0b-03891c69776a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
msc.type: authoredcontent
ms.openlocfilehash: 110ee08f1d0707664ef6268f34ceab9da30a3e61
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78610194"
---
# <a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-c"></a><span data-ttu-id="a0dae-103">Aggiunta di controlli di convalida alle interfacce di modifica e inserimento (C#)</span><span class="sxs-lookup"><span data-stu-id="a0dae-103">Adding Validation Controls to the Editing and Inserting Interfaces (C#)</span></span>

<span data-ttu-id="a0dae-104">di [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a0dae-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a0dae-105">[Scaricare l'app di esempio](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) o [scaricare il file PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a0dae-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span></span>

> <span data-ttu-id="a0dae-106">In questa esercitazione verrà illustrato quanto sia semplice aggiungere controlli di convalida a EditItemTemplate e InsertItemTemplate di un controllo Web di dati, per fornire un'interfaccia utente più infallibile.</span><span class="sxs-lookup"><span data-stu-id="a0dae-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="a0dae-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="a0dae-107">Introduction</span></span>

<span data-ttu-id="a0dae-108">I controlli GridView e DetailsView negli esempi esaminati nelle ultime tre esercitazioni sono stati composte da BoundField e CheckBoxFields (i tipi di campo aggiunti automaticamente da Visual Studio durante l'associazione di GridView o DetailsView a un'origine dati controllo tramite lo smart tag.</span><span class="sxs-lookup"><span data-stu-id="a0dae-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="a0dae-109">Quando si modifica una riga in GridView o DetailsView, i BoundField che non sono di sola lettura vengono convertiti in caselle di testo, da cui l'utente finale può modificare i dati esistenti.</span><span class="sxs-lookup"><span data-stu-id="a0dae-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="a0dae-110">Analogamente, quando si inserisce un nuovo record in un controllo DetailsView, i BoundField la cui proprietà `InsertVisible` è impostata su `true` (impostazione predefinita) vengono visualizzati come caselle di testo vuote, in cui l'utente può fornire i valori dei campi del nuovo record.</span><span class="sxs-lookup"><span data-stu-id="a0dae-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `true` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="a0dae-111">Analogamente, CheckBoxFields, che sono disabilitati nell'interfaccia standard di sola lettura, vengono convertiti in caselle di controllo abilitate nelle interfacce di modifica e inserimento.</span><span class="sxs-lookup"><span data-stu-id="a0dae-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="a0dae-112">Mentre le interfacce di modifica e inserimento predefinite per BoundField e CheckBoxField possono essere utili, l'interfaccia non dispone di alcun tipo di convalida.</span><span class="sxs-lookup"><span data-stu-id="a0dae-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="a0dae-113">Se un utente commette un errore di immissione dei dati, ad esempio omettendo il campo `ProductName` o immettendo un valore non valido per `UnitsInStock` (ad esempio-50), verrà generata un'eccezione dall'interno delle profondità dell'architettura dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a0dae-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="a0dae-114">Sebbene questa eccezione possa essere gestita normalmente come illustrato nell' [esercitazione precedente](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), idealmente l'interfaccia utente di modifica o inserimento includerà i controlli di convalida per impedire a un utente di immettere tali dati non validi nella prima posizione.</span><span class="sxs-lookup"><span data-stu-id="a0dae-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="a0dae-115">Per fornire un'interfaccia di modifica o inserimento personalizzata, è necessario sostituire BoundField o CheckBoxField con un TemplateField.</span><span class="sxs-lookup"><span data-stu-id="a0dae-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="a0dae-116">TemplateFields, che rappresenta l'argomento di discussione nell' [utilizzo di TemplateFields nel controllo GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) e l' [utilizzo di TemplateFields nelle](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) esercitazioni sui controlli DetailsView, può essere costituito da più modelli che definiscono interfacce separate per diversi Stati di riga.</span><span class="sxs-lookup"><span data-stu-id="a0dae-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="a0dae-117">Il `ItemTemplate` di TemplateField viene usato per il rendering di campi o righe di sola lettura nei controlli DetailsView o GridView, mentre le `EditItemTemplate` e `InsertItemTemplate` indicano rispettivamente le interfacce da usare per le modalità di modifica e inserimento.</span><span class="sxs-lookup"><span data-stu-id="a0dae-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="a0dae-118">In questa esercitazione verrà illustrato quanto sia semplice aggiungere controlli di convalida al `EditItemTemplate` e `InsertItemTemplate` di TemplateField per fornire un'interfaccia utente più infallibile.</span><span class="sxs-lookup"><span data-stu-id="a0dae-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="a0dae-119">In particolare, questa esercitazione prende in considerazione l'esempio creato nell'esercitazione [analisi degli eventi associati all'inserimento, aggiornamento ed eliminazione](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) e potenzia le interfacce di modifica e inserimento per includere la convalida appropriata.</span><span class="sxs-lookup"><span data-stu-id="a0dae-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deleting"></a><span data-ttu-id="a0dae-120">Passaggio 1: replica dell'esempio dall'[analisi degli eventi associati all'inserimento, all'aggiornamento e all'eliminazione](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a0dae-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span></span>

<span data-ttu-id="a0dae-121">Nell'esercitazione [analisi degli eventi associati a inserimento, aggiornamento ed eliminazione](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) è stata creata una pagina che elenca i nomi e i prezzi dei prodotti in un GridView modificabile.</span><span class="sxs-lookup"><span data-stu-id="a0dae-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="a0dae-122">Inoltre, nella pagina è incluso un oggetto DetailsView la cui proprietà `DefaultMode` è stata impostata su `Insert`, quindi viene sempre eseguito il rendering in modalità di inserimento.</span><span class="sxs-lookup"><span data-stu-id="a0dae-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="a0dae-123">Da questo DetailsView, l'utente può immettere il nome e il prezzo per un nuovo prodotto, fare clic su Inserisci e aggiungerlo al sistema (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="a0dae-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>

<span data-ttu-id="a0dae-124">[![esempio precedente consente agli utenti di aggiungere nuovi prodotti e modificare quelli esistenti](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span></span>

<span data-ttu-id="a0dae-125">**Figura 1**: l'esempio precedente consente agli utenti di aggiungere nuovi prodotti e modificare quelli esistenti ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span></span>

<span data-ttu-id="a0dae-126">L'obiettivo di questa esercitazione è quello di migliorare DetailsView e GridView per fornire controlli di convalida.</span><span class="sxs-lookup"><span data-stu-id="a0dae-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="a0dae-127">In particolare, la logica di convalida:</span><span class="sxs-lookup"><span data-stu-id="a0dae-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="a0dae-128">Richiedi che il nome venga fornito durante l'inserimento o la modifica di un prodotto</span><span class="sxs-lookup"><span data-stu-id="a0dae-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="a0dae-129">Richiedere che venga fornito il prezzo durante l'inserimento di un record; Quando si modifica un record, è comunque necessario un prezzo, ma userà la logica a livello di codice nel gestore dell'evento `RowUpdating` di GridView già presente nell'esercitazione precedente</span><span class="sxs-lookup"><span data-stu-id="a0dae-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="a0dae-130">Verificare che il valore immesso per il prezzo sia un formato di valuta valido</span><span class="sxs-lookup"><span data-stu-id="a0dae-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="a0dae-131">Prima di poter esaminare l'aumento dell'esempio precedente per includere la convalida, è prima di tutto necessario replicare l'esempio dalla pagina `DataModificationEvents.aspx` alla pagina per questa esercitazione, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="a0dae-132">A tale scopo, è necessario copiare sia il markup dichiarativo della pagina `DataModificationEvents.aspx` che il relativo codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="a0dae-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="a0dae-133">Prima di tutto, copiare il markup dichiarativo attenendosi alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="a0dae-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="a0dae-134">Aprire la pagina `DataModificationEvents.aspx` in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="a0dae-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="a0dae-135">Passare al markup dichiarativo della pagina. fare clic sul pulsante origine nella parte inferiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="a0dae-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="a0dae-136">Copiare il testo all'interno dei tag `<asp:Content>` e `</asp:Content>` (righe da 3 a 44), come illustrato nella figura 2.</span><span class="sxs-lookup"><span data-stu-id="a0dae-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>

<span data-ttu-id="a0dae-137">[![copiare il testo nel controllo &lt;ASP: content&gt;](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span></span>

<span data-ttu-id="a0dae-138">**Figura 2**: copiare il testo all'interno del controllo `<asp:Content>` ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span></span>

1. <span data-ttu-id="a0dae-139">Aprire la pagina `UIValidation.aspx`</span><span class="sxs-lookup"><span data-stu-id="a0dae-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="a0dae-140">Vai al markup dichiarativo della pagina</span><span class="sxs-lookup"><span data-stu-id="a0dae-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="a0dae-141">Incollare il testo all'interno del controllo `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="a0dae-142">Per copiare il codice sorgente, aprire la pagina `DataModificationEvents.aspx.cs` e copiare solo il testo *all'interno* della classe `EditInsertDelete_DataModificationEvents`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-142">To copy over the source code, open the `DataModificationEvents.aspx.cs` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="a0dae-143">Copiare i tre gestori eventi (`Page_Load`, `GridView1_RowUpdating`e `ObjectDataSource1_Inserting`), ma **non** copiare la dichiarazione della classe o le istruzioni `using`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="a0dae-144">Incollare il testo copiato *all'interno* della classe `EditInsertDelete_UIValidation` in `UIValidation.aspx.cs`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.cs`.</span></span>

<span data-ttu-id="a0dae-145">Dopo aver spostato il contenuto e il codice da `DataModificationEvents.aspx` a `UIValidation.aspx`, è necessario provare a testare lo stato di avanzamento in un browser.</span><span class="sxs-lookup"><span data-stu-id="a0dae-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="a0dae-146">Verrà visualizzato lo stesso output e si verificherà la stessa funzionalità in ognuna di queste due pagine (fare riferimento alla figura 1 per uno screenshot di `DataModificationEvents.aspx` in azione).</span><span class="sxs-lookup"><span data-stu-id="a0dae-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="a0dae-147">Passaggio 2: conversione dei BoundField in TemplateFields</span><span class="sxs-lookup"><span data-stu-id="a0dae-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="a0dae-148">Per aggiungere controlli di convalida alle interfacce di modifica e inserimento, i BoundField utilizzati dai controlli DetailsView e GridView devono essere convertiti in TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="a0dae-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="a0dae-149">A tale scopo, fare clic sui collegamenti Edit Columns e Edit Fields rispettivamente negli smart tag GridView e DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a0dae-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="a0dae-150">Selezionare ognuno dei BoundField e fare clic sul collegamento "Converti questo campo in un TemplateField".</span><span class="sxs-lookup"><span data-stu-id="a0dae-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>

<span data-ttu-id="a0dae-151">[![convertire i BoundField di DetailsView e GridView in TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span></span>

<span data-ttu-id="a0dae-152">**Figura 3**: convertire i BoundField di DetailsView e GridView in TemplateFields ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span></span>

<span data-ttu-id="a0dae-153">La conversione di un BoundField in un TemplateField tramite la finestra di dialogo campi genera un TemplateField che presenta le stesse interfacce di sola lettura, modifica e inserimento come il BoundField stesso.</span><span class="sxs-lookup"><span data-stu-id="a0dae-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="a0dae-154">Il markup seguente mostra la sintassi dichiarativa per il campo `ProductName` in DetailsView dopo che è stata convertita in TemplateField:</span><span class="sxs-lookup"><span data-stu-id="a0dae-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample1.aspx)]

<span data-ttu-id="a0dae-155">Si noti che questo TemplateField aveva tre modelli creati automaticamente `ItemTemplate`, `EditItemTemplate`e `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="a0dae-156">Il `ItemTemplate` Visualizza un singolo valore del campo dati (`ProductName`) utilizzando un controllo Web etichetta, mentre i `EditItemTemplate` e `InsertItemTemplate` presentano il valore del campo dati in un controllo Web TextBox che associa il campo dati alla proprietà di `Text` della casella di testo utilizzando l'associazione dati bidirezionale.</span><span class="sxs-lookup"><span data-stu-id="a0dae-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="a0dae-157">Poiché in questa pagina viene utilizzato solo il DetailsView per l'inserimento, è possibile rimuovere il `ItemTemplate` e `EditItemTemplate` dai due TemplateFields, anche se non vi è alcun danno in uscita.</span><span class="sxs-lookup"><span data-stu-id="a0dae-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="a0dae-158">Poiché GridView non supporta le funzionalità di inserimento predefinite di DetailsView, la conversione del campo `ProductName` di GridView in un TemplateField restituisce solo un `ItemTemplate` e `EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="a0dae-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample2.aspx)]

<span data-ttu-id="a0dae-159">Facendo clic sul pulsante "Converti questo campo in un TemplateField", Visual Studio ha creato un TemplateField i cui modelli simulano l'interfaccia utente del BoundField convertito.</span><span class="sxs-lookup"><span data-stu-id="a0dae-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="a0dae-160">Per verificarlo, è possibile visitare questa pagina tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="a0dae-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="a0dae-161">Si noterà che l'aspetto e il comportamento di TemplateFields sono identici a quelli dell'esperienza di utilizzo dei BoundField.</span><span class="sxs-lookup"><span data-stu-id="a0dae-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="a0dae-162">È possibile personalizzare le interfacce di modifica nei modelli in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="a0dae-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="a0dae-163">È ad esempio possibile che sia necessario che la casella di testo `UnitPrice` sottoposta a TemplateFields rendering come casella di testo più piccola rispetto alla casella di testo `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="a0dae-164">A tale scopo, è possibile impostare la proprietà `Columns` della casella di testo su un valore appropriato o fornire una larghezza assoluta tramite la proprietà `Width`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="a0dae-165">Nell'esercitazione successiva si vedrà come personalizzare completamente l'interfaccia di modifica sostituendo la casella di testo con un controllo Web di immissione dati alternativo.</span><span class="sxs-lookup"><span data-stu-id="a0dae-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>

## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="a0dae-166">Passaggio 3: aggiunta dei controlli di convalida al`EditItemTemplate` s di GridView</span><span class="sxs-lookup"><span data-stu-id="a0dae-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="a0dae-167">Quando si creano form di immissione dati, è importante che gli utenti immettano tutti i campi obbligatori e che tutti gli input forniti siano valori validi e formattati correttamente.</span><span class="sxs-lookup"><span data-stu-id="a0dae-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="a0dae-168">Per garantire la validità degli input di un utente, ASP.NET fornisce cinque controlli di convalida predefiniti progettati per essere usati per convalidare il valore di un singolo controllo di input:</span><span class="sxs-lookup"><span data-stu-id="a0dae-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="a0dae-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) garantisce che sia stato fornito un valore</span><span class="sxs-lookup"><span data-stu-id="a0dae-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="a0dae-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) convalida un valore rispetto a un altro valore di controllo Web o a un valore costante oppure garantisce che il formato del valore sia valido per un tipo di dati specificato.</span><span class="sxs-lookup"><span data-stu-id="a0dae-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="a0dae-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) garantisce che un valore si trovi all'interno di un intervallo di valori</span><span class="sxs-lookup"><span data-stu-id="a0dae-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="a0dae-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) convalida un valore rispetto a un' [espressione regolare](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="a0dae-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="a0dae-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) convalida un valore rispetto a un metodo personalizzato definito dall'utente</span><span class="sxs-lookup"><span data-stu-id="a0dae-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="a0dae-174">Per altre informazioni su questi cinque controlli, vedere la [sezione controlli di convalida](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) delle [esercitazioni introduttive di ASP.NET](https://asp.net/QuickStart/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="a0dae-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="a0dae-175">Per questa esercitazione è necessario usare un oggetto RequiredFieldValidator sia nel `ProductName` TemplateFields di DetailsView che in GridView e in un oggetto RequiredFieldValidator nel `UnitPrice` TemplateField di DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a0dae-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="a0dae-176">Inoltre, è necessario aggiungere un oggetto CompareValidator a entrambi i controlli ' `UnitPrice` TemplateFields che garantisce che il prezzo immesso abbia un valore maggiore o uguale a 0 e venga presentato in un formato di valuta valido.</span><span class="sxs-lookup"><span data-stu-id="a0dae-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="a0dae-177">Mentre ASP.NET 1. x aveva questi stessi cinque controlli di convalida, ASP.NET 2,0 ha aggiunto una serie di miglioramenti, i due principali sono il supporto degli script lato client per browser diversi da Internet Explorer e la possibilità di partizionare i controlli di convalida in una pagina in gruppi di convalida.</span><span class="sxs-lookup"><span data-stu-id="a0dae-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="a0dae-178">Per ulteriori informazioni sulle nuove funzionalità di controllo di convalida in 2,0, vedere l'articolo relativo alla [dissezione dei controlli di convalida in ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0dae-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="a0dae-179">Per iniziare, aggiungere i controlli di convalida necessari all'`EditItemTemplate` s nel TemplateFields di GridView.</span><span class="sxs-lookup"><span data-stu-id="a0dae-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="a0dae-180">A tale scopo, fare clic sul collegamento modifica modelli dallo smart tag di GridView per visualizzare l'interfaccia di modifica dei modelli.</span><span class="sxs-lookup"><span data-stu-id="a0dae-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="a0dae-181">Da qui è possibile selezionare il modello da modificare dall'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="a0dae-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="a0dae-182">Poiché si vuole aumentare l'interfaccia di modifica, è necessario aggiungere i controlli di convalida al `ProductName` e `UnitPrice``EditItemTemplate` s.</span><span class="sxs-lookup"><span data-stu-id="a0dae-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>

<span data-ttu-id="a0dae-183">[![è necessario estendere il EditItemTemplates di ProductName e di PrezzoUnitario](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span></span>

<span data-ttu-id="a0dae-184">**Figura 4**: è necessario estendere il `ProductName` e `UnitPrice`di `EditItemTemplate` s ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span></span>

<span data-ttu-id="a0dae-185">Nel `EditItemTemplate``ProductName` aggiungere un RequiredFieldValidator trascinandolo dalla casella degli strumenti nell'interfaccia di modifica del modello, inserendo dopo la casella di testo.</span><span class="sxs-lookup"><span data-stu-id="a0dae-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>

<span data-ttu-id="a0dae-186">[![aggiungere un RequiredFieldValidator al EditItemTemplate ProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span></span>

<span data-ttu-id="a0dae-187">**Figura 5**: aggiungere un RequiredFieldValidator al `EditItemTemplate` `ProductName` ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span></span>

<span data-ttu-id="a0dae-188">Tutti i controlli di convalida funzionano convalidando l'input di un singolo controllo Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a0dae-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="a0dae-189">Pertanto, è necessario indicare che il RequiredFieldValidator appena aggiunto deve essere convalidato in base alla casella di testo nell'`EditItemTemplate`; Questa operazione viene eseguita impostando la [proprietà ControlToValidate](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) del controllo di convalida sul `ID` del controllo Web appropriato.</span><span class="sxs-lookup"><span data-stu-id="a0dae-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="a0dae-190">Alla casella di testo è attualmente assegnata una `ID` piuttosto anonima di `TextBox1`, ma è possibile modificarla in modo più appropriato.</span><span class="sxs-lookup"><span data-stu-id="a0dae-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="a0dae-191">Fare clic sulla casella di testo nel modello e quindi, dal Finestra Proprietà, modificare la `ID` da `TextBox1` a `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>

<span data-ttu-id="a0dae-192">[![modificare l'ID della casella di testo in EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span></span>

<span data-ttu-id="a0dae-193">**Figura 6**: modificare la `ID` della casella di testo in `EditProductName` ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span></span>

<span data-ttu-id="a0dae-194">Impostare quindi la proprietà `ControlToValidate` di RequiredFieldValidator su `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="a0dae-195">Infine, impostare la [proprietà ErrorMessage](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) su "è necessario specificare il nome del prodotto" e la [proprietà Text](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) su "\*".</span><span class="sxs-lookup"><span data-stu-id="a0dae-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="a0dae-196">Il valore della proprietà `Text`, se specificato, è il testo visualizzato dal controllo di convalida se la convalida ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="a0dae-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="a0dae-197">Il valore della proprietà `ErrorMessage`, che è obbligatorio, viene utilizzato dal controllo ValidationSummary; Se il valore della proprietà `Text` viene omesso, il valore della proprietà `ErrorMessage` è anche il testo visualizzato dal controllo di convalida sull'input non valido.</span><span class="sxs-lookup"><span data-stu-id="a0dae-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="a0dae-198">Dopo aver impostato queste tre proprietà del RequiredFieldValidator, la schermata dovrebbe essere simile alla figura 7.</span><span class="sxs-lookup"><span data-stu-id="a0dae-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>

<span data-ttu-id="a0dae-199">[![impostare le proprietà ControlToValidate, ErrorMessage e Text di RequiredFieldValidator](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span></span>

<span data-ttu-id="a0dae-200">**Figura 7**: impostare le proprietà `ControlToValidate`, `ErrorMessage`e `Text` di RequiredFieldValidator ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span></span>

<span data-ttu-id="a0dae-201">Con il RequiredFieldValidator aggiunto al `ProductName` `EditItemTemplate`, resta solo aggiungere la convalida necessaria al `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="a0dae-202">Poiché abbiamo deciso che, per questa pagina, la `UnitPrice` è facoltativa quando si modifica un record, non è necessario aggiungere un RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="a0dae-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="a0dae-203">Tuttavia, è necessario aggiungere un oggetto CompareValidator per garantire che il `UnitPrice`, se specificato, sia formattato correttamente come valuta ed è maggiore o uguale a 0.</span><span class="sxs-lookup"><span data-stu-id="a0dae-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="a0dae-204">Prima di aggiungere il controllo CompareValidator alla `UnitPrice` `EditItemTemplate`, è necessario modificare l'ID del controllo Web TextBox da `TextBox2` a `EditUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="a0dae-205">Dopo avere apportato questa modifica, aggiungere il CompareValidator, impostare la relativa proprietà `ControlToValidate` su `EditUnitPrice`, la relativa proprietà `ErrorMessage` su "il prezzo deve essere maggiore o uguale a zero e non può includere il simbolo di valuta" e la relativa proprietà `Text` su "\*".</span><span class="sxs-lookup"><span data-stu-id="a0dae-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="a0dae-206">Per indicare che il valore di `UnitPrice` deve essere maggiore o uguale a 0, impostare la [Proprietà Operator](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) del CompareValidator su `GreaterThanEqual`, la relativa [proprietà ValueToCompare](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) su "0" e la relativa [proprietà Type](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) su `Currency`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="a0dae-207">La sintassi dichiarativa seguente mostra i `EditItemTemplate` di `UnitPrice` TemplateField dopo che sono state apportate queste modifiche:</span><span class="sxs-lookup"><span data-stu-id="a0dae-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample3.aspx)]

<span data-ttu-id="a0dae-208">Dopo avere apportato queste modifiche, aprire la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="a0dae-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="a0dae-209">Se si tenta di omettere il nome o si immette un valore di prezzo non valido durante la modifica di un prodotto, accanto alla casella di testo viene visualizzato un asterisco.</span><span class="sxs-lookup"><span data-stu-id="a0dae-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="a0dae-210">Come illustrato nella figura 8, un valore del prezzo che include il simbolo di valuta, ad esempio $19,95, viene considerato non valido.</span><span class="sxs-lookup"><span data-stu-id="a0dae-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="a0dae-211">Il `Currency` del CompareValidator `Type` consente separatori di cifre, ad esempio virgole o punti, a seconda delle impostazioni cultura, e un segno più o meno, ma *non consente un* simbolo di valuta.</span><span class="sxs-lookup"><span data-stu-id="a0dae-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="a0dae-212">Questo comportamento può avere perplessità sugli utenti perché l'interfaccia di modifica esegue attualmente il rendering del `UnitPrice` usando il formato di valuta.</span><span class="sxs-lookup"><span data-stu-id="a0dae-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="a0dae-213">Tenere presente che negli *eventi associati all'esercitazione di inserimento, aggiornamento ed eliminazione* è stata impostata la proprietà `DataFormatString` di BoundField su `{0:c}` per formattarla come valuta.</span><span class="sxs-lookup"><span data-stu-id="a0dae-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="a0dae-214">Inoltre, la proprietà `ApplyFormatInEditMode` viene impostata su true, facendo in modo che l'interfaccia di modifica di GridView formatti la `UnitPrice` come valuta.</span><span class="sxs-lookup"><span data-stu-id="a0dae-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="a0dae-215">Quando si converte il BoundField in un TemplateField, Visual Studio ha annotato queste impostazioni e formattato la proprietà `Text` della casella di testo come valuta usando la sintassi di associazione dati `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>

<span data-ttu-id="a0dae-216">[![viene visualizzato un asterisco accanto alle caselle di testo con input non valido](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span></span>

<span data-ttu-id="a0dae-217">**Figura 8**: viene visualizzato un asterisco accanto alle caselle di testo con input non valido ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span></span>

<span data-ttu-id="a0dae-218">Mentre la convalida funziona così com'è, l'utente deve rimuovere manualmente il simbolo di valuta quando si modifica un record, il che non è accettabile.</span><span class="sxs-lookup"><span data-stu-id="a0dae-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="a0dae-219">Per risolvere questo problema, sono disponibili tre opzioni:</span><span class="sxs-lookup"><span data-stu-id="a0dae-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="a0dae-220">Configurare il `EditItemTemplate` in modo che il valore di `UnitPrice` non venga formattato come valuta.</span><span class="sxs-lookup"><span data-stu-id="a0dae-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="a0dae-221">Consente all'utente di immettere un simbolo di valuta rimuovendo il CompareValidator e sostituendolo con un RegularExpressionValidator che controlla correttamente la presenza di un valore di valuta formattato correttamente.</span><span class="sxs-lookup"><span data-stu-id="a0dae-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="a0dae-222">Il problema in questo caso è che l'espressione regolare per convalidare un valore di valuta non è abbastanza e richiederebbe la scrittura di codice per incorporare le impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="a0dae-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="a0dae-223">Rimuovere completamente il controllo di convalida e basarsi sulla logica di convalida lato server nel gestore dell'evento `RowUpdating` di GridView.</span><span class="sxs-lookup"><span data-stu-id="a0dae-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="a0dae-224">Per questo esercizio verrà ora usata l'opzione #1.</span><span class="sxs-lookup"><span data-stu-id="a0dae-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="a0dae-225">Attualmente il `UnitPrice` viene formattato come valuta a causa dell'espressione DataBinding per la casella di testo nel `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="a0dae-226">Modificare l'istruzione bind in `Bind("UnitPrice", "{0:n2}")`, che formatta il risultato come numero con due cifre di precisione.</span><span class="sxs-lookup"><span data-stu-id="a0dae-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="a0dae-227">Questa operazione può essere eseguita direttamente tramite la sintassi dichiarativa oppure facendo clic sul collegamento Modifica DataBindings dalla casella di testo `EditUnitPrice` nella `EditItemTemplate` di `UnitPrice` TemplateField (vedere figure 9 e 10).</span><span class="sxs-lookup"><span data-stu-id="a0dae-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>

<span data-ttu-id="a0dae-228">[![fare clic sul collegamento Modifica DataBindings della casella di testo](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span></span>

<span data-ttu-id="a0dae-229">**Figura 9**: fare clic sul collegamento Modifica DataBindings della casella di testo ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span></span>

<span data-ttu-id="a0dae-230">[![specificare l'identificatore di formato nell'istruzione bind](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span></span>

<span data-ttu-id="a0dae-231">**Figura 10**: specificare l'identificatore di formato nell'istruzione `Bind` ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span></span>

<span data-ttu-id="a0dae-232">Con questa modifica, il prezzo formattato nell'interfaccia di modifica include le virgole come separatore di gruppi e un punto come separatore decimale, ma lascia il simbolo di valuta.</span><span class="sxs-lookup"><span data-stu-id="a0dae-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="a0dae-233">Il `UnitPrice` `EditItemTemplate` non include un RequiredFieldValidator, consentendo il postback e la logica di aggiornamento per iniziare.</span><span class="sxs-lookup"><span data-stu-id="a0dae-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="a0dae-234">Tuttavia, il gestore dell'evento `RowUpdating` copiato dall'esercitazione *analisi degli eventi associati a inserimento, aggiornamento ed eliminazione* include un controllo a livello di codice che garantisce che venga fornito il `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="a0dae-235">È possibile rimuovere questa logica, lasciarla così com'è o aggiungere un RequiredFieldValidator al `EditItemTemplate``UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>

## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="a0dae-236">Passaggio 4: riepilogo dei problemi di immissione dati</span><span class="sxs-lookup"><span data-stu-id="a0dae-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="a0dae-237">Oltre ai cinque controlli di convalida, ASP.NET include il [controllo ValidationSummary](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), che visualizza i `ErrorMessage` di questi controlli di convalida che hanno rilevato dati non validi.</span><span class="sxs-lookup"><span data-stu-id="a0dae-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="a0dae-238">È possibile visualizzare i dati di riepilogo come testo nella pagina Web o tramite un MessageBox modale sul lato client.</span><span class="sxs-lookup"><span data-stu-id="a0dae-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="a0dae-239">Verrà ora migliorata questa esercitazione per includere un MessageBox sul lato client che riepiloga gli eventuali problemi di convalida.</span><span class="sxs-lookup"><span data-stu-id="a0dae-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="a0dae-240">A tale scopo, trascinare un controllo ValidationSummary dalla casella degli strumenti nella finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="a0dae-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="a0dae-241">Il percorso del controllo di convalida non è rilevante, perché verrà configurato in modo da visualizzare solo il riepilogo come MessageBox.</span><span class="sxs-lookup"><span data-stu-id="a0dae-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="a0dae-242">Dopo l'aggiunta del controllo, impostare la relativa [proprietà ShowSummary](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) su `false` e la relativa [proprietà Metodo ShowMessageBox](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) su `true`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `false` and its [ShowMessageBox property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `true`.</span></span> <span data-ttu-id="a0dae-243">Con questa aggiunta, tutti gli errori di convalida vengono riepilogati in un MessageBox sul lato client.</span><span class="sxs-lookup"><span data-stu-id="a0dae-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>

<span data-ttu-id="a0dae-244">[![gli errori di convalida sono riepilogati in un MessageBox sul lato client](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span></span>

<span data-ttu-id="a0dae-245">**Figura 11**: gli errori di convalida sono riepilogati in un MessageBox sul lato client ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span></span>

## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="a0dae-246">Passaggio 5: aggiunta dei controlli di convalida al`InsertItemTemplate` di DetailsView</span><span class="sxs-lookup"><span data-stu-id="a0dae-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="a0dae-247">Per questa esercitazione rimane solo l'aggiunta di controlli di convalida all'interfaccia di inserimento di DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a0dae-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="a0dae-248">Il processo di aggiunta di controlli di convalida ai modelli di DetailsView è identico a quello esaminato nel passaggio 3. quindi, l'attività verrà rimossa in questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="a0dae-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="a0dae-249">Come è stato fatto con la `EditItemTemplate` s di GridView, si consiglia di rinominare i `ID` di caselle di testo dal `TextBox1` anonimo e `TextBox2` a `InsertProductName` e `InsertUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="a0dae-250">Aggiungere un RequiredFieldValidator al `InsertItemTemplate``ProductName`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="a0dae-251">Impostare il `ControlToValidate` sul `ID` della casella di testo nel modello, la relativa proprietà `Text` su "\*" e la relativa proprietà `ErrorMessage` su "è necessario fornire il nome del prodotto".</span><span class="sxs-lookup"><span data-stu-id="a0dae-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="a0dae-252">Poiché il `UnitPrice` è necessario per questa pagina quando si aggiunge un nuovo record, aggiungere un RequiredFieldValidator al `UnitPrice` `InsertItemTemplate`, impostando le proprietà `ControlToValidate`, `Text`e `ErrorMessage` in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="a0dae-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="a0dae-253">Infine, aggiungere un oggetto CompareValidator anche al `UnitPrice` `InsertItemTemplate`, configurando le proprietà `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`e `ValueToCompare` esattamente come è stato fatto con il controllo CompareValidator `UnitPrice`nell'`EditItemTemplate`di GridView.</span><span class="sxs-lookup"><span data-stu-id="a0dae-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="a0dae-254">Dopo l'aggiunta di questi controlli di convalida, non è possibile aggiungere un nuovo prodotto al sistema se il nome non viene fornito o se il relativo prezzo è un numero negativo o non è formattato in modo valido.</span><span class="sxs-lookup"><span data-stu-id="a0dae-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>

<span data-ttu-id="a0dae-255">[![logica di convalida è stata aggiunta all'interfaccia di inserimento di DetailsView](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span></span>

<span data-ttu-id="a0dae-256">**Figura 12**: è stata aggiunta la logica di convalida all'interfaccia di inserimento di DetailsView ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span></span>

## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="a0dae-257">Passaggio 6: partizionamento dei controlli di convalida in gruppi di convalida</span><span class="sxs-lookup"><span data-stu-id="a0dae-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="a0dae-258">La pagina è costituita da due set di controlli di convalida logicamente diversi, ovvero quelli che corrispondono all'interfaccia di modifica di GridView e quelli che corrispondono all'interfaccia di inserimento di DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a0dae-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="a0dae-259">Per impostazione predefinita, quando si verifica un postback *tutti i* controlli di convalida della pagina sono controllati.</span><span class="sxs-lookup"><span data-stu-id="a0dae-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="a0dae-260">Tuttavia, quando si modifica un record, non si vuole che i controlli di convalida dell'interfaccia di inserimento di DetailsView vengano convalidati.</span><span class="sxs-lookup"><span data-stu-id="a0dae-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="a0dae-261">Nella figura 13 viene illustrato il dilemma corrente quando un utente sta modificando un prodotto con valori perfettamente validi, facendo clic su Aggiorna viene generato un errore di convalida perché i valori di nome e prezzo nell'interfaccia di inserimento sono vuoti.</span><span class="sxs-lookup"><span data-stu-id="a0dae-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>

<span data-ttu-id="a0dae-262">[![l'aggiornamento di un prodotto comporta l'attivazione dei controlli di convalida dell'interfaccia di inserimento](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span></span>

<span data-ttu-id="a0dae-263">**Figura 13**: l'aggiornamento di un prodotto provoca l'attivazione dei controlli di convalida dell'interfaccia di inserimento ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span></span>

<span data-ttu-id="a0dae-264">I controlli di convalida in ASP.NET 2,0 possono essere partizionati in gruppi di convalida tramite la relativa proprietà `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="a0dae-265">Per associare un set di controlli di convalida in un gruppo, è sufficiente impostare la relativa proprietà `ValidationGroup` sullo stesso valore.</span><span class="sxs-lookup"><span data-stu-id="a0dae-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="a0dae-266">Per questa esercitazione, impostare le proprietà `ValidationGroup` dei controlli di convalida nel TemplateFields di GridView su `EditValidationControls` e le proprietà `ValidationGroup` del TemplateFields di DetailsView su `InsertValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="a0dae-267">Queste modifiche possono essere eseguite direttamente nel markup dichiarativo o tramite il Finestra Proprietà quando si usa l'interfaccia di modifica modello della finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="a0dae-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="a0dae-268">Oltre ai controlli di convalida, i controlli correlati a pulsanti e pulsanti in ASP.NET 2,0 includono anche una proprietà `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="a0dae-269">Viene verificata la validità dei validator di un gruppo di convalida solo quando un postback è indotto da un pulsante con la stessa impostazione della proprietà `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="a0dae-270">Ad esempio, per consentire al pulsante di inserimento di DetailsView di attivare il `InsertValidationControls` gruppo di convalida, è necessario impostare la proprietà `ValidationGroup` di CommandField su `InsertValidationControls` (vedere la figura 14).</span><span class="sxs-lookup"><span data-stu-id="a0dae-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="a0dae-271">Inoltre, impostare la proprietà CommandField's `ValidationGroup` di GridView su `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>

<span data-ttu-id="a0dae-272">[![impostare la proprietà ValidationGroup CommandField's di DetailsView su InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="a0dae-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span></span>

<span data-ttu-id="a0dae-273">**Figura 14**: impostare la proprietà CommandField's `ValidationGroup` di DetailsView su `InsertValidationControls` ([fare clic per visualizzare l'immagine con dimensioni complete](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="a0dae-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span></span>

<span data-ttu-id="a0dae-274">Una volta apportate queste modifiche, TemplateFields e CommandFields di DetailsView e GridView dovrebbero avere un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a0dae-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="a0dae-275">TemplateFields e CommandField di DetailsView</span><span class="sxs-lookup"><span data-stu-id="a0dae-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample4.aspx)]

<span data-ttu-id="a0dae-276">CommandField e TemplateFields di GridView</span><span class="sxs-lookup"><span data-stu-id="a0dae-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample5.aspx)]

<span data-ttu-id="a0dae-277">A questo punto, i controlli di convalida specifici per la modifica vengono attivati solo quando si fa clic sul pulsante Aggiorna di GridView e i controlli di convalida specifici dell'inserimento vengono attivati solo quando si fa clic sul pulsante di inserimento di DetailsView, risolvendo il problema evidenziato dalla figura 13.</span><span class="sxs-lookup"><span data-stu-id="a0dae-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="a0dae-278">Con questa modifica, tuttavia, il controllo ValidationSummary non viene più visualizzato quando si immettono dati non validi.</span><span class="sxs-lookup"><span data-stu-id="a0dae-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="a0dae-279">Il controllo ValidationSummary contiene inoltre una proprietà `ValidationGroup` e Mostra solo le informazioni di riepilogo per i controlli di convalida nel gruppo di convalida.</span><span class="sxs-lookup"><span data-stu-id="a0dae-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="a0dae-280">In questa pagina è quindi necessario disporre di due controlli di convalida, uno per il gruppo di convalida `InsertValidationControls` e uno per `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="a0dae-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample6.aspx)]

<span data-ttu-id="a0dae-281">Con questa aggiunta, l'esercitazione è stata completata.</span><span class="sxs-lookup"><span data-stu-id="a0dae-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="a0dae-282">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="a0dae-282">Summary</span></span>

<span data-ttu-id="a0dae-283">Mentre i BoundField possono fornire un'interfaccia di inserimento e modifica, l'interfaccia non è personalizzabile.</span><span class="sxs-lookup"><span data-stu-id="a0dae-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="a0dae-284">In genere, si desidera aggiungere controlli di convalida all'interfaccia di modifica e inserimento per assicurarsi che l'utente immetta gli input richiesti in un formato valido.</span><span class="sxs-lookup"><span data-stu-id="a0dae-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="a0dae-285">A tale scopo, è necessario convertire i BoundField in TemplateFields e aggiungere i controlli di convalida ai modelli appropriati.</span><span class="sxs-lookup"><span data-stu-id="a0dae-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="a0dae-286">In questa esercitazione è stato esteso l'esempio dell'esercitazione *analisi degli eventi associati a inserimento, aggiornamento ed eliminazione* , aggiunta di controlli di convalida sia all'interfaccia di inserimento di DetailsView sia all'interfaccia di modifica di GridView.</span><span class="sxs-lookup"><span data-stu-id="a0dae-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="a0dae-287">È stato inoltre illustrato come visualizzare le informazioni di convalida di riepilogo tramite il controllo ValidationSummary e come partizionare i controlli di convalida nella pagina in gruppi di convalida distinti.</span><span class="sxs-lookup"><span data-stu-id="a0dae-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="a0dae-288">Come illustrato in questa esercitazione, TemplateFields consente di aumentare le interfacce di modifica e inserimento per includere i controlli di convalida.</span><span class="sxs-lookup"><span data-stu-id="a0dae-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="a0dae-289">TemplateFields può anche essere esteso per includere controlli Web di input aggiuntivi, consentendo alla casella di testo di essere sostituita da un controllo Web più appropriato.</span><span class="sxs-lookup"><span data-stu-id="a0dae-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="a0dae-290">Nell'esercitazione successiva verrà illustrato come sostituire il controllo TextBox con un controllo DropDownList associato a dati, ideale quando si modifica una chiave esterna (ad esempio `CategoryID` o `SupplierID` nella tabella `Products`).</span><span class="sxs-lookup"><span data-stu-id="a0dae-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="a0dae-291">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="a0dae-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a0dae-292">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="a0dae-292">About the Author</span></span>

<span data-ttu-id="a0dae-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette ASP/ASP. NET Books e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), collabora con le tecnologie Web Microsoft a partire da 1998.</span><span class="sxs-lookup"><span data-stu-id="a0dae-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a0dae-294">Scott lavora come consulente, trainer e writer indipendenti.</span><span class="sxs-lookup"><span data-stu-id="a0dae-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a0dae-295">Il suo ultimo libro è [*Sams Teach Yourself ASP.NET 2,0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a0dae-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a0dae-296">Può essere raggiunto in [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a0dae-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a0dae-297">o tramite il suo Blog, disponibile in [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a0dae-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a0dae-298">Grazie speciale</span><span class="sxs-lookup"><span data-stu-id="a0dae-298">Special Thanks To</span></span>

<span data-ttu-id="a0dae-299">Questa serie di esercitazioni è stata esaminata da molti revisori utili.</span><span class="sxs-lookup"><span data-stu-id="a0dae-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a0dae-300">I revisori del lead per questa esercitazione erano Liz Shulok e Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="a0dae-300">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="a0dae-301">Sei interessato a esaminare i miei prossimi articoli MSDN?</span><span class="sxs-lookup"><span data-stu-id="a0dae-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a0dae-302">In tal caso, rilasciare una riga in [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a0dae-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a0dae-303">[Precedente](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
> [Successivo](customizing-the-data-modification-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a0dae-303">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
[Next](customizing-the-data-modification-interface-cs.md)</span></span>
