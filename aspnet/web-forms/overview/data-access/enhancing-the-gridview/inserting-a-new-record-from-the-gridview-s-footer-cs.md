---
uid: web-forms/overview/data-access/enhancing-the-gridview/inserting-a-new-record-from-the-gridview-s-footer-cs
title: Inserimento di un nuovo Record dal piè di pagina del controllo GridView (c#) | Microsoft Docs
author: rick-anderson
description: Mentre il controllo GridView non fornisce supporto incorporato per l'inserimento di un nuovo record di dati, questa esercitazione illustra come migliorare il controllo GridView per includere un...
ms.author: riande
ms.date: 03/06/2007
ms.assetid: 49545652-98af-46ba-9dbc-9ab529805d9b
msc.legacyurl: /web-forms/overview/data-access/enhancing-the-gridview/inserting-a-new-record-from-the-gridview-s-footer-cs
msc.type: authoredcontent
ms.openlocfilehash: 58d62c52ea78d8b53d7dc654d06a1cbd6a4bb844
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2019
ms.locfileid: "65109516"
---
# <a name="inserting-a-new-record-from-the-gridviews-footer-c"></a><span data-ttu-id="6e7e8-103">Inserimento di un nuovo record dal piè di pagina di GridView (C#)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-103">Inserting a New Record from the GridView's Footer (C#)</span></span>

<span data-ttu-id="6e7e8-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="6e7e8-105">[Scaricare l'App di esempio](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_53_CS.exe) o [Scarica il PDF](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/datatutorial53cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_53_CS.exe) or [Download PDF](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/datatutorial53cs1.pdf)</span></span>

> <span data-ttu-id="6e7e8-106">Mentre il controllo GridView non fornisce supporto incorporato per l'inserimento di un nuovo record di dati, questa esercitazione illustra come migliorare il controllo GridView in modo da includere un'interfaccia di inserimento.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-106">While the GridView control does not provide built-in support for inserting a new record of data, this tutorial shows how to augment the GridView to include an inserting interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="6e7e8-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="6e7e8-107">Introduction</span></span>

<span data-ttu-id="6e7e8-108">Come descritto nel [una panoramica di inserimento, aggiornamento ed eliminazione di dati](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) dell'esercitazione, i controlli GridView, DetailsView e FormView Web includono funzionalità di modifica dei dati incorporati.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-108">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, the GridView, DetailsView, and FormView Web controls each include built-in data modification capabilities.</span></span> <span data-ttu-id="6e7e8-109">Se usato con i controlli origine dati dichiarativi, questi tre controlli Web rapidamente e facilmente configurabili per modificare i dati - e negli scenari senza la necessità di scrivere una singola riga di codice.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-109">When used with declarative data source controls, these three Web controls can be quickly and easily configured to modify data - and in scenarios without needing to write a single line of code.</span></span> <span data-ttu-id="6e7e8-110">Sfortunatamente, solo i controlli DetailsView e FormView forniscono incorporati di inserimento, modifica ed eliminazione funzionalità.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-110">Unfortunately, only the DetailsView and FormView controls provide built-in inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="6e7e8-111">Il controllo GridView offre solo la modifica ed eliminazione di supporto.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-111">The GridView only offers editing and deleting support.</span></span> <span data-ttu-id="6e7e8-112">Con un piccolo gomito grasso, tuttavia, possiamo forniamo GridView per includere un'interfaccia di inserimento.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-112">However, with a little elbow grease, we can augment the GridView to include an inserting interface.</span></span>

<span data-ttu-id="6e7e8-113">Aggiunta di funzionalità di inserimento per il controllo GridView, siamo responsabili per decidere come i nuovi record verranno aggiunti, la creazione dell'interfaccia di inserimento e la scrittura del codice per inserire il nuovo record.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-113">In adding inserting capabilities to the GridView, we are responsible for deciding on how new records will be added, creating the inserting interface, and writing the code to insert the new record.</span></span> <span data-ttu-id="6e7e8-114">In questa esercitazione che verrà esaminato l'aggiunta di interfaccia di inserimento nel piè di pagina di GridView s riga (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-114">In this tutorial we will look at adding the inserting interface to the GridView s footer row (see Figure 1).</span></span> <span data-ttu-id="6e7e8-115">La cella del piè di pagina per ogni colonna include i dati appropriati raccolta elemento dell'interfaccia utente (una casella di testo per il nome del prodotto s, un controllo DropDownList per i fornitori e così via).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-115">The footer cell for each column includes the appropriate data collection user interface element (a TextBox for the product s name, a DropDownList for the supplier, and so on).</span></span> <span data-ttu-id="6e7e8-116">Collaboriamo anche con una colonna per un'operazione di aggiunta pulsante che, quando si fa clic, viene provocato un postback e inserire un nuovo record nel `Products` tabella usando i valori specificati nella riga del piè di pagina.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-116">We also need a column for an Add button that, when clicked, will cause a postback and insert a new record into the `Products` table using the values supplied in the footer row.</span></span>

<span data-ttu-id="6e7e8-117">[![La riga di piè di pagina offre un'interfaccia per l'aggiunta di nuovi prodotti](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-117">[![The Footer Row Provides an Interface for Adding New Products](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.png)</span></span>

<span data-ttu-id="6e7e8-118">**Figura 1**: La riga di piè di pagina fornisce un'interfaccia per l'aggiunta di nuovi prodotti ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-118">**Figure 1**: The Footer Row Provides an Interface for Adding New Products ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.png))</span></span>

## <a name="step-1-displaying-product-information-in-a-gridview"></a><span data-ttu-id="6e7e8-119">Passaggio 1: Visualizzazione di informazioni sul prodotto in un oggetto GridView</span><span class="sxs-lookup"><span data-stu-id="6e7e8-119">Step 1: Displaying Product Information in a GridView</span></span>

<span data-ttu-id="6e7e8-120">Prima che si sono relative a noi con la creazione dell'interfaccia di inserimento nel piè di pagina s GridView, lasciare che lo stato attivo prima con s sull'aggiunta di un controllo GridView alla pagina che elenca i prodotti nel database.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-120">Before we concern ourselves with creating the inserting interface in the GridView s footer, let s first focus on adding a GridView to the page that lists the products in the database.</span></span> <span data-ttu-id="6e7e8-121">Iniziare aprendo il `InsertThroughFooter.aspx` nella pagina la `EnhancedGridView` cartelle e trascinare un controllo GridView dalla casella degli strumenti nella finestra di progettazione, l'impostazione s GridView `ID` proprietà `Products`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-121">Start by opening the `InsertThroughFooter.aspx` page in the `EnhancedGridView` folder and drag a GridView from the Toolbox onto the Designer, setting the GridView s `ID` property to `Products`.</span></span> <span data-ttu-id="6e7e8-122">Usare quindi lo smart tag s di GridView per associarlo a un nuovo oggetto ObjectDataSource denominato `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-122">Next, use the GridView s smart tag to bind it to a new ObjectDataSource named `ProductsDataSource`.</span></span>

<span data-ttu-id="6e7e8-123">[![Creare un nuovo oggetto ObjectDataSource denominato ProductsDataSource](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-123">[![Create a New ObjectDataSource Named ProductsDataSource](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.png)</span></span>

<span data-ttu-id="6e7e8-124">**Figura 2**: Creare un nuovo oggetto ObjectDataSource denominato `ProductsDataSource` ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-124">**Figure 2**: Create a New ObjectDataSource Named `ProductsDataSource` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.png))</span></span>

<span data-ttu-id="6e7e8-125">Configurare ObjectDataSource per usare la `ProductsBLL` classe s `GetProducts()` metodo per recuperare le informazioni sul prodotto.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-125">Configure the ObjectDataSource to use the `ProductsBLL` class s `GetProducts()` method to retrieve product information.</span></span> <span data-ttu-id="6e7e8-126">Per questa esercitazione, lasciare che lo stato attivo s esclusivamente sull'aggiunta di funzionalità di inserimento e senza doversi preoccupare di modifica ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-126">For this tutorial, let s focus strictly on adding inserting capabilities and not worry about editing and deleting.</span></span> <span data-ttu-id="6e7e8-127">Pertanto, assicurarsi che l'elenco di riepilogo a discesa nella scheda Inserisci è impostato su `AddProduct()` e che gli elenchi a discesa nelle schede UPDATE e DELETE sono impostati su (nessuno).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-127">Therefore, make sure that the drop-down list in the INSERT tab is set to `AddProduct()` and that the drop-down lists in the UPDATE and DELETE tabs are set to (None) .</span></span>

<span data-ttu-id="6e7e8-128">[![Eseguire il mapping del metodo AddProduct al metodo ObjectDataSource s Insert)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-128">[![Map the AddProduct Method to the ObjectDataSource s Insert() Method](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.png)</span></span>

<span data-ttu-id="6e7e8-129">**Figura 3**: Mappa il `AddProduct` metodo s ObjectDataSource `Insert()` metodo ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-129">**Figure 3**: Map the `AddProduct` Method to the ObjectDataSource s `Insert()` Method ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.png))</span></span>

<span data-ttu-id="6e7e8-130">[![Impostare gli elenchi di riepilogo a discesa UPDATE e DELETE tabulazioni su (nessuno)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-130">[![Set the UPDATE and DELETE Tabs Drop-Down Lists to (None)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.png)</span></span>

<span data-ttu-id="6e7e8-131">**Figura 4**: Impostare l'aggiornamento ed eliminare schede elenco a discesa Elenca su (nessuno) ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-131">**Figure 4**: Set the UPDATE and DELETE Tabs Drop-Down Lists to (None) ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.png))</span></span>

<span data-ttu-id="6e7e8-132">Dopo aver completato la procedura guidata Configura origine dati di ObjectDataSource s, Visual Studio aggiungerà automaticamente i campi per il controllo GridView per ognuno dei campi dati corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-132">After completing the ObjectDataSource s Configure Data Source wizard, Visual Studio will automatically add fields to the GridView for each of the corresponding data fields.</span></span> <span data-ttu-id="6e7e8-133">Per il momento, lasciare tutti i campi aggiunti da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-133">For now, leave all of the fields added by Visual Studio.</span></span> <span data-ttu-id="6e7e8-134">Più avanti in questa esercitazione verrà tornare indietro e rimuovere alcuni dei campi i cui valori desidero devono essere specificate quando si aggiunge un nuovo record.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-134">Later in this tutorial we'll come back and remove some of the fields whose values don t need to be specified when adding a new record.</span></span>

<span data-ttu-id="6e7e8-135">Poiché sono presenti più vicino 80 prodotti nel database, sarà necessario un utente di scorrere tutti gli altri fino alla fine della pagina web per aggiungere un nuovo record.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-135">Since there are close to 80 products in the database, a user will have to scroll all the way down to the bottom of the web page in order to add a new record.</span></span> <span data-ttu-id="6e7e8-136">Pertanto, lasciare s attivare il paging rendere l'interfaccia di inserimento più visibile e accessibile.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-136">Therefore, let s enable paging to make the inserting interface more visible and accessible.</span></span> <span data-ttu-id="6e7e8-137">Per attivare il paging, è sufficiente selezionare la casella di controllo Attiva Paging nello smart tag s GridView.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-137">To turn on paging, simply check the Enable Paging checkbox from the GridView s smart tag.</span></span>

<span data-ttu-id="6e7e8-138">A questo punto, il markup dichiarativo s GridView e ObjectDataSource dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-138">At this point, the GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample1.aspx)]

<span data-ttu-id="6e7e8-139">[![Tutti i campi di dati prodotto vengono visualizzati in un controllo GridView di paging](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-139">[![All Product Data Fields are Displayed in a Paged GridView](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.png)</span></span>

<span data-ttu-id="6e7e8-140">**Figura 5**: Tutti i campi di dati prodotto vengono visualizzati in un controllo GridView di paging ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-140">**Figure 5**: All Product Data Fields are Displayed in a Paged GridView ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.png))</span></span>

## <a name="step-2-adding-a-footer-row"></a><span data-ttu-id="6e7e8-141">Passaggio 2: Aggiunta di una riga di piè di pagina</span><span class="sxs-lookup"><span data-stu-id="6e7e8-141">Step 2: Adding a Footer Row</span></span>

<span data-ttu-id="6e7e8-142">Insieme all'intestazione e le righe di dati, il controllo GridView include una riga di piè di pagina.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-142">Along with its header and data rows, the GridView includes a footer row.</span></span> <span data-ttu-id="6e7e8-143">Vengono visualizzate le righe di intestazione e piè di pagina a seconda dei valori di istanze della classe GridView [ `ShowHeader` ](https://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.gridview.showheader.aspx) e [ `ShowFooter` ](https://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.gridview.showfooter.aspx) proprietà.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-143">The header and footer rows are displayed depending on the values of the GridView s [`ShowHeader`](https://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.gridview.showheader.aspx) and [`ShowFooter`](https://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.gridview.showfooter.aspx) properties.</span></span> <span data-ttu-id="6e7e8-144">Per visualizzare la riga di piè di pagina, è sufficiente impostare il `ShowFooter` proprietà `true`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-144">To show the footer row, simply set the `ShowFooter` property to `true`.</span></span> <span data-ttu-id="6e7e8-145">Come illustrato nella figura 6, impostando il `ShowFooter` proprietà `true` aggiunta alla griglia una riga di piè di pagina.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-145">As Figure 6 illustrates, setting the `ShowFooter` property to `true` adds a footer row to the grid.</span></span>

<span data-ttu-id="6e7e8-146">[![Per visualizzare la riga di piè di pagina, impostare ShowFooter su True](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-146">[![To Display the Footer Row, Set ShowFooter to True](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.png)</span></span>

<span data-ttu-id="6e7e8-147">**Figura 6**: Per visualizzare la riga di piè di pagina, impostare `ShowFooter` al `True` ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-147">**Figure 6**: To Display the Footer Row, Set `ShowFooter` to `True` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.png))</span></span>

<span data-ttu-id="6e7e8-148">Si noti che la riga di piè di pagina ha un colore di sfondo rosso scuro.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-148">Note that the footer row has a dark red background color.</span></span> <span data-ttu-id="6e7e8-149">Ciò è dovuto al tema DataWebControls viene creata e applicata a tutte le pagine nella [visualizzazione di dati con ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) esercitazione.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-149">This is due to the DataWebControls Theme we created and applied to all pages back in the [Displaying Data With the ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) tutorial.</span></span> <span data-ttu-id="6e7e8-150">In particolare, il `GridView.skin` file consente di configurare la `FooterStyle` proprietà di questo tipo che viene utilizzata la `FooterStyle` classe CSS.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-150">Specifically, the `GridView.skin` file configures the `FooterStyle` property such that is uses the `FooterStyle` CSS class.</span></span> <span data-ttu-id="6e7e8-151">Il `FooterStyle` classe è definita in `Styles.css` come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-151">The `FooterStyle` class is defined in `Styles.css` as follows:</span></span>

[!code-css[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample2.css)]

> [!NOTE]
> <span data-ttu-id="6e7e8-152">Abbiamo ve esaminate tramite la riga di piè di pagina di GridView s nelle esercitazioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-152">We ve explored using the GridView s footer row in previous tutorials.</span></span> <span data-ttu-id="6e7e8-153">Se necessario, fare riferimento al [visualizzando le informazioni di riepilogo nel piè di pagina di GridView](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) esercitazione per un processo di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-153">If needed, refer back to the [Displaying Summary Information in the GridView's Footer](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) tutorial for a refresher.</span></span>

<span data-ttu-id="6e7e8-154">Dopo aver impostato la `ShowFooter` proprietà `true`, si consiglia di visualizzare l'output in un browser.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-154">After setting the `ShowFooter` property to `true`, take a moment to view the output in a browser.</span></span> <span data-ttu-id="6e7e8-155">Attualmente t riga del piè di pagina contiene testo o controlli Web.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-155">Currently the footer row doesn t contain any text or Web controls.</span></span> <span data-ttu-id="6e7e8-156">Nel passaggio 3 si modificherà il piè di pagina per ogni campo di GridView in modo che includa inserimento interfaccia appropriata.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-156">In Step 3 we'll modify the footer for each GridView field so that it includes the appropriate inserting interface.</span></span>

<span data-ttu-id="6e7e8-157">[![La riga di piè di pagina vuota è visualizzato sopra il Paging di controlli dell'interfaccia](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-157">[![The Empty Footer Row is Displayed Above the Paging Interface Controls](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image13.png)</span></span>

<span data-ttu-id="6e7e8-158">**Figura 7**: La riga di piè di pagina vuota è visualizzato sopra il Paging di controlli dell'interfaccia ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-158">**Figure 7**: The Empty Footer Row is Displayed Above the Paging Interface Controls ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image14.png))</span></span>

## <a name="step-3-customizing-the-footer-row"></a><span data-ttu-id="6e7e8-159">Passaggio 3: Personalizzazione della riga di piè di pagina</span><span class="sxs-lookup"><span data-stu-id="6e7e8-159">Step 3: Customizing the Footer Row</span></span>

<span data-ttu-id="6e7e8-160">Nel [uso di TemplateFields nel controllo GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) esercitazione è stato illustrato come personalizzare notevolmente la visualizzazione di una determinata colonna GridView uso di TemplateFields (in contrapposizione BoundField o CheckBoxFields); nella [ Personalizzazione dell'interfaccia di modifica dati](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) rimando all'uso di TemplateFields per personalizzare l'interfaccia di modifica in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-160">Back in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial we saw how to greatly customize the display of a particular GridView column using TemplateFields (as opposed to BoundFields or CheckBoxFields); in [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) we looked at using TemplateFields to customize the editing interface in a GridView.</span></span> <span data-ttu-id="6e7e8-161">Tenere presente che un TemplateField è costituito da diversi modelli che definisce la combinazione di markup, i controlli Web e la sintassi di associazione dati usato per determinati tipi di righe.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-161">Recall that a TemplateField is composed of a number of templates that defines the mix of markup, Web controls, and databinding syntax used for certain types of rows.</span></span> <span data-ttu-id="6e7e8-162">Il `ItemTemplate`, ad esempio, specifica il modello utilizzato per le righe di sola lettura, mentre il `EditItemTemplate` definisce il modello per la riga modificabile.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-162">The `ItemTemplate`, for example, specifies the template used for read-only rows, while the `EditItemTemplate` defines the template for the editable row.</span></span>

<span data-ttu-id="6e7e8-163">Con il `ItemTemplate` e `EditItemTemplate`, il TemplateField include anche un `FooterTemplate` che specifica il contenuto per la riga di piè di pagina.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-163">Along with the `ItemTemplate` and `EditItemTemplate`, the TemplateField also includes a `FooterTemplate` that specifies the content for the footer row.</span></span> <span data-ttu-id="6e7e8-164">Pertanto, è possibile aggiungere i controlli Web necessari per l'inserimento di interfaccia in ogni il campo s il `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-164">Therefore, we can add the Web controls needed for each field s inserting interface into the `FooterTemplate`.</span></span> <span data-ttu-id="6e7e8-165">Per iniziare, convertire tutti i campi in GridView in TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-165">To start, convert all of the fields in the GridView to TemplateFields.</span></span> <span data-ttu-id="6e7e8-166">Questa operazione può essere eseguita selezionando il collegamento di modifica colonne in GridView s smart tag, selezionando ciascun campo nell'angolo inferiore sinistro e fare clic su Converti il campo in un collegamento TemplateField.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-166">This can be done by clicking the Edit Columns link in the GridView s smart tag, selecting each field in the lower left corner, and clicking the Convert this field into a TemplateField link.</span></span>

![Convertire ogni campo in un TemplateField](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.gif)

<span data-ttu-id="6e7e8-168">**Figura 8**: Convertire ogni campo in un TemplateField</span><span class="sxs-lookup"><span data-stu-id="6e7e8-168">**Figure 8**: Convert Each Field Into a TemplateField</span></span>

<span data-ttu-id="6e7e8-169">Facendo clic su Converti il campo in un TemplateField trasforma il tipo di campo corrente in un TemplateField equivalente.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-169">Clicking the Convert this field into a TemplateField turns the current field type into an equivalent TemplateField.</span></span> <span data-ttu-id="6e7e8-170">Ad esempio, ogni BoundField viene sostituito da un TemplateField con un `ItemTemplate` che contiene un'etichetta che visualizza il campo dati corrispondente e un `EditItemTemplate` che visualizza il campo dati in una casella di testo.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-170">For example, each BoundField is replaced by a TemplateField with an `ItemTemplate` that contains a Label that displays the corresponding data field and an `EditItemTemplate` that displays the data field in a TextBox.</span></span> <span data-ttu-id="6e7e8-171">Il `ProductName` BoundField è stata convertita in markup TemplateField riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-171">The `ProductName` BoundField has been converted into the following TemplateField markup:</span></span>

[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample3.aspx)]

<span data-ttu-id="6e7e8-172">Allo stesso modo, il `Discontinued` CampoCasellaDiControllo è stata convertita in un TemplateField la cui proprietà `ItemTemplate` e `EditItemTemplate` contengono un controllo casella di controllo Web (con il `ItemTemplate` s casella di controllo disabilitato).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-172">Likewise, the `Discontinued` CheckBoxField has been converted into a TemplateField whose `ItemTemplate` and `EditItemTemplate` contain a CheckBox Web control (with the `ItemTemplate` s CheckBox disabled).</span></span> <span data-ttu-id="6e7e8-173">Di sola lettura `ProductID` BoundField è stata convertita in un TemplateField con un controllo etichetta in entrambe le `ItemTemplate` e `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-173">The read-only `ProductID` BoundField has been converted into a TemplateField with a Label control in both the `ItemTemplate` and `EditItemTemplate`.</span></span> <span data-ttu-id="6e7e8-174">In breve, la conversione di un controllo GridView esistente campo in un TemplateField è un modo semplice e rapido per passare per il livello di personalizzazione TemplateField senza perdere le funzionalità esistenti di campo s.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-174">In short, converting an existing GridView field into a TemplateField is a quick and easy way to switch to the more customizable TemplateField without losing any of the existing field s functionality.</span></span>

<span data-ttu-id="6e7e8-175">Poiché il controllo GridView è re lavora sul supporto t la modifica, è possibile rimuovere il `EditItemTemplate` da ogni TemplateField, lasciando solo il `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-175">Since the GridView we re working with doesn t support editing, feel free to remove the `EditItemTemplate` from each TemplateField, leaving just the `ItemTemplate`.</span></span> <span data-ttu-id="6e7e8-176">Dopo questa operazione, il markup dichiarativo di GridView s dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-176">After doing this, your GridView s declarative markup should look like the following:</span></span>

[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample4.aspx)]

<span data-ttu-id="6e7e8-177">Ora che ogni campo di controllo GridView è stato convertito in un TemplateField, è possibile immettere l'interfaccia appropriata di inserimento in s ogni campo `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-177">Now that each GridView field has been converted into a TemplateField, we can enter the appropriate inserting interface into each field s `FooterTemplate`.</span></span> <span data-ttu-id="6e7e8-178">Alcuni dei campi non avrà un'interfaccia di inserimento (`ProductID`, ad esempio); altri possono variare nei controlli Web consente di raccogliere le informazioni sui nuovi prodotti s.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-178">Some of the fields will not have an inserting interface (`ProductID`, for instance); others will vary in the Web controls used to collect the new product s information.</span></span>

<span data-ttu-id="6e7e8-179">Per creare l'interfaccia di modifica, scegliere il collegamento di modifica modelli dello smart tag s GridView.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-179">To create the editing interface, choose the Edit Templates link from the GridView s smart tag.</span></span> <span data-ttu-id="6e7e8-180">Quindi, l'elenco a discesa, selezionare il campo appropriato s `FooterTemplate` e trascinare il controllo appropriato dalla casella degli strumenti nella finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-180">Then, from the drop-down list, select the appropriate field s `FooterTemplate` and drag the appropriate control from the Toolbox onto the Designer.</span></span>

<span data-ttu-id="6e7e8-181">[![Aggiungere l'interfaccia di inserimento appropriata a ogni FooterTemplate s campo](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-181">[![Add the Appropriate Inserting Interface to Each Field s FooterTemplate](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image15.png)</span></span>

<span data-ttu-id="6e7e8-182">**Figura 9**: Aggiungere l'interfaccia di inserimento appropriata a ogni campo s `FooterTemplate` ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-182">**Figure 9**: Add the Appropriate Inserting Interface to Each Field s `FooterTemplate` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image16.png))</span></span>

<span data-ttu-id="6e7e8-183">Nell'elenco puntato seguente enumera i campi di GridView, che specifica l'inserimento dell'interfaccia da aggiungere:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-183">The following bulleted list enumerates the GridView fields, specifying the inserting interface to add:</span></span>

- <span data-ttu-id="6e7e8-184">`ProductID` Nessuno.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-184">`ProductID` none.</span></span>
- <span data-ttu-id="6e7e8-185">`ProductName` aggiungere una casella di testo e impostare relativi `ID` a `NewProductName`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-185">`ProductName` add a TextBox and set its `ID` to `NewProductName`.</span></span> <span data-ttu-id="6e7e8-186">Aggiungere un controllo RequiredFieldValidator anche per assicurarsi che l'utente immette un valore per il nuovo nome del prodotto s.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-186">Add a RequiredFieldValidator control as well to ensure that the user enters a value for the new product s name.</span></span>
- <span data-ttu-id="6e7e8-187">`SupplierID` Nessuno.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-187">`SupplierID` none.</span></span>
- <span data-ttu-id="6e7e8-188">`CategoryID` Nessuno.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-188">`CategoryID` none.</span></span>
- <span data-ttu-id="6e7e8-189">`QuantityPerUnit` aggiungere una casella di testo, l'impostazione relativa `ID` a `NewQuantityPerUnit`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-189">`QuantityPerUnit` add a TextBox, setting its `ID` to `NewQuantityPerUnit`.</span></span>
- <span data-ttu-id="6e7e8-190">`UnitPrice` aggiungere una casella di testo denominato `NewUnitPrice` e un controllo CompareValidator che garantisce il valore immesso è maggiore o uguale a zero un valore di valuta.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-190">`UnitPrice` add a TextBox named `NewUnitPrice` and a CompareValidator that ensures the value entered is a currency value greater than or equal to zero.</span></span>
- <span data-ttu-id="6e7e8-191">`UnitsInStock` usare una casella di testo il cui `ID` è impostata su `NewUnitsInStock`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-191">`UnitsInStock` use a TextBox whose `ID` is set to `NewUnitsInStock`.</span></span> <span data-ttu-id="6e7e8-192">Includere un controllo CompareValidator che assicura che il valore immesso è un valore intero maggiore o uguale a zero.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-192">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="6e7e8-193">`UnitsOnOrder` usare una casella di testo il cui `ID` è impostata su `NewUnitsOnOrder`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-193">`UnitsOnOrder` use a TextBox whose `ID` is set to `NewUnitsOnOrder`.</span></span> <span data-ttu-id="6e7e8-194">Includere un controllo CompareValidator che assicura che il valore immesso è un valore intero maggiore o uguale a zero.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-194">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="6e7e8-195">`ReorderLevel` usare una casella di testo il cui `ID` è impostata su `NewReorderLevel`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-195">`ReorderLevel` use a TextBox whose `ID` is set to `NewReorderLevel`.</span></span> <span data-ttu-id="6e7e8-196">Includere un controllo CompareValidator che assicura che il valore immesso è un valore intero maggiore o uguale a zero.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-196">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="6e7e8-197">`Discontinued` aggiungere una casella di controllo, l'impostazione relativa `ID` a `NewDiscontinued`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-197">`Discontinued` add a CheckBox, setting its `ID` to `NewDiscontinued`.</span></span>
- <span data-ttu-id="6e7e8-198">`CategoryName` aggiungere un controllo DropDownList e impostare relativi `ID` a `NewCategoryID`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-198">`CategoryName` add a DropDownList and set its `ID` to `NewCategoryID`.</span></span> <span data-ttu-id="6e7e8-199">Associarlo a un nuovo oggetto ObjectDataSource denominato `CategoriesDataSource` e configurarlo per usare il `CategoriesBLL` classe s `GetCategories()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-199">Bind it to a new ObjectDataSource named `CategoriesDataSource` and configure it to use the `CategoriesBLL` class s `GetCategories()` method.</span></span> <span data-ttu-id="6e7e8-200">Hanno la s DropDownList `ListItem` display s il `CategoryName` dati campo, utilizzando il `CategoryID` campo dati come i relativi valori.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-200">Have the DropDownList s `ListItem` s display the `CategoryName` data field, using the `CategoryID` data field as their values.</span></span>
- <span data-ttu-id="6e7e8-201">`SupplierName` aggiungere un controllo DropDownList e impostare relativi `ID` a `NewSupplierID`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-201">`SupplierName` add a DropDownList and set its `ID` to `NewSupplierID`.</span></span> <span data-ttu-id="6e7e8-202">Associarlo a un nuovo oggetto ObjectDataSource denominato `SuppliersDataSource` e configurarlo per usare il `SuppliersBLL` classe s `GetSuppliers()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-202">Bind it to a new ObjectDataSource named `SuppliersDataSource` and configure it to use the `SuppliersBLL` class s `GetSuppliers()` method.</span></span> <span data-ttu-id="6e7e8-203">Hanno la s DropDownList `ListItem` display s il `CompanyName` dati campo, utilizzando il `SupplierID` campo dati come i relativi valori.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-203">Have the DropDownList s `ListItem` s display the `CompanyName` data field, using the `SupplierID` data field as their values.</span></span>

<span data-ttu-id="6e7e8-204">Per ognuno dei controlli di convalida, cancelliamo i `ForeColor` proprietà, in modo che il `FooterStyle` colore di sfondo bianco di classe s CSS verrà usato al posto del valore predefinito di colore rosso.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-204">For each of the validation controls, clear out the `ForeColor` property so that the `FooterStyle` CSS class s white foreground color will be used in place of the default red.</span></span> <span data-ttu-id="6e7e8-205">Usare anche il `ErrorMessage` ma impostare la proprietà per una descrizione dettagliata, il `Text` proprietà su un asterisco.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-205">Also use the `ErrorMessage` property for a detailed description, but set the `Text` property to an asterisk.</span></span> <span data-ttu-id="6e7e8-206">Per evitare che il testo del controllo s convalida che causa l'inserimento dell'interfaccia a capo su due righe, impostare il `FooterStyle` s `Wrap` la proprietà su false per ognuna del `FooterTemplate` che usa un controllo di convalida.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-206">To prevent the validation control s text from causing the inserting interface to wrap to two lines, set the `FooterStyle` s `Wrap` property to false for each of the `FooterTemplate` s that use a validation control.</span></span> <span data-ttu-id="6e7e8-207">Infine, aggiungere un controllo di controllo ValidationSummary sotto il controllo GridView e il set relativo `ShowMessageBox` proprietà `true` e il relativo `ShowSummary` proprietà `false`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-207">Finally, add a ValidationSummary control beneath the GridView and set its `ShowMessageBox` property to `true` and its `ShowSummary` property to `false`.</span></span>

<span data-ttu-id="6e7e8-208">Quando si aggiunge un nuovo prodotto, è necessario fornire il `CategoryID` e `SupplierID`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-208">When adding a new product, we need to provide the `CategoryID` and `SupplierID`.</span></span> <span data-ttu-id="6e7e8-209">Queste informazioni vengono acquisite tramite i controlli DropDownList nelle celle di un piè di pagina per il `CategoryName` e `SupplierName` campi.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-209">This information is captured through the DropDownLists in the footer cells for the `CategoryName` and `SupplierName` fields.</span></span> <span data-ttu-id="6e7e8-210">Ho scelto di usare questi campi anziché le `CategoryID` e `SupplierID` TemplateFields poiché nella griglia s l'utente righe di dati è probabilmente più interessati a visualizzare i nomi di categoria e il fornitore, anziché i relativi valori ID.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-210">I chose to use these fields as opposed to the `CategoryID` and `SupplierID` TemplateFields because in the grid s data rows the user is likely more interested in seeing the category and supplier names rather than their ID values.</span></span> <span data-ttu-id="6e7e8-211">Poiché il `CategoryID` e `SupplierID` ora i valori vengono acquisiti nel `CategoryName` e `SupplierName` interfacce inserimento s di campo, è possibile rimuovere il `CategoryID` e `SupplierID` TemplateFields da GridView.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-211">Since the `CategoryID` and `SupplierID` values are now being captured in the `CategoryName` and `SupplierName` field s inserting interfaces, we can remove the `CategoryID` and `SupplierID` TemplateFields from the GridView.</span></span>

<span data-ttu-id="6e7e8-212">Analogamente, il `ProductID` non viene usato quando si aggiunge un nuovo prodotto, pertanto la `ProductID` TemplateField può anche essere rimossi.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-212">Similarly, the `ProductID` is not used when adding a new product, so the `ProductID` TemplateField can be removed as well.</span></span> <span data-ttu-id="6e7e8-213">Tuttavia, consentire s lasciare il `ProductID` campo nella griglia.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-213">However, let s leave the `ProductID` field in the grid.</span></span> <span data-ttu-id="6e7e8-214">Oltre alle caselle di testo, controlli DropDownList, caselle di controllo e i controlli di convalida che costituiscono l'interfaccia di inserimento, sono necessari anche un'operazione di aggiunta pulsante che, quando si fa clic, esegue la logica per aggiungere il nuovo prodotto al database.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-214">In addition to the TextBoxes, DropDownLists, CheckBoxes, and validation controls that make up the inserting interface, we'll also need an Add button that, when clicked, performs the logic to add the new product to the database.</span></span> <span data-ttu-id="6e7e8-215">Nel passaggio 4 verrà incluso un pulsante di aggiunta nell'interfaccia di inserimento nel `ProductID` TemplateField s `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-215">In Step 4 we'll include an Add button in the inserting interface in the `ProductID` TemplateField s `FooterTemplate`.</span></span>

<span data-ttu-id="6e7e8-216">È possibile migliorare l'aspetto dei diversi campi GridView.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-216">Feel free to improve the appearance of the various GridView fields.</span></span> <span data-ttu-id="6e7e8-217">Potrebbe ad esempio, si desidera formattare il `UnitPrice` Allinea a destra i valori come una valuta, il `UnitsInStock`, `UnitsOnOrder`, e `ReorderLevel` campi e aggiornamento di `HeaderText` i valori per il TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-217">For example, you might want to format the `UnitPrice` values as a currency, right-align the `UnitsInStock`, `UnitsOnOrder`, and `ReorderLevel` fields, and update the `HeaderText` values for the TemplateFields.</span></span>

<span data-ttu-id="6e7e8-218">Dopo aver creato la grande quantità di inserire le interfacce nel `FooterTemplate` s, rimuovendo il `SupplierID`, e `CategoryID` TemplateFields e migliorare l'estetica della griglia tramite formattazione e allineamento di TemplateFields, la s GridView dichiarativa markup dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-218">After creating the slew of inserting interfaces in the `FooterTemplate` s, removing the `SupplierID`, and `CategoryID` TemplateFields, and improving the aesthetics of the grid through formatting and aligning the TemplateFields, your GridView s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample5.aspx)]

<span data-ttu-id="6e7e8-219">Quando viene visualizzato tramite un browser, la riga di piè di pagina di GridView s include ora completato inserimento dell'interfaccia (vedere la figura 10).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-219">When viewed through a browser, the GridView s footer row now includes the completed inserting interface (see Figure 10).</span></span> <span data-ttu-id="6e7e8-220">A questo punto, l'inserimento t di interfaccia include un mezzo per l'utente indicare che s Mary immessi i dati per il nuovo prodotto e si vuole inserire un nuovo record nel database.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-220">At this point, the inserting interface doesn t include a means for the user to indicate that she s entered the data for the new product and wants to insert a new record into the database.</span></span> <span data-ttu-id="6e7e8-221">Inoltre, abbiamo ve ancora a risolvere come i dati immessi nel piè di pagina verranno convertito in un nuovo record nel `Products` database.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-221">Also, we ve yet to address how the data entered into the footer will translate into a new record in the `Products` database.</span></span> <span data-ttu-id="6e7e8-222">Nel passaggio 4, esamineremo come includere un pulsante di aggiunta all'interfaccia di inserimento e su come eseguire il codice nel postback quando viene s selezionato.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-222">In Step 4 we'll look at how to include an Add button to the inserting interface and how to execute code on postback when it s clicked.</span></span> <span data-ttu-id="6e7e8-223">Passaggio 5 viene illustrato come inserire un nuovo record con i dati nel piè di pagina.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-223">Step 5 shows how to insert a new record using the data from the footer.</span></span>

<span data-ttu-id="6e7e8-224">[![Il piè di pagina di GridView fornisce un'interfaccia per l'aggiunta di un nuovo Record](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-224">[![The GridView Footer Provides an Interface for Adding a New Record](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image17.png)</span></span>

<span data-ttu-id="6e7e8-225">**Figura 10**: Il piè di pagina di GridView fornisce un'interfaccia per l'aggiunta di un nuovo Record ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-225">**Figure 10**: The GridView Footer Provides an Interface for Adding a New Record ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image18.png))</span></span>

## <a name="step-4-including-an-add-button-in-the-inserting-interface"></a><span data-ttu-id="6e7e8-226">Passaggio 4: Incluso un pulsante di aggiunta nell'interfaccia di inserimento</span><span class="sxs-lookup"><span data-stu-id="6e7e8-226">Step 4: Including an Add Button in the Inserting Interface</span></span>

<span data-ttu-id="6e7e8-227">È necessario includere in una posizione un pulsante Aggiungi nell'interfaccia di inserimento, poiché i dispositivi di riga del piè di pagina inserimento dell'interfaccia attualmente non dispone i mezzi per l'utente indicare che sono state completate immettendo le informazioni sui nuovi prodotti s.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-227">We need to include an Add button somewhere in the inserting interface since the footer row s inserting interface currently lacks the means for the user to indicate that they have completed entering the new product s information.</span></span> <span data-ttu-id="6e7e8-228">Ciò può essere inserito in uno dei esistente `FooterTemplate` s o è stato possibile aggiungere una nuova colonna nella griglia per questo scopo.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-228">This could be placed in one of the existing `FooterTemplate` s or we could add a new column to the grid for this purpose.</span></span> <span data-ttu-id="6e7e8-229">Per questa esercitazione, ti permettono di s posizionare il pulsante Aggiungi nella `ProductID` TemplateField s `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-229">For this tutorial, let s place the Add button in the `ProductID` TemplateField s `FooterTemplate`.</span></span>

<span data-ttu-id="6e7e8-230">La finestra di progettazione, fare clic sul collegamento Modifica modelli nello smart tag GridView s e quindi scegliere il `ProductID` il campo s `FooterTemplate` nell'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-230">From the Designer, click on the Edit Templates link in the GridView s smart tag and then choose the `ProductID` field s `FooterTemplate` from the drop-down list.</span></span> <span data-ttu-id="6e7e8-231">Aggiungere un controllo pulsante Web (o un LinkButton o ImageButton, se si preferisce) per il modello, impostandone l'ID su `AddProduct`, la relativa `CommandName` a Insert e il relativo `Text` proprietà da aggiungere come illustrato nella figura 11.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-231">Add a Button Web control (or a LinkButton or ImageButton, if you prefer) to the template, setting its ID to `AddProduct`, its `CommandName` to Insert, and its `Text` property to Add as shown in Figure 11.</span></span>

<span data-ttu-id="6e7e8-232">[![Posizionare il pulsante Aggiungi in FooterTemplate s ProductID TemplateField](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-232">[![Place the Add Button in the ProductID TemplateField s FooterTemplate](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image19.png)</span></span>

<span data-ttu-id="6e7e8-233">**Figura 11**: Posizionare il pulsante Aggiungi nella `ProductID` s TemplateField `FooterTemplate` ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-233">**Figure 11**: Place the Add Button in the `ProductID` TemplateField s `FooterTemplate` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image20.png))</span></span>

<span data-ttu-id="6e7e8-234">Dopo che è già incluso il pulsante Aggiungi, testare la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-234">Once you ve included the Add button, test out the page in a browser.</span></span> <span data-ttu-id="6e7e8-235">Si noti che, quando si fa clic sul pulsante Aggiungi con dati non validi nell'interfaccia di inserimento, viene circuited breve il postback e di controllo ValidationSummary indica i dati non validi (vedere la figura 12).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-235">Note that when clicking the Add button with invalid data in the inserting interface, the postback is short circuited and the ValidationSummary control indicates the invalid data (see Figure 12).</span></span> <span data-ttu-id="6e7e8-236">Con i dati corretti immessi, fare clic sul pulsante Aggiungi causa un postback.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-236">With appropriate data entered, clicking the Add button causes a postback.</span></span> <span data-ttu-id="6e7e8-237">Nessun record viene aggiunto al database, tuttavia.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-237">No record is added to the database, however.</span></span> <span data-ttu-id="6e7e8-238">È necessario scrivere un po' di codice per eseguire effettivamente l'istruzione insert.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-238">We will need to write a bit of code to actually perform the insert.</span></span>

<span data-ttu-id="6e7e8-239">[![Il pulsante Aggiungi s Postback è Circuited breve se sono presenti dati non valido nell'interfaccia di inserimento](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-239">[![The Add Button s Postback is Short Circuited if There is Invalid Data in the Inserting Interface](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image21.png)</span></span>

<span data-ttu-id="6e7e8-240">**Figura 12**: Il pulsante Aggiungi Postback è Circuited breve se sono presenti dati non valido nell'interfaccia di inserimento ([fare clic per visualizzare l'immagine con dimensioni normali](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="6e7e8-240">**Figure 12**: The Add Button s Postback is Short Circuited if There is Invalid Data in the Inserting Interface ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image22.png))</span></span>

> [!NOTE]
> <span data-ttu-id="6e7e8-241">I controlli di convalida nell'interfaccia di inserimento non sono stati assegnati a un gruppo di convalida.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-241">The validation controls in the inserting interface were not assigned to a validation group.</span></span> <span data-ttu-id="6e7e8-242">Ciò funziona correttamente, purché l'interfaccia di inserimento è il solo set di controlli di convalida della pagina.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-242">This works fine so long as the inserting interface is the only set of validation controls on the page.</span></span> <span data-ttu-id="6e7e8-243">Se, tuttavia, esistono altri controlli di convalida della pagina (ad esempio i controlli di convalida nell'interfaccia di modifica della griglia s), i controlli di convalida nell'inserimento dell'interfaccia e aggiungere pulsante s `ValidationGroup` proprietà devono essere assegnate lo stesso valore in modo da associare questi controlli a un gruppo di convalida specifico.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-243">If, however, there are other validation controls on the page (such as validation controls in the grid s editing interface), the validation controls in the inserting interface and Add button s `ValidationGroup` properties should be assigned the same value so as to associate these controls with a particular validation group.</span></span> <span data-ttu-id="6e7e8-244">Visualizzare [Sezionando i controlli di convalida in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx) per altre informazioni sul partizionamento i controlli di convalida e i pulsanti in una pagina in gruppi di convalida.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-244">See [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx) for more information on partitioning the validation controls and buttons on a page into validation groups.</span></span>

## <a name="step-5-inserting-a-new-record-into-theproductstable"></a><span data-ttu-id="6e7e8-245">Passaggio 5: Inserimento di un nuovo Record nel`Products`tabella</span><span class="sxs-lookup"><span data-stu-id="6e7e8-245">Step 5: Inserting a New Record Into the`Products`Table</span></span>

<span data-ttu-id="6e7e8-246">Quando si usano le funzionalità di modifica predefinite di GridView, il controllo GridView gestisce automaticamente tutte le operazioni necessarie per eseguire l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-246">When utilizing the built-in editing features of the GridView, the GridView automatically handles all of the work necessary for performing the update.</span></span> <span data-ttu-id="6e7e8-247">In particolare, quando si fa clic sul pulsante Aggiorna copia i valori immessi dall'interfaccia di modifica per i parametri in s ObjectDataSource `UpdateParameters` raccolta e viene attivata disattivato l'aggiornamento richiamando la s ObjectDataSource `Update()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-247">In particular, when the Update button is clicked it copies the values entered from the editing interface to the parameters in the ObjectDataSource s `UpdateParameters` collection and kicks off the update by invoking the ObjectDataSource s `Update()` method.</span></span> <span data-ttu-id="6e7e8-248">Poiché il controllo GridView non fornisce queste funzionalità incorporata per l'inserimento, è necessario implementare il codice che chiama gli oggetti ObjectDataSource `Insert()` (metodo) e vengono copiati i valori dall'inserimento dell'interfaccia per gli oggetti ObjectDataSource `InsertParameters` raccolta .</span><span class="sxs-lookup"><span data-stu-id="6e7e8-248">Since the GridView does not provide such built-in functionality for inserting, we must implement code that calls the ObjectDataSource s `Insert()` method and copies the values from the inserting interface to the ObjectDataSource s `InsertParameters` collection.</span></span>

<span data-ttu-id="6e7e8-249">Questa logica di inserimento deve essere eseguita dopo che è stato fatto clic sul pulsante Aggiungi.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-249">This insert logic should be executed after the Add button has been clicked.</span></span> <span data-ttu-id="6e7e8-250">Come descritto nel [aggiunta e risposta ai pulsanti in un controllo GridView](../custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs.md) esercitazione, ogni volta che viene scelto un pulsante, LinkButton o ImageButton in un controllo GridView, s GridView `RowCommand` viene generato l'evento durante il postback.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-250">As discussed in the [Adding and Responding to Buttons in a GridView](../custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs.md) tutorial, anytime a Button, LinkButton, or ImageButton in a GridView is clicked, the GridView s `RowCommand` event fires on postback.</span></span> <span data-ttu-id="6e7e8-251">Questo evento viene generato se il pulsante, LinkButton o ImageButton è stato aggiunto in modo esplicito, ad esempio il pulsante Aggiungi nella riga del piè di pagina o se è stato automaticamente aggiunto per il controllo GridView (ad esempio il LinkButton nella parte superiore di ogni colonna quando si abilita l'ordinamento è selezionata, o Controlli LinkButton nell'interfaccia di paging, quando si seleziona Abilita Paging).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-251">This event fires whether the Button, LinkButton, or ImageButton was added explicitly such as the Add button in the footer row or if it was automatically added by the GridView (such as the LinkButtons at the top of each column when Enable Sorting is selected, or the LinkButtons in the paging interface when Enable Paging is selected).</span></span>

<span data-ttu-id="6e7e8-252">Pertanto, per rispondere al clic sul pulsante Aggiungi dell'utente, è necessario creare un gestore eventi per s GridView `RowCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-252">Therefore, to respond to the user clicking the Add button, we need to create an event handler for the GridView s `RowCommand` event.</span></span> <span data-ttu-id="6e7e8-253">Poiché questo evento viene generato ogni volta che *eventuali* si fa clic sul pulsante, LinkButton e ImageButton in GridView, s fondamentali che abbiamo solo procedere con la logica di inserimento se la `CommandName` proprietà passato nel gestore mappe eventi per il `CommandName` valore del pulsante Aggiungi (Insert).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-253">Since this event fires whenever *any* Button, LinkButton, or ImageButton in the GridView is clicked, it s vital that we only proceed with the inserting logic if the `CommandName` property passed into the event handler maps to the `CommandName` value of the Add button ( Insert ).</span></span> <span data-ttu-id="6e7e8-254">Inoltre, abbiamo dovremmo procedere anche solo se i controlli di convalida segnalano dati validi.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-254">Moreover, we should also only proceed if the validation controls report valid data.</span></span> <span data-ttu-id="6e7e8-255">Per risolvere questo problema, creare un gestore eventi per il `RowCommand` evento con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-255">To accommodate this, create an event handler for the `RowCommand` event with the following code:</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample6.cs)]

> [!NOTE]
> <span data-ttu-id="6e7e8-256">Si potrebbe chiedere perché il gestore eventi anche controllo di `Page.IsValid` proprietà.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-256">You may be wondering why the event handler bothers checking the `Page.IsValid` property.</span></span> <span data-ttu-id="6e7e8-257">Dopo tutto, non sarà il postback eliminato se i dati non validi viene forniti nell'interfaccia di inserimento?</span><span class="sxs-lookup"><span data-stu-id="6e7e8-257">After all, won't the postback be suppressed if invalid data is provided in the inserting interface?</span></span> <span data-ttu-id="6e7e8-258">Questa ipotesi è corretta, purché l'utente non ha disabilitato JavaScript o ha eseguito i passaggi per aggirare la logica di convalida lato client.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-258">This assumption is correct as long as the user has not disabled JavaScript or has taken steps to circumvent the client-side validation logic.</span></span> <span data-ttu-id="6e7e8-259">In breve, uno non fare mai affidamento esclusivamente su convalida lato client; un controllo lato server per la validità deve essere sempre eseguito prima di usare i dati.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-259">In short, one should never rely strictly on client-side validation; a server-side check for validity should always be performed before working with the data.</span></span>

<span data-ttu-id="6e7e8-260">Nel passaggio 1 è stato creato il `ProductsDataSource` ObjectDataSource in modo che relativo `Insert()` metodo viene eseguito il mapping per il `ProductsBLL` classe s `AddProduct` (metodo).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-260">In Step 1 we created the `ProductsDataSource` ObjectDataSource such that its `Insert()` method is mapped to the `ProductsBLL` class s `AddProduct` method.</span></span> <span data-ttu-id="6e7e8-261">Per inserire il nuovo record nel `Products` tabella, possiamo semplicemente richiamare gli oggetti ObjectDataSource `Insert()` metodo:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-261">To insert the new record into the `Products` table, we can simply invoke the ObjectDataSource s `Insert()` method:</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample7.cs)]

<span data-ttu-id="6e7e8-262">Ora che il `Insert()` metodo è stato richiamato, tutto ciò che resta consiste nel copiare i valori dall'interfaccia di inserimento per i parametri passati al `ProductsBLL` classe s `AddProduct` (metodo).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-262">Now that the `Insert()` method has been invoked, all that remains is to copy the values from the inserting interface to the parameters passed to the `ProductsBLL` class s `AddProduct` method.</span></span> <span data-ttu-id="6e7e8-263">Come abbiamo visto nella [esaminando gli eventi associati con inserimento, aggiornamento ed eliminazione in corso](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial, ciò può essere eseguita tramite gli oggetti ObjectDataSource `Inserting` evento.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-263">As we saw back in the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial, this can be accomplished through the ObjectDataSource s `Inserting` event.</span></span> <span data-ttu-id="6e7e8-264">Nel `Inserting` dobbiamo fare riferimento a livello di codice i controlli dall'evento il `Products` piè di pagina di GridView s delle righe e assegnare i relativi valori per il `e.InputParameters` raccolta.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-264">In the `Inserting` event we need to programmatically reference the controls from the `Products` GridView s footer row and assign their values to the `e.InputParameters` collection.</span></span> <span data-ttu-id="6e7e8-265">Se l'utente la omette un valore, ad esempio lasciando il `ReorderLevel` vuoto nella casella di testo è necessario specificare che il valore inserito nel database deve essere `NULL`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-265">If the user omits a value such as leaving the `ReorderLevel` TextBox blank we need to specify that the value inserted into the database should be `NULL`.</span></span> <span data-ttu-id="6e7e8-266">Poiché il `AddProducts` metodo accetta i tipi nullable per i campi del database che ammette valori null, è sufficiente usare un tipo nullable e impostarne il valore su `null` nel caso in cui l'input dell'utente viene omessa.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-266">Since the `AddProducts` method accepts nullable types for the nullable database fields, simply use a nullable type and set its value to `null` in the case where user input is omitted.</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample8.cs)]

<span data-ttu-id="6e7e8-267">Con il `Inserting` gestore di eventi completato, nuovi record può essere aggiunto al `Products` tabella del database tramite la riga di piè di pagina di GridView s.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-267">With the `Inserting` event handler completed, new records can be added to the `Products` database table via the GridView s footer row.</span></span> <span data-ttu-id="6e7e8-268">Proseguo e provare ad aggiungere alcuni nuovi prodotti.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-268">Go ahead and try adding several new products.</span></span>

## <a name="enhancing-and-customizing-the-add-operation"></a><span data-ttu-id="6e7e8-269">Migliorare e personalizzare l'operazione di aggiunta</span><span class="sxs-lookup"><span data-stu-id="6e7e8-269">Enhancing and Customizing the Add Operation</span></span>

<span data-ttu-id="6e7e8-270">Attualmente, facendo clic sul pulsante Aggiungi aggiunge un nuovo record alla tabella di database ma non fornisce alcun tipo di feedback visivo che il record è stato aggiunto.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-270">Currently, clicking the Add button adds a new record to the database table but does not provide any sort of visual feedback that the record has successfully been added.</span></span> <span data-ttu-id="6e7e8-271">In teoria, un'etichetta Web lato client o controllo finestra di avviso potrebbe informare l'utente che loro inserimento è stata completata con esito positivo.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-271">Ideally, a Label Web control or client-side alert box would inform the user that their insert has completed with success.</span></span> <span data-ttu-id="6e7e8-272">Lasciare come esercizio per il lettore.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-272">I leave this as an exercise for the reader.</span></span>

<span data-ttu-id="6e7e8-273">GridView usato in questa esercitazione non si applica alcun ordinamento per i prodotti elencati, né consente all'utente di ordinare i dati.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-273">The GridView used in this tutorial does not apply any sort order to the listed products, nor does it allow the end user to sort the data.</span></span> <span data-ttu-id="6e7e8-274">Di conseguenza, i record vengono ordinati come sono nel database tramite il campo di chiave primaria.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-274">Consequently, the records are ordered as they are in the database by their primary key field.</span></span> <span data-ttu-id="6e7e8-275">Poiché ogni nuovo record ha un `ProductID` valore maggiore di quella più recente, ogni volta che viene aggiunto un nuovo prodotto viene aggiunto alla fine della griglia.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-275">Since each new record has a `ProductID` value greater than the last one, every time a new product is added it is tacked on to the end of the grid.</span></span> <span data-ttu-id="6e7e8-276">Pertanto, è possibile inviare automaticamente l'utente all'ultima pagina di GridView dopo aver aggiunto un nuovo record.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-276">Therefore, you may want to automatically send the user to the last page of the GridView after adding a new record.</span></span> <span data-ttu-id="6e7e8-277">Questa operazione può essere eseguita aggiungendo la riga di codice seguente dopo la chiamata a `ProductsDataSource.Insert()` nella `RowCommand` gestore dell'evento per indicare che l'utente deve essere inviato all'ultima pagina dopo l'associazione dati a GridView:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-277">This can be accomplished by adding the following line of code after the call to `ProductsDataSource.Insert()` in the `RowCommand` event handler to indicate that the user needs to be sent to the last page after binding the data to the GridView:</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample9.cs)]

<span data-ttu-id="6e7e8-278">`SendUserToLastPage` variabile booleana a livello di pagina che viene inizialmente assegnata un valore di `false`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-278">`SendUserToLastPage` is a page-level Boolean variable that is initially assigned a value of `false`.</span></span> <span data-ttu-id="6e7e8-279">In s GridView `DataBound` gestore dell'evento, se `SendUserToLastPage` è false, il `PageIndex` proprietà viene aggiornata per l'invio l'utente all'ultima pagina.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-279">In the GridView s `DataBound` event handler, if `SendUserToLastPage` is false, the `PageIndex` property is updated to send the user to the last page.</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample10.cs)]

<span data-ttu-id="6e7e8-280">Il motivo il `PageIndex` viene impostata `DataBound` gestore dell'evento (in contrapposizione al `RowCommand` gestore dell'evento), infatti, quando il `RowCommand` gestore dell'evento viene generato è fornire un supporto iniziale per aggiungere il nuovo record per il `Products` tabella di database.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-280">The reason the `PageIndex` property is set in the `DataBound` event handler (as opposed to the `RowCommand` event handler) is because when the `RowCommand` event handler fires we ve yet to add the new record to the `Products` database table.</span></span> <span data-ttu-id="6e7e8-281">Pertanto, nelle `RowCommand` gestore dell'evento dell'ultimo indice di pagina (`PageCount - 1`) rappresenta l'ultimo indice della pagina *prima* è stato aggiunto il nuovo prodotto.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-281">Therefore, in the `RowCommand` event handler the last page index (`PageCount - 1`) represents the last page index *before* the new product has been added.</span></span> <span data-ttu-id="6e7e8-282">Per la maggior parte dei prodotti da aggiungere, l'ultimo indice di pagina è lo stesso dopo aver aggiunto il nuovo prodotto.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-282">For the majority of products being added, the last page index is the same after adding the new product.</span></span> <span data-ttu-id="6e7e8-283">Mentre quando il risultato prodotto aggiunto in un nuovo indice ultima pagina, se si aggiorna in modo non corretto di `PageIndex` nella `RowCommand` gestore dell'evento, quindi viene visualizzate la seconda all'ultima pagina (l'ultimo indice di pagina prima di aggiungere il nuovo prodotto) anziché la nuova pagina ultimo i indice.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-283">But when the added product results in a new last page index, if we incorrectly update the `PageIndex` in the `RowCommand` event handler then we'll be taken to the second to last page (the last page index prior to adding the new product) as opposed to the new last page index.</span></span> <span data-ttu-id="6e7e8-284">Poiché il `DataBound` gestore dell'evento viene generato dopo che è stato aggiunto il nuovo prodotto e i dati riassociati alla griglia, impostando il `PageIndex` presenti proprietà sappiamo si ri ottenere l'ultimo indice di pagina corretti.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-284">Since the `DataBound` event handler fires after the new product has been added and the data rebound to the grid, by setting the `PageIndex` property there we know we re getting the correct last page index.</span></span>

<span data-ttu-id="6e7e8-285">Infine, il controllo GridView usato in questa esercitazione è piuttosto ampio a causa del numero di campi che devono essere raccolti per l'aggiunta di un nuovo prodotto.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-285">Finally, the GridView used in this tutorial is quite wide due to the number of fields that must be collected for adding a new product.</span></span> <span data-ttu-id="6e7e8-286">A causa di questa larghezza può essere preferibile un layout verticale s DetailsView.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-286">Due to this width, a DetailsView s vertical layout might be preferred.</span></span> <span data-ttu-id="6e7e8-287">Le s GridView larghezza complessiva potrebbe essere ridotto mediante la raccolta di input un numero inferiore.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-287">The GridView s overall width could be reduced by collecting fewer inputs.</span></span> <span data-ttu-id="6e7e8-288">Forse temiamo t necessità di raccogliere le `UnitsOnOrder`, `UnitsInStock`, e `ReorderLevel` campi quando si aggiunge un nuovo prodotto, nel qual caso è stato possibile rimuovere questi campi da GridView.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-288">Perhaps we don t need to collect the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields when adding a new product, in which case these fields could be removed from the GridView.</span></span>

<span data-ttu-id="6e7e8-289">Per modificare i dati raccolti, è possibile usare uno dei due approcci:</span><span class="sxs-lookup"><span data-stu-id="6e7e8-289">To adjust the data collected, we can use one of two approaches:</span></span>

- <span data-ttu-id="6e7e8-290">Continuare a usare il `AddProduct` metodo che prevede valori per il `UnitsOnOrder`, `UnitsInStock`, e `ReorderLevel` campi.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-290">Continue to use the `AddProduct` method that expects values for the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields.</span></span> <span data-ttu-id="6e7e8-291">Nel `Inserting` gestore eventi, specificare a livello di codice, da usare per i dati di input che sono state rimosse dall'interfaccia di inserimento valori predefiniti.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-291">In the `Inserting` event handler, provide hard-coded, default values to use for these inputs that have been removed from the inserting interface.</span></span>
- <span data-ttu-id="6e7e8-292">Creare un nuovo overload del `AddProduct` metodo nella `ProductsBLL` classe che non accetta input per il `UnitsOnOrder`, `UnitsInStock`, e `ReorderLevel` campi.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-292">Create a new overload of the `AddProduct` method in the `ProductsBLL` class that does not accept inputs for the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields.</span></span> <span data-ttu-id="6e7e8-293">Quindi, nella pagina ASP.NET, configurare ObjectDataSource per utilizzare questo overload di nuovo.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-293">Then, in the ASP.NET page, configure the ObjectDataSource to use this new overload.</span></span>

<span data-ttu-id="6e7e8-294">Entrambi i casi è possibile usare in modo uniforme.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-294">Either option will work equally as well.</span></span> <span data-ttu-id="6e7e8-295">In oltre esercitazioni è stata usata la seconda opzione, la creazione di più overload per il `ProductsBLL` classe s `UpdateProduct` (metodo).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-295">In past tutorials we used the latter option, creating multiple overloads for the `ProductsBLL` class s `UpdateProduct` method.</span></span>

## <a name="summary"></a><span data-ttu-id="6e7e8-296">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="6e7e8-296">Summary</span></span>

<span data-ttu-id="6e7e8-297">Le funzionalità integrate di inserimento trovate nel controllo DetailsView e FormView non dispone di GridView, ma con un po' di impegno può essere aggiunta un'interfaccia di inserimento alla riga di piè di pagina.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-297">The GridView lacks the built-in inserting capabilities found in the DetailsView and FormView, but with a bit of effort an inserting interface can be added to the footer row.</span></span> <span data-ttu-id="6e7e8-298">Per visualizzare la riga di piè di pagina in un controllo GridView è sufficiente impostare relativi `ShowFooter` proprietà `true`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-298">To display the footer row in a GridView simply set its `ShowFooter` property to `true`.</span></span> <span data-ttu-id="6e7e8-299">Il contenuto della riga del piè di pagina può essere personalizzato per ogni campo convertendo il campo in un TemplateField e aggiungendo l'inserimento dell'interfaccia per il `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-299">The footer row content can be customized for each field by converting the field to a TemplateField and adding the inserting interface to the `FooterTemplate`.</span></span> <span data-ttu-id="6e7e8-300">Come abbiamo visto in questa esercitazione il `FooterTemplate` può contenere i pulsanti, caselle di testo, controlli DropDownList, caselle di controllo, i controlli origine dati per il popolamento basato sui dati di controlli Web (ad esempio controlli DropDownList) e i controlli di convalida.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-300">As we saw in this tutorial, the `FooterTemplate` can contain Buttons, TextBoxes, DropDownLists, CheckBoxes, data source controls for populating data-driven Web controls (such as DropDownLists), and validation controls.</span></span> <span data-ttu-id="6e7e8-301">Insieme a controlli per la raccolta di input dell'utente s, è necessario un pulsante Aggiungi, LinkButton o ImageButton.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-301">Along with controls for collecting the user s input, an Add Button, LinkButton, or ImageButton is needed.</span></span>

<span data-ttu-id="6e7e8-302">Quando si fa clic sul pulsante Aggiungi, s ObjectDataSource `Insert()` metodo viene richiamato per iniziare l'inserimento del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-302">When the Add button is clicked, the ObjectDataSource s `Insert()` method is invoked to start the inserting workflow.</span></span> <span data-ttu-id="6e7e8-303">ObjectDataSource chiamerà quindi il metodo insert configurato (il `ProductsBLL` classe s `AddProduct` metodo, in questa esercitazione).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-303">The ObjectDataSource will then call the configured insert method (the `ProductsBLL` class s `AddProduct` method, in this tutorial).</span></span> <span data-ttu-id="6e7e8-304">È necessario copiare i valori da s GridView inserimento dell'interfaccia per gli oggetti ObjectDataSource `InsertParameters` raccolta prima dell'inserimento metodo richiamato.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-304">We must copy the values from the GridView s inserting interface to the ObjectDataSource s `InsertParameters` collection prior to the insert method being invoked.</span></span> <span data-ttu-id="6e7e8-305">Questa operazione può essere eseguita facendo riferimento a livello di codice i controlli Web interfaccia inserimento in s ObjectDataSource `Inserting` gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-305">This can be accomplished by programmatically referencing the inserting interface Web controls in the ObjectDataSource s `Inserting` event handler.</span></span>

<span data-ttu-id="6e7e8-306">Questa esercitazione viene completata la sguardo alle tecniche per migliorare l'aspetto GridView.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-306">This tutorial completes our look at techniques for enhancing the GridView s appearance.</span></span> <span data-ttu-id="6e7e8-307">Il set successivo di esercitazioni verrà esaminate come lavorare con dati binari quali immagini, PDF, documenti di Word e così via e i controlli Web dei dati.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-307">The next set of tutorials will examine how to work with binary data such as images, PDFs, Word documents, and so on and the data Web controls.</span></span>

<span data-ttu-id="6e7e8-308">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="6e7e8-308">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="6e7e8-309">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="6e7e8-309">About the Author</span></span>

<span data-ttu-id="6e7e8-310">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette libri e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha collaborato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-310">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="6e7e8-311">Lavora come un consulente, formatore e autore.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-311">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="6e7e8-312">Il suo ultimo libro si intitola [ *Sams Teach Yourself ASP.NET 2.0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-312">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="6e7e8-313">È possibile contattarlo al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-313">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="6e7e8-314">o sul suo blog, che è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="6e7e8-314">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="6e7e8-315">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="6e7e8-315">Special Thanks To</span></span>

<span data-ttu-id="6e7e8-316">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-316">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="6e7e8-317">Il revisore capo di questa esercitazione è stata Bernadette Leigh.</span><span class="sxs-lookup"><span data-stu-id="6e7e8-317">Lead reviewer for this tutorial was Bernadette Leigh.</span></span> <span data-ttu-id="6e7e8-318">Se si è interessati prossimi articoli MSDN dello?</span><span class="sxs-lookup"><span data-stu-id="6e7e8-318">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="6e7e8-319">In questo caso, Inviami una riga in corrispondenza [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-319">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="6e7e8-320">[Precedente](adding-a-gridview-column-of-checkboxes-cs.md)
> [Successivo](adding-a-gridview-column-of-radio-buttons-vb.md)</span><span class="sxs-lookup"><span data-stu-id="6e7e8-320">[Previous](adding-a-gridview-column-of-checkboxes-cs.md)
[Next](adding-a-gridview-column-of-radio-buttons-vb.md)</span></span>
