---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
title: Pulsanti personalizzati in DataList e Repeater (C#) | Microsoft Docs
author: rick-anderson
description: In questa esercitazione verrà compilata un'interfaccia che usa un Repeater per elencare le categorie nel sistema, con ogni categoria che fornisce un pulsante per visualizzare il relativo associ...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: 1f42e332-78dc-438b-9e35-0c97aa0ad929
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
msc.type: authoredcontent
ms.openlocfilehash: e8cb1054068327c25e057b6df1cc7506feec8d37
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78576391"
---
# <a name="custom-buttons-in-the-datalist-and-repeater-c"></a><span data-ttu-id="ec84b-103">Pulsanti personalizzati con DataList e Repeater (C#)</span><span class="sxs-lookup"><span data-stu-id="ec84b-103">Custom Buttons in the DataList and Repeater (C#)</span></span>

<span data-ttu-id="ec84b-104">di [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ec84b-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ec84b-105">[Scaricare l'app di esempio](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) o [scaricare il file PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="ec84b-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span></span>

> <span data-ttu-id="ec84b-106">In questa esercitazione verrà compilata un'interfaccia che usa un Repeater per elencare le categorie nel sistema, con ogni categoria che fornisce un pulsante per mostrare i prodotti associati usando un controllo BulletedList.</span><span class="sxs-lookup"><span data-stu-id="ec84b-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>

## <a name="introduction"></a><span data-ttu-id="ec84b-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="ec84b-107">Introduction</span></span>

<span data-ttu-id="ec84b-108">Negli ultimi diciassette esercitazioni di DataList e Repeater sono stati creati esempi di sola lettura e la modifica e l'eliminazione degli esempi.</span><span class="sxs-lookup"><span data-stu-id="ec84b-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="ec84b-109">Per semplificare la modifica e l'eliminazione delle funzionalità all'interno di un DataList, sono stati aggiunti pulsanti al `ItemTemplate` di DataList che, quando si fa clic, causavano un postback e generava un evento DataList corrispondente alla proprietà `CommandName` dei pulsanti.</span><span class="sxs-lookup"><span data-stu-id="ec84b-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="ec84b-110">Se ad esempio si aggiunge un pulsante al `ItemTemplate` con un valore `CommandName` proprietà modifica, il `EditCommand` di DataList viene attivato durante il postback; una con l'eliminazione `CommandName` genera l'`DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="ec84b-111">Oltre ai pulsanti modifica ed Elimina, i controlli DataList e Repeater possono includere anche pulsanti, LinkButton o ImageButton che, quando vengono selezionate, eseguono una logica personalizzata sul lato server.</span><span class="sxs-lookup"><span data-stu-id="ec84b-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="ec84b-112">In questa esercitazione verrà compilata un'interfaccia che usa un Repeater per elencare le categorie nel sistema.</span><span class="sxs-lookup"><span data-stu-id="ec84b-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="ec84b-113">Per ogni categoria, il ripetitore includerà un pulsante per mostrare i prodotti associati alla categoria usando un controllo BulletedList (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="ec84b-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>

<span data-ttu-id="ec84b-114">[![facendo clic sul collegamento Mostra prodotti vengono visualizzati i prodotti della categoria in un elenco puntato](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ec84b-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span></span>

<span data-ttu-id="ec84b-115">**Figura 1**: facendo clic sul collegamento Mostra prodotti vengono visualizzati i prodotti della categoria in un elenco puntato ([fare clic per visualizzare l'immagine con dimensioni complete](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="ec84b-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span></span>

## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="ec84b-116">Passaggio 1: aggiungere le pagine Web dell'esercitazione sui pulsanti personalizzati</span><span class="sxs-lookup"><span data-stu-id="ec84b-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="ec84b-117">Prima di esaminare come aggiungere un pulsante personalizzato, è necessario prima di tutto creare le pagine ASP.NET nel progetto del sito Web che saranno necessarie per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="ec84b-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="ec84b-118">Per iniziare, aggiungere una nuova cartella denominata `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="ec84b-119">Aggiungere quindi le due pagine ASP.NET seguenti a tale cartella, assicurandosi di associare ogni pagina alla pagina master `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="ec84b-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`

![Aggiungere le pagine ASP.NET per le esercitazioni correlate ai pulsanti personalizzati](custom-buttons-in-the-datalist-and-repeater-cs/_static/image4.png)

<span data-ttu-id="ec84b-121">**Figura 2**: aggiungere le pagine ASP.NET per le esercitazioni correlate ai pulsanti personalizzati</span><span class="sxs-lookup"><span data-stu-id="ec84b-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>

<span data-ttu-id="ec84b-122">Analogamente alle altre cartelle, `Default.aspx` nella cartella `CustomButtonsDataListRepeater` elenca le esercitazioni nella sezione.</span><span class="sxs-lookup"><span data-stu-id="ec84b-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="ec84b-123">Si ricordi che il controllo utente `SectionLevelTutorialListing.ascx` fornisce questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="ec84b-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="ec84b-124">Aggiungere questo controllo utente a `Default.aspx` trascinandolo dall'Esplora soluzioni nella visualizzazione di progettazione della pagina.</span><span class="sxs-lookup"><span data-stu-id="ec84b-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="ec84b-125">[![aggiungere il controllo utente SectionLevelTutorialListing. ascx a default. aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="ec84b-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span></span>

<span data-ttu-id="ec84b-126">**Figura 3**: aggiungere il controllo utente `SectionLevelTutorialListing.ascx` al `Default.aspx` ([fare clic per visualizzare l'immagine con dimensioni complete](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="ec84b-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span></span>

<span data-ttu-id="ec84b-127">Aggiungere infine le pagine come voci al file di `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="ec84b-128">In particolare, aggiungere il markup seguente dopo il paging e l'ordinamento con il `<siteMapNode>`DataList e Repeater:</span><span class="sxs-lookup"><span data-stu-id="ec84b-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>

[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample1.xml)]

<span data-ttu-id="ec84b-129">Dopo avere aggiornato `Web.sitemap`, è possibile visualizzare il sito Web delle esercitazioni tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="ec84b-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="ec84b-130">Il menu a sinistra include ora gli elementi per le esercitazioni di modifica, inserimento ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="ec84b-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![La mappa del sito include ora la voce per l'esercitazione sui pulsanti personalizzati](custom-buttons-in-the-datalist-and-repeater-cs/_static/image8.png)

<span data-ttu-id="ec84b-132">**Figura 4**: la mappa del sito include ora la voce per l'esercitazione sui pulsanti personalizzati</span><span class="sxs-lookup"><span data-stu-id="ec84b-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>

## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="ec84b-133">Passaggio 2: aggiunta dell'elenco di categorie</span><span class="sxs-lookup"><span data-stu-id="ec84b-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="ec84b-134">Per questa esercitazione è necessario creare un ripetitore in cui sono elencate tutte le categorie insieme a un LinkButton Mostra prodotti che, quando si fa clic, Visualizza i prodotti associati di categoria in un elenco puntato.</span><span class="sxs-lookup"><span data-stu-id="ec84b-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="ec84b-135">Per prima cosa, creiamo un semplice ripetitore che elenca le categorie nel sistema.</span><span class="sxs-lookup"><span data-stu-id="ec84b-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="ec84b-136">Per iniziare, aprire la pagina `CustomButtons.aspx` nella cartella `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="ec84b-137">Trascinare un Repeater dalla casella degli strumenti nella finestra di progettazione e impostare la relativa proprietà `ID` su `Categories`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="ec84b-138">Successivamente, creare un nuovo controllo origine dati dallo smart tag Repeater s.</span><span class="sxs-lookup"><span data-stu-id="ec84b-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="ec84b-139">In particolare, creare un nuovo controllo ObjectDataSource denominato `CategoriesDataSource` che seleziona i dati dal metodo `GetCategories()` della classe `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>

<span data-ttu-id="ec84b-140">[![configurare ObjectDataSource per l'uso del metodo CategoriesBLL della classe s GetCategories ()](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ec84b-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span></span>

<span data-ttu-id="ec84b-141">**Figura 5**: configurare ObjectDataSource per l'uso del metodo `CategoriesBLL` Class s `GetCategories()` ([fare clic per visualizzare l'immagine con dimensioni complete](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="ec84b-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span></span>

<span data-ttu-id="ec84b-142">A differenza del controllo DataList, per cui Visual Studio crea una `ItemTemplate` predefinita basata sull'origine dati, è necessario definire manualmente i modelli del ripetitore.</span><span class="sxs-lookup"><span data-stu-id="ec84b-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="ec84b-143">Inoltre, i modelli del ripetitore devono essere creati e modificati in modo dichiarativo, ovvero non è disponibile alcuna opzione modifica modelli nello smart tag Repeater.</span><span class="sxs-lookup"><span data-stu-id="ec84b-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="ec84b-144">Fare clic sulla scheda origine nell'angolo in basso a sinistra e aggiungere un `ItemTemplate` che Visualizza il nome della categoria in un elemento `<h3>` e la relativa descrizione in un tag di paragrafo. includere un `SeparatorTemplate` che visualizza una regola orizzontale (`<hr />`) tra le singole categorie.</span><span class="sxs-lookup"><span data-stu-id="ec84b-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="ec84b-145">Aggiungere inoltre un LinkButton con la relativa proprietà `Text` impostata per mostrare i prodotti.</span><span class="sxs-lookup"><span data-stu-id="ec84b-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="ec84b-146">Dopo aver completato questi passaggi, il markup dichiarativo della pagina deve essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="ec84b-146">After completing these steps, your page s declarative markup should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample2.aspx)]

<span data-ttu-id="ec84b-147">La figura 6 Mostra la pagina quando viene visualizzata tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="ec84b-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="ec84b-148">Viene elencato il nome e la descrizione di ogni categoria.</span><span class="sxs-lookup"><span data-stu-id="ec84b-148">Each category name and description is listed.</span></span> <span data-ttu-id="ec84b-149">Quando si fa clic sul pulsante Mostra prodotti, viene generato un postback, ma non viene ancora eseguita alcuna azione.</span><span class="sxs-lookup"><span data-stu-id="ec84b-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>

<span data-ttu-id="ec84b-150">[![viene visualizzato il nome e la descrizione di ogni categoria, insieme a un LinkButton Mostra i prodotti](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="ec84b-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span></span>

<span data-ttu-id="ec84b-151">**Figura 6**: viene visualizzato il nome e la descrizione di ogni categoria, insieme a un LinkButton Mostra i prodotti ([fare clic per visualizzare l'immagine con dimensioni complete](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="ec84b-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span></span>

## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="ec84b-152">Passaggio 3: esecuzione della logica sul lato server quando si fa clic su Visualizza prodotti LinkButton</span><span class="sxs-lookup"><span data-stu-id="ec84b-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="ec84b-153">Quando si fa clic su un pulsante, un LinkButton o un ImageButton all'interno di un modello in un oggetto DataList o Repeater, viene eseguito un postback e viene generato l'evento DataList o Repeater `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="ec84b-154">Oltre all'evento `ItemCommand`, il controllo DataList può generare anche un altro evento più specifico se la proprietà `CommandName` del pulsante è impostata su una delle stringhe riservate (Delete, Edit, Cancel, Update o Select), ma l'evento `ItemCommand` viene *sempre* attivato.</span><span class="sxs-lookup"><span data-stu-id="ec84b-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="ec84b-155">Quando si fa clic su un pulsante all'interno di un oggetto DataList o Repeater, spesso è necessario passare il pulsante che è stato selezionato (nel caso in cui siano presenti più pulsanti all'interno del controllo, ad esempio un pulsante modifica ed Elimina) ed eventualmente alcune informazioni aggiuntive (ad esempio valore della chiave primaria dell'elemento il cui pulsante è stato selezionato.</span><span class="sxs-lookup"><span data-stu-id="ec84b-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="ec84b-156">Il pulsante, LinkButton e ImageButton forniscono due proprietà i cui valori vengono passati al gestore dell'evento `ItemCommand`:</span><span class="sxs-lookup"><span data-stu-id="ec84b-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="ec84b-157">`CommandName` una stringa utilizzata in genere per identificare ogni pulsante nel modello</span><span class="sxs-lookup"><span data-stu-id="ec84b-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="ec84b-158">`CommandArgument` comunemente utilizzato per memorizzare il valore di un campo dati, ad esempio il valore della chiave primaria</span><span class="sxs-lookup"><span data-stu-id="ec84b-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="ec84b-159">Per questo esempio, impostare la proprietà LinkButton s `CommandName` su ShowProducts e associare il valore della chiave primaria del record corrente `CategoryID` alla proprietà `CommandArgument` usando la sintassi DataBinding `CategoryArgument='<%# Eval("CategoryID") %>'`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="ec84b-160">Dopo aver specificato queste due proprietà, la sintassi dichiarativa di LinkButton sarà simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="ec84b-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample3.aspx)]

<span data-ttu-id="ec84b-161">Quando si fa clic sul pulsante, viene eseguito un postback e viene generato l'evento DataList o Repeater `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="ec84b-162">Al gestore eventi vengono passati i valori `CommandName` e `CommandArgument` dei pulsanti.</span><span class="sxs-lookup"><span data-stu-id="ec84b-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="ec84b-163">Creare un gestore eventi per l'evento Repeater s `ItemCommand` e prendere nota del secondo parametro passato nel gestore eventi (denominato `e`).</span><span class="sxs-lookup"><span data-stu-id="ec84b-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="ec84b-164">Questo secondo parametro è di tipo [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) e dispone delle quattro proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="ec84b-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="ec84b-165">`CommandArgument` il valore della proprietà `CommandArgument` del pulsante selezionato</span><span class="sxs-lookup"><span data-stu-id="ec84b-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="ec84b-166">`CommandName` il valore della proprietà `CommandName` del pulsante</span><span class="sxs-lookup"><span data-stu-id="ec84b-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="ec84b-167">`CommandSource` un riferimento al controllo Button selezionato</span><span class="sxs-lookup"><span data-stu-id="ec84b-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="ec84b-168">`Item` un riferimento al [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) contenente il pulsante su cui è stato fatto clic; ogni record associato al ripetitore viene manifestato come `RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="ec84b-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="ec84b-169">Poiché la `CategoryID` della categoria selezionata viene passata tramite la proprietà `CommandArgument`, è possibile ottenere il set di prodotti associati alla categoria selezionata nel gestore dell'evento `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="ec84b-170">Questi prodotti possono quindi essere associati a un controllo BulletedList nel `ItemTemplate` (che è ancora necessario aggiungere).</span><span class="sxs-lookup"><span data-stu-id="ec84b-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="ec84b-171">Tutto ciò che rimane, quindi, consiste nell'aggiungere l'oggetto BulletedList, farvi riferimento nel gestore dell'evento `ItemCommand` ed eseguire il binding al set di prodotti per la categoria selezionata, che verrà affrontata nel passaggio 4.</span><span class="sxs-lookup"><span data-stu-id="ec84b-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="ec84b-172">Al gestore dell'evento DataList s `ItemCommand` viene passato un oggetto di tipo [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), che offre le stesse quattro proprietà della classe `RepeaterCommandEventArgs`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>

## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="ec84b-173">Passaggio 4: visualizzazione dei prodotti selezionati della categoria in un elenco puntato</span><span class="sxs-lookup"><span data-stu-id="ec84b-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="ec84b-174">È possibile visualizzare i prodotti della categoria selezionati all'interno del `ItemTemplate` Repeater utilizzando un numero qualsiasi di controlli.</span><span class="sxs-lookup"><span data-stu-id="ec84b-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="ec84b-175">È possibile aggiungere un altro Repeater annidato, un DataList, un oggetto DropDownList, un GridView e così via.</span><span class="sxs-lookup"><span data-stu-id="ec84b-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="ec84b-176">Poiché si desidera visualizzare i prodotti come elenco puntato, tuttavia, verrà utilizzato il controllo BulletedList.</span><span class="sxs-lookup"><span data-stu-id="ec84b-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="ec84b-177">Tornando al markup dichiarativo della pagina `CustomButtons.aspx`, aggiungere un controllo BulletedList al `ItemTemplate` dopo l'oggetto LinkButton Mostra prodotti.</span><span class="sxs-lookup"><span data-stu-id="ec84b-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="ec84b-178">Impostare la `ID` di BulletedLists su `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="ec84b-179">In BulletedList viene visualizzato il valore del campo dati specificato tramite la proprietà `DataTextField`; Poiché a questo controllo vengono associati informazioni sul prodotto, impostare la proprietà `DataTextField` su `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample4.aspx)]

<span data-ttu-id="ec84b-180">Nel gestore dell'evento `ItemCommand` fare riferimento a questo controllo utilizzando `e.Item.FindControl("ProductsInCategory")` e associarlo al set di prodotti associato alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="ec84b-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>

[!code-csharp[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample5.cs)]

<span data-ttu-id="ec84b-181">Prima di eseguire qualsiasi azione nel gestore dell'evento `ItemCommand`, è prudente controllare innanzitutto il valore del `CommandName`in ingresso.</span><span class="sxs-lookup"><span data-stu-id="ec84b-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="ec84b-182">Poiché il gestore dell'evento `ItemCommand` viene attivato quando si fa clic su *un* pulsante, se nel modello sono presenti più pulsanti, utilizzare il valore `CommandName` per discernere l'azione da eseguire.</span><span class="sxs-lookup"><span data-stu-id="ec84b-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="ec84b-183">Il controllo della `CommandName` qui è discutibile, perché è presente un solo pulsante, ma è una scelta ideale da creare.</span><span class="sxs-lookup"><span data-stu-id="ec84b-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="ec84b-184">Successivamente, il `CategoryID` della categoria selezionata viene recuperato dalla proprietà `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="ec84b-185">Viene quindi fatto riferimento al controllo BulletedList nel modello e associato ai risultati del metodo `ProductsBLL` Class s `GetProductsByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="ec84b-186">Nelle esercitazioni precedenti che usavano i pulsanti all'interno di un DataList, ad esempio [una panoramica della modifica e dell'eliminazione dei dati in DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), il valore della chiave primaria di un determinato elemento veniva determinato tramite la raccolta di `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="ec84b-187">Sebbene questo approccio funzioni correttamente con DataList, il ripetitore non dispone di una proprietà `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="ec84b-188">Al contrario, è necessario usare un approccio alternativo per fornire il valore della chiave primaria, ad esempio tramite il pulsante s `CommandArgument` proprietà o assegnando il valore della chiave primaria a un controllo Web etichetta nascosta all'interno del modello e rileggendone il valore nel gestore eventi `ItemCommand` utilizzando `e.Item.FindControl("LabelID")`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="ec84b-189">Dopo aver completato il gestore dell'evento `ItemCommand`, provare a eseguire il test di questa pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="ec84b-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="ec84b-190">Come illustrato nella figura 7, facendo clic sul collegamento Mostra prodotti viene generato un postback e vengono visualizzati i prodotti per la categoria selezionata in un oggetto BulletedList.</span><span class="sxs-lookup"><span data-stu-id="ec84b-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="ec84b-191">Si noti inoltre che le informazioni sul prodotto restano, anche se le altre categorie mostrano i collegamenti ai prodotti.</span><span class="sxs-lookup"><span data-stu-id="ec84b-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="ec84b-192">Se si desidera modificare il comportamento di questo report, in modo che gli unici prodotti di una categoria siano elencati alla volta, è sufficiente impostare la proprietà `EnableViewState` del controllo BulletedList su `False`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>

<span data-ttu-id="ec84b-193">[![viene utilizzato un BulletedList per visualizzare i prodotti della categoria selezionata](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="ec84b-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span></span>

<span data-ttu-id="ec84b-194">**Figura 7**: viene usato un oggetto BulletedList per visualizzare i prodotti della categoria selezionata ([fare clic per visualizzare l'immagine con dimensioni complete](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="ec84b-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="ec84b-195">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="ec84b-195">Summary</span></span>

<span data-ttu-id="ec84b-196">I controlli DataList e Repeater possono includere un numero qualsiasi di pulsanti, LinkButton o ImageButton all'interno dei modelli.</span><span class="sxs-lookup"><span data-stu-id="ec84b-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="ec84b-197">Tali pulsanti, quando si fa clic, generano un postback e generano l'evento `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="ec84b-198">Per associare un'azione personalizzata lato server a un pulsante selezionato, creare un gestore eventi per l'evento `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="ec84b-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="ec84b-199">In questo gestore eventi controllare innanzitutto il valore `CommandName` in arrivo per determinare il pulsante selezionato.</span><span class="sxs-lookup"><span data-stu-id="ec84b-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="ec84b-200">Facoltativamente, è possibile fornire informazioni aggiuntive tramite il pulsante s `CommandArgument` proprietà.</span><span class="sxs-lookup"><span data-stu-id="ec84b-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="ec84b-201">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="ec84b-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="ec84b-202">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="ec84b-202">About the Author</span></span>

<span data-ttu-id="ec84b-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette ASP/ASP. NET Books e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), collabora con le tecnologie Web Microsoft a partire da 1998.</span><span class="sxs-lookup"><span data-stu-id="ec84b-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ec84b-204">Scott lavora come consulente, trainer e writer indipendenti.</span><span class="sxs-lookup"><span data-stu-id="ec84b-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ec84b-205">Il suo ultimo libro è [*Sams Teach Yourself ASP.NET 2,0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="ec84b-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ec84b-206">Può essere raggiunto in [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ec84b-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="ec84b-207">o tramite il suo Blog, disponibile in [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="ec84b-207">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="ec84b-208">Grazie speciale</span><span class="sxs-lookup"><span data-stu-id="ec84b-208">Special Thanks To</span></span>

<span data-ttu-id="ec84b-209">Questa serie di esercitazioni è stata esaminata da molti revisori utili.</span><span class="sxs-lookup"><span data-stu-id="ec84b-209">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ec84b-210">Il revisore principale di questa esercitazione era Dennis Patterson.</span><span class="sxs-lookup"><span data-stu-id="ec84b-210">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="ec84b-211">Sei interessato a esaminare i miei prossimi articoli MSDN?</span><span class="sxs-lookup"><span data-stu-id="ec84b-211">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ec84b-212">In tal caso, rilasciare una riga in [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ec84b-212">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="ec84b-213">avanti</span><span class="sxs-lookup"><span data-stu-id="ec84b-213">Next</span></span>](custom-buttons-in-the-datalist-and-repeater-vb.md)
