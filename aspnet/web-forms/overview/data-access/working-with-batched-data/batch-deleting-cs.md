---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: Batch di eliminazione (c#) | Microsoft Docs
author: rick-anderson
description: Informazioni su come eliminare più record di database in un'unica operazione. Nel livello di interfaccia utente si basano un GridView avanzato creati in un precedente tut...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: c5b4d3c21fad9000ae50ecb35a5d94d176a135ee
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57036498"
---
<a name="batch-deleting-c"></a><span data-ttu-id="972a0-104">Eliminazione batch (C#)</span><span class="sxs-lookup"><span data-stu-id="972a0-104">Batch Deleting (C#)</span></span>
====================
<span data-ttu-id="972a0-105">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="972a0-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="972a0-106">[Scaricare il codice](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) o [Scarica il PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="972a0-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="972a0-107">Informazioni su come eliminare più record di database in un'unica operazione.</span><span class="sxs-lookup"><span data-stu-id="972a0-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="972a0-108">Nel livello di interfaccia utente si basano un GridView avanzato creati in un'esercitazione precedente.</span><span class="sxs-lookup"><span data-stu-id="972a0-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="972a0-109">Nel livello di accesso ai dati è eseguire il wrapping di più operazioni di eliminazione in una transazione per garantire che tutte le eliminazioni di esito positivo o vengano eseguito il rollback di tutte le eliminazioni.</span><span class="sxs-lookup"><span data-stu-id="972a0-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>


## <a name="introduction"></a><span data-ttu-id="972a0-110">Introduzione</span><span class="sxs-lookup"><span data-stu-id="972a0-110">Introduction</span></span>

<span data-ttu-id="972a0-111">Il [esercitazione precedente](batch-updating-cs.md) esaminato come creare un batch Modifica interfaccia utilizzando un controllo GridView interamente modificabili.</span><span class="sxs-lookup"><span data-stu-id="972a0-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="972a0-112">In situazioni in cui gli utenti sono in genere modifica numero di record in una sola volta, un batch di interfaccia di modifica richiederà meno i postback e il contesto di tastiera per mouse commutatori, migliorando l'efficienza di s utente finale.</span><span class="sxs-lookup"><span data-stu-id="972a0-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="972a0-113">Questa tecnica è utile in modo analogo per le pagine in cui è comune per gli utenti di eliminare il numero di record in un'unica operazione.</span><span class="sxs-lookup"><span data-stu-id="972a0-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="972a0-114">Chiunque abbia usato un client di posta elettronica online ha già familiarità con uno dei batch di più comune l'eliminazione di interfacce: pulsante di una casella di controllo in ogni riga in una griglia con una corrispondente eliminare tutti gli elementi selezionati (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="972a0-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="972a0-115">Questa esercitazione è piuttosto breve perché è stato già fatto tutto il lavoro difficile nelle esercitazioni precedenti nella creazione sia l'interfaccia basata sul web e un metodo per eliminare una serie di record di una singola operazione atomica.</span><span class="sxs-lookup"><span data-stu-id="972a0-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="972a0-116">Nel [aggiunta di una colonna GridView di caselle di controllo](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) esercitazione viene creato un controllo GridView con una colonna di caselle di controllo e nel [wrapping delle modifiche al Database in una transazione](wrapping-database-modifications-within-a-transaction-cs.md) esercitazione è stato creato un metodo in il livello BLL che usa una transazione per eliminare un `List<T>` di `ProductID` valori.</span><span class="sxs-lookup"><span data-stu-id="972a0-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="972a0-117">In questa esercitazione verranno si basano e nostre esperienze precedenti per creare un batch di lavoro l'eliminazione di esempio di tipo merge.</span><span class="sxs-lookup"><span data-stu-id="972a0-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>


<span data-ttu-id="972a0-118">[![Ogni riga include una casella di controllo](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="972a0-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="972a0-119">**Figura 1**: Ogni riga include una casella di controllo ([fare clic per visualizzare l'immagine con dimensioni normali](batch-deleting-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="972a0-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>


## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="972a0-120">Passaggio 1: Creazione Batch di eliminazione dell'interfaccia</span><span class="sxs-lookup"><span data-stu-id="972a0-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="972a0-121">Poiché è già stato creato l'eliminazione di interfaccia in batch le [aggiunta di una colonna GridView di caselle di controllo](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) esercitazione, è possibile semplicemente copiarlo `BatchDelete.aspx` anziché crearlo da zero.</span><span class="sxs-lookup"><span data-stu-id="972a0-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="972a0-122">Iniziare aprendo il `BatchDelete.aspx` nella pagina la `BatchData` cartella e il `CheckBoxField.aspx` nella pagina di `EnhancedGridView` cartella.</span><span class="sxs-lookup"><span data-stu-id="972a0-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="972a0-123">Dal `CheckBoxField.aspx` pagina, passare alla visualizzazione origine e copiare il codice tra il `<asp:Content>` tag come illustrato nella figura 2.</span><span class="sxs-lookup"><span data-stu-id="972a0-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>


<span data-ttu-id="972a0-124">[![Copiare il Markup dichiarativo di CheckBoxField.aspx negli Appunti](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="972a0-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="972a0-125">**Figura 2**: Copiare il Markup dichiarativo di `CheckBoxField.aspx` negli Appunti ([fare clic per visualizzare l'immagine con dimensioni normali](batch-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="972a0-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>


<span data-ttu-id="972a0-126">Successivamente, passare alla visualizzazione origine nella `BatchDelete.aspx` e incollare il contenuto degli Appunti all'interno di `<asp:Content>` tag.</span><span class="sxs-lookup"><span data-stu-id="972a0-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="972a0-127">Copiare e incollare il codice all'interno della classe code-behind in anche `CheckBoxField.aspx.cs` all'interno della classe code-behind in `BatchDelete.aspx.cs` (il `DeleteSelectedProducts` pulsante s `Click` gestore eventi, il `ToggleCheckState` metodo e il `Click` gestori eventi per il `CheckAll` e `UncheckAll` pulsanti).</span><span class="sxs-lookup"><span data-stu-id="972a0-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="972a0-128">Dopo aver copiato questo contenuto, il `BatchDelete.aspx` classe code-behind pagina s deve contenere il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="972a0-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="972a0-129">Dopo aver copiato il markup dichiarativo e codice sorgente, si consiglia di testare `BatchDelete.aspx` visualizzandolo tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="972a0-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="972a0-130">Verrà visualizzato un elenco dei primi dieci prodotti in un controllo GridView con ogni riga Elenca il nome del prodotto s, categoria e prezzo insieme a una casella di controllo di GridView.</span><span class="sxs-lookup"><span data-stu-id="972a0-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="972a0-131">Dovrebbero essere presenti tre pulsanti: Selezionare tutte le, deselezionare tutto ed eliminare i prodotti selezionati.</span><span class="sxs-lookup"><span data-stu-id="972a0-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="972a0-132">Facendo clic sul pulsante Seleziona tutto consente di selezionare tutte le caselle di controllo, mentre tutte deselezionare Cancella tutte le caselle di controllo.</span><span class="sxs-lookup"><span data-stu-id="972a0-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="972a0-133">Facendo clic su Elimina prodotti selezionati viene visualizzato un messaggio in cui sono elencati i `ProductID` i valori dei prodotti selezionati, ma non elimina effettivamente i prodotti.</span><span class="sxs-lookup"><span data-stu-id="972a0-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>


<span data-ttu-id="972a0-134">[![L'interfaccia da CheckBoxField.aspx è stata spostata in BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="972a0-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="972a0-135">**Figura 3**: L'interfaccia da `CheckBoxField.aspx` è stata spostata `BatchDeleting.aspx` ([fare clic per visualizzare l'immagine con dimensioni normali](batch-deleting-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="972a0-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>


## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="972a0-136">Passaggio 2: Eliminare i prodotti selezionati utilizzando transazioni</span><span class="sxs-lookup"><span data-stu-id="972a0-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="972a0-137">Con il batch di eliminazione dell'interfaccia è stata copiata in `BatchDeleting.aspx`, resta per aggiornare il codice in modo che il pulsante di eliminare i prodotti selezionati Elimina i prodotti selezionati tramite i `DeleteProductsWithTransaction` metodo nel `ProductsBLL` classe.</span><span class="sxs-lookup"><span data-stu-id="972a0-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="972a0-138">Questo metodo, aggiunto nel [di wrapping delle modifiche al Database in una transazione](wrapping-database-modifications-within-a-transaction-cs.md) esercitazione accetta come input un `List<T>` dei `ProductID` valori ed elimina ogni corrispondente `ProductID` all'interno dell'ambito di un transazione.</span><span class="sxs-lookup"><span data-stu-id="972a0-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="972a0-139">Il `DeleteSelectedProducts` pulsante s `Click` gestore dell'evento attualmente utilizza il seguente `foreach` ciclo per scorrere ogni riga GridView:</span><span class="sxs-lookup"><span data-stu-id="972a0-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="972a0-140">Per ogni riga, il `ProductSelector` controllo casella di controllo Web a livello di codice viene fatto riferimento.</span><span class="sxs-lookup"><span data-stu-id="972a0-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="972a0-141">Se è selezionata, la riga s `ProductID` viene recuperato dal `DataKeys` raccolta e il `DeleteResults` etichetta s `Text` proprietà viene aggiornata per includere un messaggio che indica che la riga è stata selezionata per l'eliminazione.</span><span class="sxs-lookup"><span data-stu-id="972a0-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="972a0-142">Il codice sopra riportato non elimina effettivamente i record come la chiamata ai `ProductsBLL` classe s `Delete` metodo viene impostata come commento. Sono stati questa logica di eliminazione da applicare, il codice eliminerebbe i prodotti, ma non all'interno di un'operazione atomica.</span><span class="sxs-lookup"><span data-stu-id="972a0-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="972a0-143">Vale a dire, se le eliminazioni di alcuni prima nella sequenza ha avuto esito positivo, ma una versione più recente non riuscito (forse a causa di una violazione di vincolo di chiave esterna), verrebbe generata un'eccezione mentre rimangono eliminati i prodotti già eliminati.</span><span class="sxs-lookup"><span data-stu-id="972a0-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="972a0-144">Per garantire l'atomicità, è necessario usare invece i `ProductsBLL` classe s `DeleteProductsWithTransaction` (metodo).</span><span class="sxs-lookup"><span data-stu-id="972a0-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="972a0-145">Poiché questo metodo accetta un elenco di `ProductID` valori, è necessario innanzitutto compilare questo elenco dalla griglia e quindi passarlo come parametro.</span><span class="sxs-lookup"><span data-stu-id="972a0-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="972a0-146">Viene innanzitutto creata un'istanza di un `List<T>` di tipo `int`.</span><span class="sxs-lookup"><span data-stu-id="972a0-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="972a0-147">All'interno di `foreach` ciclo è necessario aggiungere prodotti selezionati `ProductID` valori a questo `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="972a0-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="972a0-148">Dopo il ciclo ciò `List<T>` deve essere passato per il `ProductsBLL` classe s `DeleteProductsWithTransaction` (metodo).</span><span class="sxs-lookup"><span data-stu-id="972a0-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="972a0-149">Aggiorna il `DeleteSelectedProducts` pulsante s `Click` gestore dell'evento con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="972a0-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="972a0-150">Crea il codice aggiornato un `List<T>` typu `int` (`productIDsToDelete`) e la popola con i `ProductID` valori da eliminare.</span><span class="sxs-lookup"><span data-stu-id="972a0-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="972a0-151">Dopo il `foreach` ciclo, se è presente almeno un prodotto selezionato, il `ProductsBLL` classe s `DeleteProductsWithTransaction` metodo viene chiamato e passato questo elenco.</span><span class="sxs-lookup"><span data-stu-id="972a0-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="972a0-152">Il `DeleteResults` etichetta viene inoltre visualizzato e i dati riassociati a GridView (in modo che il record appena eliminata non saranno più visualizzati come righe nella griglia).</span><span class="sxs-lookup"><span data-stu-id="972a0-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="972a0-153">Figura 4 illustra il controllo GridView dopo aver selezionato un numero di righe per l'eliminazione.</span><span class="sxs-lookup"><span data-stu-id="972a0-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="972a0-154">Figura 5 mostra la schermata immediatamente dopo che è stato fatto clic sul pulsante Elimina i prodotti selezionati.</span><span class="sxs-lookup"><span data-stu-id="972a0-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="972a0-155">Si noti che nella figura 5 il `ProductID` valori del record eliminati vengono visualizzati nell'etichetta sotto il controllo GridView e tali righe non sono più in GridView.</span><span class="sxs-lookup"><span data-stu-id="972a0-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>


<span data-ttu-id="972a0-156">[![Verranno eliminati i prodotti selezionati](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="972a0-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="972a0-157">**Figura 4**: Il selezionato prodotti verranno eliminate ([fare clic per visualizzare l'immagine con dimensioni normali](batch-deleting-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="972a0-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>


<span data-ttu-id="972a0-158">[![I valori di ProductID prodotti eliminati vengono elencate di sotto di GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="972a0-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="972a0-159">**Figura 5**: I prodotti eliminati `ProductID` i valori sono elencati sotto GridView ([fare clic per visualizzare l'immagine con dimensioni normali](batch-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="972a0-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>


> [!NOTE]
> <span data-ttu-id="972a0-160">Per testare la `DeleteProductsWithTransaction` atomicità metodo s, aggiungere manualmente una voce per un prodotto nel `Order Details` di tabella, quindi tentare di eliminare tale prodotto (insieme ad altri utenti).</span><span class="sxs-lookup"><span data-stu-id="972a0-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="972a0-161">Si riceverà una violazione di vincolo di chiave esterna quando si prova a eliminare il prodotto con un ordine associato, ma si noti come il rollback all'eliminazione di altri prodotti selezionati.</span><span class="sxs-lookup"><span data-stu-id="972a0-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>


## <a name="summary"></a><span data-ttu-id="972a0-162">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="972a0-162">Summary</span></span>

<span data-ttu-id="972a0-163">Creazione di un batch di eliminazione dell'interfaccia prevede l'aggiunta di un controllo GridView con una colonna di caselle di controllo e controllo Web un pulsante che, quando selezionato, verranno eliminate tutte le righe selezionate come una singola operazione atomica.</span><span class="sxs-lookup"><span data-stu-id="972a0-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="972a0-164">In questa esercitazione è stato creato questo tipo di interfaccia da riunire a lavorare in due esercitazioni precedenti [aggiunta di una colonna GridView di caselle di controllo](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) e [wrapping delle modifiche al Database in una transazione](wrapping-database-modifications-within-a-transaction-cs.md).</span><span class="sxs-lookup"><span data-stu-id="972a0-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="972a0-165">Nella prima esercitazione viene creato un controllo GridView con una colonna di caselle di controllo e in quest'ultimo è implementato un metodo nel livello BLL che, quando viene passato un `List<T>` di `ProductID` li eliminati i valori, tutto all'interno dell'ambito di una transazione.</span><span class="sxs-lookup"><span data-stu-id="972a0-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="972a0-166">Nella prossima esercitazione si creerà un'interfaccia per l'esecuzione di inserimenti batch.</span><span class="sxs-lookup"><span data-stu-id="972a0-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="972a0-167">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="972a0-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="972a0-168">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="972a0-168">About the Author</span></span>

<span data-ttu-id="972a0-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette libri e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha collaborato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="972a0-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="972a0-170">Lavora come un consulente, formatore e autore.</span><span class="sxs-lookup"><span data-stu-id="972a0-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="972a0-171">Il suo ultimo libro si intitola [ *Sams Teach Yourself ASP.NET 2.0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="972a0-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="972a0-172">È possibile contattarlo al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="972a0-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="972a0-173">o sul suo blog, che è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="972a0-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="972a0-174">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="972a0-174">Special Thanks To</span></span>

<span data-ttu-id="972a0-175">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="972a0-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="972a0-176">I revisori per questa esercitazione sono state Hilton Giesenow e Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="972a0-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="972a0-177">Se si è interessati prossimi articoli MSDN dello?</span><span class="sxs-lookup"><span data-stu-id="972a0-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="972a0-178">In questo caso, Inviami una riga in corrispondenza [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="972a0-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="972a0-179">[Precedente](batch-updating-cs.md)
> [Successivo](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="972a0-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>
