---
uid: web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
title: Aggiunta e risposta ai pulsanti in un controllo GridView (c#) | Microsoft Docs
author: rick-anderson
description: In questa esercitazione verrà esaminato come aggiungere pulsanti personalizzati, sia a un modello e ai campi di un controllo GridView o DetailsView. In particolare, ti invieremo un numero di comp...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: 128fdb5f-4c5e-42b5-b485-f3aee90a8e38
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
msc.type: authoredcontent
ms.openlocfilehash: 3a081b1633e7762560aea68500f5bd614e4fb5a6
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57035878"
---
<a name="adding-and-responding-to-buttons-to-a-gridview-c"></a><span data-ttu-id="a0683-104">Aggiunta e risposta ai pulsanti in un controllo GridView (C#)</span><span class="sxs-lookup"><span data-stu-id="a0683-104">Adding and Responding to Buttons to a GridView (C#)</span></span>
====================
<span data-ttu-id="a0683-105">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a0683-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a0683-106">[Scaricare l'App di esempio](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) o [Scarica il PDF](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a0683-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) or [Download PDF](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span></span>

> <span data-ttu-id="a0683-107">In questa esercitazione verrà esaminato come aggiungere pulsanti personalizzati, sia a un modello e ai campi di un controllo GridView o DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a0683-107">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="a0683-108">In particolare, verrà compilata un'interfaccia che dispone di un controllo FormView che consente all'utente di spostarsi tra i fornitori.</span><span class="sxs-lookup"><span data-stu-id="a0683-108">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span>


## <a name="introduction"></a><span data-ttu-id="a0683-109">Introduzione</span><span class="sxs-lookup"><span data-stu-id="a0683-109">Introduction</span></span>

<span data-ttu-id="a0683-110">Sebbene molti scenari di creazione di report comportano l'accesso di sola lettura ai dati del report, non è insolito per i report includano la possibilità di eseguire azioni in base ai dati visualizzati.</span><span class="sxs-lookup"><span data-stu-id="a0683-110">While many reporting scenarios involve read-only access to the report data, it's not uncommon for reports to include the ability to perform actions based upon the data displayed.</span></span> <span data-ttu-id="a0683-111">In genere questo ha richiesto l'aggiunta di un controllo pulsante, LinkButton e ImageButton Web con ogni record visualizzato nel report che, quando si fa clic, causa un postback e richiama un codice lato server.</span><span class="sxs-lookup"><span data-stu-id="a0683-111">Typically this involved adding a Button, LinkButton, or ImageButton Web control with each record displayed in the report that, when clicked, causes a postback and invokes some server-side code.</span></span> <span data-ttu-id="a0683-112">Modificare ed eliminare i dati in un record per record di base è l'esempio più comune.</span><span class="sxs-lookup"><span data-stu-id="a0683-112">Editing and deleting the data on a record-by-record basis is the most common example.</span></span> <span data-ttu-id="a0683-113">In realtà, come abbiamo visto inizia con la [Panoramica di inserimento, aggiornamento ed eliminazione di dati](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) esercitazione, modifica ed eliminazione è talmente comune che i controlli GridView, DetailsView e FormView possono supportare tale funzionalità senza il necessario per la scrittura di una singola riga di codice.</span><span class="sxs-lookup"><span data-stu-id="a0683-113">In fact, as we saw starting with the [Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, editing and deleting is so common that the GridView, DetailsView, and FormView controls can support such functionality without the need for writing a single line of code.</span></span>

<span data-ttu-id="a0683-114">Per modificare ed eliminare i pulsanti, il controllo GridView, DetailsView e FormView inoltre controlli possono includere anche i pulsanti, i controlli LinkButton o ImageButtons che, quando si fa clic, eseguire una logica personalizzata lato server.</span><span class="sxs-lookup"><span data-stu-id="a0683-114">In addition to Edit and Delete buttons, the GridView, DetailsView, and FormView controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="a0683-115">In questa esercitazione verrà esaminato come aggiungere pulsanti personalizzati, sia a un modello e ai campi di un controllo GridView o DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a0683-115">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="a0683-116">In particolare, verrà compilata un'interfaccia che dispone di un controllo FormView che consente all'utente di spostarsi tra i fornitori.</span><span class="sxs-lookup"><span data-stu-id="a0683-116">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span> <span data-ttu-id="a0683-117">Per un determinato fornitore, FormView conterranno le informazioni sul fornitore insieme a un controllo pulsante Web che, se si fa clic, contrassegna tutti i relativi prodotti associati come non più disponibile.</span><span class="sxs-lookup"><span data-stu-id="a0683-117">For a given supplier, the FormView will show information about the supplier along with a Button Web control that, if clicked, will mark all of their associated products as discontinued.</span></span> <span data-ttu-id="a0683-118">Inoltre, un controllo GridView sono elencati i prodotti specificati dal fornitore selezionato, con ogni riga che contiene il prezzo di aumentare e sconto sul prezzo pulsanti che, se si fa clic, aumentare o ridurre il prodotto `UnitPrice` 10% (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="a0683-118">Additionally, a GridView lists those products provided by the selected supplier, with each row containing Increase Price and Discount Price Buttons that, if clicked, raise or reduce the product's `UnitPrice` by 10% (see Figure 1).</span></span>


<span data-ttu-id="a0683-119">[![FormView e GridView contengono i pulsanti per eseguono azioni personalizzate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-119">[![Both the FormView and GridView Contain Buttons That Perform Custom Actions](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span></span>

<span data-ttu-id="a0683-120">**Figura 1**: FormView e GridView contengono pulsanti che eseguire azioni personalizzate ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-120">**Figure 1**: Both the FormView and GridView Contain Buttons That Perform Custom Actions ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span></span>


## <a name="step-1-adding-the-button-tutorial-web-pages"></a><span data-ttu-id="a0683-121">Passaggio 1: Aggiunta di pagine Web di esercitazione pulsante</span><span class="sxs-lookup"><span data-stu-id="a0683-121">Step 1: Adding the Button Tutorial Web Pages</span></span>

<span data-ttu-id="a0683-122">Prima di esaminare come aggiungere un pulsanti personalizzati, è possibile eseguire qualche istante per creare le pagine ASP.NET nel progetto di sito Web che è necessario per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="a0683-122">Before we look at how to add a custom buttons, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="a0683-123">Iniziare aggiungendo una nuova cartella denominata `CustomButtons`.</span><span class="sxs-lookup"><span data-stu-id="a0683-123">Start by adding a new folder named `CustomButtons`.</span></span> <span data-ttu-id="a0683-124">Successivamente, aggiungere le seguenti due pagine ASP.NET per quella cartella, assicurandosi di associare ogni pagina con il `Site.master` pagina master:</span><span class="sxs-lookup"><span data-stu-id="a0683-124">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`


![Aggiungere le pagine ASP.NET per le esercitazioni relative ai pulsanti personalizzate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image4.png)

<span data-ttu-id="a0683-126">**Figura 2**: Aggiungere le pagine ASP.NET per le esercitazioni relative ai pulsanti personalizzate</span><span class="sxs-lookup"><span data-stu-id="a0683-126">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>


<span data-ttu-id="a0683-127">In altre cartelle, analogo a `Default.aspx` nella `CustomButtons` cartella elencherà le esercitazioni nella relativa sezione.</span><span class="sxs-lookup"><span data-stu-id="a0683-127">Like in the other folders, `Default.aspx` in the `CustomButtons` folder will list the tutorials in its section.</span></span> <span data-ttu-id="a0683-128">Si tenga presente che il `SectionLevelTutorialListing.ascx` controllo utente fornisce questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="a0683-128">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="a0683-129">Pertanto, aggiungere questo controllo utente da `Default.aspx` trascinandolo da Esplora soluzioni in visualizzazione di progettazione della pagina.</span><span class="sxs-lookup"><span data-stu-id="a0683-129">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>


<span data-ttu-id="a0683-130">[![Aggiungere il controllo utente sectionleveltutoriallisting. ascx a default. aspx](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-130">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span></span>

<span data-ttu-id="a0683-131">**Figura 3**: Aggiungere il `SectionLevelTutorialListing.ascx` controllo utente da `Default.aspx` ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-131">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span></span>


<span data-ttu-id="a0683-132">Infine, aggiungere le pagine come voci per il `Web.sitemap` file.</span><span class="sxs-lookup"><span data-stu-id="a0683-132">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="a0683-133">In particolare, aggiungere il markup seguente dopo il Paging e ordinamento `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="a0683-133">Specifically, add the following markup after the Paging and Sorting `<siteMapNode>`:</span></span>

[!code-xml[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample1.xml)]

<span data-ttu-id="a0683-134">Dopo aver aggiornato `Web.sitemap`, si consiglia di visualizzare il sito Web di esercitazioni tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="a0683-134">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="a0683-135">Il menu a sinistra ora include elementi per la modifica, inserimento ed eliminazione di esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="a0683-135">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![Mappa del sito include ora la voce per l'esercitazione di pulsanti personalizzati](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image8.png)

<span data-ttu-id="a0683-137">**Figura 4**: Mappa del sito include ora la voce per l'esercitazione di pulsanti personalizzati</span><span class="sxs-lookup"><span data-stu-id="a0683-137">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>


## <a name="step-2-adding-a-formview-that-lists-the-suppliers"></a><span data-ttu-id="a0683-138">Passaggio 2: Aggiunta di un controllo FormView che elenca i fornitori</span><span class="sxs-lookup"><span data-stu-id="a0683-138">Step 2: Adding a FormView that Lists the Suppliers</span></span>

<span data-ttu-id="a0683-139">Attività iniziali con l'esercitazione aggiungendo FormView che elenca i fornitori.</span><span class="sxs-lookup"><span data-stu-id="a0683-139">Let's get started with this tutorial by adding the FormView that lists the suppliers.</span></span> <span data-ttu-id="a0683-140">Come descritto nell'introduzione, questo controllo FormView consentirà all'utente di spostarsi tra i fornitori, che mostra i prodotti specificati dal fornitore in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="a0683-140">As discussed in the Introduction, this FormView will allow the user to page through the suppliers, showing the products provided by the supplier in a GridView.</span></span> <span data-ttu-id="a0683-141">Inoltre, questo controllo FormView includerà un pulsante che, quando si fa clic, contrassegna tutti i prodotti del fornitore come non più disponibile.</span><span class="sxs-lookup"><span data-stu-id="a0683-141">Additionally, this FormView will include a Button that, when clicked, will mark all of the supplier's products as discontinued.</span></span> <span data-ttu-id="a0683-142">Prima abbiamo si riferiscono a noi con il pulsante personalizzato l'aggiunta a FormView, è possibile solo creare FormView in modo che vengano visualizzate le informazioni del fornitore.</span><span class="sxs-lookup"><span data-stu-id="a0683-142">Before we concern ourselves with adding the custom button to the FormView, let's first just create the FormView so that it displays the supplier information.</span></span>

<span data-ttu-id="a0683-143">Iniziare aprendo il `CustomButtons.aspx` nella pagina di `CustomButtons` cartella.</span><span class="sxs-lookup"><span data-stu-id="a0683-143">Start by opening the `CustomButtons.aspx` page in the `CustomButtons` folder.</span></span> <span data-ttu-id="a0683-144">Aggiungere un controllo FormView alla pagina trascinandolo dalla casella degli strumenti nella finestra di progettazione e set relativo `ID` proprietà `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="a0683-144">Add a FormView to the page by dragging it from the Toolbox onto the Designer and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="a0683-145">Dallo smart tag del controllo FormView, scegliere di creare un nuovo oggetto ObjectDataSource denominato `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="a0683-145">From the FormView's smart tag, opt to create a new ObjectDataSource named `SuppliersDataSource`.</span></span>


<span data-ttu-id="a0683-146">[![Creare un nuovo oggetto ObjectDataSource denominato SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-146">[![Create a New ObjectDataSource Named SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span></span>

<span data-ttu-id="a0683-147">**Figura 5**: Creare un nuovo oggetto ObjectDataSource denominato `SuppliersDataSource` ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-147">**Figure 5**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span></span>


<span data-ttu-id="a0683-148">Configurare il nuovo oggetto ObjectDataSource in modo che viene eseguita una query dal `SuppliersBLL` della classe `GetSuppliers()` (metodo) (vedere la figura 6).</span><span class="sxs-lookup"><span data-stu-id="a0683-148">Configure this new ObjectDataSource such that it queries from the `SuppliersBLL` class's `GetSuppliers()` method (see Figure 6).</span></span> <span data-ttu-id="a0683-149">Poiché questo controllo FormView non fornisce un'interfaccia per l'aggiornamento delle informazioni sul fornitore, selezionare opzione (nessuno) nell'elenco a discesa nella scheda aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="a0683-149">Since this FormView does not provide an interface for updating the supplier information, select the (None) option from the drop-down list in the UPDATE tab.</span></span>


<span data-ttu-id="a0683-150">[![Configurare l'origine dati per usare la classe SuppliersBLL s GetSuppliers() (metodo)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-150">[![Configure the Data Source to use the SuppliersBLL Class s GetSuppliers() Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span></span>

<span data-ttu-id="a0683-151">**Figura 6**: Configurare l'origine dati per usare la `SuppliersBLL` della classe `GetSuppliers()` metodo ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-151">**Figure 6**: Configure the Data Source to use the `SuppliersBLL` Class's `GetSuppliers()` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span></span>


<span data-ttu-id="a0683-152">Dopo la configurazione di ObjectDataSource, Visual Studio genera una `InsertItemTemplate`, `EditItemTemplate`, e `ItemTemplate` per FormView.</span><span class="sxs-lookup"><span data-stu-id="a0683-152">After configuring the ObjectDataSource, Visual Studio will generate an `InsertItemTemplate`, `EditItemTemplate`, and `ItemTemplate` for the FormView.</span></span> <span data-ttu-id="a0683-153">Rimuovere il `InsertItemTemplate` e `EditItemTemplate` e modificare il `ItemTemplate` in modo che venga visualizzato appena del fornitore aziendale nome e numero di telefono.</span><span class="sxs-lookup"><span data-stu-id="a0683-153">Remove the `InsertItemTemplate` and `EditItemTemplate` and modify the `ItemTemplate` so that it displays just the supplier's company name and phone number.</span></span> <span data-ttu-id="a0683-154">Infine, attivare il supporto di paging per il controllo FormView selezionando la casella di controllo Attiva Paging dal suo smart tag (o tramite l'impostazione relativa `AllowPaging` proprietà `True`).</span><span class="sxs-lookup"><span data-stu-id="a0683-154">Finally, turn on paging support for the FormView by checking the Enable Paging checkbox from its smart tag (or by setting its `AllowPaging` property to `True`).</span></span> <span data-ttu-id="a0683-155">Dopo tali modifiche markup dichiarativo della pagina dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a0683-155">After these changes your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample2.aspx)]

<span data-ttu-id="a0683-156">Figura 7 mostra la pagina CustomButtons.aspx quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="a0683-156">Figure 7 shows the CustomButtons.aspx page when viewed through a browser.</span></span>


<span data-ttu-id="a0683-157">[![FormView sono elencati i CompanyName e i campi telefono dal fornitore attualmente selezionato](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-157">[![The FormView Lists the CompanyName and Phone Fields from the Currently Selected Supplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span></span>

<span data-ttu-id="a0683-158">**Figura 7**: Gli elenchi di controllo FormView la `CompanyName` e `Phone` campi dal fornitore attualmente selezionato ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-158">**Figure 7**: The FormView Lists the `CompanyName` and `Phone` Fields from the Currently Selected Supplier ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span></span>


## <a name="step-3-adding-a-gridview-that-lists-the-selected-suppliers-products"></a><span data-ttu-id="a0683-159">Passaggio 3: Aggiunta di un controllo GridView in cui sono elencati i prodotti del fornitore selezionato</span><span class="sxs-lookup"><span data-stu-id="a0683-159">Step 3: Adding a GridView that Lists the Selected Supplier's Products</span></span>

<span data-ttu-id="a0683-160">Prima di interrompere tutti i prodotti pulsante aggiungere al modello del controllo FormView, prima di tutto aggiungere un controllo GridView di sotto di FormView che elenca i prodotti specificati dal fornitore selezionato.</span><span class="sxs-lookup"><span data-stu-id="a0683-160">Before we add the Discontinue All Products Button to the FormView's template, let's first add a GridView beneath the FormView that lists the products provided by the selected supplier.</span></span> <span data-ttu-id="a0683-161">Per eseguire questa operazione, aggiungere un controllo GridView alla pagina, impostare relativi `ID` proprietà `SuppliersProducts`, e aggiungere un nuovo oggetto ObjectDataSource denominato `SuppliersProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="a0683-161">To accomplish this, add a GridView to the page, set its `ID` property to `SuppliersProducts`, and add a new ObjectDataSource named `SuppliersProductsDataSource`.</span></span>


<span data-ttu-id="a0683-162">[![Creare un nuovo oggetto ObjectDataSource denominato SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-162">[![Create a New ObjectDataSource Named SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span></span>

<span data-ttu-id="a0683-163">**Figura 8**: Creare un nuovo oggetto ObjectDataSource denominato `SuppliersProductsDataSource` ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-163">**Figure 8**: Create a New ObjectDataSource Named `SuppliersProductsDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span></span>


<span data-ttu-id="a0683-164">Configurare ObjectDataSource per l'uso della classe ProductsBLL `GetProductsBySupplierID(supplierID)` (metodo) (vedere la figura 9).</span><span class="sxs-lookup"><span data-stu-id="a0683-164">Configure this ObjectDataSource to use the ProductsBLL class's `GetProductsBySupplierID(supplierID)` method (see Figure 9).</span></span> <span data-ttu-id="a0683-165">Anche se questo controllo GridView verranno consentono il prezzo del prodotto affinché venga regolato, non verrà usato incorporati di modifica o l'eliminazione di funzionalità da GridView.</span><span class="sxs-lookup"><span data-stu-id="a0683-165">While this GridView will allow for a product's price to be adjusted, it won't be using the built-in editing or deleting features from the GridView.</span></span> <span data-ttu-id="a0683-166">Pertanto, è possibile impostare l'elenco a discesa su (nessuno) per ObjectDataSource dell'aggiornamento, inserimento ed eliminazione di schede.</span><span class="sxs-lookup"><span data-stu-id="a0683-166">Therefore, we can set the drop-down list to (None) for the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span>


<span data-ttu-id="a0683-167">[![Configurare l'origine dati per usare la classe ProductsBLL s GetProductsBySupplierID(supplierID) (metodo)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-167">[![Configure the Data Source to use the ProductsBLL Class s GetProductsBySupplierID(supplierID) Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span></span>

<span data-ttu-id="a0683-168">**Figura 9**: Configurare l'origine dati per usare la `ProductsBLL` della classe `GetProductsBySupplierID(supplierID)` metodo ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-168">**Figure 9**: Configure the Data Source to use the `ProductsBLL` Class's `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span></span>


<span data-ttu-id="a0683-169">Poiché il `GetProductsBySupplierID(supplierID)` metodo accetta un parametro di input, la procedura guidata ObjectDataSource richiede per l'origine di questo valore del parametro.</span><span class="sxs-lookup"><span data-stu-id="a0683-169">Since the `GetProductsBySupplierID(supplierID)` method accepts an input parameter, the ObjectDataSource wizard prompts us for the source of this parameter value.</span></span> <span data-ttu-id="a0683-170">Passare il `SupplierID` valore di FormView, impostare l'elenco di riepilogo a discesa Origine parametro al controllo e l'elenco di riepilogo a discesa ControlID a `Suppliers` (l'ID del controllo FormView creato nel passaggio 2).</span><span class="sxs-lookup"><span data-stu-id="a0683-170">To pass in the `SupplierID` value from the FormView, set the Parameter source drop-down list to Control and the ControlID drop-down list to `Suppliers` (the ID of the FormView created in Step 2).</span></span>


<span data-ttu-id="a0683-171">[![Indicare che supplierID parametro deve provenire dal controllo FormView Suppliers](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-171">[![Indicate that the supplierID Parameter Should Come from the Suppliers FormView Control](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span></span>

<span data-ttu-id="a0683-172">**Figura 10**: Indicare che il *`supplierID`* provenienza del parametro il `Suppliers` controllo FormView ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-172">**Figure 10**: Indicate that the *`supplierID`* Parameter Should Come from the `Suppliers` FormView Control ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span></span>


<span data-ttu-id="a0683-173">Dopo aver completato la procedura guidata ObjectDataSource, GridView conterrà un BoundField o CampoCasellaDiControllo per ognuno dei campi dati del prodotto.</span><span class="sxs-lookup"><span data-stu-id="a0683-173">After completing the ObjectDataSource wizard, the GridView will contain a BoundField or CheckBoxField for each of the product's data fields.</span></span> <span data-ttu-id="a0683-174">È possibile ridurre questo per mostrare solo il `ProductName` e `UnitPrice` BoundField insieme al `Discontinued` CampoCasellaDiControllo; inoltre, è possibile formattare il `UnitPrice` BoundField in modo che il testo viene formattato come una valuta.</span><span class="sxs-lookup"><span data-stu-id="a0683-174">Let's trim this down to show just the `ProductName` and `UnitPrice` BoundFields along with the `Discontinued` CheckBoxField; furthermore, let's format the `UnitPrice` BoundField such that its text is formatted as a currency.</span></span> <span data-ttu-id="a0683-175">I GridView e `SuppliersProductsDataSource` markup dichiarativo di ObjectDataSource dovrebbe essere simile al markup seguente:</span><span class="sxs-lookup"><span data-stu-id="a0683-175">Your GridView and `SuppliersProductsDataSource` ObjectDataSource's declarative markup should look similar to the following markup:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample3.aspx)]

<span data-ttu-id="a0683-176">A questo punto seguire l'esercitazione consente di visualizzare un report dettagli/master, consentendo all'utente di scegliere un fornitore di FormView nella parte superiore e per visualizzare i prodotti offerti da tale fornitore tramite il controllo GridView nella parte inferiore.</span><span class="sxs-lookup"><span data-stu-id="a0683-176">At this point our tutorial displays a master/details report, allowing the user to pick a supplier from the FormView at the top and to view the products provided by that supplier through the GridView at the bottom.</span></span> <span data-ttu-id="a0683-177">Figura 11 mostra una cattura di schermata della pagina quando si seleziona il fornitore di commercianti Tokyo da FormView.</span><span class="sxs-lookup"><span data-stu-id="a0683-177">Figure 11 shows a screen shot of this page when selecting the Tokyo Traders supplier from the FormView.</span></span>


<span data-ttu-id="a0683-178">[![I prodotti s fornitore selezionato vengono visualizzati in GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-178">[![The Selected Supplier s Products are Displayed in the GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span></span>

<span data-ttu-id="a0683-179">**Figura 11**: I prodotti di un fornitore selezionato vengono visualizzati in GridView ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-179">**Figure 11**: The Selected Supplier's Products are Displayed in the GridView ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span></span>


## <a name="step-4-creating-dal-and-bll-methods-to-discontinue-all-products-for-a-supplier"></a><span data-ttu-id="a0683-180">Passaggio 4: Creazione di DAL e BLL metodi per interrompere tutti i prodotti per un fornitore</span><span class="sxs-lookup"><span data-stu-id="a0683-180">Step 4: Creating DAL and BLL Methods to Discontinue All Products for a Supplier</span></span>

<span data-ttu-id="a0683-181">Prima di poter aggiungere un pulsante a FormView che, quando si fa clic, interrompe tutti i prodotti del fornitore, prima è necessario aggiungere un metodo a sia DAL e BLL che esegue questa azione.</span><span class="sxs-lookup"><span data-stu-id="a0683-181">Before we can add a Button to the FormView that, when clicked, discontinues all of the supplier's products, we first need to add a method to both the DAL and BLL that performs this action.</span></span> <span data-ttu-id="a0683-182">In particolare, questo metodo verrà denominato `DiscontinueAllProductsForSupplier(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="a0683-182">In particular, this method will be named `DiscontinueAllProductsForSupplier(supplierID)`.</span></span> <span data-ttu-id="a0683-183">Quando si fa clic sul pulsante del controllo FormView, si sarà richiamare questo metodo nel livello di logica di Business, passando di un fornitore selezionato `SupplierID`; il livello BLL chiamerà quindi verso il basso per il metodo di livello di accesso ai dati corrispondente, che genererà un `UPDATE` istruzione per il database interrompe i prodotti del fornitore specificato.</span><span class="sxs-lookup"><span data-stu-id="a0683-183">When the FormView's Button is clicked, we'll invoke this method in the Business Logic Layer, passing in the selected supplier's `SupplierID`; the BLL will then call down to the corresponding Data Access Layer method, which will issue an `UPDATE` statement to the database that discontinues the specified supplier's products.</span></span>

<span data-ttu-id="a0683-184">Come è stato eseguito nelle esercitazioni precedenti, si userà un approccio di dal basso in alto, a partire da creando il metodo DAL, quindi il metodo BLL e infine l'implementazione della funzionalità in una pagina ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a0683-184">As we have done in our previous tutorials, we'll use a bottom-up approach, starting with creating the DAL method, then the BLL method, and finally implementing the functionality in the ASP.NET page.</span></span> <span data-ttu-id="a0683-185">Aprire il `Northwind.xsd` DataSet tipizzata nel `App_Code/DAL` cartella e aggiungere un nuovo metodo per il `ProductsTableAdapter` (fare clic sul `ProductsTableAdapter` e scegliere Aggiungi Query).</span><span class="sxs-lookup"><span data-stu-id="a0683-185">Open the `Northwind.xsd` Typed DataSet in the `App_Code/DAL` folder and add a new method to the `ProductsTableAdapter` (right-click on the `ProductsTableAdapter` and choose Add Query).</span></span> <span data-ttu-id="a0683-186">In questo modo verrà visualizzata la configurazione guidata Query TableAdapter, quale attraverso il processo di aggiunta del nuovo metodo.</span><span class="sxs-lookup"><span data-stu-id="a0683-186">Doing so will bring up the TableAdapter Query Configuration wizard, which walks us through the process of adding the new method.</span></span> <span data-ttu-id="a0683-187">Per iniziare, che indica che il metodo DAL utilizzerà un'istruzione SQL ad hoc.</span><span class="sxs-lookup"><span data-stu-id="a0683-187">Start by indicating that our DAL method will use an ad-hoc SQL statement.</span></span>


<span data-ttu-id="a0683-188">[![Creare il metodo DAL utilizzando un'istruzione SQL Ad Hoc](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-188">[![Create the DAL Method Using an Ad-Hoc SQL Statement](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span></span>

<span data-ttu-id="a0683-189">**Figura 12**: Creare il metodo DAL usando un'istruzione SQL Ad Hoc ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-189">**Figure 12**: Create the DAL Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span></span>


<span data-ttu-id="a0683-190">Successivamente, verrà richiesto di Stati Uniti per quanto riguarda il tipo di query da creare.</span><span class="sxs-lookup"><span data-stu-id="a0683-190">Next, the wizard prompts us as to what type of query to create.</span></span> <span data-ttu-id="a0683-191">Poiché il `DiscontinueAllProductsForSupplier(supplierID)` metodo sarà necessario aggiornare il `Products` tabella di database, l'impostazione di `Discontinued` campo su 1 per tutti i prodotti forniti dall'oggetto specificato *`supplierID`*, è necessario creare una query che aggiorna i dati.</span><span class="sxs-lookup"><span data-stu-id="a0683-191">Since the `DiscontinueAllProductsForSupplier(supplierID)` method will need to update the `Products` database table, setting the `Discontinued` field to 1 for all products provided by the specified *`supplierID`*, we need to create a query that updates data.</span></span>


<span data-ttu-id="a0683-192">[![Scegliere il tipo di Query UPDATE](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-192">[![Choose the UPDATE Query Type](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span></span>

<span data-ttu-id="a0683-193">**Figura 13**: Scegliere il tipo di Query di aggiornamento ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-193">**Figure 13**: Choose the UPDATE Query Type ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span></span>


<span data-ttu-id="a0683-194">La schermata successiva della procedura fornisce la esistente dell'oggetto TableAdapter `UPDATE` istruzione che aggiorna ogni campo definito nel `Products` DataTable.</span><span class="sxs-lookup"><span data-stu-id="a0683-194">The next wizard screen provides the TableAdapter's existing `UPDATE` statement, which updates each of the fields defined in the `Products` DataTable.</span></span> <span data-ttu-id="a0683-195">Sostituire il testo della query con l'istruzione seguente:</span><span class="sxs-lookup"><span data-stu-id="a0683-195">Replace this query text with the following statement:</span></span>

[!code-sql[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample4.sql)]

<span data-ttu-id="a0683-196">Dopo aver immesso la query e facendo clic su Avanti, l'ultima schermata della procedura guidata viene richiesto per l'uso di nome del nuovo metodo `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="a0683-196">After entering this query and clicking Next, the last wizard screen asks for the new method's name use `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="a0683-197">Completare la procedura guidata facendo clic sul pulsante Fine.</span><span class="sxs-lookup"><span data-stu-id="a0683-197">Complete the wizard by clicking the Finish button.</span></span> <span data-ttu-id="a0683-198">Quando si torna alla finestra di Progettazione DataSet verrà visualizzato un nuovo metodo nella `ProductsTableAdapter` denominato `DiscontinueAllProductsForSupplier(@SupplierID)`.</span><span class="sxs-lookup"><span data-stu-id="a0683-198">Upon returning to the DataSet Designer you should see a new method in the `ProductsTableAdapter` named `DiscontinueAllProductsForSupplier(@SupplierID)`.</span></span>


<span data-ttu-id="a0683-199">[![Denominare il nuovo DiscontinueAllProductsForSupplier DAL metodo](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-199">[![Name the New DAL Method DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span></span>

<span data-ttu-id="a0683-200">**Figura 14**: Denominare il nuovo metodo DAL `DiscontinueAllProductsForSupplier` ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-200">**Figure 14**: Name the New DAL Method `DiscontinueAllProductsForSupplier` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span></span>


<span data-ttu-id="a0683-201">Con il `DiscontinueAllProductsForSupplier(supplierID)` metodo creato nel livello di accesso ai dati, l'attività successiva consiste nel creare il `DiscontinueAllProductsForSupplier(supplierID)` metodo nel livello di logica di Business.</span><span class="sxs-lookup"><span data-stu-id="a0683-201">With the `DiscontinueAllProductsForSupplier(supplierID)` method created in the Data Access Layer, our next task is to create the `DiscontinueAllProductsForSupplier(supplierID)` method in the Business Logic Layer.</span></span> <span data-ttu-id="a0683-202">A tale scopo, aprire il `ProductsBLL` file di classe e aggiungere quanto segue:</span><span class="sxs-lookup"><span data-stu-id="a0683-202">To accomplish this, open the `ProductsBLL` class file and add the following:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample5.cs)]

<span data-ttu-id="a0683-203">Questo metodo chiama semplicemente verso il basso per il `DiscontinueAllProductsForSupplier(supplierID)` metodo di DAL, passando l'oggetto fornito *`supplierID`* valore del parametro.</span><span class="sxs-lookup"><span data-stu-id="a0683-203">This method simply calls down to the `DiscontinueAllProductsForSupplier(supplierID)` method in the DAL, passing along the provided *`supplierID`* parameter value.</span></span> <span data-ttu-id="a0683-204">Se si sono verificati eventuali regole di business che consentiti solo i prodotti di un fornitore a essere sospesa in determinate circostanze, tali regole devono essere implementate in questo caso, il livello BLL.</span><span class="sxs-lookup"><span data-stu-id="a0683-204">If there were any business rules that only allowed a supplier's products to be discontinued under certain circumstances, those rules should be implemented here, in the BLL.</span></span>

> [!NOTE]
> <span data-ttu-id="a0683-205">A differenza di `UpdateProduct` esegue l'overload nel `ProductsBLL` (classe), il `DiscontinueAllProductsForSupplier(supplierID)` firma del metodo non include il `DataObjectMethodAttribute` attributo (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span><span class="sxs-lookup"><span data-stu-id="a0683-205">Unlike the `UpdateProduct` overloads in the `ProductsBLL` class, the `DiscontinueAllProductsForSupplier(supplierID)` method signature does not include the `DataObjectMethodAttribute` attribute (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span></span> <span data-ttu-id="a0683-206">Ciò preclude la `DiscontinueAllProductsForSupplier(supplierID)` metodo dall'elenco a discesa della procedura guidata di ObjectDataSource Configura origine dati nella scheda aggiornamenti. Ho ve omesso l'attributo perché verrà chiamato il `DiscontinueAllProductsForSupplier(supplierID)` metodo direttamente da un gestore eventi nella nostra pagina ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a0683-206">This precludes the `DiscontinueAllProductsForSupplier(supplierID)` method from the ObjectDataSource's Configure Data Source wizard's drop-down list in the UPDATE tab. I ve omitted this attribute because we'll be calling the `DiscontinueAllProductsForSupplier(supplierID)` method directly from an event handler in our ASP.NET page.</span></span>


## <a name="step-5-adding-a-discontinue-all-products-button-to-the-formview"></a><span data-ttu-id="a0683-207">Passaggio 5: Aggiunta di un interrompere tutti i prodotti pulsante a FormView</span><span class="sxs-lookup"><span data-stu-id="a0683-207">Step 5: Adding a Discontinue All Products Button to the FormView</span></span>

<span data-ttu-id="a0683-208">Con il `DiscontinueAllProductsForSupplier(supplierID)` metodo BLL e DAL completo, il passaggio finale per l'aggiunta la possibilità di sospendere tutti i prodotti per il fornitore selezionato consiste nell'aggiungere un controllo pulsante Web per il controllo FormView `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a0683-208">With the `DiscontinueAllProductsForSupplier(supplierID)` method in the BLL and DAL complete, the final step for adding the ability to discontinue all products for the selected supplier is to add a Button Web control to the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="a0683-209">Aggiungere il pulsante di annullamento di sotto del numero telefonico con il testo del pulsante, interrompere tutti i prodotti e un `ID` valore della proprietà `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="a0683-209">Let's add such a Button below the supplier's phone number with the button text, Discontinue All Products and an `ID` property value of `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="a0683-210">È possibile aggiungere questo controllo pulsante Web tramite la finestra di progettazione facendo clic sul collegamento Modifica modelli nello smart tag del controllo FormView (vedere la figura 15) o direttamente tramite la sintassi dichiarativa.</span><span class="sxs-lookup"><span data-stu-id="a0683-210">You can add this Button Web control through the Designer by clicking on the Edit Templates link in the FormView's smart tag (see Figure 15), or directly through the declarative syntax.</span></span>


<span data-ttu-id="a0683-211">[![Aggiungere un'interruzione di tutti i prodotti Web pulsante all'ItemTemplate s FormView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-211">[![Add a Discontinue All Products Button Web Control to the FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span></span>

<span data-ttu-id="a0683-212">**Figura 15**: Aggiungere interrompere tutti i prodotti Web un pulsante per il controllo FormView `ItemTemplate` ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-212">**Figure 15**: Add a Discontinue All Products Button Web Control to the FormView's `ItemTemplate` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span></span>


<span data-ttu-id="a0683-213">Quando fa clic sul pulsante per visitare un utente la pagina, un postback previsioni e del controllo FormView [ `ItemCommand` evento](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) viene attivato.</span><span class="sxs-lookup"><span data-stu-id="a0683-213">When the Button is clicked by a user visiting the page, a postback ensues and the FormView's [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) fires.</span></span> <span data-ttu-id="a0683-214">Per eseguire codice personalizzato in risposta a questo pulsante viene fatto clic, è possibile creare un gestore eventi per questo evento.</span><span class="sxs-lookup"><span data-stu-id="a0683-214">To execute custom code in response to this Button being clicked, we can create an event handler for this event.</span></span> <span data-ttu-id="a0683-215">Capire, tuttavia, che il `ItemCommand` ogni volta che viene generato un evento *qualsiasi* si fa clic sul controllo pulsante, LinkButton e ImageButton Web all'interno di FormView.</span><span class="sxs-lookup"><span data-stu-id="a0683-215">Understand, though, that the `ItemCommand` event fires whenever *any* Button, LinkButton, or ImageButton Web control is clicked within the FormView.</span></span> <span data-ttu-id="a0683-216">Ciò significa che quando l'utente si sposti da uno pagina a altro in FormView, il `ItemCommand` viene generato l'evento; stessa operazione quando l'utente fa clic su Nuovo, modificare o eliminare in un controllo FormView che supporta l'inserimento, aggiornamento o eliminazione.</span><span class="sxs-lookup"><span data-stu-id="a0683-216">That means that when the user moves from one page to another in the FormView, the `ItemCommand` event fires; same thing when the user clicks New, Edit, or Delete in a FormView that supports inserting, updating, or deleting.</span></span>

<span data-ttu-id="a0683-217">Poiché il `ItemCommand` viene attivato indipendentemente dal fatto che pulsante, nel caso in cui gestore di è necessario un modo per determinare se interrompere tutti i prodotti è stato fatto clic sul pulsante o se si tratta di un altro pulsante.</span><span class="sxs-lookup"><span data-stu-id="a0683-217">Since the `ItemCommand` fires regardless of what button is clicked, in the event handler we need a way to determine if the Discontinue All Products Button was clicked or if it was some other button.</span></span> <span data-ttu-id="a0683-218">A tale scopo, è possibile impostare il controllo Web Button `CommandName` proprietà su un valore di identificazione.</span><span class="sxs-lookup"><span data-stu-id="a0683-218">To accomplish this, we can set the Button Web control's `CommandName` property to some identifying value.</span></span> <span data-ttu-id="a0683-219">Quando fa clic sul pulsante, ciò `CommandName` valore viene passato il `ItemCommand` gestore eventi, ci permette di determinare se interrompere tutti i prodotti pulsante è stato fatto clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="a0683-219">When the Button is clicked, this `CommandName` value is passed into the `ItemCommand` event handler, enabling us to determine whether the Discontinue All Products Button was the button clicked.</span></span> <span data-ttu-id="a0683-220">Impostare interrompere tutti i prodotti del pulsante `CommandName` proprietà DiscontinueProducts.</span><span class="sxs-lookup"><span data-stu-id="a0683-220">Set the Discontinue All Products Button's `CommandName` property to DiscontinueProducts .</span></span>

<span data-ttu-id="a0683-221">Infine, utilizziamo una finestra di dialogo di conferma dal lato client per assicurarsi che l'utente desideri interrompere i prodotti del fornitore selezionato.</span><span class="sxs-lookup"><span data-stu-id="a0683-221">Finally, let's use a client-side confirm dialog box to ensure that the user really wants to discontinue the selected supplier's products.</span></span> <span data-ttu-id="a0683-222">Come abbiamo visto nel [aggiunta di conferma dal lato Client quando Elimina](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) dell'esercitazione, questo può essere eseguito con un frammento di codice JavaScript.</span><span class="sxs-lookup"><span data-stu-id="a0683-222">As we saw in the [Adding Client-Side Confirmation When Deleting](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) tutorial, this can be accomplished with a bit of JavaScript.</span></span> <span data-ttu-id="a0683-223">In particolare, impostare proprietà OnClientClick del controllo pulsante Web `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span><span class="sxs-lookup"><span data-stu-id="a0683-223">In particular, set the Button Web control's OnClientClick property to `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span></span>

<span data-ttu-id="a0683-224">Dopo aver apportato queste modifiche, la sintassi dichiarativa del controllo FormView dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a0683-224">After making these changes, the FormView's declarative syntax should look like the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample6.aspx)]

<span data-ttu-id="a0683-225">Successivamente, creare un gestore eventi per il controllo FormView `ItemCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="a0683-225">Next, create an event handler for the FormView's `ItemCommand` event.</span></span> <span data-ttu-id="a0683-226">In questo gestore eventi è necessario innanzitutto determinare se interrompere tutti i prodotti è stato fatto clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="a0683-226">In this event handler we need to first determine whether the Discontinue All Products Button was clicked.</span></span> <span data-ttu-id="a0683-227">Se pertanto si desidera creare un'istanza del `ProductsBLL` classe e richiamare relativi `DiscontinueAllProductsForSupplier(supplierID)` metodo, passando il `SupplierID` FormView selezionato:</span><span class="sxs-lookup"><span data-stu-id="a0683-227">If so, we want to create an instance of the `ProductsBLL` class and invoke its `DiscontinueAllProductsForSupplier(supplierID)` method, passing in the `SupplierID` of the selected FormView:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample7.cs)]

<span data-ttu-id="a0683-228">Si noti che il `SupplierID` del fornitore corrente selezionato nella FormView sono accessibili tramite il controllo FormView [ `SelectedValue` proprietà](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0683-228">Note that the `SupplierID` of the current selected supplier in the FormView can be accessed using the FormView's [`SelectedValue` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span></span> <span data-ttu-id="a0683-229">Il `SelectedValue` proprietà restituisce il primo valore chiave dati per il record viene visualizzato nel controllo FormView.</span><span class="sxs-lookup"><span data-stu-id="a0683-229">The `SelectedValue` property returns the first data key value for the record being displayed in the FormView.</span></span> <span data-ttu-id="a0683-230">Il controllo FormView [ `DataKeyNames` proprietà](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), che indica i dati di campi da cui i valori chiave di dati vengono estratti da, è stata impostata automaticamente su `SupplierID` da Visual Studio quando si associa l'oggetto ObjectDataSource a FormView nel passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="a0683-230">The FormView's [`DataKeyNames` property](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), which indicates the data fields from which the data key values are pulled from, was automatically set to `SupplierID` by Visual Studio when binding the ObjectDataSource to the FormView back in Step 2.</span></span>

<span data-ttu-id="a0683-231">Con la `ItemCommand` gestore dell'evento creato, si consiglia di testare la pagina.</span><span class="sxs-lookup"><span data-stu-id="a0683-231">With the `ItemCommand` event handler created, take a moment to test out the page.</span></span> <span data-ttu-id="a0683-232">Individuare il Quesos de Cooperativa supplier 'Las Cabras' (è il quinto fornitore in FormView per me).</span><span class="sxs-lookup"><span data-stu-id="a0683-232">Browse to the Cooperativa de Quesos 'Las Cabras' supplier (it's the fifth supplier in the FormView for me).</span></span> <span data-ttu-id="a0683-233">Il fornitore offre due prodotti, Queso Cabrales e Queso Manchego La Pastora, entrambi *non* non più disponibile.</span><span class="sxs-lookup"><span data-stu-id="a0683-233">This supplier provides two products, Queso Cabrales and Queso Manchego La Pastora, both of which are *not* discontinued.</span></span>

<span data-ttu-id="a0683-234">Si supponga che Cooperativa Germania Quesos 'Las Cabras' esce dall'azienda e pertanto i propri prodotti devono essere sospeso.</span><span class="sxs-lookup"><span data-stu-id="a0683-234">Imagine that Cooperativa de Quesos 'Las Cabras' has gone out of business and therefore its products are to be discontinued.</span></span> <span data-ttu-id="a0683-235">Fare clic su di interrompere tutti i prodotti pulsante.</span><span class="sxs-lookup"><span data-stu-id="a0683-235">Click the Discontinue All Products Button.</span></span> <span data-ttu-id="a0683-236">Verrà visualizzata la finestra di dialogo di conferma dal lato client (vedere la figura 16).</span><span class="sxs-lookup"><span data-stu-id="a0683-236">This will display the client-side confirm dialog box (see Figure 16).</span></span>


<span data-ttu-id="a0683-237">[![Cooperativa de Quesos Las Cabras fornisce due prodotti attivi](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-237">[![Cooperativa de Quesos Las Cabras Supplies Two Active Products](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span></span>

<span data-ttu-id="a0683-238">**Figura 16**: Cooperativa de Quesos Las Cabras fornisce due prodotti attivi ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-238">**Figure 16**: Cooperativa de Quesos Las Cabras Supplies Two Active Products ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span></span>


<span data-ttu-id="a0683-239">Se si fa clic su OK nella finestra di dialogo di conferma dal lato client, l'invio del modulo procederà, causando un postback in cui il controllo FormView `ItemCommand` viene generato l'evento.</span><span class="sxs-lookup"><span data-stu-id="a0683-239">If you click OK in the client-side confirm dialog box, the form submission will proceed, causing a postback in which the FormView's `ItemCommand` event will fire.</span></span> <span data-ttu-id="a0683-240">Il gestore dell'evento è stato creato verrà quindi eseguito, richiamo il `DiscontinueAllProductsForSupplier(supplierID)` metodo e discontinue Queso Cabrales sia Queso Manchego La Pastora prodotti.</span><span class="sxs-lookup"><span data-stu-id="a0683-240">The event handler we created will then execute, invoking the `DiscontinueAllProductsForSupplier(supplierID)` method and discontinuing both the Queso Cabrales and Queso Manchego La Pastora products.</span></span>

<span data-ttu-id="a0683-241">Se è stato disabilitato lo stato di visualizzazione del controllo GridView, il controllo GridView è in corso riassociata nell'archivio dati sottostante a ogni postback e pertanto verrà immediatamente aggiornato per riflettere che questi due prodotti sono ora non più disponibili (vedere Figura 17).</span><span class="sxs-lookup"><span data-stu-id="a0683-241">If you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect that these two products are now discontinued (see Figure 17).</span></span> <span data-ttu-id="a0683-242">Se, tuttavia, non è stato disabilitato lo stato di visualizzazione in GridView, dovrai associare di nuovo manualmente i dati a GridView dopo aver apportato questa modifica.</span><span class="sxs-lookup"><span data-stu-id="a0683-242">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="a0683-243">A tale scopo, è sufficiente effettuare una chiamata a GridView `DataBind()` metodo immediatamente dopo aver richiamato il `DiscontinueAllProductsForSupplier(supplierID)` (metodo).</span><span class="sxs-lookup"><span data-stu-id="a0683-243">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `DiscontinueAllProductsForSupplier(supplierID)` method.</span></span>


<span data-ttu-id="a0683-244">[![Dopo il pulsante interrompere tutti i prodotti, i prodotti di fornitore s vengono aggiornati di conseguenza](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-244">[![After Clicking the Discontinue All Products Button, the Supplier s Products are Updated Accordingly](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span></span>

<span data-ttu-id="a0683-245">**Figura 17**: Dopo il pulsante interrompere tutti i prodotti, i prodotti del fornitore vengono aggiornati di conseguenza ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-245">**Figure 17**: After Clicking the Discontinue All Products Button, the Supplier's Products are Updated Accordingly ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span></span>


## <a name="step-6-creating-an-updateproduct-overload-in-the-business-logic-layer-for-adjusting-a-products-price"></a><span data-ttu-id="a0683-246">Passaggio 6: Creazione di un Overload UpdateProduct nel livello di logica di Business per la regolazione di prezzo del prodotto</span><span class="sxs-lookup"><span data-stu-id="a0683-246">Step 6: Creating an UpdateProduct Overload in the Business Logic Layer for Adjusting a Product's Price</span></span>

<span data-ttu-id="a0683-247">Ad esempio con interrompere tutti i prodotti pulsante in FormView, per aggiungere i pulsanti per aumentare e ridurre il prezzo per un prodotto in GridView è necessario innanzitutto aggiungere i metodi di livello di accesso ai dati e Business Logic Layer appropriati.</span><span class="sxs-lookup"><span data-stu-id="a0683-247">Like with the Discontinue All Products Button in the FormView, in order to add buttons for increasing and decreasing the price for a product in the GridView we need to first add the appropriate Data Access Layer and Business Logic Layer methods.</span></span> <span data-ttu-id="a0683-248">Perché è già disponibile un metodo che aggiorna una riga DAL singolo prodotto, è possibile fornire tale funzionalità mediante la creazione di un nuovo overload per il `UpdateProduct` metodo nel livello BLL.</span><span class="sxs-lookup"><span data-stu-id="a0683-248">Since we already have a method that updates a single product row in the DAL, we can provide such functionality by creating a new overload for the `UpdateProduct` method in the BLL.</span></span>

<span data-ttu-id="a0683-249">Il passato `UpdateProduct` overload è stato acquisito in una combinazione di campi di prodotto come valori di input scalari e sono quindi aggiornati solo i campi per il prodotto specificato.</span><span class="sxs-lookup"><span data-stu-id="a0683-249">Our past `UpdateProduct` overloads have taken in some combination of product fields as scalar input values and have then updated just those fields for the specified product.</span></span> <span data-ttu-id="a0683-250">Per questo overload verrà leggermente diversi da questo standard e passa invece all'interno del prodotto `ProductID` e la percentuale in base a cui si desidera modificare il `UnitPrice` (invece di passare di nuovo, regolato `UnitPrice` stesso).</span><span class="sxs-lookup"><span data-stu-id="a0683-250">For this overload we'll vary slightly from this standard and instead pass in the product's `ProductID` and the percentage by which to adjust the `UnitPrice` (as opposed to passing in the new, adjusted `UnitPrice` itself).</span></span> <span data-ttu-id="a0683-251">Questo approccio semplificherà il codice è necessario scrivere nella classe code-behind della pagina ASP.NET, poiché non c'è da preoccuparsi di determinazione del prodotto corrente `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="a0683-251">This approach will simplify the code we need to write in the ASP.NET page code-behind class, since we don't have to bother with determining the current product's `UnitPrice`.</span></span>

<span data-ttu-id="a0683-252">Il `UpdateProduct` overload per questa esercitazione viene illustrata di seguito:</span><span class="sxs-lookup"><span data-stu-id="a0683-252">The `UpdateProduct` overload for this tutorial is shown below:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample8.cs)]

<span data-ttu-id="a0683-253">Questo overload consente di recuperare informazioni relative al prodotto specificato tramite il campo DAL `GetProductByProductID(productID)` (metodo).</span><span class="sxs-lookup"><span data-stu-id="a0683-253">This overload retrieves information about the specified product through the DAL's `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="a0683-254">Verifica quindi se il prodotto `UnitPrice` viene assegnato un database `NULL` valore.</span><span class="sxs-lookup"><span data-stu-id="a0683-254">It then checks to see whether the product's `UnitPrice` is assigned a database `NULL` value.</span></span> <span data-ttu-id="a0683-255">Se si tratta, il prezzo viene lasciato inalterato.</span><span class="sxs-lookup"><span data-stu-id="a0683-255">If it is, the price is left unaltered.</span></span> <span data-ttu-id="a0683-256">Se, tuttavia, esiste un non -`NULL` `UnitPrice` valore, il metodo aggiorna il prodotto `UnitPrice` base alla percentuale specificata (`unitPriceAdjustmentPercent`).</span><span class="sxs-lookup"><span data-stu-id="a0683-256">If, however, there is a non-`NULL` `UnitPrice` value, the method updates the product's `UnitPrice` by the specified percent (`unitPriceAdjustmentPercent`).</span></span>

## <a name="step-7-adding-the-increase-and-decrease-buttons-to-the-gridview"></a><span data-ttu-id="a0683-257">Passaggio 7: Aggiungere i pulsanti di riduzione e aumento a GridView</span><span class="sxs-lookup"><span data-stu-id="a0683-257">Step 7: Adding the Increase and Decrease Buttons to the GridView</span></span>

<span data-ttu-id="a0683-258">Il controllo GridView e DetailsView, sono entrambi costituiti da una raccolta di campi.</span><span class="sxs-lookup"><span data-stu-id="a0683-258">The GridView (and DetailsView) are both made up of a collection of fields.</span></span> <span data-ttu-id="a0683-259">Oltre a BoundField CheckBoxFields e TemplateFields, ASP.NET include la ButtonField, che, come suggerisce il nome, viene rappresentato come una colonna con un pulsante, LinkButton e ImageButton per ogni riga.</span><span class="sxs-lookup"><span data-stu-id="a0683-259">In addition to BoundFields, CheckBoxFields, and TemplateFields, ASP.NET includes the ButtonField, which, as its name implies, renders as a column with a Button, LinkButton, or ImageButton for each row.</span></span> <span data-ttu-id="a0683-260">Simile a FormView, facendo clic *eventuali* pulsante all'interno di GridView i pulsanti di spostamento, modifica o eliminazione pulsanti, pulsanti di ordinamento e così via determina un postback e genera il controllo GridView [ `RowCommand` evento](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0683-260">Similar to the FormView, clicking *any* button within the GridView paging buttons, Edit or Delete buttons, sorting buttons, and so on causes a postback and raises the GridView's [`RowCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span></span>

<span data-ttu-id="a0683-261">Il ButtonField ha un `CommandName` proprietà che assegna il valore specificato per ognuno dei relativi pulsanti `CommandName` proprietà.</span><span class="sxs-lookup"><span data-stu-id="a0683-261">The ButtonField has a `CommandName` property that assigns the specified value to each of its Buttons `CommandName` properties.</span></span> <span data-ttu-id="a0683-262">Come con FormView, il `CommandName` valore viene usato dal `RowCommand` gestore dell'evento per determinare quale pulsante è stato fatto clic.</span><span class="sxs-lookup"><span data-stu-id="a0683-262">Like with the FormView, the `CommandName` value is used by the `RowCommand` event handler to determine which button was clicked.</span></span>

<span data-ttu-id="a0683-263">Aggiungere due nuove ButtonFields a GridView, uno con un testo del pulsante Price + 10% e l'altro con il testo del prezzo da -10%.</span><span class="sxs-lookup"><span data-stu-id="a0683-263">Let's add two new ButtonFields to the GridView, one with a button text Price +10% and the other with the text Price -10%.</span></span> <span data-ttu-id="a0683-264">Per aggiungere questi ButtonFields, fare clic sul collegamento Modifica colonne dallo smart tag del controllo GridView, selezionare il tipo di campo ButtonField dall'elenco in alto a sinistra e fare clic sul pulsante Aggiungi.</span><span class="sxs-lookup"><span data-stu-id="a0683-264">To add these ButtonFields, click on the Edit Columns link from the GridView's smart tag, select the ButtonField field type from the list in the upper left and click the Add button.</span></span>


![Aggiungere due ButtonFields a GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image48.png)

<span data-ttu-id="a0683-266">**Figura 18**: Aggiungere due ButtonFields a GridView</span><span class="sxs-lookup"><span data-stu-id="a0683-266">**Figure 18**: Add Two ButtonFields to the GridView</span></span>


<span data-ttu-id="a0683-267">Spostare il due ButtonFields, in modo che vengano visualizzati come i primi due campi di GridView.</span><span class="sxs-lookup"><span data-stu-id="a0683-267">Move the two ButtonFields so that they appear as the first two GridView fields.</span></span> <span data-ttu-id="a0683-268">Successivamente, impostare il `Text` le proprietà di questi due ButtonFields a + 10% dei prezzi e prezzo -10% e il `CommandName` proprietà IncreasePrice e DecreasePrice, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="a0683-268">Next, set the `Text` properties of these two ButtonFields to Price +10% and Price -10% and the `CommandName` properties to IncreasePrice and DecreasePrice, respectively.</span></span> <span data-ttu-id="a0683-269">Per impostazione predefinita, un ButtonField come la relativa colonna di pulsanti LinkButton.</span><span class="sxs-lookup"><span data-stu-id="a0683-269">By default, a ButtonField renders its column of buttons as LinkButtons.</span></span> <span data-ttu-id="a0683-270">Ciò può essere modificato, tuttavia, tramite il ButtonField [ `ButtonType` proprietà](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0683-270">This can be changed, however, through the ButtonField's [`ButtonType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span></span> <span data-ttu-id="a0683-271">È possibile avere questi due ButtonFields sottoposto a rendering come pulsanti regolari push; Pertanto, impostare il `ButtonType` proprietà `Button`.</span><span class="sxs-lookup"><span data-stu-id="a0683-271">Let's have these two ButtonFields rendered as regular push buttons; therefore, set the `ButtonType` property to `Button`.</span></span> <span data-ttu-id="a0683-272">Figura 19 mostra i campi nella finestra di dialogo dopo aver apportate queste modifiche; Dopo che è il markup dichiarativo del controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="a0683-272">Figure 19 shows the Fields dialog box after these changes have been made; following that is the GridView's declarative markup.</span></span>


![Configurare il testo ButtonFields CommandName e proprietà ButtonType](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image49.png)

<span data-ttu-id="a0683-274">**Figura 19**: Configurare il ButtonFields `Text`, `CommandName`, e `ButtonType` proprietà</span><span class="sxs-lookup"><span data-stu-id="a0683-274">**Figure 19**: Configure the ButtonFields `Text`, `CommandName`, and `ButtonType` Properties</span></span>


[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample9.aspx)]

<span data-ttu-id="a0683-275">Con questi ButtonFields creato, il passaggio finale consiste nel creare un gestore eventi per il controllo GridView `RowCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="a0683-275">With these ButtonFields created, the final step is to create an event handler for the GridView's `RowCommand` event.</span></span> <span data-ttu-id="a0683-276">Questo gestore eventi, se è stata attivata perché il prezzo + 10 sono stati visitato i pulsanti di prezzo tra -10% o %, deve determinare il `ProductID` per la riga sul cui pulsante è stato fatto clic e quindi richiamare il `ProductsBLL` della classe `UpdateProduct` , passando il `UnitPrice` regolazione percentuale insieme al `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="a0683-276">This event handler, if fired because either the Price +10% or Price -10% buttons were clicked, needs to determine the `ProductID` for the row whose button was clicked and then invoke the `ProductsBLL` class's `UpdateProduct` method, passing in the appropriate `UnitPrice` percentage adjustment along with the `ProductID`.</span></span> <span data-ttu-id="a0683-277">Il codice seguente esegue queste attività:</span><span class="sxs-lookup"><span data-stu-id="a0683-277">The following code performs these tasks:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample10.cs)]

<span data-ttu-id="a0683-278">Per determinare il `ProductID` per la riga il cui prezzo + 10 è stato fatto clic sul pulsante di prezzo tra -10% o %, è necessario consultare il controllo GridView `DataKeys` raccolta.</span><span class="sxs-lookup"><span data-stu-id="a0683-278">In order to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we need to consult the GridView's `DataKeys` collection.</span></span> <span data-ttu-id="a0683-279">Questa raccolta contiene i valori dei campi specificati nel `DataKeyNames` proprietà per ogni riga GridView.</span><span class="sxs-lookup"><span data-stu-id="a0683-279">This collection holds the values of the fields specified in the `DataKeyNames` property for each GridView row.</span></span> <span data-ttu-id="a0683-280">Poiché il controllo GridView `DataKeyNames` proprietà è stata impostata su ProductID da Visual Studio durante l'associazione ObjectDataSource di GridView `DataKeys(rowIndex).Value` fornisce le `ProductID` per l'oggetto specificato *rowIndex*.</span><span class="sxs-lookup"><span data-stu-id="a0683-280">Since the GridView's `DataKeyNames` property was set to ProductID by Visual Studio when binding the ObjectDataSource to the GridView, `DataKeys(rowIndex).Value` provides the `ProductID` for the specified *rowIndex*.</span></span>

<span data-ttu-id="a0683-281">Il ButtonField passa automaticamente il *rowIndex* della riga di cui è stato fatto clic sul cui pulsante tramite il `e.CommandArgument` parametro.</span><span class="sxs-lookup"><span data-stu-id="a0683-281">The ButtonField automatically passes in the *rowIndex* of the row whose button was clicked through the `e.CommandArgument` parameter.</span></span> <span data-ttu-id="a0683-282">Pertanto, per determinare il `ProductID` per la riga il cui prezzo + 10 è stato fatto clic sul pulsante di prezzo tra -10% o %, usiamo: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span><span class="sxs-lookup"><span data-stu-id="a0683-282">Therefore, to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we use: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span></span>

<span data-ttu-id="a0683-283">Come con il pulsante di interrompere tutti i prodotti, se è stato disabilitato lo stato di visualizzazione del controllo GridView, il controllo GridView è in corso riassociata nell'archivio dati sottostante a ogni postback e pertanto verrà immediatamente aggiornato per riflettere una variazione di prezzo che viene eseguita da facendo clic su uno dei pulsanti.</span><span class="sxs-lookup"><span data-stu-id="a0683-283">As with the Discontinue All Products button, if you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect a price change that occurs from clicking either of the buttons.</span></span> <span data-ttu-id="a0683-284">Se, tuttavia, non è stato disabilitato lo stato di visualizzazione in GridView, dovrai associare di nuovo manualmente i dati a GridView dopo aver apportato questa modifica.</span><span class="sxs-lookup"><span data-stu-id="a0683-284">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="a0683-285">A tale scopo, è sufficiente effettuare una chiamata a GridView `DataBind()` metodo immediatamente dopo aver richiamato il `UpdateProduct` (metodo).</span><span class="sxs-lookup"><span data-stu-id="a0683-285">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `UpdateProduct` method.</span></span>

<span data-ttu-id="a0683-286">Figura 20 è illustrata la pagina quando si visualizzano i prodotti offerti da nonna Kelly Homestead.</span><span class="sxs-lookup"><span data-stu-id="a0683-286">Figure 20 shows the page when viewing the products provided by Grandma Kelly's Homestead.</span></span> <span data-ttu-id="a0683-287">Figura 21 vengono illustrati i risultati dopo il prezzo + 10% pulsante è stato fatto clic due volte per Boysenberry Spread della nonna e il pulsante di prezzo tra -10% di una volta per irlandese birra.</span><span class="sxs-lookup"><span data-stu-id="a0683-287">Figure 21 shows the results after the Price +10% button has been clicked twice for Grandma's Boysenberry Spread and the Price -10% button once for Northwoods Cranberry Sauce.</span></span>


<span data-ttu-id="a0683-288">[![Il controllo GridView include Price + 10% e i pulsanti di prezzo tra -10%](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-288">[![The GridView Includes Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span></span>

<span data-ttu-id="a0683-289">**Figura 20**: Il prezzo include GridView + 10% e prezzo -10% pulsanti ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-289">**Figure 20**: The GridView Includes Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span></span>


<span data-ttu-id="a0683-290">[![I prezzi per il primo e il terzo di prodotto sono stati aggiornati tramite il prezzo + 10% e i pulsanti di prezzo tra -10%](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="a0683-290">[![The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span></span>

<span data-ttu-id="a0683-291">**Figura 21**: I prezzi per il primo e il terzo prodotto sono stati aggiornati tramite il prezzo + 10% e prezzo -10% pulsanti ([fare clic per visualizzare l'immagine con dimensioni normali](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span><span class="sxs-lookup"><span data-stu-id="a0683-291">**Figure 21**: The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a0683-292">Il controllo GridView e DetailsView, può anche avere pulsanti, i controlli LinkButton o ImageButtons aggiunto al loro TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="a0683-292">The GridView (and DetailsView) can also have Buttons, LinkButtons, or ImageButtons added to their TemplateFields.</span></span> <span data-ttu-id="a0683-293">Come con i BoundField, questi pulsanti, quando si fa clic, causerà un postback, generazione di GridView `RowCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="a0683-293">As with the BoundField, these Buttons, when clicked, will induce a postback, raising the GridView's `RowCommand` event.</span></span> <span data-ttu-id="a0683-294">Quando aggiunta di pulsanti in un TemplateField, tuttavia, il pulsante `CommandArgument` non viene impostata automaticamente per l'indice della riga come succede quando si usa ButtonFields.</span><span class="sxs-lookup"><span data-stu-id="a0683-294">When adding buttons in a TemplateField, however, the Button's `CommandArgument` is not automatically set to the index of the row as it is when using ButtonFields.</span></span> <span data-ttu-id="a0683-295">Se è necessario determinare l'indice di riga del pulsante su cui è stato fatto clic all'interno di `RowCommand` gestore eventi, è necessario impostare manualmente il pulsante `CommandArgument` proprietà nella relativa sintassi dichiarativa all'interno di TemplateField, usando il codice, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="a0683-295">If you need to determine the row index of the button that was clicked within the `RowCommand` event handler, you'll need to manually set the Button's `CommandArgument` property in its declarative syntax within the TemplateField, using code like:</span></span>  
> <span data-ttu-id="a0683-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span><span class="sxs-lookup"><span data-stu-id="a0683-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span></span>


## <a name="summary"></a><span data-ttu-id="a0683-297">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="a0683-297">Summary</span></span>

<span data-ttu-id="a0683-298">Possono includere i controlli GridView, DetailsView e FormView tutti i pulsanti, i controlli LinkButton o ImageButtons.</span><span class="sxs-lookup"><span data-stu-id="a0683-298">The GridView, DetailsView, and FormView controls all can include Buttons, LinkButtons, or ImageButtons.</span></span> <span data-ttu-id="a0683-299">Questi pulsanti, quando si fa clic, possono causare un postback e generare il `ItemCommand` eventi nei controlli DetailsView e FormView e `RowCommand` evento nel GridView.</span><span class="sxs-lookup"><span data-stu-id="a0683-299">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event in the FormView and DetailsView controls and the `RowCommand` event in the GridView.</span></span> <span data-ttu-id="a0683-300">Questi controlli Web dei dati dispongono di funzionalità incorporate per gestire operazioni frequenti relative ai comandi, ad esempio l'eliminazione o modifica di record.</span><span class="sxs-lookup"><span data-stu-id="a0683-300">These data Web controls have built-in functionality to handle common command-related actions, such as deleting or editing records.</span></span> <span data-ttu-id="a0683-301">Tuttavia, è anche possibile usare i pulsanti che, quando si fa clic, rispondere con l'esecuzione del nostro codice personalizzato.</span><span class="sxs-lookup"><span data-stu-id="a0683-301">However, we can also use buttons that, when clicked, respond with executing our own custom code.</span></span>

<span data-ttu-id="a0683-302">A tale scopo, è necessario creare un gestore eventi per il `ItemCommand` o `RowCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="a0683-302">To accomplish this, we need to create an event handler for the `ItemCommand` or `RowCommand` event.</span></span> <span data-ttu-id="a0683-303">In questo gestore dell'evento, controlliamo dapprima in ingresso `CommandName` valore per determinare quale pulsante è stato fatto clic, quindi intraprendere l'azione personalizzata appropriata.</span><span class="sxs-lookup"><span data-stu-id="a0683-303">In this event handler we first check the incoming `CommandName` value to determine which button was clicked and then take appropriate custom action.</span></span> <span data-ttu-id="a0683-304">In questa esercitazione è stato illustrato come usare i pulsanti e ButtonFields per interrompere tutti i prodotti per un fornitore specificato o per aumentare o diminuire il prezzo di un prodotto specifico del 10%.</span><span class="sxs-lookup"><span data-stu-id="a0683-304">In this tutorial we saw how to use buttons and ButtonFields to discontinue all products for a specified supplier or to increase or decrease the price of a particular product by 10%.</span></span>

<span data-ttu-id="a0683-305">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="a0683-305">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a0683-306">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="a0683-306">About the Author</span></span>

<span data-ttu-id="a0683-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette libri e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha collaborato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="a0683-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a0683-308">Lavora come un consulente, formatore e autore.</span><span class="sxs-lookup"><span data-stu-id="a0683-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a0683-309">Il suo ultimo libro si intitola [ *Sams Teach Yourself ASP.NET 2.0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a0683-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a0683-310">È possibile contattarlo al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a0683-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a0683-311">o sul suo blog, che è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a0683-311">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="a0683-312">avanti</span><span class="sxs-lookup"><span data-stu-id="a0683-312">Next</span></span>](adding-and-responding-to-buttons-to-a-gridview-vb.md)
