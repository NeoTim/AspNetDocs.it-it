---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: Filtro master/dettagli con un oggetto DropDownListC#() | Microsoft Docs
author: rick-anderson
description: In questa esercitazione verrà illustrato come visualizzare i record master in un controllo DropDownList e i dettagli dell'elemento di elenco selezionato in GridView.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: 3ec549f9da7a2b3a021e77827f0039e6ae60b5c5
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/28/2019
ms.locfileid: "74615831"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="63139-103">Applicazione di filtri al report master o di dettaglio usando un controllo DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="63139-103">Master/Detail Filtering With a DropDownList (C#)</span></span>

<span data-ttu-id="63139-104">di [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="63139-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="63139-105">[Scaricare l'app di esempio](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) o [scaricare il file PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="63139-105">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="63139-106">In questa esercitazione verrà illustrato come visualizzare i record master in un controllo DropDownList e i dettagli dell'elemento di elenco selezionato in GridView.</span><span class="sxs-lookup"><span data-stu-id="63139-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="63139-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="63139-107">Introduction</span></span>

<span data-ttu-id="63139-108">Un tipo comune di report è il *report master/dettagli*, in cui il report inizia mostrando un set di record "Master".</span><span class="sxs-lookup"><span data-stu-id="63139-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="63139-109">L'utente può quindi eseguire il drill-down in uno dei record master, visualizzando quindi i "dettagli" del record master.</span><span class="sxs-lookup"><span data-stu-id="63139-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="63139-110">I report master/dettagli rappresentano la scelta ideale per la visualizzazione di relazioni uno-a-molti, ad esempio un report che Mostra tutte le categorie e consente quindi a un utente di selezionare una determinata categoria e visualizzare i prodotti associati.</span><span class="sxs-lookup"><span data-stu-id="63139-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="63139-111">Inoltre, i report master/dettagli sono utili per visualizzare informazioni dettagliate da tabelle in particolare "wide" (quelle con numerose colonne).</span><span class="sxs-lookup"><span data-stu-id="63139-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="63139-112">Ad esempio, il livello "Master" di un report master/dettagli può mostrare solo il nome del prodotto e il prezzo unitario dei prodotti nel database e il drill-down in un prodotto specifico indicherà i campi di prodotto aggiuntivi (categoria, fornitore, quantità per unità e così via).</span><span class="sxs-lookup"><span data-stu-id="63139-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="63139-113">È possibile implementare un report master/detail in molti modi.</span><span class="sxs-lookup"><span data-stu-id="63139-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="63139-114">In questa e nelle tre esercitazioni successive verranno esaminati diversi report master/dettagli.</span><span class="sxs-lookup"><span data-stu-id="63139-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="63139-115">In questa esercitazione verrà illustrato come visualizzare i record master in un [controllo DropDownList](https://msdn.microsoft.com/library/dtx91y0z.aspx) e i dettagli dell'elemento di elenco selezionato in GridView.</span><span class="sxs-lookup"><span data-stu-id="63139-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="63139-116">In particolare, in questa esercitazione viene elencata la categoria e le informazioni sul prodotto.</span><span class="sxs-lookup"><span data-stu-id="63139-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="63139-117">Passaggio 1: visualizzazione delle categorie in un oggetto DropDownList</span><span class="sxs-lookup"><span data-stu-id="63139-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="63139-118">Il report master/dettagli elenca le categorie in un oggetto DropDownList, con i prodotti dell'elemento di elenco selezionati visualizzati più in basso nella pagina in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="63139-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="63139-119">La prima attività, quindi, consiste nel fare in modo che le categorie vengano visualizzate in un oggetto DropDownList.</span><span class="sxs-lookup"><span data-stu-id="63139-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="63139-120">Aprire la pagina `FilterByDropDownList.aspx` nella cartella `Filtering`, trascinare un oggetto DropDownList dalla casella degli strumenti nella finestra di progettazione della pagina e impostare la relativa proprietà `ID` su `Categories`.</span><span class="sxs-lookup"><span data-stu-id="63139-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="63139-121">Fare quindi clic sul collegamento Scegli origine dati dallo smart tag di DropDownList.</span><span class="sxs-lookup"><span data-stu-id="63139-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="63139-122">Verrà visualizzata la configurazione guidata origine dati.</span><span class="sxs-lookup"><span data-stu-id="63139-122">This will display the Data Source Configuration wizard.</span></span>

<span data-ttu-id="63139-123">[![specificare l'origine dati dell'oggetto DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="63139-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="63139-124">**Figura 1**: specificare l'origine dati dell'oggetto DropDownList ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="63139-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>

<span data-ttu-id="63139-125">Scegliere di aggiungere un nuovo ObjectDataSource denominato `CategoriesDataSource` che richiama il metodo `GetCategories()` della classe `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="63139-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>

<span data-ttu-id="63139-126">[![aggiungere un nuovo ObjectDataSource denominato CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="63139-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="63139-127">**Figura 2**: aggiungere un nuovo ObjectDataSource denominato `CategoriesDataSource` ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="63139-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>

<span data-ttu-id="63139-128">[![scegliere di utilizzare la classe CategoriesBLL](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="63139-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="63139-129">**Figura 3**: scegliere di usare la classe `CategoriesBLL` ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="63139-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>

<span data-ttu-id="63139-130">[![configurare ObjectDataSource per l'utilizzo del metodo GetCategories ()](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="63139-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="63139-131">**Figura 4**: configurare ObjectDataSource per l'uso del metodo `GetCategories()` ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="63139-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>

<span data-ttu-id="63139-132">Dopo la configurazione di ObjectDataSource, è ancora necessario specificare il campo origine dati da visualizzare in DropDownList e quale deve essere associato come valore per l'elemento elenco.</span><span class="sxs-lookup"><span data-stu-id="63139-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="63139-133">Fare in modo che il campo `CategoryName` sia visualizzato e `CategoryID` come valore per ogni elemento dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="63139-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="63139-134">[![fare in modo che DropDownList visualizzi il campo CategoryName e usare CategoryID come valore](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="63139-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="63139-135">**Figura 5**: fare in modo che l'oggetto DropDownList visualizzi il campo `CategoryName` e usare `CategoryID` come valore ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="63139-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>

<span data-ttu-id="63139-136">A questo punto è presente un controllo DropDownList popolato con i record della tabella `Categories` (tutti eseguiti in circa sei secondi).</span><span class="sxs-lookup"><span data-stu-id="63139-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="63139-137">La figura 6 Mostra lo stato di avanzamento fino a questo punto quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="63139-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="63139-138">[![elenco A discesa elenca le categorie correnti](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="63139-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="63139-139">**Figura 6**: nell'elenco a discesa sono elencate le categorie correnti ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="63139-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>

## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="63139-140">Passaggio 2: aggiunta dei prodotti GridView</span><span class="sxs-lookup"><span data-stu-id="63139-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="63139-141">L'ultimo passaggio del report master/dettagli consiste nell'elencare i prodotti associati alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="63139-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="63139-142">A tale scopo, aggiungere un controllo GridView alla pagina e creare un nuovo ObjectDataSource denominato `productsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="63139-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="63139-143">Fare in modo che il controllo `productsDataSource` Abbatti i dati dal metodo `GetProductsByCategoryID(categoryID)` della classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="63139-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="63139-144">[![selezionare il metodo GetProductsByCategoryID (categoryID)](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="63139-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="63139-145">**Figura 7**: selezionare il metodo `GetProductsByCategoryID(categoryID)` ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="63139-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>

<span data-ttu-id="63139-146">Dopo aver scelto questo metodo, la procedura guidata di ObjectDataSource richiede il valore per il parametro *`categoryID`* del metodo.</span><span class="sxs-lookup"><span data-stu-id="63139-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="63139-147">Per utilizzare il valore dell'elemento `categories` DropDownList selezionato, impostare l'origine del parametro su Control e il ControlID su `Categories`.</span><span class="sxs-lookup"><span data-stu-id="63139-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="63139-148">[![impostare il parametro categoryID sul valore del DropDownList categorie](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="63139-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="63139-149">**Figura 8**: impostare il parametro *`categoryID`* sul valore dell'oggetto DropDownList `Categories` ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="63139-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>

<span data-ttu-id="63139-150">Esaminare lo stato di avanzamento in un browser.</span><span class="sxs-lookup"><span data-stu-id="63139-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="63139-151">Quando si visita la pagina, vengono visualizzati i prodotti appartenenti alla categoria selezionata (bevande), come illustrato nella figura 9, ma la modifica del DropDownList non aggiorna i dati.</span><span class="sxs-lookup"><span data-stu-id="63139-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="63139-152">Questo perché è necessario che venga eseguito un postback per l'aggiornamento di GridView.</span><span class="sxs-lookup"><span data-stu-id="63139-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="63139-153">A tale scopo, sono disponibili due opzioni (nessuna delle quali richiede la scrittura di codice):</span><span class="sxs-lookup"><span data-stu-id="63139-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="63139-154">**Impostare la**[proprietà AutoPostBack](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)di DropDownList categorie**su true.**</span><span class="sxs-lookup"><span data-stu-id="63139-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="63139-155">Per eseguire questa operazione, selezionare l'opzione Abilita AutoPostBack nello smart tag di DropDownList. Verrà attivato un postback ogni volta che l'utente seleziona l'elemento dell'oggetto DropDownList modificato.</span><span class="sxs-lookup"><span data-stu-id="63139-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="63139-156">Pertanto, quando l'utente seleziona una nuova categoria da DropDownList, sarà seguito da un postback e il controllo GridView verrà aggiornato con i prodotti per la categoria appena selezionata.</span><span class="sxs-lookup"><span data-stu-id="63139-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="63139-157">(Questo è l'approccio usato in questa esercitazione).</span><span class="sxs-lookup"><span data-stu-id="63139-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="63139-158">**Aggiungere un controllo Web Button accanto al controllo DropDownList.**</span><span class="sxs-lookup"><span data-stu-id="63139-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="63139-159">Impostarne la proprietà `Text` su Refresh o un valore simile.</span><span class="sxs-lookup"><span data-stu-id="63139-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="63139-160">Con questo approccio, l'utente dovrà selezionare una nuova categoria e quindi fare clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="63139-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="63139-161">Se si fa clic sul pulsante, viene generato un postback e viene aggiornato GridView per elencare i prodotti della categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="63139-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="63139-162">Le figure 9 e 10 illustrano il report master/dettagli in azione.</span><span class="sxs-lookup"><span data-stu-id="63139-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="63139-163">[![quando si visita la pagina per la prima volta, vengono visualizzati i prodotti Beverage](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="63139-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="63139-164">**Figura 9**: la prima volta che si visita la pagina, vengono visualizzati i prodotti Beverage ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="63139-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>

<span data-ttu-id="63139-165">[![la selezione di un nuovo prodotto (produzione) causa automaticamente un PostBack, aggiornando GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="63139-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="63139-166">**Figura 10**: la selezione di un nuovo prodotto (produzione) causa automaticamente un postback, aggiornando GridView ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="63139-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="63139-167">Aggiunta di una voce di elenco "--Choose a Category--"</span><span class="sxs-lookup"><span data-stu-id="63139-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="63139-168">Per la prima volta che si visita la pagina `FilterByDropDownList.aspx`, per impostazione predefinita viene selezionata la prima voce di elenco (bevande) del controllo DropDownList delle categorie, che mostra i prodotti Beverage in GridView.</span><span class="sxs-lookup"><span data-stu-id="63139-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="63139-169">Invece di visualizzare i prodotti della prima categoria, potrebbe essere necessario selezionare un elemento DropDownList con una voce simile a "--Choose a Category--".</span><span class="sxs-lookup"><span data-stu-id="63139-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="63139-170">Per aggiungere un nuovo elemento elenco al DropDownList, passare al Finestra Proprietà e fare clic sui puntini di sospensione nella proprietà `Items`.</span><span class="sxs-lookup"><span data-stu-id="63139-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="63139-171">Aggiungere una nuova voce di elenco con la `Text` "--scegliere una categoria--" e il `-1``Value`.</span><span class="sxs-lookup"><span data-stu-id="63139-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>

<span data-ttu-id="63139-172">[![Aggiungi a--scegliere una categoria--elemento elenco](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="63139-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="63139-173">**Figura 11**: aggiungere una--scegliere una categoria--elemento elenco ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="63139-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>

<span data-ttu-id="63139-174">In alternativa, è possibile aggiungere l'elemento dell'elenco aggiungendo il markup seguente al DropDownList:</span><span class="sxs-lookup"><span data-stu-id="63139-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="63139-175">Inoltre, è necessario impostare la `AppendDataBoundItems` del controllo DropDownList su true perché quando le categorie sono associate a DropDownList da ObjectDataSource, sovrascriveranno gli elementi dell'elenco aggiunti manualmente se `AppendDataBoundItems` non è true.</span><span class="sxs-lookup"><span data-stu-id="63139-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>

![Impostare la proprietà AppendDataBoundItems su true](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="63139-177">**Figura 12**: impostare la proprietà `AppendDataBoundItems` su true</span><span class="sxs-lookup"><span data-stu-id="63139-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="63139-178">Dopo queste modifiche, quando si visita la pagina "--scegliere una categoria--" è selezionata e non viene visualizzato alcun prodotto.</span><span class="sxs-lookup"><span data-stu-id="63139-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>

<span data-ttu-id="63139-179">[![al caricamento iniziale della pagina non vengono visualizzati prodotti](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="63139-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="63139-180">**Figura 13**: nel caricamento iniziale della pagina non viene visualizzato alcun prodotto ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="63139-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>

<span data-ttu-id="63139-181">Il motivo per cui non viene visualizzato alcun prodotto quando è selezionato l'elemento dell'elenco "--Choose a Category--" è perché il relativo valore è `-1` e non sono presenti prodotti nel database con una `CategoryID` di `-1`.</span><span class="sxs-lookup"><span data-stu-id="63139-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="63139-182">Se questo è il comportamento desiderato, è possibile procedere in questo momento.</span><span class="sxs-lookup"><span data-stu-id="63139-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="63139-183">Se tuttavia si desidera visualizzare *tutte* le categorie quando viene selezionata l'opzione "--Choose a Category--", tornare alla classe `ProductsBLL` e personalizzare il `GetProductsByCategoryID(categoryID)` metodo in modo che richiami il metodo `GetProducts()` se il parametro passato nel *`categoryID`* è minore di zero:</span><span class="sxs-lookup"><span data-stu-id="63139-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="63139-184">La tecnica usata in questo esempio è simile all'approccio usato per visualizzare tutti i fornitori nell'esercitazione [sui parametri dichiarativi](../basic-reporting/declarative-parameters-cs.md) , sebbene in questo esempio venga usato il valore `-1` per indicare che tutti i record devono essere recuperati anziché `null`.</span><span class="sxs-lookup"><span data-stu-id="63139-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="63139-185">Questo perché il parametro *`categoryID`* del metodo `GetProductsByCategoryID(categoryID)` prevede che venga passato un valore integer, mentre nell'esercitazione sui parametri dichiarativi è stato passato un parametro di input di stringa.</span><span class="sxs-lookup"><span data-stu-id="63139-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="63139-186">Nella figura 14 viene illustrata una schermata di `FilterByDropDownList.aspx` quando è selezionata l'opzione "--Scegli una categoria--".</span><span class="sxs-lookup"><span data-stu-id="63139-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="63139-187">In questo caso, tutti i prodotti vengono visualizzati per impostazione predefinita e l'utente può restringere lo schermo scegliendo una categoria specifica.</span><span class="sxs-lookup"><span data-stu-id="63139-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>

<span data-ttu-id="63139-188">[![tutti i prodotti sono ora elencati per impostazione predefinita](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="63139-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="63139-189">**Figura 14**: tutti i prodotti sono ora elencati per impostazione predefinita ([fare clic per visualizzare l'immagine con dimensioni complete](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="63139-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>

## <a name="summary"></a><span data-ttu-id="63139-190">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="63139-190">Summary</span></span>

<span data-ttu-id="63139-191">Quando si visualizzano dati correlati gerarchicamente, spesso è utile presentare i dati utilizzando i report master/dettagli, da cui l'utente può iniziare a esaminare i dati dalla parte superiore della gerarchia ed eseguire il drill-down nei dettagli.</span><span class="sxs-lookup"><span data-stu-id="63139-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="63139-192">In questa esercitazione è stata esaminata la creazione di un semplice report master/dettagli che mostra i prodotti di una categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="63139-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="63139-193">Questa operazione è stata eseguita utilizzando un oggetto DropDownList per l'elenco di categorie e un GridView per i prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="63139-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="63139-194">Nell' [esercitazione successiva](master-detail-filtering-with-two-dropdownlists-cs.md) l'interfaccia DropDownList verrà rilevata un passo avanti, usando due DropDownList.</span><span class="sxs-lookup"><span data-stu-id="63139-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="63139-195">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="63139-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="63139-196">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="63139-196">About the Author</span></span>

<span data-ttu-id="63139-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette ASP/ASP. NET Books e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), collabora con le tecnologie Web Microsoft a partire da 1998.</span><span class="sxs-lookup"><span data-stu-id="63139-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="63139-198">Scott lavora come consulente, trainer e writer indipendenti.</span><span class="sxs-lookup"><span data-stu-id="63139-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="63139-199">Il suo ultimo libro è [*Sams Teach Yourself ASP.NET 2,0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="63139-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="63139-200">Può essere raggiunto in [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="63139-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="63139-201">o tramite il suo Blog, disponibile in [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="63139-201">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="63139-202">avanti</span><span class="sxs-lookup"><span data-stu-id="63139-202">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)
