---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: Master/dettagli filtro usando un controllo DropDownList (c#) | Microsoft Docs
author: rick-anderson
description: In questa esercitazione si noterà come visualizzare i record master in un controllo DropDownList e i dettagli dell'elemento di elenco selezionato in un controllo GridView.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: 37ef5a31d1715885d06129fc2ef8f7aef7923741
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2019
ms.locfileid: "65131996"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="b66e0-103">Applicazione di filtri al report master o di dettaglio usando un controllo DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="b66e0-103">Master/Detail Filtering With a DropDownList (C#)</span></span>

<span data-ttu-id="b66e0-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b66e0-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b66e0-105">[Scaricare l'App di esempio](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) o [Scarica il PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="b66e0-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="b66e0-106">In questa esercitazione si noterà come visualizzare i record master in un controllo DropDownList e i dettagli dell'elemento di elenco selezionato in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="b66e0-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="b66e0-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="b66e0-107">Introduction</span></span>

<span data-ttu-id="b66e0-108">Un tipo comune di report è il *master-details report*, in cui il report inizia con la visualizzazione di alcuni set di record "master".</span><span class="sxs-lookup"><span data-stu-id="b66e0-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="b66e0-109">L'utente può quindi il drill-down in uno dei record master, in tal modo la visualizzazione "dei dettagli." di record master</span><span class="sxs-lookup"><span data-stu-id="b66e0-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="b66e0-110">Master-Details report è la scelta ideale per la visualizzazione delle relazioni uno-a-molti, ad esempio un report che mostra tutte le categorie e quindi consentire a un utente di selezionare una determinata categoria e visualizzare i prodotti associati.</span><span class="sxs-lookup"><span data-stu-id="b66e0-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="b66e0-111">Report master/dettaglio risultano inoltre utili per la visualizzazione di informazioni dettagliate dalle tabelle particolarmente "wide" (ovvero quelle che presenta un elevato numero di colonne).</span><span class="sxs-lookup"><span data-stu-id="b66e0-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="b66e0-112">Ad esempio, il livello di "master" di un rapporto master/dettagli potrebbe mostrare solo il prodotto nome e il prezzo unitario dei prodotti nel database e il drill-down in un determinato prodotto mostrerebbe i campi aggiuntivi del prodotto (categoria, fornitore, la quantità per unità, e così via).</span><span class="sxs-lookup"><span data-stu-id="b66e0-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="b66e0-113">Esistono molti modi con cui può essere implementato un rapporto master/dettaglio.</span><span class="sxs-lookup"><span data-stu-id="b66e0-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="b66e0-114">Su questo e successive tre esercitazioni esamineremo una varietà di report master o di dettaglio.</span><span class="sxs-lookup"><span data-stu-id="b66e0-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="b66e0-115">In questa esercitazione verrà illustrato come visualizzare i record master in un [controllo DropDownList](https://msdn.microsoft.com/library/dtx91y0z.aspx) e i dettagli dell'elemento di elenco selezionato in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="b66e0-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="b66e0-116">In particolare, report master o di dettaglio dell'esercitazione Elenca informazioni category e product.</span><span class="sxs-lookup"><span data-stu-id="b66e0-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="b66e0-117">Passaggio 1: Visualizzare le categorie in un controllo DropDownList</span><span class="sxs-lookup"><span data-stu-id="b66e0-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="b66e0-118">Report master o di dettaglio elencherà le categorie presenti in un elenco a discesa con i prodotti dell'elemento elenco selezionato visualizzati più in basso nella pagina in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="b66e0-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="b66e0-119">La prima attività prima di Stati Uniti, è quindi disporre le categorie visualizzate in un controllo DropDownList.</span><span class="sxs-lookup"><span data-stu-id="b66e0-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="b66e0-120">Aprire il `FilterByDropDownList.aspx` nella pagina la `Filtering` cartella, trascinare un controllo DropDownList dalla casella degli strumenti nella finestra di progettazione della pagina e impostare relativo `ID` proprietà `Categories`.</span><span class="sxs-lookup"><span data-stu-id="b66e0-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="b66e0-121">Fare quindi clic sul collegamento dallo smart tag del controllo DropDownList Scegli origine dati.</span><span class="sxs-lookup"><span data-stu-id="b66e0-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="b66e0-122">Verrà visualizzata la configurazione guidata origine dati.</span><span class="sxs-lookup"><span data-stu-id="b66e0-122">This will display the Data Source Configuration wizard.</span></span>

<span data-ttu-id="b66e0-123">[![Specificare l'origine dati del controllo DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="b66e0-124">**Figura 1**: Specificare l'origine dati del controllo DropDownList ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>

<span data-ttu-id="b66e0-125">Scegliere di aggiungere un nuovo oggetto ObjectDataSource denominato `CategoriesDataSource` che richiama la `CategoriesBLL` della classe `GetCategories()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="b66e0-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>

<span data-ttu-id="b66e0-126">[![Aggiungere un nuovo oggetto ObjectDataSource denominato CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="b66e0-127">**Figura 2**: Aggiungere un nuovo oggetto ObjectDataSource denominato `CategoriesDataSource` ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>

<span data-ttu-id="b66e0-128">[![Scegliere di usare la classe CategoriesBLL](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="b66e0-129">**Figura 3**: Scegliere di usare la `CategoriesBLL` classe ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>

<span data-ttu-id="b66e0-130">[![Configurare ObjectDataSource per usare il metodo GetCategories()](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="b66e0-131">**Figura 4**: Configurare ObjectDataSource per usare la `GetCategories()` metodo ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>

<span data-ttu-id="b66e0-132">Dopo la configurazione di ObjectDataSource è ancora necessario specificare quale campo dell'origine dati deve essere visualizzato in DropDownList e che uno deve essere associato come valore per l'elemento dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="b66e0-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="b66e0-133">Dispone il `CategoryName` campo, come la visualizzazione e `CategoryID` come valore per ogni elemento dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="b66e0-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="b66e0-134">[![Hanno la visualizzazione del controllo DropDownList il campo Nome categoria e CategoryID Usa come valore](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="b66e0-135">**Figura 5**: La visualizzazione DropDownList il `CategoryName` campo e l'utilizzo `CategoryID` come valore ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>

<span data-ttu-id="b66e0-136">A questo punto si dispone di un controllo DropDownList popolata con i record dal `Categories` tabella (tutto eseguita in circa sei secondi).</span><span class="sxs-lookup"><span data-stu-id="b66e0-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="b66e0-137">Figura 6 mostra lo stato di avanzamento fino ad ora, quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="b66e0-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="b66e0-138">[![Un elenco a discesa Elenca le categorie correnti](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="b66e0-139">**Figura 6**: Un elenco a discesa Elenca le categorie correnti ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>

## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="b66e0-140">Passaggio 2: Aggiunta di GridView prodotti</span><span class="sxs-lookup"><span data-stu-id="b66e0-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="b66e0-141">L'ultimo passaggio nel report master o di dettaglio è elencare i prodotti associati alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="b66e0-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="b66e0-142">A tale scopo, aggiungere un controllo GridView alla pagina e creare un nuovo oggetto ObjectDataSource denominato `productsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b66e0-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="b66e0-143">Disporre le `productsDataSource` controllo selezionare i relativi dati dal `ProductsBLL` della classe `GetProductsByCategoryID(categoryID)` (metodo).</span><span class="sxs-lookup"><span data-stu-id="b66e0-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="b66e0-144">[![Selezionare il metodo GetProductsByCategoryID(categoryID)](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="b66e0-145">**Figura 7**: Selezionare il `GetProductsByCategoryID(categoryID)` metodo ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>

<span data-ttu-id="b66e0-146">Dopo aver scelto il metodo, la procedura guidata ObjectDataSource richiede il valore per il metodo *`categoryID`* parametro.</span><span class="sxs-lookup"><span data-stu-id="b66e0-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="b66e0-147">Per utilizzare il valore dell'oggetto selezionato `categories` DropDownList elemento impostato l'origine del parametro al controllo e il ControlID a `Categories`.</span><span class="sxs-lookup"><span data-stu-id="b66e0-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="b66e0-148">[![Impostare il parametro categoryID al valore di DropDownList categorie](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="b66e0-149">**Figura 8**: Impostare il *`categoryID`* parametro per il valore del `Categories` DropDownList ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>

<span data-ttu-id="b66e0-150">Si consiglia di estrarre lo stato di avanzamento in un browser.</span><span class="sxs-lookup"><span data-stu-id="b66e0-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="b66e0-151">Durante la prima visita la pagina, i prodotti appartengano alla categoria selezionata (bevande) vengono visualizzati (come illustrato nella figura 9), ma la modifica DropDownList non aggiorna i dati.</span><span class="sxs-lookup"><span data-stu-id="b66e0-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="b66e0-152">Infatti, deve verificarsi un postback per il controllo GridView per l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="b66e0-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="b66e0-153">A tale scopo sono disponibili due opzioni (nessuno dei quali è necessario scrivere alcun codice):</span><span class="sxs-lookup"><span data-stu-id="b66e0-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="b66e0-154">**Impostare le categorie DropDownList**[proprietà AutoPostBack](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**su True.**</span><span class="sxs-lookup"><span data-stu-id="b66e0-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="b66e0-155">(È possibile farlo selezionando l'opzione Abilita AutoPostBack nello smart tag del controllo DropDownList.) Ogni volta che il controllo DropDownList selezionata verrà attivato un postback elemento è stato modificato dall'utente.</span><span class="sxs-lookup"><span data-stu-id="b66e0-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="b66e0-156">Pertanto, quando l'utente seleziona una nuova categoria da DropDownList negativi a un postback e GridView verrà aggiornato con i prodotti per la categoria appena selezionato.</span><span class="sxs-lookup"><span data-stu-id="b66e0-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="b66e0-157">(Questo è l'approccio che ho utilizzato in questa esercitazione).</span><span class="sxs-lookup"><span data-stu-id="b66e0-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="b66e0-158">**Aggiungere un controllo Web sul pulsante accanto a DropDownList.**</span><span class="sxs-lookup"><span data-stu-id="b66e0-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="b66e0-159">Impostare il `Text` proprietà per l'aggiornamento o qualcosa di simile.</span><span class="sxs-lookup"><span data-stu-id="b66e0-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="b66e0-160">Con questo approccio, l'utente dovrà selezionare una nuova categoria e quindi fare clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="b66e0-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="b66e0-161">Fare clic sul pulsante verrà possono causare un postback e aggiorna il GridView per elencare i prodotti della categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="b66e0-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="b66e0-162">Le figure da 9 e 10 illustrano il rapporto master/dettaglio in azione.</span><span class="sxs-lookup"><span data-stu-id="b66e0-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="b66e0-163">[![Durante la prima visita la pagina, vengono visualizzati i prodotti di bevande](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="b66e0-164">**Figura 9**: Durante la prima visita la pagina, vengono visualizzati i prodotti di bevande ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>

<span data-ttu-id="b66e0-165">[![Se si seleziona automaticamente un nuovo prodotto (produzione), un PostBack, l'aggiornamento di GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="b66e0-166">**Figura 10**: Se si seleziona automaticamente un nuovo prodotto (produzione), un PostBack, l'aggiornamento di GridView ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="b66e0-167">Aggiunta di un elemento di elenco ", scegliere una categoria"</span><span class="sxs-lookup"><span data-stu-id="b66e0-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="b66e0-168">Quando si visita prima la `FilterByDropDownList.aspx` pagina le categorie primo elemento di elenco del DropDownList (bevande) è selezionata per impostazione predefinita, che mostra i prodotti delle bibite nel GridView.</span><span class="sxs-lookup"><span data-stu-id="b66e0-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="b66e0-169">Piuttosto che mostra i prodotti della categoria prima, che si può decidere di invece avere un elemento del controllo DropDownList selezionato che trovo una regola, ad esempio, "-- seleziona una categoria,".</span><span class="sxs-lookup"><span data-stu-id="b66e0-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="b66e0-170">Per aggiungere un nuovo elemento elenco per il controllo DropDownList, passare alla finestra proprietà e fare clic sui puntini di sospensione di `Items` proprietà.</span><span class="sxs-lookup"><span data-stu-id="b66e0-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="b66e0-171">Aggiungere un nuovo elemento elenco con il `Text` ", scegliere una categoria," e il `Value` `-1`.</span><span class="sxs-lookup"><span data-stu-id="b66e0-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>

<span data-ttu-id="b66e0-172">[![Aggiungere un: scegliere una categoria: elemento di elenco](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="b66e0-173">**Figura 11**: Aggiungere un: scegliere una categoria: elemento di elenco ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>

<span data-ttu-id="b66e0-174">In alternativa, è possibile aggiungere l'elemento dell'elenco, aggiungere il markup seguente per il controllo DropDownList:</span><span class="sxs-lookup"><span data-stu-id="b66e0-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="b66e0-175">Inoltre, è necessario impostare il controllo DropDownList `AppendDataBoundItems` su True perché quando le categorie vengono associate a DropDownList da ObjectDataSource queste sovrascriveranno eventuali voci di elenco aggiunte manualmente se `AppendDataBoundItems` non è True.</span><span class="sxs-lookup"><span data-stu-id="b66e0-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>

![Impostare la proprietà AppendDataBoundItems su True](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="b66e0-177">**Figura 12**: Impostare il `AppendDataBoundItems` proprietà su True</span><span class="sxs-lookup"><span data-stu-id="b66e0-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="b66e0-178">Dopo tali modifiche, prima di tutto gli utenti in visita la pagina è selezionata l'opzione "-- seleziona una categoria," e prodotti non vengono visualizzata.</span><span class="sxs-lookup"><span data-stu-id="b66e0-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>

<span data-ttu-id="b66e0-179">[![Il caricamento della pagina iniziale non vengono visualizzata prodotti](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="b66e0-180">**Figura 13**: Con i prodotti di nessun carico pagina iniziale vengono visualizzati ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>

<span data-ttu-id="b66e0-181">Il motivo prodotti non vengono visualizzata quando perché l'elemento di elenco ", scegliere una categoria," è selezionato è il valore è `-1` e non sono presenti prodotti nel database con un `CategoryID` di `-1`.</span><span class="sxs-lookup"><span data-stu-id="b66e0-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="b66e0-182">Se si tratta del comportamento desiderato, quindi a questo punto è terminato.</span><span class="sxs-lookup"><span data-stu-id="b66e0-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="b66e0-183">Se, tuttavia, si desidera visualizzare *tutti i* delle categorie di quando è selezionata la voce di elenco ", scegliere una categoria,", tornare al `ProductsBLL` classe e personalizzare il `GetProductsByCategoryID(categoryID)` metodo in modo che si richiama il `GetProducts()` metodo se il valore passato in *`categoryID`* parametro è minore di zero:</span><span class="sxs-lookup"><span data-stu-id="b66e0-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="b66e0-184">La tecnica usata in questo esempio è simile all'approccio viene utilizzati per visualizzare tutti i fornitori nel [parametri dichiarativi](../basic-reporting/declarative-parameters-cs.md) tutorial, anche se per questo esempio verrà usato un valore di `-1` per indicare che devono essere tutti i record recuperato in contrapposizione a `null`.</span><span class="sxs-lookup"><span data-stu-id="b66e0-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="b66e0-185">Infatti il *`categoryID`* parametri del `GetProductsByCategoryID(categoryID)` metodo prevede come valore intero passato, mentre nell'esercitazione parametri dichiarativi è stavamo passando un parametro di input di stringa.</span><span class="sxs-lookup"><span data-stu-id="b66e0-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="b66e0-186">Figura 14 viene illustrata una cattura di schermata della `FilterByDropDownList.aspx` quando è selezionata l'opzione "-- seleziona una categoria,".</span><span class="sxs-lookup"><span data-stu-id="b66e0-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="b66e0-187">In questo caso, tutti i prodotti vengono visualizzati per impostazione predefinita e l'utente può limitare la visualizzazione scegliendo una categoria specifica.</span><span class="sxs-lookup"><span data-stu-id="b66e0-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>

<span data-ttu-id="b66e0-188">[![Tutti i prodotti sono ora elencati per impostazione predefinita](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="b66e0-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="b66e0-189">**Figura 14**: Tutti i prodotti sono ora elencati per impostazione predefinita ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="b66e0-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>

## <a name="summary"></a><span data-ttu-id="b66e0-190">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="b66e0-190">Summary</span></span>

<span data-ttu-id="b66e0-191">Quando si visualizzano dati correlati in modo gerarchico, è spesso utile per presentare i dati usando i report master o di dettaglio, da cui l'utente può iniziare ad analizzare i dati nella parte superiore della gerarchia e il drill-down nei dettagli.</span><span class="sxs-lookup"><span data-stu-id="b66e0-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="b66e0-192">In questa esercitazione abbiamo esaminato la creazione di un report master o di dettaglio che mostri i prodotti della categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="b66e0-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="b66e0-193">Questa operazione è stata eseguita usando un controllo DropDownList per l'elenco di categorie e un controllo GridView per i prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="b66e0-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="b66e0-194">Nel [prossima esercitazione](master-detail-filtering-with-two-dropdownlists-cs.md) Daremo il passaggio di un'interfaccia DropDownList ulteriormente, usando due controlli DropDownList.</span><span class="sxs-lookup"><span data-stu-id="b66e0-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="b66e0-195">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="b66e0-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="b66e0-196">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="b66e0-196">About the Author</span></span>

<span data-ttu-id="b66e0-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette libri e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha collaborato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="b66e0-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b66e0-198">Lavora come un consulente, formatore e autore.</span><span class="sxs-lookup"><span data-stu-id="b66e0-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b66e0-199">Il suo ultimo libro si intitola [ *Sams Teach Yourself ASP.NET 2.0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="b66e0-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="b66e0-200">È possibile contattarlo al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b66e0-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="b66e0-201">o sul suo blog, che è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="b66e0-201">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="b66e0-202">avanti</span><span class="sxs-lookup"><span data-stu-id="b66e0-202">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)
