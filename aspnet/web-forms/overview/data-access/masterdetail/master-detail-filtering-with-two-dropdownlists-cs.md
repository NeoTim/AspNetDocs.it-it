---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
title: Master/dettagli filtro due controlli DropDownList (c#) | Microsoft Docs
author: rick-anderson
description: Questa esercitazione si espande la relazione master-Details per aggiungere un terzo livello, usando due controlli DropDownList per selezionare i recor desiderato padre e padre del padre...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: ac4b0d77-4816-4ded-afd0-88dab667aedd
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
msc.type: authoredcontent
ms.openlocfilehash: 58ffa99cbe72b2789b8741a8c2378760c2f2c19c
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2019
ms.locfileid: "65134056"
---
# <a name="masterdetail-filtering-with-two-dropdownlists-c"></a><span data-ttu-id="1ade7-103">Applicazione di filtri al report master o di dettaglio usando due controlli DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="1ade7-103">Master/Detail Filtering With Two DropDownLists (C#)</span></span>

<span data-ttu-id="1ade7-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1ade7-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="1ade7-105">[Scaricare l'App di esempio](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) o [Scarica il PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="1ade7-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) or [Download PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span></span>

> <span data-ttu-id="1ade7-106">Questa esercitazione si espande la relazione master-Details per aggiungere un terzo livello, usando due controlli DropDownList per selezionare i record padre e padre del padre desiderati.</span><span class="sxs-lookup"><span data-stu-id="1ade7-106">This tutorial expands the master/detail relationship to add a third layer, using two DropDownList controls to select the desired parent and grandparent records.</span></span>

## <a name="introduction"></a><span data-ttu-id="1ade7-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="1ade7-107">Introduction</span></span>

<span data-ttu-id="1ade7-108">Nel [esercitazione precedente](master-detail-filtering-with-a-dropdownlist-cs.md) abbiamo esaminato il modo visualizzare un report semplice master/dettaglio mediante un singolo controllo DropDownList popolato con le categorie e un controllo GridView che mostra i prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-108">In the [previous tutorial](master-detail-filtering-with-a-dropdownlist-cs.md) we examined how to display a simple master/details report using a single DropDownList populated with the categories and a GridView showing those products that belong to the selected category.</span></span> <span data-ttu-id="1ade7-109">Questo modello di report funziona bene quando si visualizzano i record che hanno una relazione uno-a-molti e possono essere facilmente esteso per lavorare con gli scenari che includono più relazioni uno-a-molti.</span><span class="sxs-lookup"><span data-stu-id="1ade7-109">This report pattern works well when displaying records that have a one-to-many relationship and can easily be extended to work for scenarios that include multiple one-to-many relationships.</span></span> <span data-ttu-id="1ade7-110">Ad esempio, un sistema di immissione ordini avrebbe tabelle che corrispondono ai clienti, ordini e righe d'ordine.</span><span class="sxs-lookup"><span data-stu-id="1ade7-110">For example, an order entry system would have tables that correspond to customers, orders, and order line items.</span></span> <span data-ttu-id="1ade7-111">Un determinato cliente può disporre di più ordini con tutti gli ordini costituito da più elementi.</span><span class="sxs-lookup"><span data-stu-id="1ade7-111">A given customer may have multiple orders with each order consisting of multiple items.</span></span> <span data-ttu-id="1ade7-112">Questo tipo di dati può essere presentato all'utente con due controlli DropDownList e un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="1ade7-112">Such data can be presented to the user with two DropDownLists and a GridView.</span></span> <span data-ttu-id="1ade7-113">Il primo controllo DropDownList avrebbe una voce di elenco per ogni cliente nel database con il secondo uno contenuto in fase di ordini effettuati dal cliente selezionato.</span><span class="sxs-lookup"><span data-stu-id="1ade7-113">The first DropDownList would have a list item for each customer in the database with the second one's contents being the orders placed by the selected customer.</span></span> <span data-ttu-id="1ade7-114">Un controllo GridView elencherà le voci dell'ordine selezionato.</span><span class="sxs-lookup"><span data-stu-id="1ade7-114">A GridView would list the line items from the selected order.</span></span>

<span data-ttu-id="1ade7-115">Mentre il database Northwind includere le informazioni di dettagli cliente/ordine canonici nel relativo `Customers`, `Orders`, e `Order Details` tabelle, queste tabelle non vengono rilevate nell'architettura.</span><span class="sxs-lookup"><span data-stu-id="1ade7-115">While the Northwind database include the canonical customer/order/order details information in its `Customers`, `Orders`, and `Order Details` tables, these tables aren't captured in our architecture.</span></span> <span data-ttu-id="1ade7-116">Ciononostante, è comunque possibile descrivere usando due controlli DropDownList dipendenti.</span><span class="sxs-lookup"><span data-stu-id="1ade7-116">Nonetheless, we can still illustrate using two dependent DropDownLists.</span></span> <span data-ttu-id="1ade7-117">Il primo controllo DropDownList elencherà le categorie e il secondo i prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-117">The first DropDownList will list the categories and the second the products belonging to the selected category.</span></span> <span data-ttu-id="1ade7-118">Un controllo DetailsView quindi elencherà i dettagli del prodotto selezionato.</span><span class="sxs-lookup"><span data-stu-id="1ade7-118">A DetailsView will then list the details of the selected product.</span></span>

## <a name="step-1-creating-and-populating-the-categories-dropdownlist"></a><span data-ttu-id="1ade7-119">Passaggio 1: Creazione e popolamento DropDownList categorie</span><span class="sxs-lookup"><span data-stu-id="1ade7-119">Step 1: Creating and Populating the Categories DropDownList</span></span>

<span data-ttu-id="1ade7-120">Il nostro primo obiettivo consiste nell'aggiungere il controllo DropDownList che elenca le categorie.</span><span class="sxs-lookup"><span data-stu-id="1ade7-120">Our first goal is to add the DropDownList that lists the categories.</span></span> <span data-ttu-id="1ade7-121">Questi passaggi sono stati esaminati in dettaglio nell'esercitazione precedente, ma sono riepilogati di seguito per motivi di completezza.</span><span class="sxs-lookup"><span data-stu-id="1ade7-121">These steps were examined in detail in the preceding tutorial, but are summarized here for completeness.</span></span>

<span data-ttu-id="1ade7-122">Aprire il `MasterDetailsDetails.aspx` nella pagina la `Filtering` cartella, aggiungere un controllo DropDownList alla pagina, imposta relativo `ID` proprietà `Categories`e quindi fare clic sul collegamento Configura origine dati nel relativo smart tag.</span><span class="sxs-lookup"><span data-stu-id="1ade7-122">Open the `MasterDetailsDetails.aspx` page in the `Filtering` folder, add a DropDownList to the page, set its `ID` property to `Categories`, and then click the Configure Data Source link in its smart tag.</span></span> <span data-ttu-id="1ade7-123">Scegliere la configurazione guidata origine dati per aggiungere una nuova origine dati.</span><span class="sxs-lookup"><span data-stu-id="1ade7-123">From the Data Source Configuration Wizard choose to add a new data source.</span></span>

<span data-ttu-id="1ade7-124">[![Aggiungere una nuova origine dati per il controllo DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-124">[![Add a New Data Source for the DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span></span>

<span data-ttu-id="1ade7-125">**Figura 1**: Aggiungere una nuova origine dati per il controllo DropDownList ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-125">**Figure 1**: Add a New Data Source for the DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span></span>

<span data-ttu-id="1ade7-126">La nuova origine dati deve, naturalmente, essere ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="1ade7-126">The new data source should, naturally, be an ObjectDataSource.</span></span> <span data-ttu-id="1ade7-127">Denominare il nuovo oggetto ObjectDataSource `CategoriesDataSource` , che verrà richiamare il `CategoriesBLL` dell'oggetto `GetCategories()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="1ade7-127">Name this new ObjectDataSource `CategoriesDataSource` and have it invoke the `CategoriesBLL` object's `GetCategories()` method.</span></span>

<span data-ttu-id="1ade7-128">[![Scegliere di usare la classe CategoriesBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span></span>

<span data-ttu-id="1ade7-129">**Figura 2**: Scegliere di usare la `CategoriesBLL` classe ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-129">**Figure 2**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span></span>

<span data-ttu-id="1ade7-130">[![Configurare ObjectDataSource per usare il metodo GetCategories()](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span></span>

<span data-ttu-id="1ade7-131">**Figura 3**: Configurare ObjectDataSource per usare la `GetCategories()` metodo ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-131">**Figure 3**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span></span>

<span data-ttu-id="1ade7-132">Dopo la configurazione di ObjectDataSource è comunque necessario specificare quale campo dell'origine dati deve essere visualizzato nei `Categories` DropDownList e quale deve essere configurato come il valore dell'elemento di elenco.</span><span class="sxs-lookup"><span data-stu-id="1ade7-132">After configuring the ObjectDataSource we still need to specify which data source field should be displayed in the `Categories` DropDownList and which one should be configured as the value for the list item.</span></span> <span data-ttu-id="1ade7-133">Impostare il `CategoryName` campo, come la visualizzazione e `CategoryID` come valore per ogni elemento dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="1ade7-133">Set the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="1ade7-134">[![Hanno la visualizzazione del controllo DropDownList il campo Nome categoria e CategoryID Usa come valore](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span></span>

<span data-ttu-id="1ade7-135">**Figura 4**: La visualizzazione DropDownList il `CategoryName` campo e l'utilizzo `CategoryID` come valore ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-135">**Figure 4**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span></span>

<span data-ttu-id="1ade7-136">A questo punto si dispone di un controllo DropDownList (`Categories`) che viene popolato con i record dal `Categories` tabella.</span><span class="sxs-lookup"><span data-stu-id="1ade7-136">At this point we have a DropDownList control (`Categories`) that's populated with the records from the `Categories` table.</span></span> <span data-ttu-id="1ade7-137">Quando l'utente sceglie una nuova categoria da DropDownList sarebbe auspicabile un postback per aggiornare il prodotto DropDownList che andremo a creare nel passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="1ade7-137">When the user chooses a new category from the DropDownList we'll want a postback to occur in order to refresh the product DropDownList that we're going to create in Step 2.</span></span> <span data-ttu-id="1ade7-138">Pertanto, selezionare l'opzione Abilita AutoPostBack dal `categories` tag intelligente del controllo DropDownList.</span><span class="sxs-lookup"><span data-stu-id="1ade7-138">Therefore, check the Enable AutoPostBack option from the `categories` DropDownList's smart tag.</span></span>

<span data-ttu-id="1ade7-139">[![Povolit vlastnost AutoPostBack per DropDownList categorie](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-139">[![Enable AutoPostBack for the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span></span>

<span data-ttu-id="1ade7-140">**Figura 5**: Povolit vlastnost AutoPostBack per il `Categories` DropDownList ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-140">**Figure 5**: Enable AutoPostBack for the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span></span>

## <a name="step-2-displaying-the-selected-categorys-products-in-a-second-dropdownlist"></a><span data-ttu-id="1ade7-141">Passaggio 2: Visualizzazione dei prodotti della categoria selezionata in un secondo DropDownList</span><span class="sxs-lookup"><span data-stu-id="1ade7-141">Step 2: Displaying the Selected Category's Products in a Second DropDownList</span></span>

<span data-ttu-id="1ade7-142">Con la `Categories` DropDownList completato, il passaggio successivo consiste nella visualizzazione di un controllo DropDownList dei prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-142">With the `Categories` DropDownList completed, our next step is to display a DropDownList of products belonging to the selected category.</span></span> <span data-ttu-id="1ade7-143">A tale scopo, aggiungere un altro controllo DropDownList alla pagina denominata `ProductsByCategory`.</span><span class="sxs-lookup"><span data-stu-id="1ade7-143">To accomplish this, add another DropDownList to the page named `ProductsByCategory`.</span></span> <span data-ttu-id="1ade7-144">Come con le `Categories` DropDownList, creare un nuovo oggetto ObjectDataSource per il `ProductsByCategory` DropDownList denominato `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="1ade7-144">As with the `Categories` DropDownList, create a new ObjectDataSource for the `ProductsByCategory` DropDownList named `ProductsByCategoryDataSource`.</span></span>

<span data-ttu-id="1ade7-145">[![Aggiungere una nuova origine dati per il controllo ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-145">[![Add a New Data Source for the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span></span>

<span data-ttu-id="1ade7-146">**Figura 6**: Aggiungere una nuova origine dati per il `ProductsByCategory` DropDownList ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-146">**Figure 6**: Add a New Data Source for the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span></span>

<span data-ttu-id="1ade7-147">[![Creare un nuovo oggetto ObjectDataSource denominato ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-147">[![Create a New ObjectDataSource Named ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span></span>

<span data-ttu-id="1ade7-148">**Figura 7**: Creare un nuovo oggetto ObjectDataSource denominato `ProductsByCategoryDataSource` ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-148">**Figure 7**: Create a New ObjectDataSource Named `ProductsByCategoryDataSource` ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span></span>

<span data-ttu-id="1ade7-149">Poiché il `ProductsByCategory` DropDownList esigenze per visualizzare solo i prodotti appartenenti alla categoria selezionata, avere ObjectDataSource richiama il `GetProductsByCategoryID(categoryID)` metodo dal `ProductsBLL` oggetto.</span><span class="sxs-lookup"><span data-stu-id="1ade7-149">Since the `ProductsByCategory` DropDownList needs to display just those products belonging to the selected category, have the ObjectDataSource invoke the `GetProductsByCategoryID(categoryID)` method from the `ProductsBLL` object.</span></span>

<span data-ttu-id="1ade7-150">[![Scegliere di usare la classe ProductsBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-150">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span></span>

<span data-ttu-id="1ade7-151">**Figura 8**: Scegliere di usare la `ProductsBLL` classe ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-151">**Figure 8**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span></span>

<span data-ttu-id="1ade7-152">[![Configurare ObjectDataSource per usare il metodo GetProductsByCategoryID(categoryID)](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-152">[![Configure the ObjectDataSource to Use the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span></span>

<span data-ttu-id="1ade7-153">**Figura 9**: Configurare ObjectDataSource per usare la `GetProductsByCategoryID(categoryID)` metodo ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-153">**Figure 9**: Configure the ObjectDataSource to Use the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span></span>

<span data-ttu-id="1ade7-154">Nel passaggio finale della procedura guidata è necessario specificare il valore della *`categoryID`* parametro.</span><span class="sxs-lookup"><span data-stu-id="1ade7-154">In the final step of the wizard we need to specify the value of the *`categoryID`* parameter.</span></span> <span data-ttu-id="1ade7-155">Assegnare questo parametro per l'elemento selezionato dal `Categories` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="1ade7-155">Assign this parameter to the selected item from the `Categories` DropDownList.</span></span>

<span data-ttu-id="1ade7-156">[![Estrarre il valore del parametro categoryID da DropDownList categorie](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-156">[![Pull the categoryID Parameter Value from the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span></span>

<span data-ttu-id="1ade7-157">**Figura 10**: Eseguire il pull il *`categoryID`* valore del parametro dal `Categories` DropDownList ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-157">**Figure 10**: Pull the *`categoryID`* Parameter Value from the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span></span>

<span data-ttu-id="1ade7-158">Con ObjectDataSource configurato, resta che per specificare quali campi dell'origine dati vengono usati per la visualizzazione e il valore degli elementi del controllo DropDownList.</span><span class="sxs-lookup"><span data-stu-id="1ade7-158">With the ObjectDataSource configured, all that remains is to specify what data source fields are used for the display and value of the DropDownList's items.</span></span> <span data-ttu-id="1ade7-159">Visualizzare il `ProductName` campo e usare il `ProductID` campo come valore.</span><span class="sxs-lookup"><span data-stu-id="1ade7-159">Display the `ProductName` field and use the `ProductID` field as the value.</span></span>

<span data-ttu-id="1ade7-160">[![Specificare i campi di origine dati usati per il testo e le proprietà del valore degli ListItems del DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-160">[![Specify the Data Source Fields Used for the DropDownList's ListItems' Text and Value Properties](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span></span>

<span data-ttu-id="1ade7-161">**Figura 11**: Specificare i campi di origine dati utilizzata per il controllo DropDownList `ListItem` s' `Text` e `Value` delle proprietà ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-161">**Figure 11**: Specify the Data Source Fields Used for the DropDownList's `ListItem` s' `Text` and `Value` Properties ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span></span>

<span data-ttu-id="1ade7-162">Con ObjectDataSource e `ProductsByCategory` DropDownList configurare nostra pagina verranno visualizzati due controlli DropDownList: il primo elencherà tutte le categorie mentre il secondo elenca i prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-162">With the ObjectDataSource and `ProductsByCategory` DropDownList configured our page will display two DropDownLists: the first will list all of the categories while the second will list those products belonging to the selected category.</span></span> <span data-ttu-id="1ade7-163">Quando l'utente seleziona una nuova categoria dal primo DropDownList, negativi a un postback e verrà essere riassociati DropDownList secondo, che mostra i prodotti appartenenti alla categoria appena selezionata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-163">When the user selects a new category from the first DropDownList, a postback will ensue and the second DropDownList will be rebound, showing those products that belong to the newly selected category.</span></span> <span data-ttu-id="1ade7-164">Figure 12 e 13 mostra `MasterDetailsDetails.aspx` in azione quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="1ade7-164">Figures 12 and 13 show `MasterDetailsDetails.aspx` in action when viewed through a browser.</span></span>

<span data-ttu-id="1ade7-165">[![Durante la prima visita la pagina, è selezionata la categoria di bevande](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-165">[![When First Visiting the Page, the Beverages Category is Selected](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span></span>

<span data-ttu-id="1ade7-166">**Figura 12**: Durante la prima visita la pagina, la categoria di bevande è selezionata ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-166">**Figure 12**: When First Visiting the Page, the Beverages Category is Selected ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span></span>

<span data-ttu-id="1ade7-167">[![Scelta di una categoria diversa consente di visualizzare di prodotti le nuove categorie](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-167">[![Choosing a Different Category Displays the New Category's Products](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span></span>

<span data-ttu-id="1ade7-168">**Figura 13**: Scelta di un diverso Visualizza categoria di prodotti le nuove categorie ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-168">**Figure 13**: Choosing a Different Category Displays the New Category's Products ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span></span>

<span data-ttu-id="1ade7-169">Attualmente le `productsByCategory` DropDownList, quando è cambiato, viene *non* possono causare un postback.</span><span class="sxs-lookup"><span data-stu-id="1ade7-169">Currently the `productsByCategory` DropDownList, when changed, does *not* cause a postback.</span></span> <span data-ttu-id="1ade7-170">Tuttavia, è consigliabile un postback si verificano solo quando si aggiunge un controllo DetailsView per visualizzare i dettagli del prodotto selezionato (passaggio 3).</span><span class="sxs-lookup"><span data-stu-id="1ade7-170">However, we will want a postback to occur once we add a DetailsView to display the selected product's details (Step 3).</span></span> <span data-ttu-id="1ade7-171">Di conseguenza, verificare la casella di controllo Abilita AutoPostBack il `productsByCategory` tag intelligente del controllo DropDownList.</span><span class="sxs-lookup"><span data-stu-id="1ade7-171">Therefore, check the Enable AutoPostBack checkbox from the `productsByCategory` DropDownList's smart tag.</span></span>

<span data-ttu-id="1ade7-172">[![Abilitare la funzionalità di un postback automatico per il controllo DropDownList productsByCategory](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-172">[![Enable the AutoPostBack Feature for the productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span></span>

<span data-ttu-id="1ade7-173">**Figura 14**: Abilitare la funzionalità di un postback automatico per il `productsByCategory` DropDownList ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-173">**Figure 14**: Enable the AutoPostBack Feature for the `productsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span></span>

## <a name="step-3-using-a-detailsview-to-display-details-for-the-selected-product"></a><span data-ttu-id="1ade7-174">Passaggio 3: Uso di un controllo DetailsView per visualizzare i dettagli per il prodotto selezionato</span><span class="sxs-lookup"><span data-stu-id="1ade7-174">Step 3: Using a DetailsView to Display Details for the Selected Product</span></span>

<span data-ttu-id="1ade7-175">Il passaggio finale consiste per visualizzare i dettagli per il prodotto selezionato in un controllo DetailsView.</span><span class="sxs-lookup"><span data-stu-id="1ade7-175">The final step is to display the details for the selected product in a DetailsView.</span></span> <span data-ttu-id="1ade7-176">Per eseguire questa operazione, aggiungere un controllo DetailsView alla pagina, impostare relativi `ID` proprietà `ProductDetails`e creare un nuovo oggetto ObjectDataSource per essa.</span><span class="sxs-lookup"><span data-stu-id="1ade7-176">To accomplish this, add a DetailsView to the page, set its `ID` property to `ProductDetails`, and create a new ObjectDataSource for it.</span></span> <span data-ttu-id="1ade7-177">Configurare ObjectDataSource per estrarre i dati dal `ProductsBLL` della classe `GetProductByProductID(productID)` metodo tramite valore selezionato del `ProductsByCategory` DropDownList per il valore della *`productID`* parametro.</span><span class="sxs-lookup"><span data-stu-id="1ade7-177">Configure this ObjectDataSource to pull its data from the `ProductsBLL` class's `GetProductByProductID(productID)` method using the selected value of the `ProductsByCategory` DropDownList for the value of the *`productID`* parameter.</span></span>

<span data-ttu-id="1ade7-178">[![Scegliere di usare la classe ProductsBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-178">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span></span>

<span data-ttu-id="1ade7-179">**Figura 15**: Scegliere di usare la `ProductsBLL` classe ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-179">**Figure 15**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span></span>

<span data-ttu-id="1ade7-180">[![Configurare ObjectDataSource per usare il metodo GetProductByProductID(productID)](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-180">[![Configure the ObjectDataSource to Use the GetProductByProductID(productID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span></span>

<span data-ttu-id="1ade7-181">**Figura 16**: Configurare ObjectDataSource per usare la `GetProductByProductID(productID)` metodo ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-181">**Figure 16**: Configure the ObjectDataSource to Use the `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span></span>

<span data-ttu-id="1ade7-182">[![Estrarre il valore del parametro productID da ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-182">[![Pull the productID Parameter Value from the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span></span>

<span data-ttu-id="1ade7-183">**Figura 17**: Eseguire il pull il *`productID`* valore del parametro dal `ProductsByCategory` DropDownList ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-183">**Figure 17**: Pull the *`productID`* Parameter Value from the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span></span>

<span data-ttu-id="1ade7-184">È possibile scegliere di visualizzare i campi disponibili in DetailsView.</span><span class="sxs-lookup"><span data-stu-id="1ade7-184">You can choose to display any of the available fields in the DetailsView.</span></span> <span data-ttu-id="1ade7-185">Ho scelto di rimuovere il `ProductID`, `SupplierID`, e `CategoryID` campi e riordinare e formattati i campi rimanenti.</span><span class="sxs-lookup"><span data-stu-id="1ade7-185">I've opted to remove the `ProductID`, `SupplierID`, and `CategoryID` fields and reordered and formatted the remaining fields.</span></span> <span data-ttu-id="1ade7-186">Inoltre, sono deselezionate out DetailsView `Height` e `Width` proprietà, che consente il controllo DetailsView espandere la larghezza necessaria più adatti alla visualizzazione dei dati anziché è vincolato a una dimensione specificata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-186">In addition, I cleared out the DetailsView's `Height` and `Width` properties, allowing the DetailsView to expand to the width needed to best display its data rather than having it constrained to a specified size.</span></span> <span data-ttu-id="1ade7-187">Il markup completo viene visualizzato di seguito:</span><span class="sxs-lookup"><span data-stu-id="1ade7-187">The full markup appears below:</span></span>

[!code-aspx[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample1.aspx)]

<span data-ttu-id="1ade7-188">Si consiglia di provare il `MasterDetailsDetails.aspx` pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="1ade7-188">Take a moment to try out the `MasterDetailsDetails.aspx` page in a browser.</span></span> <span data-ttu-id="1ade7-189">A prima vista potrebbe sembrare che funzionino nel modo desiderato, ma si verifica un problema complesso.</span><span class="sxs-lookup"><span data-stu-id="1ade7-189">At first glance it may appear that everything is working as desired, but there's a subtle problem.</span></span> <span data-ttu-id="1ade7-190">Quando si sceglie una nuova categoria la `ProductsByCategory` DropDownList viene aggiornato per includere tali prodotti per la categoria selezionata, ma il `ProductDetails` DetailsView ha continuato a visualizzare le informazioni sul prodotto precedenti.</span><span class="sxs-lookup"><span data-stu-id="1ade7-190">When you choose a new category the `ProductsByCategory` DropDownList is updated to include those products for the selected category, but the `ProductDetails` DetailsView continued to show the previous product information.</span></span> <span data-ttu-id="1ade7-191">DetailsView viene aggiornata quando si sceglie un prodotto diverso per la categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-191">The DetailsView is updated when choosing a different product for the selected category.</span></span> <span data-ttu-id="1ade7-192">Inoltre, se esegue il test sufficientemente attentamente, si noterà che se si sceglie continuamente nuove categorie (ad esempio la scelta delle bibite dal `Categories` DropDownList, quindi condimenti, quindi dolciumi) ogni altra selezione della categoria fa sì che il `ProductDetails`DetailsView da aggiornare.</span><span class="sxs-lookup"><span data-stu-id="1ade7-192">Furthermore, if you test thoroughly enough, you'll find that if you continually choose new categories (such as choosing Beverages from the `Categories` DropDownList, then Condiments, then Confections) every other category selection causes the `ProductDetails` DetailsView to be refreshed.</span></span>

<span data-ttu-id="1ade7-193">Per facilitare la concretizzare la questo problema, esaminiamo un esempio specifico.</span><span class="sxs-lookup"><span data-stu-id="1ade7-193">To help concretize this problem, let's look at a specific example.</span></span> <span data-ttu-id="1ade7-194">Durante la prima visita la pagina sia selezionata la categoria Beverages e i prodotti correlati vengono caricati nel `ProductsByCategory` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="1ade7-194">When you first visit the page the Beverages category is selected and the related products are loaded in the `ProductsByCategory` DropDownList.</span></span> <span data-ttu-id="1ade7-195">Chai è il prodotto selezionato e i relativi dettagli vengono visualizzati nei `ProductDetails` DetailsView, come illustrato nella figura 18.</span><span class="sxs-lookup"><span data-stu-id="1ade7-195">Chai is the selected product and its details are displayed in the `ProductDetails` DetailsView, as shown in Figure 18.</span></span>

<span data-ttu-id="1ade7-196">[![I dettagli del prodotto selezionato vengono visualizzati in un controllo DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-196">[![The Selected Product's Details are Displayed in a DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span></span>

<span data-ttu-id="1ade7-197">**Figura 18**: I dettagli del prodotto selezionato vengono visualizzati in un controllo DetailsView ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-197">**Figure 18**: The Selected Product's Details are Displayed in a DetailsView ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span></span>

<span data-ttu-id="1ade7-198">Se si modifica la selezione delle categorie da bibite a condimenti, si verifica un postback e `ProductsByCategory` DropDownList viene aggiornato di conseguenza, ma DetailsView vengono ancora visualizzati i dettagli per Chai compare.</span><span class="sxs-lookup"><span data-stu-id="1ade7-198">If you change the category selection from Beverages to Condiments, a postback occurs and the `ProductsByCategory` DropDownList is updated accordingly, but the DetailsView still displays details for Chai.</span></span>

<span data-ttu-id="1ade7-199">[![Dettagli precedentemente selezionata del prodotto sono ancora visualizzati](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-199">[![The Previously Selected Product's Details are Still Displayed](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span></span>

<span data-ttu-id="1ade7-200">**Figura 19**: Dettagli precedentemente selezionata del prodotto sono ancora visualizzati ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-200">**Figure 19**: The Previously Selected Product's Details are Still Displayed ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span></span>

<span data-ttu-id="1ade7-201">Selezione di un nuovo prodotto nell'elenco viene aggiornato DetailsView come previsto.</span><span class="sxs-lookup"><span data-stu-id="1ade7-201">Picking a new product from the list refreshes the DetailsView as expected.</span></span> <span data-ttu-id="1ade7-202">Se si seleziona una categoria di nuovo dopo aver modificato il prodotto, non aggiorna il DetailsView nuovamente.</span><span class="sxs-lookup"><span data-stu-id="1ade7-202">If you pick a new category after changing the product, the DetailsView again won't refresh.</span></span> <span data-ttu-id="1ade7-203">Tuttavia, se invece un nuovo prodotto è stata selezionata una nuova categoria, è necessario riavviare DetailsView.</span><span class="sxs-lookup"><span data-stu-id="1ade7-203">However, if instead of choosing a new product you selected a new category, the DetailsView would refresh.</span></span> <span data-ttu-id="1ade7-204">Che cosa nel mondo succede?</span><span class="sxs-lookup"><span data-stu-id="1ade7-204">What in the world is going on here?</span></span>

<span data-ttu-id="1ade7-205">Si tratta di un problema di temporizzazione nel ciclo di vita della pagina.</span><span class="sxs-lookup"><span data-stu-id="1ade7-205">The problem is a timing issue in the page's lifecycle.</span></span> <span data-ttu-id="1ade7-206">Ogni volta che viene richiesta una pagina che procede attraverso una serie di passaggi come il rendering.</span><span class="sxs-lookup"><span data-stu-id="1ade7-206">Whenever a page is requested it proceeds through a number of steps as its rendering.</span></span> <span data-ttu-id="1ade7-207">In uno di questi passaggi ObjectDataSource controlla verificare se uno qualsiasi dei relativi `SelectParameters` valori sono stati modificati.</span><span class="sxs-lookup"><span data-stu-id="1ade7-207">In one of these steps the ObjectDataSource controls check to see if any of their `SelectParameters` values have changed.</span></span> <span data-ttu-id="1ade7-208">Se, pertanto, il controllo Web per dati associato a ObjectDataSource riconosce che sono necessarie per aggiornare la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="1ade7-208">If so, the data Web control bound to the ObjectDataSource knows that it needs to refresh its display.</span></span> <span data-ttu-id="1ade7-209">Ad esempio, quando una nuova categoria viene selezionata, il `ProductsByCategoryDataSource` ObjectDataSource rileva che sono stati modificati i valori del parametro e il `ProductsByCategory` DropDownList rebinds stesso, il recupero di prodotti per la categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-209">For example, when a new category is selected, the `ProductsByCategoryDataSource` ObjectDataSource detects that its parameter values have changed and the `ProductsByCategory` DropDownList rebinds itself, getting the products for the selected category.</span></span>

<span data-ttu-id="1ade7-210">Il problema che si verifica in questa situazione è che si verifica il punto di vita che consentono di controllare gli ObjectDataSource per i parametri modificati *prima di* la riassociazione dei dati associati controlli Web.</span><span class="sxs-lookup"><span data-stu-id="1ade7-210">The problem that arises in this situation is that the point in the page lifecycle that the ObjectDataSources check for changed parameters occurs *before* the rebinding of the associated data Web controls.</span></span> <span data-ttu-id="1ade7-211">Pertanto, quando si seleziona una nuova categoria di `ProductsByCategoryDataSource` ObjectDataSource rileva una modifica nel valore del relativo parametro.</span><span class="sxs-lookup"><span data-stu-id="1ade7-211">Therefore, when selecting a new category the `ProductsByCategoryDataSource` ObjectDataSource detects a change in its parameter's value.</span></span> <span data-ttu-id="1ade7-212">Utilizzato da ObjectDataSource i `ProductDetails` DetailsView, tuttavia, non notare eventuali modifiche perché il `ProductsByCategory` DropDownList deve ancora essere riassociati.</span><span class="sxs-lookup"><span data-stu-id="1ade7-212">The ObjectDataSource used by the `ProductDetails` DetailsView, however, doesn't note any such changes because the `ProductsByCategory` DropDownList has yet to be rebound.</span></span> <span data-ttu-id="1ade7-213">Più avanti nel ciclo di vita di `ProductsByCategory` DropDownList riassocia di ObjectDataSource, acquisisce i prodotti per la categoria appena selezionato.</span><span class="sxs-lookup"><span data-stu-id="1ade7-213">Later in the lifecycle the `ProductsByCategory` DropDownList rebinds to its ObjectDataSource, grabbing the products for the newly selected category.</span></span> <span data-ttu-id="1ade7-214">Mentre il `ProductsByCategory` valore di DropDownList è cambiato, la `ProductDetails` DetailsView ObjectDataSource ha già eseguito il controllo di valori di parametro; pertanto, DetailsView visualizza i risultati precedenti.</span><span class="sxs-lookup"><span data-stu-id="1ade7-214">While the `ProductsByCategory` DropDownList's value has changed, the `ProductDetails` DetailsView's ObjectDataSource has already done its parameter value check; therefore, the DetailsView displays its previous results.</span></span> <span data-ttu-id="1ade7-215">Questa interazione è illustrata nella figura 20.</span><span class="sxs-lookup"><span data-stu-id="1ade7-215">This interaction is depicted in Figure 20.</span></span>

<span data-ttu-id="1ade7-216">[![Modifica del valore di ProductsByCategory DropDownList dopo le verifiche ObjectDataSource di ProductDetails DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-216">[![The ProductsByCategory DropDownList Value Changes After the ProductDetails DetailsView's ObjectDataSource Checks for Changes](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span></span>

<span data-ttu-id="1ade7-217">**Figura 20**: Il `ProductsByCategory` DropDownList valore modifiche dopo il `ProductDetails` ObjectDataSource verifica DetailsView la presenza di modifiche ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-217">**Figure 20**: The `ProductsByCategory` DropDownList Value Changes After the `ProductDetails` DetailsView's ObjectDataSource Checks for Changes ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span></span>

<span data-ttu-id="1ade7-218">Per risolvere il problema, dobbiamo associare di nuovo in modo esplicito il `ProductDetails` DetailsView dopo il `ProductsByCategory` DropDownList è stato associato.</span><span class="sxs-lookup"><span data-stu-id="1ade7-218">To remedy this we need to explicitly rebind the `ProductDetails` DetailsView after the `ProductsByCategory` DropDownList has been bound.</span></span> <span data-ttu-id="1ade7-219">È possibile eseguire questa operazione chiamando il `ProductDetails` DetailsView `DataBind()` metodo quando la `ProductsByCategory` del controllo DropDownList `DataBound` viene generato l'evento.</span><span class="sxs-lookup"><span data-stu-id="1ade7-219">We can accomplish this by calling the `ProductDetails` DetailsView's `DataBind()` method when the `ProductsByCategory` DropDownList's `DataBound` event fires.</span></span> <span data-ttu-id="1ade7-220">Aggiungere il codice del gestore eventi seguente per il `MasterDetailsDetails.aspx` classe code-behind della pagina (vedere il "[a livello di codice impostando i valori dei parametri di ObjectDataSource](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" per una discussione su come aggiungere un gestore eventi):</span><span class="sxs-lookup"><span data-stu-id="1ade7-220">Add the following event handler code to the `MasterDetailsDetails.aspx` page's code-behind class (refer to the "[Programmatically Setting the ObjectDataSource's Parameter Values](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" for a discussion on how to add an event handler):</span></span>

[!code-csharp[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample2.cs)]

<span data-ttu-id="1ade7-221">Dopo questa chiamata esplicita per il `ProductDetails` DetailsView `DataBind()` metodo è stato aggiunto, l'esercitazione funziona come previsto.</span><span class="sxs-lookup"><span data-stu-id="1ade7-221">After this explicit call to the `ProductDetails` DetailsView's `DataBind()` method has been added, the tutorial works as expected.</span></span> <span data-ttu-id="1ade7-222">Figura 21 evidenzia come questo modificato risolto la causa del problema precedente.</span><span class="sxs-lookup"><span data-stu-id="1ade7-222">Figure 21 highlights how this changed remedied our earlier problem.</span></span>

<span data-ttu-id="1ade7-223">[![ProductDetails DetailsView è attivazione dell'esplicitamente aggiornati quando il ProductsByCategory DropDownList dell'evento con associazione a dati](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="1ade7-223">[![The ProductDetails DetailsView is Explicitly Refreshed When the ProductsByCategory DropDownList's DataBound Event Fires](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span></span>

<span data-ttu-id="1ade7-224">**Figura 21**: Il `ProductDetails` DetailsView è esplicitamente aggiornati quando il `ProductsByCategory` del controllo DropDownList `DataBound` viene generato l'evento ([fare clic per visualizzare l'immagine con dimensioni normali](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span><span class="sxs-lookup"><span data-stu-id="1ade7-224">**Figure 21**: The `ProductDetails` DetailsView is Explicitly Refreshed When the `ProductsByCategory` DropDownList's `DataBound` Event Fires ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span></span>

## <a name="summary"></a><span data-ttu-id="1ade7-225">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="1ade7-225">Summary</span></span>

<span data-ttu-id="1ade7-226">Il controllo DropDownList costituisce un elemento dell'interfaccia utente ideale per i report master o di dettaglio in cui è presente una relazione uno-a-molti tra i record master e di dettaglio.</span><span class="sxs-lookup"><span data-stu-id="1ade7-226">The DropDownList serves as an ideal user interface element for master/detail reports where there is a one-to-many relationship between the master and detail records.</span></span> <span data-ttu-id="1ade7-227">Nell'esercitazione precedente abbiamo visto come utilizzare un controllo DropDownList singolo per filtrare i prodotti visualizzati in base alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="1ade7-227">In the preceding tutorial we saw how to use a single DropDownList to filter the products displayed by the selected category.</span></span> <span data-ttu-id="1ade7-228">In questa esercitazione viene sostituito il controllo GridView di prodotti con un controllo DropDownList e usato un controllo DetailsView per visualizzare i dettagli del prodotto selezionato.</span><span class="sxs-lookup"><span data-stu-id="1ade7-228">In this tutorial we replaced the GridView of products with a DropDownList, and used a DetailsView to display the details of the selected product.</span></span> <span data-ttu-id="1ade7-229">I concetti illustrati in questa esercitazione possono essere facilmente esteso ai modelli di dati che coinvolgono più relazioni uno-a-molti, ad esempio i clienti, ordini e gli elementi di ordine.</span><span class="sxs-lookup"><span data-stu-id="1ade7-229">The concepts discussed in this tutorial can easily be extended to data models involving multiple one-to-many relationships, such as customers, orders, and order items.</span></span> <span data-ttu-id="1ade7-230">In generale, è sempre possibile aggiungere un controllo DropDownList per ognuna delle entità "uno" nelle relazioni uno-a-molti.</span><span class="sxs-lookup"><span data-stu-id="1ade7-230">In general, you can always add a DropDownList for each of the "one" entities in the one-to-many relationships.</span></span>

<span data-ttu-id="1ade7-231">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="1ade7-231">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="1ade7-232">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="1ade7-232">About the Author</span></span>

<span data-ttu-id="1ade7-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette libri e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha collaborato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="1ade7-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1ade7-234">Lavora come un consulente, formatore e autore.</span><span class="sxs-lookup"><span data-stu-id="1ade7-234">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1ade7-235">Il suo ultimo libro si intitola [ *Sams Teach Yourself ASP.NET 2.0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="1ade7-235">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="1ade7-236">È possibile contattarlo al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1ade7-236">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="1ade7-237">o sul suo blog, che è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="1ade7-237">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="1ade7-238">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="1ade7-238">Special Thanks To</span></span>

<span data-ttu-id="1ade7-239">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="1ade7-239">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="1ade7-240">Hilton Giesenow, revisore per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="1ade7-240">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="1ade7-241">Se si è interessati prossimi articoli MSDN dello?</span><span class="sxs-lookup"><span data-stu-id="1ade7-241">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="1ade7-242">In questo caso, Inviami una riga in corrispondenza [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1ade7-242">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1ade7-243">[Precedente](master-detail-filtering-with-a-dropdownlist-cs.md)
> [Successivo](master-detail-filtering-across-two-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="1ade7-243">[Previous](master-detail-filtering-with-a-dropdownlist-cs.md)
[Next](master-detail-filtering-across-two-pages-cs.md)</span></span>
