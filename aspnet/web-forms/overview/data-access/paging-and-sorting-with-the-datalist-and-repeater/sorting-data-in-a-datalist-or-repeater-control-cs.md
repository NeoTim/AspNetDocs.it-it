---
uid: web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
title: Ordinamento dei dati in un controllo DataList o Repeater (C#) | Microsoft Docs
author: rick-anderson
description: In questa esercitazione verrà illustrato come includere il supporto di ordinamento in DataList e Repeater, nonché come creare un DataList o un ripetitore i cui dati possono...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: f52c302a-1b7c-46fe-8a13-8412c95cbf6d
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
msc.type: authoredcontent
ms.openlocfilehash: 66a09c637d33c812b39e0ce85a552bd71665a2e1
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78620281"
---
# <a name="sorting-data-in-a-datalist-or-repeater-control-c"></a><span data-ttu-id="5d995-103">Ordinamento dei dati in un controllo DataList o Repeater (C#)</span><span class="sxs-lookup"><span data-stu-id="5d995-103">Sorting Data in a DataList or Repeater Control (C#)</span></span>

<span data-ttu-id="5d995-104">di [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5d995-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5d995-105">[Scaricare l'app di esempio](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) o [scaricare il file PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="5d995-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) or [Download PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span></span>

> <span data-ttu-id="5d995-106">In questa esercitazione verrà illustrato come includere il supporto di ordinamento in DataList e Repeater, nonché come creare un oggetto DataList o Repeater i cui dati possono essere sottoposto a paging e ordinati.</span><span class="sxs-lookup"><span data-stu-id="5d995-106">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="introduction"></a><span data-ttu-id="5d995-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="5d995-107">Introduction</span></span>

<span data-ttu-id="5d995-108">Nell' [esercitazione precedente](paging-report-data-in-a-datalist-or-repeater-control-cs.md) è stato esaminato come aggiungere il supporto per il paging a un DataList.</span><span class="sxs-lookup"><span data-stu-id="5d995-108">In the [previous tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to add paging support to a DataList.</span></span> <span data-ttu-id="5d995-109">È stato creato un nuovo metodo nella classe `ProductsBLL` (`GetProductsAsPagedDataSource`) che ha restituito un oggetto `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5d995-109">We created a new method in the `ProductsBLL` class (`GetProductsAsPagedDataSource`) that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="5d995-110">Quando viene associato a un oggetto DataList o Repeater, DataList o Repeater Visualizza solo la pagina di dati richiesta.</span><span class="sxs-lookup"><span data-stu-id="5d995-110">When bound to a DataList or Repeater, the DataList or Repeater would display just the requested page of data.</span></span> <span data-ttu-id="5d995-111">Questa tecnica è simile a quella utilizzata internamente dai controlli GridView, DetailsView e FormView per fornire la funzionalità predefinita di paging predefinita.</span><span class="sxs-lookup"><span data-stu-id="5d995-111">This technique is similar to what is used internally by the GridView, DetailsView, and FormView controls to provide their built-in default paging functionality.</span></span>

<span data-ttu-id="5d995-112">Oltre a offrire supporto per il paging, GridView include anche il supporto per l'ordinamento predefinito.</span><span class="sxs-lookup"><span data-stu-id="5d995-112">In addition to offering paging support, the GridView also includes out of the box sorting support.</span></span> <span data-ttu-id="5d995-113">Né DataList né Repeater forniscono funzionalità di ordinamento predefinite; Tuttavia, le funzionalità di ordinamento possono essere aggiunte con un po' di codice.</span><span class="sxs-lookup"><span data-stu-id="5d995-113">Neither the DataList nor Repeater provides built-in sorting functionality; however, sorting features can be added with a bit of code.</span></span> <span data-ttu-id="5d995-114">In questa esercitazione verrà illustrato come includere il supporto di ordinamento in DataList e Repeater, nonché come creare un oggetto DataList o Repeater i cui dati possono essere sottoposto a paging e ordinati.</span><span class="sxs-lookup"><span data-stu-id="5d995-114">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="a-review-of-sorting"></a><span data-ttu-id="5d995-115">Verifica dell'ordinamento</span><span class="sxs-lookup"><span data-stu-id="5d995-115">A Review of Sorting</span></span>

<span data-ttu-id="5d995-116">Come si è visto nell'esercitazione [paging e ordinamento dei dati del report](../paging-and-sorting/paging-and-sorting-report-data-cs.md) , il controllo GridView fornisce il supporto per l'ordinamento predefinito.</span><span class="sxs-lookup"><span data-stu-id="5d995-116">As we saw in the [Paging and Sorting Report Data](../paging-and-sorting/paging-and-sorting-report-data-cs.md) tutorial, the GridView control provides out of the box sorting support.</span></span> <span data-ttu-id="5d995-117">A ogni campo GridView può essere associato un `SortExpression`, che indica il campo dati in base al quale ordinare i dati.</span><span class="sxs-lookup"><span data-stu-id="5d995-117">Each GridView field can have an associated `SortExpression`, which indicates the data field by which to sort the data.</span></span> <span data-ttu-id="5d995-118">Quando la proprietà `AllowSorting` di GridView è impostata su `true`, il rendering dell'intestazione di ogni campo GridView con un valore della proprietà `SortExpression` viene eseguito come LinkButton.</span><span class="sxs-lookup"><span data-stu-id="5d995-118">When the GridView s `AllowSorting` property is set to `true`, each GridView field that has a `SortExpression` property value has its header rendered as a LinkButton.</span></span> <span data-ttu-id="5d995-119">Quando un utente fa clic su un'intestazione del Campo GridView specifica, viene eseguito un postback e i dati vengono ordinati in base al campo `SortExpression`selezionato.</span><span class="sxs-lookup"><span data-stu-id="5d995-119">When a user clicks a particular GridView field s header, a postback occurs and the data is sorted according to the clicked field s `SortExpression`.</span></span>

<span data-ttu-id="5d995-120">Il controllo GridView dispone anche di una proprietà `SortExpression`, che archivia la `SortExpression` del Campo GridView in base alla quale vengono ordinati i dati.</span><span class="sxs-lookup"><span data-stu-id="5d995-120">The GridView control has a `SortExpression` property as well, which stores the `SortExpression` of the GridView field the data is sorted by.</span></span> <span data-ttu-id="5d995-121">Inoltre, una proprietà `SortDirection` indica se i dati devono essere ordinati in ordine crescente o decrescente (se un utente fa clic due volte sul collegamento di un'intestazione del Campo GridView) in successione, il tipo di ordinamento viene attivato o disattivato.</span><span class="sxs-lookup"><span data-stu-id="5d995-121">Additionally, a `SortDirection` property indicates whether the data is to be sorted in ascending or descending order (if a user clicks a particular GridView field s header link twice in succession, the sort order is toggled).</span></span>

<span data-ttu-id="5d995-122">Quando GridView è associato al controllo origine dati, passa le relative `SortExpression` e `SortDirection` proprietà al controllo origine dati.</span><span class="sxs-lookup"><span data-stu-id="5d995-122">When the GridView is bound to its data source control, it hands off its `SortExpression` and `SortDirection` properties to the data source control.</span></span> <span data-ttu-id="5d995-123">Il controllo origine dati recupera i dati e li ordina in base alle proprietà `SortExpression` e `SortDirection` fornite.</span><span class="sxs-lookup"><span data-stu-id="5d995-123">The data source control retrieves the data and then sorts it according to the supplied `SortExpression` and `SortDirection` properties.</span></span> <span data-ttu-id="5d995-124">Dopo aver ordinato i dati, il controllo origine dati lo restituisce a GridView.</span><span class="sxs-lookup"><span data-stu-id="5d995-124">After sorting the data, the data source control returns it to the GridView.</span></span>

<span data-ttu-id="5d995-125">Per replicare questa funzionalità con i controlli DataList o Repeater, è necessario:</span><span class="sxs-lookup"><span data-stu-id="5d995-125">To replicate this functionality with the DataList or Repeater controls, we must:</span></span>

- <span data-ttu-id="5d995-126">Creare un'interfaccia di ordinamento</span><span class="sxs-lookup"><span data-stu-id="5d995-126">Create a sorting interface</span></span>
- <span data-ttu-id="5d995-127">Ricordare il campo dati in base a cui eseguire l'ordinamento e se eseguire l'ordinamento in ordine crescente o decrescente</span><span class="sxs-lookup"><span data-stu-id="5d995-127">Remember the data field to sort by and whether to sort in ascending or descending order</span></span>
- <span data-ttu-id="5d995-128">Indicare a ObjectDataSource di ordinare i dati in base a un campo dati specifico</span><span class="sxs-lookup"><span data-stu-id="5d995-128">Instruct the ObjectDataSource to sort the data by a particular data field</span></span>

<span data-ttu-id="5d995-129">Queste tre attività verranno affrontate nei passaggi 3 e 4.</span><span class="sxs-lookup"><span data-stu-id="5d995-129">We'll tackle these three tasks in steps 3 and 4.</span></span> <span data-ttu-id="5d995-130">In seguito verrà illustrato come includere il supporto per il paging e l'ordinamento in un oggetto DataList o Repeater.</span><span class="sxs-lookup"><span data-stu-id="5d995-130">Following that, we'll examine how to include both paging and sorting support in a DataList or Repeater.</span></span>

## <a name="step-2-displaying-the-products-in-a-repeater"></a><span data-ttu-id="5d995-131">Passaggio 2: visualizzazione dei prodotti in un Repeater</span><span class="sxs-lookup"><span data-stu-id="5d995-131">Step 2: Displaying the Products in a Repeater</span></span>

<span data-ttu-id="5d995-132">Prima di preoccuparsi di implementare una delle funzionalità relative all'ordinamento, è necessario innanzitutto elencare i prodotti in un controllo Repeater.</span><span class="sxs-lookup"><span data-stu-id="5d995-132">Before we worry about implementing any of the sorting-related functionality, let s start by listing the products in a Repeater control.</span></span> <span data-ttu-id="5d995-133">Per iniziare, aprire la pagina `Sorting.aspx` nella cartella `PagingSortingDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="5d995-133">Start by opening the `Sorting.aspx` page in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="5d995-134">Aggiungere un controllo Repeater alla pagina Web, impostando la relativa proprietà `ID` su `SortableProducts`.</span><span class="sxs-lookup"><span data-stu-id="5d995-134">Add a Repeater control to the web page, setting its `ID` property to `SortableProducts`.</span></span> <span data-ttu-id="5d995-135">Dallo smart tag del Repeater, creare un nuovo ObjectDataSource denominato `ProductsDataSource` e configurarlo per il recupero dei dati dal metodo `GetProducts()` della classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="5d995-135">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource` and configure it to retrieve data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="5d995-136">Selezionare l'opzione (nessuno) dagli elenchi a discesa nelle schede Inserisci, aggiorna ed Elimina.</span><span class="sxs-lookup"><span data-stu-id="5d995-136">Select the (None) option from the drop-down lists in the INSERT, UPDATE, and DELETE tabs.</span></span>

<span data-ttu-id="5d995-137">[![creare un ObjectDataSource e configurarlo per l'uso del metodo GetProductsAsPagedDataSource ()](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-137">[![Create an ObjectDataSource and Configure it to Use the GetProductsAsPagedDataSource() Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="5d995-138">**Figura 1**: creare un ObjectDataSource e configurarlo per l'uso del metodo `GetProductsAsPagedDataSource()` ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-138">**Figure 1**: Create an ObjectDataSource and Configure it to Use the `GetProductsAsPagedDataSource()` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span></span>

<span data-ttu-id="5d995-139">[![impostare gli elenchi a discesa nelle schede Aggiorna, Inserisci ed Elimina su (nessuno)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-139">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="5d995-140">**Figura 2**: impostare gli elenchi a discesa nelle schede di aggiornamento, inserimento ed eliminazione su (nessuno) ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-140">**Figure 2**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None) ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span></span>

<span data-ttu-id="5d995-141">A differenza di DataList, Visual Studio non crea automaticamente un `ItemTemplate` per il controllo Repeater dopo l'associazione a un'origine dati.</span><span class="sxs-lookup"><span data-stu-id="5d995-141">Unlike with the DataList, Visual Studio does not automatically create an `ItemTemplate` for the Repeater control after binding it to a data source.</span></span> <span data-ttu-id="5d995-142">Inoltre, è necessario aggiungere questo `ItemTemplate` in modo dichiarativo, perché lo smart tag del controllo Repeater non dispone dell'opzione modifica modelli disponibile in DataList.</span><span class="sxs-lookup"><span data-stu-id="5d995-142">Furthermore, we must add this `ItemTemplate` declaratively, as the Repeater control s smart tag lacks the Edit Templates option found in the DataList s.</span></span> <span data-ttu-id="5d995-143">Consente di utilizzare la stessa `ItemTemplate` dell'esercitazione precedente, che Visualizza il nome, il fornitore e la categoria del prodotto.</span><span class="sxs-lookup"><span data-stu-id="5d995-143">Let s use the same `ItemTemplate` from the previous tutorial, which displayed the product s name, supplier, and category.</span></span>

<span data-ttu-id="5d995-144">Dopo aver aggiunto il `ItemTemplate`, il markup dichiarativo Repeater e ObjectDataSource dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="5d995-144">After adding the `ItemTemplate`, the Repeater and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample1.aspx)]

<span data-ttu-id="5d995-145">Nella figura 3 Questa pagina viene visualizzata in un browser.</span><span class="sxs-lookup"><span data-stu-id="5d995-145">Figure 3 shows this page when viewed through a browser.</span></span>

<span data-ttu-id="5d995-146">[![viene visualizzato il nome, il fornitore e la categoria di ogni prodotto](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-146">[![Each Product s Name, Supplier, and Category is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="5d995-147">**Figura 3**: viene visualizzato il nome, il fornitore e la categoria di ogni prodotto ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-147">**Figure 3**: Each Product s Name, Supplier, and Category is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span></span>

## <a name="step-3-instructing-the-objectdatasource-to-sort-the-data"></a><span data-ttu-id="5d995-148">Passaggio 3: istruzioni su ObjectDataSource per ordinare i dati</span><span class="sxs-lookup"><span data-stu-id="5d995-148">Step 3: Instructing the ObjectDataSource to Sort the Data</span></span>

<span data-ttu-id="5d995-149">Per ordinare i dati visualizzati nel Repeater, è necessario informare ObjectDataSource dell'espressione di ordinamento in base alla quale i dati devono essere ordinati.</span><span class="sxs-lookup"><span data-stu-id="5d995-149">To sort the data displayed in the Repeater, we need to inform the ObjectDataSource of the sort expression by which the data should be sorted.</span></span> <span data-ttu-id="5d995-150">Prima che ObjectDataSource recuperi i dati, genera prima di tutto il relativo [evento`Selecting`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), che offre la possibilità di specificare un'espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-150">Before the ObjectDataSource retrieves its data, it first fires its [`Selecting` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), which provides an opportunity for us to specify a sort expression.</span></span> <span data-ttu-id="5d995-151">Al gestore dell'evento `Selecting` viene passato un oggetto di tipo [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), che dispone di una proprietà denominata [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) di tipo [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d995-151">The `Selecting` event handler is passed an object of type [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), which has a property named [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) of type [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span></span> <span data-ttu-id="5d995-152">La classe `DataSourceSelectArguments` è progettata per passare richieste correlate ai dati da un consumer di dati al controllo origine dati e include una [proprietà`SortExpression`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d995-152">The `DataSourceSelectArguments` class is designed to pass data-related requests from a consumer of data to the data source control, and includes a [`SortExpression` property](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span></span>

<span data-ttu-id="5d995-153">Per passare le informazioni di ordinamento dalla pagina ASP.NET a ObjectDataSource, creare un gestore eventi per l'evento `Selecting` e usare il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="5d995-153">To pass sorting information from the ASP.NET page to the ObjectDataSource, create an event handler for the `Selecting` event and use the following code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample2.cs)]

<span data-ttu-id="5d995-154">Al valore *SortExpression* deve essere assegnato il nome del campo dati in base al quale ordinare i dati, ad esempio ProductName.</span><span class="sxs-lookup"><span data-stu-id="5d995-154">The *sortExpression* value should be assigned the name of the data field to sort the data by (such as ProductName ).</span></span> <span data-ttu-id="5d995-155">Non esiste alcuna proprietà relativa alla direzione di ordinamento, pertanto se si desidera ordinare i dati in ordine decrescente, aggiungere la stringa DESC al valore *SortExpression* (ad esempio ProductName DESC).</span><span class="sxs-lookup"><span data-stu-id="5d995-155">There is no sort direction-related property, so if you want to sort the data in descending order, append the string DESC to the *sortExpression* value (such as ProductName DESC ).</span></span>

<span data-ttu-id="5d995-156">Procedere e provare alcuni valori hardcoded diversi per *SortExpression* e testare i risultati in un browser.</span><span class="sxs-lookup"><span data-stu-id="5d995-156">Go ahead and try some different hard-coded values for *sortExpression* and test the results in a browser.</span></span> <span data-ttu-id="5d995-157">Come illustrato nella figura 4, quando si usa ProductName DESC come *SortExpression*, i prodotti vengono ordinati in base al nome in ordine alfabetico inverso.</span><span class="sxs-lookup"><span data-stu-id="5d995-157">As Figure 4 shows, when using ProductName DESC as the *sortExpression*, the products are sorted by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="5d995-158">[![i prodotti sono ordinati in base al nome in ordine alfabetico inverso](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-158">[![The Products are Sorted by their Name in Reverse Alphabetical Order](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="5d995-159">**Figura 4**: i prodotti sono ordinati in base al nome in ordine alfabetico inverso ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-159">**Figure 4**: The Products are Sorted by their Name in Reverse Alphabetical Order ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span></span>

## <a name="step-4-creating-the-sorting-interface-and-remembering-the-sort-expression-and-direction"></a><span data-ttu-id="5d995-160">Passaggio 4: creare l'interfaccia di ordinamento e ricordare l'espressione e la direzione di ordinamento</span><span class="sxs-lookup"><span data-stu-id="5d995-160">Step 4: Creating the Sorting Interface and Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="5d995-161">L'attivazione del supporto di ordinamento in GridView converte ogni testo dell'intestazione del campo ordinabile in un LinkButton che, quando selezionato, Ordina i dati di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="5d995-161">Turning on sorting support in the GridView converts each sortable field s header text into a LinkButton that, when clicked, sorts the data accordingly.</span></span> <span data-ttu-id="5d995-162">Un'interfaccia di ordinamento di questo tipo è utile per GridView, in cui i dati vengono disposti in colonne in modo accurato.</span><span class="sxs-lookup"><span data-stu-id="5d995-162">Such a sorting interface makes sense for the GridView, where its data is neatly laid out in columns.</span></span> <span data-ttu-id="5d995-163">Per i controlli DataList e Repeater, tuttavia, è necessaria un'interfaccia di ordinamento diversa.</span><span class="sxs-lookup"><span data-stu-id="5d995-163">For the DataList and Repeater controls, however, a different sorting interface is needed.</span></span> <span data-ttu-id="5d995-164">Un'interfaccia di ordinamento comune per un elenco di dati (in contrapposizione a una griglia di dati) è un elenco a discesa che fornisce i campi in base ai quali è possibile ordinare i dati.</span><span class="sxs-lookup"><span data-stu-id="5d995-164">A common sorting interface for a list of data (as opposed to a grid of data), is a drop-down list that provides the fields by which the data can be sorted.</span></span> <span data-ttu-id="5d995-165">Consente di implementare tale interfaccia per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="5d995-165">Let s implement such an interface for this tutorial.</span></span>

<span data-ttu-id="5d995-166">Aggiungere un controllo Web DropDownList sopra il `SortableProducts` Repeater e impostare la relativa proprietà `ID` su `SortBy`.</span><span class="sxs-lookup"><span data-stu-id="5d995-166">Add a DropDownList Web control above the `SortableProducts` Repeater and set its `ID` property to `SortBy`.</span></span> <span data-ttu-id="5d995-167">Dal Finestra Proprietà fare clic sui puntini di sospensione nella proprietà `Items` per visualizzare l'editor della raccolta ListItem.</span><span class="sxs-lookup"><span data-stu-id="5d995-167">From the Properties window, click the ellipses in the `Items` property to bring up the ListItem Collection Editor.</span></span> <span data-ttu-id="5d995-168">Aggiungere `ListItem` s per ordinare i dati in base ai campi `ProductName`, `CategoryName`e `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="5d995-168">Add `ListItem` s to sort the data by the `ProductName`, `CategoryName`, and `SupplierName` fields.</span></span> <span data-ttu-id="5d995-169">Aggiungere inoltre un `ListItem` per ordinare i prodotti in base al nome in ordine alfabetico inverso.</span><span class="sxs-lookup"><span data-stu-id="5d995-169">Also add a `ListItem` to sort the products by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="5d995-170">Le proprietà `ListItem` `Text` possono essere impostate su qualsiasi valore, ad esempio nome, ma le proprietà `Value` devono essere impostate sul nome del campo dati, ad esempio ProductName.</span><span class="sxs-lookup"><span data-stu-id="5d995-170">The `ListItem` `Text` properties can be set to any value (such as Name ), but the `Value` properties must be set to the name of the data field (such as ProductName ).</span></span> <span data-ttu-id="5d995-171">Per ordinare i risultati in ordine decrescente, aggiungere la stringa DESC al nome del campo dati, ad esempio ProductName DESC.</span><span class="sxs-lookup"><span data-stu-id="5d995-171">To sort the results in descending order, append the string DESC to the data field name, like ProductName DESC .</span></span>

![Aggiungere un oggetto ListItem per ogni campo dati ordinabile](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image13.png)

<span data-ttu-id="5d995-173">**Figura 5**: aggiungere un `ListItem` per ogni campo dati ordinabile</span><span class="sxs-lookup"><span data-stu-id="5d995-173">**Figure 5**: Add a `ListItem` for Each of the Sortable Data Fields</span></span>

<span data-ttu-id="5d995-174">Infine, aggiungere un controllo Web Button a destra di DropDownList.</span><span class="sxs-lookup"><span data-stu-id="5d995-174">Finally, add a Button Web control to the right of the DropDownList.</span></span> <span data-ttu-id="5d995-175">Impostare la relativa `ID` su `RefreshRepeater` e la relativa proprietà `Text` da aggiornare.</span><span class="sxs-lookup"><span data-stu-id="5d995-175">Set its `ID` to `RefreshRepeater` and its `Text` property to Refresh .</span></span>

<span data-ttu-id="5d995-176">Dopo aver creato il `ListItem` e aver aggiunto il pulsante Aggiorna, la sintassi dichiarativa DropDownList e Button s dovrebbe essere simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="5d995-176">After creating the `ListItem` s and adding the Refresh button, the DropDownList and Button s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample3.aspx)]

<span data-ttu-id="5d995-177">Al termine dell'ordinamento, è necessario aggiornare il gestore dell'evento ObjectDataSource s `Selecting` in modo che utilizzi la proprietà `Value` `SortBy``ListItem` s selezionata anziché un'espressione di ordinamento hardcoded.</span><span class="sxs-lookup"><span data-stu-id="5d995-177">With the sorting DropDownList complete, we next need to update the ObjectDataSource s `Selecting` event handler so that it uses the selected `SortBy``ListItem` s `Value` property as opposed to a hard-coded sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample4.cs)]

<span data-ttu-id="5d995-178">A questo punto, quando si visita la pagina per la prima volta, i prodotti verranno ordinati inizialmente in base al campo dati `ProductName`, perché il `SortBy` `ListItem` selezionato per impostazione predefinita (vedere la figura 6).</span><span class="sxs-lookup"><span data-stu-id="5d995-178">At this point when first visiting the page the products will initially be sorted by the `ProductName` data field, as it s the `SortBy` `ListItem` selected by default (see Figure 6).</span></span> <span data-ttu-id="5d995-179">Se si seleziona un'opzione di ordinamento diversa, ad esempio Category e si fa clic su Refresh, verrà generato un postback e i dati verranno ordinati di nuovo in base al nome della categoria, come illustrato nella figura 7.</span><span class="sxs-lookup"><span data-stu-id="5d995-179">Selecting a different sorting option such as Category and clicking Refresh will cause a postback and re-sort the data by the category name, as Figure 7 shows.</span></span>

<span data-ttu-id="5d995-180">[![i prodotti vengono inizialmente ordinati in base al nome](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-180">[![The Products are Initially Sorted by their Name](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span></span>

<span data-ttu-id="5d995-181">**Figura 6**: i prodotti vengono inizialmente ordinati in base al nome ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-181">**Figure 6**: The Products are Initially Sorted by their Name ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span></span>

<span data-ttu-id="5d995-182">[![i prodotti sono ora ordinati per categoria](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-182">[![The Products are Now Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span></span>

<span data-ttu-id="5d995-183">**Figura 7**: i prodotti sono ora ordinati per categoria ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-183">**Figure 7**: The Products are Now Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5d995-184">Se si fa clic sul pulsante Aggiorna, i dati verranno automaticamente riordinati perché lo stato di visualizzazione del Repeater è stato disabilitato, causando la riassociazione del ripetitore alla relativa origine dati in ogni postback.</span><span class="sxs-lookup"><span data-stu-id="5d995-184">Clicking the Refresh button causes the data to automatically be re-sorted because the Repeater s view state has been disabled, thereby causing the Repeater to rebind to its data source on every postback.</span></span> <span data-ttu-id="5d995-185">Se lo stato di visualizzazione del Repeater è abilitato, la modifica dell'elenco a discesa dell'ordinamento non avrà alcun effetto sull'ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-185">If you ve left the Repeater s view state enabled, changing the sorting drop-down list won't have any affect on the sort order.</span></span> <span data-ttu-id="5d995-186">Per risolvere questo problema, creare un gestore eventi per l'evento `Click` pulsante Aggiorna e riassociare il ripetitore alla relativa origine dati (chiamando il metodo Repeater s `DataBind()`).</span><span class="sxs-lookup"><span data-stu-id="5d995-186">To remedy this, create an event handler for the Refresh Button s `Click` event and rebind the Repeater to its data source (by calling the Repeater s `DataBind()` method).</span></span>

## <a name="remembering-the-sort-expression-and-direction"></a><span data-ttu-id="5d995-187">Ricordando l'espressione e la direzione di ordinamento</span><span class="sxs-lookup"><span data-stu-id="5d995-187">Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="5d995-188">Quando si crea un oggetto DataList o Repeater ordinabile in una pagina in cui possono verificarsi postback non correlati all'ordinamento, è imperativo che l'espressione e la direzione di ordinamento vengano memorizzate nei postback.</span><span class="sxs-lookup"><span data-stu-id="5d995-188">When creating a sortable DataList or Repeater on a page where non-sort related postbacks may occur, it s imperative that the sort expression and direction be remembered across postbacks.</span></span> <span data-ttu-id="5d995-189">Si supponga, ad esempio, di aver aggiornato il ripetitore in questa esercitazione per includere un pulsante Elimina con ogni prodotto.</span><span class="sxs-lookup"><span data-stu-id="5d995-189">For example, imagine that we updated the Repeater in this tutorial to include a Delete button with each product.</span></span> <span data-ttu-id="5d995-190">Quando l'utente fa clic sul pulsante Elimina, viene eseguito il codice per eliminare il prodotto selezionato, quindi i dati vengono riassociati al ripetitore.</span><span class="sxs-lookup"><span data-stu-id="5d995-190">When the user clicks the Delete button we d run some code to delete the selected product and then rebind the data to the Repeater.</span></span> <span data-ttu-id="5d995-191">Se i dettagli di ordinamento non sono salvati in modo permanente durante il postback, i dati visualizzati sullo schermo verranno ripristinati nell'ordinamento originale.</span><span class="sxs-lookup"><span data-stu-id="5d995-191">If the sort details are not persisted across postback, the data displayed on screen will revert to the original sort order.</span></span>

<span data-ttu-id="5d995-192">Per questa esercitazione, il DropDownList Salva in modo implicito l'espressione e la direzione di ordinamento nello stato di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="5d995-192">For this tutorial, the DropDownList implicitly saves the sort expression and direction in its view state for us.</span></span> <span data-ttu-id="5d995-193">Se si utilizzava un'interfaccia di ordinamento diversa con, ad dirsi, gli LinkButton che fornivano le varie opzioni di ordinamento necessarie per ricordare il tipo di ordinamento nei postback.</span><span class="sxs-lookup"><span data-stu-id="5d995-193">If we were using a different sorting interface one with, say, LinkButtons that provided the various sorting options we d need to take care to remember the sort order across postbacks.</span></span> <span data-ttu-id="5d995-194">Questa operazione può essere eseguita archiviando i parametri di ordinamento nello stato di visualizzazione della pagina, includendo il parametro sort in QueryString o tramite un'altra tecnica di persistenza dello stato.</span><span class="sxs-lookup"><span data-stu-id="5d995-194">This could be accomplished by storing the sorting parameters in the page s view state, by including the sort parameter in the querystring, or through some other state persistence technique.</span></span>

<span data-ttu-id="5d995-195">Negli esempi futuri in questa esercitazione viene illustrato come salvare in modo permanente i dettagli di ordinamento nello stato di visualizzazione della pagina.</span><span class="sxs-lookup"><span data-stu-id="5d995-195">Future examples in this tutorial explore how to persist the sorting details in the page s view state.</span></span>

## <a name="step-5-adding-sorting-support-to-a-datalist-that-uses-default-paging"></a><span data-ttu-id="5d995-196">Passaggio 5: aggiunta del supporto per l'ordinamento a un DataList che usa il paging predefinito</span><span class="sxs-lookup"><span data-stu-id="5d995-196">Step 5: Adding Sorting Support to a DataList that Uses Default Paging</span></span>

<span data-ttu-id="5d995-197">Nell' [esercitazione precedente](paging-report-data-in-a-datalist-or-repeater-control-cs.md) è stato esaminato come implementare il paging predefinito con un DataList.</span><span class="sxs-lookup"><span data-stu-id="5d995-197">In the [preceding tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to implement default paging with a DataList.</span></span> <span data-ttu-id="5d995-198">È possibile estendere questo esempio precedente per includere la possibilità di ordinare i dati di paging.</span><span class="sxs-lookup"><span data-stu-id="5d995-198">Let s extend this previous example to include the ability to sort the paged data.</span></span> <span data-ttu-id="5d995-199">Per iniziare, aprire le pagine `SortingWithDefaultPaging.aspx` e `Paging.aspx` nella cartella `PagingSortingDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="5d995-199">Start by opening the `SortingWithDefaultPaging.aspx` and `Paging.aspx` pages in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="5d995-200">Nella pagina `Paging.aspx` fare clic sul pulsante origine per visualizzare il markup dichiarativo della pagina.</span><span class="sxs-lookup"><span data-stu-id="5d995-200">From the `Paging.aspx` page, click on the Source button to view the page s declarative markup.</span></span> <span data-ttu-id="5d995-201">Copiare il testo selezionato (vedere la figura 8) e incollarlo nel markup dichiarativo di `SortingWithDefaultPaging.aspx` tra i tag di `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="5d995-201">Copy the selected text (see Figure 8) and paste it into the declarative markup of `SortingWithDefaultPaging.aspx` between the `<asp:Content>` tags.</span></span>

<span data-ttu-id="5d995-202">[![replicare il markup dichiarativo nei tag &lt;ASP: content&gt; da paging. aspx a SortingWithDefaultPaging. aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-202">[![Replicate the Declarative Markup in the &lt;asp:Content&gt; Tags from Paging.aspx to SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span></span>

<span data-ttu-id="5d995-203">**Figura 8**: replicare il markup dichiarativo nei tag `<asp:Content>` da `Paging.aspx` a `SortingWithDefaultPaging.aspx` ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-203">**Figure 8**: Replicate the Declarative Markup in the `<asp:Content>` Tags from `Paging.aspx` to `SortingWithDefaultPaging.aspx` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span></span>

<span data-ttu-id="5d995-204">Dopo aver copiato il markup dichiarativo, copiare i metodi e le proprietà nella classe code-behind della pagina `Paging.aspx` nella classe code-behind per `SortingWithDefaultPaging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5d995-204">After copying the declarative markup, copy the methods and properties in the `Paging.aspx` page s code-behind class to the code-behind class for `SortingWithDefaultPaging.aspx`.</span></span> <span data-ttu-id="5d995-205">Successivamente, è necessario visualizzare la pagina `SortingWithDefaultPaging.aspx` in un browser.</span><span class="sxs-lookup"><span data-stu-id="5d995-205">Next, take a moment to view the `SortingWithDefaultPaging.aspx` page in a browser.</span></span> <span data-ttu-id="5d995-206">Dovrebbe presentare la stessa funzionalità e l'aspetto di `Paging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5d995-206">It should exhibit the same functionality and appearance as `Paging.aspx`.</span></span>

## <a name="enhancing-productsbll-to-include-a-default-paging-and-sorting-method"></a><span data-ttu-id="5d995-207">Miglioramento di ProductsBLL per includere un metodo di paging e ordinamento predefinito</span><span class="sxs-lookup"><span data-stu-id="5d995-207">Enhancing ProductsBLL to Include a Default Paging and Sorting Method</span></span>

<span data-ttu-id="5d995-208">Nell'esercitazione precedente è stato creato un metodo di `GetProductsAsPagedDataSource(pageIndex, pageSize)` nella classe `ProductsBLL` che ha restituito un oggetto `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5d995-208">In the previous tutorial we created a `GetProductsAsPagedDataSource(pageIndex, pageSize)` method in the `ProductsBLL` class that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="5d995-209">Questo `PagedDataSource` oggetto è stato popolato con *tutti* i prodotti (tramite il metodo BLL s `GetProducts()`), ma quando associato a DataList sono stati visualizzati solo i record corrispondenti ai parametri di input *pageIndex* e *pageSize* specificati.</span><span class="sxs-lookup"><span data-stu-id="5d995-209">This `PagedDataSource` object was populated with *all* of the products (via the BLL s `GetProducts()` method), but when bound to the DataList only those records corresponding to the specified *pageIndex* and *pageSize* input parameters were displayed.</span></span>

<span data-ttu-id="5d995-210">In precedenza in questa esercitazione è stato aggiunto il supporto per l'ordinamento specificando l'espressione di ordinamento dal gestore dell'evento ObjectDataSource s `Selecting`.</span><span class="sxs-lookup"><span data-stu-id="5d995-210">Earlier in this tutorial we added sorting support by specifying the sort expression from the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="5d995-211">Questo funziona bene quando ObjectDataSource restituisce un oggetto che può essere ordinato, ad esempio il `ProductsDataTable` restituito dal metodo `GetProducts()`.</span><span class="sxs-lookup"><span data-stu-id="5d995-211">This works well when the ObjectDataSource is returned an object that can be sorted, like the `ProductsDataTable` returned by the `GetProducts()` method.</span></span> <span data-ttu-id="5d995-212">Tuttavia, l'oggetto `PagedDataSource` restituito dal metodo `GetProductsAsPagedDataSource` non supporta l'ordinamento della relativa origine dati interna.</span><span class="sxs-lookup"><span data-stu-id="5d995-212">However, the `PagedDataSource` object returned by the `GetProductsAsPagedDataSource` method does not support sorting of its inner data source.</span></span> <span data-ttu-id="5d995-213">Al contrario, è necessario ordinare i risultati restituiti dal metodo `GetProducts()` *prima* di inserirli nel `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5d995-213">Instead, we need to sort the results returned from the `GetProducts()` method *before* we put it in the `PagedDataSource`.</span></span>

<span data-ttu-id="5d995-214">A tale scopo, creare un nuovo metodo nella classe `ProductsBLL` `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span><span class="sxs-lookup"><span data-stu-id="5d995-214">To accomplish this, create a new method in the `ProductsBLL` class, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span></span> <span data-ttu-id="5d995-215">Per ordinare le `ProductsDataTable` restituite dal metodo `GetProducts()`, specificare la proprietà `Sort` del `DataTableView`predefinito:</span><span class="sxs-lookup"><span data-stu-id="5d995-215">To sort the `ProductsDataTable` returned by the `GetProducts()` method, specify the `Sort` property of its default `DataTableView`:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample5.cs)]

<span data-ttu-id="5d995-216">Il metodo `GetProductsSortedAsPagedDataSource` differisce solo leggermente dal metodo `GetProductsAsPagedDataSource` creato nell'esercitazione precedente.</span><span class="sxs-lookup"><span data-stu-id="5d995-216">The `GetProductsSortedAsPagedDataSource` method differs only slightly from the `GetProductsAsPagedDataSource` method created in the previous tutorial.</span></span> <span data-ttu-id="5d995-217">In particolare, `GetProductsSortedAsPagedDataSource` accetta un parametro di input aggiuntivo `sortExpression` e assegna questo valore alla proprietà `Sort` del `DefaultView``ProductDataTable`.</span><span class="sxs-lookup"><span data-stu-id="5d995-217">In particular, `GetProductsSortedAsPagedDataSource` accepts an additional input parameter `sortExpression` and assigns this value to the `Sort` property of the `ProductDataTable` s `DefaultView`.</span></span> <span data-ttu-id="5d995-218">Alcune righe di codice in un secondo momento, l'origine dati dell'oggetto `PagedDataSource` viene assegnata al `ProductDataTable` s `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="5d995-218">A few lines of code later, the `PagedDataSource` object s DataSource is assigned the `ProductDataTable` s `DefaultView`.</span></span>

## <a name="calling-the-getproductssortedaspageddatasource-method-and-specifying-the-value-for-the-sortexpression-input-parameter"></a><span data-ttu-id="5d995-219">Chiamata del metodo GetProductsSortedAsPagedDataSource e specifica del valore per il parametro di input SortExpression</span><span class="sxs-lookup"><span data-stu-id="5d995-219">Calling the GetProductsSortedAsPagedDataSource Method and Specifying the Value for the SortExpression Input Parameter</span></span>

<span data-ttu-id="5d995-220">Con il metodo `GetProductsSortedAsPagedDataSource` completo, il passaggio successivo consiste nel fornire il valore per questo parametro.</span><span class="sxs-lookup"><span data-stu-id="5d995-220">With the `GetProductsSortedAsPagedDataSource` method complete, the next step is to provide the value for this parameter.</span></span> <span data-ttu-id="5d995-221">ObjectDataSource in `SortingWithDefaultPaging.aspx` è attualmente configurato per chiamare il metodo `GetProductsAsPagedDataSource` e passa i due parametri di input attraverso i due `QueryStringParameters`specificati nella raccolta `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="5d995-221">The ObjectDataSource in `SortingWithDefaultPaging.aspx` is currently configured to call the `GetProductsAsPagedDataSource` method and passes in the two input parameters through its two `QueryStringParameters`, which are specified in the `SelectParameters` collection.</span></span> <span data-ttu-id="5d995-222">Queste due `QueryStringParameters` indicano che l'origine per i parametri del metodo `GetProductsAsPagedDataSource` s *pageIndex* e *pageSize* proviene dai campi QueryString `pageIndex` e `pageSize`.</span><span class="sxs-lookup"><span data-stu-id="5d995-222">These two `QueryStringParameters` indicate that the source for the `GetProductsAsPagedDataSource` method s *pageIndex* and *pageSize* parameters come from the querystring fields `pageIndex` and `pageSize`.</span></span>

<span data-ttu-id="5d995-223">Aggiornare la proprietà `SelectMethod` di ObjectDataSource in modo che richiami il nuovo metodo `GetProductsSortedAsPagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5d995-223">Update the ObjectDataSource s `SelectMethod` property so that it invokes the new `GetProductsSortedAsPagedDataSource` method.</span></span> <span data-ttu-id="5d995-224">Aggiungere quindi un nuovo `QueryStringParameter` in modo da accedere al parametro di input *SortExpression* dal campo QueryString `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="5d995-224">Then, add a new `QueryStringParameter` so that the *sortExpression* input parameter is accessed from the querystring field `sortExpression`.</span></span> <span data-ttu-id="5d995-225">Impostare la `QueryStringParameter` s `DefaultValue` su ProductName.</span><span class="sxs-lookup"><span data-stu-id="5d995-225">Set the `QueryStringParameter` s `DefaultValue` to ProductName .</span></span>

<span data-ttu-id="5d995-226">Dopo queste modifiche, il markup dichiarativo di ObjectDataSource dovrebbe avere un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="5d995-226">After these changes, the ObjectDataSource s declarative markup should look like:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample6.aspx)]

<span data-ttu-id="5d995-227">A questo punto, nella pagina `SortingWithDefaultPaging.aspx` i risultati vengono ordinati in ordine alfabetico in base al nome del prodotto (vedere la figura 9).</span><span class="sxs-lookup"><span data-stu-id="5d995-227">At this point, the `SortingWithDefaultPaging.aspx` page will sort its results alphabetically by the product name (see Figure 9).</span></span> <span data-ttu-id="5d995-228">Questo perché, per impostazione predefinita, un valore di ProductName viene passato come il parametro *SortExpression* del metodo `GetProductsSortedAsPagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5d995-228">This is because, by default, a value of ProductName is passed in as the `GetProductsSortedAsPagedDataSource` method s *sortExpression* parameter.</span></span>

<span data-ttu-id="5d995-229">[![per impostazione predefinita, i risultati vengono ordinati in base a ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-229">[![By Default, the Results are Sorted by ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span></span>

<span data-ttu-id="5d995-230">**Figura 9**: per impostazione predefinita, i risultati vengono ordinati in base `ProductName` ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-230">**Figure 9**: By Default, the Results are Sorted by `ProductName` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span></span>

<span data-ttu-id="5d995-231">Se si aggiunge manualmente un `sortExpression` campo QueryString, ad esempio `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` i risultati verranno ordinati in base al `sortExpression`specificato.</span><span class="sxs-lookup"><span data-stu-id="5d995-231">If you manually add a `sortExpression` querystring field such as `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` the results will be sorted by the specified `sortExpression`.</span></span> <span data-ttu-id="5d995-232">Tuttavia, questo parametro `sortExpression` non è incluso nella QueryString quando si passa a una pagina di dati diversa.</span><span class="sxs-lookup"><span data-stu-id="5d995-232">However, this `sortExpression` parameter is not included in the querystring when moving to a different page of data.</span></span> <span data-ttu-id="5d995-233">Infatti, facendo clic sui pulsanti Next o Last page ci si torna a `Paging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5d995-233">In fact, clicking on the Next or Last page buttons takes us back to `Paging.aspx`!</span></span> <span data-ttu-id="5d995-234">Attualmente non è presente alcuna interfaccia di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-234">Furthermore, there s currently no sorting interface.</span></span> <span data-ttu-id="5d995-235">L'unico modo in cui un utente può modificare l'ordinamento dei dati di paging consiste nel manipolare direttamente la QueryString.</span><span class="sxs-lookup"><span data-stu-id="5d995-235">The only way a user can change the sort order of the paged data is by manipulating the querystring directly.</span></span>

## <a name="creating-the-sorting-interface"></a><span data-ttu-id="5d995-236">Creazione dell'interfaccia di ordinamento</span><span class="sxs-lookup"><span data-stu-id="5d995-236">Creating the Sorting Interface</span></span>

<span data-ttu-id="5d995-237">Prima di tutto è necessario aggiornare il metodo `RedirectUser` per inviare l'utente a `SortingWithDefaultPaging.aspx` (anziché `Paging.aspx`) e includere il valore `sortExpression` in QueryString.</span><span class="sxs-lookup"><span data-stu-id="5d995-237">We first need to update the `RedirectUser` method to send the user to `SortingWithDefaultPaging.aspx` (instead of `Paging.aspx`) and to include the `sortExpression` value in the querystring.</span></span> <span data-ttu-id="5d995-238">È anche necessario aggiungere una proprietà `SortExpression` di sola lettura a livello di pagina.</span><span class="sxs-lookup"><span data-stu-id="5d995-238">We should also add a read-only, page-level named `SortExpression` property.</span></span> <span data-ttu-id="5d995-239">Questa proprietà, simile alle proprietà `PageIndex` e `PageSize` create nell'esercitazione precedente, restituisce il valore del campo `sortExpression` QueryString, se esistente, e il valore predefinito (ProductName) in caso contrario.</span><span class="sxs-lookup"><span data-stu-id="5d995-239">This property, similar to the `PageIndex` and `PageSize` properties created in the previous tutorial, returns the value of the `sortExpression` querystring field if it exists, and the default value ( ProductName ) otherwise.</span></span>

<span data-ttu-id="5d995-240">Attualmente il metodo `RedirectUser` accetta solo un singolo parametro di input, ovvero l'indice della pagina da visualizzare.</span><span class="sxs-lookup"><span data-stu-id="5d995-240">Currently the `RedirectUser` method accepts only a single input parameter the index of the page to display.</span></span> <span data-ttu-id="5d995-241">Tuttavia, in alcuni casi potrebbe essere necessario reindirizzare l'utente a una particolare pagina di dati usando un'espressione di ordinamento diversa da quella specificata nella QueryString.</span><span class="sxs-lookup"><span data-stu-id="5d995-241">However, there may be times when we want to redirect the user to a particular page of data using a sort expression other than what s specified in the querystring.</span></span> <span data-ttu-id="5d995-242">Nel momento in cui verrà creata l'interfaccia di ordinamento per questa pagina, che includerà una serie di controlli Web dei pulsanti per ordinare i dati in base a una colonna specificata.</span><span class="sxs-lookup"><span data-stu-id="5d995-242">In a moment we'll create the sorting interface for this page, which will include a series of Button Web controls for sorting the data by a specified column.</span></span> <span data-ttu-id="5d995-243">Quando si fa clic su uno di questi pulsanti, si desidera reindirizzare l'utente passando il valore dell'espressione di ordinamento appropriato.</span><span class="sxs-lookup"><span data-stu-id="5d995-243">When one of those Buttons is clicked, we want to redirect the user passing in the appropriate sort expression value.</span></span> <span data-ttu-id="5d995-244">Per fornire questa funzionalità, creare due versioni del metodo `RedirectUser`.</span><span class="sxs-lookup"><span data-stu-id="5d995-244">To provide this functionality, create two versions of the `RedirectUser` method.</span></span> <span data-ttu-id="5d995-245">Il primo deve accettare solo l'indice della pagina da visualizzare, mentre il secondo accetta l'indice della pagina e l'espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-245">The first one should accept just the page index to display, while the second one accepts the page index and sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample7.cs)]

<span data-ttu-id="5d995-246">Nel primo esempio di questa esercitazione è stata creata un'interfaccia di ordinamento usando un oggetto DropDownList.</span><span class="sxs-lookup"><span data-stu-id="5d995-246">In the first example in this tutorial, we created a sorting interface using a DropDownList.</span></span> <span data-ttu-id="5d995-247">Per questo esempio, è necessario usare i controlli Web a tre pulsanti posizionati sopra DataList uno per l'ordinamento in base `ProductName`, uno per `CategoryName`e uno per `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="5d995-247">For this example, let s use three Button Web controls positioned above the DataList one for sorting by `ProductName`, one for `CategoryName`, and one for `SupplierName`.</span></span> <span data-ttu-id="5d995-248">Aggiungere i controlli Web dei tre pulsanti, impostando le proprietà `ID` e `Text` in modo appropriato:</span><span class="sxs-lookup"><span data-stu-id="5d995-248">Add the three Button Web controls, setting their `ID` and `Text` properties appropriately:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample8.aspx)]

<span data-ttu-id="5d995-249">Successivamente, creare un gestore dell'evento `Click` per ogni.</span><span class="sxs-lookup"><span data-stu-id="5d995-249">Next, create a `Click` event handler for each.</span></span> <span data-ttu-id="5d995-250">I gestori di eventi devono chiamare il metodo `RedirectUser`, restituendo l'utente alla prima pagina usando l'espressione di ordinamento appropriata.</span><span class="sxs-lookup"><span data-stu-id="5d995-250">The event handlers should call the `RedirectUser` method, returning the user to the first page using the appropriate sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample9.cs)]

<span data-ttu-id="5d995-251">Quando si visita la pagina per la prima volta, i dati vengono ordinati in base al nome del prodotto in ordine alfabetico (fare riferimento alla figura 9).</span><span class="sxs-lookup"><span data-stu-id="5d995-251">When first visiting the page, the data is sorted by the product name alphabetically (refer back to Figure 9).</span></span> <span data-ttu-id="5d995-252">Fare clic sul pulsante Avanti per passare alla seconda pagina di dati, quindi fare clic sul pulsante Ordina per categoria.</span><span class="sxs-lookup"><span data-stu-id="5d995-252">Click the Next button to advance to the second page of data and then click the Sort by Category button.</span></span> <span data-ttu-id="5d995-253">Viene restituito alla prima pagina di dati, ordinata in base al nome della categoria (vedere la figura 10).</span><span class="sxs-lookup"><span data-stu-id="5d995-253">This returns us to the first page of data, sorted by category name (see Figure 10).</span></span> <span data-ttu-id="5d995-254">Analogamente, facendo clic sul pulsante Ordina per fornitore, i dati vengono ordinati in base al fornitore iniziando dalla prima pagina di dati.</span><span class="sxs-lookup"><span data-stu-id="5d995-254">Likewise, clicking the Sort by Supplier button sorts the data by supplier starting from the first page of data.</span></span> <span data-ttu-id="5d995-255">La scelta dell'ordinamento viene memorizzata quando i dati vengono sottopaginati.</span><span class="sxs-lookup"><span data-stu-id="5d995-255">The sort choice is remembered as the data is paged through.</span></span> <span data-ttu-id="5d995-256">La figura 11 Mostra la pagina dopo l'ordinamento in base alla categoria e quindi avanza alla tredicesima pagina di dati.</span><span class="sxs-lookup"><span data-stu-id="5d995-256">Figure 11 shows the page after sorting by category and then advancing to the thirteenth page of data.</span></span>

<span data-ttu-id="5d995-257">[![i prodotti sono ordinati in base alla categoria](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-257">[![The Products are Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span></span>

<span data-ttu-id="5d995-258">**Figura 10**: i prodotti sono ordinati per categoria ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-258">**Figure 10**: The Products are Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span></span>

<span data-ttu-id="5d995-259">[![l'espressione di ordinamento viene memorizzata durante il paging dei dati](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-259">[![The Sort Expression is Remembered When Paging Through the Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span></span>

<span data-ttu-id="5d995-260">**Figura 11**: l'espressione di ordinamento viene memorizzata durante il paging dei dati ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-260">**Figure 11**: The Sort Expression is Remembered When Paging Through the Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span></span>

## <a name="step-6-custom-paging-through-records-in-a-repeater"></a><span data-ttu-id="5d995-261">Passaggio 6: paging personalizzato tramite record in un Repeater</span><span class="sxs-lookup"><span data-stu-id="5d995-261">Step 6: Custom Paging Through Records in a Repeater</span></span>

<span data-ttu-id="5d995-262">L'esempio di DataList esaminato nel passaggio 5 pagine attraverso i dati utilizzando la tecnica di paging predefinita inefficiente.</span><span class="sxs-lookup"><span data-stu-id="5d995-262">The DataList example examined in step 5 pages through its data using the inefficient default paging technique.</span></span> <span data-ttu-id="5d995-263">Quando si esegue il paging in quantità sufficientemente elevate di dati, è fondamentale usare il paging personalizzato.</span><span class="sxs-lookup"><span data-stu-id="5d995-263">When paging through sufficiently large amounts of data, it is imperative that custom paging be used.</span></span> <span data-ttu-id="5d995-264">Tornando al [paging efficiente con grandi quantità di dati](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) e ordinando le esercitazioni [personalizzate sui dati](../paging-and-sorting/sorting-custom-paged-data-cs.md) di paging, sono state esaminate le differenze tra il paging predefinito e quello personalizzato e i metodi creati in BLL per l'utilizzo del paging personalizzato e l'ordinamento dei dati personalizzati di paging.</span><span class="sxs-lookup"><span data-stu-id="5d995-264">Back in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) and [Sorting Custom Paged Data](../paging-and-sorting/sorting-custom-paged-data-cs.md) tutorials, we examined the differences between default and custom paging and created methods in the BLL for utilizing custom paging and sorting custom paged data.</span></span> <span data-ttu-id="5d995-265">In particolare, in queste due esercitazioni precedenti sono stati aggiunti i tre metodi seguenti alla classe `ProductsBLL`:</span><span class="sxs-lookup"><span data-stu-id="5d995-265">In particular, in these two previous tutorials we added the following three methods to the `ProductsBLL` class:</span></span>

- <span data-ttu-id="5d995-266">`GetProductsPaged(startRowIndex, maximumRows)` restituisce un particolare subset di record a partire da *StartRowIndex* senza superare *MaximumRows*.</span><span class="sxs-lookup"><span data-stu-id="5d995-266">`GetProductsPaged(startRowIndex, maximumRows)` returns a particular subset of records starting at *startRowIndex* and not exceeding *maximumRows*.</span></span>
- <span data-ttu-id="5d995-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` restituisce un particolare subset di record ordinati in base al parametro di input *SortExpression* specificato.</span><span class="sxs-lookup"><span data-stu-id="5d995-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` returns a particular subset of records sorted by the specified *sortExpression* input parameter.</span></span>
- <span data-ttu-id="5d995-268">`TotalNumberOfProducts()` fornisce il numero totale di record nella tabella di database `Products`.</span><span class="sxs-lookup"><span data-stu-id="5d995-268">`TotalNumberOfProducts()` provides the total number of records in the `Products` database table.</span></span>

<span data-ttu-id="5d995-269">Questi metodi possono essere utilizzati per eseguire in modo efficiente la pagina e l'ordinamento tramite i dati utilizzando un controllo DataList o Repeater.</span><span class="sxs-lookup"><span data-stu-id="5d995-269">These methods can be used to efficiently page and sort through data using a DataList or Repeater control.</span></span> <span data-ttu-id="5d995-270">Per illustrare questo problema, è possibile iniziare creando un controllo Repeater con supporto per il paging personalizzato; verranno quindi aggiunte le funzionalità di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-270">To illustrate this, let s start by creating a Repeater control with custom paging support; we'll then add sorting capabilities.</span></span>

<span data-ttu-id="5d995-271">Aprire la pagina `SortingWithCustomPaging.aspx` nella cartella `PagingSortingDataListRepeater` e aggiungere un Repeater alla pagina, impostando la relativa proprietà `ID` su `Products`.</span><span class="sxs-lookup"><span data-stu-id="5d995-271">Open the `SortingWithCustomPaging.aspx` page in the `PagingSortingDataListRepeater` folder and add a Repeater to the page, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="5d995-272">Dallo smart tag del Repeater, creare un nuovo ObjectDataSource denominato `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5d995-272">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="5d995-273">Configurarlo per la selezione dei dati dal metodo `GetProductsPaged` della classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="5d995-273">Configure it to select its data from the `ProductsBLL` class s `GetProductsPaged` method.</span></span>

<span data-ttu-id="5d995-274">[![configurare ObjectDataSource per l'uso del metodo GetProductsPaged della classe ProductsBLL](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-274">[![Configure the ObjectDataSource to Use the ProductsBLL Class s GetProductsPaged Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span></span>

<span data-ttu-id="5d995-275">**Figura 12**: configurare ObjectDataSource per l'uso del metodo `ProductsBLL` Class s `GetProductsPaged` ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-275">**Figure 12**: Configure the ObjectDataSource to Use the `ProductsBLL` Class s `GetProductsPaged` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span></span>

<span data-ttu-id="5d995-276">Impostare gli elenchi a discesa nelle schede Aggiorna, Inserisci ed Elimina in (nessuno), quindi fare clic sul pulsante Avanti.</span><span class="sxs-lookup"><span data-stu-id="5d995-276">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and then click the Next button.</span></span> <span data-ttu-id="5d995-277">La configurazione guidata origine dati richiede ora le origini dei parametri di input *StartRowIndex* e *maximumRows* del metodo `GetProductsPaged`.</span><span class="sxs-lookup"><span data-stu-id="5d995-277">The Configure Data Source wizard now prompts for the sources of the `GetProductsPaged` method s *startRowIndex* and *maximumRows* input parameters.</span></span> <span data-ttu-id="5d995-278">In realtà, questi parametri di input vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="5d995-278">In actuality, these input parameters are ignored.</span></span> <span data-ttu-id="5d995-279">Al contrario, i valori *StartRowIndex* e *MaximumRows* vengono passati tramite la proprietà `Arguments` nel gestore dell'evento ObjectDataSource s `Selecting`, proprio come in questa demo di questa esercitazione è stata specificata la *SortExpression* .</span><span class="sxs-lookup"><span data-stu-id="5d995-279">Instead, the *startRowIndex* and *maximumRows* values will be passed in through the `Arguments` property in the ObjectDataSource s `Selecting` event handler, just like how we specified the *sortExpression* in this tutorial s first demo.</span></span> <span data-ttu-id="5d995-280">Lasciare quindi gli elenchi a discesa di origine parametri nella procedura guidata impostata su nessuno.</span><span class="sxs-lookup"><span data-stu-id="5d995-280">Therefore, leave the parameter source drop-down lists in the wizard set at None .</span></span>

<span data-ttu-id="5d995-281">[![lasciare le origini parametro impostate su None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-281">[![Leave the Parameter Sources Set to None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span></span>

<span data-ttu-id="5d995-282">**Figura 13**: lasciare le origini dei parametri impostate su None ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-282">**Figure 13**: Leave the Parameter Sources Set to None ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5d995-283">*Non* impostare la proprietà `EnablePaging` di ObjectDataSource su `true`.</span><span class="sxs-lookup"><span data-stu-id="5d995-283">Do *not* set the ObjectDataSource s `EnablePaging` property to `true`.</span></span> <span data-ttu-id="5d995-284">In questo modo, ObjectDataSource includerà automaticamente i propri parametri *StartRowIndex* e *MaximumRows* all'elenco di parametri esistente `SelectMethod`.</span><span class="sxs-lookup"><span data-stu-id="5d995-284">This will cause the ObjectDataSource to automatically include its own *startRowIndex* and *maximumRows* parameters to the `SelectMethod` s existing parameter list.</span></span> <span data-ttu-id="5d995-285">La proprietà `EnablePaging` è utile quando si associano dati di paging personalizzati a un controllo GridView, DetailsView o FormView perché questi controlli prevedono un determinato comportamento da ObjectDataSource che è disponibile solo quando `EnablePaging` proprietà è `true`.</span><span class="sxs-lookup"><span data-stu-id="5d995-285">The `EnablePaging` property is useful when binding custom paged data to a GridView, DetailsView, or FormView control because these controls expect certain behavior from the ObjectDataSource that s only available when `EnablePaging` property is `true`.</span></span> <span data-ttu-id="5d995-286">Poiché è necessario aggiungere manualmente il supporto per il paging per DataList e Repeater, lasciare questa proprietà impostata su `false` (impostazione predefinita), in quanto verrà preparato nella funzionalità necessaria direttamente nella pagina ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5d995-286">Since we have to manually add the paging support for the DataList and Repeater, leave this property set to `false` (the default), as we'll bake in the needed functionality directly within our ASP.NET page.</span></span>

<span data-ttu-id="5d995-287">Definire infine le `ItemTemplate` del Repeater in modo che vengano visualizzati il nome, la categoria e il fornitore del prodotto.</span><span class="sxs-lookup"><span data-stu-id="5d995-287">Finally, define the Repeater s `ItemTemplate` so that the product s name, category, and supplier are shown.</span></span> <span data-ttu-id="5d995-288">Una volta apportate queste modifiche, la sintassi dichiarativa Repeater e ObjectDataSource dovrebbe essere simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="5d995-288">After these changes, the Repeater and ObjectDataSource s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample10.aspx)]

<span data-ttu-id="5d995-289">È possibile visitare la pagina tramite un browser e notare che non viene restituito alcun record.</span><span class="sxs-lookup"><span data-stu-id="5d995-289">Take a moment to visit the page through a browser and note that no records are returned.</span></span> <span data-ttu-id="5d995-290">Questo perché è ancora necessario specificare i valori dei parametri *StartRowIndex* e *MaximumRows* . Pertanto, i valori 0 vengono passati per entrambi.</span><span class="sxs-lookup"><span data-stu-id="5d995-290">This is because we ve yet to specify the *startRowIndex* and *maximumRows* parameter values; therefore, values of 0 are being passed in for both.</span></span> <span data-ttu-id="5d995-291">Per specificare questi valori, creare un gestore eventi per l'evento `Selecting` di ObjectDataSource e impostare i valori dei parametri a livello di codice su valori hardcoded rispettivamente 0 e 5:</span><span class="sxs-lookup"><span data-stu-id="5d995-291">To specify these values, create an event handler for the ObjectDataSource s `Selecting` event and set these parameters values programmatically to hard-coded values of 0 and 5, respectively:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample11.cs)]

<span data-ttu-id="5d995-292">Con questa modifica, la pagina, se visualizzata tramite un browser, Mostra i primi cinque prodotti.</span><span class="sxs-lookup"><span data-stu-id="5d995-292">With this change, the page, when viewed through a browser, shows the first five products.</span></span>

<span data-ttu-id="5d995-293">[![vengono visualizzati i primi cinque record](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-293">[![The First Five Records are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span></span>

<span data-ttu-id="5d995-294">**Figura 14**: vengono visualizzati i primi cinque record ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-294">**Figure 14**: The First Five Records are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5d995-295">I prodotti elencati nella figura 14 sono ordinati in base al nome del prodotto perché la `GetProductsPaged` stored procedure che esegue la query di paging personalizzata efficiente Ordina i risultati per `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="5d995-295">The products listed in Figure 14 happen to be sorted by product name because the `GetProductsPaged` stored procedure that performs the efficient custom paging query orders the results by `ProductName`.</span></span>

<span data-ttu-id="5d995-296">Per consentire all'utente di scorrere le pagine, è necessario tenere traccia dell'indice della riga iniziale e del numero massimo di righe e ricordare questi valori nei postback.</span><span class="sxs-lookup"><span data-stu-id="5d995-296">In order to allow the user to step through the pages, we need to keep track of the start row index and maximum rows and remember these values across postbacks.</span></span> <span data-ttu-id="5d995-297">Nell'esempio di paging predefinito sono stati usati i campi QueryString per salvare in modo permanente questi valori. per questa demo, le informazioni vengono mantenute nello stato di visualizzazione della pagina.</span><span class="sxs-lookup"><span data-stu-id="5d995-297">In the default paging example we used querystring fields to persist these values; for this demo, let s persist this information in the page s view state.</span></span> <span data-ttu-id="5d995-298">Creare le due proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="5d995-298">Create the following two properties:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample12.cs)]

<span data-ttu-id="5d995-299">Successivamente, aggiornare il codice nel gestore eventi Selecting in modo che usi le proprietà `StartRowIndex` e `MaximumRows` invece dei valori hardcoded 0 e 5:</span><span class="sxs-lookup"><span data-stu-id="5d995-299">Next, update the code in the Selecting event handler so that it uses the `StartRowIndex` and `MaximumRows` properties instead of the hard-coded values of 0 and 5:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample13.cs)]

<span data-ttu-id="5d995-300">A questo punto la pagina mostra ancora solo i primi cinque record.</span><span class="sxs-lookup"><span data-stu-id="5d995-300">At this point our page still shows just the first five records.</span></span> <span data-ttu-id="5d995-301">Tuttavia, con queste proprietà sul posto, è possibile creare l'interfaccia di paging.</span><span class="sxs-lookup"><span data-stu-id="5d995-301">However, with these properties in place, we re ready to create our paging interface.</span></span>

## <a name="adding-the-paging-interface"></a><span data-ttu-id="5d995-302">Aggiunta dell'interfaccia di paging</span><span class="sxs-lookup"><span data-stu-id="5d995-302">Adding the Paging Interface</span></span>

<span data-ttu-id="5d995-303">Consente di utilizzare la stessa prima, precedente, successiva, ultima interfaccia di paging utilizzata nell'esempio di paging predefinito, incluso il controllo Web Label che visualizza la pagina di dati visualizzata e il numero totale di pagine disponibili.</span><span class="sxs-lookup"><span data-stu-id="5d995-303">Let s use the same First, Previous, Next, Last paging interface used in the default paging example, including the Label Web control that displays what page of data is being viewed and how many total pages exist.</span></span> <span data-ttu-id="5d995-304">Aggiungere i controlli Web e l'etichetta dei quattro pulsanti sotto il ripetitore.</span><span class="sxs-lookup"><span data-stu-id="5d995-304">Add the four Button Web controls and Label below the Repeater.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample14.aspx)]

<span data-ttu-id="5d995-305">Successivamente, creare `Click` gestori eventi per i quattro pulsanti.</span><span class="sxs-lookup"><span data-stu-id="5d995-305">Next, create `Click` event handlers for the four Buttons.</span></span> <span data-ttu-id="5d995-306">Quando si fa clic su uno di questi pulsanti, è necessario aggiornare il `StartRowIndex` e riassociare i dati al ripetitore.</span><span class="sxs-lookup"><span data-stu-id="5d995-306">When one of these Buttons is clicked, we need to update the `StartRowIndex` and rebind the data to the Repeater.</span></span> <span data-ttu-id="5d995-307">Il codice per i pulsanti primo, precedente e successivo è abbastanza semplice, ma per l'ultimo pulsante come si determina l'indice della riga iniziale per l'ultima pagina di dati?</span><span class="sxs-lookup"><span data-stu-id="5d995-307">The code for the First, Previous, and Next buttons is simple enough, but for the Last button how do we determine the start row index for the last page of data?</span></span> <span data-ttu-id="5d995-308">Per calcolare questo indice e poter determinare se i pulsanti avanti e ultimo devono essere abilitati, è necessario sapere il numero totale di record in cui viene eseguito il paging.</span><span class="sxs-lookup"><span data-stu-id="5d995-308">To compute this index as well as being able to determine whether the Next and Last buttons should be enabled we need to know how many records in total are being paged through.</span></span> <span data-ttu-id="5d995-309">È possibile determinare questo problema chiamando il metodo `ProductsBLL` Class s `TotalNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="5d995-309">We can determine this by calling the `ProductsBLL` class s `TotalNumberOfProducts()` method.</span></span> <span data-ttu-id="5d995-310">Consente di creare una proprietà di sola lettura a livello di pagina denominata `TotalRowCount` che restituisce i risultati del metodo `TotalNumberOfProducts()`:</span><span class="sxs-lookup"><span data-stu-id="5d995-310">Let s create a read-only, page-level property named `TotalRowCount` that returns the results of the `TotalNumberOfProducts()` method:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample15.cs)]

<span data-ttu-id="5d995-311">Con questa proprietà è ora possibile determinare l'ultimo indice della riga iniziale della pagina.</span><span class="sxs-lookup"><span data-stu-id="5d995-311">With this property we can now determine the last page s start row index.</span></span> <span data-ttu-id="5d995-312">In particolare, è il risultato Integer del `TotalRowCount` meno 1 diviso per `MaximumRows`, moltiplicato per `MaximumRows`.</span><span class="sxs-lookup"><span data-stu-id="5d995-312">Specifically, it s the integer result of the `TotalRowCount` minus 1 divided by `MaximumRows`, multiplied by `MaximumRows`.</span></span> <span data-ttu-id="5d995-313">È ora possibile scrivere i gestori eventi `Click` per i quattro pulsanti dell'interfaccia di paging:</span><span class="sxs-lookup"><span data-stu-id="5d995-313">We can now write the `Click` event handlers for the four paging interface buttons:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample16.cs)]

<span data-ttu-id="5d995-314">Infine, è necessario disabilitare i pulsanti primo e indietro nell'interfaccia di paging quando si visualizza la prima pagina di dati e i pulsanti avanti e ultimo quando si visualizza l'ultima pagina.</span><span class="sxs-lookup"><span data-stu-id="5d995-314">Finally, we need to disable the First and Previous buttons in the paging interface when viewing the first page of data and the Next and Last buttons when viewing the last page.</span></span> <span data-ttu-id="5d995-315">A tale scopo, aggiungere il codice seguente al gestore dell'evento ObjectDataSource s `Selecting`:</span><span class="sxs-lookup"><span data-stu-id="5d995-315">To accomplish this, add the following code to the ObjectDataSource s `Selecting` event handler:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample17.cs)]

<span data-ttu-id="5d995-316">Dopo aver aggiunto i gestori eventi `Click` e il codice per abilitare o disabilitare gli elementi dell'interfaccia di paging in base all'indice della riga iniziale corrente, testare la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="5d995-316">After adding these `Click` event handlers and the code to enable or disable the paging interface elements based on the current start row index, test the page in a browser.</span></span> <span data-ttu-id="5d995-317">Come illustrato nella figura 15, quando si visita per la prima volta la pagina i pulsanti primo e indietro saranno disabilitati.</span><span class="sxs-lookup"><span data-stu-id="5d995-317">As Figure 15 illustrates, when first visiting the page the First and Previous buttons will are disabled.</span></span> <span data-ttu-id="5d995-318">Facendo clic su Avanti viene visualizzata la seconda pagina di dati, mentre se si fa clic su Last viene visualizzata la pagina finale (vedere le figure 16 e 17).</span><span class="sxs-lookup"><span data-stu-id="5d995-318">Clicking Next shows the second page of data, while clicking Last displays the final page (see Figures 16 and 17).</span></span> <span data-ttu-id="5d995-319">Quando si visualizza l'ultima pagina di dati, i pulsanti avanti e ultimo sono disabilitati.</span><span class="sxs-lookup"><span data-stu-id="5d995-319">When viewing the last page of data both the Next and Last buttons are disabled.</span></span>

<span data-ttu-id="5d995-320">[![i pulsanti precedente e ultimo sono disabilitati quando si visualizza la prima pagina di prodotti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-320">[![The Previous and Last Buttons are Disabled When Viewing the First Page of Products](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span></span>

<span data-ttu-id="5d995-321">**Figura 15**: i pulsanti precedente e ultimo sono disabilitati quando si visualizza la prima pagina di prodotti ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-321">**Figure 15**: The Previous and Last Buttons are Disabled When Viewing the First Page of Products ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span></span>

<span data-ttu-id="5d995-322">[![viene visualizzata la seconda pagina di prodotti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-322">[![The Second Page of Products are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span></span>

<span data-ttu-id="5d995-323">**Figura 16**: viene visualizzata la seconda pagina di prodotti ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-323">**Figure 16**: The Second Page of Products are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span></span>

<span data-ttu-id="5d995-324">[![clic per ultimo Visualizza la pagina finale dei dati](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-324">[![Clicking Last Displays the Final Page of Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span></span>

<span data-ttu-id="5d995-325">**Figura 17**: fare clic su ultima per visualizzare la pagina finale dei dati ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-325">**Figure 17**: Clicking Last Displays the Final Page of Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span></span>

## <a name="step-7-including-sorting-support-with-the-custom-paged-repeater"></a><span data-ttu-id="5d995-326">Passaggio 7: inclusione del supporto per l'ordinamento con il ripetitore di paging personalizzato</span><span class="sxs-lookup"><span data-stu-id="5d995-326">Step 7: Including Sorting Support with the Custom Paged Repeater</span></span>

<span data-ttu-id="5d995-327">Ora che è stato implementato il paging personalizzato, è possibile includere il supporto per l'ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-327">Now that custom paging has been implemented, we re ready to include sorting support.</span></span> <span data-ttu-id="5d995-328">Il metodo `ProductsBLL` Class s `GetProductsPagedAndSorted` ha gli stessi parametri di input *StartRowIndex* e *MaximumRows* di `GetProductsPaged`, ma consente un parametro di input *SortExpression* aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="5d995-328">The `ProductsBLL` class s `GetProductsPagedAndSorted` method has the same *startRowIndex* and *maximumRows* input parameters as `GetProductsPaged`, but permits an additional *sortExpression* input parameter.</span></span> <span data-ttu-id="5d995-329">Per usare il metodo `GetProductsPagedAndSorted` da `SortingWithCustomPaging.aspx`, è necessario eseguire i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="5d995-329">To use the `GetProductsPagedAndSorted` method from `SortingWithCustomPaging.aspx`, we need to perform the following steps:</span></span>

1. <span data-ttu-id="5d995-330">Modificare la proprietà `SelectMethod` di ObjectDataSource da `GetProductsPaged` a `GetProductsPagedAndSorted`.</span><span class="sxs-lookup"><span data-stu-id="5d995-330">Change the ObjectDataSource s `SelectMethod` property from `GetProductsPaged` to `GetProductsPagedAndSorted`.</span></span>
2. <span data-ttu-id="5d995-331">Aggiungere un oggetto `Parameter` *SortExpression* alla raccolta di `SelectParameters` di ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="5d995-331">Add a *sortExpression* `Parameter` object to the ObjectDataSource s `SelectParameters` collection.</span></span>
3. <span data-ttu-id="5d995-332">Creare una proprietà di `SortExpression` a livello di pagina privata che rende permanente il relativo valore nei postback tramite lo stato di visualizzazione della pagina.</span><span class="sxs-lookup"><span data-stu-id="5d995-332">Create a private, page-level `SortExpression` property that persists its value across postbacks through the page s view state.</span></span>
4. <span data-ttu-id="5d995-333">Aggiornare il gestore dell'evento ObjectDataSource s `Selecting` per assegnare il parametro *SortExpression* di ObjectDataSource al valore della proprietà `SortExpression` a livello di pagina.</span><span class="sxs-lookup"><span data-stu-id="5d995-333">Update the ObjectDataSource s `Selecting` event handler to assign the ObjectDataSource s *sortExpression* parameter the value of the page-level `SortExpression` property.</span></span>
5. <span data-ttu-id="5d995-334">Creare l'interfaccia di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-334">Create the sorting interface.</span></span>

<span data-ttu-id="5d995-335">Per iniziare, è necessario aggiornare la proprietà `SelectMethod` di ObjectDataSource e aggiungere una `Parameter`*SortExpression* .</span><span class="sxs-lookup"><span data-stu-id="5d995-335">Start by updating the ObjectDataSource s `SelectMethod` property and adding a *sortExpression* `Parameter`.</span></span> <span data-ttu-id="5d995-336">Verificare che la proprietà *sortExpression* `Parameter` s `Type` sia impostata su `String`.</span><span class="sxs-lookup"><span data-stu-id="5d995-336">Make sure that the *sortExpression* `Parameter` s `Type` property is set to `String`.</span></span> <span data-ttu-id="5d995-337">Al termine di queste prime due attività, il markup dichiarativo di ObjectDataSource dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="5d995-337">After completing these first two tasks, the ObjectDataSource s declarative markup should look like the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample18.aspx)]

<span data-ttu-id="5d995-338">Quindi, è necessaria una proprietà di `SortExpression` a livello di pagina il cui valore viene serializzato per visualizzare lo stato.</span><span class="sxs-lookup"><span data-stu-id="5d995-338">Next, we need a page-level `SortExpression` property whose value is serialized to view state.</span></span> <span data-ttu-id="5d995-339">Se non è stato impostato alcun valore dell'espressione di ordinamento, utilizzare ProductName come valore predefinito:</span><span class="sxs-lookup"><span data-stu-id="5d995-339">If no sort expression value has been set, use ProductName as the default:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample19.cs)]

<span data-ttu-id="5d995-340">Prima che ObjectDataSource richiami il metodo `GetProductsPagedAndSorted` è necessario impostare il valore di *sortExpression* `Parameter` sul valore della proprietà `SortExpression`.</span><span class="sxs-lookup"><span data-stu-id="5d995-340">Before the ObjectDataSource invokes the `GetProductsPagedAndSorted` method we need to set the *sortExpression* `Parameter` to the value of the `SortExpression` property.</span></span> <span data-ttu-id="5d995-341">Nel gestore dell'evento `Selecting` aggiungere la riga di codice seguente:</span><span class="sxs-lookup"><span data-stu-id="5d995-341">In the `Selecting` event handler, add the following line of code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample20.cs)]

<span data-ttu-id="5d995-342">Non resta che implementare l'interfaccia di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-342">All that remains is to implement the sorting interface.</span></span> <span data-ttu-id="5d995-343">Come nell'ultimo esempio, l'interfaccia di ordinamento è implementata usando i controlli Web di tre pulsanti che consentono all'utente di ordinare i risultati in base al nome del prodotto, alla categoria o al fornitore.</span><span class="sxs-lookup"><span data-stu-id="5d995-343">As we did in the last example, let s have the sorting interface implemented using three Button Web controls that allow the user to sort the results by product name, category, or supplier.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample21.aspx)]

<span data-ttu-id="5d995-344">Creare `Click` gestori di eventi per questi tre controlli Button.</span><span class="sxs-lookup"><span data-stu-id="5d995-344">Create `Click` event handlers for these three Button controls.</span></span> <span data-ttu-id="5d995-345">Nel gestore dell'evento reimpostare il `StartRowIndex` su 0, impostare il `SortExpression` sul valore appropriato e riassociare i dati al Repeater:</span><span class="sxs-lookup"><span data-stu-id="5d995-345">In the event handler, reset the `StartRowIndex` to 0, set the `SortExpression` to the appropriate value, and rebind the data to the Repeater:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample22.cs)]

<span data-ttu-id="5d995-346">Tutto qui!</span><span class="sxs-lookup"><span data-stu-id="5d995-346">That s all there is to it!</span></span> <span data-ttu-id="5d995-347">Sebbene sia stata eseguita una serie di passaggi per ottenere il paging e l'ordinamento personalizzati, i passaggi sono molto simili a quelli necessari per il paging predefinito.</span><span class="sxs-lookup"><span data-stu-id="5d995-347">While there were a number of steps to get custom paging and sorting implemented, the steps were very similar to those needed for default paging.</span></span> <span data-ttu-id="5d995-348">La figura 18 Mostra i prodotti quando si visualizza l'ultima pagina di dati quando è ordinata per categoria.</span><span class="sxs-lookup"><span data-stu-id="5d995-348">Figure 18 shows the products when viewing the last page of data when sorted by category.</span></span>

<span data-ttu-id="5d995-349">[![viene visualizzata l'ultima pagina di dati, ordinata per categoria.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="5d995-349">[![The Last Page of Data, Sorted by Category, is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span></span>

<span data-ttu-id="5d995-350">**Figura 18**: viene visualizzata l'ultima pagina di dati, ordinata per categoria, ([fare clic per visualizzare l'immagine con dimensioni complete](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="5d995-350">**Figure 18**: The Last Page of Data, Sorted by Category, is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5d995-351">Negli esempi precedenti, quando l'ordinamento in base al Supplier suppliname è stato usato come espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-351">In previous examples, when sorting by the supplier SupplierName was used as the sort expression.</span></span> <span data-ttu-id="5d995-352">Tuttavia, per l'implementazione del paging personalizzato, è necessario utilizzare CompanyName.</span><span class="sxs-lookup"><span data-stu-id="5d995-352">However, for the custom paging implementation, we need to use CompanyName.</span></span> <span data-ttu-id="5d995-353">Questo perché il stored procedure responsabile dell'implementazione del paging personalizzato `GetProductsPagedAndSorted` passa l'espressione di ordinamento alla parola chiave `ROW_NUMBER()`, la parola chiave `ROW_NUMBER()` richiede il nome della colonna effettivo anziché un alias.</span><span class="sxs-lookup"><span data-stu-id="5d995-353">This is because the stored procedure responsible for implementing custom paging `GetProductsPagedAndSorted` passes the sort expression into the `ROW_NUMBER()` keyword, The `ROW_NUMBER()` keyword requires the actual column name rather than an alias.</span></span> <span data-ttu-id="5d995-354">Pertanto, è necessario utilizzare `CompanyName` (il nome della colonna nella tabella `Suppliers`) anziché l'alias utilizzato nella query `SELECT` (`SupplierName`) per l'espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-354">Therefore, we must use `CompanyName` (the name of the column in the `Suppliers` table) rather than the alias used in the `SELECT` query (`SupplierName`) for the sort expression.</span></span>

## <a name="summary"></a><span data-ttu-id="5d995-355">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="5d995-355">Summary</span></span>

<span data-ttu-id="5d995-356">Né DataList né Repeater offrono il supporto per l'ordinamento integrato, ma con un po' di codice e un'interfaccia di ordinamento personalizzata, è possibile aggiungere tale funzionalità.</span><span class="sxs-lookup"><span data-stu-id="5d995-356">Neither the DataList nor Repeater offer built-in sorting support, but with a bit of code and a custom sorting interface, such functionality can be added.</span></span> <span data-ttu-id="5d995-357">Quando si implementa l'ordinamento, ma non il paging, l'espressione di ordinamento può essere specificata tramite l'oggetto `DataSourceSelectArguments` passato al Metodo ObjectDataSource s `Select`.</span><span class="sxs-lookup"><span data-stu-id="5d995-357">When implementing sorting, but not paging, the sort expression can be specified through the `DataSourceSelectArguments` object passed into the ObjectDataSource s `Select` method.</span></span> <span data-ttu-id="5d995-358">È possibile assegnare questo `DataSourceSelectArguments` oggetto `SortExpression` proprietà nel gestore dell'evento ObjectDataSource s `Selecting`.</span><span class="sxs-lookup"><span data-stu-id="5d995-358">This `DataSourceSelectArguments` object s `SortExpression` property can be assigned in the ObjectDataSource s `Selecting` event handler.</span></span>

<span data-ttu-id="5d995-359">Per aggiungere funzionalità di ordinamento a un oggetto DataList o Repeater che fornisce già il supporto per il paging, l'approccio più semplice consiste nel personalizzare il livello della logica di business in modo da includere un metodo che accetta un'espressione di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="5d995-359">To add sorting capabilities to a DataList or Repeater that already provides paging support, the easiest approach is to customize the Business Logic Layer to include a method that accepts a sort expression.</span></span> <span data-ttu-id="5d995-360">Queste informazioni possono quindi essere passate tramite un parametro in ObjectDataSource s `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="5d995-360">This information can then be passed in through a parameter in the ObjectDataSource s `SelectParameters`.</span></span>

<span data-ttu-id="5d995-361">Questa esercitazione completa l'analisi del paging e dell'ordinamento con i controlli DataList e Repeater.</span><span class="sxs-lookup"><span data-stu-id="5d995-361">This tutorial completes our examination of paging and sorting with the DataList and Repeater controls.</span></span> <span data-ttu-id="5d995-362">Nell'esercitazione successiva e finale verrà illustrato come aggiungere controlli Web dei pulsanti ai modelli DataList e Repeater per fornire alcune funzionalità personalizzate e avviate dall'utente per ogni singolo elemento.</span><span class="sxs-lookup"><span data-stu-id="5d995-362">Our next and final tutorial will examine how to add Button Web controls to the DataList and Repeater s templates in order to provide some custom, user-initiated functionality on a per-item basis.</span></span>

<span data-ttu-id="5d995-363">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="5d995-363">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="5d995-364">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="5d995-364">About the Author</span></span>

<span data-ttu-id="5d995-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette ASP/ASP. NET Books e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), collabora con le tecnologie Web Microsoft a partire da 1998.</span><span class="sxs-lookup"><span data-stu-id="5d995-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5d995-366">Scott lavora come consulente, trainer e writer indipendenti.</span><span class="sxs-lookup"><span data-stu-id="5d995-366">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5d995-367">Il suo ultimo libro è [*Sams Teach Yourself ASP.NET 2,0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="5d995-367">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="5d995-368">Può essere raggiunto in [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5d995-368">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="5d995-369">o tramite il suo Blog, disponibile in [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="5d995-369">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="5d995-370">Grazie speciale</span><span class="sxs-lookup"><span data-stu-id="5d995-370">Special Thanks To</span></span>

<span data-ttu-id="5d995-371">Questa serie di esercitazioni è stata esaminata da molti revisori utili.</span><span class="sxs-lookup"><span data-stu-id="5d995-371">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5d995-372">Il revisore principale di questa esercitazione è stato David Suru.</span><span class="sxs-lookup"><span data-stu-id="5d995-372">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="5d995-373">Sei interessato a esaminare i miei prossimi articoli MSDN?</span><span class="sxs-lookup"><span data-stu-id="5d995-373">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5d995-374">In tal caso, rilasciare una riga in [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5d995-374">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5d995-375">[Precedente](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
> [Successivo](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="5d995-375">[Previous](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Next](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span></span>
