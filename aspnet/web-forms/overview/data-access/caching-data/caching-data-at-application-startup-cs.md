---
uid: web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
title: La memorizzazione nella cache i dati all'avvio dell'applicazione (c#) | Microsoft Docs
author: rick-anderson
description: In qualsiasi applicazione Web alcuni dati verranno frequentemente utilizzati e alcuni dati verranno utilizzati raramente. Migliorare le prestazioni dei nostri ASP.NET applicazione b...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: 22ca8efa-7cd1-45a7-b9ce-ce6eb3b3ff95
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
msc.type: authoredcontent
ms.openlocfilehash: c97058e5fd54dfd0393ec5ad020ad957d9719784
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57064068"
---
<a name="caching-data-at-application-startup-c"></a><span data-ttu-id="c0e38-104">Memorizzazione di dati nella cache all'avvio dell'applicazione (C#)</span><span class="sxs-lookup"><span data-stu-id="c0e38-104">Caching Data at Application Startup (C#)</span></span>
====================
<span data-ttu-id="c0e38-105">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="c0e38-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="c0e38-106">Scaricare PDF</span><span class="sxs-lookup"><span data-stu-id="c0e38-106">Download PDF</span></span>](caching-data-at-application-startup-cs/_static/datatutorial60cs1.pdf)

> <span data-ttu-id="c0e38-107">In qualsiasi applicazione Web alcuni dati verranno frequentemente utilizzati e alcuni dati verranno utilizzati raramente.</span><span class="sxs-lookup"><span data-stu-id="c0e38-107">In any Web application some data will be frequently used and some data will be infrequently used.</span></span> <span data-ttu-id="c0e38-108">È possibile migliorare le prestazioni dell'applicazione ASP.NET mediante il caricamento in anticipo i dati usati di frequente, una tecnica nota come.</span><span class="sxs-lookup"><span data-stu-id="c0e38-108">We can improve the performance of our ASP.NET application by loading in advance the frequently-used data, a technique known as.</span></span> <span data-ttu-id="c0e38-109">Questa esercitazione viene illustrato un approccio proattivo delle operazioni di caricamento, che consiste nel caricare i dati nella cache all'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-109">This tutorial demonstrates one approach to proactive loading, which is to load data into the cache at application startup.</span></span>


## <a name="introduction"></a><span data-ttu-id="c0e38-110">Introduzione</span><span class="sxs-lookup"><span data-stu-id="c0e38-110">Introduction</span></span>

<span data-ttu-id="c0e38-111">Le due esercitazioni precedenti esaminato la memorizzazione nella cache i dati della presentazione e i livelli di memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="c0e38-111">The two previous tutorials looked at caching data in the Presentation and Caching Layers.</span></span> <span data-ttu-id="c0e38-112">Nelle [dati la memorizzazione nella cache con ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), è stata esaminata tramite le funzionalità di memorizzazione nella cache di ObjectDataSource per memorizzare i dati nel livello di presentazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-112">In [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), we looked at using the ObjectDataSource's caching features to cache data in the Presentation Layer.</span></span> <span data-ttu-id="c0e38-113">[La memorizzazione nella cache i dati nell'architettura](caching-data-in-the-architecture-cs.md) esaminato la memorizzazione nella cache in un livello nuovo e separato di memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="c0e38-113">[Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) examined caching in a new, separate Caching Layer.</span></span> <span data-ttu-id="c0e38-114">Entrambe queste esercitazioni usate *caricamento reattivo* nell'uso di cache di dati.</span><span class="sxs-lookup"><span data-stu-id="c0e38-114">Both of these tutorials used *reactive loading* in working with the data cache.</span></span> <span data-ttu-id="c0e38-115">Con caricamento reattivo, ogni volta che vengono richiesti i dati, il sistema controlla innanzitutto se è nella cache.</span><span class="sxs-lookup"><span data-stu-id="c0e38-115">With reactive loading, each time the data is requested, the system first checks if it's in the cache.</span></span> <span data-ttu-id="c0e38-116">In caso contrario, acquisisce i dati dall'origine origine, ad esempio il database e quindi lo archivia nella cache.</span><span class="sxs-lookup"><span data-stu-id="c0e38-116">If not, it grabs the data from the originating source, such as the database, and then stores it in the cache.</span></span> <span data-ttu-id="c0e38-117">Il vantaggio principale delle operazioni di caricamento reattivo è relativa semplicità di implementazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-117">The main advantage to reactive loading is its ease of implementation.</span></span> <span data-ttu-id="c0e38-118">Uno dei relativi svantaggi è le sue prestazioni non uniforme in tutte le richieste.</span><span class="sxs-lookup"><span data-stu-id="c0e38-118">One of its disadvantages is its uneven performance across requests.</span></span> <span data-ttu-id="c0e38-119">Si immagini una pagina che usa il livello di memorizzazione nella cache dall'esercitazione precedente per visualizzare le informazioni sul prodotto.</span><span class="sxs-lookup"><span data-stu-id="c0e38-119">Imagine a page that uses the Caching Layer from the preceding tutorial to display product information.</span></span> <span data-ttu-id="c0e38-120">Quando questa pagina viene visitata per la prima volta o visitata per la prima volta dopo che i dati memorizzati nella cache sono stati eliminati a causa di limitazioni di memoria o la scadenza specificata che è stato raggiunto, i dati devono essere recuperati dal database.</span><span class="sxs-lookup"><span data-stu-id="c0e38-120">When this page is visited for the first time, or visited for the first time after the cached data has been evicted due to memory constraints or the specified expiry having been reached, the data must be retrieved from the database.</span></span> <span data-ttu-id="c0e38-121">Pertanto, queste richieste di utenti richiederà più tempo rispetto alle richieste degli utenti che possono essere servite dalla cache.</span><span class="sxs-lookup"><span data-stu-id="c0e38-121">Therefore, these users requests will take longer than users requests that can be served by the cache.</span></span>

<span data-ttu-id="c0e38-122">*Caricamento proattivo* offre una strategia di gestione della cache alternativo che smussa le prestazioni tra le richieste per il caricamento dei dati memorizzati nella cache prima che sia necessaria.</span><span class="sxs-lookup"><span data-stu-id="c0e38-122">*Proactive loading* provides an alternative cache management strategy that smoothes out the performance across requests by loading the cached data before it's needed.</span></span> <span data-ttu-id="c0e38-123">Caricamento proattivo Usa in genere, un processo che periodicamente controlla oppure riceve una notifica quando si è verificato un aggiornamento ai dati sottostanti.</span><span class="sxs-lookup"><span data-stu-id="c0e38-123">Typically, proactive loading uses some process that either periodically checks or is notified when there has been an update to the underlying data.</span></span> <span data-ttu-id="c0e38-124">Quindi, questo processo di aggiornamento della cache per mantenerla aggiornata.</span><span class="sxs-lookup"><span data-stu-id="c0e38-124">This process then updates the cache to keep it fresh.</span></span> <span data-ttu-id="c0e38-125">Attivo durante il caricamento è particolarmente utile se i dati sottostanti provengano da una connessione lenta al database, un servizio Web o un'altra origine dati particolarmente lenta.</span><span class="sxs-lookup"><span data-stu-id="c0e38-125">Proactive loading is especially useful if the underlying data comes from a slow database connection, a Web service, or some other particularly sluggish data source.</span></span> <span data-ttu-id="c0e38-126">Ma questo approccio proattivo delle operazioni di caricamento è più difficile da implementare, poiché richiede la creazione, gestione e distribuzione di un processo per verificare la presenza di modifiche e aggiornare la cache.</span><span class="sxs-lookup"><span data-stu-id="c0e38-126">But this approach to proactive loading is more difficult to implement, as it requires creating, managing, and deploying a process to check for changes and update the cache.</span></span>

<span data-ttu-id="c0e38-127">Un'altra versione del caricamento proattivo e il tipo che è verranno illustrate in questa esercitazione, è il caricamento dei dati nella cache all'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-127">Another flavor of proactive loading, and the type we'll be exploring in this tutorial, is loading data into the cache at application startup.</span></span> <span data-ttu-id="c0e38-128">Questo approccio è particolarmente utile per la memorizzazione nella cache i dati statici, ad esempio i record nelle tabelle di ricerca del database.</span><span class="sxs-lookup"><span data-stu-id="c0e38-128">This approach is especially useful for caching static data, such as the records in database lookup tables.</span></span>

> [!NOTE]
> <span data-ttu-id="c0e38-129">Per un approfondimento sulle differenze tra caricamento proattivo e reattivo, nonché elenchi di vantaggi, svantaggi e consigli di implementazione, vedere la [la gestione del contenuto di una Cache](https://msdn.microsoft.com/library/ms978503.aspx) sezione il [ Guida all'architettura delle applicazioni per .NET Framework di memorizzazione nella cache](https://msdn.microsoft.com/library/ms978498.aspx).</span><span class="sxs-lookup"><span data-stu-id="c0e38-129">For a more in-depth look at the differences between proactive and reactive loading, as well as lists of pros, cons, and implementation recommendations, refer to the [Managing the Contents of a Cache](https://msdn.microsoft.com/library/ms978503.aspx) section of the [Caching Architecture Guide for .NET Framework Applications](https://msdn.microsoft.com/library/ms978498.aspx).</span></span>


## <a name="step-1-determining-what-data-to-cache-at-application-startup"></a><span data-ttu-id="c0e38-130">Passaggio 1: Determinare quali dati da memorizzare nella Cache all'avvio dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="c0e38-130">Step 1: Determining What Data to Cache at Application Startup</span></span>

<span data-ttu-id="c0e38-131">Gli esempi di memorizzazione nella cache usando il caricamento reattivo che abbiamo esaminato in precedente due esercitazioni elaborazione anche dati che possono cambiare periodicamente e non accettano exorbitantly lungo per generare.</span><span class="sxs-lookup"><span data-stu-id="c0e38-131">The caching examples using reactive loading that we examined in the previous two tutorials work well with data that may periodically change and does not take exorbitantly long to generate.</span></span> <span data-ttu-id="c0e38-132">Ma se i dati memorizzati nella cache non cambiano mai, la scadenza usata da reattivo durante il caricamento è superflua.</span><span class="sxs-lookup"><span data-stu-id="c0e38-132">But if the cached data never changes, the expiry used by reactive loading is superfluous.</span></span> <span data-ttu-id="c0e38-133">Analogamente, se i dati la memorizzazione nella cache richiede un periodo di tempo eccessivo per generare, tali utenti le cui richieste trovare vuoto cache sarà necessario tollerare una lunga attendere fino a quando i dati sottostanti vengono recuperati.</span><span class="sxs-lookup"><span data-stu-id="c0e38-133">Likewise, if the data being cached takes an exceedingly long time to generate, then those users whose requests find the cache empty will have to endure a lengthy wait while the underlying data is retrieved.</span></span> <span data-ttu-id="c0e38-134">Prendere in considerazione la memorizzazione nella cache i dati statici e i dati che richiede un tempo particolarmente lungo per generare all'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-134">Consider caching static data and data that takes an exceptionally long time to generate at application startup.</span></span>

<span data-ttu-id="c0e38-135">Mentre i database hanno molti dinamico, i valori cambiano di frequente, la maggior parte anche avere una notevole quantità di dati statici.</span><span class="sxs-lookup"><span data-stu-id="c0e38-135">While databases have many dynamic, frequently-changing values, most also have a fair amount of static data.</span></span> <span data-ttu-id="c0e38-136">Praticamente in tutti i modelli di dati, ad esempio, avere una o più colonne che contengono un valore specifico da un set fisso di scelte.</span><span class="sxs-lookup"><span data-stu-id="c0e38-136">For example, virtually all data models have one or more columns that contain a particular value from a fixed set of choices.</span></span> <span data-ttu-id="c0e38-137">Oggetto `Patients` tabella di database potrebbe disporre di un `PrimaryLanguage` colonna, il cui set di valori potrebbe essere in lingua inglese, spagnolo, francese, russo, giapponese e così via.</span><span class="sxs-lookup"><span data-stu-id="c0e38-137">A `Patients` database table might have a `PrimaryLanguage` column, whose set of values could be English, Spanish, French, Russian, Japanese, and so on.</span></span> <span data-ttu-id="c0e38-138">Spesso, questi tipi di colonne vengono implementati usando *tabelle di ricerca*.</span><span class="sxs-lookup"><span data-stu-id="c0e38-138">Oftentimes, these types of columns are implemented using *lookup tables*.</span></span> <span data-ttu-id="c0e38-139">Invece di memorizzare la stringa di lingua inglese o in francese di `Patients` tabella, una seconda tabella viene creata, in genere, due colonne - identificatore univoco e una stringa descrittiva - con un record per ogni possibile valore.</span><span class="sxs-lookup"><span data-stu-id="c0e38-139">Rather than storing the string English or French in the `Patients` table, a second table is created that has, commonly, two columns - a unique identifier and a string description - with a record for each possible value.</span></span> <span data-ttu-id="c0e38-140">Il `PrimaryLanguage` colonna il `Patients` tabella archivia l'identificatore univoco corrispondente nella tabella di ricerca.</span><span class="sxs-lookup"><span data-stu-id="c0e38-140">The `PrimaryLanguage` column in the `Patients` table stores the corresponding unique identifier in the lookup table.</span></span> <span data-ttu-id="c0e38-141">Nella figura 1, la lingua principale di John Doe del paziente è inglese, mentre Ed Johnson è russa.</span><span class="sxs-lookup"><span data-stu-id="c0e38-141">In Figure 1, patient John Doe's primary language is English, while Ed Johnson's is Russian.</span></span>


![La tabella di lingue è una tabella di ricerca utilizzata dalla tabella Patients](caching-data-at-application-startup-cs/_static/image1.png)

<span data-ttu-id="c0e38-143">**Figura 1**: Il `Languages` la tabella è una tabella di ricerca usata dal `Patients` tabella</span><span class="sxs-lookup"><span data-stu-id="c0e38-143">**Figure 1**: The `Languages` Table is a Lookup Table Used by the `Patients` Table</span></span>


<span data-ttu-id="c0e38-144">L'interfaccia utente per la modifica o si crea un nuovo paziente includerà un elenco di riepilogo a discesa delle lingue consentite popolata dal record nel `Languages` tabella.</span><span class="sxs-lookup"><span data-stu-id="c0e38-144">The user interface for editing or creating a new patient would include a drop-down list of allowable languages populated by the records in the `Languages` table.</span></span> <span data-ttu-id="c0e38-145">Senza la memorizzazione nella cache, ogni volta che questa interfaccia è visitato il sistema deve eseguire una query di `Languages` tabella.</span><span class="sxs-lookup"><span data-stu-id="c0e38-145">Without caching, each time this interface is visited the system must query the `Languages` table.</span></span> <span data-ttu-id="c0e38-146">Si tratta gli sprechi poiché i valori di tabella di ricerca molto raramente, modificare mai.</span><span class="sxs-lookup"><span data-stu-id="c0e38-146">This is wasteful and unnecessary since lookup table values change very infrequently, if ever.</span></span>

<span data-ttu-id="c0e38-147">È possibile memorizzare nella cache il `Languages` dati usando le stesse tecniche di caricamento reattivo esaminate nelle esercitazioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="c0e38-147">We could cache the `Languages` data using the same reactive loading techniques examined in the previous tutorials.</span></span> <span data-ttu-id="c0e38-148">Il caricamento reattivo, tuttavia, Usa una scadenza basati sul tempo, che non è necessaria per i dati nella tabella di ricerca statici.</span><span class="sxs-lookup"><span data-stu-id="c0e38-148">Reactive loading, however, uses a time-based expiry, which is not needed for static lookup table data.</span></span> <span data-ttu-id="c0e38-149">Anche se la memorizzazione nella cache tramite il caricamento reattivo sarebbe meglio nessuna memorizzazione nella cache, l'approccio migliore sarebbe caricare in modo proattivo i dati di tabella di ricerca nella cache all'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-149">While caching using reactive loading would be better than no caching at all, the best approach would be to proactively load the lookup table data into the cache at application startup.</span></span>

<span data-ttu-id="c0e38-150">In questa esercitazione si esaminerà come dati di tabella di ricerca nella cache e altre informazioni statiche.</span><span class="sxs-lookup"><span data-stu-id="c0e38-150">In this tutorial we will look at how to cache lookup table data and other static information.</span></span>

## <a name="step-2-examining-the-different-ways-to-cache-data"></a><span data-ttu-id="c0e38-151">Passaggio 2: Esaminare le diverse modalità per memorizzare nella Cache dei dati</span><span class="sxs-lookup"><span data-stu-id="c0e38-151">Step 2: Examining the Different Ways to Cache Data</span></span>

<span data-ttu-id="c0e38-152">Le informazioni possono essere a livello di codice memorizzato nella cache in un'applicazione ASP.NET usando un'ampia gamma di approcci.</span><span class="sxs-lookup"><span data-stu-id="c0e38-152">Information can be programmatically cached in an ASP.NET application using a variety of approaches.</span></span> <span data-ttu-id="c0e38-153">È stato già spiegato come usare la cache dei dati nelle esercitazioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="c0e38-153">We ve already seen how to use the data cache in previous tutorials.</span></span> <span data-ttu-id="c0e38-154">In alternativa, gli oggetti possono essere a livello di programmazione memorizzati nella cache usando *i membri statici* oppure *lo stato dell'applicazione*.</span><span class="sxs-lookup"><span data-stu-id="c0e38-154">Alternatively, objects can be programmatically cached using *static members* or *application state*.</span></span>

<span data-ttu-id="c0e38-155">Quando si usa una classe, in genere la classe deve essere creata un'istanza prima che i relativi membri sono accessibili.</span><span class="sxs-lookup"><span data-stu-id="c0e38-155">When working with a class, typically the class must first be instantiated before its members can be accessed.</span></span> <span data-ttu-id="c0e38-156">Ad esempio, per richiamare un metodo da una delle classi nel nostro Business Logic Layer, è necessario creare innanzitutto un'istanza della classe:</span><span class="sxs-lookup"><span data-stu-id="c0e38-156">For example, in order to invoke a method from one of the classes in our Business Logic Layer, we must first create an instance of the class:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample1.cs)]

<span data-ttu-id="c0e38-157">Prima che possiamo richiamare *SomeMethod* o utilizzare *SomeProperty*, è innanzitutto necessario creare un'istanza della classe utilizzando il `new` (parola chiave).</span><span class="sxs-lookup"><span data-stu-id="c0e38-157">Before we can invoke *SomeMethod* or work with *SomeProperty*, we must first create an instance of the class using the `new` keyword.</span></span> <span data-ttu-id="c0e38-158">*SomeMethod* e *SomeProperty* sono associati a una determinata istanza.</span><span class="sxs-lookup"><span data-stu-id="c0e38-158">*SomeMethod* and *SomeProperty* are associated with a particular instance.</span></span> <span data-ttu-id="c0e38-159">La durata di questi membri è legata alla durata del relativo oggetto associato.</span><span class="sxs-lookup"><span data-stu-id="c0e38-159">The lifetime of these members is tied to the lifetime of their associated object.</span></span> <span data-ttu-id="c0e38-160">*I membri statici*, d'altra parte, sono variabili, proprietà e metodi che vengono condivisi tra *tutto* istanze della classe e, di conseguenza, hanno una durata fin quando la classe.</span><span class="sxs-lookup"><span data-stu-id="c0e38-160">*Static members*, on the other hand, are variables, properties, and methods that are shared among *all* instances of the class and, consequently, have a lifetime as long as the class.</span></span> <span data-ttu-id="c0e38-161">I membri statici vengono indicati dalla parola chiave `static`.</span><span class="sxs-lookup"><span data-stu-id="c0e38-161">Static members are denoted by the keyword `static`.</span></span>

<span data-ttu-id="c0e38-162">Oltre ai membri statici, i dati possono essere memorizzati nella cache dello stato dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-162">In addition to static members, data can be cached using application state.</span></span> <span data-ttu-id="c0e38-163">Ogni applicazione ASP.NET gestisce una raccolta nome/valore condiviso tra tutti gli utenti e le pagine dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-163">Each ASP.NET application maintains a name/value collection that's shared across all users and pages of the application.</span></span> <span data-ttu-id="c0e38-164">Questa raccolta sono accessibili tramite il [ `HttpContext` classe](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)del [ `Application` proprietà](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx)e utilizzato dalla classe code-behind della pagina ASP.NET come segue:</span><span class="sxs-lookup"><span data-stu-id="c0e38-164">This collection can be accessed using the [`HttpContext` class](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [`Application` property](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx), and used from an ASP.NET page's code-behind class like so:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample2.cs)]

<span data-ttu-id="c0e38-165">La cache dei dati fornisce un'API molto più completa per la memorizzazione nella cache i dati, che fornisce meccanismi per oggetti scaduti nella basati su tempo e delle dipendenze delle priorità degli elementi della cache e così via.</span><span class="sxs-lookup"><span data-stu-id="c0e38-165">The data cache provides a much richer API for caching data, providing mechanisms for time- and dependency-based expiries, cache item priorities, and so forth.</span></span> <span data-ttu-id="c0e38-166">Con membri statici e lo stato dell'applicazione, queste funzionalità devono essere aggiunte manualmente dallo sviluppatore della pagina.</span><span class="sxs-lookup"><span data-stu-id="c0e38-166">With static members and application state, such features must be manually added by the page developer.</span></span> <span data-ttu-id="c0e38-167">Quando la memorizzazione nella cache di dati all'avvio dell'applicazione per la durata dell'applicazione, tuttavia, i vantaggi della cache dei dati sono opinabile.</span><span class="sxs-lookup"><span data-stu-id="c0e38-167">When caching data at application startup for the lifetime of the application, however, the data cache's advantages are moot.</span></span> <span data-ttu-id="c0e38-168">In questa esercitazione verrà esaminato il codice che utilizza tutti e tre le tecniche per la memorizzazione nella cache i dati statici.</span><span class="sxs-lookup"><span data-stu-id="c0e38-168">In this tutorial we'll look at code that uses all three techniques for caching static data.</span></span>

## <a name="step-3-caching-thesupplierstable-data"></a><span data-ttu-id="c0e38-169">Passaggio 3: La memorizzazione nella cache il`Suppliers`tabella dati</span><span class="sxs-lookup"><span data-stu-id="c0e38-169">Step 3: Caching the`Suppliers`Table Data</span></span>

<span data-ttu-id="c0e38-170">Northwind tabelle di database a è ve implementata a oggi non includono alcun tabelle di ricerca tradizionale.</span><span class="sxs-lookup"><span data-stu-id="c0e38-170">The Northwind database tables we ve implemented to date do not include any traditional lookup tables.</span></span> <span data-ttu-id="c0e38-171">I quattro oggetti DataTable implementata nel nostro DAL tutte le tabelle del modello i cui valori sono non statici.</span><span class="sxs-lookup"><span data-stu-id="c0e38-171">The four DataTables implemented in our DAL all model tables whose values are non-static.</span></span> <span data-ttu-id="c0e38-172">Invece di impiegare il tempo per aggiungere un nuovo DataTable DAL e quindi una nuova classe e metodi per il livello BLL, per questa esercitazione è possibile semplicemente fingendo che il `Suppliers` dati della tabella sono statici.</span><span class="sxs-lookup"><span data-stu-id="c0e38-172">Rather than spending the time to add a new DataTable to the DAL and then a new class and methods to the BLL, for this tutorial let's just pretend that the `Suppliers` table's data is static.</span></span> <span data-ttu-id="c0e38-173">Pertanto, potremmo nella cache i dati all'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-173">Therefore, we could cache this data at application startup.</span></span>

<span data-ttu-id="c0e38-174">Per iniziare, creare una nuova classe denominata `StaticCache.cs` nella `CL` cartella.</span><span class="sxs-lookup"><span data-stu-id="c0e38-174">To start, create a new class named `StaticCache.cs` in the `CL` folder.</span></span>


![Creare la classe StaticCache.cs nella cartella CL](caching-data-at-application-startup-cs/_static/image2.png)

<span data-ttu-id="c0e38-176">**Figura 2**: Creare il `StaticCache.cs` classe di `CL` cartella</span><span class="sxs-lookup"><span data-stu-id="c0e38-176">**Figure 2**: Create the `StaticCache.cs` Class in the `CL` Folder</span></span>


<span data-ttu-id="c0e38-177">È necessario aggiungere un metodo che carica i dati all'avvio nell'archivio cache appropriata, nonché i metodi che restituiscono i dati da questa cache.</span><span class="sxs-lookup"><span data-stu-id="c0e38-177">We need to add a method that loads the data at startup into the appropriate cache store, as well as methods that return data from this cache.</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample3.cs)]

<span data-ttu-id="c0e38-178">Il codice precedente Usa una variabile membro statico, `suppliers`, per contenere i risultati del `SuppliersBLL` della classe `GetSuppliers()` metodo, che viene chiamato dal `LoadStaticCache()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="c0e38-178">The above code uses a static member variable, `suppliers`, to hold the results from the `SuppliersBLL` class's `GetSuppliers()` method, which is called from the `LoadStaticCache()` method.</span></span> <span data-ttu-id="c0e38-179">Il `LoadStaticCache()` metodo è destinato a essere chiamato durante l'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-179">The `LoadStaticCache()` method is meant to be called during the application's start.</span></span> <span data-ttu-id="c0e38-180">Una volta che questi dati sono stati caricati all'avvio dell'applicazione, è possono chiamare tutte le pagine che devono essere utilizzato con i dati fornitore il `StaticCache` della classe `GetSuppliers()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="c0e38-180">Once this data has been loaded at application startup, any page that needs to work with supplier data can call the `StaticCache` class's `GetSuppliers()` method.</span></span> <span data-ttu-id="c0e38-181">Pertanto, la chiamata al database per ottenere i fornitori si verifica solo una volta, all'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-181">Therefore, the call to the database to get the suppliers only happens once, at application start.</span></span>

<span data-ttu-id="c0e38-182">Invece di usare una variabile membro statica come l'archivio della cache, si sarebbe potuto in alternativa usare lo stato dell'applicazione o la cache dei dati.</span><span class="sxs-lookup"><span data-stu-id="c0e38-182">Rather than using a static member variable as the cache store, we could have alternatively used application state or the data cache.</span></span> <span data-ttu-id="c0e38-183">Il codice seguente viene illustrata la classe retooled per usare lo stato dell'applicazione:</span><span class="sxs-lookup"><span data-stu-id="c0e38-183">The following code shows the class retooled to use application state:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample4.cs)]

<span data-ttu-id="c0e38-184">Nelle `LoadStaticCache()`, alla variabile dell'applicazione vengono archiviate le informazioni di supplier *chiave*.</span><span class="sxs-lookup"><span data-stu-id="c0e38-184">In `LoadStaticCache()`, the supplier information is stored to the application variable *key*.</span></span> <span data-ttu-id="c0e38-185">Viene restituito come tipo appropriato (`Northwind.SuppliersDataTable`) da `GetSuppliers()`.</span><span class="sxs-lookup"><span data-stu-id="c0e38-185">It's returned as the appropriate type (`Northwind.SuppliersDataTable`) from `GetSuppliers()`.</span></span> <span data-ttu-id="c0e38-186">Mentre lo stato dell'applicazione sono accessibili nelle classi di pagine ASP.NET con code-behind `Application["key"]`, nell'architettura è necessario usare `HttpContext.Current.Application["key"]` per ottenere l'oggetto corrente `HttpContext`.</span><span class="sxs-lookup"><span data-stu-id="c0e38-186">While application state can be accessed in the code-behind classes of ASP.NET pages using `Application["key"]`, in the architecture we must use `HttpContext.Current.Application["key"]` in order to get the current `HttpContext`.</span></span>

<span data-ttu-id="c0e38-187">Analogamente, la cache dei dati può costituire un archivio della cache, come illustrato nel codice seguente:</span><span class="sxs-lookup"><span data-stu-id="c0e38-187">Likewise, the data cache can be used as a cache store, as the following code shows:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample5.cs)]

<span data-ttu-id="c0e38-188">Per aggiungere un elemento alla cache dei dati senza alcuna scadenza basati sul tempo, usare il `System.Web.Caching.Cache.NoAbsoluteExpiration` e `System.Web.Caching.Cache.NoSlidingExpiration` valori come parametri di input.</span><span class="sxs-lookup"><span data-stu-id="c0e38-188">To add an item to the data cache with no time-based expiry, use the `System.Web.Caching.Cache.NoAbsoluteExpiration` and `System.Web.Caching.Cache.NoSlidingExpiration` values as input parameters.</span></span> <span data-ttu-id="c0e38-189">Questo specifico overload della cache di dati `Insert` metodo è stato selezionato in modo che potremmo specificare il *priorità* dell'elemento della cache.</span><span class="sxs-lookup"><span data-stu-id="c0e38-189">This particular overload of the data cache's `Insert` method was selected so that we could specify the *priority* of the cache item.</span></span> <span data-ttu-id="c0e38-190">Consente di determinare quali elementi eliminare dalla cache quando la memoria disponibile è insufficiente per la priorità.</span><span class="sxs-lookup"><span data-stu-id="c0e38-190">The priority is used to determine what items to scavenge from the cache when available memory runs low.</span></span> <span data-ttu-id="c0e38-191">Qui viene usata la priorità `NotRemovable`, che assicura che questo elemento della cache ha vinto t scavenging.</span><span class="sxs-lookup"><span data-stu-id="c0e38-191">Here we use the priority `NotRemovable`, which ensures that this cache item won t be scavenged.</span></span>

> [!NOTE]
> <span data-ttu-id="c0e38-192">Questa esercitazione Scarica implementa il `StaticCache` classe Usa l'approccio di variabile membro statico.</span><span class="sxs-lookup"><span data-stu-id="c0e38-192">This tutorial's download implements the `StaticCache` class using the static member variable approach.</span></span> <span data-ttu-id="c0e38-193">Il codice per le tecniche di cache dello stato e i dati dell'applicazione è disponibile nei commenti nel file di classe.</span><span class="sxs-lookup"><span data-stu-id="c0e38-193">The code for the application state and data cache techniques is available in the comments in the class file.</span></span>


## <a name="step-4-executing-code-at-application-startup"></a><span data-ttu-id="c0e38-194">Passaggio 4: L'esecuzione del codice all'avvio dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="c0e38-194">Step 4: Executing Code at Application Startup</span></span>

<span data-ttu-id="c0e38-195">Per eseguire il codice al primo avvio di un'applicazione web, è necessario creare un file speciale denominato `Global.asax`.</span><span class="sxs-lookup"><span data-stu-id="c0e38-195">To execute code when a web application first starts, we need to create a special file named `Global.asax`.</span></span> <span data-ttu-id="c0e38-196">Questo file può contenere i gestori eventi per l'applicazione-, sessione-, e gli eventi a livello di richiesta ed è qui in cui è possibile aggiungere codice che verrà eseguito ogni volta che viene avviata l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-196">This file can contain event handlers for application-, session-, and request-level events, and it is here where we can add code that will be executed whenever the application starts.</span></span>

<span data-ttu-id="c0e38-197">Aggiungi il `Global.asax` file alla directory radice dell'applicazione web facendo clic sul nome del progetto sito Web in Esplora soluzioni di Visual Studio e scegliendo Aggiungi nuovo elemento.</span><span class="sxs-lookup"><span data-stu-id="c0e38-197">Add the `Global.asax` file to your web application's root directory by right-clicking on the website project name in Visual Studio's Solution Explorer and choosing Add New Item.</span></span> <span data-ttu-id="c0e38-198">Nella finestra di dialogo Aggiungi nuovo elemento selezionare il tipo di elemento di classe di applicazione globale e quindi fare clic sul pulsante Aggiungi.</span><span class="sxs-lookup"><span data-stu-id="c0e38-198">From the Add New Item dialog box, select the Global Application Class item type and then click the Add button.</span></span>

> [!NOTE]
> <span data-ttu-id="c0e38-199">Se hai già un `Global.asax` file nel progetto, la classe di applicazione globale, tipo di elemento non verrà elencato nella finestra di dialogo Aggiungi nuovo elemento.</span><span class="sxs-lookup"><span data-stu-id="c0e38-199">If you already have a `Global.asax` file in your project, the Global Application Class item type will not be listed in the Add New Item dialog box.</span></span>


<span data-ttu-id="c0e38-200">[![Aggiungere il File Global. asax alla Directory radice dell'applicazione Web](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="c0e38-200">[![Add the Global.asax File to Your Web Application's Root Directory](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span></span>

<span data-ttu-id="c0e38-201">**Figura 3**: Aggiungere il `Global.asax` File alla Directory radice dell'applicazione Web Your ([fare clic per visualizzare l'immagine con dimensioni normali](caching-data-at-application-startup-cs/_static/image5.png))</span><span class="sxs-lookup"><span data-stu-id="c0e38-201">**Figure 3**: Add the `Global.asax` File to Your Web Application's Root Directory ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image5.png))</span></span>


<span data-ttu-id="c0e38-202">Il valore predefinito `Global.asax` file modello include cinque metodi all'interno di un server-side `<script>` tag:</span><span class="sxs-lookup"><span data-stu-id="c0e38-202">The default `Global.asax` file template includes five methods within a server-side `<script>` tag:</span></span>

- <span data-ttu-id="c0e38-203">**`Application_Start`** viene eseguito quando l'applicazione web di primo avvio</span><span class="sxs-lookup"><span data-stu-id="c0e38-203">**`Application_Start`** executes when the web application first starts</span></span>
- <span data-ttu-id="c0e38-204">**`Application_End`** viene eseguito quando l'applicazione è in fase di arresto</span><span class="sxs-lookup"><span data-stu-id="c0e38-204">**`Application_End`** runs when the application is shutting down</span></span>
- <span data-ttu-id="c0e38-205">**`Application_Error`** viene eseguita ogni volta che un'eccezione non gestita raggiunge l'applicazione</span><span class="sxs-lookup"><span data-stu-id="c0e38-205">**`Application_Error`** executes whenever an unhandled exception reaches the application</span></span>
- <span data-ttu-id="c0e38-206">**`Session_Start`** viene eseguito quando viene creata una nuova sessione</span><span class="sxs-lookup"><span data-stu-id="c0e38-206">**`Session_Start`** executes when a new session is created</span></span>
- <span data-ttu-id="c0e38-207">**`Session_End`** viene eseguito quando una sessione è scaduta o abbandonata</span><span class="sxs-lookup"><span data-stu-id="c0e38-207">**`Session_End`** runs when a session is expired or abandoned</span></span>

<span data-ttu-id="c0e38-208">Il `Application_Start` gestore eventi viene chiamato una sola volta durante il ciclo di vita di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-208">The `Application_Start` event handler is called only once during an application's life cycle.</span></span> <span data-ttu-id="c0e38-209">L'applicazione viene avviata la prima volta che può verificarsi modificando il contenuto di una risorsa ASP.NET viene richiesto dall'applicazione e continua l'esecuzione fino a quando l'applicazione viene riavviata, il `/Bin` cartella, modifica `Global.asax`, modifica il contenuto nel `App_Code` cartella o la modifica di `Web.config` file, fra le altre cause.</span><span class="sxs-lookup"><span data-stu-id="c0e38-209">The application starts the first time an ASP.NET resource is requested from the application and continues to run until the application is restarted, which can happen by modifying the contents of the `/Bin` folder, modifying `Global.asax`, modifying the contents in the `App_Code` folder, or modifying the `Web.config` file, among other causes.</span></span> <span data-ttu-id="c0e38-210">Fare riferimento a [Panoramica del ciclo di vita di applicazioni ASP.NET](https://msdn.microsoft.com/library/ms178473.aspx) per una discussione più dettagliata sul ciclo di vita dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-210">Refer to [ASP.NET Application Life Cycle Overview](https://msdn.microsoft.com/library/ms178473.aspx) for a more detailed discussion on the application life cycle.</span></span>

<span data-ttu-id="c0e38-211">Per queste esercitazioni è sufficiente aggiungere il codice per il `Application_Start` metodo, in tal caso è possibile rimuovere gli altri.</span><span class="sxs-lookup"><span data-stu-id="c0e38-211">For these tutorials we only need to add code to the `Application_Start` method, so feel free to remove the others.</span></span> <span data-ttu-id="c0e38-212">Nelle `Application_Start`, è sufficiente chiamare il `StaticCache` della classe `LoadStaticCache()` metodo, che verrà caricato e memorizzare nella cache le informazioni sui fornitori:</span><span class="sxs-lookup"><span data-stu-id="c0e38-212">In `Application_Start`, simply call the `StaticCache` class's `LoadStaticCache()` method, which will load and cache the supplier information:</span></span>


[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample6.aspx)]

<span data-ttu-id="c0e38-213">Questo è tutto.</span><span class="sxs-lookup"><span data-stu-id="c0e38-213">That's all there is to it!</span></span> <span data-ttu-id="c0e38-214">All'avvio dell'applicazione, il `LoadStaticCache()` acquisire informazioni sul fornitore da BLL, metodo e archiviarlo in una variabile membro statica (o qualsiasi cache di memorizzare si finisce utilizzando il `StaticCache` classe).</span><span class="sxs-lookup"><span data-stu-id="c0e38-214">At application startup, the `LoadStaticCache()` method will grab the supplier information from the BLL, and store it in a static member variable (or whatever cache store you ended up using in the `StaticCache` class).</span></span> <span data-ttu-id="c0e38-215">Per verificare questo comportamento, impostare un punto di interruzione il `Application_Start` metodo ed eseguire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-215">To verify this behavior, set a breakpoint in the `Application_Start` method and run your application.</span></span> <span data-ttu-id="c0e38-216">Si noti che il punto di interruzione viene raggiunto dopo l'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-216">Note that the breakpoint is hit upon the application starting.</span></span> <span data-ttu-id="c0e38-217">Le richieste successive, tuttavia, non causano la `Application_Start` metodo da eseguire.</span><span class="sxs-lookup"><span data-stu-id="c0e38-217">Subsequent requests, however, do not cause the `Application_Start` method to execute.</span></span>


<span data-ttu-id="c0e38-218">[![Usare un punto di interruzione per verificare che il gestore dell'evento Application_Start sia in esecuzione](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="c0e38-218">[![Use a Breakpoint to Verify that the Application_Start Event Handler is Being Executed](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span></span>

<span data-ttu-id="c0e38-219">**Figura 4**: Usare un punto di interruzione per verificare che il `Application_Start` gestore dell'evento è in esecuzione ([fare clic per visualizzare l'immagine con dimensioni normali](caching-data-at-application-startup-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="c0e38-219">**Figure 4**: Use a Breakpoint to Verify that the `Application_Start` Event Handler is Being Executed ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image8.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c0e38-220">Se non si raggiunge il `Application_Start` punto di interruzione quando si inizia il debug, è perché l'applicazione è già avviato.</span><span class="sxs-lookup"><span data-stu-id="c0e38-220">If you do not hit the `Application_Start` breakpoint when you first start debugging, it is because your application has already started.</span></span> <span data-ttu-id="c0e38-221">Forzare l'applicazione di riavviare modificando la `Global.asax` o `Web.config` file, quindi riprovare.</span><span class="sxs-lookup"><span data-stu-id="c0e38-221">Force the application to restart by modifying your `Global.asax` or `Web.config` files and then try again.</span></span> <span data-ttu-id="c0e38-222">È possibile semplicemente aggiungere (o rimuovere) una riga vuota alla fine di uno di questi file di riavviare rapidamente l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-222">You can simply add (or remove) a blank line at the end of one of these files to quickly restart the application.</span></span>


## <a name="step-5-displaying-the-cached-data"></a><span data-ttu-id="c0e38-223">Passaggio 5: Visualizzazione dei dati memorizzati nella cache</span><span class="sxs-lookup"><span data-stu-id="c0e38-223">Step 5: Displaying the Cached Data</span></span>

<span data-ttu-id="c0e38-224">A questo punto il `StaticCache` classe dispone di una versione dei dati fornitore nella cache all'avvio dell'applicazione che è possibile accedere tramite relativo `GetSuppliers()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="c0e38-224">At this point the `StaticCache` class has a version of the supplier data cached at application startup that can be accessed through its `GetSuppliers()` method.</span></span> <span data-ttu-id="c0e38-225">Per lavorare con i dati dal livello di presentazione, è possibile utilizzare ObjectDataSource o richiamare a livello di codice le `StaticCache` della classe `GetSuppliers()` metodo dalla classe code-behind della pagina ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c0e38-225">To work with this data from the Presentation Layer, we can use an ObjectDataSource or programmatically invoke the `StaticCache` class's `GetSuppliers()` method from an ASP.NET page's code-behind class.</span></span> <span data-ttu-id="c0e38-226">Verrà ora esaminato tramite i controlli ObjectDataSource e GridView per visualizzare le informazioni memorizzate nella cache fornitore.</span><span class="sxs-lookup"><span data-stu-id="c0e38-226">Let's look at using the ObjectDataSource and GridView controls to display the cached supplier information.</span></span>

<span data-ttu-id="c0e38-227">Iniziare aprendo il `AtApplicationStartup.aspx` nella pagina di `Caching` cartella.</span><span class="sxs-lookup"><span data-stu-id="c0e38-227">Start by opening the `AtApplicationStartup.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="c0e38-228">Trascinare un controllo GridView dalla casella degli strumenti nella finestra di progettazione, l'impostazione relativa `ID` proprietà `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="c0e38-228">Drag a GridView from the Toolbox onto the designer, setting its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="c0e38-229">Successivamente, smart tag del controllo GridView di scegliere di creare un nuovo oggetto ObjectDataSource denominato `SuppliersCachedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="c0e38-229">Next, from the GridView's smart tag choose to create a new ObjectDataSource named `SuppliersCachedDataSource`.</span></span> <span data-ttu-id="c0e38-230">Configurare ObjectDataSource per usare la `StaticCache` della classe `GetSuppliers()` (metodo).</span><span class="sxs-lookup"><span data-stu-id="c0e38-230">Configure the ObjectDataSource to use the `StaticCache` class's `GetSuppliers()` method.</span></span>


<span data-ttu-id="c0e38-231">[![Configurare ObjectDataSource per usare la classe StaticCache](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="c0e38-231">[![Configure the ObjectDataSource to use the StaticCache Class](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span></span>

<span data-ttu-id="c0e38-232">**Figura 5**: Configurare ObjectDataSource per usare la `StaticCache` classe ([fare clic per visualizzare l'immagine con dimensioni normali](caching-data-at-application-startup-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="c0e38-232">**Figure 5**: Configure the ObjectDataSource to use the `StaticCache` Class ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image11.png))</span></span>


<span data-ttu-id="c0e38-233">[![Usare il metodo GetSuppliers() per recuperare i dati memorizzati nella cache del fornitore](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="c0e38-233">[![Use the GetSuppliers() Method to Retrieve the Cached Supplier Data](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span></span>

<span data-ttu-id="c0e38-234">**Figura 6**: Usare la `GetSuppliers()` metodo per recuperare i dati memorizzati nella cache del fornitore ([fare clic per visualizzare l'immagine con dimensioni normali](caching-data-at-application-startup-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="c0e38-234">**Figure 6**: Use the `GetSuppliers()` Method to Retrieve the Cached Supplier Data ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image14.png))</span></span>


<span data-ttu-id="c0e38-235">Dopo aver completato la procedura guidata, Visual Studio aggiungerà automaticamente BoundField per ognuno dei campi dati `SuppliersDataTable`.</span><span class="sxs-lookup"><span data-stu-id="c0e38-235">After completing the wizard, Visual Studio will automatically add BoundFields for each of the data fields in `SuppliersDataTable`.</span></span> <span data-ttu-id="c0e38-236">I GridView e ObjectDataSource markup dichiarativo dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c0e38-236">Your GridView and ObjectDataSource's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample7.aspx)]

<span data-ttu-id="c0e38-237">Figura 7 mostra la pagina quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="c0e38-237">Figure 7 shows the page when viewed through a browser.</span></span> <span data-ttu-id="c0e38-238">L'output è lo stesso se avessimo è effettuato il pull dei dati dalla classe BLL `SuppliersBLL` classe, ma l'uso di `StaticCache` classe restituisce i dati fornitore come memorizzati nella cache all'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-238">The output is the same had we pulled the data from the BLL's `SuppliersBLL` class, but using the `StaticCache` class returns the supplier data as cached at application startup.</span></span> <span data-ttu-id="c0e38-239">È possibile impostare i punti di interruzione nella `StaticCache` della classe `GetSuppliers()` metodo per verificare questo comportamento.</span><span class="sxs-lookup"><span data-stu-id="c0e38-239">You can set breakpoints in the `StaticCache` class's `GetSuppliers()` method to verify this behavior.</span></span>


<span data-ttu-id="c0e38-240">[![I dati fornitore memorizzato nella cache vengono visualizzati in un oggetto GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="c0e38-240">[![The Cached Supplier Data is Displayed in a GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span></span>

<span data-ttu-id="c0e38-241">**Figura 7**: I dati fornitore memorizzato nella cache vengono visualizzati in un controllo GridView ([fare clic per visualizzare l'immagine con dimensioni normali](caching-data-at-application-startup-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="c0e38-241">**Figure 7**: The Cached Supplier Data is Displayed in a GridView ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image17.png))</span></span>


## <a name="summary"></a><span data-ttu-id="c0e38-242">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="c0e38-242">Summary</span></span>

<span data-ttu-id="c0e38-243">La maggior parte delle ogni modello di dati contiene una notevole quantità di dati statici, in genere implementati sotto forma di tabelle di ricerca.</span><span class="sxs-lookup"><span data-stu-id="c0e38-243">Most every data model contains a fair amount of static data, usually implemented in the form of lookup tables.</span></span> <span data-ttu-id="c0e38-244">Poiché queste informazioni sono statiche, non c'è nessun motivo continuamente accedere al database ogni volta che queste informazioni devono essere visualizzati.</span><span class="sxs-lookup"><span data-stu-id="c0e38-244">Since this information is static, there's no reason to continually access the database each time this information needs to be displayed.</span></span> <span data-ttu-id="c0e38-245">Inoltre, grazie alla sua natura statico, una volta la memorizzazione nella cache i dati non esiste alcuna necessità di una scadenza.</span><span class="sxs-lookup"><span data-stu-id="c0e38-245">Furthermore, due to its static nature, when caching the data there's no need for an expiry.</span></span> <span data-ttu-id="c0e38-246">In questa esercitazione è stato illustrato come sfruttare tali dati e memorizzare nella cache nella cache dei dati, lo stato dell'applicazione e tramite una variabile membro statica.</span><span class="sxs-lookup"><span data-stu-id="c0e38-246">In this tutorial we saw how to take such data and cache it in the data cache, application state, and through a static member variable.</span></span> <span data-ttu-id="c0e38-247">Queste informazioni sono memorizzato nella cache all'avvio dell'applicazione e rimangono nella cache, tutta la durata dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c0e38-247">This information is cached at application startup and remains in the cache throughout the application's lifetime.</span></span>

<span data-ttu-id="c0e38-248">In questa esercitazione e i due precedenti, è stato preso in esame la memorizzazione nella cache i dati per la durata del ciclo di vita dell'applicazione, nonché tramite oggetti scaduti nella basati sul tempo.</span><span class="sxs-lookup"><span data-stu-id="c0e38-248">In this tutorial and the past two, we ve looked at caching data for the duration of the application's lifetime as well as using time-based expiries.</span></span> <span data-ttu-id="c0e38-249">Quando la memorizzazione nella cache i dati del database, tuttavia, una scadenza basati sul tempo può essere inferiore a quello ideale.</span><span class="sxs-lookup"><span data-stu-id="c0e38-249">When caching database data, though, a time-based expiry may be less than ideal.</span></span> <span data-ttu-id="c0e38-250">Invece di scaricare periodicamente la cache, sarebbe ottimale per rimuovere solo l'elemento memorizzato nella cache quando vengono modificati i dati di database sottostante.</span><span class="sxs-lookup"><span data-stu-id="c0e38-250">Rather than periodically flushing the cache, it would be optimal to only evict the cached item when the underlying database data is modified.</span></span> <span data-ttu-id="c0e38-251">Questa soluzione ideale è possibile grazie all'utilizzo di dipendenze della cache SQL, che verrà esaminato nell'esercitazione successiva.</span><span class="sxs-lookup"><span data-stu-id="c0e38-251">This ideal is possible through the use of SQL cache dependencies, which we'll examine in our next tutorial.</span></span>

<span data-ttu-id="c0e38-252">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="c0e38-252">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="c0e38-253">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="c0e38-253">About the Author</span></span>

<span data-ttu-id="c0e38-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette libri e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha collaborato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="c0e38-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="c0e38-255">Lavora come un consulente, formatore e autore.</span><span class="sxs-lookup"><span data-stu-id="c0e38-255">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="c0e38-256">Il suo ultimo libro si intitola [ *Sams Teach Yourself ASP.NET 2.0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="c0e38-256">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="c0e38-257">È possibile contattarlo al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c0e38-257">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="c0e38-258">o sul suo blog, che è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="c0e38-258">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="c0e38-259">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="c0e38-259">Special Thanks To</span></span>

<span data-ttu-id="c0e38-260">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="c0e38-260">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="c0e38-261">I revisori per questa esercitazione sono state Teresa Murphy e Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="c0e38-261">Lead reviewers for this tutorial were Teresa Murphy and Zack Jones.</span></span> <span data-ttu-id="c0e38-262">Se si è interessati prossimi articoli MSDN dello?</span><span class="sxs-lookup"><span data-stu-id="c0e38-262">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="c0e38-263">In questo caso, Inviami una riga in corrispondenza [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c0e38-263">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c0e38-264">[Precedente](caching-data-in-the-architecture-cs.md)
> [Successivo](using-sql-cache-dependencies-cs.md)</span><span class="sxs-lookup"><span data-stu-id="c0e38-264">[Previous](caching-data-in-the-architecture-cs.md)
[Next](using-sql-cache-dependencies-cs.md)</span></span>
