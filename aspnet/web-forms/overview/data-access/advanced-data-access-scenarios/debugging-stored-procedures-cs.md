---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-cs
title: Debug di Stored procedure (c#) | Microsoft Docs
author: rick-anderson
description: Versioni di Visual Studio Professional e Team System Edition consentono di impostare punti di interruzione e passaggio alle stored procedure all'interno di SQL Server, effettua il debug archiviate...
ms.author: riande
ms.date: 08/03/2007
ms.assetid: c655c324-2ffa-4c21-8265-a254d79a693d
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-cs
msc.type: authoredcontent
ms.openlocfilehash: 9ac206edee58542ced24ce89adc3393d7a3c1c37
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/17/2019
ms.locfileid: "59392170"
---
# <a name="debugging-stored-procedures-c"></a><span data-ttu-id="e2b3d-103">Debug di stored procedure (C#)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-103">Debugging Stored Procedures (C#)</span></span>

<span data-ttu-id="e2b3d-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e2b3d-105">[Scaricare il codice](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_CS.zip) o [Scarica il PDF](debugging-stored-procedures-cs/_static/datatutorial74cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-105">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_CS.zip) or [Download PDF](debugging-stored-procedures-cs/_static/datatutorial74cs1.pdf)</span></span>

> <span data-ttu-id="e2b3d-106">Versioni di Visual Studio Professional e Team System Edition consentono di impostare punti di interruzione e passaggio alle stored procedure all'interno di SQL Server, effettua il debug di stored procedure facile come il debug di codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-106">Visual Studio Professional and Team System editions allow you to set breakpoints and step in to stored procedures within SQL Server, making debugging stored procedures as easy as debugging application code.</span></span> <span data-ttu-id="e2b3d-107">Questa esercitazione illustra il debug diretto di un database e il debug dell'applicazione delle stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-107">This tutorial demonstrates direct database debugging and application debugging of stored procedures.</span></span>


## <a name="introduction"></a><span data-ttu-id="e2b3d-108">Introduzione</span><span class="sxs-lookup"><span data-stu-id="e2b3d-108">Introduction</span></span>

<span data-ttu-id="e2b3d-109">Visual Studio offre un'esperienza di debug avanzata.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-109">Visual Studio provides a rich debugging experience.</span></span> <span data-ttu-id="e2b3d-110">Con poche sequenze di tasti o del clic del mouse, è possibile usare i punti di interruzione per arrestare l'esecuzione di un programma ed esaminare il flusso di controllo e lo stato.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-110">With a few keystrokes or clicks of the mouse, it s possible to use breakpoints to stop execution of a program and examine its state and control flow.</span></span> <span data-ttu-id="e2b3d-111">Insieme a debug il codice dell'applicazione, Visual Studio offre supporto per il debug di stored procedure da SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-111">Along with debugging application code, Visual Studio offers support for debugging stored procedures from within SQL Server.</span></span> <span data-ttu-id="e2b3d-112">Proprio come i punti di interruzione può essere impostate all'interno del codice di una classe code-behind ASP.NET o classe di livello per la logica di Business, in modo eccessivo può essere inseriti all'interno di stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-112">Just like breakpoints can be set within the code of an ASP.NET code-behind class or Business Logic Layer class, so too can they be placed within stored procedures.</span></span>

<span data-ttu-id="e2b3d-113">In questa esercitazione si esaminerà l'esecuzione di istruzioni nella stored procedure da Esplora Server all'interno di Visual Studio anche come impostare punti di interruzione raggiunti quando la stored procedure viene chiamata dall'applicazione ASP.NET in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-113">In this tutorial we will look at stepping into stored procedures from the Server Explorer within Visual Studio as well as how to set breakpoints that are hit when the stored procedure is called from the running ASP.NET application.</span></span>

> [!NOTE]
> <span data-ttu-id="e2b3d-114">Sfortunatamente, stored procedure possono solo essere eseguite l'istruzione e il debug tramite le versioni di sistemi Professional e Team di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-114">Unfortunately, stored procedures can only be stepped into and debugged through the Professional and Team Systems versions of Visual Studio.</span></span> <span data-ttu-id="e2b3d-115">Se si usa la versione standard di Visual Studio o Visual Web Developer, siete invitati a leggere lungo perché illustra i passaggi necessari per eseguire il debug di stored procedure, ma non sarà in grado di replicare questi passaggi nel computer.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-115">If you are using Visual Web Developer or the standard version of Visual Studio, you are welcome to read along as we walk through the steps necessary to debug stored procedures, but you will not be able to replicate these steps on your machine.</span></span>


## <a name="sql-server-debugging-concepts"></a><span data-ttu-id="e2b3d-116">Concetti di debug di SQL Server</span><span class="sxs-lookup"><span data-stu-id="e2b3d-116">SQL Server Debugging Concepts</span></span>

<span data-ttu-id="e2b3d-117">Microsoft SQL Server 2005 è stato progettato per fornire l'integrazione con il [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), ovvero il runtime usato da tutti gli assembly .NET.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-117">Microsoft SQL Server 2005 was designed to provide integration with the [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), which is the runtime used by all .NET assemblies.</span></span> <span data-ttu-id="e2b3d-118">Di conseguenza, SQL Server 2005 supporta gli oggetti di database gestito.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-118">Consequently, SQL Server 2005 supports managed database objects.</span></span> <span data-ttu-id="e2b3d-119">Vale a dire, è possibile creare oggetti di database, ad esempio stored procedure e funzioni definite dall'utente (UDF) come metodi in una classe c#.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-119">That is, you can create database objects like stored procedures and User-Defined Functions (UDFs) as methods in a C# class.</span></span> <span data-ttu-id="e2b3d-120">In questo modo le stored procedure e funzioni definite dall'utente per usare la funzionalità in .NET Framework e da proprie classi personalizzate.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-120">This enables these stored procedures and UDFs to utilize functionality in the .NET Framework and from your own custom classes.</span></span> <span data-ttu-id="e2b3d-121">Naturalmente, SQL Server 2005 fornisce inoltre supporto per gli oggetti di database T-SQL.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-121">Of course, SQL Server 2005 also provides support for T-SQL database objects.</span></span>

<span data-ttu-id="e2b3d-122">SQL Server 2005 offre supporto per il debug di T-SQL sia gli oggetti di database gestito.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-122">SQL Server 2005 offers debugging support for both T-SQL and managed database objects.</span></span> <span data-ttu-id="e2b3d-123">Tuttavia, questi oggetti possono solo eseguire il debug nelle diverse edizioni di Visual Studio 2005 Professional e Team di sistemi.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-123">However, these objects can only be debugged through Visual Studio 2005 Professional and Team Systems editions.</span></span> <span data-ttu-id="e2b3d-124">In questa esercitazione verranno esaminate debug gli oggetti di database T-SQL.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-124">In this tutorial we will examine debugging T-SQL database objects.</span></span> <span data-ttu-id="e2b3d-125">L'esercitazione successiva illustra il debug di oggetti di database gestiti.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-125">The subsequent tutorial looks at debugging managed database objects.</span></span>

<span data-ttu-id="e2b3d-126">Il [Panoramica di T-SQL e il debug di CLR in SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) post di blog dalle [team di integrazione CLR di SQL Server 2005](https://blogs.msdn.com/sqlclr/default.aspx) evidenzia i tre modi per eseguire il debug di oggetti di SQL Server 2005 da Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="e2b3d-126">The [Overview of T-SQL and CLR Debugging in SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) blog entry from the [SQL Server 2005 CLR Integration team](https://blogs.msdn.com/sqlclr/default.aspx) highlights the three ways to debug SQL Server 2005 objects from Visual Studio:</span></span>

- <span data-ttu-id="e2b3d-127">**Indirizzare il debug di Database (DDD)** - da Esplora Server è possibile eseguire l'istruzione qualsiasi oggetto di database T-SQL, ad esempio stored procedure e funzioni definite dall'utente.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-127">**Direct Database Debugging (DDD)** - from Server Explorer we can step into any T-SQL database object, such as stored procedures and UDFs.</span></span> <span data-ttu-id="e2b3d-128">Verranno esaminate DDD nel passaggio 1.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-128">We will examine DDD in Step 1.</span></span>
- <span data-ttu-id="e2b3d-129">**Debug dell'applicazione** -è possibile impostare punti di interruzione all'interno di un oggetto di database e quindi eseguire l'applicazione ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-129">**Application Debugging** - we can set breakpoints within a database object and then run our ASP.NET application.</span></span> <span data-ttu-id="e2b3d-130">Quando viene eseguito l'oggetto di database, il punto di interruzione verrà raggiunto e attivato il controllo al debugger.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-130">When the database object is executed, the breakpoint will be hit and control turned over to the debugger.</span></span> <span data-ttu-id="e2b3d-131">Si noti che con il debug dell'applicazione è possibile passare in un oggetto di database dal codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-131">Note that with application debugging we cannot step into a database object from application code.</span></span> <span data-ttu-id="e2b3d-132">È necessario impostare punti di interruzione in modo esplicito in tali stored procedure o funzioni definite dall'utente in cui si desidera che il debugger per interrompere.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-132">We must explicitly set breakpoints in those stored procedures or UDFs where we want the debugger to stop.</span></span> <span data-ttu-id="e2b3d-133">Debug dell'applicazione viene esaminato avvio nel passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-133">Application debugging is examined starting in Step 2.</span></span>
- <span data-ttu-id="e2b3d-134">**Il debug da un progetto di SQL Server** -edizioni di Visual Studio Professional e sistemi Team includono un tipo di progetto di SQL Server che viene comunemente usato per creare oggetti di database gestiti.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-134">**Debugging from a SQL Server Project** - Visual Studio Professional and Team Systems editions include a SQL Server Project type that is commonly used to create managed database objects.</span></span> <span data-ttu-id="e2b3d-135">Verranno esaminate tramite progetti di SQL Server e il debug i relativi contenuti nella prossima esercitazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-135">We will examine using SQL Server Projects and debugging their contents in the next tutorial.</span></span>

<span data-ttu-id="e2b3d-136">Visual Studio può eseguire il debug di stored procedure in istanze di SQL Server locali e remote.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-136">Visual Studio can debug stored procedures on local and remote SQL Server instances.</span></span> <span data-ttu-id="e2b3d-137">Un'istanza di SQL Server locale è ne sono installati nello stesso computer di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-137">A local SQL Server instance is one that is installed on the same machine as Visual Studio.</span></span> <span data-ttu-id="e2b3d-138">Se non si trova il database di SQL Server in uso nel computer di sviluppo, quindi viene considerato un'istanza remota.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-138">If the SQL Server database you are using is not located on your development machine, then it is considered a remote instance.</span></span> <span data-ttu-id="e2b3d-139">Per queste esercitazioni usati istanze locali di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-139">For these tutorials we have been using local SQL Server instances.</span></span> <span data-ttu-id="e2b3d-140">Debug di stored procedure in un'istanza remota di SQL server richiede ulteriori passaggi di configurazione rispetto a quando il debug di stored procedure in un'istanza locale.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-140">Debugging stored procedures on a remote SQL server instance requires more configuration steps than when debugging stored procedures on a local instance.</span></span>

<span data-ttu-id="e2b3d-141">Se si usa un'istanza di SQL Server locale, è possibile iniziare con il passaggio 1 e funzionamento di questa esercitazione alla fine.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-141">If you are using a local SQL Server instance, you can start with Step 1 and work through this tutorial to the end.</span></span> <span data-ttu-id="e2b3d-142">Se si usa un'istanza remota di SQL Server, tuttavia, sarà prima necessario assicurarsi che durante il debug è effettuato l'accesso al computer di sviluppo con un account utente di Windows che dispone di un account di accesso di SQL Server nell'istanza remota.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-142">If you are using a remote SQL Server instance, however, you will first need to ensure that when debugging you are logged to your development machine with a Windows user account that has a SQL Server login on the remote instance.</span></span> <span data-ttu-id="e2b3d-143">Inoltre, questo account di accesso di database sia l'account di accesso di database usato per connettersi al database dell'applicazione ASP.NET in esecuzione devono essere membri del `sysadmin` ruolo.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-143">Moreover, both this database login and the database login used to connect to the database from the running ASP.NET application must be members of the `sysadmin` role.</span></span> <span data-ttu-id="e2b3d-144">Alla fine di questa esercitazione per altre informazioni sulla configurazione di Visual Studio e SQL Server per eseguire il debug di un'istanza remota, vedere gli oggetti di Database di debug di T-SQL nella sezione istanze Remote.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-144">See the Debugging T-SQL Database Objects on Remote Instances section at the end of this tutorial for more information on configuring Visual Studio and SQL Server to debug a remote instance.</span></span>

<span data-ttu-id="e2b3d-145">Infine, comprendere che il supporto per oggetti di database T-SQL del debug non è come funzionalità avanzate come supporto per le applicazioni .NET per il debug.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-145">Finally, understand that debugging support for T-SQL database objects is not as feature rich as debugging support for .NET applications.</span></span> <span data-ttu-id="e2b3d-146">Ad esempio, le condizioni punto di interruzione e i filtri non sono supportati, solo un subset delle finestre di debug sono disponibili, è possibile usare modifica e continuazione, la finestra controllo immediato viene eseguito il rendering inutile e così via.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-146">For example, breakpoint conditions and filters are not supported, only a subset of the debugging windows are available, you cannot use Edit and Continue, the Immediate window is rendered useless, and so forth.</span></span> <span data-ttu-id="e2b3d-147">Visualizzare [limitazioni sui comandi del Debugger e le funzionalità](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) per altre informazioni.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-147">See [Limitations on Debugger Commands and Features](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) for more information.</span></span>

## <a name="step-1-directly-stepping-into-a-stored-procedure"></a><span data-ttu-id="e2b3d-148">Passaggio 1: Direttamente l'esecuzione di una Stored Procedure</span><span class="sxs-lookup"><span data-stu-id="e2b3d-148">Step 1: Directly Stepping Into a Stored Procedure</span></span>

<span data-ttu-id="e2b3d-149">Visual Studio è facile eseguire direttamente il debug di un oggetto di database.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-149">Visual Studio makes it easy to directly debug a database object.</span></span> <span data-ttu-id="e2b3d-150">Let s illustrato come usare la funzionalità di debug di Database diretto (DDD) per eseguire l'istruzione di `Products_SelectByCategoryID` stored procedure nel database Northwind.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-150">Let s look at how to use the Direct Database Debugging (DDD) feature to step into the `Products_SelectByCategoryID` stored procedure in the Northwind database.</span></span> <span data-ttu-id="e2b3d-151">Come suggerisce il nome, `Products_SelectByCategoryID` restituisce le informazioni per una determinata categoria; è stata creata nel [utilizzando Stored procedure esistenti per DataSet tipizzata s TableAdapter](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) esercitazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-151">As its name implies, `Products_SelectByCategoryID` returns product information for a particular category; it was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="e2b3d-152">Per iniziare, passare a Esplora Server ed espandere il nodo del database Northwind.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-152">Start by going to the Server Explorer and expand the Northwind database node.</span></span> <span data-ttu-id="e2b3d-153">Successivamente, eseguire il drill-nella cartella di Stored procedure, fare clic su di `Products_SelectByCategoryID` stored procedure e scegliere l'opzione Esegui Stored Procedure dal menu di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-153">Next, drill down into the Stored Procedures folder, right-click on the `Products_SelectByCategoryID` stored procedure, and choose the Step Into Stored Procedure option from the context menu.</span></span> <span data-ttu-id="e2b3d-154">Verrà avviato il debugger.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-154">This will start the debugger.</span></span>

<span data-ttu-id="e2b3d-155">Poiché il `Products_SelectByCategoryID` stored procedure si aspetta un `@CategoryID` parametro di input, ci viene richiesto di fornire questo valore.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-155">Since the `Products_SelectByCategoryID` stored procedure expects a `@CategoryID` input parameter, we are asked to provide this value.</span></span> <span data-ttu-id="e2b3d-156">Immettere 1, che restituisce informazioni sulle bibite.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-156">Enter 1, which will return information about the beverages.</span></span>


![Usare il valore 1 per il @CategoryID parametro](debugging-stored-procedures-cs/_static/image1.png)

<span data-ttu-id="e2b3d-158">**Figura 1**: Usare il valore 1 per il `@CategoryID` parametro</span><span class="sxs-lookup"><span data-stu-id="e2b3d-158">**Figure 1**: Use the Value 1 for the `@CategoryID` Parameter</span></span>


<span data-ttu-id="e2b3d-159">Dopo aver fornito il valore per il `@CategoryID` parametro, la stored procedure viene eseguita.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-159">After supplying the value for the `@CategoryID` parameter, the stored procedure is executed.</span></span> <span data-ttu-id="e2b3d-160">Tuttavia, anziché tramite l'esecuzione fino al completamento, il debugger interrompe l'esecuzione della prima istruzione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-160">Rather than running to completion, though, the debugger halts execution on the first statement.</span></span> <span data-ttu-id="e2b3d-161">Si noti la freccia gialla nel margine, che indica la posizione corrente nella stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-161">Note the yellow arrow in the margin, indicating the current location in the stored procedure.</span></span> <span data-ttu-id="e2b3d-162">È possibile visualizzare e modificare i valori dei parametri tramite la finestra Espressioni di controllo o posizionando il puntatore sul nome del parametro nella stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-162">You can view and edit parameter values through the Watch window or by hovering over the parameter name in the stored procedure.</span></span>


<span data-ttu-id="e2b3d-163">[![Il Debugger ha interrotto la prima istruzione della Stored Procedure](debugging-stored-procedures-cs/_static/image3.png)](debugging-stored-procedures-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-163">[![The Debugger has Halted on the First Statement of the Stored Procedure](debugging-stored-procedures-cs/_static/image3.png)](debugging-stored-procedures-cs/_static/image2.png)</span></span>

<span data-ttu-id="e2b3d-164">**Figura 2**: Il Debugger ha interrotto la prima istruzione della Stored Procedure ([fare clic per visualizzare l'immagine con dimensioni normali](debugging-stored-procedures-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="e2b3d-164">**Figure 2**: The Debugger has Halted on the First Statement of the Stored Procedure ([Click to view full-size image](debugging-stored-procedures-cs/_static/image4.png))</span></span>


<span data-ttu-id="e2b3d-165">Per esaminare la stored procedure un'istruzione alla volta, fare clic sul pulsante Esegui istruzione/routine nella barra degli strumenti o premere il tasto F10.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-165">To step through the stored procedure one statement at a time, click the Step Over button in the Toolbar or hit the F10 key.</span></span> <span data-ttu-id="e2b3d-166">Il `Products_SelectByCategoryID` stored procedure contiene un singolo `SELECT` istruzione, in modo da raggiungere F10 verrà Esegui istruzione/routine di singola istruzione e completare l'esecuzione della stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-166">The `Products_SelectByCategoryID` stored procedure contains a single `SELECT` statement, so hitting F10 will Step over the single statement and complete the execution of the stored procedure.</span></span> <span data-ttu-id="e2b3d-167">Dopo il completamento della stored procedure, l'output verrà visualizzato nella finestra di Output e il debugger verrà terminato.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-167">After the stored procedure has completed, its output will appear in the Output window and the debugger will terminate.</span></span>

> [!NOTE]
> <span data-ttu-id="e2b3d-168">Debug di T-SQL si verifica a livello di istruzione. è possibile eseguire istruzioni un `SELECT` istruzione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-168">T-SQL debugging occurs at the statement level; you cannot Step into a `SELECT` statement.</span></span>


## <a name="step-2-configuring-the-website-for-application-debugging"></a><span data-ttu-id="e2b3d-169">Passaggio 2: Configurazione del sito Web per il debug dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="e2b3d-169">Step 2: Configuring the Website for Application Debugging</span></span>

<span data-ttu-id="e2b3d-170">Durante il debug di una stored procedure direttamente da Esplora Server è utile, in molti scenari siamo più interessati a stored procedure di debug quando viene chiamata dall'applicazione ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-170">While debugging a stored procedure directly from the Server Explorer is handy, in many scenarios we are more interested in debugging the stored procedure when it is called from our ASP.NET application.</span></span> <span data-ttu-id="e2b3d-171">È possibile aggiungere i punti di interruzione a una stored procedure dall'interno di Visual Studio e quindi avviare il debug dell'applicazione ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-171">We can add breakpoints to a stored procedure from within Visual Studio and then start debugging the ASP.NET application.</span></span> <span data-ttu-id="e2b3d-172">Quando una stored procedure con i punti di interruzione viene richiamata dall'applicazione, l'esecuzione si arresta nel punto di interruzione ed è possibile visualizzare e modificare i valori dei parametri di stored procedure s e scorrere le relative istruzioni, come abbiamo fatto nel passaggio 1.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-172">When a stored procedure with breakpoints is invoked from the application, execution will halt at the breakpoint and we can view and change the stored procedure s parameter values and step through its statements, just like we did in Step 1.</span></span>

<span data-ttu-id="e2b3d-173">Prima di poter iniziare il debug di stored procedure chiamate dall'applicazione, è necessario indicare all'applicazione web ASP.NET per l'integrazione con il debugger di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-173">Before we can start debugging stored procedures called from the application, we need to instruct the ASP.NET web application to integrate with the SQL Server debugger.</span></span> <span data-ttu-id="e2b3d-174">Avviare facendo clic sul nome del sito Web in Esplora soluzioni (`ASPNET_Data_Tutorial_74_CS`).</span><span class="sxs-lookup"><span data-stu-id="e2b3d-174">Start by right-clicking on the website name in the Solution Explorer (`ASPNET_Data_Tutorial_74_CS`).</span></span> <span data-ttu-id="e2b3d-175">Scegliere l'opzione di pagine delle proprietà dal menu di scelta rapida, selezionare l'elemento di opzioni di avvio a sinistra e selezionare la casella di controllo di SQL Server nella sezione debugger (vedere la figura 3).</span><span class="sxs-lookup"><span data-stu-id="e2b3d-175">Choose the Property Pages option from the context menu, select the Start Options item on the left, and check the SQL Server checkbox in the Debuggers section (see Figure 3).</span></span>


<span data-ttu-id="e2b3d-176">[![Casella di controllo di SQL Server nelle pagine delle proprietà dell'applicazione s](debugging-stored-procedures-cs/_static/image6.png)](debugging-stored-procedures-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-176">[![Check the SQL Server Checkbox in the Application s Property Pages](debugging-stored-procedures-cs/_static/image6.png)](debugging-stored-procedures-cs/_static/image5.png)</span></span>

<span data-ttu-id="e2b3d-177">**Figura 3**: Casella di controllo di SQL Server nell'applicazione s pagine delle proprietà ([fare clic per visualizzare l'immagine con dimensioni normali](debugging-stored-procedures-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="e2b3d-177">**Figure 3**: Check the SQL Server Checkbox in the Application s Property Pages ([Click to view full-size image](debugging-stored-procedures-cs/_static/image7.png))</span></span>


<span data-ttu-id="e2b3d-178">Inoltre, è necessario aggiornare la stringa di connessione di database usata dall'applicazione in modo che il pool di connessioni è disabilitato.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-178">Additionally, we need to update the database connection string used by the application so that connection pooling is disabled.</span></span> <span data-ttu-id="e2b3d-179">Quando viene chiusa una connessione a un database, il corrispondente `SqlConnection` oggetto viene posizionato in un pool di connessioni disponibili.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-179">When a connection to a database is closed, the corresponding `SqlConnection` object is placed in a pool of available connections.</span></span> <span data-ttu-id="e2b3d-180">Quando si stabilisce una connessione a un database, un oggetto di connessione disponibili possono essere recuperati da questo pool anziché dover creare e stabilire una nuova connessione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-180">When establishing a connection to a database, an available connection object can be retrieved from this pool rather than having to create and establish a new connection.</span></span> <span data-ttu-id="e2b3d-181">Questo pool di oggetti di connessione è un miglioramento delle prestazioni e viene abilitato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-181">This pooling of connection objects is a performance enhancement and is enabled by default.</span></span> <span data-ttu-id="e2b3d-182">Tuttavia, durante il debug si vuole disattivare il pool di connessioni, poiché l'infrastruttura di debug non viene ristabilita correttamente quando si lavora con una connessione che è stata estratta dal pool.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-182">However, when debugging we want to turn off connection pooling because the debugging infrastructure is not correctly reestablished when working with a connection that was taken from the pool.</span></span>

<span data-ttu-id="e2b3d-183">Per il pool di connessioni disattivato, aggiornare il `NORTHWNDConnectionString` nelle `Web.config` in modo che includa l'impostazione `Pooling=false` .</span><span class="sxs-lookup"><span data-stu-id="e2b3d-183">To disabled connection pooling, update the `NORTHWNDConnectionString` in `Web.config` so that it includes the setting `Pooling=false` .</span></span>


[!code-xml[Main](debugging-stored-procedures-cs/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="e2b3d-184">Dopo aver completato il debug di SQL Server tramite l'applicazione ASP.NET assicurarsi di riattivare il pool di connessioni tramite la rimozione di `Pooling` impostazione dalla stringa di connessione (o impostandolo su `Pooling=true` ).</span><span class="sxs-lookup"><span data-stu-id="e2b3d-184">Once you have finished debugging SQL Server through the ASP.NET application be sure to reinstate connection pooling by removing the `Pooling` setting from the connection string (or by setting it to `Pooling=true` ).</span></span>


<span data-ttu-id="e2b3d-185">A questo punto l'applicazione ASP.NET è stata configurata per consentire a Visual Studio eseguire il debug di oggetti di database di SQL Server quando viene richiamato tramite l'applicazione web.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-185">At this point the ASP.NET application has been configured to allow Visual Studio to debug SQL Server database objects when invoked through the web application.</span></span> <span data-ttu-id="e2b3d-186">L'ultima ora consiste nell'aggiungere un punto di interruzione a una stored procedure e avviare il debug.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-186">All that remains now is to add a breakpoint to a stored procedure and start debugging!</span></span>

## <a name="step-3-adding-a-breakpoint-and-debugging"></a><span data-ttu-id="e2b3d-187">Passaggio 3: Aggiunta di un punto di interruzione e il debug</span><span class="sxs-lookup"><span data-stu-id="e2b3d-187">Step 3: Adding a Breakpoint and Debugging</span></span>

<span data-ttu-id="e2b3d-188">Aprire il `Products_SelectByCategoryID` stored procedure e impostare un punto di interruzione all'inizio del `SELECT` istruzione, fare clic sul margine nella posizione appropriata o posizionando il cursore all'inizio del `SELECT` istruzione e premendo F9.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-188">Open the `Products_SelectByCategoryID` stored procedure and set a breakpoint at the start of the `SELECT` statement by clicking in the margin at the appropriate place or by placing your cursor at the start of the `SELECT` statement and hitting F9.</span></span> <span data-ttu-id="e2b3d-189">Come illustrato nella figura 4, il punto di interruzione viene visualizzato come un cerchio rosso sul margine.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-189">As Figure 4 illustrates, the breakpoint appears as a red circle in the margin.</span></span>


<span data-ttu-id="e2b3d-190">[![Impostare un punto di interruzione il Products_SelectByCategoryID Stored Procedure](debugging-stored-procedures-cs/_static/image9.png)](debugging-stored-procedures-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-190">[![Set a Breakpoint in the Products_SelectByCategoryID Stored Procedure](debugging-stored-procedures-cs/_static/image9.png)](debugging-stored-procedures-cs/_static/image8.png)</span></span>

<span data-ttu-id="e2b3d-191">**Figura 4**: Impostare un punto di interruzione il `Products_SelectByCategoryID` Stored Procedure ([fare clic per visualizzare l'immagine con dimensioni normali](debugging-stored-procedures-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="e2b3d-191">**Figure 4**: Set a Breakpoint in the `Products_SelectByCategoryID` Stored Procedure ([Click to view full-size image](debugging-stored-procedures-cs/_static/image10.png))</span></span>


<span data-ttu-id="e2b3d-192">Affinché un oggetto di database SQL da sottoporre a debug attraverso un'applicazione client, è fondamentale che il database deve essere configurato per supportare il debug dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-192">In order for a SQL database object to be debugged through a client application, it is imperative that the database be configured to support application debugging.</span></span> <span data-ttu-id="e2b3d-193">Quando si imposta un punto di interruzione, questa impostazione deve essere cambiata automaticamente, ma è consigliabile controllare nuovamente.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-193">When you first set a breakpoint, this setting should automatically be switched on, but it is prudent to double-check.</span></span> <span data-ttu-id="e2b3d-194">Fare clic su di `NORTHWND.MDF` nodo in Esplora Server.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-194">Right-click on the `NORTHWND.MDF` node in the Server Explorer.</span></span> <span data-ttu-id="e2b3d-195">Menu di scelta rapida deve includere un menu di selezione elemento denominato il debug dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-195">The context menu should include a checked menu item named Application Debugging .</span></span>


![Assicurarsi che sia abilitata l'opzione di debug dell'applicazione](debugging-stored-procedures-cs/_static/image11.png)

<span data-ttu-id="e2b3d-197">**Figura 5**: Assicurarsi che sia abilitata l'opzione di debug dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="e2b3d-197">**Figure 5**: Ensure that the Application Debugging Option is Enabled</span></span>


<span data-ttu-id="e2b3d-198">Con il set di punti di interruzione e l'opzione di debug dell'applicazione abilitata, siamo pronti eseguire il debug di stored procedure quando viene chiamato dall'applicazione ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-198">With the breakpoint set and the Application Debugging option enabled, we are ready to debug the stored procedure when called from the ASP.NET application.</span></span> <span data-ttu-id="e2b3d-199">Avviare il debugger, passare al menu Debug e scegliendo Avvia debug, premendo F5 o facendo clic su verde icona Riproduci sulla barra degli strumenti.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-199">Start the debugger by going to the Debug menu and choosing Start Debugging, by hitting F5, or by clicking the green play icon in the Toolbar.</span></span> <span data-ttu-id="e2b3d-200">Verrà avvia il debugger e avviare il sito Web.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-200">This will start the debugger and launch the website.</span></span>

<span data-ttu-id="e2b3d-201">Il `Products_SelectByCategoryID` stored procedure è stata creata nel [utilizzando Stored procedure esistenti per DataSet tipizzata s TableAdapter](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) esercitazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-201">The `Products_SelectByCategoryID` stored procedure was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="e2b3d-202">La pagina web corrispondente (`~/AdvancedDAL/ExistingSprocs.aspx`) contiene GridView che visualizza i risultati restituiti dalla stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-202">Its corresponding web page (`~/AdvancedDAL/ExistingSprocs.aspx`) contains a GridView that displays the results returned by this stored procedure.</span></span> <span data-ttu-id="e2b3d-203">Visitare questa pagina tramite il browser.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-203">Visit this page through the browser.</span></span> <span data-ttu-id="e2b3d-204">Al raggiungimento di pagina, il punto di interruzione il `Products_SelectByCategoryID` verranno raggiunti stored procedure e il controllo restituito a Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-204">Upon reaching the page, the breakpoint in the `Products_SelectByCategoryID` stored procedure will be hit and control returned to Visual Studio.</span></span> <span data-ttu-id="e2b3d-205">Proprio come nel passaggio 1, è possibile esaminare le istruzioni s stored procedure e la visualizzazione e modificare i valori dei parametri.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-205">Just like in Step 1, you can step through the stored procedure s statements and view and modify the parameter values.</span></span>


<span data-ttu-id="e2b3d-206">[![La pagina ExistingSprocs.aspx Visualizza inizialmente le bibite](debugging-stored-procedures-cs/_static/image13.png)](debugging-stored-procedures-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-206">[![The ExistingSprocs.aspx Page Initially Displays the Beverages](debugging-stored-procedures-cs/_static/image13.png)](debugging-stored-procedures-cs/_static/image12.png)</span></span>

<span data-ttu-id="e2b3d-207">**Figura 6**: Il `ExistingSprocs.aspx` pagina Visualizza inizialmente le bibite ([fare clic per visualizzare l'immagine con dimensioni normali](debugging-stored-procedures-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="e2b3d-207">**Figure 6**: The `ExistingSprocs.aspx` Page Initially Displays the Beverages ([Click to view full-size image](debugging-stored-procedures-cs/_static/image14.png))</span></span>


<span data-ttu-id="e2b3d-208">[![La Stored Procedure s è stato raggiunto punto di interruzione](debugging-stored-procedures-cs/_static/image16.png)](debugging-stored-procedures-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-208">[![The Stored Procedure s Breakpoint has been Reached](debugging-stored-procedures-cs/_static/image16.png)](debugging-stored-procedures-cs/_static/image15.png)</span></span>

<span data-ttu-id="e2b3d-209">**Figura 7**: Gli oggetti Stored Procedure viene raggiunto punto di interruzione ([fare clic per visualizzare l'immagine con dimensioni normali](debugging-stored-procedures-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="e2b3d-209">**Figure 7**: The Stored Procedure s Breakpoint has been Reached ([Click to view full-size image](debugging-stored-procedures-cs/_static/image17.png))</span></span>


<span data-ttu-id="e2b3d-210">Come illustrato nella figura 7, il valore di finestra Espressioni di controllo di `@CategoryID` parametro è 1.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-210">As the Watch window in Figure 7 shows, the value of the `@CategoryID` parameter is 1.</span></span> <span data-ttu-id="e2b3d-211">Infatti, il `ExistingSprocs.aspx` pagina Visualizza inizialmente i prodotti della categoria beverages, che ha un `CategoryID` valore pari a 1.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-211">This is because the `ExistingSprocs.aspx` page initially displays products in the beverages category, which has a `CategoryID` value of 1.</span></span> <span data-ttu-id="e2b3d-212">Scegliere una categoria diversa nell'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-212">Choose a different category from the drop-down list.</span></span> <span data-ttu-id="e2b3d-213">Questa operazione causa un postback ed esegue nuovamente il `Products_SelectByCategoryID` stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-213">Doing so causes a postback and re-executes the `Products_SelectByCategoryID` stored procedure.</span></span> <span data-ttu-id="e2b3d-214">Il punto di interruzione viene raggiunto, ma questa volta il `@CategoryID` valore del parametro s riflette l'elemento di elenco selezionato di elenco a discesa s `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-214">The breakpoint is hit again, but this time the `@CategoryID` parameter s value reflects the selected drop-down list item s `CategoryID`.</span></span>


<span data-ttu-id="e2b3d-215">[![Scegliere una categoria diversa nell'elenco a discesa](debugging-stored-procedures-cs/_static/image19.png)](debugging-stored-procedures-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-215">[![Choose a Different Category from the Drop-Down List](debugging-stored-procedures-cs/_static/image19.png)](debugging-stored-procedures-cs/_static/image18.png)</span></span>

<span data-ttu-id="e2b3d-216">**Figura 8**: Scegliere una categoria diversa dall'elenco a discesa elenco ([fare clic per visualizzare l'immagine con dimensioni normali](debugging-stored-procedures-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="e2b3d-216">**Figure 8**: Choose a Different Category from the Drop-Down List ([Click to view full-size image](debugging-stored-procedures-cs/_static/image20.png))</span></span>


<span data-ttu-id="e2b3d-217">[![Il @CategoryID parametro riflette la categoria selezionata dalla pagina Web](debugging-stored-procedures-cs/_static/image22.png)](debugging-stored-procedures-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-217">[![The @CategoryID Parameter Reflects the Category Selected from the Web Page](debugging-stored-procedures-cs/_static/image22.png)](debugging-stored-procedures-cs/_static/image21.png)</span></span>

<span data-ttu-id="e2b3d-218">**Figura 9**: Il `@CategoryID` parametro riflette la categoria selezionata dalla pagina Web ([fare clic per visualizzare l'immagine con dimensioni normali](debugging-stored-procedures-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="e2b3d-218">**Figure 9**: The `@CategoryID` Parameter Reflects the Category Selected from the Web Page ([Click to view full-size image](debugging-stored-procedures-cs/_static/image23.png))</span></span>


> [!NOTE]
> <span data-ttu-id="e2b3d-219">Se il punto di interruzione nel `Products_SelectByCategoryID` stored procedure non viene raggiunto durante la visita di `ExistingSprocs.aspx` pagina, assicurarsi che la casella di controllo di SQL Server è stata selezionata nella sezione dell'applicazione ASP.NET s pagina delle proprietà del debugger, che è stato pool di connessioni disabilitato o che il database s opzione di debug dell'applicazione è abilitato.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-219">If the breakpoint in the `Products_SelectByCategoryID` stored procedure is not hit when visiting the `ExistingSprocs.aspx` page, make sure that the SQL Server checkbox has been checked in the Debuggers section of the ASP.NET application s Properties Page, that connection pooling has been disabled, and that the database s Application Debugging option is enabled.</span></span> <span data-ttu-id="e2b3d-220">Se viene nuovamente ancora problemi, riavviare Visual Studio e riprovare.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-220">If you re still having problems, restart Visual Studio and try again.</span></span>


## <a name="debugging-t-sql-database-objects-on-remote-instances"></a><span data-ttu-id="e2b3d-221">Debug di oggetti di Database T-SQL su istanze Remote</span><span class="sxs-lookup"><span data-stu-id="e2b3d-221">Debugging T-SQL Database Objects on Remote Instances</span></span>

<span data-ttu-id="e2b3d-222">Debug di oggetti di database tramite Visual Studio è piuttosto semplice, quando l'istanza di database di SQL Server è nello stesso computer di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-222">Debugging database objects through Visual Studio is fairly straightforward when the SQL Server database instance is on the same machine as Visual Studio.</span></span> <span data-ttu-id="e2b3d-223">Tuttavia, se SQL Server e Visual Studio si trovano in computer diversi quindi alcune operazioni di configurazione attenta deve assicurarsi che tutto funzioni correttamente.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-223">However, if SQL Server and Visual Studio reside on different machines then some careful configuration is required to get everything working properly.</span></span> <span data-ttu-id="e2b3d-224">Esistono due attività principali che vengono affrontate con:</span><span class="sxs-lookup"><span data-stu-id="e2b3d-224">There are two core tasks we are faced with:</span></span>

- <span data-ttu-id="e2b3d-225">Assicurarsi che l'account di accesso utilizzato per la connessione al database tramite ADO.NET appartenga al `sysadmin` ruolo.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-225">Ensure that the login used to connect to the database via ADO.NET belongs to the `sysadmin` role.</span></span>
- <span data-ttu-id="e2b3d-226">Assicurarsi che l'account utente Windows usato da Visual Studio nel computer di sviluppo sia un account di accesso valido di SQL Server a cui appartiene il `sysadmin` ruolo.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-226">Ensure that the Windows user account used by Visual Studio on the development machine is a valid SQL Server login account that belongs to the `sysadmin` role.</span></span>

<span data-ttu-id="e2b3d-227">Il primo passaggio è relativamente semplice.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-227">The first step is relatively straightforward.</span></span> <span data-ttu-id="e2b3d-228">Prima di tutto identificare l'account utente usato per connettersi al database dall'applicazione ASP.NET e quindi, aggiungere tale account di accesso di SQL Server Management Studio il `sysadmin` ruolo.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-228">First, identify the user account used to connect to the database from the ASP.NET application and then, from SQL Server Management Studio, add that login account to the `sysadmin` role.</span></span>

<span data-ttu-id="e2b3d-229">La seconda attività richiede che l'account utente Windows usato per eseguire il debug dell'applicazione sia un account di accesso valido nel database remoto.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-229">The second task requires that the Windows user account you use to debug the application be a valid login on the remote database.</span></span> <span data-ttu-id="e2b3d-230">Tuttavia, probabile che l'account di Windows per l'accesso alla workstation con non è un account di accesso valido nel Server SQL.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-230">However, chances are the Windows account you logged on to your workstation with is not a valid login on SQL Server.</span></span> <span data-ttu-id="e2b3d-231">Anziché aggiungere l'account di accesso specifico a SQL Server, una scelta migliore sarebbe quello di designare un account utente di Windows come account di debug di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-231">Rather than adding your particular login account to SQL Server, a better choice would be to designate some Windows user account as the SQL Server debugging account.</span></span> <span data-ttu-id="e2b3d-232">Quindi, per eseguire il debug di oggetti di database di un'istanza remota di SQL Server, eseguire Visual Studio usando le credenziali dell'account s tale account di accesso Windows.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-232">Then, to debug the database objects of a remote SQL Server instance, you would run Visual Studio using that Windows login account s credentials.</span></span>

<span data-ttu-id="e2b3d-233">Ad esempio, dovrebbe chiarire le cose.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-233">An example should help clarify things.</span></span> <span data-ttu-id="e2b3d-234">Si supponga che vi sia un account di Windows denominato `SQLDebug` all'interno del dominio di Windows.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-234">Imagine that there is a Windows account named `SQLDebug` within the Windows domain.</span></span> <span data-ttu-id="e2b3d-235">Questo account dovranno essere aggiunti all'istanza remota di SQL Server come account di accesso valido e come membro del `sysadmin` ruolo.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-235">This account would need to be added to the remote SQL Server instance as a valid login and as a member of the `sysadmin` role.</span></span> <span data-ttu-id="e2b3d-236">Quindi, per eseguire il debug di istanza di SQL Server remoto da Visual Studio, è necessario eseguire Visual Studio come le `SQLDebug` utente.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-236">Then, to debug the remote SQL Server instance from Visual Studio, we would need to run Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="e2b3d-237">Questa operazione potrebbe essere effettuata la disconnessione dal nostro workstation, accedere come `SQLDebug`, e quindi avviare Visual Studio, ma un approccio più semplice, è possibile accedere al nostro workstation usando le proprie credenziali e quindi usare `runas.exe` per avviare Visual Studio come il `SQLDebug` utente.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-237">This could be done by logging out of our workstation, logging back in as `SQLDebug`, and then launching Visual Studio, but a simpler approach would be to login to our workstation using our own credentials and then use `runas.exe` to launch Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="e2b3d-238">`runas.exe` consente a una determinata applicazione deve essere eseguito sotto forma di un account utente diverso.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-238">`runas.exe` allows a particular application to be executed under the guise of a different user account.</span></span> <span data-ttu-id="e2b3d-239">Per avviare Visual Studio come `SQLDebug`, è possibile immettere l'istruzione seguente nella riga di comando:</span><span class="sxs-lookup"><span data-stu-id="e2b3d-239">To launch Visual Studio as `SQLDebug`, you could enter the following statement at the command line:</span></span>


[!code-console[Main](debugging-stored-procedures-cs/samples/sample2.cmd)]

<span data-ttu-id="e2b3d-240">Per una spiegazione più dettagliata su questo processo, vedere [Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker ' s Guide to Visual Studio e SQL Server, settima edizione* nonché [How To: Impostare autorizzazioni di SQL Server per il debug](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="e2b3d-240">For a more detailed explanation on this process, see [William R. Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker s Guide to Visual Studio and SQL Server, Seventh Edition* as well as [How To: Set SQL Server Permissions for Debugging](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="e2b3d-241">Se il computer di sviluppo è in esecuzione Windows XP Service Pack 2 è necessario configurare il Firewall connessione Internet per consentire il debug remoto.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-241">If your development machine is running Windows XP Service Pack 2 you will need to configure the Internet Connection Firewall to allow remote debugging.</span></span> <span data-ttu-id="e2b3d-242">[La procedura: Abilitare il debug di SQL Server 2005](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) articolo mette in rilievo che questa operazione comporta due passaggi: (a) nel computer host Visual Studio, è necessario aggiungere `Devenv.exe` per l'elenco delle eccezioni e aprire la porta TCP 135; e (b) nel computer remoto (SQL), è necessario aprire il TCP 135 la porta e aggiungere `sqlservr.exe` all'elenco delle eccezioni.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-242">[The How To: Enable SQL Server 2005 Debugging](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) article notes that this involves two steps: (a) On the Visual Studio host machine, you must add `Devenv.exe` to the Exceptions list and open the TCP 135 port; and (b) On the remote (SQL) machine, you must open the TCP 135 port and add `sqlservr.exe` to the Exceptions list.</span></span> <span data-ttu-id="e2b3d-243">Se i criteri del dominio richiedono la comunicazione di rete vengano eseguite tramite IPSec, è necessario aprire le porte UDP 4500 e UDP 500.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-243">If your domain policy requires network communication to be done through IPSec, you must open the UDP 4500 and UDP 500 ports.</span></span>


## <a name="summary"></a><span data-ttu-id="e2b3d-244">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="e2b3d-244">Summary</span></span>

<span data-ttu-id="e2b3d-245">Oltre a fornire il supporto del debug per il codice dell'applicazione .NET, Visual Studio offre anche un'ampia gamma di opzioni di debug per SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-245">In addition to providing debugging support for .NET application code, Visual Studio also provides a variety of debugging options for SQL Server 2005.</span></span> <span data-ttu-id="e2b3d-246">In questa esercitazione abbiamo esaminato due di queste opzioni: Debug diretto di Database e il debug dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-246">In this tutorial we looked at two of those options: Direct Database Debugging and application debugging.</span></span> <span data-ttu-id="e2b3d-247">Per eseguire direttamente il debug di un oggetto di database T-SQL, individuare l'oggetto tramite Esplora Server, quindi fare clic su di esso e scegliere Esegui istruzione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-247">To directly debug a T-SQL database object, locate the object through the Server Explorer then right-click on it and choose Step Into.</span></span> <span data-ttu-id="e2b3d-248">Verrà avviato il debugger e il processo si interromperà la prima istruzione nell'oggetto di database, a questo punto è possibile esaminare le istruzioni s oggetto e la visualizzazione e modificare i valori dei parametri.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-248">This starts the debugger and halts on the first statement in the database object, at which point you can step through the object s statements and view and modify parameter values.</span></span> <span data-ttu-id="e2b3d-249">Nel passaggio 1 viene usato questo approccio per eseguire l'istruzione di `Products_SelectByCategoryID` stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-249">In Step 1 we used this approach to step into the `Products_SelectByCategoryID` stored procedure.</span></span>

<span data-ttu-id="e2b3d-250">Debug dell'applicazione consente di punto di interruzione direttamente all'interno di oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-250">Application debugging allows breakpoints to be set directly within the database objects.</span></span> <span data-ttu-id="e2b3d-251">Quando un oggetto di database con i punti di interruzione viene richiamato da un'applicazione client (ad esempio, un'applicazione web ASP.NET), il programma si interrompe quando subentra il debugger.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-251">When a database object with breakpoints is invoked from a client application (such as an ASP.NET web application), the program halts as the debugger takes over.</span></span> <span data-ttu-id="e2b3d-252">Debug dell'applicazione è utile perché illustra in modo più chiaro quale azione di applicazione fa sì che un oggetto di database specifico da richiamare.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-252">Application debugging is useful because it more clearly shows what application action causes a particular database object to be invoked.</span></span> <span data-ttu-id="e2b3d-253">Tuttavia, è necessario un po' più configurazione e installazione di debug diretto di Database.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-253">However, it requires a bit more configuration and setup than Direct Database Debugging.</span></span>

<span data-ttu-id="e2b3d-254">Gli oggetti di database possono anche eseguire il debug tramite progetti di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-254">Database objects can also be debugged through SQL Server Projects.</span></span> <span data-ttu-id="e2b3d-255">Verrà esaminato tramite progetti di SQL Server e come usarli per creare ed eseguire il debug di oggetti di database gestiti nella prossima esercitazione.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-255">We will look at using SQL Server Projects and how to use them to create and debug managed database objects in the next tutorial.</span></span>

<span data-ttu-id="e2b3d-256">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="e2b3d-256">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="e2b3d-257">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="e2b3d-257">About the Author</span></span>

<span data-ttu-id="e2b3d-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di sette libri e fondatore di [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha collaborato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="e2b3d-259">Lavora come un consulente, formatore e autore.</span><span class="sxs-lookup"><span data-stu-id="e2b3d-259">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="e2b3d-260">Il suo ultimo libro si intitola [ *Sams Teach Yourself ASP.NET 2.0 in 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="e2b3d-260">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="e2b3d-261">È possibile contattarlo al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-261">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="e2b3d-262">o sul suo blog, che è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="e2b3d-262">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e2b3d-263">[Precedente](protecting-connection-strings-and-other-configuration-information-cs.md)
> [Successivo](creating-stored-procedures-and-user-defined-functions-with-managed-code-cs.md)</span><span class="sxs-lookup"><span data-stu-id="e2b3d-263">[Previous](protecting-connection-strings-and-other-configuration-information-cs.md)
[Next](creating-stored-procedures-and-user-defined-functions-with-managed-code-cs.md)</span></span>
