---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: Configurazione delle proprietà di distribuzione per un ambiente di destinazione | Microsoft Docs
author: jrjlee
description: In questo argomento viene descritto come configurare le proprietà specifiche dell'ambiente per distribuire la soluzione Contact Manager di esempio in un ambiente di destinazione specifico...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 9742be7d718384c1b108d5f2c0c43e8e8d4fe8a9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78636444"
---
# <a name="configuring-deployment-properties-for-a-target-environment"></a>Configurazione delle proprietà di distribuzione per un ambiente di destinazione

di [Jason Lee](https://github.com/jrjlee)

[Scaricare PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> In questo argomento viene descritto come configurare le proprietà specifiche dell'ambiente in modo da distribuire la soluzione Contact Manager di esempio in un ambiente di destinazione specifico.

Questo argomento fa parte di una serie di esercitazioni basate sui requisiti di distribuzione aziendali di una società fittizia denominata Fabrikam, Inc. Questa serie di esercitazioni usa una&#x2014;soluzione di esempio la&#x2014;soluzione [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) per rappresentare un'applicazione Web con un livello di complessità realistico, tra cui un'applicazione ASP.NET MVC 3, un servizio Windows Communication Foundation (WCF) e un progetto di database.

Il metodo di distribuzione al centro di queste esercitazioni si basa sull'approccio Split Project file descritto in [informazioni sul processo di compilazione](../web-deployment-in-the-enterprise/understanding-the-build-process.md), in cui il processo di compilazione è controllato da due&#x2014;file di progetto, uno contenente le istruzioni di compilazione che si applicano a ogni ambiente di destinazione e uno contenente le impostazioni di compilazione e distribuzione specifiche dell'ambiente. In fase di compilazione, il file di progetto specifico dell'ambiente viene unito al file di progetto indipendente dall'ambiente per formare un set completo di istruzioni di compilazione.

## <a name="process-overview"></a>Panoramica del processo

Il file di progetto che verrà utilizzato per compilare e distribuire la soluzione Contact Manager è suddiviso in due file fisici:

- Una contenente le istruzioni e le impostazioni di compilazione universale (il file *Publish. proj* ).
- Una contenente le impostazioni di compilazione specifiche dell'ambiente (*env-dev. proj*, *ENV-stage. proj*e così via).

In fase di compilazione, il file di progetto specifico dell'ambiente appropriato viene unito al file di *pubblicazione universale. proj* per formare un set completo di istruzioni di compilazione. Per configurare la distribuzione in ambienti di destinazione specifici, è possibile creare o personalizzare i file di progetto specifici dell'ambiente con impostazioni che descrivono uno scenario di distribuzione personalizzato.

Molti di questi valori sono determinati dal modo in cui l'ambiente di&#x2014;destinazione è configurato in particolare, indipendentemente dal fatto che il server Web di destinazione sia configurato per l'utilizzo del servizio Deployment Agent Web (agente remoto) o del gestore di distribuzione Web. Per ulteriori informazioni su questi approcci e per indicazioni sulla scelta dell'approccio più appropriato per il proprio ambiente, vedere [scelta dell'approccio più adatto alla distribuzione Web](choosing-the-right-approach-to-web-deployment.md).

Lo [scenario Contact Manager](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) richiede due file di progetto specifici dell'ambiente:

- Distribuzione in un ambiente di test per sviluppatori (*env-dev. proj*). L'ambiente di test per sviluppatori è configurato in modo da accettare le distribuzioni remote usando l'agente remoto, come descritto in [scenario: configurazione di un ambiente di test per la distribuzione Web](scenario-configuring-a-test-environment-for-web-deployment.md). Questo file deve fornire l'indirizzo dell'endpoint dell'agente remoto, nonché impostazioni specifiche della posizione, come le stringhe di connessione e gli endpoint di servizio.
- Distribuzione in un ambiente di gestione temporanea (*ENV-stage. proj*). L'ambiente di gestione temporanea è configurato in modo da accettare le distribuzioni remote utilizzando il gestore Distribuzione Web, come descritto in [scenario: configurazione di un ambiente di gestione temporanea per la distribuzione Web](scenario-configuring-a-staging-environment-for-web-deployment.md). Questo file deve fornire l'indirizzo dell'endpoint del gestore Distribuzione Web, nonché le impostazioni specifiche della posizione, come le stringhe di connessione e gli endpoint di servizio.

È importante notare che le impostazioni configurate nel file di progetto specifico dell'ambiente non influiscono sul contenuto del pacchetto Web stesso&#x2014;, controllano la modalità di distribuzione del pacchetto e i valori dei parametri forniti durante l'estrazione del pacchetto. Si sta importando manualmente il pacchetto Web nell'ambiente di produzione, come descritto in [scenario: configurazione di un ambiente di produzione per la distribuzione Web](scenario-configuring-a-production-environment-for-web-deployment.md) e [installazione manuale di pacchetti Web](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), in modo da non importare le impostazioni utilizzate nel file di progetto specifico dell'ambiente quando è stato generato il pacchetto. Per la gestione di Internet Information Services (IIS), durante l'importazione del pacchetto verrà richiesto di qualsiasi valore con parametri, ad esempio le stringhe di connessione e gli endpoint di servizio.

Per distribuire la soluzione Contact Manager nel proprio ambiente di destinazione, è possibile personalizzare il file o usarlo come modello e creare un file personalizzato.

**Per configurare le impostazioni di distribuzione specifiche dell'ambiente per la soluzione Contact Manager**

1. Aprire la soluzione ContactManager-WCF in Visual Studio 2010.
2. Nella finestra di **Esplora soluzioni** espandere la cartella **Publish** , espandere la cartella **EnvConfig** , quindi fare doppio clic su **env-dev. proj**.

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. Sostituire i valori delle proprietà nel file *env-dev. proj* con i valori corretti per il proprio ambiente di test.

    > [!NOTE]
    > Nella tabella che segue questa procedura vengono fornite ulteriori informazioni su ognuna di queste proprietà.
4. Salvare il lavoro e quindi chiudere il file *env-dev. proj* .

## <a name="choosing-the-right-deployment-properties"></a>Scelta delle proprietà di distribuzione corrette

Questa tabella descrive lo scopo di ogni proprietà nel file di progetto specifico dell'ambiente di esempio, *env-dev. proj*, e fornisce alcune indicazioni sui valori che è necessario fornire.

|                                                        Nome proprietà                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Dettagli                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <strong>MSDeployComputerName</strong> Nome dell'endpoint del servizio o del server Web di destinazione.               |                                                                                                                                                                                                                                              Se si esegue la distribuzione nel servizio agente remoto nel server Web di destinazione, è possibile specificare il nome del computer di destinazione, ad esempio <strong>TESTWEB1</strong> o <strong>TESTWEB1.fabrikam.NET</strong>, oppure è possibile specificare l'endpoint dell'agente remoto, ad esempio `http://TESTWEB1/MSDEPLOYAGENTSERVICE`. La distribuzione funziona allo stesso modo in ogni caso. Se si esegue la distribuzione nel gestore Distribuzione Web nel server Web di destinazione, è necessario specificare l'endpoint del servizio e includere il nome del sito Web IIS come parametro della stringa di query, ad esempio `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`.                                                                                                                                                                                                                                              |
|         <strong>MSDeployAuth</strong> Metodo che Distribuzione Web deve usare per eseguire l'autenticazione nel computer remoto.          |                                                                                                                                                                                                                          Questo deve essere impostato su <strong>NTLM</strong> o <strong>Basic</strong>. In genere, si userà <strong>NTLM</strong> se si esegue la distribuzione nel servizio agente remoto e di <strong>base</strong> se si esegue la distribuzione nel gestore distribuzione Web. Se si utilizza l'autenticazione di base, è necessario specificare anche il nome utente e la password che lo strumento di distribuzione Web IIS (Distribuzione Web) deve rappresentare per poter eseguire la distribuzione. In questo esempio, questi valori vengono forniti tramite le proprietà <strong>MSDeployUsername</strong> e <strong>MSDeployPassword</strong> . Se si usa l'autenticazione NTLM, è possibile omettere queste proprietà o lasciarle vuote.                                                                                                                                                                                                                          |
| <strong>MSDeployUsername</strong> Se si utilizza l'autenticazione di base, Distribuzione Web utilizzerà questo account nel computer remoto.  |                                                                                                                                                                                                                                                                                                                                                                                                                       Questa operazione dovrebbe assumere il formato <em>DOMAIN</em>\*username * (ad esempio, <strong>FABRIKAM\matt</strong>). Questo valore viene utilizzato solo se si specifica l'autenticazione di base. Se si usa l'autenticazione NTLM, è possibile omettere la proprietà. Se viene specificato un valore, questo verrà ignorato.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <strong>MSDeployPassword</strong> Se si utilizza l'autenticazione di base, Distribuzione Web utilizzerà questa password nel computer remoto. |                                                                                                                                                                                                                                                                                                                                                                                                                    Si tratta della password per l'account utente specificato nella proprietà <strong>MSDeployUsername</strong> . Questo valore viene utilizzato solo se si specifica l'autenticazione di base. Se si usa l'autenticazione NTLM, è possibile omettere la proprietà. Se viene specificato un valore, questo verrà ignorato.                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <strong>ContactManagerIisPath</strong> Percorso di IIS in cui si desidera distribuire l'applicazione MVC di Contact Manager.     |                                                                                                                                                                                                                                                                                                                                                                        Deve corrispondere al percorso visualizzato in Gestione IIS, nel formato [<em>nome sito Web IIS</em>]/[<em>nome applicazione</em><em>Web</em>]. Tenere presente che il sito Web IIS deve esistere prima di distribuire l'applicazione. Se, ad esempio, è stato creato un sito Web IIS denominato DemoSite, è possibile specificare il percorso IIS per l'applicazione MVC come DemoSite/ContactManager.                                                                                                                                                                                                                                                                                                                                                                        |
|   <strong>ContactManagerServiceIisPath</strong> Percorso IIS in cui si desidera distribuire il servizio WCF Contact Manager.    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Se, ad esempio, è stato creato un sito Web IIS denominato DemoSite, è possibile specificare il percorso IIS per il servizio WCF come <strong>DemoSite/ContactManagerService</strong>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <strong>ContactManagerTargetUrl</strong> URL a cui è possibile raggiungere il servizio WCF.                   |                                                                                                                                                     Il formato verrà [<em>URL radice sito Web IIS</em>]/[<em>nome applicazione servizio</em>]/[<em>endpoint servizio</em>]. Se, ad esempio, è stato creato un sito Web IIS sulla porta 85, l'URL avrà il formato `http://localhost:85/ContactManagerService/ContactService.svc`. Tenere presente che l'applicazione MVC e il servizio WCF vengono distribuiti nello stesso server. Di conseguenza, questo URL viene eseguito solo dal computer in cui è installato. Per questo motivo, è preferibile utilizzare localhost o l'indirizzo IP, anziché il nome del computer o un'intestazione host, nell'URL. Se si usa il nome del computer o un'intestazione host, la funzionalità di sicurezza del [controllo di loopback](https://go.microsoft.com/?linkid=9805131) in IIS può bloccare l'URL e restituire un errore <strong>http 401,1-non autorizzato</strong> .                                                                                                                                                     |
|                  <strong>CmDatabaseConnectionString</strong> Stringa di connessione per il server di database.                  | La stringa di connessione determina le credenziali che VSDBCMD utilizzerà per contattare il server di database e creare il database e le credenziali che il pool di applicazioni del server Web utilizzerà per contattare il server di database e interagire con il database. Sono essenzialmente disponibili due opzioni. È possibile specificare <strong>Integrated Security = true</strong>. in questo caso, viene utilizzata l'autenticazione integrata di Windows: <strong>Data Source = TESTDB1; Integrated Security = true</strong> in questo caso, il database verrà creato utilizzando le credenziali dell'utente che esegue il file eseguibile VSDBCMD e l'applicazione accederà al database utilizzando l'identità dell'account del computer server Web. In alternativa, è possibile specificare il nome utente e la password di un account SQL Server. In questo caso, le credenziali SQL Server vengono utilizzate da VSDBCMD per creare il database e dal pool di applicazioni per interagire con il database: <strong>origine dati = TESTDB1; ID utente = ASqlUser; Password = Pa $ $w 0RD</strong> le procedure dettagliate riportate in questo argomento presuppongono l'uso dell'autenticazione integrata di Windows. |
|        <strong>CmTargetDatabase</strong> Nome che si desidera assegnare al database che verrà creato nel server di database.        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     Il valore fornito qui viene aggiunto al comando VSDBCMD come parametro. Viene inoltre utilizzato per compilare una stringa di connessione completa che il pool di applicazioni sul server Web può utilizzare per interagire con il database.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

In questi esempi viene illustrato come è possibile configurare queste proprietà per scenari di distribuzione specifici.

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a>Esempio 1&#x2014;distribuzione al servizio agente remoto

In questo esempio:

- Si sta eseguendo la distribuzione al servizio agente remoto in TESTWEB1.
- Si sta indicando Distribuzione Web di utilizzare l'autenticazione NTLM. Distribuzione Web viene eseguito utilizzando le credenziali utilizzate per richiamare il Microsoft Build Engine (MSBuild).
- Si sta usando l'autenticazione integrata per distribuire il database **ContactManager** in TESTDB1. Il database verrà distribuito utilizzando le credenziali utilizzate per richiamare MSBuild.

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]

### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a>Distribuzione dell'&#x2014;esempio 2 all'endpoint del gestore distribuzione Web

In questo esempio:

- Si sta eseguendo la distribuzione all'endpoint di servizio del gestore Distribuzione Web in STAGEWEB1.
- Si sta indicando Distribuzione Web di usare l'autenticazione di base.
- Si sta specificando che Distribuzione Web deve rappresentare l'account FABRIKAM\stagingdeployer nel computer remoto.
- Si sta usando l'autenticazione SQL Server per distribuire il database **ContactManager** in STAGEDB1.

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]

## <a name="conclusion"></a>Conclusione

A questo punto, i file di progetto sono completamente configurati per compilare e distribuire la soluzione Contact Manager in uno o più ambienti di destinazione.

Per usare questi file di progetto come parte di un processo di distribuzione ripetibile in un singolo passaggio, è necessario eseguire il file *Publish. proj* usando MSBuild e passare il percorso del file di progetto specifico dell'ambiente come parametro. Questa operazione può essere eseguita in vari modi:

- Per una panoramica di MSBuild e un'introduzione ai file di progetto personalizzati, vedere [informazioni sul file di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md).
- Per informazioni su come formulare un comando MSBuild che esegue i file di progetto personalizzati, vedere [distribuzione di pacchetti Web](../web-deployment-in-the-enterprise/deploying-web-packages.md).
- Per informazioni su come incorporare i comandi MSBuild in un file di comando per distribuzioni in un unico passaggio ripetibili, vedere [creazione ed esecuzione di un file di comando di distribuzione](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).
- Per informazioni su come eseguire i file di progetto personalizzati da Team Build, vedere [creazione di una definizione di compilazione che supporta la distribuzione](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).

> [!div class="step-by-step"]
> [Precedente](creating-a-server-farm-with-the-web-farm-framework.md)
