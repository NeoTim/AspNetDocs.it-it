---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-permissions-for-team-build-deployment
title: Configurazione delle autorizzazioni per la distribuzione di Team Build | Microsoft Docs
author: jrjlee
description: In questo argomento viene descritto come configurare le autorizzazioni per consentire al server di compilazione di distribuire il contenuto ai server Web e ai server di database come parte di un...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 2488a91e-b0a8-465a-b874-3233f724b56b
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-permissions-for-team-build-deployment
msc.type: authoredcontent
ms.openlocfilehash: 5699f72af6b8d7f18d1a2c631dfdedd63c66e1e6
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78638425"
---
# <a name="configuring-permissions-for-team-build-deployment"></a><span data-ttu-id="5e946-103">Configurazione delle autorizzazioni per la distribuzione di Team Build</span><span class="sxs-lookup"><span data-stu-id="5e946-103">Configuring Permissions for Team Build Deployment</span></span>

<span data-ttu-id="5e946-104">di [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="5e946-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="5e946-105">Scaricare PDF</span><span class="sxs-lookup"><span data-stu-id="5e946-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="5e946-106">In questo argomento viene descritto come configurare le autorizzazioni per consentire al server di compilazione di distribuire il contenuto ai server Web e ai server di database come parte di un processo di compilazione automatizzato.</span><span class="sxs-lookup"><span data-stu-id="5e946-106">This topic describes how to configure permissions to enable your build server to deploy content to web servers and database servers as part of an automated build process.</span></span>

<span data-ttu-id="5e946-107">Questo argomento fa parte di una serie di esercitazioni basate sui requisiti di distribuzione aziendali di una società fittizia denominata Fabrikam, Inc. Questa serie di esercitazioni usa una&#x2014;soluzione di esempio la&#x2014; [soluzione Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)per rappresentare un'applicazione Web con un livello di complessità realistico, tra cui un'applicazione ASP.NET MVC 3, un servizio Windows Communication Foundation (WCF) e un progetto di database.</span><span class="sxs-lookup"><span data-stu-id="5e946-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="5e946-108">Il metodo di distribuzione al centro di queste esercitazioni si basa sull'approccio Split Project file descritto in [informazioni sul file di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in cui il processo di compilazione è controllato da due&#x2014;file di progetto, uno contenente istruzioni di compilazione che si applicano a ogni ambiente di destinazione e uno contenente le impostazioni di compilazione e distribuzione specifiche dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="5e946-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="5e946-109">In fase di compilazione, il file di progetto specifico dell'ambiente viene unito al file di progetto indipendente dall'ambiente per formare un set completo di istruzioni di compilazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="5e946-110">Panoramica delle attività</span><span class="sxs-lookup"><span data-stu-id="5e946-110">Task Overview</span></span>

<span data-ttu-id="5e946-111">Quando si installa il servizio di compilazione Team Foundation Server (TFS) 2010, è necessario specificare l'identità con cui si desidera che il servizio venga eseguito.</span><span class="sxs-lookup"><span data-stu-id="5e946-111">When you install the Team Foundation Server (TFS) 2010 build service, you specify the identity with which you want the service to run.</span></span> <span data-ttu-id="5e946-112">Per impostazione predefinita, questo è l'account servizio di rete.</span><span class="sxs-lookup"><span data-stu-id="5e946-112">By default, this is the Network Service account.</span></span> <span data-ttu-id="5e946-113">In alternativa, è possibile configurare il servizio di compilazione per l'esecuzione utilizzando un account di dominio.</span><span class="sxs-lookup"><span data-stu-id="5e946-113">Alternatively, you can configure the build service to run using a domain account.</span></span>

<span data-ttu-id="5e946-114">Tutte le attività di distribuzione che richiedono l'autenticazione di Windows e che si intende automatizzare usando Team Build vengono eseguite con l'identità del servizio di compilazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-114">Any deployment tasks that require Windows authentication, and that you plan to automate using Team Build, will run using the build service identity.</span></span> <span data-ttu-id="5e946-115">Di conseguenza, è necessario concedere all'identità del servizio di compilazione le autorizzazioni necessarie per i server Web e i server di database.</span><span class="sxs-lookup"><span data-stu-id="5e946-115">As such, you'll need to grant the build service identity any required permissions on your web servers and your database servers.</span></span>

> [!NOTE]
> <span data-ttu-id="5e946-116">L'account servizio di rete utilizza l'account del computer per l'autenticazione con altri computer.</span><span class="sxs-lookup"><span data-stu-id="5e946-116">The Network Service account uses the machine account to authenticate to other computers.</span></span> <span data-ttu-id="5e946-117">Gli account computer hanno il formato \* [nome dominio]\[nome computer] \* **$** &#x2014;ad esempio, **FABRIKAM\TFSBUILD $** .</span><span class="sxs-lookup"><span data-stu-id="5e946-117">Machine accounts take the form \*[domain name]\[machine name]\***$**&#x2014;for example, **FABRIKAM\TFSBUILD$**.</span></span> <span data-ttu-id="5e946-118">Di conseguenza, se il servizio di compilazione viene eseguito utilizzando l'identità del servizio di rete, è necessario concedere le autorizzazioni necessarie all'identità dell'account del computer per il server di compilazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-118">As such, if your build service runs using the Network Service identity, you should grant any required permissions to the machine account identity for your build server.</span></span>

## <a name="configuring-web-server-permissions"></a><span data-ttu-id="5e946-119">Configurazione delle autorizzazioni del server Web</span><span class="sxs-lookup"><span data-stu-id="5e946-119">Configuring Web Server Permissions</span></span>

<span data-ttu-id="5e946-120">Come descritto in [scelta dell'approccio corretto per la distribuzione Web](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md), è possibile usare due approcci principali se si desidera distribuire pacchetti Web in un server Web remoto:</span><span class="sxs-lookup"><span data-stu-id="5e946-120">As described in [Choosing the Right Approach to Web Deployment](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md), there are two main approaches you can use if you want to deploy web packages to a remote web server:</span></span>

- <span data-ttu-id="5e946-121">Distribuire l'applicazione da una posizione remota impostando come destinazione il *servizio Web Deployment Agent* (noto anche come agente remoto) nel server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-121">Deploy the application from a remote location by targeting the *Web Deployment Agent Service* (also known as the remote agent) on the destination server.</span></span>
- <span data-ttu-id="5e946-122">Distribuire l'applicazione da una posizione remota impostando come destinazione il gestore di Distribuzione Web *Internet Information Services* (*IIS)* nel server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-122">Deploy the application from a remote location by targeting the *Internet Information Services* (*IIS) Web Deploy Handler* on the destination server.</span></span>

<span data-ttu-id="5e946-123">In questo caso l'agente remoto presenta due limitazioni principali:</span><span class="sxs-lookup"><span data-stu-id="5e946-123">The remote agent has two key limitations in this case:</span></span>

- <span data-ttu-id="5e946-124">L'agente remoto supporta solo l'autenticazione NTLM.</span><span class="sxs-lookup"><span data-stu-id="5e946-124">The remote agent supports only NTLM authentication.</span></span> <span data-ttu-id="5e946-125">In altre parole, la distribuzione deve usare l'identità&#x2014;del servizio di compilazione non è possibile rappresentare un altro account.</span><span class="sxs-lookup"><span data-stu-id="5e946-125">In other words, the deployment must use the build service identity&#x2014;you can't impersonate another account.</span></span>
- <span data-ttu-id="5e946-126">Per utilizzare l'agente remoto, l'account che esegue la distribuzione deve essere un amministratore nel server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-126">To use the remote agent, the account that performs the deployment must be an administrator on the target server.</span></span>

<span data-ttu-id="5e946-127">Insieme, queste due limitazioni rendono l'approccio dell'agente remoto indesiderato per una distribuzione automatizzata di Team Build.</span><span class="sxs-lookup"><span data-stu-id="5e946-127">Together, these two limitations make the remote agent approach undesirable for an automated Team Build deployment.</span></span> <span data-ttu-id="5e946-128">Per utilizzare questo approccio, è necessario rendere l'account del servizio di compilazione un amministratore in qualsiasi server Web di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-128">To use this approach, you'd need to make the build service account an administrator on any target web servers.</span></span>

<span data-ttu-id="5e946-129">Al contrario, l'approccio del gestore Distribuzione Web offre diversi vantaggi:</span><span class="sxs-lookup"><span data-stu-id="5e946-129">In contrast, the Web Deploy Handler approach offers various advantages:</span></span>

- <span data-ttu-id="5e946-130">Il gestore Distribuzione Web supporta l'autenticazione di base su HTTPS, che consente di passare le credenziali di un account alternativo allo strumento di distribuzione Web IIS (Distribuzione Web).</span><span class="sxs-lookup"><span data-stu-id="5e946-130">The Web Deploy Handler supports basic authentication over HTTPS, which allows you to pass the credentials of an alternative account to the IIS Web Deployment Tool (Web Deploy).</span></span>
- <span data-ttu-id="5e946-131">È possibile configurare i server Web di destinazione in modo da consentire agli utenti non amministratori di distribuire contenuto a specifici siti Web IIS utilizzando il gestore Distribuzione Web.</span><span class="sxs-lookup"><span data-stu-id="5e946-131">You can configure target web servers to allow non-administrator users to deploy content to specific IIS websites using the Web Deploy Handler.</span></span>

<span data-ttu-id="5e946-132">Di conseguenza, è preferibile definire come destinazione il gestore di Distribuzione Web quando si automatizza la distribuzione del pacchetto Web da Team Build.</span><span class="sxs-lookup"><span data-stu-id="5e946-132">As a result, it's clearly preferable to target the Web Deploy Handler when you automate web package deployment from Team Build.</span></span> <span data-ttu-id="5e946-133">Questo è il processo consigliato:</span><span class="sxs-lookup"><span data-stu-id="5e946-133">This is the recommended process:</span></span>

1. <span data-ttu-id="5e946-134">Creare un account di dominio con privilegi limitati da usare per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5e946-134">Create a low-privileged domain account to use for the deployment.</span></span>
2. <span data-ttu-id="5e946-135">Configurare il gestore Distribuzione Web e concedere all'account le autorizzazioni necessarie per distribuire il contenuto in un sito Web IIS specifico, come descritto in [configurazione di un server Web per la pubblicazione distribuzione Web (gestore distribuzione Web)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span><span class="sxs-lookup"><span data-stu-id="5e946-135">Configure the Web Deploy Handler and grant the account the required permissions to deploy content to a specific IIS website, as described in [Configuring a Web Server for Web Deploy Publishing (Web Deploy Handler)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span></span>
3. <span data-ttu-id="5e946-136">Richiamare Distribuzione Web e destinare il gestore Distribuzione Web, utilizzando l'autenticazione di base e specificando le credenziali dell'account di dominio creato, per eseguire la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5e946-136">Invoke Web Deploy and target the Web Deploy Handler, using basic authentication and supplying the credentials of the domain account you created, to perform the deployment.</span></span>

<span data-ttu-id="5e946-137">Nella soluzione di esempio [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) è possibile specificare il tipo di autenticazione (di base o NTLM), le credenziali distribuzione Web e l'indirizzo dell'endpoint (agente remoto o gestore distribuzione Web) nel file di progetto specifico dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="5e946-137">In the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution, you specify the authentication type (basic or NTLM), the Web Deploy credentials, and the endpoint address (remote agent or Web Deploy Handler) in the environment-specific project file.</span></span> <span data-ttu-id="5e946-138">Questi valori vengono usati per formulare ed eseguire un comando Distribuzione Web quando viene eseguito il file di progetto.</span><span class="sxs-lookup"><span data-stu-id="5e946-138">These values are used to formulate and run a Web Deploy command when the project file is executed.</span></span> <span data-ttu-id="5e946-139">Per ulteriori informazioni, vedere [distribuzione di pacchetti Web](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="5e946-139">For more information, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>

<span data-ttu-id="5e946-140">Per ulteriori informazioni sulla configurazione del gestore di Distribuzione Web, inclusa la configurazione delle autorizzazioni, vedere [configurazione di un server Web per la pubblicazione distribuzione Web (gestore distribuzione Web)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span><span class="sxs-lookup"><span data-stu-id="5e946-140">For more information on configuring the Web Deploy Handler, including how to configure permissions, see [Configuring a Web Server for Web Deploy Publishing (Web Deploy Handler)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span></span> <span data-ttu-id="5e946-141">Per ulteriori informazioni sulla configurazione dell'agente remoto, vedere [Configuring a Web Server for distribuzione Web Publishing (Remote Agent)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).</span><span class="sxs-lookup"><span data-stu-id="5e946-141">For more information on configuring the remote agent, see [Configuring a Web Server for Web Deploy Publishing (Remote Agent)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).</span></span>

## <a name="configuring-database-server-permissions"></a><span data-ttu-id="5e946-142">Configurazione delle autorizzazioni del server di database</span><span class="sxs-lookup"><span data-stu-id="5e946-142">Configuring Database Server Permissions</span></span>

<span data-ttu-id="5e946-143">Per distribuire un database di in SQL Server, è necessario:</span><span class="sxs-lookup"><span data-stu-id="5e946-143">To deploy a database to SQL Server, you must:</span></span>

- <span data-ttu-id="5e946-144">Creare un account di accesso per l'account di distribuzione nell'istanza di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5e946-144">Create a login for the deploying account on the SQL Server instance.</span></span>
- <span data-ttu-id="5e946-145">Concedere le autorizzazioni di accesso **dbcreator** per l'istanza di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5e946-145">Grant the login **DBCreator** permissions on the SQL Server instance.</span></span>
- <span data-ttu-id="5e946-146">Dopo la distribuzione iniziale, aggiungere l'account di accesso al ruolo di **proprietario del\_** di database nel database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-146">After the initial deployment, add the login to the **db\_owner** role on the target database.</span></span> <span data-ttu-id="5e946-147">Questa operazione è necessaria perché nelle distribuzioni successive si sta modificando un database esistente anziché creare un nuovo database.</span><span class="sxs-lookup"><span data-stu-id="5e946-147">This is required because on subsequent deployments, you're modifying an existing database rather than creating a new database.</span></span>

<span data-ttu-id="5e946-148">È possibile eseguire l'autenticazione a un'istanza di SQL Server usando l'autenticazione NTLM o l'autenticazione SQL Server:</span><span class="sxs-lookup"><span data-stu-id="5e946-148">You can authenticate to a SQL Server instance using either NTLM authentication or SQL Server authentication:</span></span>

- <span data-ttu-id="5e946-149">Se si usa l'autenticazione NTLM, è necessario concedere le autorizzazioni descritte in precedenza all'account del servizio di compilazione.</span><span class="sxs-lookup"><span data-stu-id="5e946-149">If you use NTLM authentication, you need to grant the permissions described above to the build service account.</span></span>
- <span data-ttu-id="5e946-150">Se si usa l'autenticazione di SQL Server, è necessario concedere le autorizzazioni descritte in precedenza all'account SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5e946-150">If you use SQL Server authentication, you need to grant the permissions described above to the SQL Server account.</span></span> <span data-ttu-id="5e946-151">È inoltre necessario includere il nome utente e la password SQL Server nella stringa di connessione utilizzata per distribuire il database.</span><span class="sxs-lookup"><span data-stu-id="5e946-151">You also need to include the SQL Server user name and password in the connection string you use to deploy the database.</span></span>

<span data-ttu-id="5e946-152">Per informazioni dettagliate su come configurare le autorizzazioni per la distribuzione del database, vedere Configurazione di [un server di database per la pubblicazione distribuzione Web](../configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing.md).</span><span class="sxs-lookup"><span data-stu-id="5e946-152">For step-by-step details on how to configure permissions for database deployment, see [Configuring a Database Server for Web Deploy Publishing](../configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="5e946-153">Conclusione</span><span class="sxs-lookup"><span data-stu-id="5e946-153">Conclusion</span></span>

<span data-ttu-id="5e946-154">A questo punto, è necessario comprendere le autorizzazioni necessarie, insieme alle opzioni di autenticazione aperte, quando si automatizzano le distribuzioni di applicazioni Web e database da Team Build.</span><span class="sxs-lookup"><span data-stu-id="5e946-154">At this point, you should understand the permissions required, together with the authentication options open to you, when you automate web application and database deployments from Team Build.</span></span> <span data-ttu-id="5e946-155">È inoltre necessario essere in grado di implementare le autorizzazioni necessarie nei server Web IIS e nei server di database SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5e946-155">You should also be able to implement the necessary permissions on IIS web servers and SQL Server database servers.</span></span>

## <a name="further-reading"></a><span data-ttu-id="5e946-156">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="5e946-156">Further Reading</span></span>

<span data-ttu-id="5e946-157">Per ulteriori informazioni sulla configurazione di ambienti Windows Server per supportare la distribuzione remota, vedere [configurazione degli ambienti server per la distribuzione Web](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="5e946-157">For more information on configuring Windows server environments to support remote deployment, see [Configuring Server Environments for Web Deployment](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="5e946-158">Precedente</span><span class="sxs-lookup"><span data-stu-id="5e946-158">Previous</span></span>](deploying-a-specific-build.md)
