---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: Distribuzione di progetti di Database | Microsoft Docs
author: jrjlee
description: "Nota: In molti scenari di distribuzione aziendale, è necessario la possibilità di pubblicare aggiornamenti incrementali per un database distribuito. L'alternativa consiste nel ricreare..."
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: 43fa197a1d5a3cf521f4d2202754ff0d121cebe3
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57036978"
---
<a name="deploying-database-projects"></a><span data-ttu-id="5d275-104">Distribuzione di progetti di database</span><span class="sxs-lookup"><span data-stu-id="5d275-104">Deploying Database Projects</span></span>
====================
<span data-ttu-id="5d275-105">da [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="5d275-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="5d275-106">Scaricare PDF</span><span class="sxs-lookup"><span data-stu-id="5d275-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="5d275-107">In molti scenari di distribuzione aziendale, è necessario la possibilità di pubblicare aggiornamenti incrementali per un database distribuito.</span><span class="sxs-lookup"><span data-stu-id="5d275-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="5d275-108">L'alternativa consiste nel ricreare il database in ogni distribuzione, il che significa che la perdita di dati del database esistente.</span><span class="sxs-lookup"><span data-stu-id="5d275-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="5d275-109">Quando si lavora con Visual Studio 2010, utilizzando VSDBCMD è l'approccio consigliato per la pubblicazione incrementale di database.</span><span class="sxs-lookup"><span data-stu-id="5d275-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="5d275-110">Tuttavia, la prossima versione di Visual Studio e la Pipeline di pubblicazione sul Web (WPP) include strumenti che supporta direttamente la pubblicazione incrementale.</span><span class="sxs-lookup"><span data-stu-id="5d275-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>


<span data-ttu-id="5d275-111">Se si apre la soluzione di esempio Contact Manager in Visual Studio 2010, si noterà che il progetto di database include una cartella di proprietà che contiene quattro file.</span><span class="sxs-lookup"><span data-stu-id="5d275-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="5d275-112">Insieme al file di progetto (*ContactManager.Database.dbproj* in questo caso), questi file controllano vari aspetti del processo di compilazione e distribuzione:</span><span class="sxs-lookup"><span data-stu-id="5d275-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="5d275-113">Il *database. sqlcmdvars* file fornisce valori per tutte le variabili SQLCMD utilizzare quando si distribuisce il progetto.</span><span class="sxs-lookup"><span data-stu-id="5d275-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="5d275-114">Ogni configurazione di soluzione (ad esempio, debug e rilascio) è possibile specificare un file sqlcmdvars diverso.</span><span class="sxs-lookup"><span data-stu-id="5d275-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="5d275-115">Il *database. sqldeployment* file fornisce le impostazioni specifiche della distribuzione, come se si desidera utilizzare le regole di confronto definite nel progetto o le regole di confronto del server di destinazione, se si desidera ricreare il database di destinazione ogni ora, o semplicemente modificare il database esistente per attivare la modalità fino alla data e così via.</span><span class="sxs-lookup"><span data-stu-id="5d275-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="5d275-116">Ogni configurazione della soluzione può specificare un file. sqldeployment diversi.</span><span class="sxs-lookup"><span data-stu-id="5d275-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="5d275-117">Il *sqlpermissions* file è un documento XML che è possibile usare per definire tutte le autorizzazioni si desidera aggiungere al database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="5d275-118">Tutte le configurazioni di soluzione condividono lo stesso file con estensione sqlpermissions.</span><span class="sxs-lookup"><span data-stu-id="5d275-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="5d275-119">Il *sqlsettings* file specifica le proprietà a livello di database da utilizzare durante la creazione del database, ad esempio le regole di confronto da usare, il comportamento degli operatori di confronto e così via.</span><span class="sxs-lookup"><span data-stu-id="5d275-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="5d275-120">Tutte le configurazioni di soluzione condividono lo stesso file sqldeployment.</span><span class="sxs-lookup"><span data-stu-id="5d275-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="5d275-121">È opportuno per aprire questi file in Visual Studio e acquisire familiarità con il contenuto.</span><span class="sxs-lookup"><span data-stu-id="5d275-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="5d275-122">Quando si compila un progetto di database, il processo di compilazione crea due file:</span><span class="sxs-lookup"><span data-stu-id="5d275-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="5d275-123">Oggetto *dello schema del database* (dbschema).</span><span class="sxs-lookup"><span data-stu-id="5d275-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="5d275-124">Descrive lo schema del database da creare in formato XML.</span><span class="sxs-lookup"><span data-stu-id="5d275-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="5d275-125">Oggetto *manifesto della distribuzione* (file con estensione deploymanifest).</span><span class="sxs-lookup"><span data-stu-id="5d275-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="5d275-126">Che contiene tutte le informazioni necessarie per creare e distribuire il database.</span><span class="sxs-lookup"><span data-stu-id="5d275-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="5d275-127">Riferimenti a file dbschema e altre risorse, ad esempio le istruzioni di distribuzione (il file con estensione sqldeployment) e qualsiasi script di pre-distribuzione o post-distribuzione SQL.</span><span class="sxs-lookup"><span data-stu-id="5d275-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="5d275-128">Ciò viene illustrata la relazione tra queste risorse:</span><span class="sxs-lookup"><span data-stu-id="5d275-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="5d275-129">Come può notare, il file sqldeployment e il file con estensione sqlpermissions sono input al processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="5d275-130">Insieme al file di progetto di database, questi file vengono usati per creare il file di schema di database.</span><span class="sxs-lookup"><span data-stu-id="5d275-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="5d275-131">Il file. sqldeployment e del file sqlcmdvars passano attraverso il processo di compilazione non modificato.</span><span class="sxs-lookup"><span data-stu-id="5d275-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="5d275-132">Il manifesto di distribuzione indica la posizione in cui lo schema del database, il file con estensione sqldeployment, il file sqlcmdvars e qualsiasi script di pre-distribuzione o post-distribuzione SQL.</span><span class="sxs-lookup"><span data-stu-id="5d275-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="5d275-133">Perché usare VSDBCMD per distribuire un progetto di Database?</span><span class="sxs-lookup"><span data-stu-id="5d275-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="5d275-134">Esistono vari approcci diversi per la distribuzione di progetti di database.</span><span class="sxs-lookup"><span data-stu-id="5d275-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="5d275-135">Tuttavia, non tutte sono adatte per la distribuzione di un progetto di database a server remoti in un ambiente aziendale.</span><span class="sxs-lookup"><span data-stu-id="5d275-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="5d275-136">Prendere in considerazione la configurazione desiderata una distribuzione di progetti di database.</span><span class="sxs-lookup"><span data-stu-id="5d275-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="5d275-137">Negli scenari di distribuzione aziendale, è probabile che desidera:</span><span class="sxs-lookup"><span data-stu-id="5d275-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="5d275-138">La possibilità di distribuire il progetto di database da una posizione remota.</span><span class="sxs-lookup"><span data-stu-id="5d275-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="5d275-139">La possibilità di eseguire aggiornamenti incrementali per un database esistente.</span><span class="sxs-lookup"><span data-stu-id="5d275-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="5d275-140">La possibilità di includere script di pre-distribuzione o gli script di post-distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="5d275-141">La possibilità di personalizzare la distribuzione in più ambienti di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="5d275-142">La possibilità di distribuire il progetto di database come parte di una più grande, in genere creato uno script, la distribuzione della soluzione passo a passo.</span><span class="sxs-lookup"><span data-stu-id="5d275-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="5d275-143">Esistono tre approcci principali, che è possibile usare per distribuire un progetto di database:</span><span class="sxs-lookup"><span data-stu-id="5d275-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="5d275-144">È possibile usare la funzionalità di distribuzione con il tipo di progetto di database in Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="5d275-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="5d275-145">Quando si compila e distribuisce un progetto di database in Visual Studio 2010, il processo di distribuzione Usa il manifesto di distribuzione per generare un file di distribuzione basato su SQL specifico per la configurazione della build.</span><span class="sxs-lookup"><span data-stu-id="5d275-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="5d275-146">Il database verrà creato se non esiste o apportare le modifiche necessarie nel database se esiste già.</span><span class="sxs-lookup"><span data-stu-id="5d275-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="5d275-147">È possibile usare SQLCMD.exe per eseguire questo file nel server di destinazione oppure è possibile impostare Visual Studio per creare ed eseguire il file.</span><span class="sxs-lookup"><span data-stu-id="5d275-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="5d275-148">Lo svantaggio di questo approccio è che l'utente sono limitate solo controllare le impostazioni di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="5d275-149">È spesso anche potrebbe essere necessario modificare il file di distribuzione di SQL per fornire i valori delle variabili specifiche dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="5d275-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="5d275-150">È possibile usare solo questo approccio da un computer con Visual Studio 2010 installato, e gli sviluppatori dovranno conoscere e fornire le stringhe di connessione e credenziali per tutti gli ambienti di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="5d275-151">È possibile utilizzare lo strumento di distribuzione di Internet Information Services (IIS) Web (distribuzione Web) per [distribuire un database come parte di un progetto di applicazione web](https://msdn.microsoft.com/library/dd465343.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d275-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/library/dd465343.aspx).</span></span> <span data-ttu-id="5d275-152">Tuttavia, questo approccio è molto più complesso se si desidera distribuire un progetto di database anziché semplicemente eseguire la replica di un database esistente locale in un server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="5d275-153">È possibile configurare distribuzione Web per eseguire lo script di distribuzione SQL che genera il progetto di database, ma a questo scopo, è necessario creare un file di destinazioni WPP personalizzato per il progetto di applicazione web.</span><span class="sxs-lookup"><span data-stu-id="5d275-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="5d275-154">Verrà aggiunta una notevole quantità di complessità del processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="5d275-155">Inoltre, distribuzione Web non supportano direttamente gli aggiornamenti incrementali per i database esistenti.</span><span class="sxs-lookup"><span data-stu-id="5d275-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="5d275-156">Per altre informazioni su questo approccio, vedere [estendendo la Pipeline di pubblicazione sul Web al progetto di database di pacchetto distribuita file SQL](https://go.microsoft.com/?linkid=9805121).</span><span class="sxs-lookup"><span data-stu-id="5d275-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="5d275-157">È possibile utilizzare l'utilità VSDBCMD per distribuire il database, usando lo schema del database o il manifesto di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="5d275-158">È possibile chiamare VSDBCMD.exe da una destinazione di MSBuild, che consente di pubblicare i database come parte di un processo di distribuzione con script e di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="5d275-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="5d275-159">È possibile sostituire le variabili nel file sqlcmdvars e molte altre proprietà di database da un comando VSDBCMD, che consente di personalizzare la distribuzione per diversi ambienti senza creare più configurazioni della build.</span><span class="sxs-lookup"><span data-stu-id="5d275-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="5d275-160">VSDBCMD fornisce funzionalità di differenziazione, ovvero che apporterà solo le modifiche necessarie per l'allineamento di un database di destinazione con lo schema del database.</span><span class="sxs-lookup"><span data-stu-id="5d275-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="5d275-161">VSDBCMD offre anche un'ampia gamma di opzioni della riga di comando, che consentono un controllo accurato sul processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="5d275-162">Questa panoramica, si noterà che l'utilizzo VSDBCMD con MSBuild è l'approccio più adatto per uno scenario di distribuzione aziendale tipica:</span><span class="sxs-lookup"><span data-stu-id="5d275-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="5d275-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="5d275-163">Visual Studio 2010</span></span> | <span data-ttu-id="5d275-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="5d275-164">Web Deploy 2.0</span></span> | <span data-ttu-id="5d275-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="5d275-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="5d275-166">Supporta la distribuzione remota?</span><span class="sxs-lookup"><span data-stu-id="5d275-166">Supports remote deployment?</span></span> | <span data-ttu-id="5d275-167">Sì</span><span class="sxs-lookup"><span data-stu-id="5d275-167">Yes</span></span> | <span data-ttu-id="5d275-168">Yes</span><span class="sxs-lookup"><span data-stu-id="5d275-168">Yes</span></span> | <span data-ttu-id="5d275-169">Yes</span><span class="sxs-lookup"><span data-stu-id="5d275-169">Yes</span></span> |
| <span data-ttu-id="5d275-170">Supporta aggiornamenti incrementali?</span><span class="sxs-lookup"><span data-stu-id="5d275-170">Supports incremental updates?</span></span> | <span data-ttu-id="5d275-171">Sì</span><span class="sxs-lookup"><span data-stu-id="5d275-171">Yes</span></span> | <span data-ttu-id="5d275-172">No</span><span class="sxs-lookup"><span data-stu-id="5d275-172">No</span></span> | <span data-ttu-id="5d275-173">Sì</span><span class="sxs-lookup"><span data-stu-id="5d275-173">Yes</span></span> |
| <span data-ttu-id="5d275-174">Supporta gli script di pre/post-distribuzione?</span><span class="sxs-lookup"><span data-stu-id="5d275-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="5d275-175">Yes</span><span class="sxs-lookup"><span data-stu-id="5d275-175">Yes</span></span> | <span data-ttu-id="5d275-176">Yes</span><span class="sxs-lookup"><span data-stu-id="5d275-176">Yes</span></span> | <span data-ttu-id="5d275-177">Sì</span><span class="sxs-lookup"><span data-stu-id="5d275-177">Yes</span></span> |
| <span data-ttu-id="5d275-178">Supporta la distribuzione di più ambienti?</span><span class="sxs-lookup"><span data-stu-id="5d275-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="5d275-179">Limitato</span><span class="sxs-lookup"><span data-stu-id="5d275-179">Limited</span></span> | <span data-ttu-id="5d275-180">Limitato</span><span class="sxs-lookup"><span data-stu-id="5d275-180">Limited</span></span> | <span data-ttu-id="5d275-181">Sì</span><span class="sxs-lookup"><span data-stu-id="5d275-181">Yes</span></span> |
| <span data-ttu-id="5d275-182">Supporta la distribuzione con script?</span><span class="sxs-lookup"><span data-stu-id="5d275-182">Supports scripted deployment?</span></span> | <span data-ttu-id="5d275-183">Limitato</span><span class="sxs-lookup"><span data-stu-id="5d275-183">Limited</span></span> | <span data-ttu-id="5d275-184">Yes</span><span class="sxs-lookup"><span data-stu-id="5d275-184">Yes</span></span> | <span data-ttu-id="5d275-185">Sì</span><span class="sxs-lookup"><span data-stu-id="5d275-185">Yes</span></span> |

<span data-ttu-id="5d275-186">Il resto di questo argomento viene descritto l'utilizzo di VSDBCMD con MSBuild per distribuire i progetti di database.</span><span class="sxs-lookup"><span data-stu-id="5d275-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="5d275-187">Informazioni sul processo di distribuzione</span><span class="sxs-lookup"><span data-stu-id="5d275-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="5d275-188">L'utilità VSDBCMD ti permette di distribuire un database usando lo schema del database (file dbschema) o il manifesto di distribuzione (il file con estensione deploymanifest).</span><span class="sxs-lookup"><span data-stu-id="5d275-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="5d275-189">In pratica, è quasi sempre userà il manifesto di distribuzione, come il manifesto di distribuzione consente di fornire valori predefiniti per varie proprietà di distribuzione e identificare eventuali script SQL pre-distribuzione o post-distribuzione da eseguire.</span><span class="sxs-lookup"><span data-stu-id="5d275-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="5d275-190">Ad esempio, questo comando VSDBCMD consente di distribuire il **ContactManager** database a un server di database in un ambiente di test:</span><span class="sxs-lookup"><span data-stu-id="5d275-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>


[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]


<span data-ttu-id="5d275-191">In questo caso:</span><span class="sxs-lookup"><span data-stu-id="5d275-191">In this case:</span></span>

- <span data-ttu-id="5d275-192">Il **/a** (o **/Action**) specifica ciò che si desidera VSDBCMD eseguire.</span><span class="sxs-lookup"><span data-stu-id="5d275-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="5d275-193">È possibile impostarlo su **importazione** oppure **Distribuisci**.</span><span class="sxs-lookup"><span data-stu-id="5d275-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="5d275-194">Il **importazione** opzione viene usata per generare un file. dbschema da un database esistente e il **Distribuisci** opzione viene usata per distribuire un file. dbschema in un database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="5d275-195">Il **/manifest** (o **/ManifestFile**) commutatore identifica il file DeployManifest si vuole distribuire.</span><span class="sxs-lookup"><span data-stu-id="5d275-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="5d275-196">Se si vuole usare il file. dbschema invece, si userà il **/modellare** (o **/ModelFile**) passare.</span><span class="sxs-lookup"><span data-stu-id="5d275-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="5d275-197">Il **/cs** (o **/ConnectionString**) commutatore fornisce la stringa di connessione per il server di database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="5d275-198">Si noti che questo non include il nome del database&#x2014;VSDBCMD deve connettersi al server per creare il database. non è necessario per connettersi a un singolo database.</span><span class="sxs-lookup"><span data-stu-id="5d275-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="5d275-199">Se il file con estensione deploymanifest include una stringa di connessione, è possibile omettere questa opzione è attivata.</span><span class="sxs-lookup"><span data-stu-id="5d275-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="5d275-200">Se si usa l'opzione comunque, il valore dell'opzione sostituirà il valore DeployManifest.</span><span class="sxs-lookup"><span data-stu-id="5d275-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="5d275-201">Il <strong>/p: TargetDatabase</strong> proprietà fornisce il nome da assegnare al database di destinazione al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-201">The <strong>/p:TargetDatabase</strong> property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="5d275-202">Questa impostazione sostituisce il valore della <strong>TargetDatabase</strong> nel file con estensione deploymanifest proprietà.</span><span class="sxs-lookup"><span data-stu-id="5d275-202">This overrides the value of the <strong>TargetDatabase</strong> property in the .deploymanifest file.</span></span> <span data-ttu-id="5d275-203">È possibile usare la <strong>/p:</strong> <em>[nome proprietà]</em>sintassi per impostare un'ampia gamma di proprietà di distribuzione e per eseguire l'override di tutte le variabili SQLCMD dichiarato nel file sqlcmdvars.</span><span class="sxs-lookup"><span data-stu-id="5d275-203">You can use the <strong>/p:</strong> <em>[property name]</em>syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="5d275-204">Il **/dd+** (o **/DeployToDatabase+**) opzione indica che si desidera creare una distribuzione e distribuirla nell'ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="5d275-205">Se si specifica **/dd-**, oppure omettere il commutatore, VSDBCMD verrà generato uno script di distribuzione ma non distribuirla nell'ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d275-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="5d275-206">Questa opzione è spesso la fonte di confusione e viene illustrata più dettagliatamente nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="5d275-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="5d275-207">Il **/script** (o **/DeploymentScriptFile**) consente di specificare dove si desidera generare lo script di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="5d275-208">Questo valore non influenza il processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="5d275-209">Per altre informazioni su VSDBCMD, vedere [riferimento della riga di comando per VSDBCMD. EXE (distribuzione e importazione dello Schema)](https://msdn.microsoft.com/library/dd193283.aspx) e [come: Preparare un Database per la distribuzione da un prompt dei comandi usando VSDBCMD. File EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d275-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span></span>

<span data-ttu-id="5d275-210">Per un esempio di come è possibile utilizzare VSDBCMD da un file di progetto MSBuild, vedere [informazioni sul processo di compilazione](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="5d275-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="5d275-211">Per esempi di come configurare le impostazioni di distribuzione di database per più ambienti, vedere [personalizzazione le distribuzioni dei Database per più ambienti](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="5d275-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="5d275-212">La comprensione del commutatore DeployToDatabase</span><span class="sxs-lookup"><span data-stu-id="5d275-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="5d275-213">Il comportamento dei **/dd** oppure **/DeployToDatabase** commutatore dipende dal fatto che si usi VSDBCMD con un file. dbschema o un file con estensione deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="5d275-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="5d275-214">Se si usa un file. dbschema, il comportamento è piuttosto semplice:</span><span class="sxs-lookup"><span data-stu-id="5d275-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="5d275-215">Se si specifica **/dd+** oppure **/dd**, VSDBCMD genererà uno script di distribuzione e distribuire il database.</span><span class="sxs-lookup"><span data-stu-id="5d275-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="5d275-216">Se si specifica **/dd-** o omettere il commutatore, VSDBCMD genererà solo uno script di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="5d275-217">Se si usa un file con estensione deploymanifest, il comportamento è molto più complesso.</span><span class="sxs-lookup"><span data-stu-id="5d275-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="5d275-218">Infatti, il file con estensione deploymanifest contiene un nome di proprietà **DeployToDatabase** che determina anche se il database viene distribuito.</span><span class="sxs-lookup"><span data-stu-id="5d275-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>


[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]


<span data-ttu-id="5d275-219">Il valore di questa proprietà è impostato in base alle proprietà del progetto di database.</span><span class="sxs-lookup"><span data-stu-id="5d275-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="5d275-220">Se si imposta la **azione di distribuzione** al **creare uno script di distribuzione (con estensione SQL)**, il valore sarà **False**.</span><span class="sxs-lookup"><span data-stu-id="5d275-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="5d275-221">Se si imposta la **azione di distribuzione** al **creare uno script di distribuzione (con estensione SQL) e distribuire il database**, il valore sarà **True**.</span><span class="sxs-lookup"><span data-stu-id="5d275-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="5d275-222">Queste impostazioni sono associate a una piattaforma e configurazione della build specifica.</span><span class="sxs-lookup"><span data-stu-id="5d275-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="5d275-223">Ad esempio, se si configurano le impostazioni per il **eseguire il Debug** configuration e quindi pubblicare usando la **versione** configurazione, non verranno utilizzate le impostazioni.</span><span class="sxs-lookup"><span data-stu-id="5d275-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>


![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="5d275-224">In questo scenario, il **azione di distribuzione** deve sempre essere impostata su **creare uno script di distribuzione (con estensione SQL)**, perché non si desidera che Visual Studio 2010 per distribuire il database.</span><span class="sxs-lookup"><span data-stu-id="5d275-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="5d275-225">In altre parole, il **DeployToDatabase** proprietà deve essere sempre **False**.</span><span class="sxs-lookup"><span data-stu-id="5d275-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>


<span data-ttu-id="5d275-226">Quando un **DeployToDatabase** proprietà viene specificata, il **/dd** commutatore solo eseguirà l'override della proprietà se il valore della proprietà **false**:</span><span class="sxs-lookup"><span data-stu-id="5d275-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="5d275-227">Se il **DeployToDatabase** proprietà è **False**, e si specifica **/dd+** oppure **/dd**, VSDBCMD eseguirà l'override di  **DeployToDatabase** proprietà e distribuire il database.</span><span class="sxs-lookup"><span data-stu-id="5d275-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="5d275-228">Se il **DeployToDatabase** è di proprietà **False**, e si specifica **/dd-** o omettere il commutatore, VSDBCMD non verrà distribuito il database.</span><span class="sxs-lookup"><span data-stu-id="5d275-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="5d275-229">Se il **DeployToDatabase** è di proprietà **True**, VSDBCMD ignora il commutatore e distribuire il database.</span><span class="sxs-lookup"><span data-stu-id="5d275-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="5d275-230">In ogni caso, indipendentemente dal fatto che si distribuisce il database, viene generato uno script di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5d275-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="5d275-231">Conclusione</span><span class="sxs-lookup"><span data-stu-id="5d275-231">Conclusion</span></span>

<span data-ttu-id="5d275-232">In questo argomento è fornita una panoramica del processo di compilazione e distribuzione per i progetti di database in Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="5d275-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="5d275-233">Inoltre illustrato come è possibile usare VSDBCMD.exe con MSBuild per supportare la distribuzione di database su larga scala.</span><span class="sxs-lookup"><span data-stu-id="5d275-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="5d275-234">Per altre informazioni sul funzionamento in pratica, vedere [personalizzazione le distribuzioni dei Database per più ambienti](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="5d275-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="5d275-235">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="5d275-235">Further Reading</span></span>

<span data-ttu-id="5d275-236">Per informazioni su come personalizzare le distribuzioni dei database tramite la creazione di un file di configurazione di distribuzione distinto per ogni ambiente, vedere [personalizzazione le distribuzioni dei Database per più ambienti](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="5d275-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="5d275-237">Per indicazioni su come configurare le appartenenze ai ruoli di database eseguendo uno script di post-distribuzione, vedere [distribuzione di Database le appartenenze ai ruoli per gli ambienti di Test](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="5d275-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="5d275-238">Per indicazioni sulla gestione di alcune delle problematiche tale appartenenza impongono i database, vedere [la distribuzione dei database di appartenenza negli ambienti aziendali](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="5d275-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="5d275-239">Questi argomenti in MSDN forniscono indicazioni più ampio e informazioni generali sui progetti di database di Visual Studio e il processo di distribuzione di database:</span><span class="sxs-lookup"><span data-stu-id="5d275-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="5d275-240">Progetti di Database di Visual Studio 2010 SQL Server</span><span class="sxs-lookup"><span data-stu-id="5d275-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/library/ff678491.aspx)
- [<span data-ttu-id="5d275-241">Gestione delle modifiche di Database</span><span class="sxs-lookup"><span data-stu-id="5d275-241">Managing Database Change</span></span>](https://msdn.microsoft.com/library/aa833404.aspx)
- [<span data-ttu-id="5d275-242">Procedura: Preparare un Database per la distribuzione da un prompt dei comandi usando VSDBCMD. FILE EXE</span><span class="sxs-lookup"><span data-stu-id="5d275-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/library/dd193258.aspx)
- [<span data-ttu-id="5d275-243">Una panoramica della distribuzione e compilazione del Database</span><span class="sxs-lookup"><span data-stu-id="5d275-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/library/aa833165.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="5d275-244">[Precedente](deploying-web-packages.md)
> [Successivo](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="5d275-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
