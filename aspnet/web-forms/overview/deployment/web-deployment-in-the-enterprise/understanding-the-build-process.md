---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
title: Informazioni sul processo di compilazione | Microsoft Docs
author: jrjlee
description: In questo argomento fornisce una procedura dettagliata di un processo di compilazione e distribuzione su larga scala. L'approccio descritto in questo argomento Usa Engin compilare Microsoft personalizzato...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 5b982451-547b-4a2f-a5dc-79bc64d84d40
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
msc.type: authoredcontent
ms.openlocfilehash: 9df145b281b086f546c55d0b26a8b0e44e896bb0
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57040848"
---
<a name="understanding-the-build-process"></a><span data-ttu-id="4da7b-104">Informazioni sul processo di compilazione</span><span class="sxs-lookup"><span data-stu-id="4da7b-104">Understanding the Build Process</span></span>
====================
<span data-ttu-id="4da7b-105">da [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="4da7b-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="4da7b-106">Scaricare PDF</span><span class="sxs-lookup"><span data-stu-id="4da7b-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="4da7b-107">In questo argomento fornisce una procedura dettagliata di un processo di compilazione e distribuzione su larga scala.</span><span class="sxs-lookup"><span data-stu-id="4da7b-107">This topic provides a walkthrough of an enterprise-scale build and deployment process.</span></span> <span data-ttu-id="4da7b-108">L'approccio descritto in questo argomento Usa i file di progetto personalizzati di Microsoft Build Engine (MSBuild) per fornire un controllo accurato ogni aspetto del processo.</span><span class="sxs-lookup"><span data-stu-id="4da7b-108">The approach described in this topic uses custom Microsoft Build Engine (MSBuild) project files to provide fine-grained control over every aspect of the process.</span></span> <span data-ttu-id="4da7b-109">All'interno dei file di progetto, le destinazioni MSBuild personalizzate vengono utilizzate per eseguire l'utilità di distribuzione di database VSDBCMD.exe e utilità di distribuzione, ad esempio lo strumento di distribuzione di Internet Information Services (IIS) Web (MSDeploy.exe).</span><span class="sxs-lookup"><span data-stu-id="4da7b-109">Within the project files, custom MSBuild targets are used to run deployment utilities like the Internet Information Services (IIS) Web Deployment Tool (MSDeploy.exe) and the database deployment utility VSDBCMD.exe.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="4da7b-110">L'argomento precedente [informazioni sul File di progetto](understanding-the-project-file.md), descritti i componenti chiave di un file di progetto MSBuild e ha introdotto il concetto di dividere i file di progetto per supportare la distribuzione in più ambienti di destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-110">The previous topic, [Understanding the Project File](understanding-the-project-file.md), described the key components of an MSBuild project file and introduced the concept of split project files to support deployment to multiple target environments.</span></span> <span data-ttu-id="4da7b-111">Se non si ha già familiarità con questi concetti, è consigliabile rivedere [informazioni sul File di progetto](understanding-the-project-file.md) prima di affrontare questo argomento.</span><span class="sxs-lookup"><span data-stu-id="4da7b-111">If you're not already familiar with these concepts, you should review [Understanding the Project File](understanding-the-project-file.md) before you work through this topic.</span></span>


<span data-ttu-id="4da7b-112">In questo argomento fa parte di una serie di esercitazioni basate su requisiti di distribuzione aziendale di una società fittizia, denominata Fabrikam, Inc. Questa serie di esercitazioni Usa una soluzione di esempio&#x2014;il [soluzione Contact Manager](the-contact-manager-solution.md)&#x2014;per rappresentare un'applicazione web con un livello di complessità, tra cui un'applicazione ASP.NET MVC 3, una comunicazione Windows realistico Servizio Foundation (WCF) e un progetto di database.</span><span class="sxs-lookup"><span data-stu-id="4da7b-112">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="4da7b-113">Il metodo di distribuzione il fulcro delle esercitazioni seguenti si basa sull'approccio di file di progetto split descritto in [informazioni sul File di progetto](understanding-the-project-file.md), in cui il processo di compilazione è controllato da due file di progetto&#x2014;contenente una istruzioni che si applicano a tutti gli ambienti di destinazione e quella che contiene le impostazioni di compilazione e distribuzione specifiche dell'ambiente di creazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-113">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="4da7b-114">In fase di compilazione, il file di progetto specifici dell'ambiente viene unito nel file di progetto indipendenti dall'ambiente in modo da formare un set completo di istruzioni di compilazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-114">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="build-and-deployment-overview"></a><span data-ttu-id="4da7b-115">Cenni preliminari sulla distribuzione e compilazione</span><span class="sxs-lookup"><span data-stu-id="4da7b-115">Build and Deployment Overview</span></span>

<span data-ttu-id="4da7b-116">Nel [soluzione Contact Manager](the-contact-manager-solution.md), tre file di controllano il processo di compilazione e distribuzione:</span><span class="sxs-lookup"><span data-stu-id="4da7b-116">In the [Contact Manager solution](the-contact-manager-solution.md), three files control the build and deployment process:</span></span>

- <span data-ttu-id="4da7b-117">Oggetto *file di progetto universale* (*Publish.proj*).</span><span class="sxs-lookup"><span data-stu-id="4da7b-117">A *universal project file* (*Publish.proj*).</span></span> <span data-ttu-id="4da7b-118">Contiene le istruzioni di compilazione e distribuzione che non cambiano tra ambienti di destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-118">This contains build and deployment instructions that do not change between destination environments.</span></span>
- <span data-ttu-id="4da7b-119">Un' *file di progetto specifici dell'ambiente* (*Env-Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="4da7b-119">An *environment-specific project file* (*Env-Dev.proj*).</span></span> <span data-ttu-id="4da7b-120">Contiene le impostazioni di compilazione e distribuzione specifiche per un ambiente di destinazione specifico.</span><span class="sxs-lookup"><span data-stu-id="4da7b-120">This contains build and deployment settings that are specific to a particular destination environment.</span></span> <span data-ttu-id="4da7b-121">Ad esempio, è possibile usare la *Env-Dev.proj* file per fornire le impostazioni per un ambiente di sviluppo o test e creare un file alternativo denominato *Env-Stage.proj* per fornire le impostazioni per una gestione temporanea ambiente.</span><span class="sxs-lookup"><span data-stu-id="4da7b-121">For example, you could use the *Env-Dev.proj* file to provide settings for a developer or test environment and create an alternative file named *Env-Stage.proj* to provide settings for a staging environment.</span></span>
- <span data-ttu-id="4da7b-122">Oggetto *file di comando* (*Publish-Dev.cmd*).</span><span class="sxs-lookup"><span data-stu-id="4da7b-122">A *command file* (*Publish-Dev.cmd*).</span></span> <span data-ttu-id="4da7b-123">Questo file contiene un MSBuild.exe comando che specifica i file di progetto di cui si desidera eseguire.</span><span class="sxs-lookup"><span data-stu-id="4da7b-123">This contains an MSBuild.exe command that specifies which project files you want to execute.</span></span> <span data-ttu-id="4da7b-124">È possibile creare un file di comando per ogni ambiente di destinazione, in cui ogni file contiene un comando MSBuild.exe che specifica un file di progetto specifici dell'ambiente diverso.</span><span class="sxs-lookup"><span data-stu-id="4da7b-124">You can create a command file for every destination environment, where each file contains an MSBuild.exe command that specifies a different environment-specific project file.</span></span> <span data-ttu-id="4da7b-125">In questo modo lo sviluppatore di distribuzione nei diversi ambienti semplicemente eseguendo il file di comando appropriato.</span><span class="sxs-lookup"><span data-stu-id="4da7b-125">This lets the developer deploy to different environments simply by running the appropriate command file.</span></span>

<span data-ttu-id="4da7b-126">Nella soluzione di esempio, è possibile trovare questi tre file nella cartella della soluzione di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-126">In the sample solution, you can find these three files in the Publish solution folder.</span></span>

![](understanding-the-build-process/_static/image1.png)

<span data-ttu-id="4da7b-127">Prima di esaminare questi file in modo più dettagliato, diamo un'occhiata al funzionamento di processo di compilazione globale quando si usa questo approccio.</span><span class="sxs-lookup"><span data-stu-id="4da7b-127">Before you look at these files in more detail, let's take a look at how the overall build process works when you use this approach.</span></span> <span data-ttu-id="4da7b-128">A livello generale, il processo di compilazione e distribuzione di aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="4da7b-128">At a high level, the build and deployment process looks like this:</span></span>

![](understanding-the-build-process/_static/image2.png)

<span data-ttu-id="4da7b-129">La prima cosa che accade è che i due file di progetto&#x2014;contenente le istruzioni di compilazione e distribuzione universale e una che contiene impostazioni specifiche dell'ambiente&#x2014;vengono unite in un unico file di progetto.</span><span class="sxs-lookup"><span data-stu-id="4da7b-129">The first thing that happens is that the two project files&#x2014;one containing universal build and deployment instructions, and one containing environment-specific settings&#x2014;are merged into a single project file.</span></span> <span data-ttu-id="4da7b-130">MSBuild quindi funziona tramite le istruzioni nel file di progetto.</span><span class="sxs-lookup"><span data-stu-id="4da7b-130">MSBuild then works through the instructions in the project file.</span></span> <span data-ttu-id="4da7b-131">Viene compilata ogni progetto della soluzione, usando il file di progetto per ogni progetto.</span><span class="sxs-lookup"><span data-stu-id="4da7b-131">It builds each of the projects in the solution, using the project file for each project.</span></span> <span data-ttu-id="4da7b-132">Quindi effettua una chiamata a altri strumenti, come distribuzione Web (MSDeploy.exe) e l'utilità VSDBCMD per distribuire il contenuto web e i database nell'ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-132">It then calls out to other tools, like Web Deploy (MSDeploy.exe) and the VSDBCMD utility to deploy your web content and databases to the target environment.</span></span>

<span data-ttu-id="4da7b-133">Dall'inizio alla fine, il processo di compilazione e distribuzione esegue queste attività:</span><span class="sxs-lookup"><span data-stu-id="4da7b-133">From start to finish, the build and deployment process performs these tasks:</span></span>

1. <span data-ttu-id="4da7b-134">Elimina il contenuto della directory di output, in preparazione per una compilazione aggiornata.</span><span class="sxs-lookup"><span data-stu-id="4da7b-134">It deletes the contents of the output directory, in preparation for a fresh build.</span></span>
2. <span data-ttu-id="4da7b-135">Compila ogni progetto nella soluzione:</span><span class="sxs-lookup"><span data-stu-id="4da7b-135">It builds each project in the solution:</span></span>

    1. <span data-ttu-id="4da7b-136">Per i progetti web&#x2014;in questo caso, un'applicazione web ASP.NET MVC e un WCF web service&#x2014;il processo di compilazione crea un pacchetto di distribuzione web per ogni progetto.</span><span class="sxs-lookup"><span data-stu-id="4da7b-136">For web projects&#x2014;in this case, an ASP.NET MVC web application and a WCF web service&#x2014;the build process creates a web deployment package for each project.</span></span>
    2. <span data-ttu-id="4da7b-137">Per i progetti di database, il processo di compilazione crea un manifesto della distribuzione (file con estensione deploymanifest) per ogni progetto.</span><span class="sxs-lookup"><span data-stu-id="4da7b-137">For database projects, the build process creates a deployment manifest (.deploymanifest file) for each project.</span></span>
3. <span data-ttu-id="4da7b-138">Usa l'utilità VSDBCMD.exe per distribuire ogni progetto di database nella soluzione, con varie proprietà dai file di progetto&#x2014;stringa di connessione di destinazione e un nome di database&#x2014;insieme al file con estensione deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="4da7b-138">It uses the VSDBCMD.exe utility to deploy each database project in the solution, using various properties from the project files&#x2014;a target connection string and a database name&#x2014;together with the .deploymanifest file.</span></span>
4. <span data-ttu-id="4da7b-139">Usa l'utilità MSDeploy.exe distribuire ciascun progetto web nella soluzione, con varie proprietà dai file di progetto per controllare il processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-139">It uses the MSDeploy.exe utility to deploy each web project in the solution, using various properties from the project files to control the deployment process.</span></span>

<span data-ttu-id="4da7b-140">È possibile usare la soluzione di esempio per questo processo in modo più dettagliato di traccia.</span><span class="sxs-lookup"><span data-stu-id="4da7b-140">You can use the sample solution to trace this process in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="4da7b-141">Per indicazioni su come personalizzare i file di progetto specifici dell'ambiente per ambienti server, vedere [configurare le proprietà di distribuzione per un ambiente di destinazione](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="4da7b-141">For guidance on how to customize the environment-specific project files for your own server environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>


## <a name="invoking-the-build-and-deployment-process"></a><span data-ttu-id="4da7b-142">Richiamare il processo di distribuzione e compilazione</span><span class="sxs-lookup"><span data-stu-id="4da7b-142">Invoking the Build and Deployment Process</span></span>

<span data-ttu-id="4da7b-143">Per distribuire la soluzione Contact Manager in un ambiente di test per sviluppatori, lo sviluppatore esegue la *Publish-Dev.cmd* file di comando.</span><span class="sxs-lookup"><span data-stu-id="4da7b-143">To deploy the Contact Manager solution to a developer test environment, the developer runs the *Publish-Dev.cmd* command file.</span></span> <span data-ttu-id="4da7b-144">Questa operazione chiama MSBuild.exe, specificando *Publish.proj* del file di progetto da eseguire e *Env-Dev.proj* come valore di parametro.</span><span class="sxs-lookup"><span data-stu-id="4da7b-144">This invokes MSBuild.exe, specifying *Publish.proj* as the project file to execute and *Env-Dev.proj* as a parameter value.</span></span>


[!code-console[Main](understanding-the-build-process/samples/sample1.cmd)]


> [!NOTE]
> <span data-ttu-id="4da7b-145">Il **/fl** switch (abbreviazione di **/fileLogger**) registra l'output di compilazione in un file denominato *MSBuild* nella directory corrente.</span><span class="sxs-lookup"><span data-stu-id="4da7b-145">The **/fl** switch (short for **/fileLogger**) logs the build output to a file named *msbuild.log* in the current directory.</span></span> <span data-ttu-id="4da7b-146">Per altre informazioni, vedere la [riferimenti alla riga di comando di MSBuild](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="4da7b-146">For more information, see the [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>


<span data-ttu-id="4da7b-147">A questo punto, MSBuild viene avviata l'esecuzione, carica il *Publish.proj* file e inizierà a elaborare le istruzioni in esso contenuti.</span><span class="sxs-lookup"><span data-stu-id="4da7b-147">At this point, MSBuild starts running, loads the *Publish.proj* file, and starts processing the instructions within it.</span></span> <span data-ttu-id="4da7b-148">La prima istruzione indica a MSBuild di importare il progetto di file che il **TargetEnvPropsFile** parametro specifica.</span><span class="sxs-lookup"><span data-stu-id="4da7b-148">The first instruction tells MSBuild to import the project file that the **TargetEnvPropsFile** parameter specifies.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample2.xml)]


<span data-ttu-id="4da7b-149">Il **TargetEnvPropsFile** parametro specifica il *Env-Dev.proj* file, in modo che MSBuild unisce il contenuto del *Env-Dev.proj* del file nei  *Publish.proj* file.</span><span class="sxs-lookup"><span data-stu-id="4da7b-149">The **TargetEnvPropsFile** parameter specifies the *Env-Dev.proj* file, so MSBuild merges the contents of the *Env-Dev.proj* file into the *Publish.proj* file.</span></span>

<span data-ttu-id="4da7b-150">Gli elementi successivi che MSBuild viene rilevato nel file di progetto unite sono gruppi di proprietà.</span><span class="sxs-lookup"><span data-stu-id="4da7b-150">The next elements that MSBuild encounters in the merged project file are property groups.</span></span> <span data-ttu-id="4da7b-151">Le proprietà vengono elaborate nell'ordine in cui vengono visualizzati nel file.</span><span class="sxs-lookup"><span data-stu-id="4da7b-151">Properties are processed in the order in which they appear in the file.</span></span> <span data-ttu-id="4da7b-152">MSBuild crea una coppia chiave-valore per ogni proprietà, che fornisce che vengono soddisfatte le condizioni specificate.</span><span class="sxs-lookup"><span data-stu-id="4da7b-152">MSBuild creates a key-value pair for each property, providing that any specified conditions are met.</span></span> <span data-ttu-id="4da7b-153">Le proprietà definite in un secondo momento nel file sovrascriveranno tutte le proprietà con lo stesso nome dichiarato in precedenza nel file.</span><span class="sxs-lookup"><span data-stu-id="4da7b-153">Properties defined later in the file will overwrite any properties with the same name defined earlier in the file.</span></span> <span data-ttu-id="4da7b-154">Si consideri, ad esempio, il **OutputRoot** proprietà.</span><span class="sxs-lookup"><span data-stu-id="4da7b-154">For example, consider the **OutputRoot** properties.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample3.xml)]


<span data-ttu-id="4da7b-155">Quando MSBuild elabora i primi **OutputRoot** elemento, fornendo un parametro denominato in modo analogo non è stato specificato, imposta il valore della **OutputRoot** proprietà **... \Publish\Out**. Quando viene rilevato il secondo **OutputRoot** elemento, se la condizione restituisce **true**, sovrascriverà il valore della **OutputRoot** con il valore della proprietà di **OutDir** parametro.</span><span class="sxs-lookup"><span data-stu-id="4da7b-155">When MSBuild processes the first **OutputRoot** element, providing a similarly named parameter has not been provided, it sets the value of the **OutputRoot** property to **..\Publish\Out**. When it encounters the second **OutputRoot** element, if the condition evaluates to **true**, it will overwrite the value of the **OutputRoot** property with the value of the **OutDir** parameter.</span></span>

<span data-ttu-id="4da7b-156">L'elemento successivo che rileva MSBuild è un gruppo singolo elemento, che contiene un elemento denominato **ProjectsToBuild**.</span><span class="sxs-lookup"><span data-stu-id="4da7b-156">The next element that MSBuild encounters is a single item group, containing an item named **ProjectsToBuild**.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample4.xml)]


<span data-ttu-id="4da7b-157">MSBuild elabora questa istruzione creando un elenco di elementi denominato **ProjectsToBuild**.</span><span class="sxs-lookup"><span data-stu-id="4da7b-157">MSBuild processes this instruction by building an item list named **ProjectsToBuild**.</span></span> <span data-ttu-id="4da7b-158">In questo caso, l'elenco di elementi contiene un singolo valore&#x2014;il percorso e il nome del file della soluzione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-158">In this case, the item list contains a single value&#x2014;the path and filename of the solution file.</span></span>

<span data-ttu-id="4da7b-159">A questo punto, gli elementi rimanenti sono destinazioni.</span><span class="sxs-lookup"><span data-stu-id="4da7b-159">At this point, the remaining elements are targets.</span></span> <span data-ttu-id="4da7b-160">Le destinazioni vengono elaborate in modo diverso dalla proprietà e gli elementi&#x2014;in pratica, le destinazioni non vengono elaborate a meno che vengono esplicitamente specificate dall'utente o richiamati da un altro costrutto nel file di progetto.</span><span class="sxs-lookup"><span data-stu-id="4da7b-160">Targets are processed differently from properties and items&#x2014;essentially, targets are not processed unless they are either explicitly specified by the user or invoked by another construct within the project file.</span></span> <span data-ttu-id="4da7b-161">Si tenga presente che l'apertura **Project** tag include un **DefaultTargets** attributo.</span><span class="sxs-lookup"><span data-stu-id="4da7b-161">Recall that the opening **Project** tag includes a **DefaultTargets** attribute.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample5.xml)]


<span data-ttu-id="4da7b-162">Indica a MSBuild per richiamare il **FullPublish** destinazione, se le destinazioni non sono specificati quando viene richiamato MSBuild.exe.</span><span class="sxs-lookup"><span data-stu-id="4da7b-162">This instructs MSBuild to invoke the **FullPublish** target, if targets are not specified when MSBuild.exe is invoked.</span></span> <span data-ttu-id="4da7b-163">Il **FullPublish** destinazione non contiene tutte le attività; invece specifica semplicemente un elenco di dipendenze.</span><span class="sxs-lookup"><span data-stu-id="4da7b-163">The **FullPublish** target doesn't contain any tasks; instead it simply specifies a list of dependencies.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample6.xml)]


<span data-ttu-id="4da7b-164">Questa dipendenza indica a MSBuild che per consentire di eseguire la **FullPublish** destinazione, è necessario richiamare questo elenco di destinazioni nell'ordine indicato:</span><span class="sxs-lookup"><span data-stu-id="4da7b-164">This dependency tells MSBuild that in order to execute the **FullPublish** target, it needs to invoke this list of targets in the order provided:</span></span>

1. <span data-ttu-id="4da7b-165">È necessario richiamare il **Pulisci** destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-165">It must invoke the **Clean** target.</span></span>
2. <span data-ttu-id="4da7b-166">È necessario richiamare il **BuildProjects** destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-166">It must invoke the **BuildProjects** target.</span></span>
3. <span data-ttu-id="4da7b-167">È necessario richiamare il **GatherPackagesForPublishing** destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-167">It must invoke the **GatherPackagesForPublishing** target.</span></span>
4. <span data-ttu-id="4da7b-168">È necessario richiamare il **PublishDbPackages** destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-168">It must invoke the **PublishDbPackages** target.</span></span>
5. <span data-ttu-id="4da7b-169">È necessario richiamare il **PublishWebPackages** destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-169">It must invoke the **PublishWebPackages** target.</span></span>

### <a name="the-clean-target"></a><span data-ttu-id="4da7b-170">La destinazione pulita</span><span class="sxs-lookup"><span data-stu-id="4da7b-170">The Clean Target</span></span>

<span data-ttu-id="4da7b-171">Il **Pulisci** destinazione essenzialmente consente di eliminare la directory di output e il relativo contenuto, come preparazione per una compilazione aggiornata.</span><span class="sxs-lookup"><span data-stu-id="4da7b-171">The **Clean** target basically deletes the output directory and all its contents, as preparation for a fresh build.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample7.xml)]


<span data-ttu-id="4da7b-172">Si noti che la destinazione include un' **ItemGroup** elemento.</span><span class="sxs-lookup"><span data-stu-id="4da7b-172">Notice that the target includes an **ItemGroup** element.</span></span> <span data-ttu-id="4da7b-173">Quando si definisce proprietà o gli elementi all'interno di un **destinazione** elemento, si sta creando *dinamico* proprietà e gli elementi.</span><span class="sxs-lookup"><span data-stu-id="4da7b-173">When you define properties or items within a **Target** element, you're creating *dynamic* properties and items.</span></span> <span data-ttu-id="4da7b-174">In altre parole, le proprietà o gli elementi non vengono elaborati fino a quando non viene eseguita la destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-174">In other words, the properties or items aren't processed until the target is executed.</span></span> <span data-ttu-id="4da7b-175">La directory di output non esiste o non può contenere tutti i file fino all'inizio del processo di compilazione, pertanto non è possibile compilare il  **\_FilesToDelete** elencato come un elemento statico, è necessario attendere fino a quando non è in corso l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-175">The output directory might not exist or contain any files until the build process begins, so you can't build the **\_FilesToDelete** list as a static item; you have to wait until execution is underway.</span></span> <span data-ttu-id="4da7b-176">Di conseguenza, si compila l'elenco come un elemento dinamico all'interno della destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-176">As such, you build the list as a dynamic item within the target.</span></span>

> [!NOTE]
> <span data-ttu-id="4da7b-177">In questo caso, poiché il **Pulisci** destinazione è il primo a essere eseguito, non è necessario usare un gruppo di elementi dinamico reale.</span><span class="sxs-lookup"><span data-stu-id="4da7b-177">In this case, because the **Clean** target is the first to be executed, there's no real need to use a dynamic item group.</span></span> <span data-ttu-id="4da7b-178">Tuttavia, è consigliabile usare le proprietà dinamiche e gli elementi in questo tipo di scenario, come si potrebbe voler eseguire le destinazioni in un ordine diverso in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="4da7b-178">However, it's good practice to use dynamic properties and items in this type of scenario, as you might want to execute targets in a different order at some point.</span></span>  
> <span data-ttu-id="4da7b-179">Inoltre, è sempre preferibile evitare di dichiarare gli elementi che non verranno mai utilizzati.</span><span class="sxs-lookup"><span data-stu-id="4da7b-179">You should also aim to avoid declaring items that will never be used.</span></span> <span data-ttu-id="4da7b-180">Se sono presenti elementi che verranno usati solo da una destinazione specifica, è consigliabile inserirli all'interno della destinazione per rimuovere qualsiasi un sovraccarico non necessario nel processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-180">If you have items that will only be used by a specific target, consider placing them inside the target to remove any unnecessary overhead on the build process.</span></span>


<span data-ttu-id="4da7b-181">Dinamica degli elementi, il **Pulisci** target è piuttosto semplice e Usa l'oggetto incorporato **messaggio**, **Elimina**, e **RemoveDir**attività:</span><span class="sxs-lookup"><span data-stu-id="4da7b-181">Dynamic items aside, the **Clean** target is fairly straightforward and makes use of the built-in **Message**, **Delete**, and **RemoveDir** tasks to:</span></span>

1. <span data-ttu-id="4da7b-182">Inviare un messaggio al logger.</span><span class="sxs-lookup"><span data-stu-id="4da7b-182">Send a message to the logger.</span></span>
2. <span data-ttu-id="4da7b-183">Compila un elenco di file da eliminare.</span><span class="sxs-lookup"><span data-stu-id="4da7b-183">Build a list of files to delete.</span></span>
3. <span data-ttu-id="4da7b-184">Eliminare i file.</span><span class="sxs-lookup"><span data-stu-id="4da7b-184">Delete the files.</span></span>
4. <span data-ttu-id="4da7b-185">Rimuovere la directory di output.</span><span class="sxs-lookup"><span data-stu-id="4da7b-185">Remove the output directory.</span></span>

### <a name="the-buildprojects-target"></a><span data-ttu-id="4da7b-186">La destinazione BuildProjects</span><span class="sxs-lookup"><span data-stu-id="4da7b-186">The BuildProjects Target</span></span>

<span data-ttu-id="4da7b-187">Il **BuildProjects** destinazione si basa fondamentalmente tutti i progetti nella soluzione di esempio.</span><span class="sxs-lookup"><span data-stu-id="4da7b-187">The **BuildProjects** target basically builds all the projects in the sample solution.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample8.xml)]


<span data-ttu-id="4da7b-188">Questa destinazione è stato descritto in modo più dettagliato nell'argomento precedente [informazioni sul File di progetto](understanding-the-project-file.md), per illustrare come attività e destinazioni fanno riferimento a proprietà e gli elementi.</span><span class="sxs-lookup"><span data-stu-id="4da7b-188">This target was described in some detail in the previous topic, [Understanding the Project File](understanding-the-project-file.md), to illustrate how tasks and targets reference properties and items.</span></span> <span data-ttu-id="4da7b-189">A questo punto, si è interessati principalmente il **MSBuild** attività.</span><span class="sxs-lookup"><span data-stu-id="4da7b-189">At this point, you're mainly interested in the **MSBuild** task.</span></span> <span data-ttu-id="4da7b-190">È possibile usare questa attività per compilare più progetti.</span><span class="sxs-lookup"><span data-stu-id="4da7b-190">You can use this task to build multiple projects.</span></span> <span data-ttu-id="4da7b-191">L'attività non crea una nuova istanza della MSBuild.exe; Usa l'istanza attualmente in esecuzione per ogni progetto di compilazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-191">The task does not create a new instance of MSBuild.exe; it uses the current running instance to build each project.</span></span> <span data-ttu-id="4da7b-192">I punti chiave di interesse in questo esempio sono le proprietà di distribuzione:</span><span class="sxs-lookup"><span data-stu-id="4da7b-192">The key points of interest in this example are the deployment properties:</span></span>

- <span data-ttu-id="4da7b-193">Il **DeployOnBuild** proprietà indicato a MSBuild per eseguire le istruzioni di distribuzione nelle impostazioni del progetto una volta completata la compilazione di ogni progetto.</span><span class="sxs-lookup"><span data-stu-id="4da7b-193">The **DeployOnBuild** property instructs MSBuild to run any deployment instructions in the project settings when the build of each project is complete.</span></span>
- <span data-ttu-id="4da7b-194">Il **DeployTarget** identificata dalla proprietà di destinazione che si vuole richiamare dopo la compilazione del progetto.</span><span class="sxs-lookup"><span data-stu-id="4da7b-194">The **DeployTarget** property identifies the target that you want to invoke after the project is built.</span></span> <span data-ttu-id="4da7b-195">In questo caso, il **pacchetto** destinazione si basa l'output del progetto in un pacchetto distribuibile dal web.</span><span class="sxs-lookup"><span data-stu-id="4da7b-195">In this case, the **Package** target builds the project output into a deployable web package.</span></span>

> [!NOTE]
> <span data-ttu-id="4da7b-196">Il **pacchetto** destinazione richiama Web pubblicazione Pipeline (WPP), che fornisce l'integrazione tra MSBuild e distribuzione Web.</span><span class="sxs-lookup"><span data-stu-id="4da7b-196">The **Package** target invokes the Web Publishing Pipeline (WPP), which provides integration between MSBuild and Web Deploy.</span></span> <span data-ttu-id="4da7b-197">Se si desidera esaminare le destinazioni predefinite WPP fornita, rivedere le *Microsoft.Web.Publishing.targets* file nella cartella %\MSBuild\Microsoft\VisualStudio\v10.0\Web % programmi (x86).</span><span class="sxs-lookup"><span data-stu-id="4da7b-197">If you want to take a look at the built-in targets that the WPP provides, review the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>


### <a name="the-gatherpackagesforpublishing-target"></a><span data-ttu-id="4da7b-198">La destinazione GatherPackagesForPublishing</span><span class="sxs-lookup"><span data-stu-id="4da7b-198">The GatherPackagesForPublishing Target</span></span>

<span data-ttu-id="4da7b-199">Se è studiare le **GatherPackagesForPublishing** destinazione, si noterà che in realtà non contiene tutte le attività.</span><span class="sxs-lookup"><span data-stu-id="4da7b-199">If you study the **GatherPackagesForPublishing** target, you'll notice that it doesn't actually contain any tasks.</span></span> <span data-ttu-id="4da7b-200">Al contrario, contiene un gruppo singolo elemento che definisce tre elementi dinamici.</span><span class="sxs-lookup"><span data-stu-id="4da7b-200">Instead, it contains a single item group that defines three dynamic items.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample9.xml)]


<span data-ttu-id="4da7b-201">Questi elementi fanno riferimento ai pacchetti di distribuzione che sono stati creati quando la **BuildProjects** destinazione è stata eseguita.</span><span class="sxs-lookup"><span data-stu-id="4da7b-201">These items refer to the deployment packages that were created when the **BuildProjects** target was executed.</span></span> <span data-ttu-id="4da7b-202">È non è stato possibile definire questi elementi in modo statico nel file di progetto, perché non sono presenti i file a cui fanno riferimento gli elementi finché il **BuildProjects** destinazione viene eseguita.</span><span class="sxs-lookup"><span data-stu-id="4da7b-202">You couldn't define these items statically in the project file, because the files to which the items refer don't exist until the **BuildProjects** target is executed.</span></span> <span data-ttu-id="4da7b-203">Al contrario, gli elementi devono essere definiti in modo dinamico all'interno di una destinazione che non viene richiamata fino a dopo il **BuildProjects** destinazione viene eseguita.</span><span class="sxs-lookup"><span data-stu-id="4da7b-203">Instead, the items must be defined dynamically within a target that is not invoked until after the **BuildProjects** target is executed.</span></span>

<span data-ttu-id="4da7b-204">Gli elementi non vengono utilizzati all'interno di questa destinazione&#x2014;questa destinazione Build semplicemente gli elementi e i metadati associati a ogni valore dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="4da7b-204">The items are not used within this target&#x2014;this target simply builds the items and the metadata associated with each item value.</span></span> <span data-ttu-id="4da7b-205">Dopo che questi elementi vengono elaborati, il **PublishPackages** elemento conterrà due valori, il percorso per il *ContactManager.Mvc.deploy.cmd* file e il percorso il  *ContactManager.Service.deploy.cmd* file.</span><span class="sxs-lookup"><span data-stu-id="4da7b-205">Once these elements are processed, the **PublishPackages** item will contain two values, the path to the *ContactManager.Mvc.deploy.cmd* file and the path to the *ContactManager.Service.deploy.cmd* file.</span></span> <span data-ttu-id="4da7b-206">La funzionalità distribuzione Web consente di creare questi file come parte del pacchetto di web per ogni progetto e questi sono i file che è necessario richiamare nel server di destinazione per poter distribuire i pacchetti.</span><span class="sxs-lookup"><span data-stu-id="4da7b-206">Web Deploy creates these files as part of the web package for each project, and these are the files that you must invoke on the destination server in order to deploy the packages.</span></span> <span data-ttu-id="4da7b-207">Se si apre uno di questi file, viene visualizzato in sostanza un comando MSDeploy.exe con diversi valori di parametro di compilazione specifiche.</span><span class="sxs-lookup"><span data-stu-id="4da7b-207">If you open up one of these files, you'll basically see an MSDeploy.exe command with various build-specific parameter values.</span></span>

<span data-ttu-id="4da7b-208">Il **DbPublishPackages** elemento conterrà un singolo valore, il percorso per il *ContactManager.Database.deploymanifest* file.</span><span class="sxs-lookup"><span data-stu-id="4da7b-208">The **DbPublishPackages** item will contain a single value, the path to the *ContactManager.Database.deploymanifest* file.</span></span>

> [!NOTE]
> <span data-ttu-id="4da7b-209">Quando si compila un progetto di database e Usa lo stesso schema come un file di progetto MSBuild, viene generato un file con estensione deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="4da7b-209">A .deploymanifest file is generated when you build a database project, and it uses the same schema as an MSBuild project file.</span></span> <span data-ttu-id="4da7b-210">Contiene tutte le informazioni necessarie per distribuire un database, incluso il percorso dello schema del database (. dbschema) e i dettagli di qualsiasi script pre e post-distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-210">It contains all the information required to deploy a database, including the location of the database schema (.dbschema) and details of any pre-deployment and post-deployment scripts.</span></span> <span data-ttu-id="4da7b-211">Per altre informazioni, vedere [An Overview of Database Build e distribuzione](https://msdn.microsoft.com/library/aa833165.aspx).</span><span class="sxs-lookup"><span data-stu-id="4da7b-211">For more information, see [An Overview of Database Build and Deployment](https://msdn.microsoft.com/library/aa833165.aspx).</span></span>


<span data-ttu-id="4da7b-212">Verranno fornite altre informazioni sul modo in cui i pacchetti di distribuzione e i manifesti della distribuzione del database vengono creati e utilizzati [compilazione e creazione di pacchetti Web Application Projects](building-and-packaging-web-application-projects.md) e [distribuisce i progetti di Database](deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="4da7b-212">You'll learn more about how deployment packages and database deployment manifests are created and used in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md) and [Deploying Database Projects](deploying-database-projects.md).</span></span>

### <a name="the-publishdbpackages-target"></a><span data-ttu-id="4da7b-213">La destinazione PublishDbPackages</span><span class="sxs-lookup"><span data-stu-id="4da7b-213">The PublishDbPackages Target</span></span>

<span data-ttu-id="4da7b-214">Brevemente a proposito, il **PublishDbPackages** destinazione richiama l'utilità VSDBCMD per distribuire il **ContactManager** database in un ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-214">Briefly speaking, the **PublishDbPackages** target invokes the VSDBCMD utility to deploy the **ContactManager** database to a target environment.</span></span> <span data-ttu-id="4da7b-215">Configurazione della distribuzione di database prevede un numero elevato di decisioni e sfumature e si otterranno altre informazioni, vedere [progetti di Database di distribuzione](deploying-database-projects.md) e [personalizzazione le distribuzioni dei Database per più ambienti](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="4da7b-215">Configuring database deployment involves lots of decisions and nuances, and you'll learn more about this in [Deploying Database Projects](deploying-database-projects.md) and [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="4da7b-216">In questo argomento, ci concentreremo su come funziona effettivamente questa destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-216">In this topic, we'll focus on how this target actually functions.</span></span>

<span data-ttu-id="4da7b-217">In primo luogo, si noti che il tag di apertura include un' **output** attributo.</span><span class="sxs-lookup"><span data-stu-id="4da7b-217">First, notice that the opening tag includes an **Outputs** attribute.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample10.xml)]


<span data-ttu-id="4da7b-218">Questo è un esempio di *batch di destinazione*.</span><span class="sxs-lookup"><span data-stu-id="4da7b-218">This is an example of *target batching*.</span></span> <span data-ttu-id="4da7b-219">Nei file di progetto MSBuild, l'invio in batch è una tecnica per scorrere le raccolte.</span><span class="sxs-lookup"><span data-stu-id="4da7b-219">In MSBuild project files, batching is a technique for iterating over collections.</span></span> <span data-ttu-id="4da7b-220">Il valore del **output** attributo **"% (DbPublishPackages.Identity)"**, fa riferimento al **identità** proprietà dei metadati il **DbPublishPackages**  elenco di elementi.</span><span class="sxs-lookup"><span data-stu-id="4da7b-220">The value of the **Outputs** attribute, **"%(DbPublishPackages.Identity)"**, refers to the **Identity** metadata property of the **DbPublishPackages** item list.</span></span> <span data-ttu-id="4da7b-221">Questa notazione, \**Outputs=%\*\*\*(ItemList.ItemMetadataName)*, viene convertito come:</span><span class="sxs-lookup"><span data-stu-id="4da7b-221">This notation, \**Outputs=%\*\*\*(ItemList.ItemMetadataName)*, is translated as:</span></span>

- <span data-ttu-id="4da7b-222">Suddividere gli elementi in **DbPublishPackages** in batch di elementi che contengono gli stessi **identità** valore dei metadati.</span><span class="sxs-lookup"><span data-stu-id="4da7b-222">Split the items in **DbPublishPackages** into batches of items that contain the same **Identity** metadata value.</span></span>
- <span data-ttu-id="4da7b-223">Eseguire la destinazione di una sola volta per ogni batch.</span><span class="sxs-lookup"><span data-stu-id="4da7b-223">Execute the target once per batch.</span></span>

> [!NOTE]
> <span data-ttu-id="4da7b-224">**Identity** è uno dei [valori predefiniti dei metadati](https://msdn.microsoft.com/library/ms164313.aspx) assegnato a ogni elemento al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-224">**Identity** is one of the [built-in metadata values](https://msdn.microsoft.com/library/ms164313.aspx) that is assigned to every item on creation.</span></span> <span data-ttu-id="4da7b-225">Fa riferimento al valore dei **inclusione** attributo il **elemento** elemento&#x2014;in altre parole, il percorso e il nome dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="4da7b-225">It refers to the value of the **Include** attribute in the **Item** element&#x2014;in other words, the path and filename of the item.</span></span>


<span data-ttu-id="4da7b-226">In questo caso, perché non sono mai più di un elemento con lo stesso percorso e nome file, essenzialmente stiamo collaborando con dimensioni di batch di uno.</span><span class="sxs-lookup"><span data-stu-id="4da7b-226">In this case, because there should never be more than one item with the same path and filename, we're essentially working with batch sizes of one.</span></span> <span data-ttu-id="4da7b-227">La destinazione viene eseguita una sola volta per ogni pacchetto di database.</span><span class="sxs-lookup"><span data-stu-id="4da7b-227">The target is executed once for every database package.</span></span>

<span data-ttu-id="4da7b-228">È possibile visualizzare una notazione simile nel  **\_Cmd** proprietà, che crea un comando VSDBCMD con le opzioni appropriate.</span><span class="sxs-lookup"><span data-stu-id="4da7b-228">You can see a similar notation in the **\_Cmd** property, which builds a VSDBCMD command with the appropriate switches.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample11.xml)]


<span data-ttu-id="4da7b-229">In questo caso **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, e **%(DbPublishPackages.FullPath)** fanno tutte riferimento i valori dei metadati del **DbPublishPackages** raccolta di elementi.</span><span class="sxs-lookup"><span data-stu-id="4da7b-229">In this case, **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, and **%(DbPublishPackages.FullPath)** all refer to metadata values of the **DbPublishPackages** item collection.</span></span> <span data-ttu-id="4da7b-230">Il  **\_Cmd** proprietà viene utilizzata per il **Exec** attività che richiama il comando.</span><span class="sxs-lookup"><span data-stu-id="4da7b-230">The **\_Cmd** property is used by the **Exec** task, which invokes the command.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample12.xml)]


<span data-ttu-id="4da7b-231">In seguito a questa notazione, il **Exec** attività creerà batch in base a combinazioni univoche delle **DatabaseConnectionString**, **TargetDatabase**e **FullPath** i valori dei metadati e l'attività verrà eseguita una sola volta per ogni batch.</span><span class="sxs-lookup"><span data-stu-id="4da7b-231">As a result of this notation, the **Exec** task will create batches based on unique combinations of the **DatabaseConnectionString**, **TargetDatabase**, and **FullPath** metadata values, and the task will execute once for each batch.</span></span> <span data-ttu-id="4da7b-232">Questo è un esempio di *batch di attività*.</span><span class="sxs-lookup"><span data-stu-id="4da7b-232">This is an example of *task batching*.</span></span> <span data-ttu-id="4da7b-233">Tuttavia, poiché l'invio in batch a livello di destinazione è già divisa la raccolta di elementi in batch di singolo elemento, il **Exec** attività verrà eseguita una sola volta per ogni iterazione di destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-233">However, because the target-level batching has already divided our item collection into single-item batches, the **Exec** task will run once and only once for each iteration of the target.</span></span> <span data-ttu-id="4da7b-234">In altre parole, questa attività richiama l'utilità VSDBCMD una volta per ogni pacchetto di database nella soluzione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-234">In other words, this task invokes the VSDBCMD utility once for each database package in the solution.</span></span>

> [!NOTE]
> <span data-ttu-id="4da7b-235">Per altre informazioni sulla destinazione e l'invio in batch di attività, vedere MSBuild [Batching](https://msdn.microsoft.com/library/ms171473.aspx), [metadati degli elementi in batch di destinazione](https://msdn.microsoft.com/library/ms228229.aspx), e [metadati degli elementi in batch delle attività](https://msdn.microsoft.com/library/ms171474.aspx).</span><span class="sxs-lookup"><span data-stu-id="4da7b-235">For more information on target and task batching, see MSBuild [Batching](https://msdn.microsoft.com/library/ms171473.aspx), [Item Metadata in Target Batching](https://msdn.microsoft.com/library/ms228229.aspx), and [Item Metadata in Task Batching](https://msdn.microsoft.com/library/ms171474.aspx).</span></span>


### <a name="the-publishwebpackages-target"></a><span data-ttu-id="4da7b-236">La destinazione PublishWebPackages</span><span class="sxs-lookup"><span data-stu-id="4da7b-236">The PublishWebPackages Target</span></span>

<span data-ttu-id="4da7b-237">A questo punto è stata richiamata la **BuildProjects** destinazione, che genera un pacchetto di distribuzione web per ogni progetto nella soluzione di esempio.</span><span class="sxs-lookup"><span data-stu-id="4da7b-237">By this point, you've invoked the **BuildProjects** target, which generates a web deployment package for each project in the sample solution.</span></span> <span data-ttu-id="4da7b-238">Che accompagna ogni pacchetto è un *deploy. cmd* file che contiene i comandi MSDeploy.exe necessari per distribuire il pacchetto nell'ambiente di destinazione, e una *SetParameters* file, che specifica il informazioni necessarie dell'ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="4da7b-238">Accompanying each package is a *deploy.cmd* file, which contains the MSDeploy.exe commands required to deploy the package to the target environment, and a *SetParameters.xml* file, which specifies the necessary details of the target environment.</span></span> <span data-ttu-id="4da7b-239">È stato richiamato anche il **GatherPackagesForPublishing** destinazione, che genera un elemento di raccolta che contiene il *deploy. cmd* file si è interessati.</span><span class="sxs-lookup"><span data-stu-id="4da7b-239">You've also invoked the **GatherPackagesForPublishing** target, which generates an item collection containing the *deploy.cmd* files you're interested in.</span></span> <span data-ttu-id="4da7b-240">In pratica, il **PublishWebPackages** destinazione consente di eseguire queste operazioni:</span><span class="sxs-lookup"><span data-stu-id="4da7b-240">Essentially, the **PublishWebPackages** target performs these functions:</span></span>

- <span data-ttu-id="4da7b-241">Consente di modificare la *SetParameters. XML* file per ogni pacchetto a includere i dettagli corretti per l'ambiente di destinazione, usando la **XmlPoke** attività.</span><span class="sxs-lookup"><span data-stu-id="4da7b-241">It manipulates the *SetParameters.xml* file for each package to include the correct details for the target environment, using the **XmlPoke** task.</span></span>
- <span data-ttu-id="4da7b-242">Richiama il *deploy. cmd* file per ogni pacchetto, utilizzando le opzioni appropriate.</span><span class="sxs-lookup"><span data-stu-id="4da7b-242">It invokes the *deploy.cmd* file for each package, using the appropriate switches.</span></span>

<span data-ttu-id="4da7b-243">Esattamente come le **PublishDbPackages** destinazione, il **PublishWebPackages** destinazione utilizza batch di destinazione per assicurarsi che la destinazione viene eseguita una sola volta per ogni pacchetto di web.</span><span class="sxs-lookup"><span data-stu-id="4da7b-243">Just like the **PublishDbPackages** target, the **PublishWebPackages** target uses target batching to ensure that the target is executed once for each web package.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample13.xml)]


<span data-ttu-id="4da7b-244">All'interno della destinazione, il **Exec** attività viene usata per eseguire il *deploy. cmd* file per ogni pacchetto di web.</span><span class="sxs-lookup"><span data-stu-id="4da7b-244">Within the target, the **Exec** task is used to run the *deploy.cmd* file for each web package.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample14.xml)]


<span data-ttu-id="4da7b-245">Per altre informazioni sulla configurazione della distribuzione dei pacchetti web, vedere [compilazione e creazione di pacchetti Web Application Projects](building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="4da7b-245">For more information on configuring the deployment of web packages, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="4da7b-246">Conclusione</span><span class="sxs-lookup"><span data-stu-id="4da7b-246">Conclusion</span></span>

<span data-ttu-id="4da7b-247">In questo argomento viene fornita una procedura dettagliata del modo in cui dividere i file di progetto consentono di controllare il processo di compilazione e distribuzione dall'inizio alla fine per la soluzione di esempio Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="4da7b-247">This topic provided a walkthrough of how split project files are used to control the build and deployment process from start to finish for the Contact Manager sample solution.</span></span> <span data-ttu-id="4da7b-248">Usando questo approccio consente di eseguire complesso, le distribuzioni su larga scala in un unico passaggio ripetibile, semplicemente eseguendo un file di comando specifici dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="4da7b-248">Using this approach lets you run complex, enterprise-scale deployments in a single, repeatable step, simply by running an environment-specific command file.</span></span>

## <a name="further-reading"></a><span data-ttu-id="4da7b-249">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="4da7b-249">Further Reading</span></span>

<span data-ttu-id="4da7b-250">Per un'introduzione più dettagliata per i file di progetto e il sito, vedere [all'interno di Microsoft Build Engine: Utilizzo di MSBuild e Team Foundation Build](http://amzn.com/0735645248) Sayed Ibrahim Hashimi, William Bartholomew, ISBN: 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="4da7b-250">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4da7b-251">[Precedente](understanding-the-project-file.md)
> [Successivo](building-and-packaging-web-application-projects.md)</span><span class="sxs-lookup"><span data-stu-id="4da7b-251">[Previous](understanding-the-project-file.md)
[Next](building-and-packaging-web-application-projects.md)</span></span>
