---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
title: Informazioni sul File di progetto | Microsoft Docs
author: jrjlee
description: I file di progetto di Microsoft Build Engine (MSBuild) si trovano il fulcro del processo di compilazione e distribuzione. Questo argomento inizia con una panoramica concettuale di MSBuild...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 07978d9d-341c-4524-bcba-62976f390f77
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
msc.type: authoredcontent
ms.openlocfilehash: d774a8e13e108d1be4c39e1e909d3d9683968a0d
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/09/2019
ms.locfileid: "59404923"
---
# <a name="understanding-the-project-file"></a><span data-ttu-id="f546a-104">Informazioni sul file di progetto</span><span class="sxs-lookup"><span data-stu-id="f546a-104">Understanding the Project File</span></span>

<span data-ttu-id="f546a-105">da [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="f546a-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="f546a-106">Scarica il PDF</span><span class="sxs-lookup"><span data-stu-id="f546a-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="f546a-107">I file di progetto di Microsoft Build Engine (MSBuild) si trovano il fulcro del processo di compilazione e distribuzione.</span><span class="sxs-lookup"><span data-stu-id="f546a-107">Microsoft Build Engine (MSBuild) project files lie at the heart of the build and deployment process.</span></span> <span data-ttu-id="f546a-108">Questo argomento inizia con una panoramica concettuale di MSBuild e il file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-108">This topic starts with a conceptual overview of MSBuild and the project file.</span></span> <span data-ttu-id="f546a-109">Vengono descritti i componenti chiave, che è possibile riscontrare quando si lavora con i file di progetto e può essere utilizzato con un esempio di come è possibile utilizzare i file di progetto per distribuire le applicazioni reali.</span><span class="sxs-lookup"><span data-stu-id="f546a-109">It describes the key components you'll come across when you work with project files, and it works through an example of how you can use project files to deploy real-world applications.</span></span>
> 
> <span data-ttu-id="f546a-110">Che cosa si apprenderà come:</span><span class="sxs-lookup"><span data-stu-id="f546a-110">What you'll learn:</span></span>
> 
> - <span data-ttu-id="f546a-111">Come MSBuild Usa i file di progetto MSBuild per compilare i progetti.</span><span class="sxs-lookup"><span data-stu-id="f546a-111">How MSBuild uses MSBuild project files to build projects.</span></span>
> - <span data-ttu-id="f546a-112">Modo in cui MSBuild si integra con le tecnologie di distribuzione, come lo strumento di distribuzione di Internet Information Services (IIS) Web (distribuzione Web).</span><span class="sxs-lookup"><span data-stu-id="f546a-112">How MSBuild integrates with deployment technologies, like the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span>
> - <span data-ttu-id="f546a-113">Come comprendere i componenti chiave di un file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-113">How to understand the key components of a project file.</span></span>
> - <span data-ttu-id="f546a-114">Come è possibile utilizzare i file di progetto per compilare e distribuire applicazioni complesse.</span><span class="sxs-lookup"><span data-stu-id="f546a-114">How you can use project files to build and deploy complex applications.</span></span>


## <a name="msbuild-and-the-project-file"></a><span data-ttu-id="f546a-115">MSBuild e il File di progetto</span><span class="sxs-lookup"><span data-stu-id="f546a-115">MSBuild and the Project File</span></span>

<span data-ttu-id="f546a-116">Quando si creano e creare soluzioni in Visual Studio, Visual Studio Usa MSBuild per compilare ogni progetto nella soluzione.</span><span class="sxs-lookup"><span data-stu-id="f546a-116">When you create and build solutions in Visual Studio, Visual Studio uses MSBuild to build each project in your solution.</span></span> <span data-ttu-id="f546a-117">Ogni progetto di Visual Studio include un file di progetto MSBuild, con un'estensione di file che riflette il tipo di progetto&#x2014;, ad esempio, un progetto c# (con estensione csproj), un progetto di Visual Basic.NET (con estensione vbproj) o un progetto di database (con estensione dbproj).</span><span class="sxs-lookup"><span data-stu-id="f546a-117">Every Visual Studio project includes an MSBuild project file, with a file extension that reflects the type of project&#x2014;for example, a C# project (.csproj), a Visual Basic.NET project (.vbproj), or a database project (.dbproj).</span></span> <span data-ttu-id="f546a-118">Per compilare un progetto, MSBuild deve elaborare il file di progetto associato al progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-118">In order to build a project, MSBuild must process the project file associated with the project.</span></span> <span data-ttu-id="f546a-119">Il file di progetto è un documento XML che contiene tutte le informazioni e istruzioni che MSBuild è necessario per compilare il progetto, ad esempio il contenuto da includere, i requisiti di piattaforma, le informazioni di controllo delle versioni, server web o impostazioni server di database e il attività che devono essere eseguite.</span><span class="sxs-lookup"><span data-stu-id="f546a-119">The project file is an XML document that contains all the information and instructions that MSBuild needs in order to build your project, like the content to include, the platform requirements, versioning information, web server or database server settings, and the tasks that must be performed.</span></span>

<span data-ttu-id="f546a-120">I file di progetto MSBuild si basano le [dello schema XML di MSBuild](https://msdn.microsoft.com/library/5dy88c2e.aspx), e di conseguenza il processo di compilazione è completamente aperto e trasparente.</span><span class="sxs-lookup"><span data-stu-id="f546a-120">MSBuild project files are based on the [MSBuild XML schema](https://msdn.microsoft.com/library/5dy88c2e.aspx), and as a result the build process is entirely open and transparent.</span></span> <span data-ttu-id="f546a-121">Inoltre, non è necessario installare Visual Studio per poter utilizzare il motore MSBuild&#x2014;dell'eseguibile MSBuild.exe fa parte di .NET Framework ed è possibile eseguirlo da un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="f546a-121">In addition, you don't need to install Visual Studio in order to use the MSBuild engine&#x2014;the MSBuild.exe executable is part of the .NET Framework, and you can run it from a command prompt.</span></span> <span data-ttu-id="f546a-122">Gli sviluppatori, è possibile creare i proprio file di progetto MSBuild, usando lo schema XML di MSBuild, per imporre controllo con granularità fine e sofisticata come compilare e distribuire i progetti.</span><span class="sxs-lookup"><span data-stu-id="f546a-122">As a developer, you can craft your own MSBuild project files, using the MSBuild XML schema, to impose sophisticated and fine-grained control over how your projects are built and deployed.</span></span> <span data-ttu-id="f546a-123">Questi file di progetto personalizzati funzionano in esattamente allo stesso modo dei file di progetto Visual Studio genera automaticamente.</span><span class="sxs-lookup"><span data-stu-id="f546a-123">These custom project files work in exactly the same way as the project files that Visual Studio generates automatically.</span></span>

> [!NOTE]
> <span data-ttu-id="f546a-124">È anche possibile usare i file di progetto MSBuild con il servizio di compilazione Team in Team Foundation Server (TFS).</span><span class="sxs-lookup"><span data-stu-id="f546a-124">You can also use MSBuild project files with the Team Build service in Team Foundation Server (TFS).</span></span> <span data-ttu-id="f546a-125">Ad esempio, è possibile utilizzare i file di progetto in scenari di integrazione continua (CI) per automatizzare la distribuzione in un ambiente di test quando viene archiviato nuovo codice.</span><span class="sxs-lookup"><span data-stu-id="f546a-125">For example, you can use project files in continuous integration (CI) scenarios to automate deployment to a test environment when new code is checked in.</span></span> <span data-ttu-id="f546a-126">Per altre informazioni, vedere [configurazione di Team Foundation Server per la distribuzione di Web automatizzata](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="f546a-126">For more information, see [Configuring Team Foundation Server for Automated Web Deployment](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span></span>


### <a name="project-file-naming-conventions"></a><span data-ttu-id="f546a-127">Convenzioni di denominazione di File di progetto</span><span class="sxs-lookup"><span data-stu-id="f546a-127">Project File Naming Conventions</span></span>

<span data-ttu-id="f546a-128">Quando si creano i proprio file di progetto, è possibile usare qualsiasi estensione di file desiderato.</span><span class="sxs-lookup"><span data-stu-id="f546a-128">When you create your own project files, you can use any file extension you like.</span></span> <span data-ttu-id="f546a-129">Tuttavia, per semplificare le soluzioni ad altri utenti, è consigliabile usare tali convenzioni comuni:</span><span class="sxs-lookup"><span data-stu-id="f546a-129">However, to make your solutions easier for others to understand, you should use these common conventions:</span></span>

- <span data-ttu-id="f546a-130">Quando si crea un file di progetto che compila i progetti, usare l'estensione proj.</span><span class="sxs-lookup"><span data-stu-id="f546a-130">Use the .proj extension when you create a project file that builds projects.</span></span>
- <span data-ttu-id="f546a-131">Usare l'estensione con estensione targets quando si crea un file di progetto riutilizzabili per importare in altri file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-131">Use the .targets extension when you create a reusable project file to import into other project files.</span></span> <span data-ttu-id="f546a-132">File con estensione targets in genere non vengono compilati alcuna operazione se stessi, semplicemente contengono istruzioni che è possibile importare i file con estensione proj.</span><span class="sxs-lookup"><span data-stu-id="f546a-132">Files with a .targets extension typically don't build anything themselves, they simply contain instructions that you can import into your .proj files.</span></span>

### <a name="integration-with-deployment-technologies"></a><span data-ttu-id="f546a-133">Integrazione con tecnologie di distribuzione</span><span class="sxs-lookup"><span data-stu-id="f546a-133">Integration with Deployment Technologies</span></span>

<span data-ttu-id="f546a-134">Se è lavorato con i progetti applicazione web in Visual Studio 2010, come le applicazioni web ASP.NET e applicazioni web ASP.NET MVC, si saprà che questi progetti includono supporto incorporato per l'assemblaggio e distribuzione dell'applicazione web in un ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-134">If you've worked with web application projects in Visual Studio 2010, like ASP.NET web applications and ASP.NET MVC web applications, you'll know that these projects include built-in support for packaging and deploying the web application to a target environment.</span></span> <span data-ttu-id="f546a-135">Il **delle proprietà** pagine per questi progetti includono **pubblicazione/creazione pacchetto Web** e **pubblicazione/creazione pacchetto SQL** schede che è possibile usare per configurare come i componenti del pacchetto di installazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-135">The **Properties** pages for these projects include **Package/Publish Web** and **Package/Publish SQL** tabs that you can use to configure how the components of your application are packaged and deployed.</span></span> <span data-ttu-id="f546a-136">Viene illustrato il **pubblicazione/creazione pacchetto Web** scheda:</span><span class="sxs-lookup"><span data-stu-id="f546a-136">This shows the **Package/Publish Web** tab:</span></span>

![](understanding-the-project-file/_static/image1.png)

<span data-ttu-id="f546a-137">La tecnologia su queste funzionalità è noto come Pipeline di pubblicazione sul Web (WPP).</span><span class="sxs-lookup"><span data-stu-id="f546a-137">The underlying technology behind these capabilities is known as the Web Publishing Pipeline (WPP).</span></span> <span data-ttu-id="f546a-138">WPP offre essenzialmente MSBuild e [distribuzione Web](https://go.microsoft.com/?linkid=9805122) interagiscono per fornire un processo di compilazione, distribuzione e pacchetto completo per le applicazioni web.</span><span class="sxs-lookup"><span data-stu-id="f546a-138">The WPP essentially brings MSBuild and [Web Deploy](https://go.microsoft.com/?linkid=9805122) together to provide a complete build, package, and deployment process for your web applications.</span></span>

<span data-ttu-id="f546a-139">La buona notizia è che è possibile sfruttare i vantaggi dei punti di integrazione che WPP fornisce quando si creano file di progetto personalizzati per i progetti web.</span><span class="sxs-lookup"><span data-stu-id="f546a-139">The good news is that you can take advantage of the integration points that the WPP provides when you create custom project files for web projects.</span></span> <span data-ttu-id="f546a-140">È possibile includere istruzioni per la distribuzione nel file di progetto, che consente di compilare i progetti, creare pacchetti di distribuzione web e installare questi pacchetti su server remoti tramite un singolo file di progetto e una singola chiamata a MSBuild.</span><span class="sxs-lookup"><span data-stu-id="f546a-140">You can include deployment instructions in your project file, which allows you to build your projects, create web deployment packages, and install these packages on remote servers through a single project file and a single call to MSBuild.</span></span> <span data-ttu-id="f546a-141">È inoltre possibile chiamare qualsiasi altro file eseguibili come parte del processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-141">You can also call any other executables as part of your build process.</span></span> <span data-ttu-id="f546a-142">Ad esempio, è possibile eseguire lo strumento da riga di comando VSDBCMD.exe per distribuire un database da un file di schema.</span><span class="sxs-lookup"><span data-stu-id="f546a-142">For example, you can run the VSDBCMD.exe command-line tool to deploy a database from a schema file.</span></span> <span data-ttu-id="f546a-143">Nel corso di questo argomento, si noterà come è possibile sfruttare queste funzionalità per soddisfare i requisiti degli scenari di utilizzo dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-143">Over the course of this topic, you'll see how you can take advantage of these capabilities to meet the requirements of your enterprise deployment scenarios.</span></span>

> [!NOTE]
> <span data-ttu-id="f546a-144">Per altre informazioni su come funziona il processo di distribuzione dell'applicazione web, vedere [Panoramica della distribuzione progetto applicazione Web ASP.NET](https://msdn.microsoft.com/library/dd394698.aspx).</span><span class="sxs-lookup"><span data-stu-id="f546a-144">For more information on how the web application deployment process works, see [ASP.NET Web Application Project Deployment Overview](https://msdn.microsoft.com/library/dd394698.aspx).</span></span>


## <a name="the-anatomy-of-a-project-file"></a><span data-ttu-id="f546a-145">Anatomia di un File di progetto</span><span class="sxs-lookup"><span data-stu-id="f546a-145">The Anatomy of a Project File</span></span>

<span data-ttu-id="f546a-146">Prima di esaminare il processo di compilazione in modo più dettagliato, vale la pena richiede alcuni minuti per acquisire familiarità con la struttura di base di un file di progetto MSBuild.</span><span class="sxs-lookup"><span data-stu-id="f546a-146">Before you look at the build process in more detail, it's worth taking a few moments to familiarize yourself with the basic structure of an MSBuild project file.</span></span> <span data-ttu-id="f546a-147">In questa sezione viene fornita una panoramica degli elementi più comuni che possono verificare in caso esaminare, modificare o creare un file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-147">This section provides an overview of the more common elements that you'll encounter when you review, edit, or create a project file.</span></span> <span data-ttu-id="f546a-148">In particolare, si apprenderà come:</span><span class="sxs-lookup"><span data-stu-id="f546a-148">In particular, you'll learn:</span></span>

- <span data-ttu-id="f546a-149">Come usare *proprietà* per gestire le variabili per il processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-149">How to use *properties* to manage variables for the build process.</span></span>
- <span data-ttu-id="f546a-150">Come usare *elementi* per identificare l'input al processo di compilazione, ad esempio i file di codice.</span><span class="sxs-lookup"><span data-stu-id="f546a-150">How to use *items* to identify the inputs to the build process, like code files.</span></span>
- <span data-ttu-id="f546a-151">Come usare *destinazioni* e *attività* ricevano le istruzioni di esecuzione a MSBuild, tramite *proprietà* e *elementi* definito altrove nel file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-151">How to use *targets* and *tasks* to provide execution instructions to MSBuild, using *properties* and *items* defined elsewhere in the project file.</span></span>

<span data-ttu-id="f546a-152">Ciò viene illustrata la relazione tra gli elementi chiave in un file di progetto MSBuild:</span><span class="sxs-lookup"><span data-stu-id="f546a-152">This shows the relationship between the key elements in an MSBuild project file:</span></span>

![](understanding-the-project-file/_static/image2.png)

### <a name="the-project-element"></a><span data-ttu-id="f546a-153">L'elemento di progetto</span><span class="sxs-lookup"><span data-stu-id="f546a-153">The Project Element</span></span>

<span data-ttu-id="f546a-154">Il [progetto](https://msdn.microsoft.com/library/bcxfsh87.aspx) elemento è l'elemento radice di ogni file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-154">The [Project](https://msdn.microsoft.com/library/bcxfsh87.aspx) element is the root element of every project file.</span></span> <span data-ttu-id="f546a-155">Oltre a identificare il XML schema per il file di progetto, il **progetto** elemento può includere attributi per specificare i punti di ingresso per il processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-155">In addition to identifying the XML schema for the project file, the **Project** element can include attributes to specify the entry points for the build process.</span></span> <span data-ttu-id="f546a-156">Ad esempio, nelle [soluzione di esempio Contact Manager](the-contact-manager-solution.md), il *Publish.proj* file specifica che la compilazione deve essere avviato tramite la chiamata di destinazione denominata **FullPublish**.</span><span class="sxs-lookup"><span data-stu-id="f546a-156">For example, in the [Contact Manager sample solution](the-contact-manager-solution.md), the *Publish.proj* file specifies that the build should start by calling the target named **FullPublish**.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample1.xml)]


### <a name="properties-and-conditions"></a><span data-ttu-id="f546a-157">Le proprietà e le condizioni</span><span class="sxs-lookup"><span data-stu-id="f546a-157">Properties and Conditions</span></span>

<span data-ttu-id="f546a-158">In genere un file di progetto deve fornire un numero elevato di tipi diversi di informazioni per compilare e distribuire i progetti correttamente.</span><span class="sxs-lookup"><span data-stu-id="f546a-158">A project file typically needs to provide lots of different pieces of information in order to successfully build and deploy your projects.</span></span> <span data-ttu-id="f546a-159">Questi tipi di informazioni può includere i nomi dei server, le stringhe di connessione, le credenziali, le configurazioni della build, percorsi dei file di origine e di destinazione e qualsiasi altra informazione da includere per supportare la personalizzazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-159">These pieces of information could include server names, connection strings, credentials, build configurations, source and destination file paths, and any other information you want to include to support customization.</span></span> <span data-ttu-id="f546a-160">In un file di progetto, è necessario definire le proprietà all'interno di un [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) elemento.</span><span class="sxs-lookup"><span data-stu-id="f546a-160">In a project file, properties must be defined within a [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) element.</span></span> <span data-ttu-id="f546a-161">Proprietà di MSBuild sono costituiti da coppie chiave-valore.</span><span class="sxs-lookup"><span data-stu-id="f546a-161">MSBuild properties consist of key-value pairs.</span></span> <span data-ttu-id="f546a-162">All'interno di **PropertyGroup** elemento, il nome dell'elemento definisce la chiave di proprietà e il contenuto dell'elemento definisce il valore della proprietà.</span><span class="sxs-lookup"><span data-stu-id="f546a-162">Within the **PropertyGroup** element, the element name defines the property key and the content of the element defines the property value.</span></span> <span data-ttu-id="f546a-163">Ad esempio, è possibile definire le proprietà denominate **ServerName** e **ConnectionString** per archiviare una stringa di connessione e nome del server statico.</span><span class="sxs-lookup"><span data-stu-id="f546a-163">For example, you could define properties named **ServerName** and **ConnectionString** to store a static server name and connection string.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample2.xml)]


<span data-ttu-id="f546a-164">Per recuperare un valore della proprietà, si utilizza il formato \*\*$(***NomeProprietà***) \* \* *.*</span><span class="sxs-lookup"><span data-stu-id="f546a-164">To retrieve a property value, you use the format \**$(***PropertyName***)\*\*\*.*</span></span> <span data-ttu-id="f546a-165">Ad esempio, per recuperare il valore della **ServerName** proprietà, digitare:</span><span class="sxs-lookup"><span data-stu-id="f546a-165">For example, to retrieve the value of the **ServerName** property, you would type:</span></span>


[!code-powershell[Main](understanding-the-project-file/samples/sample3.ps1)]


> [!NOTE]
> <span data-ttu-id="f546a-166">Si noterà esempi su come e quando usare i valori delle proprietà più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="f546a-166">You'll see examples of how and when to use property values later in this topic.</span></span>


<span data-ttu-id="f546a-167">Incorporare le informazioni come proprietà statiche in un file di progetto non è sempre l'approccio ideale per la gestione del processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-167">Embedding information as static properties in a project file is not always the ideal approach to managing the build process.</span></span> <span data-ttu-id="f546a-168">In molti scenari, vorrai ottenere le informazioni provenienti da altre origini oppure permettere all'utente di specificare le informazioni dal prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="f546a-168">In a lot of scenarios, you'll want to obtain the information from other sources or empower the user to provide the information from the command prompt.</span></span> <span data-ttu-id="f546a-169">MSBuild consente di specificare qualsiasi valore della proprietà come un parametro della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="f546a-169">MSBuild allows you to specify any property value as a command-line parameter.</span></span> <span data-ttu-id="f546a-170">Ad esempio, l'utente è stato possibile fornire un valore per **ServerName** quando direste esegue MSBuild.exe dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="f546a-170">For example, the user could provide a value for **ServerName** when he or she runs MSBuild.exe from the command line.</span></span>


[!code-console[Main](understanding-the-project-file/samples/sample4.cmd)]


> [!NOTE]
> <span data-ttu-id="f546a-171">Per altre informazioni sugli argomenti e parametri utilizzabili MSBuild.exe, vedere [riferimenti alla riga di comando di MSBuild](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="f546a-171">For more information on the arguments and switches you can use with MSBuild.exe, see [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>


<span data-ttu-id="f546a-172">È possibile usare la stessa sintassi di proprietà per ottenere i valori delle variabili di ambiente e le proprietà del progetto incorporati.</span><span class="sxs-lookup"><span data-stu-id="f546a-172">You can use the same property syntax to obtain the values of environment variables and built-in project properties.</span></span> <span data-ttu-id="f546a-173">Un numero elevato di proprietà usate di frequente è definito per l'utente e di utilizzarli nei file di progetto, includendo il nome di parametro in questione.</span><span class="sxs-lookup"><span data-stu-id="f546a-173">Lots of commonly used properties are defined for you, and you can use them in your project files by including the relevant parameter name.</span></span> <span data-ttu-id="f546a-174">Ad esempio, per recuperare la piattaforma del progetto corrente&#x2014;, ad esempio, **x86** oppure **AnyCpu**&#x2014;è possibile includere il **$ (Platform)** riferimento alla proprietà in file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-174">For example, to retrieve the current project platform&#x2014;for example, **x86** or **AnyCpu**&#x2014;you can include the **$(Platform)** property reference in your project file.</span></span> <span data-ttu-id="f546a-175">Per altre informazioni, vedere [macro per comandi di compilazione e la proprietà](https://msdn.microsoft.com/library/c02as0cs.aspx), [proprietà di progetto MSBuild comuni](https://msdn.microsoft.com/library/bb629394.aspx), e [le proprietà riservate](https://msdn.microsoft.com/library/ms164309.aspx).</span><span class="sxs-lookup"><span data-stu-id="f546a-175">For more information, see [Macros for Build Commands and Properties](https://msdn.microsoft.com/library/c02as0cs.aspx), [Common MSBuild Project Properties](https://msdn.microsoft.com/library/bb629394.aspx), and [Reserved Properties](https://msdn.microsoft.com/library/ms164309.aspx).</span></span>

<span data-ttu-id="f546a-176">Le proprietà vengono spesso usate in combinazione con *condizioni*.</span><span class="sxs-lookup"><span data-stu-id="f546a-176">Properties are often used in conjunction with *conditions*.</span></span> <span data-ttu-id="f546a-177">La maggior parte degli elementi di MSBuild supportano la **condizione** attributo, che consente di specificare i criteri su cui MSBuild deve valutare l'elemento.</span><span class="sxs-lookup"><span data-stu-id="f546a-177">Most MSBuild elements support the **Condition** attribute, which lets you specify the criteria upon which MSBuild should evaluate the element.</span></span> <span data-ttu-id="f546a-178">Ad esempio, prendere in considerazione questa definizione delle proprietà:</span><span class="sxs-lookup"><span data-stu-id="f546a-178">For example, consider this property definition:</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample5.xml)]


<span data-ttu-id="f546a-179">Quando MSBuild elabora questa definizione delle proprietà, viene verificata per vedere se un **$(OutputRoot)** valore della proprietà è disponibile.</span><span class="sxs-lookup"><span data-stu-id="f546a-179">When MSBuild processes this property definition, it first checks to see whether an **$(OutputRoot)** property value is available.</span></span> <span data-ttu-id="f546a-180">Se è vuoto il valore della proprietà&#x2014;in altre parole, l'utente non ha fornito un valore per questa proprietà&#x2014;la condizione viene valutata **true** e il valore della proprietà è impostato su **... \Publish\Out**. Se l'utente ha fornito un valore per questa proprietà, la condizione viene valutata **false** e non viene usato il valore della proprietà statica.</span><span class="sxs-lookup"><span data-stu-id="f546a-180">If the property value is blank&#x2014;in other words, the user hasn't provided a value for this property&#x2014;the condition evaluates to **true** and the property value is set to **..\Publish\Out**. If the user has provided a value for this property, the condition evaluates to **false** and the static property value is not used.</span></span>

<span data-ttu-id="f546a-181">Per altre informazioni sulle diverse modalità in cui è possibile specificare le condizioni, vedere [condizioni di MSBuild](https://msdn.microsoft.com/library/7szfhaft.aspx).</span><span class="sxs-lookup"><span data-stu-id="f546a-181">For more information on the different ways in which you can specify conditions, see [MSBuild Conditions](https://msdn.microsoft.com/library/7szfhaft.aspx).</span></span>

### <a name="items-and-item-groups"></a><span data-ttu-id="f546a-182">Gli elementi e gruppi di elementi</span><span class="sxs-lookup"><span data-stu-id="f546a-182">Items and Item Groups</span></span>

<span data-ttu-id="f546a-183">Uno dei ruoli del file di progetto importanti consiste nel definire gli input per il processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-183">One of the important roles of the project file is to define the inputs to the build process.</span></span> <span data-ttu-id="f546a-184">I dati di input sono in genere, i file&#x2014;codice file, i file di configurazione, file di comando e qualsiasi altro file che è necessario elaborare o copia come parte del processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-184">Typically, these inputs are files&#x2014;code files, configuration files, command files, and any other files that you need to process or copy as part of the build process.</span></span> <span data-ttu-id="f546a-185">Nello schema di progetto MSBuild, i dati di input sono rappresentati da [elemento](https://msdn.microsoft.com/library/ms164283.aspx) elementi.</span><span class="sxs-lookup"><span data-stu-id="f546a-185">In the MSBuild project schema, these inputs are represented by [Item](https://msdn.microsoft.com/library/ms164283.aspx) elements.</span></span> <span data-ttu-id="f546a-186">In un file di progetto, è necessario definire gli elementi all'interno di un' [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) elemento.</span><span class="sxs-lookup"><span data-stu-id="f546a-186">In a project file, items must be defined within an [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) element.</span></span> <span data-ttu-id="f546a-187">Analogamente **proprietà** gli elementi, è possibile assegnare un nome un **elemento** elemento tuttavia si desidera.</span><span class="sxs-lookup"><span data-stu-id="f546a-187">Just like **Property** elements, you can name an **Item** element however you like.</span></span> <span data-ttu-id="f546a-188">Tuttavia, è necessario specificare un **inclusione** attributo per identificare il file o carattere jolly che rappresenta l'elemento.</span><span class="sxs-lookup"><span data-stu-id="f546a-188">However, you must specify an **Include** attribute to identify the file or wildcard that the item represents.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample6.xml)]


<span data-ttu-id="f546a-189">Specificando multiplo **elemento** elementi con lo stesso nome, in modo efficace si sta creando un elenco di risorse denominato.</span><span class="sxs-lookup"><span data-stu-id="f546a-189">By specifying multiple **Item** elements with the same name, you're effectively creating a named list of resources.</span></span> <span data-ttu-id="f546a-190">Un buon metodo per vedere un esempio pratico è dare uno sguardo all'interno di uno dei file di progetto creato da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f546a-190">A good way to see this in action is to take a look inside one of the project files that Visual Studio creates.</span></span> <span data-ttu-id="f546a-191">Ad esempio, il *ContactManager.Mvc.csproj* file nella soluzione di esempio sono inclusi numerosi gruppi di elementi, ognuno con diverse denominate **elemento** elementi.</span><span class="sxs-lookup"><span data-stu-id="f546a-191">For example, the *ContactManager.Mvc.csproj* file in the sample solution includes a lot of item groups, each with several identically named **Item** elements.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample7.xml)]


<span data-ttu-id="f546a-192">In questo modo, il file di progetto è che indicano a MSBuild per costruire gli elenchi di file che devono essere elaborati nello stesso modo di&#x2014;il **riferimento** elenco include gli assembly che devono essere presenti per una compilazione corretta, il  **Compilare** elenco include i file di codice che devono essere compilati, e il **contenuto** elenco include le risorse che devono essere copiate senza modificate.</span><span class="sxs-lookup"><span data-stu-id="f546a-192">In this way, the project file is instructing MSBuild to construct lists of files that need to be processed in the same way&#x2014;the **Reference** list includes assemblies that must be in place for a successful build, the **Compile** list includes code files that must be compiled, and the **Content** list includes resources that must be copied unaltered.</span></span> <span data-ttu-id="f546a-193">Esamineremo come il processo di compilazione fa riferimento e utilizza questi elementi più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="f546a-193">We'll look at how the build process references and uses these items later in this topic.</span></span>

<span data-ttu-id="f546a-194">Possono includere anche elementi Item [ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx) gli elementi figlio.</span><span class="sxs-lookup"><span data-stu-id="f546a-194">Item elements can also include [ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx) child elements.</span></span> <span data-ttu-id="f546a-195">Si tratta di coppie chiave-valore definite dall'utente ed essenzialmente rappresentano le proprietà specifiche per quell'elemento.</span><span class="sxs-lookup"><span data-stu-id="f546a-195">These are user-defined key-value pairs and essentially represent properties that are specific to that item.</span></span> <span data-ttu-id="f546a-196">Ad esempio, molti il **compilare** gli elementi nel file di progetto includono **DependentUpon** gli elementi figlio.</span><span class="sxs-lookup"><span data-stu-id="f546a-196">For example, a lot of the **Compile** item elements in the project file include **DependentUpon** child elements.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample8.xml)]


> [!NOTE]
> <span data-ttu-id="f546a-197">Oltre ai metadati degli elementi creati dall'utente, tutti gli elementi vengono assegnati diversi metadati comuni al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-197">In addition to user-created item metadata, all items are assigned various common metadata on creation.</span></span> <span data-ttu-id="f546a-198">Per altre informazioni, vedere [Metadati noti degli elementi](https://msdn.microsoft.com/library/ms164313.aspx).</span><span class="sxs-lookup"><span data-stu-id="f546a-198">For more information, see [Well-known Item Metadata](https://msdn.microsoft.com/library/ms164313.aspx).</span></span>


<span data-ttu-id="f546a-199">È possibile creare **ItemGroup** gli elementi all'interno del livello di radice **Project** elemento o all'interno di specifiche **destinazione** elementi.</span><span class="sxs-lookup"><span data-stu-id="f546a-199">You can create **ItemGroup** elements within the root-level **Project** element or within specific **Target** elements.</span></span> <span data-ttu-id="f546a-200">**Elemento ItemGroup** supportano anche gli elementi **condizione** attributi, che consente di personalizzare l'input al processo di compilazione in base alle condizioni, ad esempio la configurazione di progetto o la piattaforma.</span><span class="sxs-lookup"><span data-stu-id="f546a-200">**ItemGroup** elements also support **Condition** attributes, which lets you tailor the inputs to the build process according to conditions like the project configuration or platform.</span></span>

### <a name="targets-and-tasks"></a><span data-ttu-id="f546a-201">Destinazioni e attività</span><span class="sxs-lookup"><span data-stu-id="f546a-201">Targets and Tasks</span></span>

<span data-ttu-id="f546a-202">Nello schema di MSBuild, un [attività](https://msdn.microsoft.com/library/77f2hx1s.aspx) elemento rappresenta un'istruzione singola build (o attività).</span><span class="sxs-lookup"><span data-stu-id="f546a-202">In the MSBuild schema, a [Task](https://msdn.microsoft.com/library/77f2hx1s.aspx) element represents an individual build instruction (or task).</span></span> <span data-ttu-id="f546a-203">MSBuild include una vasta gamma di attività predefinite.</span><span class="sxs-lookup"><span data-stu-id="f546a-203">MSBuild includes a multitude of predefined tasks.</span></span> <span data-ttu-id="f546a-204">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f546a-204">For example:</span></span>

- <span data-ttu-id="f546a-205">Il **copia** attività Copia file in una nuova posizione.</span><span class="sxs-lookup"><span data-stu-id="f546a-205">The **Copy** task copies files to a new location.</span></span>
- <span data-ttu-id="f546a-206">Il **Csc** attività richiama il compilatore Visual c#.</span><span class="sxs-lookup"><span data-stu-id="f546a-206">The **Csc** task invokes the Visual C# compiler.</span></span>
- <span data-ttu-id="f546a-207">Il **Vbc** attività richiama il compilatore Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="f546a-207">The **Vbc** task invokes the Visual Basic compiler.</span></span>
- <span data-ttu-id="f546a-208">Il **Exec** attività esegue un programma specifico.</span><span class="sxs-lookup"><span data-stu-id="f546a-208">The **Exec** task runs a specified program.</span></span>
- <span data-ttu-id="f546a-209">Il **messaggio** attività scrive un messaggio a un logger.</span><span class="sxs-lookup"><span data-stu-id="f546a-209">The **Message** task writes a message to a logger.</span></span>

> [!NOTE]
> <span data-ttu-id="f546a-210">Per informazioni dettagliate delle attività che sono disponibili per impostazione predefinita, vedere [riferimenti delle attività MSBuild](https://msdn.microsoft.com/library/7z253716.aspx).</span><span class="sxs-lookup"><span data-stu-id="f546a-210">For full details of the tasks that are available out of the box, see [MSBuild Task Reference](https://msdn.microsoft.com/library/7z253716.aspx).</span></span> <span data-ttu-id="f546a-211">Per altre informazioni sulle attività, incluse quelle sulla creazione di attività personalizzate, vedere [attività MSBuild](https://msdn.microsoft.com/library/ms171466.aspx).</span><span class="sxs-lookup"><span data-stu-id="f546a-211">For more information on tasks, including how to create your own custom tasks, see [MSBuild Tasks](https://msdn.microsoft.com/library/ms171466.aspx).</span></span>


<span data-ttu-id="f546a-212">Attività devono essere contenute sempre all'interno [destinazione](https://msdn.microsoft.com/library/t50z2hka.aspx) elementi.</span><span class="sxs-lookup"><span data-stu-id="f546a-212">Tasks must always be contained within [Target](https://msdn.microsoft.com/library/t50z2hka.aspx) elements.</span></span> <span data-ttu-id="f546a-213">Oggetto **destinazione** elemento è un set di uno o più attività che vengono eseguite in sequenza e un file di progetto può contenere più destinazioni.</span><span class="sxs-lookup"><span data-stu-id="f546a-213">A **Target** element is a set of one or more tasks that are executed sequentially, and a project file can contain multiple targets.</span></span> <span data-ttu-id="f546a-214">Quando si desidera eseguire un'attività o un set di attività, si richiama la destinazione che li contiene.</span><span class="sxs-lookup"><span data-stu-id="f546a-214">When you want to run a task, or a set of tasks, you invoke the target that contains them.</span></span> <span data-ttu-id="f546a-215">Si supponga, ad esempio, che si dispone di un file di progetto semplice che registri un messaggio.</span><span class="sxs-lookup"><span data-stu-id="f546a-215">For example, suppose you have a simple project file that logs a message.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample9.xml)]


<span data-ttu-id="f546a-216">È possibile richiamare la destinazione dalla riga di comando, usando il **/t** per specificare la destinazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-216">You can invoke the target from the command line, by using the **/t** switch to specify the target.</span></span>


[!code-console[Main](understanding-the-project-file/samples/sample10.cmd)]


<span data-ttu-id="f546a-217">In alternativa, è possibile aggiungere un **DefaultTargets** attributo il **progetto** elemento, per specificare le destinazioni che si vuole richiamare.</span><span class="sxs-lookup"><span data-stu-id="f546a-217">Alternatively, you can add a **DefaultTargets** attribute to the **Project** element, to specify the targets that you want to invoke.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample11.xml)]


<span data-ttu-id="f546a-218">In questo caso, non devi specificare la destinazione dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="f546a-218">In this case, you don't need to specify the target from the command line.</span></span> <span data-ttu-id="f546a-219">È possibile specificare semplicemente il file di progetto e MSBuild richiamerà il **FullPublish** destinazione per l'utente.</span><span class="sxs-lookup"><span data-stu-id="f546a-219">You can simply specify the project file, and MSBuild will invoke the **FullPublish** target for you.</span></span>


[!code-console[Main](understanding-the-project-file/samples/sample12.cmd)]


<span data-ttu-id="f546a-220">Attività e destinazioni può includere **condizione** attributi.</span><span class="sxs-lookup"><span data-stu-id="f546a-220">Both targets and tasks can include **Condition** attributes.</span></span> <span data-ttu-id="f546a-221">Di conseguenza, è possibile omettere le singole attività o destinazioni intere se vengono soddisfatte determinate condizioni.</span><span class="sxs-lookup"><span data-stu-id="f546a-221">As such, you can choose to omit entire targets or individual tasks if certain conditions are met.</span></span>

<span data-ttu-id="f546a-222">In generale, quando si creano utili attività e destinazioni, è necessario fare riferimento alle proprietà e gli elementi che sono stati definiti in un' posizione nel file di progetto:</span><span class="sxs-lookup"><span data-stu-id="f546a-222">Generally speaking, when you create useful tasks and targets, you'll need to refer to the properties and items that you've defined elsewhere in the project file:</span></span>

- <span data-ttu-id="f546a-223">Per utilizzare un valore della proprietà, digitare **$(***PropertyName***)**, dove *PropertyName* è il nome del **proprietà** elemento o il nome del parametro.</span><span class="sxs-lookup"><span data-stu-id="f546a-223">To use a property value, type **$(***PropertyName***)**, where *PropertyName* is the name of the **Property** element or the name of the parameter.</span></span>
- <span data-ttu-id="f546a-224">Per usare un elemento, digitare **@(***ItemName***)**, dove *ItemName* è il nome del **elemento** elemento.</span><span class="sxs-lookup"><span data-stu-id="f546a-224">To use an item, type **@(***ItemName***)**, where *ItemName* is the name of the **Item** element.</span></span>

> [!NOTE]
> <span data-ttu-id="f546a-225">Tenere presente che se si creano più elementi con lo stesso nome, si sta creando un elenco.</span><span class="sxs-lookup"><span data-stu-id="f546a-225">Remember that if you create multiple items with the same name, you're building a list.</span></span> <span data-ttu-id="f546a-226">Al contrario, se si creano più proprietà con lo stesso nome, l'ultimo valore della proprietà è fornire sovrascrive qualsiasi proprietà precedente con lo stesso nome&#x2014;una proprietà può contenere solo un singolo valore.</span><span class="sxs-lookup"><span data-stu-id="f546a-226">In contrast, if you create multiple properties with the same name, the last property value you provide will overwrite any previous properties with the same name&#x2014;a property can only contain a single value.</span></span>


<span data-ttu-id="f546a-227">Ad esempio, nelle *Publish.proj* file nella soluzione di esempio, esaminiamo il **BuildProjects** destinazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-227">For example, in the *Publish.proj* file in the sample solution, take a look at the **BuildProjects** target.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample13.xml)]


<span data-ttu-id="f546a-228">In questo esempio, è possibile osservare questi punti importanti:</span><span class="sxs-lookup"><span data-stu-id="f546a-228">In this sample, you can observe these key points:</span></span>

- <span data-ttu-id="f546a-229">Se il **BuildingInTeamBuild** parametro è specificato e ha il valore **true**, nessuna attività all'interno di questa destinazione verrà eseguita.</span><span class="sxs-lookup"><span data-stu-id="f546a-229">If the **BuildingInTeamBuild** parameter is specified and has a value of **true**, none of the tasks within this target will be executed.</span></span>
- <span data-ttu-id="f546a-230">La destinazione contiene una singola istanza di [MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) attività.</span><span class="sxs-lookup"><span data-stu-id="f546a-230">The target contains a single instance of the [MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) task.</span></span> <span data-ttu-id="f546a-231">Questa attività consente di compilare gli altri progetti MSBuild.</span><span class="sxs-lookup"><span data-stu-id="f546a-231">This task lets you build other MSBuild projects.</span></span>
- <span data-ttu-id="f546a-232">Il **ProjectsToBuild** elemento viene passato all'attività.</span><span class="sxs-lookup"><span data-stu-id="f546a-232">The **ProjectsToBuild** item is passed to the task.</span></span> <span data-ttu-id="f546a-233">Questo elemento è stato possibile rappresentano un elenco dei file progetto o una soluzione, tutto definiti da **ProjectsToBuild** elementi all'interno di un gruppo di elementi item.</span><span class="sxs-lookup"><span data-stu-id="f546a-233">This item could represent a list of project or solution files, all defined by **ProjectsToBuild** item elements within an item group.</span></span> <span data-ttu-id="f546a-234">In questo caso, il **ProjectsToBuild** elemento fa riferimento a un singolo file di soluzione.</span><span class="sxs-lookup"><span data-stu-id="f546a-234">In this case, the **ProjectsToBuild** item refers to a single solution file.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample14.xml)]
- <span data-ttu-id="f546a-235">I valori delle proprietà passati per il **MSBuild** attività include parametri denominati **OutputRoot** e **configurazione**.</span><span class="sxs-lookup"><span data-stu-id="f546a-235">The property values passed to the **MSBuild** task include parameters named **OutputRoot** and **Configuration**.</span></span> <span data-ttu-id="f546a-236">Questi vengono impostati se vengono forniti i valori dei parametri o valori di proprietà statica se non sono.</span><span class="sxs-lookup"><span data-stu-id="f546a-236">These are set to parameter values if they are provided, or static property values if they are not.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample15.xml)]

<span data-ttu-id="f546a-237">È anche possibile vedere che il **MSBuild** attività richiama una destinazione denominata **compilazione**.</span><span class="sxs-lookup"><span data-stu-id="f546a-237">You can also see that the **MSBuild** task invokes a target named **Build**.</span></span> <span data-ttu-id="f546a-238">Questa è una delle diverse destinazioni predefinite che vengono ampiamente usate nel file di progetto di Visual Studio e sono disponibile nei file di progetto personalizzati, ad esempio **compilare**, **Pulisci**, **ricompilare**, e **pubblicare**.</span><span class="sxs-lookup"><span data-stu-id="f546a-238">This is one of several built-in targets that are widely used in Visual Studio project files and are available to you in your custom project files, like **Build**, **Clean**, **Rebuild**, and **Publish**.</span></span> <span data-ttu-id="f546a-239">Verranno fornite altre informazioni sull'uso di destinazioni e attività per controllare il processo di compilazione e sui **MSBuild** di attività, in particolare, più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="f546a-239">You'll learn more about using targets and tasks to control the build process, and about the **MSBuild** task in particular, later in this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="f546a-240">Per altre informazioni sulle destinazioni, vedere [destinazioni di MSBuild](https://msdn.microsoft.com/library/ms171462.aspx).</span><span class="sxs-lookup"><span data-stu-id="f546a-240">For more information on targets, see [MSBuild Targets](https://msdn.microsoft.com/library/ms171462.aspx).</span></span>


## <a name="splitting-project-files-to-support-multiple-environments"></a><span data-ttu-id="f546a-241">Suddivisione dei file di progetto per supportare più ambienti</span><span class="sxs-lookup"><span data-stu-id="f546a-241">Splitting Project Files to Support Multiple Environments</span></span>

<span data-ttu-id="f546a-242">Si supponga che si desidera essere in grado di distribuire una soluzione in più ambienti, ad esempio un server di prova, piattaforme di gestione temporanea e gli ambienti di produzione.</span><span class="sxs-lookup"><span data-stu-id="f546a-242">Suppose you want to be able to deploy a solution to multiple environments, like test servers, staging platforms, and production environments.</span></span> <span data-ttu-id="f546a-243">La configurazione può variare notevolmente tra questi ambienti&#x2014;non solo in termini di nomi di server, le stringhe di connessione e così via, ma anche potenzialmente in termini di credenziali, le impostazioni di sicurezza e molti altri fattori.</span><span class="sxs-lookup"><span data-stu-id="f546a-243">The configuration may vary substantially between these environments&#x2014;not just in terms of server names, connection strings, and so on, but also potentially in terms of credentials, security settings, and lots of other factors.</span></span> <span data-ttu-id="f546a-244">Se è necessario eseguire questa operazione regolarmente, non è molto più agevole modificare più proprietà nel file di progetto ogni volta che si passa all'ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-244">If you need to do this regularly, it's not really expedient to edit multiple properties in your project file every time you switch the target environment.</span></span> <span data-ttu-id="f546a-245">Non è una soluzione ideale per richiedere un elenco di valori di proprietà devono essere fornite al processo di compilazione infinito.</span><span class="sxs-lookup"><span data-stu-id="f546a-245">Nor is it an ideal solution to require an endless list of property values to be provided to the build process.</span></span>

<span data-ttu-id="f546a-246">Fortunatamente è un'alternativa.</span><span class="sxs-lookup"><span data-stu-id="f546a-246">Fortunately there is an alternative.</span></span> <span data-ttu-id="f546a-247">MSBuild consente di dividere la configurazione della build su più file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-247">MSBuild lets you split your build configuration across multiple project files.</span></span> <span data-ttu-id="f546a-248">Per visualizzarne il funzionamento, nella soluzione di esempio, si noti che sono presenti due file di progetto personalizzati:</span><span class="sxs-lookup"><span data-stu-id="f546a-248">To see how this works, in the sample solution, notice that there are two custom project files:</span></span>

- <span data-ttu-id="f546a-249">*Publish.proj*, che contiene gli elementi, proprietà e destinazioni che sono comuni a tutti gli ambienti.</span><span class="sxs-lookup"><span data-stu-id="f546a-249">*Publish.proj*, which contains properties, items, and targets that are common to all environments.</span></span>
- <span data-ttu-id="f546a-250">*Env-Dev.proj*, che contiene le proprietà specifiche per un ambiente di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="f546a-250">*Env-Dev.proj*, which contains properties that are specific to a developer environment.</span></span>

<span data-ttu-id="f546a-251">A questo punto si noti che il *Publish.proj* file include un [importazione](https://msdn.microsoft.com/library/92x05xfs.aspx) elemento, immediatamente sotto la parentesi graffa **progetto** tag.</span><span class="sxs-lookup"><span data-stu-id="f546a-251">Now notice that the *Publish.proj* file includes an [Import](https://msdn.microsoft.com/library/92x05xfs.aspx) element, immediately beneath the opening **Project** tag.</span></span>


[!code-xml[Main](understanding-the-project-file/samples/sample16.xml)]


<span data-ttu-id="f546a-252">Il **importare** elemento viene usato per importare il contenuto di un altro file di progetto MSBuild nel file di progetto MSBuild corrente.</span><span class="sxs-lookup"><span data-stu-id="f546a-252">The **Import** element is used to import the contents of another MSBuild project file into the current MSBuild project file.</span></span> <span data-ttu-id="f546a-253">In questo caso, il **TargetEnvPropsFile** parametro fornisce il nome del file del file di progetto da importare.</span><span class="sxs-lookup"><span data-stu-id="f546a-253">In this case, the **TargetEnvPropsFile** parameter provides the filename of the project file you want to import.</span></span> <span data-ttu-id="f546a-254">Quando si esegue MSBuild, è possibile fornire un valore per questo parametro.</span><span class="sxs-lookup"><span data-stu-id="f546a-254">You can provide a value for this parameter when you run MSBuild.</span></span>


[!code-console[Main](understanding-the-project-file/samples/sample17.cmd)]


<span data-ttu-id="f546a-255">Ciò in modo efficace unisce il contenuto dei due file in un unico file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-255">This effectively merges the contents of the two files into a single project file.</span></span> <span data-ttu-id="f546a-256">Con questo approccio, è possibile creare un file di progetto che contiene la configurazione della build universal e più file di progetto complementare contenente le proprietà specifiche dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="f546a-256">Using this approach, you can create one project file containing your universal build configuration and multiple supplementary project files containing environment-specific properties.</span></span> <span data-ttu-id="f546a-257">Di conseguenza, è sufficiente eseguire un comando con un valore di parametro diversi ti permette di distribuire la soluzione a un altro ambiente.</span><span class="sxs-lookup"><span data-stu-id="f546a-257">As a result, simply running a command with a different parameter value lets you deploy your solution to a different environment.</span></span>

![](understanding-the-project-file/_static/image3.png)

<span data-ttu-id="f546a-258">La suddivisione dei file di progetto in questo modo è una buona norma da seguire.</span><span class="sxs-lookup"><span data-stu-id="f546a-258">Splitting your project files in this way is a good practice to follow.</span></span> <span data-ttu-id="f546a-259">Consente agli sviluppatori di distribuire in più ambienti mediante l'esecuzione di un singolo comando, evitando la duplicazione di proprietà di compilazione universali su più file di progetto.</span><span class="sxs-lookup"><span data-stu-id="f546a-259">It allows developers to deploy to multiple environments by running a single command, while avoiding the duplication of universal build properties across multiple project files.</span></span>

> [!NOTE]
> <span data-ttu-id="f546a-260">Per indicazioni su come personalizzare i file di progetto specifici dell'ambiente per ambienti server, vedere [configurare le proprietà di distribuzione per un ambiente di destinazione](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="f546a-260">For guidance on how to customize the environment-specific project files for your own server environments, see [Configuring Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>


## <a name="conclusion"></a><span data-ttu-id="f546a-261">Conclusione</span><span class="sxs-lookup"><span data-stu-id="f546a-261">Conclusion</span></span>

<span data-ttu-id="f546a-262">In questo argomento viene fornita un'introduzione generale ai file di progetto MSBuild e illustrato come creare i proprio file di progetto personalizzati per controllare il processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="f546a-262">This topic provided a general introduction to MSBuild project files and explained how you can create your own custom project files to control the build process.</span></span> <span data-ttu-id="f546a-263">È stato anche introdotto il concetto di suddividere i file di progetto in compilazione universal istruzioni e le proprietà di compilazione specifici dell'ambiente, per renderlo semplice compilare e distribuire i progetti a più destinazioni.</span><span class="sxs-lookup"><span data-stu-id="f546a-263">It also introduced the concept of splitting project files into universal build instructions and environment-specific build properties, to make it easy to build and deploy projects to multiple destinations.</span></span>

<span data-ttu-id="f546a-264">Argomento successivo [informazioni sul processo di compilazione](understanding-the-build-process.md), fornisce informazioni più dettagliate su come usare i file di progetto al controllo di compilazione e distribuzione attraverso la distribuzione di una soluzione con un livello di complessità realistico.</span><span class="sxs-lookup"><span data-stu-id="f546a-264">The next topic, [Understanding the Build Process](understanding-the-build-process.md), provides more insight into how you can use project files to control build and deployment by walking you through the deployment of a solution with a realistic level of complexity.</span></span>

## <a name="further-reading"></a><span data-ttu-id="f546a-265">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="f546a-265">Further Reading</span></span>

<span data-ttu-id="f546a-266">Per un'introduzione più dettagliata per i file di progetto e il sito, vedere [all'interno di Microsoft Build Engine: Utilizzo di MSBuild e Team Foundation Build](http://amzn.com/0735645248) Sayed Ibrahim Hashimi, William Bartholomew, ISBN: 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="f546a-266">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f546a-267">[Precedente](setting-up-the-contact-manager-solution.md)
> [Successivo](understanding-the-build-process.md)</span><span class="sxs-lookup"><span data-stu-id="f546a-267">[Previous](setting-up-the-contact-manager-solution.md)
[Next](understanding-the-build-process.md)</span></span>
