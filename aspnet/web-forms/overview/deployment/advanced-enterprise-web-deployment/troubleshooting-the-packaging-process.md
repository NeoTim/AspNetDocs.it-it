---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
title: Il processo di creazione di pacchetti di risoluzione dei problemi | Microsoft Docs
author: jrjlee
description: Questo argomento viene descritto come è possibile raccogliere informazioni dettagliate sul processo di creazione del pacchetto usando la proprietà EnablePackageProcessLoggingAndAssert nel valore M...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 794bd819-00fc-47e2-876d-fc5d15e0de1c
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
msc.type: authoredcontent
ms.openlocfilehash: 79774c6a1a1d05d5a7bcd82a5d7aa888933cf089
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/09/2019
ms.locfileid: "59420107"
---
# <a name="troubleshooting-the-packaging-process"></a><span data-ttu-id="1bab9-103">Risoluzione dei problemi del processo di creazione di pacchetti</span><span class="sxs-lookup"><span data-stu-id="1bab9-103">Troubleshooting the Packaging Process</span></span>

<span data-ttu-id="1bab9-104">da [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="1bab9-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="1bab9-105">Scarica il PDF</span><span class="sxs-lookup"><span data-stu-id="1bab9-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="1bab9-106">Questo argomento viene descritto come è possibile raccogliere informazioni dettagliate sul processo di creazione di pacchetti tramite il **EnablePackageProcessLoggingAndAssert** proprietà di Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="1bab9-106">This topic describes how you can collect detailed information about the packaging process by using the **EnablePackageProcessLoggingAndAssert** property in the Microsoft Build Engine (MSBuild).</span></span>
> 
> <span data-ttu-id="1bab9-107">Quando si imposta la **EnablePackageProcessLoggingAndAssert** proprietà **true**, MSBuild sarà:</span><span class="sxs-lookup"><span data-stu-id="1bab9-107">When you set the **EnablePackageProcessLoggingAndAssert** property to **true**, MSBuild will:</span></span>
> 
> - <span data-ttu-id="1bab9-108">Aggiungere informazioni aggiuntive sul processo di creazione di pacchetti per i log di compilazione.</span><span class="sxs-lookup"><span data-stu-id="1bab9-108">Add additional information about the packaging process to the build logs.</span></span>
> - <span data-ttu-id="1bab9-109">Registrare gli errori in determinate condizioni, ad esempio, se i file duplicati vengono trovati nell'elenco di pacchetti.</span><span class="sxs-lookup"><span data-stu-id="1bab9-109">Log errors under certain conditions, for example, if duplicate files are found in the packaging list.</span></span>
> - <span data-ttu-id="1bab9-110">Creare una directory di Log nel *ProjectName*\_cartella del pacchetto e usarla per registrare le informazioni sui file di creazione del pacchetto.</span><span class="sxs-lookup"><span data-stu-id="1bab9-110">Create a Log directory in the *ProjectName*\_Package folder and use it to record information about the files you're packaging.</span></span>
> 
> <span data-ttu-id="1bab9-111">Se il processo di creazione del pacchetto ha esito negativo o pacchetti di distribuzione web non contengono i file previsti, è possibile utilizzare queste informazioni per risolvere i problemi del processo e pinpoint in cui lo stato di avanzamento non corretto.</span><span class="sxs-lookup"><span data-stu-id="1bab9-111">If the packaging process is failing, or your web deployment packages don't contain the files that you expect, you can use this information to troubleshoot the process and pinpoint where things are going wrong.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="1bab9-112">Il **EnablePackageProcessLoggingAndAssert** proprietà funziona solo se si compila il progetto usando la **Debug** configurazione.</span><span class="sxs-lookup"><span data-stu-id="1bab9-112">The **EnablePackageProcessLoggingAndAssert** property only works if you build your project using the **Debug** configuration.</span></span> <span data-ttu-id="1bab9-113">La proprietà viene ignorata in altre configurazioni.</span><span class="sxs-lookup"><span data-stu-id="1bab9-113">The property is ignored in other configurations.</span></span>


<span data-ttu-id="1bab9-114">In questo argomento fa parte di una serie di esercitazioni basate su requisiti di distribuzione aziendale di una società fittizia, denominata Fabrikam, Inc. Questa serie di esercitazioni Usa una soluzione di esempio&#x2014;il [soluzione Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;per rappresentare un'applicazione web con un livello di complessità, tra cui un'applicazione ASP.NET MVC 3, una comunicazione Windows realistico Servizio Foundation (WCF) e un progetto di database.</span><span class="sxs-lookup"><span data-stu-id="1bab9-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="1bab9-115">Il metodo di distribuzione il fulcro delle esercitazioni seguenti si basa sull'approccio di file di progetto split descritto in [informazioni sul File di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in cui il processo di compilazione è controllato da due file di progetto&#x2014;contenente una istruzioni che si applicano a tutti gli ambienti di destinazione e quella che contiene le impostazioni di compilazione e distribuzione specifiche dell'ambiente di creazione.</span><span class="sxs-lookup"><span data-stu-id="1bab9-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="1bab9-116">In fase di compilazione, il file di progetto specifici dell'ambiente viene unito nel file di progetto indipendenti dall'ambiente in modo da formare un set completo di istruzioni di compilazione.</span><span class="sxs-lookup"><span data-stu-id="1bab9-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="understanding-the-enablepackageprocessloggingandassert-property"></a><span data-ttu-id="1bab9-117">Informazioni sulla proprietà EnablePackageProcessLoggingAndAssert</span><span class="sxs-lookup"><span data-stu-id="1bab9-117">Understanding the EnablePackageProcessLoggingAndAssert Property</span></span>

<span data-ttu-id="1bab9-118">[Compilazione e creazione di pacchetti Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) descritto come la Pipeline di pubblicazione sul Web (WPP) fornisce un set di destinazioni di MSBuild che estendono la funzionalità di MSBuild e abilitarlo per l'integrazione con Web Internet Information Services (IIS) Strumento di distribuzione (distribuzione Web).</span><span class="sxs-lookup"><span data-stu-id="1bab9-118">[Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) described how the Web Publishing Pipeline (WPP) provides a set of MSBuild targets that extend the functionality of MSBuild and enable it to integrate with the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span> <span data-ttu-id="1bab9-119">Quando si comprime un progetto di applicazione web, si richiama le destinazioni WPP.</span><span class="sxs-lookup"><span data-stu-id="1bab9-119">When you package a web application project, you're invoking WPP targets.</span></span>

<span data-ttu-id="1bab9-120">Molte di queste destinazioni WPP includono logica condizionale che consente di registrare informazioni aggiuntive quando la **EnablePackageProcessLoggingAndAssert** è impostata su **true**.</span><span class="sxs-lookup"><span data-stu-id="1bab9-120">Lots of these WPP targets include conditional logic that logs additional information when the **EnablePackageProcessLoggingAndAssert** property is set to **true**.</span></span> <span data-ttu-id="1bab9-121">Ad esempio, se si esamina il **Package** destinazione, è possibile vedere che crea una directory di log aggiuntivi e scrive un elenco di file in un file di testo se **EnablePackageProcessLoggingAndAssert** è uguale a **true**.</span><span class="sxs-lookup"><span data-stu-id="1bab9-121">For example, if you review the **Package** target, you can see that it creates an additional log directory and writes a list of files to a text file if **EnablePackageProcessLoggingAndAssert** is equal to **true**.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample1.xml)]


> [!NOTE]
> <span data-ttu-id="1bab9-122">Le destinazioni WPP sono definite nel *Microsoft.Web.Publishing.targets* file nella cartella %\MSBuild\Microsoft\VisualStudio\v10.0\Web % programmi (x86).</span><span class="sxs-lookup"><span data-stu-id="1bab9-122">The WPP targets are defined in the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span> <span data-ttu-id="1bab9-123">È possibile aprire questo file ed esaminare le destinazioni in Visual Studio 2010 o qualsiasi editor XML.</span><span class="sxs-lookup"><span data-stu-id="1bab9-123">You can open this file and review the targets in Visual Studio 2010 or any XML editor.</span></span> <span data-ttu-id="1bab9-124">Prestare attenzione a non per modificare il contenuto del file.</span><span class="sxs-lookup"><span data-stu-id="1bab9-124">Take care not to modify the contents of the file.</span></span>


## <a name="enabling-the-additional-logging"></a><span data-ttu-id="1bab9-125">Abilitare la registrazione aggiuntiva</span><span class="sxs-lookup"><span data-stu-id="1bab9-125">Enabling the Additional Logging</span></span>

<span data-ttu-id="1bab9-126">È possibile fornire un valore per il **EnablePackageProcessLoggingAndAssert** proprietà in vari modi, a seconda del modo in cui si compila il progetto.</span><span class="sxs-lookup"><span data-stu-id="1bab9-126">You can supply a value for the **EnablePackageProcessLoggingAndAssert** property in various ways, depending on how you build your project.</span></span>

<span data-ttu-id="1bab9-127">Se si compila il progetto dalla riga di comando, è possibile fornire un valore per il **EnablePackageProcessLoggingAndAssert** proprietà come un argomento della riga di comando:</span><span class="sxs-lookup"><span data-stu-id="1bab9-127">If you build your project from the command line, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property as a command-line argument:</span></span>


[!code-console[Main](troubleshooting-the-packaging-process/samples/sample2.cmd)]


<span data-ttu-id="1bab9-128">Se si usa un file di progetto personalizzati per compilare i progetti, è possibile includere il **EnablePackageProcessLoggingAndAssert** valore nel **delle proprietà** attributo del **MSBuild**attività:</span><span class="sxs-lookup"><span data-stu-id="1bab9-128">If you're using a custom project file to build your projects, you can include the **EnablePackageProcessLoggingAndAssert** value in the **Properties** attribute of the **MSBuild** task:</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample3.xml)]


<span data-ttu-id="1bab9-129">Se si usa una definizione di compilazione di Team Foundation Server (TFS) per compilare i progetti, è possibile fornire un valore per il **EnablePackageProcessLoggingAndAssert** proprietà di **argomenti MSBuild** riga:</span><span class="sxs-lookup"><span data-stu-id="1bab9-129">If you're using a Team Foundation Server (TFS) build definition to build your projects, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property in the **MSBuild Arguments** row:</span></span>![](troubleshooting-the-packaging-process/_static/image1.png)

> [!NOTE]
> <span data-ttu-id="1bab9-130">Per altre informazioni sulla creazione e configurazione di definizioni di compilazione, vedere [creazione di una compilazione che supporta la distribuzione della definizione](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="1bab9-130">For more information on creating and configuring build definitions, see [Creating a Build Definition That Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>


<span data-ttu-id="1bab9-131">In alternativa, se si desidera includere il pacchetto in ogni build, è possibile modificare il file di progetto per il progetto di applicazione web impostare il **EnablePackageProcessLoggingAndAssert** proprietà **true**.</span><span class="sxs-lookup"><span data-stu-id="1bab9-131">Alternatively, if you want to include the package in every build, you can modify the project file for your web application project to set the **EnablePackageProcessLoggingAndAssert** property to **true**.</span></span> <span data-ttu-id="1bab9-132">È necessario aggiungere la proprietà per il primo **PropertyGroup** elemento all'interno del file con estensione csproj o vbproj.</span><span class="sxs-lookup"><span data-stu-id="1bab9-132">You should add the property to the first **PropertyGroup** element within your .csproj or .vbproj file.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample4.xml)]


## <a name="reviewing-the-log-files"></a><span data-ttu-id="1bab9-133">Esaminare i file di Log</span><span class="sxs-lookup"><span data-stu-id="1bab9-133">Reviewing the Log Files</span></span>

<span data-ttu-id="1bab9-134">Quando si compila e creare un progetto di applicazione web con il pacchetto **EnablePackageProcessLoggingAndAssert** impostata su **true**, MSBuild crea una cartella aggiuntiva denominata Log nel *NomeProgetto* \_Cartella del pacchetto.</span><span class="sxs-lookup"><span data-stu-id="1bab9-134">When you build and package a web application project with **EnablePackageProcessLoggingAndAssert** set to **true**, MSBuild creates an additional folder named Log in the *ProjectName*\_Package folder.</span></span> <span data-ttu-id="1bab9-135">La cartella dei Log contiene vari file:</span><span class="sxs-lookup"><span data-stu-id="1bab9-135">The Log folder contains various files:</span></span>

![](troubleshooting-the-packaging-process/_static/image2.png)

<span data-ttu-id="1bab9-136">L'elenco dei file visualizzati variano in base alle operazioni nel progetto e il processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="1bab9-136">The list of files that you see will vary according to the things in your project and your build process.</span></span> <span data-ttu-id="1bab9-137">Tuttavia, questi file vengono in genere utilizzati per registrare l'elenco di file che si stanno raccogliendo WPP per la creazione del pacchetto, in varie fasi del processo:</span><span class="sxs-lookup"><span data-stu-id="1bab9-137">However, these files are typically used to record the list of files that the WPP is collecting for packaging, at various stages of the process:</span></span>

- <span data-ttu-id="1bab9-138">Il *PreExcludePipelineCollectFilesPhaseFileList.txt* file sono elencati i file raccolti di MSBuild per creare il pacchetto prima che vengano rimossi tutti i file vengono specificati per l'esclusione.</span><span class="sxs-lookup"><span data-stu-id="1bab9-138">The *PreExcludePipelineCollectFilesPhaseFileList.txt* file lists the files that MSBuild collects for packaging before any files that are specified for exclusion are removed.</span></span>
- <span data-ttu-id="1bab9-139">Il *AfterExcludeFilesFilesList.txt* file contiene l'elenco di file modificate dopo la rimozione di tutti i file vengono specificati per l'esclusione.</span><span class="sxs-lookup"><span data-stu-id="1bab9-139">The *AfterExcludeFilesFilesList.txt* file contains the modified file list after any files that are specified for exclusion are removed.</span></span>

    > [!NOTE]
    > <span data-ttu-id="1bab9-140">Per altre informazioni sull'esclusione di file e cartelle dal processo di creazione dei pacchetti, vedere [esclusione file e cartelle dalla distribuzione](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="1bab9-140">For more information on excluding files and folders from the packaging process, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>
- <span data-ttu-id="1bab9-141">Il *AfterTransformWebConfig.txt* file sono elencati i file raccolti in un pacchetto dopo qualsiasi *Web. config* trasformazioni sono state eseguite.</span><span class="sxs-lookup"><span data-stu-id="1bab9-141">The *AfterTransformWebConfig.txt* file lists the files collected for packaging after any *Web.config* transforms have been performed.</span></span> <span data-ttu-id="1bab9-142">In questo elenco, qualsiasi specifici della configurazione *Web. config* trasformare file, ad esempio *v* e *Release*, vengono esclusi dall'elenco dei file per creazione del pacchetto.</span><span class="sxs-lookup"><span data-stu-id="1bab9-142">In this list, any configuration-specific *Web.config* transform files, like *Web.Debug.config* and *Web.Release.config*, are excluded from the list of files for packaging.</span></span> <span data-ttu-id="1bab9-143">Un singolo trasformato *Web. config* è incluso nella loro posizione.</span><span class="sxs-lookup"><span data-stu-id="1bab9-143">A single transformed *Web.config* is included in their place.</span></span>
- <span data-ttu-id="1bab9-144">Il *PostAutoParameterizationWebConfigConnectionStrings.txt* file contiene l'elenco dei file dopo le stringhe di connessione nel *Web. config* file sono stati associati parametri.</span><span class="sxs-lookup"><span data-stu-id="1bab9-144">The *PostAutoParameterizationWebConfigConnectionStrings.txt* file contains the list of files after the connection strings in the *Web.config* file have been parameterized.</span></span> <span data-ttu-id="1bab9-145">Questo è il processo che consente di sostituire le stringhe di connessione con le impostazioni corrette per l'ambiente di destinazione quando si distribuisce il pacchetto.</span><span class="sxs-lookup"><span data-stu-id="1bab9-145">This is the process that lets you replace your connection strings with the right settings for your target environment when you deploy the package.</span></span>
- <span data-ttu-id="1bab9-146">Il *Prepackage.txt* file contiene l'elenco di pre-compilazione finalizzato dei file da includere nel pacchetto.</span><span class="sxs-lookup"><span data-stu-id="1bab9-146">The *Prepackage.txt* file contains the finalized pre-build list of files to be included in the package.</span></span>

> [!NOTE]
> <span data-ttu-id="1bab9-147">I nomi dei file di log aggiuntivi in genere corrispondono a destinazioni WPP.</span><span class="sxs-lookup"><span data-stu-id="1bab9-147">The names of the additional log files typically correspond to WPP targets.</span></span> <span data-ttu-id="1bab9-148">È possibile esaminare queste destinazioni esaminando il *Microsoft.Web.Publishing.targets* file nella cartella %\MSBuild\Microsoft\VisualStudio\v10.0\Web % programmi (x86).</span><span class="sxs-lookup"><span data-stu-id="1bab9-148">You can review these targets by examining the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>


<span data-ttu-id="1bab9-149">Se il contenuto del pacchetto di web non è quelli previsti, esaminare questi file può essere utile per identificare a quale punto le operazioni di processo causa dell'errore.</span><span class="sxs-lookup"><span data-stu-id="1bab9-149">If the contents of your web package aren't what you expected, reviewing these files can be a useful way to identify at what point in the process things went wrong.</span></span>

## <a name="conclusion"></a><span data-ttu-id="1bab9-150">Conclusione</span><span class="sxs-lookup"><span data-stu-id="1bab9-150">Conclusion</span></span>

<span data-ttu-id="1bab9-151">In questo argomento illustrato come è possibile usare la **EnablePackageProcessLoggingAndAssert** proprietà in MSBuild per risolvere i problemi il processo di creazione del pacchetto.</span><span class="sxs-lookup"><span data-stu-id="1bab9-151">This topic described how you can use the **EnablePackageProcessLoggingAndAssert** property in MSBuild to troubleshoot the packaging process.</span></span> <span data-ttu-id="1bab9-152">Spiega i diversi modi in cui è possibile specificare il valore della proprietà per il processo di compilazione e fornendo le informazioni aggiuntive che viene registrate quando si imposta la proprietà su **true**.</span><span class="sxs-lookup"><span data-stu-id="1bab9-152">It explained the different ways in which you can supply the property value to the build process, and it described the additional information that is recorded when you set the property to **true**.</span></span>

## <a name="further-reading"></a><span data-ttu-id="1bab9-153">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="1bab9-153">Further Reading</span></span>

<span data-ttu-id="1bab9-154">Per altre informazioni sull'utilizzo dei file di progetto MSBuild personalizzati per controllare il processo di distribuzione, vedere [informazioni sul File di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md) e [informazioni sul processo di compilazione](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="1bab9-154">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="1bab9-155">Per altre informazioni su WPP e come gestisce il processo di creazione dei pacchetti, vedere [compilazione e creazione di pacchetti Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="1bab9-155">For more information on the WPP and how it manages the packaging process, see [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span> <span data-ttu-id="1bab9-156">Per indicazioni su come escludere file e cartelle specifici dai pacchetti di distribuzione web, vedere [esclusione file e cartelle dalla distribuzione](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="1bab9-156">For guidance on how to exclude specific files and folders from web deployment packages, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="1bab9-157">Precedente</span><span class="sxs-lookup"><span data-stu-id="1bab9-157">Previous</span></span>](running-windows-powershell-scripts-from-msbuild-project-files.md)
