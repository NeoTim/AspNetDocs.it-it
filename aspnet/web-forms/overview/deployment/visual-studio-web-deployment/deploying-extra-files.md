---
uid: web-forms/overview/deployment/visual-studio-web-deployment/deploying-extra-files
title: 'Distribuzione Web ASP.NET con Visual Studio: distribuzione di file aggiuntivi | Microsoft Docs'
author: tdykstra
description: Questa serie di esercitazioni illustra come distribuire (pubblicare) un'applicazione Web ASP.NET per app Azure servizio app Web o un provider di hosting di terze parti, da usin...
ms.author: riande
ms.date: 03/23/2015
ms.assetid: 1cd91055-84bc-42c6-9d80-646f41429d4d
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/deploying-extra-files
msc.type: authoredcontent
ms.openlocfilehash: eaa3141c22980f0c816e2f33b5597ac9fe69c23c
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/28/2019
ms.locfileid: "74594898"
---
# <a name="aspnet-web-deployment-using-visual-studio-deploying-extra-files"></a><span data-ttu-id="23c2d-103">Distribuzione Web ASP.NET con Visual Studio: distribuzione di file aggiuntivi</span><span class="sxs-lookup"><span data-stu-id="23c2d-103">ASP.NET Web Deployment using Visual Studio: Deploying Extra Files</span></span>

<span data-ttu-id="23c2d-104">di [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="23c2d-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="23c2d-105">Scarica progetto Starter</span><span class="sxs-lookup"><span data-stu-id="23c2d-105">Download Starter Project</span></span>](https://go.microsoft.com/fwlink/p/?LinkId=282627)

> <span data-ttu-id="23c2d-106">Questa serie di esercitazioni illustra come distribuire (pubblicare) un'applicazione Web ASP.NET in app Web di servizio app Azure o in un provider di hosting di terze parti, usando Visual Studio 2012 o Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="23c2d-106">This tutorial series shows you how to deploy (publish) an ASP.NET web application to Azure App Service Web Apps or to a third-party hosting provider, by using Visual Studio 2012 or Visual Studio 2010.</span></span> <span data-ttu-id="23c2d-107">Per informazioni sulla serie, vedere [la prima esercitazione della serie](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="23c2d-107">For information about the series, see [the first tutorial in the series](introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="23c2d-108">Panoramica di</span><span class="sxs-lookup"><span data-stu-id="23c2d-108">Overview</span></span>

<span data-ttu-id="23c2d-109">Questa esercitazione illustra come estendere la pipeline di pubblicazione Web di Visual Studio per eseguire un'attività aggiuntiva durante la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-109">This tutorial shows how to extend the Visual Studio web publish pipeline to do an additional task during deployment.</span></span> <span data-ttu-id="23c2d-110">L'attività consiste nel copiare i file aggiuntivi che non sono presenti nella cartella del progetto nel sito Web di destinazione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-110">The task is to copy extra files that are not in the project folder to the destination web site.</span></span>

<span data-ttu-id="23c2d-111">Per questa esercitazione verrà copiato un file aggiuntivo: *robots. txt*.</span><span class="sxs-lookup"><span data-stu-id="23c2d-111">For this tutorial you'll copy one extra file: *robots.txt*.</span></span> <span data-ttu-id="23c2d-112">Si vuole distribuire questo file nella gestione temporanea ma non nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-112">You want to deploy this file to staging but not to production.</span></span> <span data-ttu-id="23c2d-113">Nell'esercitazione [distribuzione in produzione](deploying-to-production.md) questo file è stato aggiunto al progetto e configurato per escluderlo dal profilo di pubblicazione di produzione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-113">In [the Deploying to Production](deploying-to-production.md) tutorial, you added this file to the project and configured the Production publish profile to exclude it.</span></span> <span data-ttu-id="23c2d-114">In questa esercitazione verrà visualizzato un metodo alternativo per gestire questa situazione, una che sarà utile per tutti i file che si desidera distribuire, ma che non si desidera includere nel progetto.</span><span class="sxs-lookup"><span data-stu-id="23c2d-114">In this tutorial you'll see an alternative method to handle this situation, one that will be useful for any files that you want to deploy but don't want to include in the project.</span></span>

## <a name="move-the-robotstxt-file"></a><span data-ttu-id="23c2d-115">Spostare il file robots. txt</span><span class="sxs-lookup"><span data-stu-id="23c2d-115">Move the robots.txt file</span></span>

<span data-ttu-id="23c2d-116">Per preparare un metodo diverso per la gestione di *robots. txt*, in questa sezione dell'esercitazione si sposta il file in una cartella che non è inclusa nel progetto e si elimina *robots. txt* dall'ambiente di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="23c2d-116">To prepare for a different method of handling *robots.txt*, in this section of the tutorial you move the file to a folder that is not included in the project, and you delete *robots.txt* from the staging environment.</span></span> <span data-ttu-id="23c2d-117">È necessario eliminare il file dalla gestione temporanea per poter verificare che il nuovo metodo di distribuzione del file nell'ambiente funzioni correttamente.</span><span class="sxs-lookup"><span data-stu-id="23c2d-117">It is necessary to delete the file from staging so that you can verify that your new method of deploying the file to that environment is working correctly.</span></span>

1. <span data-ttu-id="23c2d-118">In **Esplora soluzioni**fare clic con il pulsante destro del mouse sul file *robots. txt* e scegliere **Escludi dal progetto**.</span><span class="sxs-lookup"><span data-stu-id="23c2d-118">In **Solution Explorer**, right-click the *robots.txt* file and click **Exclude From Project**.</span></span>
2. <span data-ttu-id="23c2d-119">Utilizzando Esplora file di Windows, creare una nuova cartella nella cartella della soluzione e denominarla *file*.</span><span class="sxs-lookup"><span data-stu-id="23c2d-119">Using Windows File Explorer, create a new folder in the solution folder and name it *ExtraFiles*.</span></span>
3. <span data-ttu-id="23c2d-120">Spostare il file *robots. txt* dalla cartella del progetto *ContosoUniversity* alla cartella *file* con estensione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-120">Move the *robots.txt* file from the *ContosoUniversity* project folder to the *ExtraFiles* folder.</span></span>

    ![Cartella file con estensione](deploying-extra-files/_static/image1.png)
4. <span data-ttu-id="23c2d-122">Utilizzando lo strumento FTP, eliminare il file *robots. txt* dal sito Web di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="23c2d-122">Using your FTP tool, delete the *robots.txt* file from the staging web site.</span></span>

    <span data-ttu-id="23c2d-123">In alternativa, è possibile selezionare **Rimuovi file aggiuntivi nella destinazione** in **Opzioni di pubblicazione file** nella scheda **Impostazioni** del profilo di pubblicazione di staging e ripubblicare in gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="23c2d-123">As an alternative, you can select **Remove additional files at destination** under **File Publish Options** on the **Settings** tab of the Staging publish profile, and republish to staging.</span></span>

## <a name="update-the-publish-profile-file"></a><span data-ttu-id="23c2d-124">Aggiornare il file del profilo di pubblicazione</span><span class="sxs-lookup"><span data-stu-id="23c2d-124">Update the publish profile file</span></span>

<span data-ttu-id="23c2d-125">È necessario solo *robots. txt* in staging, quindi l'unico profilo di pubblicazione che è necessario aggiornare per distribuirlo è staging.</span><span class="sxs-lookup"><span data-stu-id="23c2d-125">You only need *robots.txt* in staging, so the only publish profile you need to update in order to deploy it is Staging.</span></span>

1. <span data-ttu-id="23c2d-126">In Visual Studio aprire *staging. pubxml*.</span><span class="sxs-lookup"><span data-stu-id="23c2d-126">In Visual Studio, open *Staging.pubxml*.</span></span>
2. <span data-ttu-id="23c2d-127">Alla fine del file, prima del tag di chiusura `</Project>` aggiungere il markup seguente:</span><span class="sxs-lookup"><span data-stu-id="23c2d-127">At the end of the file, before the closing `</Project>` tag, add the following markup:</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample1.xml)]

    <span data-ttu-id="23c2d-128">Questo codice crea una nuova *destinazione* in cui verranno raccolti i file aggiuntivi da distribuire.</span><span class="sxs-lookup"><span data-stu-id="23c2d-128">This code creates a new *target* that will collect additional files to be deployed.</span></span> <span data-ttu-id="23c2d-129">Una destinazione è costituita da una o più attività che MSBuild verrà eseguita in base alle condizioni specificate.</span><span class="sxs-lookup"><span data-stu-id="23c2d-129">A target is composed of one or more tasks that MSBuild will execute based on conditions you specify.</span></span>

    <span data-ttu-id="23c2d-130">L'attributo `Include` specifica che la cartella in cui trovare i file è costituita da *file*, che si trovano allo stesso livello della cartella del progetto.</span><span class="sxs-lookup"><span data-stu-id="23c2d-130">The `Include` attribute specifies that the folder in which to find the files is *ExtraFiles*, located at the same level as the project folder.</span></span> <span data-ttu-id="23c2d-131">MSBuild raccoglierà tutti i file dalla cartella e in modo ricorsivo da qualsiasi sottocartella (il doppio asterisco specifica le sottocartelle ricorsive).</span><span class="sxs-lookup"><span data-stu-id="23c2d-131">MSBuild will collect all files from that folder and recursively from any subfolders (the double asterisk specifies recursive subfolders).</span></span> <span data-ttu-id="23c2d-132">Con questo codice è possibile inserire più file e file nelle sottocartelle all'interno della cartella di *file* con estensione outfiles e tutti verranno distribuiti.</span><span class="sxs-lookup"><span data-stu-id="23c2d-132">With this code you could put multiple files, and files in subfolders inside the *ExtraFiles* folder, and all will be deployed.</span></span>

    <span data-ttu-id="23c2d-133">L'elemento `DestinationRelativePath` specifica che le cartelle e i file devono essere copiati nella cartella radice del sito Web di destinazione, nella stessa struttura di file e cartelle in cui si trovano nella cartella *file* .</span><span class="sxs-lookup"><span data-stu-id="23c2d-133">The `DestinationRelativePath` element specifies that the folders and files should be copied to the root folder of the destination web site, in the same file and folder structure as they are found in the *ExtraFiles* folder.</span></span> <span data-ttu-id="23c2d-134">Se si desidera copiare la cartella dei file con estensione di *file* , il valore di `DestinationRelativePath` sarà *file\%(RecursiveDir)% (filename)% (Extension)* .</span><span class="sxs-lookup"><span data-stu-id="23c2d-134">If you wanted to copy the *ExtraFiles* folder itself, the `DestinationRelativePath` value would be *ExtraFiles\%(RecursiveDir)%(Filename)%(Extension)*.</span></span>
3. <span data-ttu-id="23c2d-135">Alla fine del file, prima del tag di chiusura `</Project>` aggiungere il markup seguente che specifica quando eseguire la nuova destinazione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-135">At the end of the file, before the closing `</Project>` tag, add the following markup that specifies when to execute the new target.</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample2.xml)]

    <span data-ttu-id="23c2d-136">Questo codice fa in modo che la nuova destinazione `CustomCollectFiles` venga eseguita ogni volta che viene eseguita la destinazione che copia i file nella cartella di destinazione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-136">This code causes the new `CustomCollectFiles` target to be executed whenever the target that copies files to the destination folder is executed.</span></span> <span data-ttu-id="23c2d-137">Esiste una destinazione separata per la creazione del pacchetto di pubblicazione e distribuzione e la nuova destinazione viene inserita in entrambe le destinazioni nel caso in cui si decida di eseguire la distribuzione usando un pacchetto di distribuzione anziché la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-137">There is a separate target for publish versus deployment package creation, and the new target is injected in both targets in case you decide to deploy by using a deployment package instead of publishing.</span></span>

    <span data-ttu-id="23c2d-138">Il file con *estensione pubxml* è ora simile all'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="23c2d-138">The *.pubxml* file now looks like the following example:</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample3.xml?highlight=53-71)]
4. <span data-ttu-id="23c2d-139">Salvare e chiudere il file *staging. pubxml* .</span><span class="sxs-lookup"><span data-stu-id="23c2d-139">Save and close the *Staging.pubxml* file.</span></span>

## <a name="publish-to-staging"></a><span data-ttu-id="23c2d-140">Pubblica in gestione temporanea</span><span class="sxs-lookup"><span data-stu-id="23c2d-140">Publish to staging</span></span>

<span data-ttu-id="23c2d-141">Utilizzando la pubblicazione con un clic o la riga di comando, pubblicare l'applicazione tramite il profilo di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="23c2d-141">Using one-click publish or the command line, publish the application by using the Staging profile.</span></span>

<span data-ttu-id="23c2d-142">Se si usa la pubblicazione con un clic, è possibile verificare nella finestra di **Anteprima** che verrà copiato *robots. txt* .</span><span class="sxs-lookup"><span data-stu-id="23c2d-142">If you use one-click publish, you can verify in the **Preview** window that *robots.txt* will be copied.</span></span> <span data-ttu-id="23c2d-143">In caso contrario, usare lo strumento FTP per verificare che il file *robots. txt* si trovi nella cartella radice del sito Web dopo la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="23c2d-143">Otherwise, use your FTP tool to verify that the *robots.txt* file is in the root folder of the web site after deployment.</span></span>

## <a name="summary"></a><span data-ttu-id="23c2d-144">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="23c2d-144">Summary</span></span>

<span data-ttu-id="23c2d-145">Questa operazione completa questa serie di esercitazioni sulla distribuzione di un'applicazione Web ASP.NET a un provider di hosting di terze parti.</span><span class="sxs-lookup"><span data-stu-id="23c2d-145">This completes this series of tutorials on deploying an ASP.NET web application to a third-party hosting provider.</span></span> <span data-ttu-id="23c2d-146">Per ulteriori informazioni sugli argomenti trattati in queste esercitazioni, vedere la mappa del [contenuto della distribuzione di ASP.NET](https://go.microsoft.com/fwlink/p/?LinkId=282413).</span><span class="sxs-lookup"><span data-stu-id="23c2d-146">For more information about any of the topics covered in these tutorials, see the [ASP.NET Deployment Content Map](https://go.microsoft.com/fwlink/p/?LinkId=282413).</span></span>

## <a name="more-information"></a><span data-ttu-id="23c2d-147">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="23c2d-147">More information</span></span>

<span data-ttu-id="23c2d-148">Se si sa come usare i file di MSBuild, è possibile automatizzare molte altre attività di distribuzione scrivendo il codice nei file *. pubxml* (per le attività specifiche del profilo) o il file Project *. WPP. targets* (per le attività che si applicano a tutti i profili).</span><span class="sxs-lookup"><span data-stu-id="23c2d-148">If you know how to work with MSBuild files, you can automate many other deployment tasks by writing code in *.pubxml* files (for profile-specific tasks) or the project *.wpp.targets* file (for tasks that apply to all profiles).</span></span> <span data-ttu-id="23c2d-149">Per altre informazioni sui file con estensione *pubxml* e *WPP. targets* , vedere [procedura: modificare le impostazioni di distribuzione nei file del profilo di pubblicazione (con estensione pubxml) e il file con estensione WPP. targets nei progetti Web di Visual Studio](https://msdn.microsoft.com/library/ff398069).</span><span class="sxs-lookup"><span data-stu-id="23c2d-149">For more information about *.pubxml* and *.wpp.targets* files, see [How to: Edit Deployment Settings in Publish Profile (.pubxml) Files and the .wpp.targets File in Visual Studio Web Projects](https://msdn.microsoft.com/library/ff398069).</span></span> <span data-ttu-id="23c2d-150">Per un'introduzione di base al codice MSBuild, vedere l'articolo relativo **all'anatomia di un file di progetto** in [serie Enterprise Deployment: informazioni sul file di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="23c2d-150">For a basic introduction to MSBuild code, see **The Anatomy of a Project File** in [Enterprise Deployment Series: Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span> <span data-ttu-id="23c2d-151">Per informazioni su come usare i file di MSBuild per eseguire attività per i propri scenari, vedere questo libro: [all'interno del Microsoft Build Engine: uso di MSBuild e Team Foundation Build](http://msbuildbook.com) di Sayed Ibraham Hashimi e William Bartholomew.</span><span class="sxs-lookup"><span data-stu-id="23c2d-151">To learn how to work with MSBuild files to perform tasks for your own scenarios, see this book: [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://msbuildbook.com) by Sayed Ibraham Hashimi and William Bartholomew.</span></span>

## <a name="acknowledgements"></a><span data-ttu-id="23c2d-152">Riconoscimenti</span><span class="sxs-lookup"><span data-stu-id="23c2d-152">Acknowledgements</span></span>

<span data-ttu-id="23c2d-153">Desidero ringraziare i seguenti utenti che hanno apportato contributi significativi al contenuto di questa serie di esercitazioni:</span><span class="sxs-lookup"><span data-stu-id="23c2d-153">I would like to thank the following people who made significant contributions to the content of this tutorial series:</span></span>

- [<span data-ttu-id="23c2d-154">Alberto Poblacion, MVP &amp; MCT, Spagna</span><span class="sxs-lookup"><span data-stu-id="23c2d-154">Alberto Poblacion, MVP &amp; MCT, Spain</span></span>](https://mvp.microsoft.com/mvp/Alberto%20Poblacion%20Bolano-36772)
- <span data-ttu-id="23c2d-155">Jarod Ferguson, MVP per lo sviluppo di piattaforme dati, Stati Uniti</span><span class="sxs-lookup"><span data-stu-id="23c2d-155">Jarod Ferguson, Data Platform Development MVP, United States</span></span>
- <span data-ttu-id="23c2d-156">Duro Mittal, Microsoft</span><span class="sxs-lookup"><span data-stu-id="23c2d-156">Harsh Mittal, Microsoft</span></span>
- <span data-ttu-id="23c2d-157">[Jon Galloway](https://weblogs.asp.net/jgalloway) (twitter: [@jongalloway](http://twitter.com/jongalloway))</span><span class="sxs-lookup"><span data-stu-id="23c2d-157">[Jon Galloway](https://weblogs.asp.net/jgalloway) (twitter: [@jongalloway](http://twitter.com/jongalloway))</span></span>
- [<span data-ttu-id="23c2d-158">Kristina Olson, Microsoft</span><span class="sxs-lookup"><span data-stu-id="23c2d-158">Kristina Olson, Microsoft</span></span>](https://blogs.iis.net/krolson/default.aspx)
- [<span data-ttu-id="23c2d-159">Mike Pope, Microsoft</span><span class="sxs-lookup"><span data-stu-id="23c2d-159">Mike Pope, Microsoft</span></span>](http://www.mikepope.com/blog/DisplayBlog.aspx)
- <span data-ttu-id="23c2d-160">Sauro Srivastava, Microsoft</span><span class="sxs-lookup"><span data-stu-id="23c2d-160">Mohit Srivastava, Microsoft</span></span>
- [<span data-ttu-id="23c2d-161">Raffaele Rialdi, Italia</span><span class="sxs-lookup"><span data-stu-id="23c2d-161">Raffaele Rialdi, Italy</span></span>](http://www.iamraf.net/)
- [<span data-ttu-id="23c2d-162">Rick Anderson, Microsoft</span><span class="sxs-lookup"><span data-stu-id="23c2d-162">Rick Anderson, Microsoft</span></span>](https://blogs.msdn.com/b/rickandy/)
- <span data-ttu-id="23c2d-163">[Sayed Hashimi, Microsoft](http://sedodream.com/default.aspx)(twitter: [@sayedihashimi](http://twitter.com/sayedihashimi))</span><span class="sxs-lookup"><span data-stu-id="23c2d-163">[Sayed Hashimi, Microsoft](http://sedodream.com/default.aspx)(twitter: [@sayedihashimi](http://twitter.com/sayedihashimi))</span></span>
- <span data-ttu-id="23c2d-164">[Scott hanseln](http://www.hanselman.com/blog/) (twitter: [@shanselman](http://twitter.com/shanselman))</span><span class="sxs-lookup"><span data-stu-id="23c2d-164">[Scott Hanselman](http://www.hanselman.com/blog/) (twitter: [@shanselman](http://twitter.com/shanselman))</span></span>
- <span data-ttu-id="23c2d-165">[Scott Hunter, Microsoft](https://blogs.msdn.com/b/scothu/) (twitter: [@coolcsh](http://twitter.com/coolcsh))</span><span class="sxs-lookup"><span data-stu-id="23c2d-165">[Scott Hunter, Microsoft](https://blogs.msdn.com/b/scothu/) (twitter: [@coolcsh](http://twitter.com/coolcsh))</span></span>
- [<span data-ttu-id="23c2d-166">Srđan Božović, Serbia</span><span class="sxs-lookup"><span data-stu-id="23c2d-166">Srđan Božović, Serbia</span></span>](http://msforge.net/blogs/zmajcek/)
- <span data-ttu-id="23c2d-167">Alessandro [Joshi, Microsoft](http://vishaljoshi.blogspot.com/) (twitter: [@vishalrjoshi](http://twitter.com/vishalrjoshi))</span><span class="sxs-lookup"><span data-stu-id="23c2d-167">[Vishal Joshi, Microsoft](http://vishaljoshi.blogspot.com/) (twitter: [@vishalrjoshi](http://twitter.com/vishalrjoshi))</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="23c2d-168">[Precedente](command-line-deployment.md)
> [Successivo](troubleshooting.md)</span><span class="sxs-lookup"><span data-stu-id="23c2d-168">[Previous](command-line-deployment.md)
[Next](troubleshooting.md)</span></span>
