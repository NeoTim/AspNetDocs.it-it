---
uid: web-forms/overview/deployment/visual-studio-web-deployment/deploying-to-production
title: "Distribuzione Web ASP.NET tramite Visual Studio: Distribuzione nell'ambiente di produzione | Microsoft Docs"
author: tdykstra
description: Questa serie di esercitazioni illustra come distribuire, pubblicare, ASP.NET per App Web di servizio App di Azure o per un provider di hosting di terze parti, di applicazioni web da utilizza...
ms.author: riande
ms.date: 02/15/2013
ms.assetid: 416438a1-3b2f-4d27-bf53-6b76223c33bf
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/deploying-to-production
msc.type: authoredcontent
ms.openlocfilehash: b9c4a4d035c78b4f4c53942219ccfa3048c7a82b
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2019
ms.locfileid: "65133810"
---
# <a name="aspnet-web-deployment-using-visual-studio-deploying-to-production"></a><span data-ttu-id="f1df6-103">Distribuzione Web ASP.NET tramite Visual Studio: Distribuzione in produzione</span><span class="sxs-lookup"><span data-stu-id="f1df6-103">ASP.NET Web Deployment using Visual Studio: Deploying to Production</span></span>

<span data-ttu-id="f1df6-104">da [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="f1df6-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="f1df6-105">Download progetto iniziale</span><span class="sxs-lookup"><span data-stu-id="f1df6-105">Download Starter Project</span></span>](http://go.microsoft.com/fwlink/p/?LinkId=282627)

> <span data-ttu-id="f1df6-106">Questa serie di esercitazioni illustra come distribuire, pubblicare, ASP.NET per App Web di servizio App di Azure o per un provider di hosting di terze parti, di applicazioni web usando Visual Studio 2012 o Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="f1df6-106">This tutorial series shows you how to deploy (publish) an ASP.NET web application to Azure App Service Web Apps or to a third-party hosting provider, by using Visual Studio 2012 or Visual Studio 2010.</span></span> <span data-ttu-id="f1df6-107">Per informazioni sulla serie, vedere [la prima esercitazione della serie](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="f1df6-107">For information about the series, see [the first tutorial in the series](introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="f1df6-108">Panoramica</span><span class="sxs-lookup"><span data-stu-id="f1df6-108">Overview</span></span>

<span data-ttu-id="f1df6-109">In questa esercitazione si configura un account di Microsoft Azure, creare ambienti di staging e produzione e distribuisce l'applicazione web ASP.NET per la gestione temporanea e funzionalità di pubblicazione di ambienti di produzione usando Visual Studio con un clic.</span><span class="sxs-lookup"><span data-stu-id="f1df6-109">In this tutorial, you set up a Microsoft Azure account, create staging and production environments, and deploy your ASP.NET web application to the staging and production environments by using the Visual Studio one-click publish feature.</span></span>

<span data-ttu-id="f1df6-110">Se si preferisce, è possibile distribuire in un provider di hosting di terze parti.</span><span class="sxs-lookup"><span data-stu-id="f1df6-110">If you prefer, you can deploy to a third-party hosting provider.</span></span> <span data-ttu-id="f1df6-111">La maggior parte delle procedure descritte in questa esercitazione sono gli stessi per un provider di hosting o per Azure, ad eccezione del fatto che ogni provider è la propria interfaccia utente per la gestione di account e il sito web.</span><span class="sxs-lookup"><span data-stu-id="f1df6-111">Most of the procedures described in this tutorial are the same for a hosting provider or for Azure, except that each provider has its own user interface for account and web site management.</span></span> <span data-ttu-id="f1df6-112">È possibile trovare un provider di hosting nel [raccolta di provider](https://www.microsoft.com/web/hosting) sul sito web Microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="f1df6-112">You can find a hosting provider in the [gallery of providers](https://www.microsoft.com/web/hosting) on the Microsoft.com web site.</span></span>

<span data-ttu-id="f1df6-113">Promemoria: Se viene visualizzato un messaggio di errore o qualcosa non funziona durante l'esecuzione dell'esercitazione, assicurarsi di controllare la pagina di risoluzione dei problemi in questa serie di esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="f1df6-113">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the Troubleshooting page in this tutorial series.</span></span>

## <a name="get-a-microsoft-azure-account"></a><span data-ttu-id="f1df6-114">Ottenere un account di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="f1df6-114">Get a Microsoft Azure account</span></span>

<span data-ttu-id="f1df6-115">Se non si ha già un account Azure, è possibile creare un account di valutazione gratuito in pochi minuti.</span><span class="sxs-lookup"><span data-stu-id="f1df6-115">If you don't already have an Azure account, you can create a free trial account in just a couple of minutes.</span></span> <span data-ttu-id="f1df6-116">Per informazioni dettagliate, vedere [versione di valutazione gratuita di Azure](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span><span class="sxs-lookup"><span data-stu-id="f1df6-116">For details, see [Azure Free Trial](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span></span>

## <a name="create-a-staging-environment"></a><span data-ttu-id="f1df6-117">Creare un ambiente di staging</span><span class="sxs-lookup"><span data-stu-id="f1df6-117">Create a staging environment</span></span>

> [!NOTE]
> <span data-ttu-id="f1df6-118">Poiché questa esercitazione è stata scritta, servizio App di Azure aggiunta una nuova funzionalità per automatizzare molti processi per la creazione di ambienti di staging e produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-118">Since this tutorial was written, Azure App Service added a new feature to automate many of the processes for creating staging and production environments.</span></span> <span data-ttu-id="f1df6-119">Visualizzare [configurare ambienti di staging per le app web nel servizio App di Azure](https://azure.microsoft.com/documentation/articles/web-sites-staged-publishing/).</span><span class="sxs-lookup"><span data-stu-id="f1df6-119">See [Set up staging environments for web apps in Azure App Service](https://azure.microsoft.com/documentation/articles/web-sites-staged-publishing/).</span></span>

<span data-ttu-id="f1df6-120">Come spiegato nel [Distribuisci con l'esercitazione di ambiente di Test](deploying-to-iis.md), più ambiente di testing affidabile è un sito web al provider di hosting che dispone esattamente come il sito web di produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-120">As explained in the [Deploy to the Test Environment tutorial](deploying-to-iis.md), the most reliable test environment is a web site at the hosting provider that's just like the production web site.</span></span> <span data-ttu-id="f1df6-121">In molti provider di hosting è necessario valutare i vantaggi di questa in significativi costi aggiuntivi, ma in Azure è possibile creare un'app web gratuita aggiuntive come le app di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="f1df6-121">At many hosting providers you would have to weigh the benefits of this against significant additional cost, but in Azure you can create an additional free web app as your staging app.</span></span> <span data-ttu-id="f1df6-122">È necessario anche un database e i costi aggiuntivi per tale failover il costo del database di produzione sarà entrambi nessuno o minimo.</span><span class="sxs-lookup"><span data-stu-id="f1df6-122">You also need a database, and the additional expense for that over the expense of your production database will be either none or minimal.</span></span> <span data-ttu-id="f1df6-123">In Azure si paga la quantità di archiviazione del database che si utilizza invece che per ogni database e la quantità di spazio di archiviazione aggiuntivo che si useranno in gestione temporanea sarà minima.</span><span class="sxs-lookup"><span data-stu-id="f1df6-123">In Azure you pay for the amount of database storage you use rather than for each database, and the amount of additional storage you'll use in staging will be minimal.</span></span>

<span data-ttu-id="f1df6-124">Come spiegato nel [Distribuisci con l'esercitazione di ambiente di Test](deploying-to-iis.md), in gestione temporanea e produzione che si intende distribuire i due database in un unico database.</span><span class="sxs-lookup"><span data-stu-id="f1df6-124">As explained in the [Deploy to the Test Environment tutorial](deploying-to-iis.md), in staging and production you're going to deploy your two databases into one database.</span></span> <span data-ttu-id="f1df6-125">Se si vuole mantenerli distinti, il processo è lo stesso ad eccezione del fatto che si crea un database aggiuntivo per ogni ambiente e scegliere la stringa di destinazione corretto per ogni database quando si crea il profilo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-125">If you wanted to keep them separate, the process would be the same except that you'd create an additional database for each environment and you would select the correct destination string for each database when you create the publish profile.</span></span>

<span data-ttu-id="f1df6-126">In questa sezione dell'esercitazione si creerà un'app web e database da utilizzare per l'ambiente di gestione temporanea e sarà distribuire in gestione temporanea e di test non esiste prima della creazione e la distribuzione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-126">In this section of the tutorial you'll create a web app and database to use for the staging environment, and you'll deploy to staging and test there before creating and deploying to the production environment.</span></span>

> [!NOTE]
> <span data-ttu-id="f1df6-127">La procedura seguente illustra come creare un'app web in servizio App di Azure usando il portale di gestione di Azure.</span><span class="sxs-lookup"><span data-stu-id="f1df6-127">The following steps show how to create a web app in Azure App Service by using the Azure management portal.</span></span> <span data-ttu-id="f1df6-128">Nella versione più recente di Azure SDK, è possibile anche eseguire questa operazione senza uscire da Visual Studio, usando Esplora Server.</span><span class="sxs-lookup"><span data-stu-id="f1df6-128">In the latest version of the Azure SDK, you can also do this without leaving Visual Studio, by using Server Explorer.</span></span> <span data-ttu-id="f1df6-129">In Visual Studio 2013, è anche possibile creare un'app web direttamente dalla finestra di dialogo pubblica.</span><span class="sxs-lookup"><span data-stu-id="f1df6-129">In Visual Studio 2013, you can also create a web app directly from the Publish dialog.</span></span> <span data-ttu-id="f1df6-130">Per altre informazioni, vedere [creare un'app web ASP.NET in servizio App di Azure.](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet)</span><span class="sxs-lookup"><span data-stu-id="f1df6-130">For more information, see [Create an ASP.NET web app in Azure App Service.](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet)</span></span>

1. <span data-ttu-id="f1df6-131">Nel [portale di gestione di Azure](https://manage.windowsazure.com/), fare clic su **siti Web**, quindi fare clic su **New**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-131">In the [Azure Management Portal](https://manage.windowsazure.com/), click **Websites**, and then click **New**.</span></span>
2. <span data-ttu-id="f1df6-132">Fare clic su **sito Web**, quindi fare clic su **creazione personalizzata**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-132">Click **Website**, and then click **Custom Create**.</span></span>

    <span data-ttu-id="f1df6-133">Il **nuovo sito Web - creazione personalizzata** verrà visualizzata la procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="f1df6-133">The **New Website - Custom Create** wizard opens.</span></span> <span data-ttu-id="f1df6-134">Il **creazione personalizzata** procedura guidata consente di creare un sito web e un database nello stesso momento.</span><span class="sxs-lookup"><span data-stu-id="f1df6-134">The **Custom Create** wizard enables you to create a web site and a database at the same time.</span></span>
3. <span data-ttu-id="f1df6-135">Nel **Crea sito Web** passaggio della procedura guidata, immettere una stringa nel **URL** finestra da usare come URL univoco per l'applicazione dell'ambiente di staging.</span><span class="sxs-lookup"><span data-stu-id="f1df6-135">In the **Create Website** step of the wizard, enter a string in the **URL** box to use as the unique URL for your application's staging environment.</span></span> <span data-ttu-id="f1df6-136">Ad esempio, immettere ContosoUniversity-staging123 (inclusi i numeri casuali alla fine per renderlo univoco nel caso in cui viene eseguita il ContosoUniversity-gestione temporanea).</span><span class="sxs-lookup"><span data-stu-id="f1df6-136">For example, enter ContosoUniversity-staging123 (including random numbers at the end to make it unique in case ContosoUniversity-staging is taken).</span></span>

    <span data-ttu-id="f1df6-137">L'URL completo sarà costituito da quanto immesso e dal suffisso visualizzato accanto alla casella di testo.</span><span class="sxs-lookup"><span data-stu-id="f1df6-137">The complete URL will consist of what you enter here plus the suffix that you see next to the text box.</span></span>
4. <span data-ttu-id="f1df6-138">Nel **regione** elenco a discesa scegliere l'area più vicina all'utente.</span><span class="sxs-lookup"><span data-stu-id="f1df6-138">In the **Region** drop-down list, choose the region that is closest to you.</span></span>

    <span data-ttu-id="f1df6-139">Questa impostazione specifica l'app web viene eseguita in quale data center.</span><span class="sxs-lookup"><span data-stu-id="f1df6-139">This setting specifies which data center your web app will run in.</span></span>
5. <span data-ttu-id="f1df6-140">Nel **Database** elenco a discesa scegliere **creare un nuovo database SQL**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-140">In the **Database** drop-down list, choose **Create a new SQL database**.</span></span>
6. <span data-ttu-id="f1df6-141">Nel **DB Connection String Name** casella, lasciare il valore predefinito *DefaultConnection*.</span><span class="sxs-lookup"><span data-stu-id="f1df6-141">In the **DB Connection String Name** box, leave the default value, *DefaultConnection*.</span></span>
7. <span data-ttu-id="f1df6-142">Fare clic sulla freccia che punta a destra nella parte inferiore della finestra.</span><span class="sxs-lookup"><span data-stu-id="f1df6-142">Click the arrow that points to the right at the bottom of the box.</span></span>

    <span data-ttu-id="f1df6-143">La figura seguente mostra le **Crea sito Web** finestra di dialogo con valori di esempio in essa contenuti.</span><span class="sxs-lookup"><span data-stu-id="f1df6-143">The following illustration shows the **Create Website** dialog with sample values in it.</span></span> <span data-ttu-id="f1df6-144">L'URL e l'area in cui è stato immesso sarà diverso.</span><span class="sxs-lookup"><span data-stu-id="f1df6-144">The URL and Region that you have entered will be different.</span></span>

    ![Creare il passaggio sito Web](deploying-to-production/_static/image1.png)

    <span data-ttu-id="f1df6-146">Verrà visualizzata la **specifica impostazioni database** passaggio.</span><span class="sxs-lookup"><span data-stu-id="f1df6-146">The wizard advances to the **Specify database settings** step.</span></span>
8. <span data-ttu-id="f1df6-147">Nel **Name** casella, immettere *ContosoUniversity* oltre a un numero casuale per renderlo univoco, ad esempio *ContosoUniversity123*.</span><span class="sxs-lookup"><span data-stu-id="f1df6-147">In the **Name** box, enter *ContosoUniversity* plus a random number to make it unique, for example *ContosoUniversity123*.</span></span>
9. <span data-ttu-id="f1df6-148">Nel **Server** , quindi selezionare **nuovo Server SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-148">In the **Server** box, select **New SQL Database Server**.</span></span>
10. <span data-ttu-id="f1df6-149">Immettere un nome e password amministratore.</span><span class="sxs-lookup"><span data-stu-id="f1df6-149">Enter an administrator name and password.</span></span>

    <span data-ttu-id="f1df6-150">Non si immetteranno un nome esistente e una password.</span><span class="sxs-lookup"><span data-stu-id="f1df6-150">You aren't entering an existing name and password here.</span></span> <span data-ttu-id="f1df6-151">Immettere un nuovo nome e una password che si sta definendo ora per l'utilizzo in un secondo momento quando si accede al database.</span><span class="sxs-lookup"><span data-stu-id="f1df6-151">You're entering a new name and password that you're defining now to use later when you access the database.</span></span>
11. <span data-ttu-id="f1df6-152">Nel **regione** scegliere la stessa area in cui si è scelto per l'app web.</span><span class="sxs-lookup"><span data-stu-id="f1df6-152">In the **Region** box, choose the same region that you chose for the web app.</span></span>

    <span data-ttu-id="f1df6-153">Mantenendo il server web e il server di database nella stessa area ti offre le migliori prestazioni e riduce al minimo le spese.</span><span class="sxs-lookup"><span data-stu-id="f1df6-153">Keeping the web server and the database server in the same region gives you the best performance and minimizes expenses.</span></span>
12. <span data-ttu-id="f1df6-154">Scegliere il segno di spunta nella parte inferiore della casella per indicare che si è finito.</span><span class="sxs-lookup"><span data-stu-id="f1df6-154">Click the check mark at the bottom of the box to indicate that you're finished.</span></span>

    <span data-ttu-id="f1df6-155">La figura seguente mostra le **specifica impostazioni database** finestra di dialogo con valori di esempio in essa contenuti.</span><span class="sxs-lookup"><span data-stu-id="f1df6-155">The following illustration shows the **Specify database settings** dialog with sample values in it.</span></span> <span data-ttu-id="f1df6-156">I valori immessi siano diversi.</span><span class="sxs-lookup"><span data-stu-id="f1df6-156">The values you have entered may be different.</span></span>

    ![Passaggio di impostazioni di database del sito Web di New - Create con Creazione guidata Database](deploying-to-production/_static/image2.png)

    <span data-ttu-id="f1df6-158">Il portale di gestione restituisce alla pagina di siti Web e il **stato** colonna mostra che viene creata l'app web.</span><span class="sxs-lookup"><span data-stu-id="f1df6-158">The Management Portal returns to the Websites page, and the **Status** column shows that the web app is being created.</span></span> <span data-ttu-id="f1df6-159">Dopo un periodo di tempo (in genere meno di un minuto), il **stato** colonna mostra che l'app web è stato creato correttamente.</span><span class="sxs-lookup"><span data-stu-id="f1df6-159">After a while (typically less than a minute), the **Status** column shows that the web app was successfully created.</span></span> <span data-ttu-id="f1df6-160">Nella barra di spostamento a sinistra, viene visualizzato accanto al numero di App web avere nel proprio account di **siti Web** icona e il numero di database viene visualizzato accanto al **database SQL** icona.</span><span class="sxs-lookup"><span data-stu-id="f1df6-160">In the navigation bar at the left, the number of web apps you have in your account appears next to the **Websites** icon, and the number of databases appears next to the **SQL Databases** icon.</span></span>

    ![Pagina di siti Web del portale di gestione sito web creato](deploying-to-production/_static/image3.png)

    <span data-ttu-id="f1df6-162">Il nome dell'app web sarà diverso da dell'app di esempio nella figura.</span><span class="sxs-lookup"><span data-stu-id="f1df6-162">Your web app name will be different from the example app in the illustration.</span></span>

## <a name="deploy-the-application-to-staging"></a><span data-ttu-id="f1df6-163">Distribuire l'applicazione in gestione temporanea</span><span class="sxs-lookup"><span data-stu-id="f1df6-163">Deploy the application to staging</span></span>

<span data-ttu-id="f1df6-164">Ora che è stato creato un'app web e database per l'ambiente di gestione temporanea, è possibile distribuire il progetto a esso.</span><span class="sxs-lookup"><span data-stu-id="f1df6-164">Now that you have created a web app and database for the staging environment, you can deploy the project to it.</span></span>

> [!NOTE]
> <span data-ttu-id="f1df6-165">Queste istruzioni illustrano come creare un profilo di pubblicazione scaricando una *publishsettings* file, che funziona non solo per Azure ma anche per i provider di hosting di terze parti.</span><span class="sxs-lookup"><span data-stu-id="f1df6-165">These instructions show how to create a publish profile by downloading a *.publishsettings* file, which works not only for Azure but also for third-party hosting providers.</span></span> <span data-ttu-id="f1df6-166">La versione più recente SDK di Azure consente inoltre di connettersi direttamente ad Azure da Visual Studio e scegliere da un elenco di App web presenti nel proprio account Azure.</span><span class="sxs-lookup"><span data-stu-id="f1df6-166">The latest Azure SDK also enables you to connect directly to Azure from Visual Studio, and choose from a list of web apps that you have in your Azure account.</span></span> <span data-ttu-id="f1df6-167">In Visual Studio 2013, è possibile accedere ad Azure dal **pubblicazione sul Web** finestra di dialogo o dalle **Esplora Server** finestra.</span><span class="sxs-lookup"><span data-stu-id="f1df6-167">In Visual Studio 2013, you can sign in to Azure from the **Web Publish** dialog or from the **Server Explorer** window.</span></span> <span data-ttu-id="f1df6-168">Per altre informazioni, vedere [creare un'app web ASP.NET in servizio App di Azure](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span><span class="sxs-lookup"><span data-stu-id="f1df6-168">For more information, see [Create an ASP.NET web app in Azure App Service](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span></span>

### <a name="download-the-publishsettings-file"></a><span data-ttu-id="f1df6-169">Scaricare il file con estensione publishsettings</span><span class="sxs-lookup"><span data-stu-id="f1df6-169">Download the .publishsettings file</span></span>

1. <span data-ttu-id="f1df6-170">Fare clic sul nome dell'app web appena creata.</span><span class="sxs-lookup"><span data-stu-id="f1df6-170">Click the name of the web app that you just created.</span></span>

    ![Fare clic sul sito per passare al Dashboard](deploying-to-production/_static/image4.png)
2. <span data-ttu-id="f1df6-172">Sotto **Quick glance** nel **Dashboard** scheda, fare clic su **Scarica profilo di pubblicazione**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-172">Under **Quick glance** in the **Dashboard** tab, click **Download publish profile**.</span></span>

    ![Profilo di pubblicazione collegamento di download](deploying-to-production/_static/image5.png)

    <span data-ttu-id="f1df6-174">Questo passaggio consente di scaricare un file che contiene tutte le impostazioni necessarie per distribuire un'applicazione in app web.</span><span class="sxs-lookup"><span data-stu-id="f1df6-174">This step downloads a file that contains all of the settings that you need in order to deploy an application to your web app.</span></span> <span data-ttu-id="f1df6-175">Come importare questo file in Visual Studio in modo da non dover immettere manualmente queste informazioni.</span><span class="sxs-lookup"><span data-stu-id="f1df6-175">You'll import this file into Visual Studio so you don't have to enter this information manually.</span></span>
3. <span data-ttu-id="f1df6-176">Salvare il *publishsettings* file in una cartella che è possibile accedere da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f1df6-176">Save the *.publishsettings* file in a folder that you can access from Visual Studio.</span></span>

    ![salvataggio del file con estensione publishsettings](deploying-to-production/_static/image6.png)

    > [!WARNING]
    > <span data-ttu-id="f1df6-178">Security - i *publishsettings* file contiene le credenziali (non codificate) usate per amministrare i servizi e le sottoscrizioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="f1df6-178">Security - The *.publishsettings* file contains your credentials (unencoded) that are used to administer your Azure subscriptions and services.</span></span> <span data-ttu-id="f1df6-179">La procedura consigliata di sicurezza per questo file consiste nell'archiviarlo temporaneamente all'esterno delle directory di origine (ad esempio nella cartella raccolte\documenti) e quindi eliminarlo al termine dell'importazione è stata completata.</span><span class="sxs-lookup"><span data-stu-id="f1df6-179">The security best practice for this file is to store it temporarily outside your source directories (for example in the Libraries\Documents folder), and then delete it once the import has completed.</span></span> <span data-ttu-id="f1df6-180">Un utente malintenzionato che riesce ad accedere per il *publishsettings* file può modificare, creare ed eliminare i servizi di Azure.</span><span class="sxs-lookup"><span data-stu-id="f1df6-180">A malicious user who gains access to the *.publishsettings* file can edit, create, and delete your Azure services.</span></span>

### <a name="create-a-publish-profile"></a><span data-ttu-id="f1df6-181">Creare un profilo di pubblicazione</span><span class="sxs-lookup"><span data-stu-id="f1df6-181">Create a publish profile</span></span>

1. <span data-ttu-id="f1df6-182">In Visual Studio, fare doppio clic su progetto in ContosoUniversity **Esplora soluzioni** e selezionare **Publish** dal menu di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="f1df6-182">In Visual Studio, right-click the ContosoUniversity project in **Solution Explorer** and select **Publish** from the context menu.</span></span>

    <span data-ttu-id="f1df6-183">Il **pubblica sul Web** verrà visualizzata la procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="f1df6-183">The **Publish Web** wizard opens.</span></span>
2. <span data-ttu-id="f1df6-184">Scegliere il **profilo** scheda.</span><span class="sxs-lookup"><span data-stu-id="f1df6-184">Click the **Profile** tab.</span></span>
3. <span data-ttu-id="f1df6-185">Fare clic su **Importa**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-185">Click **Import**.</span></span>
4. <span data-ttu-id="f1df6-186">Passare al *publishsettings* del file scaricato in precedenza e quindi fare clic su **Open**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-186">Navigate to the *.publishsettings* file you downloaded earlier, and then click **Open**.</span></span>

    ![Finestra di dialogo Importa impostazioni di pubblicazione](deploying-to-production/_static/image7.png)
5. <span data-ttu-id="f1df6-188">Nel **Connection** scheda, fare clic su **convalida connessione** per assicurarsi che le impostazioni siano corrette.</span><span class="sxs-lookup"><span data-stu-id="f1df6-188">In the **Connection** tab, click **Validate Connection** to make sure that the settings are correct.</span></span>

    <span data-ttu-id="f1df6-189">Quando la connessione è stata convalidata, un segno di spunta verde verrà visualizzato accanto al **convalida connessione** pulsante.</span><span class="sxs-lookup"><span data-stu-id="f1df6-189">When the connection has been validated, a green check mark is shown next to the **Validate Connection** button.</span></span>

    <span data-ttu-id="f1df6-190">Per alcuni provider di hosting, quando si fa clic **convalida connessione**, è possibile visualizzare un **Errore certificato** nella finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f1df6-190">For some hosting providers, when you click **Validate Connection**, you might see a **Certificate Error** dialog box.</span></span> <span data-ttu-id="f1df6-191">Se esegue l'operazione, verificare che il nome del server è quello previsto.</span><span class="sxs-lookup"><span data-stu-id="f1df6-191">If you do, verify that the server name is what you expect.</span></span> <span data-ttu-id="f1df6-192">Se il nome del server sia corretto, selezionare **salvare questo certificato per le sessioni future di Visual Studio** e fare clic su **Accept**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-192">If the server name is correct, select **Save this certificate for future sessions of Visual Studio** and click **Accept**.</span></span> <span data-ttu-id="f1df6-193">(Questo errore indica che il provider di hosting ha scelto di evitare le spese per l'acquisto di un certificato SSL per l'URL a cui viene eseguita la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-193">(This error means that the hosting provider has chosen to avoid the expense of purchasing an SSL certificate for the URL that you are deploying to.</span></span> <span data-ttu-id="f1df6-194">Se si preferisce per stabilire una connessione protetta con un certificato valido, contattare il provider di hosting.)</span><span class="sxs-lookup"><span data-stu-id="f1df6-194">If you prefer to establish a secure connection by using a valid certificate, contact your hosting provider.)</span></span>
6. <span data-ttu-id="f1df6-195">Scegliere **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-195">Click **Next**.</span></span>

    ![icona della connessione ha esito positivo e sul pulsante Avanti nella scheda connessione](deploying-to-production/_static/image8.png)
7. <span data-ttu-id="f1df6-197">Nel **le impostazioni** scheda, quindi espandere **Opzioni pubblicazione File**e quindi selezionare **escludere i file dall'App\_cartella dati**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-197">In the **Settings** tab, expand **File Publish Options**, and then select **Exclude files from the App\_Data folder**.</span></span>

    <span data-ttu-id="f1df6-198">Per informazioni sulle altre opzioni sotto **Opzioni pubblicazione File**, vedere la [distribuzione in IIS](deploying-to-iis.md) esercitazione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-198">For information about the other options under **File Publish Options**, see the [deploying to IIS](deploying-to-iis.md) tutorial.</span></span> <span data-ttu-id="f1df6-199">Lo screenshot che mostra il risultato di questo passaggio e i seguenti passaggi di configurazione di database si trova alla fine dei passaggi di configurazione del database.</span><span class="sxs-lookup"><span data-stu-id="f1df6-199">The screen shot that shows the result of this step and the following database configuration steps is at the end of the database configuration steps.</span></span>
8. <span data-ttu-id="f1df6-200">Sotto **DefaultConnection** nel **database** sezione, configurare la distribuzione di database per il database di appartenenza.</span><span class="sxs-lookup"><span data-stu-id="f1df6-200">Under **DefaultConnection** in the **Databases** section, configure database deployment for the membership database.</span></span>
9. 1. <span data-ttu-id="f1df6-201">Selezionare **aggiornare il database**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-201">Select **Update database**.</span></span>

        <span data-ttu-id="f1df6-202">Il **stringa di connessione remota** casella riportata di seguito **DefaultConnection** compilata con la stringa di connessione dal file con estensione publishsettings. La stringa di connessione include le credenziali di SQL Server, che vengono archiviate in testo normale nel *pubxml* file.</span><span class="sxs-lookup"><span data-stu-id="f1df6-202">The **Remote connection string** box directly below **DefaultConnection** is filled in with the connection string from the .publishsettings file.The connection string includes SQL Server credentials, which are stored in plain text in the *.pubxml* file.</span></span> <span data-ttu-id="f1df6-203">Se si preferisce non archiviarle in modo permanente non esiste, è possibile rimuoverli dal profilo di pubblicazione dopo aver distribuito il database e archiviarle in Azure.</span><span class="sxs-lookup"><span data-stu-id="f1df6-203">If you prefer not to store them permanently there, you can remove them from the publish profile after the database is deployed and store them in Azure instead.</span></span> <span data-ttu-id="f1df6-204">Per altre informazioni, vedere [come proteggere il database ASP.NET le stringhe di connessione durante la distribuzione in Azure dall'origine](http://www.hanselman.com/blog/HowToKeepYourASPNETDatabaseConnectionStringsSecureWhenDeployingToAzureFromSource.aspx) sul blog di Scott Hanselman.</span><span class="sxs-lookup"><span data-stu-id="f1df6-204">For more information, see [How to keep your ASP.NET database connection strings secure when deploying to Azure from Source](http://www.hanselman.com/blog/HowToKeepYourASPNETDatabaseConnectionStringsSecureWhenDeployingToAzureFromSource.aspx) on Scott Hanselman's blog.</span></span>
      2. <span data-ttu-id="f1df6-205">Fare clic su **Configura Aggiornamenti database**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-205">Click **Configure database updates**.</span></span>
      3. <span data-ttu-id="f1df6-206">Nel **Configura Aggiornamenti Database** finestra di dialogo, fare clic su **Aggiungi Script SQL**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-206">In the **Configure Database Updates** dialog box, click **Add SQL Script**.</span></span>
      4. <span data-ttu-id="f1df6-207">Nel **Aggiungi Script SQL** passare alle *aspnet-data-prod.sql* script salvato in precedenza nella cartella della soluzione e quindi fare clic su **Open**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-207">In the **Add SQL Script** box, navigate to the *aspnet-data-prod.sql* script that you saved earlier in the solution folder, and then click **Open**.</span></span>
      5. <span data-ttu-id="f1df6-208">Chiudi il **Configura Aggiornamenti Database** nella finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f1df6-208">Close the **Configure Database Updates** dialog box.</span></span>
10. <span data-ttu-id="f1df6-209">Sotto **SchoolContext** nel **database** sezione, selezionare **Esegui migrazioni Code First (inizia all'avvio dell'applicazione)**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-209">Under **SchoolContext** in the **Databases** section, select **Execute Code First Migrations (runs on application start)**.</span></span>

    <span data-ttu-id="f1df6-210">Visual Studio visualizza **Esegui migrazioni Code First** invece di **aggiornamento Database** per `DbContext` classi.</span><span class="sxs-lookup"><span data-stu-id="f1df6-210">Visual Studio displays **Execute Code First Migrations** instead of **Update Database** for `DbContext` classes.</span></span> <span data-ttu-id="f1df6-211">Se si desidera utilizzare il provider dbDacFx anziché le migrazioni per distribuire un database di cui si accede tramite un `DbContext` classe, vedere [come distribuire un database senza le migrazioni Code First?](https://msdn.microsoft.com/library/ee942158.aspx#deploy_code_first_without_migrations) nelle domande frequenti distribuzione Web per Visual Studio e ASP.NET su MSDN.</span><span class="sxs-lookup"><span data-stu-id="f1df6-211">If you want to use the dbDacFx provider instead of Migrations to deploy a database that you access by using a `DbContext` class, see [How do I deploy a Code First database without Migrations?](https://msdn.microsoft.com/library/ee942158.aspx#deploy_code_first_without_migrations) in the Web Deployment FAQ for Visual Studio and ASP.NET on MSDN.</span></span>

    <span data-ttu-id="f1df6-212">Il **impostazioni** scheda avrà ora un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="f1df6-212">The **Settings** tab now looks like the following example:</span></span>

    ![Scheda Impostazioni per la gestione temporanea](deploying-to-production/_static/image9.png)
11. <span data-ttu-id="f1df6-214">Eseguire la procedura seguente per salvare il profilo e rinominarlo *Staging*:</span><span class="sxs-lookup"><span data-stu-id="f1df6-214">Perform the following steps to save the profile and rename it to *Staging*:</span></span>

    1. <span data-ttu-id="f1df6-215">Scegliere il **profilo** scheda e quindi fare clic su **Gestione profili**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-215">Click the **Profile** tab, and then click **Manage Profiles**.</span></span>
    2. <span data-ttu-id="f1df6-216">L'importazione creati due nuovi profili, uno per FTP e uno per distribuzione Web.</span><span class="sxs-lookup"><span data-stu-id="f1df6-216">The import created two new profiles, one for FTP and one for Web Deploy.</span></span> <span data-ttu-id="f1df6-217">È configurato il profilo di distribuzione Web: rinominare questo profilo per poter *Staging*.</span><span class="sxs-lookup"><span data-stu-id="f1df6-217">You configured the Web Deploy profile: rename this profile to *Staging*.</span></span>

        ![Rinomina profilo di gestione temporanea](deploying-to-production/_static/image10.png)
    3. <span data-ttu-id="f1df6-219">Chiudi il **modifica dei profili di pubblicazione Web** nella finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="f1df6-219">Close the **Edit Web Publish Profiles** dialog box.</span></span>
    4. <span data-ttu-id="f1df6-220">Chiudi il **pubblica sul Web** procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="f1df6-220">Close the **Publish Web** wizard.</span></span>

### <a name="configure-a-publish-profile-transform-for-the-environment-indicator"></a><span data-ttu-id="f1df6-221">Configurare una trasformazione di profilo di pubblicazione per l'indicatore di ambiente</span><span class="sxs-lookup"><span data-stu-id="f1df6-221">Configure a publish profile transform for the environment indicator</span></span>

> [!NOTE]
> <span data-ttu-id="f1df6-222">Questa sezione illustra come configurare una trasformazione Web. config per l'indicatore di ambiente.</span><span class="sxs-lookup"><span data-stu-id="f1df6-222">This section shows how to set up a Web.config transform for the environment indicator.</span></span> <span data-ttu-id="f1df6-223">Poiché l'indicatore è nel `<appSettings>` elemento, si dispone di un'altra alternativa per specificare la trasformazione quando si esegue la distribuzione servizio App di Azure.</span><span class="sxs-lookup"><span data-stu-id="f1df6-223">Because the indicator is in the `<appSettings>` element, you have another alternative for specifying the transformation when you're deploying to Azure App Service.</span></span> <span data-ttu-id="f1df6-224">Per altre informazioni, vedere [Web. config che specifica le impostazioni in Azure](web-config-transformations.md#watransforms).</span><span class="sxs-lookup"><span data-stu-id="f1df6-224">For more information, see [Specifying Web.config settings in Azure](web-config-transformations.md#watransforms).</span></span>

1. <span data-ttu-id="f1df6-225">Nelle **Esplora soluzioni**, espandere **delle proprietà**, quindi espandere **PublishProfiles**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-225">In **Solution Explorer**, expand **Properties**, and then expand **PublishProfiles**.</span></span>
2. <span data-ttu-id="f1df6-226">Fare doppio clic su *Staging.pubxml*, quindi fare clic su **aggiungere Config trasformare**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-226">Right-click *Staging.pubxml*, and then click **Add Config Transform**.</span></span>

    ![Aggiungi trasformazione di configurazione per la gestione temporanea](deploying-to-production/_static/image11.png)

    <span data-ttu-id="f1df6-228">Visual Studio crea il *staging* file di trasformazione e lo apre.</span><span class="sxs-lookup"><span data-stu-id="f1df6-228">Visual Studio creates the *Web.Staging.config* transform file and opens it.</span></span>
3. <span data-ttu-id="f1df6-229">Nel *staging* trasforma il file, inserire il codice seguente immediatamente dopo l'apertura `configuration` tag.</span><span class="sxs-lookup"><span data-stu-id="f1df6-229">In the *Web.Staging.config* transform file, insert the following code immediately after the opening `configuration` tag.</span></span>

    [!code-xml[Main](deploying-to-production/samples/sample1.xml)]

    <span data-ttu-id="f1df6-230">Quando si usa il profilo di pubblicazione di gestione temporanea, questa trasformazione imposta l'indicatore di ambiente da "Prod".</span><span class="sxs-lookup"><span data-stu-id="f1df6-230">When you use the Staging publish profile, this transform sets the environment indicator to "Prod".</span></span> <span data-ttu-id="f1df6-231">Nell'app web distribuita, sarà possibile vedere qualsiasi suffisso, ad esempio "(Dev)" o "(Test)" dopo l'intestazione H1 "Contoso University".</span><span class="sxs-lookup"><span data-stu-id="f1df6-231">In the deployed web app, you won't see any suffix such as "(Dev)" or "(Test)" after the "Contoso University" H1 heading.</span></span>
4. <span data-ttu-id="f1df6-232">Fare doppio clic il *staging* del file e fare clic su **anteprima trasformare** per assicurarsi che la trasformazione si codificano produce le modifiche previste.</span><span class="sxs-lookup"><span data-stu-id="f1df6-232">Right-click the *Web.Staging.config* file and click **Preview Transform** to make sure that the transform you coded produces the expected changes.</span></span>

    <span data-ttu-id="f1df6-233">Il **anteprima Web. config** finestra Mostra il risultato dell'applicazione sia la *Release* Trasforma e il *staging* Trasforma.</span><span class="sxs-lookup"><span data-stu-id="f1df6-233">The **Web.config Preview** window shows the result of applying both the *Web.Release.config* transforms and the *Web.Staging.config* transforms.</span></span>

### <a name="prevent-public-use-of-the-test-app"></a><span data-ttu-id="f1df6-234">Impedire l'uso pubblico dell'app di test</span><span class="sxs-lookup"><span data-stu-id="f1df6-234">Prevent public use of the test app</span></span>

<span data-ttu-id="f1df6-235">Una considerazione importante per le app di gestione temporanea è che sarà in tempo reale su Internet, ma si preferisce non al pubblico per usarlo.</span><span class="sxs-lookup"><span data-stu-id="f1df6-235">An important consideration for the staging app is that it will be live on the Internet, but you don't want the public to use it.</span></span> <span data-ttu-id="f1df6-236">Per ridurre al minimo la probabilità che gli utenti individuare e verranno utilizzato, è possibile usare uno o più dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="f1df6-236">To minimize the likelihood that people will find and use it, you can use one or more of the following methods:</span></span>

- <span data-ttu-id="f1df6-237">Impostare le regole del firewall che consentono l'accesso all'app di gestione temporanea solo da indirizzi IP utilizzabili per testare gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="f1df6-237">Set firewall rules that allow access to the staging app only from IP addresses that you use to test staging.</span></span>
- <span data-ttu-id="f1df6-238">Usare un URL offuscato impossibili da indovinare.</span><span class="sxs-lookup"><span data-stu-id="f1df6-238">Use an obfuscated URL that would be impossible to guess.</span></span>
- <span data-ttu-id="f1df6-239">Creare un *robots* file per garantire che i motori di ricerca verranno non una ricerca per indicizzazione collegamenti di app e report di test ad esso nei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="f1df6-239">Create a *robots.txt* file to ensure that search engines will not crawl the test app and report links to it in search results.</span></span>

<span data-ttu-id="f1df6-240">Il primo di questi metodi è il più efficace, ma non è illustrato in questa esercitazione perché sarebbe necessario distribuire a un servizio Cloud di Azure invece di servizio App di Azure.</span><span class="sxs-lookup"><span data-stu-id="f1df6-240">The first of these methods is the most effective but is not covered in this tutorial because it would require that you deploy to an Azure Cloud Service instead of Azure App Service.</span></span> <span data-ttu-id="f1df6-241">Per altre informazioni sui servizi Cloud e le restrizioni di IP in Azure, vedere [calcolo che ospita le opzioni fornite da Azure](https://docs.microsoft.com/azure/cloud-services/cloud-services-choose-me) e [blocco di indirizzi IP specifici di accedere a un ruolo Web](https://msdn.microsoft.com/library/windowsazure/jj154098.aspx).</span><span class="sxs-lookup"><span data-stu-id="f1df6-241">For more information about Cloud Services and IP restrictions in Azure, see [Compute Hosting Options Provided by Azure](https://docs.microsoft.com/azure/cloud-services/cloud-services-choose-me) and [Block Specific IP Addresses from Accessing a Web Role](https://msdn.microsoft.com/library/windowsazure/jj154098.aspx).</span></span> <span data-ttu-id="f1df6-242">Se si distribuisce in un provider di hosting di terze parti, contattare il provider per scoprire come implementare restrizioni IP.</span><span class="sxs-lookup"><span data-stu-id="f1df6-242">If you are deploying to a third-party hosting provider, contact the provider to find out how to implement IP restrictions.</span></span>

<span data-ttu-id="f1df6-243">Per questa esercitazione si creerà una *robots* file.</span><span class="sxs-lookup"><span data-stu-id="f1df6-243">For this tutorial, you'll create a *robots.txt* file.</span></span>

1. <span data-ttu-id="f1df6-244">Nelle **Esplora soluzioni**, fare clic sul progetto ContosoUniversity e fare clic su **Aggiungi nuovo elemento**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-244">In **Solution Explorer**, right-click the ContosoUniversity project and click **Add New Item**.</span></span>
2. <span data-ttu-id="f1df6-245">Creare una nuova **File di testo** denominate *robots*e inserirvi il testo seguente:</span><span class="sxs-lookup"><span data-stu-id="f1df6-245">Create a new **Text File** named *robots.txt*, and put the following text in it:</span></span>

    [!code-console[Main](deploying-to-production/samples/sample2.cmd)]

    <span data-ttu-id="f1df6-246">Il `User-agent` riga indica che le regole nel file di si applicano a tutti i ricerca web dai crawler del motore (robot), i motori di ricerca e `Disallow` righe specifica che non devono essere una ricerca per indicizzazione le pagine del sito.</span><span class="sxs-lookup"><span data-stu-id="f1df6-246">The `User-agent` line tells search engines that the rules in the file apply to all search engine web crawlers (robots), and the `Disallow` line specifies that no pages on the site should be crawled.</span></span>

    <span data-ttu-id="f1df6-247">Si desidera motori di ricerca catalogo app di produzione, pertanto è necessario escludere questo file dalla distribuzione di produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-247">You do want search engines to catalog your production app, so you need to exclude this file from production deployment.</span></span> <span data-ttu-id="f1df6-248">A scopo, si configurerà un'impostazione in produzione il profilo di pubblicazione durante la creazione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-248">To do that, you'll configure a setting in the Production publish profile when you create it.</span></span>

### <a name="deploy-to-staging"></a><span data-ttu-id="f1df6-249">Distribuire in gestione temporanea</span><span class="sxs-lookup"><span data-stu-id="f1df6-249">Deploy to staging</span></span>

1. <span data-ttu-id="f1df6-250">Aprire il **pubblica sul Web** procedura guidata facendo clic sul progetto Contoso University e facendo clic su **Publish**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-250">Open the **Publish Web** wizard by right-clicking the Contoso University project and clicking **Publish**.</span></span>
2. <span data-ttu-id="f1df6-251">Assicurarsi che il **Staging** profilo è selezionato.</span><span class="sxs-lookup"><span data-stu-id="f1df6-251">Make sure that the **Staging** profile is selected.</span></span>
3. <span data-ttu-id="f1df6-252">Fare clic su **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-252">Click **Publish**.</span></span>

    <span data-ttu-id="f1df6-253">Il **Output** finestra Mostra le azioni di distribuzione sono state eseguite e segnalato il corretto completamento della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-253">The **Output** window shows what deployment actions were taken and reports successful completion of the deployment.</span></span> <span data-ttu-id="f1df6-254">Il browser predefinito verrà aperto automaticamente l'URL dell'app web distribuita.</span><span class="sxs-lookup"><span data-stu-id="f1df6-254">The default browser automatically opens to the URL of the deployed web app.</span></span>

## <a name="test-in-the-staging-environment"></a><span data-ttu-id="f1df6-255">Test nell'ambiente di staging</span><span class="sxs-lookup"><span data-stu-id="f1df6-255">Test in the staging environment</span></span>

<span data-ttu-id="f1df6-256">Si noti che l'indicatore di ambiente è assente (nessun "(test)" o "(Dev)" dopo l'intestazione H1, che indica che il *Web. config* trasformazione per l'indicatore di ambiente ha avuto esito positivo.</span><span class="sxs-lookup"><span data-stu-id="f1df6-256">Notice that the environment indicator is absent (there is no "(Test)" or "(Dev)" after the H1 heading, which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

![Home page gestione temporanea](deploying-to-production/_static/image12.png)

<span data-ttu-id="f1df6-258">Eseguire la **studenti** pagina per verificare che il database distribuito non disponga di alcun studenti.</span><span class="sxs-lookup"><span data-stu-id="f1df6-258">Run the **Students** page to verify that the deployed database has no students.</span></span>

<span data-ttu-id="f1df6-259">Eseguire la **instructors (insegnanti)** pagina per verificare che Code First effettuato il seeding del database con dati instructor:</span><span class="sxs-lookup"><span data-stu-id="f1df6-259">Run the **Instructors** page to verify that Code First seeded the database with instructor data:</span></span>

<span data-ttu-id="f1df6-260">Selezionare **aggiungere gli studenti** dal **studenti** dal menu Aggiungi uno studente e quindi visualizzare il nuovo studente nella **studenti** pagina per verificare che è possibile scrivere nel database .</span><span class="sxs-lookup"><span data-stu-id="f1df6-260">Select **Add Students** from the **Students** menu, add a student, and then view the new student in the **Students** page to verify that you can successfully write to the database.</span></span>

<span data-ttu-id="f1df6-261">Dal **corsi** pagina, fare clic su **crediti Update**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-261">From the **Courses** page, click **Update Credits**.</span></span> <span data-ttu-id="f1df6-262">Il **aggiornamento crediti** pagina richiede autorizzazioni di amministratore, in modo che il **Accedi** viene visualizzata la pagina.</span><span class="sxs-lookup"><span data-stu-id="f1df6-262">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="f1df6-263">Immettere le credenziali dell'account amministratore creato precedenti ("admin" e "prodpwd").</span><span class="sxs-lookup"><span data-stu-id="f1df6-263">Enter the administrator account credentials that you created earlier ("admin" and "prodpwd").</span></span> <span data-ttu-id="f1df6-264">Il **crediti Update** pagina viene visualizzata, verifica che l'account amministratore creato nell'esercitazione precedente è stato distribuito correttamente nell'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="f1df6-264">The **Update Credits** page is displayed, which verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="f1df6-265">Richiedere un URL non valido per provocare un errore che ELMAH registrerà e quindi richiedono il report di errore ELMAH.</span><span class="sxs-lookup"><span data-stu-id="f1df6-265">Request an invalid URL to cause an error that ELMAH will track, and then request the ELMAH error report.</span></span> <span data-ttu-id="f1df6-266">Se si distribuisce in un provider di hosting di terze parti, è probabile che il report è vuoto per lo stesso motivo che era vuoto nell'esercitazione precedente.</span><span class="sxs-lookup"><span data-stu-id="f1df6-266">If you are deploying to a third-party hosting provider, you will probably find that the report is empty for the same reason that it was empty in the previous tutorial.</span></span> <span data-ttu-id="f1df6-267">È necessario usare gli strumenti di gestione di account del provider di hosting per configurare le autorizzazioni per abilitare ELMAH scrivere nella cartella log.</span><span class="sxs-lookup"><span data-stu-id="f1df6-267">You will have to use the hosting provider's account management tools to configure folder permissions to enable ELMAH to write to the log folder.</span></span>

<span data-ttu-id="f1df6-268">L'applicazione creata è in esecuzione nel cloud in un'app web che è esattamente come quello che si userà per la produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-268">The application that you created is now running in the cloud in a web app that is just like what you will use for production.</span></span> <span data-ttu-id="f1df6-269">Poiché tutto funziona correttamente, il passaggio successivo consiste nel distribuire nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-269">Since everything is working correctly, the next step is to deploy to production.</span></span>

## <a name="deploy-to-production"></a><span data-ttu-id="f1df6-270">Distribuire nell'ambiente di produzione</span><span class="sxs-lookup"><span data-stu-id="f1df6-270">Deploy to production</span></span>

<span data-ttu-id="f1df6-271">Il processo per la creazione di un'app web di produzione e la distribuzione nell'ambiente di produzione è identico a quello di gestione temporanea, ad eccezione del fatto che è necessario escludere i *robots* dalla distribuzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-271">The process for creating a production web app and deploying to production is the same as for staging, except that you need to exclude the *robots.txt* from deployment.</span></span> <span data-ttu-id="f1df6-272">A tale scopo si modificherà il file di profilo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-272">To do that you'll edit the publish profile file.</span></span>

### <a name="create-the-production-environment-and-the-production-publish-profile"></a><span data-ttu-id="f1df6-273">Creare l'ambiente di produzione e produzione profilo di pubblicazione</span><span class="sxs-lookup"><span data-stu-id="f1df6-273">Create the production environment and the production publish profile</span></span>

1. <span data-ttu-id="f1df6-274">Creare il database e l'app web di produzione in Azure, seguire la stessa procedura utilizzata per la gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="f1df6-274">Create the production web app and database in Azure, following the same procedure that you used for staging.</span></span>

    <span data-ttu-id="f1df6-275">Quando si crea il database, è possibile scegliere di inserirlo nello stesso server creato in precedenza, o creare un nuovo server.</span><span class="sxs-lookup"><span data-stu-id="f1df6-275">When you create the database, you can choose to put it on the same server you created earlier, or create a new server.</span></span>
2. <span data-ttu-id="f1df6-276">Scaricare il *publishsettings* file.</span><span class="sxs-lookup"><span data-stu-id="f1df6-276">Download the *.publishsettings* file.</span></span>
3. <span data-ttu-id="f1df6-277">Creare il profilo di pubblicazione mediante l'importazione di produzione *publishsettings* file, seguire la stessa procedura utilizzata per la gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="f1df6-277">Create the publish profile by importing the production *.publishsettings* file, following the same procedure that you used for staging.</span></span>

    <span data-ttu-id="f1df6-278">Non dimenticare di configurare lo script di distribuzione dei dati sotto **DefaultConnection** nel **database** sezione del **impostazioni** scheda.</span><span class="sxs-lookup"><span data-stu-id="f1df6-278">Don't forget to configure the data deployment script under **DefaultConnection** in the **Databases** section of the **Settings** tab.</span></span>
4. <span data-ttu-id="f1df6-279">Il profilo di pubblicazione per rinominare *produzione*.</span><span class="sxs-lookup"><span data-stu-id="f1df6-279">Rename the publish profile to *Production*.</span></span>
5. <span data-ttu-id="f1df6-280">Configurare una trasformazione di profilo di pubblicazione per l'indicatore di ambiente, seguire la stessa procedura utilizzata per la gestione temporanea...</span><span class="sxs-lookup"><span data-stu-id="f1df6-280">Configure a publish profile transform for the environment indicator, following the same procedure that you used for staging..</span></span>

### <a name="edit-the-pubxml-file-to-exclude-robotstxt"></a><span data-ttu-id="f1df6-281">Modificare il file con estensione pubxml per escludere robots. txt</span><span class="sxs-lookup"><span data-stu-id="f1df6-281">Edit the .pubxml file to exclude robots.txt</span></span>

<span data-ttu-id="f1df6-282">I file sono denominati profilo di pubblicazione &lt;profilename&gt;*pubxml* e si trovano nel *PublishProfiles* cartella.</span><span class="sxs-lookup"><span data-stu-id="f1df6-282">Publish profile files are named &lt;profilename&gt;*.pubxml* and are located in the *PublishProfiles* folder.</span></span> <span data-ttu-id="f1df6-283">Il *PublishProfiles* cartella si trova sotto il *proprietà* cartella in un'applicazione web c# del progetto, sotto il *progetto personale* cartella in un progetto di applicazione web di Visual Basic o nel *App\_dati* cartella in un progetto di app web.</span><span class="sxs-lookup"><span data-stu-id="f1df6-283">The *PublishProfiles* folder is under the *Properties* folder in a C# web application project, under the *My Project* folder in a VB web application project, or under the *App\_Data* folder in a web app project.</span></span> <span data-ttu-id="f1df6-284">Ciascuna *pubxml* file contiene le impostazioni che si applicano a un profilo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-284">Each *.pubxml* file contains settings that apply to one publish profile.</span></span> <span data-ttu-id="f1df6-285">In questi file vengono archiviati i valori che immessi nella procedura guidata Pubblica sito Web, ed è possibile modificare in modo da creare o modificare le impostazioni che non sono stati resi disponibili nell'interfaccia utente Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f1df6-285">The values you enter in the Publish Web wizard are stored in these files, and you can edit them to create or change settings that aren't made available in the Visual Studio UI.</span></span>

<span data-ttu-id="f1df6-286">Per impostazione predefinita *pubxml* file sono inclusi nel progetto quando si crea un profilo di pubblicazione, ma è possibile escluderli dal progetto e verrà comunque usare Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f1df6-286">By default, *.pubxml* files are included in the project when you create a publish profile, but you can exclude them from the project and Visual Studio will still use them.</span></span> <span data-ttu-id="f1df6-287">Visual Studio cerca nella *PublishProfiles* cartella *pubxml* file, indipendentemente dal fatto che vengono inclusi nel progetto.</span><span class="sxs-lookup"><span data-stu-id="f1df6-287">Visual Studio looks in the *PublishProfiles* folder for *.pubxml* files, regardless of whether they are included in the project.</span></span>

<span data-ttu-id="f1df6-288">Per ognuno *pubxml* file è presente un *. pubxml* file.</span><span class="sxs-lookup"><span data-stu-id="f1df6-288">For each *.pubxml* file there is a *.pubxml.user* file.</span></span> <span data-ttu-id="f1df6-289">Il *. pubxml* file contiene la password crittografata se è stata selezionata la **Salva password** opzione e per impostazione predefinita esso viene escluso dal progetto.</span><span class="sxs-lookup"><span data-stu-id="f1df6-289">The *.pubxml.user* file contains the encrypted password if you selected the **Save password** option, and by default it is excluded from the project.</span></span>

<span data-ttu-id="f1df6-290">Oggetto *pubxml* che contiene le impostazioni che si riferiscono a un profilo di pubblicazione specifico.</span><span class="sxs-lookup"><span data-stu-id="f1df6-290">A *.pubxml* file contains the settings that pertain to a specific publish profile.</span></span> <span data-ttu-id="f1df6-291">Se si desidera configurare le impostazioni che si applicano a tutti i profili, è possibile creare un *. WPP* file.</span><span class="sxs-lookup"><span data-stu-id="f1df6-291">If you want to configure settings that apply to all profiles, you can create a *.wpp.targets* file.</span></span> <span data-ttu-id="f1df6-292">Il processo di compilazione come importare questi file nei *csproj* oppure *vbproj* file di progetto, in modo che la maggior parte delle impostazioni che è possibile configurare nel file di progetto possono essere configurate in questi file.</span><span class="sxs-lookup"><span data-stu-id="f1df6-292">The build process imports these files into the *.csproj* or *.vbproj* project file, so most settings that you can configure in the project file can be configured in these files.</span></span> <span data-ttu-id="f1df6-293">Per altre informazioni sulle *pubxml* i file e *. WPP* i file, vedere [come: Modificare le impostazioni di distribuzione di pubblicano i file di profilo (con estensione pubxml) e il. File WPP nei progetti Web Visual Studio](https://msdn.microsoft.com/library/ff398069.aspx).</span><span class="sxs-lookup"><span data-stu-id="f1df6-293">For more information about *.pubxml* files and *.wpp.targets* files, see [How to: Edit Deployment Settings in Publish Profile (.pubxml) Files and the .wpp.targets File in Visual Studio Web Projects](https://msdn.microsoft.com/library/ff398069.aspx).</span></span>

1. <span data-ttu-id="f1df6-294">Nelle **Esplora soluzioni**, espandere **delle proprietà** ed espandere **PublishProfiles**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-294">In **Solution Explorer**, expand **Properties** and expand **PublishProfiles**.</span></span>
2. <span data-ttu-id="f1df6-295">Fare doppio clic su *Production.pubxml* e fare clic su **Open**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-295">Right-click *Production.pubxml* and click **Open**.</span></span>

    ![Aprire il file con estensione pubxml](deploying-to-production/_static/image13.png)
3. <span data-ttu-id="f1df6-297">Fare doppio clic su *Production.pubxml* e fare clic su **Open**.</span><span class="sxs-lookup"><span data-stu-id="f1df6-297">Right-click *Production.pubxml* and click **Open**.</span></span>
4. <span data-ttu-id="f1df6-298">Aggiungere le righe seguenti immediatamente prima della chiusura `PropertyGroup` elemento:</span><span class="sxs-lookup"><span data-stu-id="f1df6-298">Add the following lines immediately before the closing `PropertyGroup` element:</span></span>

    [!code-xml[Main](deploying-to-production/samples/sample3.xml)]

    <span data-ttu-id="f1df6-299">Il file con estensione pubxml è ora simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="f1df6-299">The .pubxml file now looks like the following example:</span></span>

    [!code-xml[Main](deploying-to-production/samples/sample4.xml?highlight=18-20)]

    <span data-ttu-id="f1df6-300">Per altre informazioni su come escludere file e cartelle, vedere [è possibile escludere cartelle o file specifici dalla distribuzione?](https://msdn.microsoft.com/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment) nel **domande frequenti sulla distribuzione Web per Visual Studio e ASP.NET** su MSDN.</span><span class="sxs-lookup"><span data-stu-id="f1df6-300">For more information about how to exclude files and folders, see [Can I exclude specific files or folders from deployment?](https://msdn.microsoft.com/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment) in the **Web Deployment FAQ for Visual Studio and ASP.NET** on MSDN.</span></span>

### <a name="deploy-to-production"></a><span data-ttu-id="f1df6-301">Distribuire nell'ambiente di produzione</span><span class="sxs-lookup"><span data-stu-id="f1df6-301">Deploy to production</span></span>

1. <span data-ttu-id="f1df6-302">Aprire il **pubblica sul Web** procedura guidata verificare che il **produzione** profilo di pubblicazione sia selezionata e quindi fare clic su **Avvia anteprima** nel **anteprima**pressione di tab per verificare che il *robots* file non verrà copiati all'app di produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-302">Open the **Publish Web** wizard make sure that the **Production** publish profile is selected, and then click **Start Preview** on the **Preview** tab to verify that the *robots.txt* file will not be copied to the production app.</span></span>

    ![Anteprima del file da pubblicare nell'ambiente di produzione](deploying-to-production/_static/image14.png)

    <span data-ttu-id="f1df6-304">Esaminare l'elenco dei file che verranno copiati.</span><span class="sxs-lookup"><span data-stu-id="f1df6-304">Review the list of files that will be copied.</span></span> <span data-ttu-id="f1df6-305">Si noterà che tutti i *cs* i file, inclusi *. aspx.cs*, *. aspx.designer.cs*, *Master.cs*, e  *Master.Designer.cs* i file sono stati omessi.</span><span class="sxs-lookup"><span data-stu-id="f1df6-305">You'll see that all of the *.cs* files, including *.aspx.cs*, *.aspx.designer.cs*, *Master.cs*, and *Master.designer.cs* files are omitted.</span></span> <span data-ttu-id="f1df6-306">Tutto il codice compilato nel *contosouniversity. dll* e *ContosoUniversity.pdb* i file che è possibile trovare nel *bin* cartella.</span><span class="sxs-lookup"><span data-stu-id="f1df6-306">All of this code has been compiled into the *ContosoUniversity.dll* and *ContosoUniversity.pdb* files that you'll find in the *bin* folder.</span></span> <span data-ttu-id="f1df6-307">Poiché solo il *. dll* è necessaria per eseguire l'applicazione ed è stato specificato in precedenza che devono essere distribuiti solo i file necessari per eseguire l'applicazione, no *cs* file sono stati copiati nella destinazione ambiente.</span><span class="sxs-lookup"><span data-stu-id="f1df6-307">Because only the *.dll* is needed to run the application, and you specified earlier that only files needed to run the application should be deployed, no *.cs* files were copied to the destination environment.</span></span> <span data-ttu-id="f1df6-308">Il *obj* cartella e il *Contosouniversity* e *. csproj* file sono stati omessi per lo stesso motivo.</span><span class="sxs-lookup"><span data-stu-id="f1df6-308">The *obj* folder and the *ContosoUniversity.csproj* and *.csproj.user* files are omitted for the same reason.</span></span>

    <span data-ttu-id="f1df6-309">Fare clic su **pubblica** distribuire nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-309">Click **Publish** to deploy to the production environment.</span></span>
2. <span data-ttu-id="f1df6-310">Test nell'ambiente di produzione, seguire la stessa procedura usata per la gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="f1df6-310">Test in production, following the same procedure you used for staging.</span></span>

    <span data-ttu-id="f1df6-311">Tutto ciò che è identica alla gestione temporanea tranne l'URL e l'assenza del *robots* file.</span><span class="sxs-lookup"><span data-stu-id="f1df6-311">Everything is identical to staging except for the URL and the absence of the *robots.txt* file.</span></span>

## <a name="summary"></a><span data-ttu-id="f1df6-312">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="f1df6-312">Summary</span></span>

<span data-ttu-id="f1df6-313">Abbiamo correttamente distribuito e testato l'app web ed è disponibile pubblicamente su Internet.</span><span class="sxs-lookup"><span data-stu-id="f1df6-313">You have now successfully deployed and tested your web app and it is available publicly over the Internet.</span></span>

![Home page produzione](deploying-to-production/_static/image15.png)

<span data-ttu-id="f1df6-315">Nella prossima esercitazione, è possibile aggiornare il codice dell'applicazione e distribuire la modifica agli ambienti di test, staging e produzione.</span><span class="sxs-lookup"><span data-stu-id="f1df6-315">In the next tutorial, you'll update application code and deploy the change to the test, staging, and production environments.</span></span>

> [!NOTE]
> <span data-ttu-id="f1df6-316">Mentre l'applicazione è in uso nell'ambiente di produzione si deve implementare un piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="f1df6-316">While your application is in use in the production environment you should be implementing a recovery plan.</span></span> <span data-ttu-id="f1df6-317">Vale a dire, dovrebbe essere periodicamente il backup dei database dell'app di produzione in un percorso di archiviazione protetta e si devono mantenere varie generazioni di tali backup.</span><span class="sxs-lookup"><span data-stu-id="f1df6-317">That is, you should be periodically backing up your databases from the production app to a secure storage location, and you should be keeping several generations of such backups.</span></span> <span data-ttu-id="f1df6-318">Quando si aggiorna il database, è necessario eseguire una copia di backup da immediatamente prima della modifica.</span><span class="sxs-lookup"><span data-stu-id="f1df6-318">When you update the database, you should make a backup copy from immediately before the change.</span></span> <span data-ttu-id="f1df6-319">Quindi, se si commette un errore e non individua solo dopo aver distribuito nell'ambiente di produzione, è comunque sarà in grado di ripristinare il database allo stato che precedente danneggiamento.</span><span class="sxs-lookup"><span data-stu-id="f1df6-319">Then, if you make a mistake and don't discover it until after you have deployed it to production, you will still be able to recover the database to the state it was in before it became corrupted.</span></span> <span data-ttu-id="f1df6-320">Per altre informazioni, vedere [Azure SQL Database Backup and Restore](https://msdn.microsoft.com/library/windowsazure/jj650016.aspx).</span><span class="sxs-lookup"><span data-stu-id="f1df6-320">For more information, see [Azure SQL Database Backup and Restore](https://msdn.microsoft.com/library/windowsazure/jj650016.aspx).</span></span>
> 
> 
> [!NOTE]
> <span data-ttu-id="f1df6-321">In questa esercitazione di SQL Server edition che viene eseguita la distribuzione è il Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="f1df6-321">In this tutorial the SQL Server edition that you are deploying to is Azure SQL Database.</span></span> <span data-ttu-id="f1df6-322">Durante il processo di distribuzione è simile ad altre edizioni di SQL Server, un'applicazione di produzione reale potrebbe richiedere un codice speciale per il Database SQL di Azure in alcuni scenari.</span><span class="sxs-lookup"><span data-stu-id="f1df6-322">While the deployment process is similar to other editions of SQL Server, a real production application might require special code for Azure SQL Database in some scenarios.</span></span> <span data-ttu-id="f1df6-323">Per altre informazioni, vedere [utilizzo di Database SQL di Azure](../../../../whitepapers/aspnet-data-access-content-map.md#ssdb) e [scelta tra SQL Server e Database SQL di Azure](../../../../whitepapers/aspnet-data-access-content-map.md#ssdbchoosing).</span><span class="sxs-lookup"><span data-stu-id="f1df6-323">For more information, see [Working with Azure SQL Database](../../../../whitepapers/aspnet-data-access-content-map.md#ssdb) and [Choosing between SQL Server and Azure SQL Database](../../../../whitepapers/aspnet-data-access-content-map.md#ssdbchoosing).</span></span>
> 
> [!div class="step-by-step"]
> <span data-ttu-id="f1df6-324">[Precedente](setting-folder-permissions.md)
> [Successivo](deploying-a-code-update.md)</span><span class="sxs-lookup"><span data-stu-id="f1df6-324">[Previous](setting-folder-permissions.md)
[Next](deploying-a-code-update.md)</span></span>
