---
uid: web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
title: Creazione di un'interfaccia per selezionare un Account utente da molti (c#) | Microsoft Docs
author: rick-anderson
description: In questa esercitazione si compilerà un'interfaccia utente con una griglia di paging, filtrabile. In particolare, l'interfaccia utente sarà costituito da una serie di LinkButton per...
ms.author: riande
ms.date: 04/01/2008
ms.assetid: 9e4e687c-b4ec-434f-a4ef-edb0b8f365e4
msc.legacyurl: /web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
msc.type: authoredcontent
ms.openlocfilehash: 863ac36ae6a94ece841088db925c04deb3bf36c9
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57061948"
---
<a name="building-an-interface-to-select-one-user-account-from-many-c"></a><span data-ttu-id="ede2f-104">Creazione di un'interfaccia per la selezione di un account utente tra diversi account (C#)</span><span class="sxs-lookup"><span data-stu-id="ede2f-104">Building an Interface to Select One User Account from Many (C#)</span></span>
====================
<span data-ttu-id="ede2f-105">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ede2f-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ede2f-106">[Scaricare il codice](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) o [Scarica il PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="ede2f-106">[Download Code](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) or [Download PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span></span>

> <span data-ttu-id="ede2f-107">In questa esercitazione si compilerà un'interfaccia utente con una griglia di paging, filtrabile.</span><span class="sxs-lookup"><span data-stu-id="ede2f-107">In this tutorial we will build a user interface with a paged, filterable grid.</span></span> <span data-ttu-id="ede2f-108">In particolare, l'interfaccia utente sarà costituito da una serie di LinkButton per filtrare i risultati in base alla lettera inizia del nome utente e un controllo GridView per mostrare gli utenti corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="ede2f-108">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="ede2f-109">Si inizierà elencando tutti gli account utente in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="ede2f-109">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="ede2f-110">Nel passaggio 3, quindi, si aggiungerà il filtro LinkButton.</span><span class="sxs-lookup"><span data-stu-id="ede2f-110">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="ede2f-111">Passaggio 4 esamina il paging dei risultati filtrati.</span><span class="sxs-lookup"><span data-stu-id="ede2f-111">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="ede2f-112">L'interfaccia creato nei passaggi da 2 a 4 verrà considerato nelle esercitazioni successive per eseguire attività amministrative per un particolare account utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-112">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>


## <a name="introduction"></a><span data-ttu-id="ede2f-113">Introduzione</span><span class="sxs-lookup"><span data-stu-id="ede2f-113">Introduction</span></span>

<span data-ttu-id="ede2f-114">Nel <a id="_msoanchor_1"> </a> [ *assegnando ruoli agli utenti* ](../roles/assigning-roles-to-users-cs.md) esercitazione, abbiamo creato un'interfaccia rudimentale per un amministratore di selezionare un utente e gestire i ruoli di suo.</span><span class="sxs-lookup"><span data-stu-id="ede2f-114">In the <a id="_msoanchor_1"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, we created a rudimentary interface for an administrator to select a user and manage her roles.</span></span> <span data-ttu-id="ede2f-115">In particolare, l'interfaccia visualizzata all'amministratore un elenco di riepilogo a discesa di tutti gli utenti.</span><span class="sxs-lookup"><span data-stu-id="ede2f-115">Specifically, the interface presented the administrator with a drop-down list of all of the users.</span></span> <span data-ttu-id="ede2f-116">Tale interfaccia è adatto quando sono presenti ma una decina utente degli account, ma è difficile da gestire per i siti con centinaia o migliaia di account.</span><span class="sxs-lookup"><span data-stu-id="ede2f-116">Such an interface is suitable when there are but a dozen or so user accounts, but is unwieldy for sites with hundreds or thousands of accounts.</span></span> <span data-ttu-id="ede2f-117">Una griglia di paging, filtrabile è più adatto dell'interfaccia utente per i siti Web con basi utente di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="ede2f-117">A paged, filterable grid is more suitable user interface for websites with large user bases.</span></span>

<span data-ttu-id="ede2f-118">In questa esercitazione si compilerà un'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-118">In this tutorial we will build such a user interface.</span></span> <span data-ttu-id="ede2f-119">In particolare, l'interfaccia utente sarà costituito da una serie di LinkButton per filtrare i risultati in base alla lettera inizia del nome utente e un controllo GridView per mostrare gli utenti corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="ede2f-119">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="ede2f-120">Si inizierà elencando tutti gli account utente in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="ede2f-120">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="ede2f-121">Nel passaggio 3, quindi, si aggiungerà il filtro LinkButton.</span><span class="sxs-lookup"><span data-stu-id="ede2f-121">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="ede2f-122">Passaggio 4 esamina il paging dei risultati filtrati.</span><span class="sxs-lookup"><span data-stu-id="ede2f-122">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="ede2f-123">L'interfaccia creato nei passaggi da 2 a 4 verrà considerato nelle esercitazioni successive per eseguire attività amministrative per un particolare account utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-123">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

<span data-ttu-id="ede2f-124">Iniziamo!</span><span class="sxs-lookup"><span data-stu-id="ede2f-124">Let's get started!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="ede2f-125">Passaggio 1: Aggiunta di nuove pagine ASP.NET</span><span class="sxs-lookup"><span data-stu-id="ede2f-125">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="ede2f-126">In questa esercitazione e i successivi due è verrà esaminando le funzioni relative all'amministrazione e le funzionalità.</span><span class="sxs-lookup"><span data-stu-id="ede2f-126">In this tutorial and the next two we will be examining various administration-related functions and capabilities.</span></span> <span data-ttu-id="ede2f-127">È necessario una serie di pagine ASP.NET per implementare gli argomenti esaminati in queste esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="ede2f-127">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="ede2f-128">È possibile creare queste pagine e aggiornare la mappa del sito.</span><span class="sxs-lookup"><span data-stu-id="ede2f-128">Let's create these pages and update the site map.</span></span>

<span data-ttu-id="ede2f-129">Iniziare creando una nuova cartella nel progetto denominato `Administration`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-129">Start by creating a new folder in the project named `Administration`.</span></span> <span data-ttu-id="ede2f-130">Successivamente, aggiungere due nuove pagine ASP.NET nella cartella, ogni pagina con il collegamento di `Site.master` pagina master.</span><span class="sxs-lookup"><span data-stu-id="ede2f-130">Next, add two new ASP.NET pages to the folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="ede2f-131">Denominare le pagine:</span><span class="sxs-lookup"><span data-stu-id="ede2f-131">Name the pages:</span></span>

- `ManageUsers.aspx`
- `UserInformation.aspx`

<span data-ttu-id="ede2f-132">Aggiungere anche due pagine alla directory radice del sito Web: `ChangePassword.aspx` e `RecoverPassword.aspx`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-132">Also add two pages to the website's root directory: `ChangePassword.aspx` and `RecoverPassword.aspx`.</span></span>

<span data-ttu-id="ede2f-133">Questi quattro pagine, a questo punto, è necessario due controlli contenuto, uno per ognuno degli elementi ContentPlaceHolder della pagina master: `MainContent` e `LoginContent`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-133">These four pages should, at this point, have two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample1.aspx)]

<span data-ttu-id="ede2f-134">Si vuole visualizzare il markup predefinito della pagina master per il `LoginContent` ContentPlaceHolder per queste pagine.</span><span class="sxs-lookup"><span data-stu-id="ede2f-134">We want to show the master page's default markup for the `LoginContent` ContentPlaceHolder for these pages.</span></span> <span data-ttu-id="ede2f-135">Pertanto, rimuovere il markup dichiarativo per la `Content2` controllo contenuto.</span><span class="sxs-lookup"><span data-stu-id="ede2f-135">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="ede2f-136">Al termine dell'operazione, il markup alla pagina deve contenere solo un controllo contenuto.</span><span class="sxs-lookup"><span data-stu-id="ede2f-136">After doing so, the pages' markup should contain just one Content control.</span></span>

<span data-ttu-id="ede2f-137">Pagine di ASP.NET il `Administration` cartella sono destinati esclusivamente agli utenti amministratori.</span><span class="sxs-lookup"><span data-stu-id="ede2f-137">The ASP.NET pages in the `Administration` folder are intended solely for administrative users.</span></span> <span data-ttu-id="ede2f-138">Abbiamo aggiunto un ruolo di amministratore per il sistema dei <a id="_msoanchor_2"> </a> [ *creazione e gestione dei ruoli* ](../roles/creating-and-managing-roles-cs.md) esercitazione; limitare l'accesso a queste due pagine a questo ruolo.</span><span class="sxs-lookup"><span data-stu-id="ede2f-138">We added an Administrators role to the system in the <a id="_msoanchor_2"></a>[*Creating and Managing Roles*](../roles/creating-and-managing-roles-cs.md) tutorial; restrict access to these two pages to this role.</span></span> <span data-ttu-id="ede2f-139">A tale scopo, aggiungere un `Web.config` file per il `Administration` cartella e configurare relativo `<authorization>` elemento ammettere che gli utenti nel ruolo Administrators e negare tutte le altre.</span><span class="sxs-lookup"><span data-stu-id="ede2f-139">To accomplish this, add a `Web.config` file to the `Administration` folder and configure its `<authorization>` element to admit users in the Administrators role and to deny all others.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample2.xml)]

<span data-ttu-id="ede2f-140">Esplora soluzioni del progetto a questo punto dovrebbe essere simile allo screenshot illustrato nella figura 1.</span><span class="sxs-lookup"><span data-stu-id="ede2f-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>


<span data-ttu-id="ede2f-141">[![Sono stati aggiunti quattro nuove pagine e un File Web. config per il sito Web](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-141">[![Four New Pages and a Web.config File Have Been Added to the Website](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span></span>

<span data-ttu-id="ede2f-142">**Figura 1**: Quattro nuove pagine e una `Web.config` File sono stati aggiunti al sito Web ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-142">**Figure 1**: Four New Pages and a `Web.config` File Have Been Added to the Website  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span></span>


<span data-ttu-id="ede2f-143">Infine, aggiornare la mappa del sito (`Web.sitemap`) per includere una voce per il `ManageUsers.aspx` pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-143">Finally, update the site map (`Web.sitemap`) to include an entry to the `ManageUsers.aspx` page.</span></span> <span data-ttu-id="ede2f-144">Aggiungere il codice XML seguente dopo il `<siteMapNode>` è stato aggiunto per le esercitazioni di ruoli.</span><span class="sxs-lookup"><span data-stu-id="ede2f-144">Add the following XML after the `<siteMapNode>` we added for the Roles tutorials.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample3.xml)]

<span data-ttu-id="ede2f-145">Con la mappa del sito aggiornata, visitare il sito tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="ede2f-145">With the site map updated, visit the site through a browser.</span></span> <span data-ttu-id="ede2f-146">Come illustrato nella figura 2, la navigazione a sinistra ora include elementi per le esercitazioni di amministrazione.</span><span class="sxs-lookup"><span data-stu-id="ede2f-146">As Figure 2 shows, the navigation on the left now includes items for the Administration tutorials.</span></span>


<span data-ttu-id="ede2f-147">[![Mappa del sito include un nodo denominato Amministrazione utenti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-147">[![The Site Map Includes a Node Titled User Administration](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span></span>

<span data-ttu-id="ede2f-148">**Figura 2**: Mappa del sito include un nodo denominato utente amministrazione ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-148">**Figure 2**: The Site Map Includes a Node Titled User Administration  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span></span>


## <a name="step-2-listing-all-user-accounts-in-a-gridview"></a><span data-ttu-id="ede2f-149">Passaggio 2: Elenca tutti gli account utente in un oggetto GridView</span><span class="sxs-lookup"><span data-stu-id="ede2f-149">Step 2: Listing All User Accounts in a GridView</span></span>

<span data-ttu-id="ede2f-150">L'obiettivo finale per questa esercitazione consiste nel creare una griglia di paging, filtrabile attraverso il quale un amministratore può selezionare un account utente da gestire.</span><span class="sxs-lookup"><span data-stu-id="ede2f-150">Our end goal for this tutorial is to create a paged, filterable grid through which an administrator can select a user account to manage.</span></span> <span data-ttu-id="ede2f-151">Iniziamo pubblicando un'inserzione *tutti* gli utenti in un controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="ede2f-151">Let's start by listing *all* users in a GridView.</span></span> <span data-ttu-id="ede2f-152">Al termine, verrà aggiunto il filtro e paging interfacce e funzionalità.</span><span class="sxs-lookup"><span data-stu-id="ede2f-152">Once this is complete, we will add the filtering and paging interfaces and functionality.</span></span>

<span data-ttu-id="ede2f-153">Aprire il `ManageUsers.aspx` nella pagina la `Administration` cartella e aggiungere un controllo GridView, impostando relativo `ID` a `UserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-153">Open the `ManageUsers.aspx` page in the `Administration` folder and add a GridView, setting its `ID` to `UserAccounts`.</span></span> <span data-ttu-id="ede2f-154">In pochi istanti si scriverà il codice per associare il set di account utente per il controllo GridView usando il `Membership` della classe `GetAllUsers` (metodo).</span><span class="sxs-lookup"><span data-stu-id="ede2f-154">In a moment, we will write code to bind the set of user accounts to the GridView using the `Membership` class's `GetAllUsers` method.</span></span> <span data-ttu-id="ede2f-155">Come illustrato nelle esercitazioni precedenti, il metodo GetAllUsers restituisce un `MembershipUserCollection` oggetto, ovvero una raccolta di `MembershipUser` oggetti.</span><span class="sxs-lookup"><span data-stu-id="ede2f-155">As discussed in earlier tutorials, the GetAllUsers method returns a `MembershipUserCollection` object, which is a collection of `MembershipUser` objects.</span></span> <span data-ttu-id="ede2f-156">Ciascuna `MembershipUser` nella raccolta sono incluse proprietà come `UserName`, `Email`, `IsApproved`e così via.</span><span class="sxs-lookup"><span data-stu-id="ede2f-156">Each `MembershipUser` in the collection includes properties like `UserName`, `Email`, `IsApproved`, and so on.</span></span>

<span data-ttu-id="ede2f-157">Per visualizzare le informazioni dell'account utente desiderato in GridView, impostare il controllo GridView `AutoGenerateColumns` la proprietà su False e aggiungere i BoundField per il `UserName`, `Email`, e `Comment` le proprietà e CheckBoxFields per il `IsApproved`, `IsLockedOut`, e `IsOnline` proprietà.</span><span class="sxs-lookup"><span data-stu-id="ede2f-157">In order to display the desired user account information in the GridView, set the GridView's `AutoGenerateColumns` property to False and add BoundFields for the `UserName`, `Email`, and `Comment` properties and CheckBoxFields for the `IsApproved`, `IsLockedOut`, and `IsOnline` properties.</span></span> <span data-ttu-id="ede2f-158">Questa configurazione può essere applicata tramite il tag del controllo dichiarativa o la finestra di dialogo campi.</span><span class="sxs-lookup"><span data-stu-id="ede2f-158">This configuration can be applied through the control's declarative markup or via the Fields dialog box.</span></span> <span data-ttu-id="ede2f-159">Figura 3 mostra una schermata dei campi nella finestra di dialogo dopo che è stata deselezionata la casella di controllo delle genera automaticamente i campi e i BoundField e CheckBoxFields sono stati aggiunti e configurati.</span><span class="sxs-lookup"><span data-stu-id="ede2f-159">Figure 3 shows a screen shot of the Fields dialog box after the Auto-generate fields checkbox has been unchecked and the BoundFields and CheckBoxFields have been added and configured.</span></span>


<span data-ttu-id="ede2f-160">[![Aggiungere tre BoundField e tre CheckBoxFields a GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-160">[![Add Three BoundFields and Three CheckBoxFields to the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span></span>

<span data-ttu-id="ede2f-161">**Figura 3**: Aggiungere tre BoundField e CheckBoxFields tre per il controllo GridView ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-161">**Figure 3**: Add Three BoundFields and Three CheckBoxFields to the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span></span>


<span data-ttu-id="ede2f-162">Dopo aver configurato il controllo GridView, assicurarsi che il markup dichiarativo simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="ede2f-162">After configuring your GridView, ensure that its declarative markup resembles the following:</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample4.aspx)]

<span data-ttu-id="ede2f-163">Successivamente, è necessario scrivere codice che associa gli account utente a GridView.</span><span class="sxs-lookup"><span data-stu-id="ede2f-163">Next, we need to write code that binds the user accounts to the GridView.</span></span> <span data-ttu-id="ede2f-164">Creare un metodo denominato `BindUserAccounts` per eseguire questa attività e chiamarlo successivamente dal `Page_Load` gestore dell'evento nella prima visita pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-164">Create a method named `BindUserAccounts` to perform this task and then call it from the `Page_Load` event handler on the first page visit.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample5.cs)]

<span data-ttu-id="ede2f-165">Si consiglia di testare la pagina tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="ede2f-165">Take a moment to test the page through a browser.</span></span> <span data-ttu-id="ede2f-166">Come illustrato nella figura 4, il `UserAccounts` GridView sono elencati il nome utente, indirizzo di posta elettronica e altre informazioni sugli account pertinenti per tutti gli utenti nel sistema.</span><span class="sxs-lookup"><span data-stu-id="ede2f-166">As Figure 4 shows, the `UserAccounts` GridView lists the username, email address, and other pertinent account information for all users in the system.</span></span>


<span data-ttu-id="ede2f-167">[![Vengono elencati gli account utente in GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-167">[![The User Accounts are Listed in the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span></span>

<span data-ttu-id="ede2f-168">**Figura 4**: Vengono elencati gli account utente in GridView ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-168">**Figure 4**: The User Accounts are Listed in the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span></span>


## <a name="step-3-filtering-the-results-by-the-first-letter-of-the-username"></a><span data-ttu-id="ede2f-169">Passaggio 3: Filtrare i risultati in base alla prima lettera del nome utente</span><span class="sxs-lookup"><span data-stu-id="ede2f-169">Step 3: Filtering the Results by the First Letter of the Username</span></span>

<span data-ttu-id="ede2f-170">Attualmente le `UserAccounts` controllo GridView sono visualizzate *tutto* degli account utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-170">Currently the `UserAccounts` GridView shows *all* of the user accounts.</span></span> <span data-ttu-id="ede2f-171">Per i siti Web con centinaia o migliaia di account utente, è fondamentale che essere in grado di ridurre rapidamente gli account visualizzati quell'utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-171">For websites with hundreds or thousands of user accounts, it is imperative that user be able to quickly pare down the displayed accounts.</span></span> <span data-ttu-id="ede2f-172">È possibile aggiungendo filtri LinkButton alla pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-172">This can be accomplished by adding filtering LinkButtons to the page.</span></span> <span data-ttu-id="ede2f-173">È possibile aggiungere i controlli 27 LinkButton alla pagina: uno denominato tutte insieme a un controllo LinkButton per ogni lettera dell'alfabeto.</span><span class="sxs-lookup"><span data-stu-id="ede2f-173">Let's add 27 LinkButtons to the page: one titled All along with one LinkButton for each letter of the alphabet.</span></span> <span data-ttu-id="ede2f-174">Se un visitatore sceglie il LinkButton tutti, il controllo GridView mostrerà tutti gli utenti.</span><span class="sxs-lookup"><span data-stu-id="ede2f-174">If a visitor clicks the All LinkButton, the GridView will show all of the users.</span></span> <span data-ttu-id="ede2f-175">Se si fa clic su una determinata lettera, verranno visualizzati solo agli utenti il cui nome utente inizi con la lettera selezionata.</span><span class="sxs-lookup"><span data-stu-id="ede2f-175">If they click a particular letter, only those users whose username starts with the selected letter will be displayed.</span></span>

<span data-ttu-id="ede2f-176">La prima attività consiste nell'aggiungere i controlli LinkButton 27.</span><span class="sxs-lookup"><span data-stu-id="ede2f-176">Our first task is to add the 27 LinkButton controls.</span></span> <span data-ttu-id="ede2f-177">Sarebbe un'opzione per creare il 27 LinkButton in modo dichiarativo, uno alla volta.</span><span class="sxs-lookup"><span data-stu-id="ede2f-177">One option would be to create the 27 LinkButtons declaratively, one at a time.</span></span> <span data-ttu-id="ede2f-178">Un approccio più flessibile consiste nell'usare un controllo Repeater con un `ItemTemplate` che esegue il rendering di un controllo LinkButton e si associa quindi le opzioni di filtro per il controllo Repeater come un `string` matrice.</span><span class="sxs-lookup"><span data-stu-id="ede2f-178">A more flexible approach is to use a Repeater control with an `ItemTemplate` that renders a LinkButton and then binds the filtering options to the Repeater as a `string` array.</span></span>

<span data-ttu-id="ede2f-179">Avvio tramite l'aggiunta di un controllo Repeater alla pagina precedente il `UserAccounts` GridView.</span><span class="sxs-lookup"><span data-stu-id="ede2f-179">Start by adding a Repeater control to the page above the `UserAccounts` GridView.</span></span> <span data-ttu-id="ede2f-180">Impostare il controllo Repeater `ID` proprietà `FilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-180">Set the Repeater's `ID` property to `FilteringUI`.</span></span> <span data-ttu-id="ede2f-181">Configurare i modelli del controllo Repeater, in modo che il `ItemTemplate` esegue il rendering di un controllo LinkButton cui `Text` e `CommandName` proprietà sono associate all'elemento della matrice corrente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-181">Configure the Repeater's templates so that its `ItemTemplate` renders a LinkButton whose `Text` and `CommandName` properties are bound to the current array element.</span></span> <span data-ttu-id="ede2f-182">Come abbiamo visto nel <a id="_msoanchor_3"> </a> [ *assegnando ruoli agli utenti* ](../roles/assigning-roles-to-users-cs.md) tutorial, ciò è possibile usare il `Container.DataItem` sintassi di associazione dati.</span><span class="sxs-lookup"><span data-stu-id="ede2f-182">As we saw in the <a id="_msoanchor_3"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, this can be accomplished using the `Container.DataItem` databinding syntax.</span></span> <span data-ttu-id="ede2f-183">Usare il controllo Repeater `SeparatorTemplate` per visualizzare una linea verticale tra ogni collegamento.</span><span class="sxs-lookup"><span data-stu-id="ede2f-183">Use the Repeater's `SeparatorTemplate` to display a vertical line between each link.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample6.aspx)]

<span data-ttu-id="ede2f-184">Per popolare il Repeater con le opzioni di filtro desiderati, creare un metodo denominato `BindFilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-184">To populate this Repeater with the desired filtering options, create a method named `BindFilteringUI`.</span></span> <span data-ttu-id="ede2f-185">Assicurarsi di chiamare questo metodo dal `Page_Load` gestore dell'evento il primo caricamento della pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-185">Be sure to call this method from the `Page_Load` event handler on the first page load.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample7.cs)]

<span data-ttu-id="ede2f-186">Questo metodo consente di specificare le opzioni di filtro come elementi nel `string` matrice `filterOptions`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-186">This method specifies the filtering options as elements in the `string` array `filterOptions`.</span></span> <span data-ttu-id="ede2f-187">Per ogni elemento nella matrice, il controllo Repeater verrà eseguito il rendering di un elemento LinkButton con il relativo `Text` e `CommandName` proprietà assegnata al valore dell'elemento della matrice.</span><span class="sxs-lookup"><span data-stu-id="ede2f-187">For each element in the array, the Repeater will render a LinkButton with its `Text` and `CommandName` properties assigned to the value of the array element.</span></span>

<span data-ttu-id="ede2f-188">Figura 5 mostra il `ManageUsers.aspx` pagina quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="ede2f-188">Figure 5 shows the `ManageUsers.aspx` page when viewed through a browser.</span></span>


<span data-ttu-id="ede2f-189">[![Il controllo Repeater elenca 27 LinkButton filtro](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-189">[![The Repeater Lists 27 Filtering LinkButtons](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span></span>

<span data-ttu-id="ede2f-190">**Figura 5**: Il controllo Repeater elenca 27 filtro LinkButton ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-190">**Figure 5**: The Repeater Lists 27 Filtering LinkButtons  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span></span>


> [!NOTE]
> <span data-ttu-id="ede2f-191">I nomi utente possono iniziare con qualsiasi carattere, inclusi i numeri e segni di punteggiatura.</span><span class="sxs-lookup"><span data-stu-id="ede2f-191">Usernames may start with any character, including numbers and punctuation.</span></span> <span data-ttu-id="ede2f-192">Per visualizzare questi account, l'amministratore dovrà usare l'opzione LinkButton tutti.</span><span class="sxs-lookup"><span data-stu-id="ede2f-192">In order to view these accounts, the administrator will have to use the All LinkButton option.</span></span> <span data-ttu-id="ede2f-193">In alternativa, è possibile aggiungere un controllo LinkButton per restituire tutti gli account utente che iniziano con un numero.</span><span class="sxs-lookup"><span data-stu-id="ede2f-193">Alternatively, you could add a LinkButton to return all user accounts that start with a number.</span></span> <span data-ttu-id="ede2f-194">Lasciare come esercizio per il lettore.</span><span class="sxs-lookup"><span data-stu-id="ede2f-194">I leave this as an exercise for the reader.</span></span>


<span data-ttu-id="ede2f-195">Facendo clic su uno qualsiasi del LinkButton filtro determina un postback e genera il Repeater `ItemCommand` evento, ma non viene modificata nella griglia, perché dobbiamo ancora scrivere codice per filtrare i risultati.</span><span class="sxs-lookup"><span data-stu-id="ede2f-195">Clicking any of the filtering LinkButtons causes a postback and raises the Repeater's `ItemCommand` event, but there's no change in the grid because we've yet to write any code to filter the results.</span></span> <span data-ttu-id="ede2f-196">Il `Membership` classe include una [ `FindUsersByName` metodo](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) che restituisce gli account utente il cui nome utente corrisponde a un criterio di ricerca specificati.</span><span class="sxs-lookup"><span data-stu-id="ede2f-196">The `Membership` class includes a [`FindUsersByName` method](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) that returns those user accounts whose username matches a specified search pattern.</span></span> <span data-ttu-id="ede2f-197">È possibile usare questo metodo per recuperare solo gli account utente i cui nomi utente iniziano con la lettera specificata dal `CommandName` del controllo LinkButton filtrato su cui è stato fatto clic.</span><span class="sxs-lookup"><span data-stu-id="ede2f-197">We can use this method to retrieve just those user accounts whose usernames start with the letter specified by the `CommandName` of the filtered LinkButton that was clicked.</span></span>

<span data-ttu-id="ede2f-198">Per iniziare, aggiornare il `ManageUser.aspx` code-behind della pagina classe in modo che includa una proprietà denominata `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-198">Start by updating the `ManageUser.aspx` page's code-behind class so that it includes a property named `UsernameToMatch`.</span></span> <span data-ttu-id="ede2f-199">Questa proprietà viene mantenuta la stringa di filtro di nome utente durante i postback:</span><span class="sxs-lookup"><span data-stu-id="ede2f-199">This property persists the username filter string across postbacks:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample8.cs)]

<span data-ttu-id="ede2f-200">Il `UsernameToMatch` proprietà archivia il relativo valore viene assegnato nel `ViewState` raccolta utilizzando la chiave UsernameToMatch.</span><span class="sxs-lookup"><span data-stu-id="ede2f-200">The `UsernameToMatch` property stores its value it is assigned into the `ViewState` collection using the key UsernameToMatch.</span></span> <span data-ttu-id="ede2f-201">Quando questo valore della proprietà viene letta, controlla se un valore presente nel `ViewState` insieme; in caso contrario, viene restituito il valore predefinito, una stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="ede2f-201">When this property's value is read, it checks to see if a value exists in the `ViewState` collection; if not, it returns the default value, an empty string.</span></span> <span data-ttu-id="ede2f-202">Il `UsernameToMatch` proprietà presenta un modello comune, vale a dire rendere persistente un valore per visualizzare lo stato in modo che tutte le modifiche alla proprietà sono mantenute tra i postback.</span><span class="sxs-lookup"><span data-stu-id="ede2f-202">The `UsernameToMatch` property exhibits a common pattern, namely persisting a value to view state so that any changes to the property are persisted across postbacks.</span></span> <span data-ttu-id="ede2f-203">Per altre informazioni su questo modello, leggere [informazioni sullo stato di visualizzazione ASP.NET](https://msdn.microsoft.com/library/ms972976.aspx).</span><span class="sxs-lookup"><span data-stu-id="ede2f-203">For more information on this pattern, read [Understanding ASP.NET View State](https://msdn.microsoft.com/library/ms972976.aspx).</span></span>

<span data-ttu-id="ede2f-204">A questo punto, aggiornare il `BindUserAccounts` metodo in modo che anziché chiamare il metodo `Membership.GetAllUsers`, chiama `Membership.FindUsersByName`, passando il valore della `UsernameToMatch` proprietà accodata con il carattere jolly SQL, %.</span><span class="sxs-lookup"><span data-stu-id="ede2f-204">Next, update the `BindUserAccounts` method so that instead of calling `Membership.GetAllUsers`, it calls `Membership.FindUsersByName`, passing in the value of the `UsernameToMatch` property appended with the SQL wildcard character, %.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample9.cs)]

<span data-ttu-id="ede2f-205">Per visualizzare solo gli utenti il cui nome utente inizi con la lettera A, impostare il `UsernameToMatch` proprietà ad A, quindi chiamare `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-205">To display just those users whose username starts with the letter A, set the `UsernameToMatch` property to A and then call `BindUserAccounts`.</span></span> <span data-ttu-id="ede2f-206">Questo porterebbe a una chiamata a `Membership.FindUsersByName("A%")`, che restituirà tutti gli utenti il cui nome utente inizi con A. Analogamente, per restituire *tutte le* gli utenti, assegnare una stringa vuota per il `UsernameToMatch` proprietà in modo che il `BindUserAccounts` verrà (metodo) richiamare `Membership.FindUsersByName("%")`, in tal modo la restituzione di tutti gli account utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-206">This would result in a call to `Membership.FindUsersByName("A%")`, which will return all users whose username starts with A. Likewise, to return *all* users, assign an empty string to the `UsernameToMatch` property so that the `BindUserAccounts` method will invoke `Membership.FindUsersByName("%")`, thereby returning all user accounts.</span></span>

<span data-ttu-id="ede2f-207">Creare un gestore eventi per il controllo Repeater `ItemCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="ede2f-207">Create an event handler for the Repeater's `ItemCommand` event.</span></span> <span data-ttu-id="ede2f-208">Questo evento viene generato ogni volta che viene selezionato uno dei filtri LinkButton; viene passato il LinkButton selezionato `CommandName` valore attraverso la `RepeaterCommandEventArgs` oggetto.</span><span class="sxs-lookup"><span data-stu-id="ede2f-208">This event is raised whenever one of the filter LinkButtons is clicked; it is passed the clicked LinkButton's `CommandName` value through the `RepeaterCommandEventArgs` object.</span></span> <span data-ttu-id="ede2f-209">È necessario assegnare il valore appropriato per il `UsernameToMatch` proprietà e chiamare quindi il `BindUserAccounts` (metodo).</span><span class="sxs-lookup"><span data-stu-id="ede2f-209">We need to assign the appropriate value to the `UsernameToMatch` property and then call the `BindUserAccounts` method.</span></span> <span data-ttu-id="ede2f-210">Se il `CommandName` è All, assegnare una stringa vuota per `UsernameToMatch` in modo che vengono visualizzati tutti gli account utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-210">If the `CommandName` is All, assign an empty string to `UsernameToMatch` so that all user accounts are displayed.</span></span> <span data-ttu-id="ede2f-211">In caso contrario, assegnare il `CommandName` valore `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-211">Otherwise, assign the `CommandName` value to `UsernameToMatch`.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample10.cs)]

<span data-ttu-id="ede2f-212">Con questo codice, testare la funzionalità di filtro.</span><span class="sxs-lookup"><span data-stu-id="ede2f-212">With this code in place, test out the filtering functionality.</span></span> <span data-ttu-id="ede2f-213">Quando la pagina viene prima visitata, vengono visualizzati tutti gli account utente (vedere la figura 5).</span><span class="sxs-lookup"><span data-stu-id="ede2f-213">When the page is first visited, all user accounts are displayed (refer back to Figure 5).</span></span> <span data-ttu-id="ede2f-214">Facendo clic il LinkButton A causa un postback e di filtrare i risultati, visualizzando solo gli account utente che iniziano per a.</span><span class="sxs-lookup"><span data-stu-id="ede2f-214">Clicking the A LinkButton causes a postback and filters the results, displaying only those user accounts that start with A .</span></span>


<span data-ttu-id="ede2f-215">[![Usare i controlli LinkButton i filtri per visualizzare tali utenti il cui nome utente inizi con una lettera](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-215">[![Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span></span>

<span data-ttu-id="ede2f-216">**Figura 6**: Usare i controlli LinkButton i filtri per visualizzare tali utenti il cui nome utente inizi con una lettera Certain ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-216">**Figure 6**: Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span></span>


## <a name="step-4-updating-the-gridview-to-use-paging"></a><span data-ttu-id="ede2f-217">Passaggio 4: L'aggiornamento di GridView per l'uso di Paging</span><span class="sxs-lookup"><span data-stu-id="ede2f-217">Step 4: Updating the GridView to Use Paging</span></span>

<span data-ttu-id="ede2f-218">Il controllo GridView illustrato nelle figure 5 e 6 sono elencati tutti i record restituiti dai `FindUsersByName` (metodo).</span><span class="sxs-lookup"><span data-stu-id="ede2f-218">The GridView shown in Figures 5 and 6 lists all of the records returned from the `FindUsersByName` method.</span></span> <span data-ttu-id="ede2f-219">Se sono presenti centinaia o migliaia di account utente di questo può causare all'overload di informazioni quando si visualizzano tutti gli account (come avviene quando si fa clic il LinkButton tutti o inizialmente gli utenti in visita la pagina).</span><span class="sxs-lookup"><span data-stu-id="ede2f-219">If there are hundreds or thousands of user accounts this can lead to information overload when viewing all of the accounts (as is the case when clicking the All LinkButton or when initially visiting the page).</span></span> <span data-ttu-id="ede2f-220">Per presentare gli account utente in base a blocchi più gestibili, è possibile configurare il controllo GridView per visualizzare i 10 account utente alla volta.</span><span class="sxs-lookup"><span data-stu-id="ede2f-220">To help present the user accounts in more manageable chunks, let's configure the GridView to display 10 user accounts at a time.</span></span>

<span data-ttu-id="ede2f-221">Il controllo GridView offre due tipi di paging:</span><span class="sxs-lookup"><span data-stu-id="ede2f-221">The GridView control offers two types of paging:</span></span>

- <span data-ttu-id="ede2f-222">**Il paging predefinito** - facile da implementare, ma non efficiente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-222">**Default paging** - easy to implement, but inefficient.</span></span> <span data-ttu-id="ede2f-223">In breve, con spostamento tra pagine GridView predefinito prevede *tutti* dei record dall'origine dati.</span><span class="sxs-lookup"><span data-stu-id="ede2f-223">In a nutshell, with default paging the GridView expects *all* of the records from its data source.</span></span> <span data-ttu-id="ede2f-224">Quindi Visualizza solo la pagina dei record appropriata.</span><span class="sxs-lookup"><span data-stu-id="ede2f-224">It then only displays the appropriate page of records.</span></span>
- <span data-ttu-id="ede2f-225">**Il paging personalizzato** -richiede maggiore impegno per implementare, ma è più efficiente il paging predefinito perché Custom paging dei dati l'origine restituisce solo lo specifico set di record da visualizzare.</span><span class="sxs-lookup"><span data-stu-id="ede2f-225">**Custom paging** - requires more work to implement, but is more efficient than default paging because with custom paging the data source returns only the precise set of records to display.</span></span>

<span data-ttu-id="ede2f-226">La differenza nelle prestazioni tra l'impostazione predefinita e il paging personalizzato può essere piuttosto notevole quando il paging attraverso migliaia di record.</span><span class="sxs-lookup"><span data-stu-id="ede2f-226">The performance difference between default and custom paging can be quite substantial when paging through thousands of records.</span></span> <span data-ttu-id="ede2f-227">Poiché stiamo creando questa interfaccia presupponendo che potrebbero essere centinaia o migliaia di account utente, è possibile usare il paging personalizzato.</span><span class="sxs-lookup"><span data-stu-id="ede2f-227">Because we are building this interface assuming that there may be hundreds or thousands of user accounts, let's use custom paging.</span></span>

> [!NOTE]
> <span data-ttu-id="ede2f-228">Per una discussione più approfondita sulle differenze tra l'impostazione predefinita e il paging personalizzato, nonché i problemi relativi all'implementazione del paging personalizzato, fare riferimento alla [in modo efficiente il Paging attraverso quantità di dati di grandi dimensioni](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span><span class="sxs-lookup"><span data-stu-id="ede2f-228">For a more thorough discussion on the differences between default and custom paging, as well as the challenges involved in implementing custom paging, refer to [Efficiently Paging Through Large Amounts of Data](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span></span> <span data-ttu-id="ede2f-229">Per alcune analisi della differenza di prestazioni tra l'impostazione predefinita e il paging personalizzato, vedere [Paging personalizzato in ASP.NET con SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="ede2f-229">For some analysis of the performance difference between default and custom paging, see [Custom Paging in ASP.NET with SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span></span>


<span data-ttu-id="ede2f-230">Per implementare il paging personalizzato è innanzitutto necessario un meccanismo dal quale recuperare il subset di record visualizzati GridView preciso.</span><span class="sxs-lookup"><span data-stu-id="ede2f-230">To implement custom paging we first need some mechanism by which to retrieve the precise subset of records being displayed by the GridView.</span></span> <span data-ttu-id="ede2f-231">La buona notizia è che il `Membership` della classe `FindUsersByName` metodo ha un overload che consente di specificare l'indice della pagina e dimensioni di pagina e restituisce solo gli account utente che si trovano all'interno dell'intervallo di record.</span><span class="sxs-lookup"><span data-stu-id="ede2f-231">The good news is that the `Membership` class's `FindUsersByName` method has an overload that allows us to specify the page index and page size, and returns only those user accounts that fall within that range of records.</span></span>

<span data-ttu-id="ede2f-232">In particolare, questo overload ha la firma seguente: [ `FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)` ](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span><span class="sxs-lookup"><span data-stu-id="ede2f-232">In particular, this overload has the following signature: [`FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)`](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span></span>

<span data-ttu-id="ede2f-233">Il *pageIndex* parametro specifica la pagina degli account utente da restituire. *pageSize* indica il numero di record per visualizzare ogni pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-233">The *pageIndex* parameter specifies the page of user accounts to return; *pageSize* indicates how many records to display per page.</span></span> <span data-ttu-id="ede2f-234">Il *totalRecords* parametro è un `out` parametro che restituisce il numero di account utente totale nell'archivio dell'utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-234">The *totalRecords* parameter is an `out` parameter that returns the number of total user accounts in the user store.</span></span>

> [!NOTE]
> <span data-ttu-id="ede2f-235">I dati restituiti da `FindUsersByName` è ordinato per nome utente; non è possibile personalizzare i criteri di ordinamento.</span><span class="sxs-lookup"><span data-stu-id="ede2f-235">The data returned by `FindUsersByName` is sorted by username; the sort criteria cannot be customized.</span></span>


<span data-ttu-id="ede2f-236">Il controllo GridView può essere configurato per usare il paging personalizzato, ma solo quando è associato a un controllo ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="ede2f-236">The GridView can be configured to utilize custom paging, but only when bound to an ObjectDataSource control.</span></span> <span data-ttu-id="ede2f-237">Per il controllo ObjectDataSource implementare il paging personalizzato richiede due metodi: uno che viene passato un indice di riga iniziale e il numero massimo di record da visualizzare, e restituisce il sottoinsieme preciso dei record che rientrano in tale intervallo. e Page tramite un metodo che restituisce il numero totale di record.</span><span class="sxs-lookup"><span data-stu-id="ede2f-237">For the ObjectDataSource control to implement custom paging, it requires two methods: one that is passed a start row index and the maximum number of records to display, and returns the precise subset of records that fall within that span; and a method that returns the total number of records being paged through.</span></span> <span data-ttu-id="ede2f-238">Il `FindUsersByName` overload accetta un indice della pagina e dimensioni di pagina e restituisce il numero totale di record mediante un `out` parametro.</span><span class="sxs-lookup"><span data-stu-id="ede2f-238">The `FindUsersByName` overload accepts a page index and page size, and returns the total number of records through an `out` parameter.</span></span> <span data-ttu-id="ede2f-239">Ecco di seguito una mancata corrispondenza dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="ede2f-239">So there is an interface mismatch here.</span></span>

<span data-ttu-id="ede2f-240">Sarebbe un'opzione per creare una classe proxy che espone l'interfaccia prevede che ObjectDataSource e quindi chiama internamente il `FindUsersByName` (metodo).</span><span class="sxs-lookup"><span data-stu-id="ede2f-240">One option would be to create a proxy class that exposes the interface the ObjectDataSource expects, and then internally calls the `FindUsersByName` method.</span></span> <span data-ttu-id="ede2f-241">Un'altra opzione - e quella da usare per questo articolo - è per creare la propria interfaccia di paging e usarlo invece di interfaccia di paging predefinito del controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="ede2f-241">Another option - and the one we'll use for this article - is to create our own paging interface and use that instead of the GridView's built-in paging interface.</span></span>

### <a name="creating-a-first-previous-next-last-paging-interface"></a><span data-ttu-id="ede2f-242">Creazione di un primo, precedente, successivamente, ultima interfaccia di Paging</span><span class="sxs-lookup"><span data-stu-id="ede2f-242">Creating a First, Previous, Next, Last Paging Interface</span></span>

<span data-ttu-id="ede2f-243">Creare ora un'interfaccia di paging con First, precedente, successivo e ultima LinkButton.</span><span class="sxs-lookup"><span data-stu-id="ede2f-243">Let's build a paging interface with First, Previous, Next, and Last LinkButtons.</span></span> <span data-ttu-id="ede2f-244">Il primo LinkButton, quando si fa clic, richiederà all'utente la prima pagina di dati, mentre la precedente quest'ultimo restituisce alla pagina precedente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-244">The First LinkButton, when clicked, will take the user to the first page of data, whereas Previous will return him to the previous page.</span></span> <span data-ttu-id="ede2f-245">Analogamente, successivo e ultimo passerà l'utente alla pagina successiva e l'ultima, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-245">Likewise, Next and Last will move the user to the next and last page, respectively.</span></span> <span data-ttu-id="ede2f-246">Aggiungere i quattro controlli LinkButton di sotto di `UserAccounts` GridView.</span><span class="sxs-lookup"><span data-stu-id="ede2f-246">Add the four LinkButton controls beneath the `UserAccounts` GridView.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample11.aspx)]

<span data-ttu-id="ede2f-247">Successivamente, creare un gestore eventi per ognuno del LinkButton `Click` gli eventi.</span><span class="sxs-lookup"><span data-stu-id="ede2f-247">Next, create an event handler for each of the LinkButton's `Click` events.</span></span>

<span data-ttu-id="ede2f-248">Figura 7 mostra il quattro LinkButton quando vengono visualizzate tramite la visualizzazione di progettazione di Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="ede2f-248">Figure 7 shows the four LinkButtons when viewed through the Visual Web Developer Design view.</span></span>


<span data-ttu-id="ede2f-249">[![Aggiungere prima, precedente, in futuro, e l'ultimo LinkButton sotto il controllo GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-249">[![Add First, Previous, Next, and Last LinkButtons Beneath the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span></span>

<span data-ttu-id="ede2f-250">**Figura 7**: Aggiungere prima di tutto, indietro e Avanti ultimo LinkButton sotto il controllo GridView ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-250">**Figure 7**: Add First, Previous, Next, and Last LinkButtons Beneath the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span></span>


### <a name="keeping-track-of-the-current-page-index"></a><span data-ttu-id="ede2f-251">Tenere traccia di indice della pagina corrente</span><span class="sxs-lookup"><span data-stu-id="ede2f-251">Keeping Track of the Current Page Index</span></span>

<span data-ttu-id="ede2f-252">Quando un utente visita prima la `ManageUsers.aspx` pagina o fa clic su uno dei filtri del pulsante, si desidera visualizzare la prima pagina di dati nel GridView.</span><span class="sxs-lookup"><span data-stu-id="ede2f-252">When a user first visits the `ManageUsers.aspx` page or clicks one of the filtering buttons, we want to display the first page of data in the GridView.</span></span> <span data-ttu-id="ede2f-253">Quando l'utente fa clic su uno degli spostamenti LinkButton, tuttavia, è necessario aggiornare l'indice della pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-253">When the user clicks one of the navigation LinkButtons, however, we need to update the page index.</span></span> <span data-ttu-id="ede2f-254">Per mantenere l'indice della pagina e il numero di record da visualizzare per pagina, aggiungere le due proprietà seguenti alla classe code-behind della pagina:</span><span class="sxs-lookup"><span data-stu-id="ede2f-254">To maintain the page index and the number of records to display per page, add the following two properties to the page's code-behind class:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample12.cs)]

<span data-ttu-id="ede2f-255">Ad esempio il `UsernameToMatch` proprietà, il `PageIndex` proprietà mantiene il relativo valore allo stato di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="ede2f-255">Like the `UsernameToMatch` property, the `PageIndex` property persists its value to view state.</span></span> <span data-ttu-id="ede2f-256">Di sola lettura `PageSize` proprietà restituisce un valore hardcoded, 10.</span><span class="sxs-lookup"><span data-stu-id="ede2f-256">The read-only `PageSize` property returns a hard-coded value, 10.</span></span> <span data-ttu-id="ede2f-257">Invita il lettore interessato per aggiornare questa proprietà per utilizzare lo stesso modello `PageIndex`e quindi di ampliare la `ManageUsers.aspx` pagina in modo che l'utente visitando la pagina è possibile specificare il numero di account utente da visualizzare per ogni pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-257">I invite the interested reader to update this property to use the same pattern as `PageIndex`, and then to augment the `ManageUsers.aspx` page such that the person visiting the page can specify how many user accounts to display per page.</span></span>

### <a name="retrieving-just-the-current-pages-records-updating-the-page-index-and-enabling-and-disabling-the-paging-interface-linkbuttons"></a><span data-ttu-id="ede2f-258">Recuperare solo i record della pagina corrente, l'aggiornamento dell'indice, pagina e abilitazione e disabilitazione di LinkButton di interfaccia di Paging</span><span class="sxs-lookup"><span data-stu-id="ede2f-258">Retrieving Just the Current Page's Records, Updating the Page Index, and Enabling and Disabling the Paging Interface LinkButtons</span></span>

<span data-ttu-id="ede2f-259">Con l'interfaccia di paging in posizione e il `PageIndex` e `PageSize` aggiunte proprietà, siamo pronti aggiornare il `BindUserAccounts` metodo in modo che utilizzi appropriati `FindUsersByName` overload.</span><span class="sxs-lookup"><span data-stu-id="ede2f-259">With the paging interface in place and the `PageIndex` and `PageSize` properties added, we are ready to update the `BindUserAccounts` method so that it uses the appropriate `FindUsersByName` overload.</span></span> <span data-ttu-id="ede2f-260">Inoltre, è necessario affinché questo metodo abilita o disabilita l'interfaccia di paging in base alla quale pagina viene visualizzata.</span><span class="sxs-lookup"><span data-stu-id="ede2f-260">Additionally, we need to have this method enable or disable the paging interface depending on what page is being displayed.</span></span> <span data-ttu-id="ede2f-261">Quando si visualizzano la prima pagina di dati, i collegamenti prima and precedente devono essere disabilitati; Successivamente e ultima deve essere disabilitata quando si visualizza l'ultima pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-261">When viewing the first page of data, the First and Previous links should be disabled; Next and Last should be disabled when viewing the last page.</span></span>

<span data-ttu-id="ede2f-262">Aggiornare il metodo `BindUserAccounts` con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="ede2f-262">Update the `BindUserAccounts` method with the following code:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample13.cs)]

<span data-ttu-id="ede2f-263">Si noti che il numero totale di record in fase di paging tramite è determinato dall'ultimo parametro della `FindUsersByName` (metodo).</span><span class="sxs-lookup"><span data-stu-id="ede2f-263">Note that the total number of records being paged through is determined by the last parameter of the `FindUsersByName` method.</span></span> <span data-ttu-id="ede2f-264">Si tratta di un' `out` parametro, pertanto è necessario prima dichiarare una variabile per contenere tale valore (`totalRecords`) e quindi del prefisso con il `out` (parola chiave).</span><span class="sxs-lookup"><span data-stu-id="ede2f-264">This is an `out` parameter, so we need to first declare a variable to hold this value (`totalRecords`) and then prefix it with the `out` keyword.</span></span>

<span data-ttu-id="ede2f-265">Dopo la pagina specificata degli account utente vengono restituiti, i controlli LinkButton i quattro sono abilitato o disabilitato, a seconda del fatto che viene visualizzata prima o ultima pagina di dati.</span><span class="sxs-lookup"><span data-stu-id="ede2f-265">After the specified page of user accounts are returned, the four LinkButtons are either enabled or disabled, depending on whether the first or last page of data is being viewed.</span></span>

<span data-ttu-id="ede2f-266">L'ultimo passaggio consiste nello scrivere il codice per i quattro i controlli LinkButton `Click` gestori eventi.</span><span class="sxs-lookup"><span data-stu-id="ede2f-266">The last step is to write the code for the four LinkButtons' `Click` event handlers.</span></span> <span data-ttu-id="ede2f-267">Questi gestori eventi necessario aggiornare il `PageIndex` proprietà e quindi associare di nuovo i dati a GridView mediante una chiamata a `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="ede2f-267">These event handlers need to update the `PageIndex` property and then rebind the data to the GridView via a call to `BindUserAccounts`.</span></span> <span data-ttu-id="ede2f-268">Il primo, indietro e Avanti gestori di eventi sono molto semplici.</span><span class="sxs-lookup"><span data-stu-id="ede2f-268">The First, Previous, and Next event handlers are very simple.</span></span> <span data-ttu-id="ede2f-269">Il `Click` gestore eventi per l'ultimo LinkButton, tuttavia, è un po' più complesso perché è necessario determinare il numero di record viene visualizzato per determinare l'ultimo indice di pagina.</span><span class="sxs-lookup"><span data-stu-id="ede2f-269">The `Click` event handler for the Last LinkButton, however, is a bit more complex because we need to determine how many records are being displayed in order to determine the last page index.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample14.cs)]

<span data-ttu-id="ede2f-270">Figure 8 e 9 di visualizzare l'interfaccia di paging personalizzato in azione.</span><span class="sxs-lookup"><span data-stu-id="ede2f-270">Figures 8 and 9 show the custom paging interface in action.</span></span> <span data-ttu-id="ede2f-271">Figura 8 mostra la `ManageUsers.aspx` pagina quando si visualizzano la prima pagina di dati per tutti gli account utente.</span><span class="sxs-lookup"><span data-stu-id="ede2f-271">Figure 8 shows the `ManageUsers.aspx` page when viewing the first page of data for all user accounts.</span></span> <span data-ttu-id="ede2f-272">Si noti che vengono visualizzati solo 10 degli account di 13.</span><span class="sxs-lookup"><span data-stu-id="ede2f-272">Note that only 10 of the 13 accounts are displayed.</span></span> <span data-ttu-id="ede2f-273">Selezionando il collegamento successivo o ultima causa un postback, gli aggiornamenti di `PageIndex` su 1 e associa la seconda pagina dell'utente account alla griglia (vedere la figura 9).</span><span class="sxs-lookup"><span data-stu-id="ede2f-273">Clicking the Next or Last link causes a postback, updates the `PageIndex` to 1, and binds the second page of user accounts to the grid (see Figure 9).</span></span>


<span data-ttu-id="ede2f-274">[![Vengono visualizzati il primo account utente di 10](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-274">[![The First 10 User Accounts are Displayed](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span></span>

<span data-ttu-id="ede2f-275">**Figura 8**: Vengono visualizzati gli account utente di 10 prima ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-275">**Figure 8**: The First 10 User Accounts are Displayed  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span></span>


<span data-ttu-id="ede2f-276">[![Selezione del collegamento viene visualizzata la pagina secondo degli account utente](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="ede2f-276">[![Clicking the Next Link Displays the Second Page of User Accounts](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span></span>

<span data-ttu-id="ede2f-277">**Figura 9**: Selezione del collegamento viene visualizzato la seconda pagina di account utente ([fare clic per visualizzare l'immagine con dimensioni normali](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="ede2f-277">**Figure 9**: Clicking the Next Link Displays the Second Page of User Accounts  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="ede2f-278">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="ede2f-278">Summary</span></span>

<span data-ttu-id="ede2f-279">Gli amministratori spesso necessario selezionare un utente dall'elenco di account.</span><span class="sxs-lookup"><span data-stu-id="ede2f-279">Administrators often need to select a user from the list of accounts.</span></span> <span data-ttu-id="ede2f-280">Nelle esercitazioni precedenti abbiamo esaminato tramite un elenco di riepilogo a discesa popolato con gli utenti, ma questo approccio non è facilmente scalabile.</span><span class="sxs-lookup"><span data-stu-id="ede2f-280">In previous tutorials we looked at using a drop-down list populated with the users, but this approach does not scale well.</span></span> <span data-ttu-id="ede2f-281">In questa esercitazione è stata esaminata un'alternativa migliore: un'interfaccia filtrabile i cui risultati vengono visualizzati in un controllo GridView di paging.</span><span class="sxs-lookup"><span data-stu-id="ede2f-281">In this tutorial we explored a better alternative: a filterable interface whose results are displayed in a paged GridView.</span></span> <span data-ttu-id="ede2f-282">Con questa interfaccia utente, gli amministratori possono rapido ed efficiente individuare e selezionare un account utente tra migliaia.</span><span class="sxs-lookup"><span data-stu-id="ede2f-282">With this user interface, administrators can quickly and efficiently locate and select one user account among thousands.</span></span>

<span data-ttu-id="ede2f-283">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="ede2f-283">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="ede2f-284">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="ede2f-284">Further Reading</span></span>

<span data-ttu-id="ede2f-285">Per altre informazioni sugli argomenti trattati in questa esercitazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="ede2f-285">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ede2f-286">Paging personalizzato in ASP.NET con SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="ede2f-286">Custom Paging in ASP.NET with SQL Server 2005</span></span>](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx)
- [<span data-ttu-id="ede2f-287">Paging efficiente in grandi quantità di dati</span><span class="sxs-lookup"><span data-stu-id="ede2f-287">Efficiently Paging Through Large Amounts of Data</span></span>](https://asp.net/learn/data-access/tutorial-25-cs.aspx)
- [<span data-ttu-id="ede2f-288">In sequenza il proprio strumento Amministrazione sito Web</span><span class="sxs-lookup"><span data-stu-id="ede2f-288">Rolling Your Own Website Administration Tool</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)

### <a name="about-the-author"></a><span data-ttu-id="ede2f-289">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="ede2f-289">About the Author</span></span>

<span data-ttu-id="ede2f-290">Scott Mitchell, autore di più libri e fondatore di 4GuysFromRolla.com, ha lavorato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="ede2f-290">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ede2f-291">Lavora come un consulente, formatore e autore.</span><span class="sxs-lookup"><span data-stu-id="ede2f-291">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ede2f-292">Il suo ultimo libro si intitola  *[Sams Teach Yourself ASP.NET 2.0 in 24 ore](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="ede2f-292">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="ede2f-293">È possibile contattarlo Scott [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) o il suo blog all'indirizzo [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="ede2f-293">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="ede2f-294">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="ede2f-294">Special Thanks To</span></span>

<span data-ttu-id="ede2f-295">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="ede2f-295">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ede2f-296">Il revisore capo di questa esercitazione è stata Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="ede2f-296">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="ede2f-297">Se si è interessati prossimi articoli MSDN dello?</span><span class="sxs-lookup"><span data-stu-id="ede2f-297">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ede2f-298">In questo caso, Inviami un messaggio nella [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ede2f-298">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="ede2f-299">avanti</span><span class="sxs-lookup"><span data-stu-id="ede2f-299">Next</span></span>](recovering-and-changing-passwords-cs.md)
