---
uid: visual-studio/overview/2012/windows-azure-authentication
title: Windows Azure Authentication | Microsoft Docs
author: Rick-Anderson
description: Gli strumenti Microsoft ASP.NET per Windows Azure Active Directory rende più semplice per abilitare l'autenticazione per applicazioni web ospitate in siti Web di Microsoft Azure...
ms.author: riande
ms.date: 02/20/2013
ms.assetid: a3cef801-a54b-4ebd-93c3-55764e2e14b1
msc.legacyurl: /visual-studio/overview/2012/windows-azure-authentication
msc.type: authoredcontent
ms.openlocfilehash: a45b0ad2b61c2b78f7f06e85fe5e92193d73041d
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/01/2019
ms.locfileid: "57052708"
---
<a name="windows-azure-authentication"></a><span data-ttu-id="b1c5f-103">Autenticazione di Windows Azure</span><span class="sxs-lookup"><span data-stu-id="b1c5f-103">Windows Azure Authentication</span></span>
====================
<span data-ttu-id="b1c5f-104">da [Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="b1c5f-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="b1c5f-105">Gli strumenti Microsoft ASP.NET per Windows Azure Active Directory rende più semplice per abilitare l'autenticazione per le applicazioni web ospitate in [siti Web di Azure](https://www.windowsazure.com/home/features/web-sites/).</span><span class="sxs-lookup"><span data-stu-id="b1c5f-105">Microsoft ASP.NET tools for Windows Azure Active Directory makes it simple to enable authentication for web applications hosted on [Windows Azure Web Sites](https://www.windowsazure.com/home/features/web-sites/).</span></span> <span data-ttu-id="b1c5f-106">È possibile usare l'autenticazione di Windows Azure per autenticare gli utenti di Office 365 dell'organizzazione, gli account aziendali sincronizzati dall'ambiente locale di Active Directory o utenti creati in un dominio di Windows Azure Active Directory personalizzato.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-106">You can use Windows Azure Authentication to authenticate Office 365 users from your organization, corporate accounts synced from your on-premise Active Directory or users created in your own custom Windows Azure Active Directory domain.</span></span> <span data-ttu-id="b1c5f-107">Abilitazione dell'autenticazione di Windows Azure consente di configurare l'applicazione per autenticare gli utenti che usano un unico [Windows Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) tenant.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-107">Enabling Windows Azure Authentication configures your application to authenticate users using a single [Windows Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) tenant.</span></span>
> 
> <span data-ttu-id="b1c5f-108">Lo strumento autenticazione di Windows Azure ASP.NET non è supportato per i ruoli web in un servizio cloud, ma si prevede di eseguire questa operazione in una versione futura.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-108">The ASP.NET Windows Azure Authentication tool is not supported for web roles in a cloud service but we plan to do so in a future release.</span></span> <span data-ttu-id="b1c5f-109">[Windows Identity Foundation](https://msdn.microsoft.com/library/hh291066(v=VS.110).aspx) (WIF) è supportato in ruoli web di Azure.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-109">[Windows Identity Foundation](https://msdn.microsoft.com/library/hh291066(v=VS.110).aspx) (WIF) is supported in Windows Azure web roles.</span></span>
> 
> <span data-ttu-id="b1c5f-110">Per informazioni dettagliate su come configurare la sincronizzazione tra Active Directory in locale e il tenant di Microsoft Azure Active Directory, vedere [utilizzo di ADFS 2.0 per implementare e gestire l'accesso single sign-on](https://technet.microsoft.com/library/jj205462.aspx).</span><span class="sxs-lookup"><span data-stu-id="b1c5f-110">For details on how to setup synchronization between your on-premise Active Directory and your Windows Azure Active Directory tenant please see [Use AD FS 2.0 to implement and manage single sign-on](https://technet.microsoft.com/library/jj205462.aspx).</span></span>
> 
> <span data-ttu-id="b1c5f-111">Windows Azure Active Directory è attualmente disponibile come una [preview servizio gratuito](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span><span class="sxs-lookup"><span data-stu-id="b1c5f-111">Windows Azure Active Directory is currently available as a [free preview service](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span></span>


## <a name="requirements"></a><span data-ttu-id="b1c5f-112">Requisiti:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-112">Requirements:</span></span>

- <span data-ttu-id="b1c5f-113">Visual Studio 2012 o [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express)</span><span class="sxs-lookup"><span data-stu-id="b1c5f-113">Visual Studio 2012 or [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express)</span></span>
- <span data-ttu-id="b1c5f-114">[Estensioni per Visual Studio 2012 degli strumenti Web](https://go.microsoft.com/fwlink/?LinkID=282228&amp;clcid=0x409) o [estensioni strumenti Web per Visual Studio Express 2012](https://go.microsoft.com/fwlink/?LinkID=282231&amp;clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="b1c5f-114">[Web Tools Extensions for Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282228&amp;clcid=0x409) or [Web Tools Extensions for Visual Studio Express 2012](https://go.microsoft.com/fwlink/?LinkID=282231&amp;clcid=0x409)</span></span>
- <span data-ttu-id="b1c5f-115">[Strumenti di Microsoft ASP.NET per Windows Azure Active Directory-Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282306) o [di strumenti di Microsoft ASP.NET per Windows Azure Active Directory-Visual Studio Express 2012 per Web](https://go.microsoft.com/fwlink/?LinkId=282652)</span><span class="sxs-lookup"><span data-stu-id="b1c5f-115">[Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282306) or [Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio Express 2012 for Web](https://go.microsoft.com/fwlink/?LinkId=282652)</span></span>

## <a name="create-an-aspnet-web-application-with-visual-studio-2012"></a><span data-ttu-id="b1c5f-116">Creare un'applicazione Web ASP.NET con Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="b1c5f-116">Create an ASP.NET Web Application with Visual Studio 2012</span></span>

<span data-ttu-id="b1c5f-117">È possibile creare qualsiasi applicazione Web con Visual Studio 2012, questa esercitazione Usa il modello intranet ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-117">You can create any Web Application with Visual Studio 2012, this tutorial uses the ASP.NET MVC intranet template.</span></span>

1. <span data-ttu-id="b1c5f-118">Creare una nuova applicazione Intranet ASP.NET MVC 4 e accettare tutte le impostazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-118">Create a new ASP.NET MVC 4 Intranet Application and accept all the defaults.</span></span> <span data-ttu-id="b1c5f-119">(Deve essere In **tra** net e non nella **ter** net progetto).</span><span class="sxs-lookup"><span data-stu-id="b1c5f-119">(It must be an In **tra** net and not In **ter** net project).</span></span>  
     ![](windows-azure-authentication/_static/image1.png)

## <a name="enable-window-azure-authentication-when-you-are-a-global-administrator-of-the-tenet"></a><span data-ttu-id="b1c5f-120">Abilitare l'autenticazione di Windows Azure (quando si è un amministratore globale del principio)</span><span class="sxs-lookup"><span data-stu-id="b1c5f-120">Enable Window Azure Authentication (When you are a Global Administrator of the Tenet)</span></span>

<span data-ttu-id="b1c5f-121">Se non è un tenant esistente di Microsoft Azure Active Directory (ad esempio, tramite un account esistente di Office 365) è possibile creare un nuovo tenant registrandosi per una [nuovo account di Windows Azure Active Directory](http://g.microsoftonline.com/0AX00en/5).</span><span class="sxs-lookup"><span data-stu-id="b1c5f-121">If you do not have an existing Windows Azure Active Directory tenant (For example, through an existing Office 365 account) you can create a new tenant by signing up for a [new Windows Azure Active Directory account](http://g.microsoftonline.com/0AX00en/5).</span></span>

1. <span data-ttu-id="b1c5f-122">Dal menu progetto selezionare **abilitare l'autenticazione di Windows Azure**:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-122">From the Project menu select **Enable Windows Azure Authentication**:</span></span>  
  
   ![](windows-azure-authentication/_static/image2.png)

2. <span data-ttu-id="b1c5f-123">Immettere il dominio per il tenant di Microsoft Azure Active Directory (ad esempio contoso.onmicrosoft.com) e fare clic su **abilitare**:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-123">Enter the domain for your Windows Azure Active Directory tenant (for example, contoso.onmicrosoft.com) and click **Enable**:</span></span>

![](windows-azure-authentication/_static/image3.png)

3. <span data-ttu-id="b1c5f-124">Nell'autenticazione Web finestra di dialogo di accesso come amministratore per il tenant di Microsoft Azure Active Directory:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-124">In the Web Authentication dialog sign in as an administrator for your Windows Azure Active Directory tenant:</span></span>  
  
   ![](windows-azure-authentication/_static/image4.png)

![](windows-azure-authentication/_static/image5.png)

## <a name="enable-window-azure-by-a-non-administrator-of-the-tenet"></a><span data-ttu-id="b1c5f-125">Abilitare la finestra di Azure da un utente non amministratore del principio</span><span class="sxs-lookup"><span data-stu-id="b1c5f-125">Enable Window Azure by a non-administrator of the Tenet</span></span>

<span data-ttu-id="b1c5f-126">Se si dispone dei privilegi di amministratore globale per il tenant di Microsoft Azure Active Directory, è possibile deselezionare la casella di controllo per il provisioning dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-126">If you do not have Global Administrator privilege for your Windows Azure Active Directory tenant, you can uncheck the checkbox for provisioning the application.</span></span>

![](windows-azure-authentication/_static/image6.png)

<span data-ttu-id="b1c5f-127">La finestra di dialogo verrà visualizzato il **Domain**, **Id entità applicazione** e **URL di risposta** che sono obbligatori per il provisioning dell'applicazione con Azure Active Directory principio.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-127">The dialog will display the **Domain**, **Application Principal Id** and **Reply URL** which are required for provisioning the application with an Azure Active Directory tenet.</span></span> <span data-ttu-id="b1c5f-128">È necessario fornire queste informazioni a un utente che dispone di privilegi sufficienti per eseguire il provisioning dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-128">You need to give this information to someone who has sufficient privilege to provision the application.</span></span> <span data-ttu-id="b1c5f-129">Visualizzare[come implementare single sign-on con Azure Active Directory di Windows - applicazione ASP.NET](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect) per informazioni dettagliate su come usare i cmdlet per creare l'entità servizio manualmente.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-129">See[How to implement single sign-on with Windows Azure Active Directory - ASP.NET Application](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect) for details on how to use cmdlet to create the service principal manually.</span></span>  
<span data-ttu-id="b1c5f-130">Dopo averne effettuata correttamente l'applicazione, è possibile fare clic su **continua ad aggiornare Web. config con le impostazioni selezionate**.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-130">Once the application has been successfully provisioned, you can click on **Continue to update web.config with the selected settings**.</span></span> <span data-ttu-id="b1c5f-131">Se si desidera continuare a sviluppare l'applicazione durante l'attesa per il provisioning viene eseguita, è possibile fare clic su **Close per ricordare le impostazioni nel file di progetto**.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-131">If you want to continue developing the application while waiting for provisioning to happen, you can click **Close to remember the settings in project file**.</span></span> <span data-ttu-id="b1c5f-132">La volta successiva che richiami Abilita autenticazione di Windows Azure, deselezionare la casella di controllo di provisioning, si visualizzeranno le stesse impostazioni e può fare clic su **continuazione**, quindi fare clic su, **applicare queste impostazioni nel file Web. config**.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-132">The next time you invoke Enable Windows Azure Authentication and uncheck the provisioning checkbox, you will see the same settings and you can click **Continue**, then click, **Apply these settings in web.config**.</span></span>

1. <span data-ttu-id="b1c5f-133">Attendere. l'applicazione è configurata per l'autenticazione di Windows Azure e il provisioning con Windows Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-133">Wait while your application is configured for Windows Azure Authentication and provisioned with Windows Azure Active Directory.</span></span>
2. <span data-ttu-id="b1c5f-134">Dopo l'autenticazione di Windows Azure è stato abilitato per l'applicazione, fare clic su **Chiudi:**</span><span class="sxs-lookup"><span data-stu-id="b1c5f-134">Once Windows Azure Authentication has been enabled for your application, click **Close:**</span></span> 

    ![](windows-azure-authentication/_static/image7.png)
3. <span data-ttu-id="b1c5f-135">Premere F5 per eseguire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-135">Hit F5 to run your application.</span></span> <span data-ttu-id="b1c5f-136">Si dovrebbe ottenere automaticamente reindirizzati alla pagina di accesso.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-136">You should automatically get redirected to login page.</span></span> <span data-ttu-id="b1c5f-137">Usare le credenziali utente principio di directory per eseguire l'accesso all'applicazione...</span><span class="sxs-lookup"><span data-stu-id="b1c5f-137">Use the directory tenet user credentials to login to the application..</span></span>  

    ![](windows-azure-authentication/_static/image1.jpg)
4. <span data-ttu-id="b1c5f-138">Poiché l'applicazione attualmente usa un certificato di prova autofirmato si riceverà un avviso dal browser il certificato non è stato rilasciato da un'autorità di certificazione attendibile.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-138">Because your application is currently using a self-signed test certificate you will receive a warning from the browser that the certificate was not issued by a trusted certificate authority.</span></span>

    <span data-ttu-id="b1c5f-139">Questo avviso può essere tranquillamente ignorato durante lo sviluppo locale facendo **continuare con questo sito Web:**</span><span class="sxs-lookup"><span data-stu-id="b1c5f-139">This warning can be safely ignored during local development by clicking **Continue to this website:**</span></span> 

    ![](windows-azure-authentication/_static/image8.png)
5. <span data-ttu-id="b1c5f-140">Hanno ora eseguito l'accesso all'applicazione usando l'autenticazione di Windows Azure!</span><span class="sxs-lookup"><span data-stu-id="b1c5f-140">You have now successfully logged in to your application using Windows Azure Authentication!</span></span>

    ![](windows-azure-authentication/_static/image2.jpg)

<span data-ttu-id="b1c5f-141">Abilitazione di Windows Azure authentication apporta le modifiche seguenti alla propria applicazione:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-141">Enabling Windows Azure authentication makes the following changes to your application:</span></span>

- <span data-ttu-id="b1c5f-142">Un Anti-Cross-Site Request Forgery ([CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))) classe ( *App\_Start\AntiXsrfConfig.cs* ) viene aggiunto al progetto.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-142">An Anti-Cross-Site Request Forgery ([CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))) class ( *App\_Start\AntiXsrfConfig.cs* ) is added to your project.</span></span>
- <span data-ttu-id="b1c5f-143">I pacchetti NuGet `System.IdentityModel.Tokens.ValidatingIssuerNameRegistry` viene aggiunto al progetto.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-143">The NuGet packages `System.IdentityModel.Tokens.ValidatingIssuerNameRegistry` is added to your project.</span></span>
- <span data-ttu-id="b1c5f-144">Impostazioni di Windows Identity Foundation nell'applicazione verranno configurate per accettare i token di sicurezza dal tenant di Microsoft Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-144">Windows Identity Foundation settings in your application will be configured to accept security tokens from your Windows Azure Active Directory tenant.</span></span> <span data-ttu-id="b1c5f-145">Fare clic sull'immagine seguente per visualizzare una visualizzazione espansa delle modifiche apportate al *Web. config* file.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-145">Click on the image below to see an expanded view of the changes made to the *Web.config* file.</span></span>  
  
     ![](windows-azure-authentication/_static/image9.png)
- <span data-ttu-id="b1c5f-146">Un'entità servizio per l'applicazione nel tenant di Microsoft Azure Active Directory eseguire il provisioning.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-146">A service principal for your application in your Windows Azure Active Directory tenant will be provisioned.</span></span>
- <span data-ttu-id="b1c5f-147">HTTPS è abilitato.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-147">HTTPS is enabled.</span></span>

## <a name="deploy-the-application-to-windows-azure"></a><span data-ttu-id="b1c5f-148">Distribuire l'applicazione in Windows Azure</span><span class="sxs-lookup"><span data-stu-id="b1c5f-148">Deploy the application to Windows Azure</span></span>

<span data-ttu-id="b1c5f-149">Per istruzioni dettagliate, vedere [distribuzione di un'applicazione Web ASP.NET a un sito Web di Microsoft Azure](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span><span class="sxs-lookup"><span data-stu-id="b1c5f-149">For complete instructions, see [Deploying an ASP.NET Web Application to a Windows Azure Web Site](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span></span>

<span data-ttu-id="b1c5f-150">Per pubblicare un'applicazione usando l'autenticazione di Windows Azure in un sito Web di Azure:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-150">To publish an application using Windows Azure Authentication to an Azure Web Site:</span></span>

1. <span data-ttu-id="b1c5f-151">Fare clic con il pulsante destro sull'applicazione e selezionare **pubblica:**</span><span class="sxs-lookup"><span data-stu-id="b1c5f-151">Right click on your application and select **Publish:**</span></span> 

    ![](windows-azure-authentication/_static/image3.jpg)
2. <span data-ttu-id="b1c5f-152">Nella finestra di dialogo Pubblica sito Web scaricare e importare un profilo di pubblicazione per il sito Web di Azure.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-152">From the Publish Web dialog download and import a publishing profile for your Azure Web Site.</span></span>

    ![](windows-azure-authentication/_static/image4.jpg)
3. <span data-ttu-id="b1c5f-153">Il **Connection** scheda Mostra le **URL di destinazione** (URL accessibile pubblico per l'applicazione).</span><span class="sxs-lookup"><span data-stu-id="b1c5f-153">The **Connection** tab shows the **Destination URL** (the public facing URL for your application).</span></span> <span data-ttu-id="b1c5f-154">Fare clic su **convalida connessione** per testare la connessione:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-154">Click **Validate Connection** to test your connection:</span></span>

    ![](windows-azure-authentication/_static/image5.jpg)
4. <span data-ttu-id="b1c5f-155">Se è stata pubblicata in questo sito Web di Azure in precedenza è consigliabile verificare i **Rimuovi file aggiuntivi nella destinazione** impostazione per garantire l'applicazione pubblica correttamente.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-155">If you have published to this Azure Web Site previously consider checking the **Remove additional files at destination** setting to ensure your application publishes cleanly.</span></span> <span data-ttu-id="b1c5f-156">Si noti che il **abilitare l'autenticazione di Windows Azure** casella di controllo è slected.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-156">Notice the **Enable Windows Azure Authentication** check box is slected.</span></span>  

    ![](windows-azure-authentication/_static/image10.png)
5. <span data-ttu-id="b1c5f-157">Facoltative: Nel **Preview** scheda, scegliere **Avvia anteprima** per visualizzare i file vengano distribuiti.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-157">Optional: On the **Preview** tab click **Start Preview** to see the files deployed.</span></span>

    ![](windows-azure-authentication/_static/image6.jpg)
6. <span data-ttu-id="b1c5f-158">Fare clic su **pubblicare.**</span><span class="sxs-lookup"><span data-stu-id="b1c5f-158">Click **Publish.**</span></span>

    <span data-ttu-id="b1c5f-159">Verrà richiesto di abilitare l'autenticazione di Windows Azure per l'host di destinazione.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-159">You will be prompted to enable Windows Azure Authentication for the target host.</span></span> <span data-ttu-id="b1c5f-160">Fare clic su **abilitare** per continuare:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-160">Click **Enable** to continue:</span></span>

    ![](windows-azure-authentication/_static/image11.png)
7. <span data-ttu-id="b1c5f-161">Immettere le credenziali di amministratore per il tenant di Microsoft Azure Active Directory:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-161">Enter your administrator credentials for your Windows Azure Active Directory tenant:</span></span>

    ![](windows-azure-authentication/_static/image7.jpg)
8. <span data-ttu-id="b1c5f-162">Dopo l'applicazione è stata pubblicata correttamente, un browser verrà aperto il sito web pubblicato.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-162">Once your application has been successfully published, a browser will open to the published web site.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b1c5f-163">Potrebbero occorrere fino a cinque minuti (in genere deve minore) per l'applicazione al termine del provisioning con Windows Azure Active Directory dopo l'abilitazione dell'autenticazione di Windows Azure per l'host di destinazione.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-163">It may take up to five minutes (typically must less) for your application to be fully provisioned with Windows Azure Active Directory after enabling Windows Azure Authentication for the target host.</span></span> <span data-ttu-id="b1c5f-164">Prima di tutto, quando si esegue l'applicazione se viene visualizzato errore ACS50001: Relying party con nome '[area]' non è stato trovato, quindi attendere qualche minuto e provare a eseguire nuovamente l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-164">When you first run your application if you receive error ACS50001: Relying party with name ‘[realm]' was not found, then wait a few minutes and try running the application again.</span></span>
9. <span data-ttu-id="b1c5f-165">Quando richiesto, accedere come utente nella directory:</span><span class="sxs-lookup"><span data-stu-id="b1c5f-165">When prompted, log in as a user in your directory:</span></span>

    ![](windows-azure-authentication/_static/image8.jpg)
10. <span data-ttu-id="b1c5f-166">Ora hanno l'accesso a Azure ospitata l'applicazione mediante l'autenticazione di Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-166">You have now successfully logged into your Azure hosted application using Windows Azure Authentication.</span></span>  
  
     ![](windows-azure-authentication/_static/image9.jpg)

## <a name="known-issues"></a><span data-ttu-id="b1c5f-167">Problemi noti</span><span class="sxs-lookup"><span data-stu-id="b1c5f-167">Known Issues</span></span>

#### <a name="role-based-authorization-fails-when-using-windows-azure-authenticationopop"></a><span data-ttu-id="b1c5f-168">Autorizzazione basata sui ruoli si verifica un errore quando si usa l'autenticazione di Windows Azure < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-168">Role-based authorization fails when using Windows Azure Authentication<o:p></o:p></span></span>

<span data-ttu-id="b1c5f-169">Autenticazione di Windows Azure non fornisce attualmente l'attestazione di ruolo necessarie in modo che l'autorizzazione basata sui ruoli può essere eseguite.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-169">Windows Azure Authentication does not currently provide the necessary role claim so that role-based authorization can be performed.</span></span> <span data-ttu-id="b1c5f-170">Il ruolo dell'utente autenticato deve essere recuperato manualmente da Windows Azure Active Directory. < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-170">The role of the authenticated user must be manually retrieved from Windows Azure Active Directory.<o:p></o:p></span></span>

#### <a name="browsing-to-an-application-with-windows-azure-authentication-results-in-the-error-acs20016-the-domain-of-the-logged-in-user-livecom-does-not-match-any-allowed-domain-of-this-stsopop"></a><span data-ttu-id="b1c5f-171">Passando a un'applicazione con autenticazione di Windows Azure genera l'errore "il dominio dell'utente connesso (live.com) non corrisponde a nessuna funzionalità ACS20016 consentito dominio di questo servizio token di sicurezza" < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-171">Browsing to an application with Windows Azure Authentication results in the error "ACS20016 The domain of the logged in user (live.com) does not match any allowed domain of this STS"<o:p></o:p></span></span>

<span data-ttu-id="b1c5f-172">Se è già connessi a un Account Microsoft (ad esempio hotmail.com, live.com, outlook.com) e si tenta di accedere a un'applicazione che ha abilitato l'autenticazione di Windows Azure è possibile ottenere una risposta di 400 errore perché il dominio del proprio Account Microsoft non è riconosciuto da Windows Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-172">If you are already logged in to a Microsoft Account (for example hotmail.com, live.com, outlook.com) and you attempt to access an application that has enabled Windows Azure Authentication you may get a 400 error response because the domain of your Microsoft Account is not recognized by Windows Azure Active Directory.</span></span> <span data-ttu-id="b1c5f-173">Per accedere all'applicazione, effettuare la disconnessione dal tuo Account Microsoft prima di tutto. < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-173">To log into the application, log out from your Microsoft Account first.<o:p></o:p></span></span>

#### <a name="logging-into-an-application-with-windows-azure-authentication-enabled-and-a-x509certificatevalidationmode-other-than-none-results-in-certificate-validation-errors-for-the-accountsaccesscontrolwindowsnet-certificateopop"></a><span data-ttu-id="b1c5f-174">Accesso a un'applicazione con autenticazione di Windows Azure abilitata e un X509CertificateValidationMode diverso da None comporta errori di convalida del certificato per il certificato accounts.accesscontrol.windows.net < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-174">Logging into an application with Windows Azure Authentication enabled and a X509CertificateValidationMode other than None results in certificate validation errors for the accounts.accesscontrol.windows.net certificate<o:p></o:p></span></span>

<span data-ttu-id="b1c5f-175">Convalida del certificato non è obbligatorio e deve rimanere disabilitata.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-175">Certificate validation is not required and should be left disabled.</span></span> <span data-ttu-id="b1c5f-176">L'identificazione personale del certificato dell'autorità di certificazione viene convalidato dal WSFederationAuthenticationModule. < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-176">The thumbprint of the issuer certificate is validated by the WSFederationAuthenticationModule.<o:p></o:p></span></span>

#### <a name="when-attempting-to-enable-windows-azure-authentication-the-web-authentication-dialog-shows-the-error-acs20016-the-domain-of-the-logged-in-user-contosoonmicrosoftcom-does-not-match-any-allowed-domain-of-this-stsopop"></a><span data-ttu-id="b1c5f-177">Quando si tenta di abilitare l'autenticazione di Windows Azure la finestra di dialogo di autenticazione Web Mostra l'errore "ACS20016: Il dominio dell'utente connesso (contoso.onmicrosoft.com) non corrisponde alcun dominio autorizzato di questo servizio token di sicurezza." < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-177">When attempting to enable Windows Azure Authentication the Web Authentication dialog shows the error "ACS20016: The domain of the logged in user (contoso.onmicrosoft.com) does not match any allowed domain of this STS."<o:p></o:p></span></span>

<span data-ttu-id="b1c5f-178">Si potrebbe essere visualizzato questo errore quando hanno precedentemente eseguito l'accesso con un altro account di Windows Azure Active Directory all'interno del processo di Visual Studio stesso.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-178">You may see this error when you have previously successfully logged in using a different Windows Azure Active Directory account from within the same Visual Studio process.</span></span> <span data-ttu-id="b1c5f-179">Disconnettersi dall'account specificato o riavviare Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-179">Log out from the specified account or restart Visual Studio.</span></span> <span data-ttu-id="b1c5f-180">Se in precedenza eseguito l'accesso e selezionato l'opzione "Mantieni l'accesso", si potrebbe essere necessario cancellare i cookie del browser. < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-180">If you previously logged in and selected the option to "Keep me signed in" then you may need to clear your browser cookies.<o:p></o:p></span></span>

## <a name="acs20012-the-request-is-not-a-valid-ws-federation-protocol-message-opop"></a><span data-ttu-id="b1c5f-181">ACS20012: La richiesta non è un messaggio del protocollo WS-Federation valido < o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="b1c5f-181">ACS20012: The request is not a valid WS-Federation protocol message <o:p></o:p></span></span>

<span data-ttu-id="b1c5f-182">Questa situazione può verificarsi se è già connessi con alcuni altri ID Microsoft per uno dei servizi di Azure.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-182">This can happen if you are already logged in with some other Microsoft ID to one of the Azure services.</span></span> <span data-ttu-id="b1c5f-183">Finestra del browser privata usare come InPrivate in Internet Explorer o in Incognito in Chrome o cancellare tutti i cookie.</span><span class="sxs-lookup"><span data-stu-id="b1c5f-183">Use Private browser window like InPrivate in IE or Incognito in Chrome or clear all the cookies.</span></span> <span data-ttu-id="b1c5f-184"><o:p></o:p></span><span class="sxs-lookup"><span data-stu-id="b1c5f-184"><o:p></o:p></span></span>

## <a name="additional-resources"></a><span data-ttu-id="b1c5f-185">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="b1c5f-185">Additional Resources</span></span>

- <span data-ttu-id="b1c5f-186">[Strumenti di Microsoft ASP.NET per Windows Azure Active Directory-Visual Studio 2012](https://blogs.msdn.com/b/vbertocci/archive/2013/02/18/microsoft-asp-net-tools-for-windows-azure-active-directory-visual-studio-2012.aspx) -Vittorio Bertocci</span><span class="sxs-lookup"><span data-stu-id="b1c5f-186">[Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio 2012](https://blogs.msdn.com/b/vbertocci/archive/2013/02/18/microsoft-asp-net-tools-for-windows-azure-active-directory-visual-studio-2012.aspx) – Vittorio Bertocci</span></span>
- [<span data-ttu-id="b1c5f-187">Windows le funzionalità di Azure: Identity</span><span class="sxs-lookup"><span data-stu-id="b1c5f-187">Windows Azure Features: Identity</span></span>](https://docs.microsoft.com/azure/active-directory/)
- [<span data-ttu-id="b1c5f-188">TechNet: Windows Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="b1c5f-188">TechNet: Windows Azure Active Directory</span></span>](https://technet.microsoft.com/library/hh967619.aspx)
- [<span data-ttu-id="b1c5f-189">Windows Azure Active Directory: Sviluppare App per la propria organizzazione</span><span class="sxs-lookup"><span data-stu-id="b1c5f-189">Windows Azure Active Directory: Develop Apps for your organization</span></span>](https://activedirectory.windowsazure.com/Develop/Single-Tenant.aspx)
- [<span data-ttu-id="b1c5f-190">Windows Azure Active Directory: Sviluppare App per le organizzazioni più</span><span class="sxs-lookup"><span data-stu-id="b1c5f-190">Windows Azure Active Directory: Develop Apps for multiple organizations</span></span>](https://activedirectory.windowsazure.com/Develop/Multi-Tenant.aspx)
- [<span data-ttu-id="b1c5f-191">Come implementare single sign-on con Microsoft Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="b1c5f-191">How to implement single sign-on with Windows Azure Active Directory</span></span>](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect)
- <span data-ttu-id="b1c5f-192">[L'accesso Single Sign-On con Microsoft Azure Active Directory: un approfondimento](https://blogs.msdn.com/b/vbertocci/archive/2012/07/05/single-sign-on-with-windows-azure-active-directory-a-deep-dive.aspx) -Vittorio Bertocci</span><span class="sxs-lookup"><span data-stu-id="b1c5f-192">[Single Sign-On with Windows Azure Active Directory: a Deep Dive](https://blogs.msdn.com/b/vbertocci/archive/2012/07/05/single-sign-on-with-windows-azure-active-directory-a-deep-dive.aspx) – Vittorio Bertocci</span></span>
- [<span data-ttu-id="b1c5f-193">Utilizzo di ADFS 2.0 per implementare e gestire l'accesso single sign-on</span><span class="sxs-lookup"><span data-stu-id="b1c5f-193">Use AD FS 2.0 to implement and manage single sign-on</span></span>](https://technet.microsoft.com/library/jj205462.aspx)
