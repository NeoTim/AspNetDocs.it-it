---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
title: Aggiunta di un creare metodo e vista | Microsoft Docs
author: shanselman
description: Si tratta di un'esercitazione per principianti che introduce i concetti di base di ASP.NET MVC. Creare un'applicazione web semplice che legge e scrive da un database.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: a3a90963-0286-4fa0-9b3d-c230cc18b0a3
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
msc.type: authoredcontent
ms.openlocfilehash: f648e0cb53dd410105adc22401f19a5a15f9e8c1
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/17/2019
ms.locfileid: "59380808"
---
# <a name="adding-a-create-method-and-create-view"></a><span data-ttu-id="9e7b6-104">Aggiunta di un metodo di creazione e di una visualizzazione di creazione</span><span class="sxs-lookup"><span data-stu-id="9e7b6-104">Adding a Create Method and Create View</span></span>

<span data-ttu-id="9e7b6-105">da [Scott Hanselman](https://github.com/shanselman)</span><span class="sxs-lookup"><span data-stu-id="9e7b6-105">by [Scott Hanselman](https://github.com/shanselman)</span></span>

> <span data-ttu-id="9e7b6-106">Si tratta di un'esercitazione per principianti che introduce i concetti di base di ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-106">This is a beginner tutorial that introduces the basics of ASP.NET MVC.</span></span> <span data-ttu-id="9e7b6-107">Si creerà una semplice applicazione web che legge e scrive da un database.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-107">You'll create a simple web application that reads and writes from a database.</span></span> <span data-ttu-id="9e7b6-108">Visitare il [centro di formazione di ASP.NET MVC](../../../index.md) per trovare altri ASP.NET MVC, esercitazioni ed esempi.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-108">Visit the [ASP.NET MVC learning center](../../../index.md) to find other ASP.NET MVC tutorials and samples.</span></span>


<span data-ttu-id="9e7b6-109">In questa sezione si intende implementare il supporto necessario per consentire agli utenti di creare nuovi film nel database.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-109">In this section we are going to implement the support necessary to enable users to create new movies in our database.</span></span> <span data-ttu-id="9e7b6-110">Faremo implementando l'azione URL Movies/Create.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-110">We'll do this by implementing the /Movies/Create URL action.</span></span>

<span data-ttu-id="9e7b6-111">L'URL di Movies/Create l'implementazione è un processo in due passaggi.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-111">Implementing the /Movies/Create URL is a two step process.</span></span> <span data-ttu-id="9e7b6-112">Quando un utente visita prima di tutto l'URL di Movies/Create si vuole visualizzare in un form HTML che è possibile compilare per immettere un nuovo film.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-112">When a user first visits the /Movies/Create URL we want to show them an HTML form that they can fill out to enter a new movie.</span></span> <span data-ttu-id="9e7b6-113">Quindi, quando l'utente invia il form e gli invii che i dati di postback al server, si vuole recuperare il contenuto registrato e salvarlo nel database.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-113">Then, when the user submits the form and posts the data back to the server, we want to retrieve the posted contents and save it into our database.</span></span>

<span data-ttu-id="9e7b6-114">Che verrà implementato questi due passaggi all'interno di due metodi Create () all'interno della classe MoviesController.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-114">We'll implement these two steps within two Create() methods within our MoviesController class.</span></span> <span data-ttu-id="9e7b6-115">Un metodo consente di visualizzare il &lt;form&gt; che l'utente deve compilare per creare un nuovo film.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-115">One method will show the &lt;form&gt; that the user should fill out to create a new movie.</span></span> <span data-ttu-id="9e7b6-116">Il secondo metodo gestirà l'elaborazione dei dati inviati quando l'utente invia il &lt;form&gt; il postback al server e salvare un nuovo film nel database.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-116">The second method will handle processing the posted data when the user submits the &lt;form&gt; back to the server, and save a new Movie within our database.</span></span>

<span data-ttu-id="9e7b6-117">Di seguito è riportato il codice verrà aggiunto alla nostra classe MoviesController per implementare questa:</span><span class="sxs-lookup"><span data-stu-id="9e7b6-117">Below is the code we'll add to our MoviesController class to implement this:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample1.cs)]

<span data-ttu-id="9e7b6-118">Il codice sopra riportato contiene tutto il codice che avremo bisogno all'interno di Controller.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-118">The above code contains all of the code that we'll need within our Controller.</span></span>

<span data-ttu-id="9e7b6-119">Verrà ora implementata il modello Create View che verranno utilizzate per visualizzare un form all'utente.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-119">Let's now implement the Create View template that we'll use to display a form to the user.</span></span> <span data-ttu-id="9e7b6-120">Si sarà fare clic con il pulsante destro nel primo metodo di creazione e selezionare "Aggiungi visualizzazione" per creare il modello di visualizzazione per il modulo di film.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-120">We'll right click in the first Create method and select "Add View" to create the view template for our Movie form.</span></span>

<span data-ttu-id="9e7b6-121">Sceglieremo ora che abbiamo si decide di passare il modello di vista di un film"" come la classe di visualizzazione dei dati e indicare che desideriamo "lo scaffolding di" un modello di "Crea".</span><span class="sxs-lookup"><span data-stu-id="9e7b6-121">We'll select that we are going to pass the view template a "Movie" as its view data class, and indicate that we want to "scaffold" a "Create" template.</span></span>

<span data-ttu-id="9e7b6-122">[![Aggiungi visualizzazione](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9e7b6-122">[![Add View](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span></span>

<span data-ttu-id="9e7b6-123">Dopo aver fatto clic sul pulsante Aggiungi modello di vista \Movies\Create.aspx verrà creato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-123">After you click the Add button, \Movies\Create.aspx View template will be created for you.</span></span> <span data-ttu-id="9e7b6-124">Poiché sono stati selezionati nell'elenco a discesa "visualizzare il contenuto" "Crea", la finestra di dialogo Aggiungi visualizzazione automaticamente "sottoposto a scaffolding" del contenuto predefinito per noi.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-124">Because we selected "Create" from the "view content" dropdown, the Add View dialog automatically "scaffolded" some default content for us.</span></span> <span data-ttu-id="9e7b6-125">Lo scaffolding creato un elemento HTML &lt;form&gt;, per passare una posizione per errore di convalida dei messaggi e poiché lo scaffolding SA sui film, creata etichetta e i campi per ogni proprietà della nostra classe.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-125">The scaffolding created an HTML &lt;form&gt;, a place for validation error messages to go, and since scaffolding knows about Movies, it created Label and Fields for each property of our class.</span></span>

[!code-aspx[Main](getting-started-with-mvc-part6/samples/sample2.aspx)]

<span data-ttu-id="9e7b6-126">Poiché il nostro database fornisce automaticamente un film un ID, è possibile rimuovere tali campi di tale modello di riferimento. ID dalla visualizzazione Create.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-126">Since our database automatically gives a Movie an ID, let's remove those fields that reference model.Id from our Create View.</span></span> <span data-ttu-id="9e7b6-127">Rimuovere le 7 righe dopo &lt;legenda&gt;campi&lt;/legend&gt; che mostrano il campo ID non vogliamo.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-127">Remove the 7 lines after &lt;legend&gt;Fields&lt;/legend&gt; as they show the ID field that we don't want.</span></span>

<span data-ttu-id="9e7b6-128">È possibile ora creare un nuovo film e aggiungerlo al database.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-128">Let's now create a new movie and add it to the database.</span></span> <span data-ttu-id="9e7b6-129">Verrà effettuare questa operazione eseguendo nuovamente l'applicazione e visitare il "/ film" URL e fare clic sul collegamento "Crea" per aggiungere un nuovo film.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-129">We'll do this by running the application again and visit the "/Movies" URL and click the "Create" link to add a new Movie.</span></span>

<span data-ttu-id="9e7b6-130">[![Create - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="9e7b6-130">[![Create - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span></span>

<span data-ttu-id="9e7b6-131">Quando si fa clic sul pulsante Crea, verranno resi disponibili (tramite HTTP POST) i dati in questo modulo per il metodo /Movies/Create appena creato.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-131">When we click the Create button, we'll be posting back (via HTTP POST) the data on this form to the /Movies/Create method that we just created.</span></span> <span data-ttu-id="9e7b6-132">Proprio come quando automaticamente il sistema ha richiesto il parametro "numTimes" e "name" all'URL esterno e li mappati ai parametri in un metodo in precedenza, il sistema verrà automaticamente portare i campi del modulo da una richiesta POST ed eseguirne il mapping a un oggetto.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-132">Just like when the system automatically took the "numTimes" and "name " parameter out of the URL and mapped them to parameters on a method earlier, the system will automatically take the Form Fields from a POST and map them to an object.</span></span> <span data-ttu-id="9e7b6-133">In questo caso, i valori dei campi in formato HTML, ad esempio "ReleaseDate" e "Title" automaticamente essere inseriti nelle proprietà del corretta di una nuova istanza di un film.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-133">In this case, values from fields in HTML like "ReleaseDate" and "Title" will automatically be put into the correct properties of a new instance of a Movie.</span></span>

<span data-ttu-id="9e7b6-134">Verrà ora esaminato il secondo metodo Create dal nostro MoviesController nuovamente.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-134">Let's look at the second Create method from our MoviesController again.</span></span> <span data-ttu-id="9e7b6-135">Si noti come richiede un oggetto "Film" come argomento:</span><span class="sxs-lookup"><span data-stu-id="9e7b6-135">Notice how it takes a "Movie" object as an argument:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample3.cs)]

<span data-ttu-id="9e7b6-136">Questo oggetto è stato quindi passato alla versione [HttpPost] del nostro metodo di azione Create e salvato nel database e quindi l'utente viene reindirizzato al metodo di azione Index () che consente di visualizzare il risultato salvato nell'elenco di film:</span><span class="sxs-lookup"><span data-stu-id="9e7b6-136">This Movie object was then passed to the [HttpPost] version of our Create action method, and we saved it in the database and then redirected the user back to the Index() action method which will show the saved result in the movie list:</span></span>

<span data-ttu-id="9e7b6-137">[![Movie List - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="9e7b6-137">[![Movie List - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span></span>

<span data-ttu-id="9e7b6-138">È non verifica se il film siano corretti, tuttavia, e il database non consentirà di salvare un film con nessun titolo.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-138">We aren't checking if our movies are correct, though, and the database won't allow us to save a movie with no Title.</span></span> <span data-ttu-id="9e7b6-139">Sarebbe bello se potremmo l'utente viene informato che prima il database ha generato un errore.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-139">It'd be nice if we could tell the user that before the database threw an error.</span></span> <span data-ttu-id="9e7b6-140">Faremo successiva mediante l'aggiunta di supporto per la convalida per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9e7b6-140">We'll do this next by adding validation support to our application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9e7b6-141">[Precedente](getting-started-with-mvc-part5.md)
> [Successivo](getting-started-with-mvc-part7.md)</span><span class="sxs-lookup"><span data-stu-id="9e7b6-141">[Previous](getting-started-with-mvc-part5.md)
[Next](getting-started-with-mvc-part7.md)</span></span>
