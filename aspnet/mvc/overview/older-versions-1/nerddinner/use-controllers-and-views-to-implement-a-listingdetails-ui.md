---
uid: mvc/overview/older-versions-1/nerddinner/use-controllers-and-views-to-implement-a-listingdetails-ui
title: Utilizzo di controller e visualizzazioni per implementare un'interfaccia utente di elenco/dettagli . Documenti Microsoft
author: rick-anderson
description: Passaggio 4 viene illustrato come aggiungere un Controller all'applicazione che sfrutta il modello per fornire agli utenti un'esperienza di navigazione di elenco dati/dettagli...
ms.author: riande
ms.date: 07/27/2010
ms.assetid: 64116e56-1c9a-4f07-8097-bb36cbb6e57f
msc.legacyurl: /mvc/overview/older-versions-1/nerddinner/use-controllers-and-views-to-implement-a-listingdetails-ui
msc.type: authoredcontent
ms.openlocfilehash: 49c7dc977477a4edbfcfc68b166ae7ea3fa22f2a
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/17/2020
ms.locfileid: "81541312"
---
# <a name="use-controllers-and-views-to-implement-a-listingdetails-ui"></a><span data-ttu-id="d8792-103">Usare controller e visualizzazioni per implementare un'interfaccia utente elenco/dettagli</span><span class="sxs-lookup"><span data-stu-id="d8792-103">Use Controllers and Views to Implement a Listing/Details UI</span></span>

<span data-ttu-id="d8792-104">da parte [di Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="d8792-104">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="d8792-105">Scarica il PDF</span><span class="sxs-lookup"><span data-stu-id="d8792-105">Download PDF</span></span>](http://aspnetmvcbook.s3.amazonaws.com/aspnetmvc-nerdinner_v1.pdf)

> <span data-ttu-id="d8792-106">Questo è il passaggio 4 di un'esercitazione gratuita [sull'applicazione "NerdDinner"](introducing-the-nerddinner-tutorial.md) che illustra come compilare un'applicazione Web piccola ma completa usando ASP.NET MVC 1.</span><span class="sxs-lookup"><span data-stu-id="d8792-106">This is step 4 of a free ["NerdDinner" application tutorial](introducing-the-nerddinner-tutorial.md) that walks-through how to build a small, but complete, web application using ASP.NET MVC 1.</span></span>
> 
> <span data-ttu-id="d8792-107">Passaggio 4 viene illustrato come aggiungere un Controller all'applicazione che sfrutta il modello per fornire agli utenti un elenco di dati/dettagli esperienza di navigazione per le cene sul nostro sito NerdDinner.Step 4 shows how to add a Controller to the application that takes advantage of our model to provide users with a data listing/details navigation experience for dinners on our NerdDinner site.</span><span class="sxs-lookup"><span data-stu-id="d8792-107">Step 4 shows how to add a Controller to the application that takes advantage of our model to provide users with a data listing/details navigation experience for dinners on our NerdDinner site.</span></span>
> 
> <span data-ttu-id="d8792-108">Se si utilizza ASP.NET MVC 3, è consigliabile seguire le esercitazioni [Introduzione a MVC 3](../../older-versions/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) o [ALL'archivio musicale MVC.](../../older-versions/mvc-music-store/mvc-music-store-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="d8792-108">If you are using ASP.NET MVC 3, we recommend you follow the [Getting Started With MVC 3](../../older-versions/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) or [MVC Music Store](../../older-versions/mvc-music-store/mvc-music-store-part-1.md) tutorials.</span></span>

## <a name="nerddinner-step-4-controllers-and-views"></a><span data-ttu-id="d8792-109">Passaggio 4 di NerdDinnerNerdDinner Step 4: Controllers and Views</span><span class="sxs-lookup"><span data-stu-id="d8792-109">NerdDinner Step 4: Controllers and Views</span></span>

<span data-ttu-id="d8792-110">Con i framework Web tradizionali (ASP classico, PHP, web Form ASP.NET e così via), gli URL in ingresso vengono in genere mappati ai file su disco.</span><span class="sxs-lookup"><span data-stu-id="d8792-110">With traditional web frameworks (classic ASP, PHP, ASP.NET Web Forms, etc), incoming URLs are typically mapped to files on disk.</span></span> <span data-ttu-id="d8792-111">Ad esempio: una richiesta per un URL come "/Products.aspx" o "/Products.php" potrebbe essere elaborata da un file "Products.aspx" o "Products.php".</span><span class="sxs-lookup"><span data-stu-id="d8792-111">For example: a request for a URL like "/Products.aspx" or "/Products.php" might be processed by a "Products.aspx" or "Products.php" file.</span></span>

<span data-ttu-id="d8792-112">I framework MVC basati sul Web eseguono il mapping degli URL al codice server in modo leggermente diverso.</span><span class="sxs-lookup"><span data-stu-id="d8792-112">Web-based MVC frameworks map URLs to server code in a slightly different way.</span></span> <span data-ttu-id="d8792-113">Invece di mappare gli URL in ingresso ai file, eseguono invece il mapping degli URL ai metodi nelle classi.</span><span class="sxs-lookup"><span data-stu-id="d8792-113">Instead of mapping incoming URLs to files, they instead map URLs to methods on classes.</span></span> <span data-ttu-id="d8792-114">Queste classi sono chiamate "Controller" e sono responsabili dell'elaborazione delle richieste HTTP in arrivo, della gestione dell'input dell'utente, del recupero e del salvataggio dei dati e della determinazione della risposta da inviare al client (visualizzazione HTML, download di un file, reindirizzamento a un URL diverso e così via).</span><span class="sxs-lookup"><span data-stu-id="d8792-114">These classes are called "Controllers" and they are responsible for processing incoming HTTP requests, handling user input, retrieving and saving data, and determining the response to send back to the client (display HTML, download a file, redirect to a different URL, etc).</span></span>

<span data-ttu-id="d8792-115">Ora che abbiamo creato un modello di base per l'applicazione NerdDinner, il passaggio successivo consisterà nell'aggiungere un Controller all'applicazione che ne trae vantaggio per fornire agli utenti un'esperienza di navigazione di elenco dati/dettagli per Dinners sul nostro sito.</span><span class="sxs-lookup"><span data-stu-id="d8792-115">Now that we have built up a basic model for our NerdDinner application, our next step will be to add a Controller to the application that takes advantage of it to provide users with a data listing/details navigation experience for Dinners on our site.</span></span>

### <a name="adding-a-dinnerscontroller-controller"></a><span data-ttu-id="d8792-116">Aggiunta di un controller DinnersControllerAdding a DinnersController Controller</span><span class="sxs-lookup"><span data-stu-id="d8792-116">Adding a DinnersController Controller</span></span>

<span data-ttu-id="d8792-117">Inizieremo facendo clic con il pulsante destro del mouse sulla cartella "Controllers" all'interno del nostro progetto web, quindi selezionare il comando di menu **Aggiungi controller&gt;** (è anche possibile eseguire questo comando digitando Ctrl-M, Ctrl-C):</span><span class="sxs-lookup"><span data-stu-id="d8792-117">We'll begin by right-clicking on the "Controllers" folder within our web project, and then select the **Add-&gt;Controller** menu command (you can also execute this command by typing Ctrl-M, Ctrl-C):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image1.png)

<span data-ttu-id="d8792-118">Verrà eseguito la finestra di dialogo "Aggiungi controller":</span><span class="sxs-lookup"><span data-stu-id="d8792-118">This will bring up the "Add Controller" dialog:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image2.png)

<span data-ttu-id="d8792-119">Chiameremo il nuovo controller "DinnersController" e fare clic sul pulsante "Aggiungi".</span><span class="sxs-lookup"><span data-stu-id="d8792-119">We'll name the new controller "DinnersController" and click the "Add" button.</span></span> <span data-ttu-id="d8792-120">Visual Studio aggiungerà quindi un file di DinnersController.cs nella directory di controllo:</span><span class="sxs-lookup"><span data-stu-id="d8792-120">Visual Studio will then add a DinnersController.cs file under our \Controllers directory:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image3.png)

<span data-ttu-id="d8792-121">Si aprirà anche la nuova classe DinnersController all'interno dell'editor di codice.</span><span class="sxs-lookup"><span data-stu-id="d8792-121">It will also open up the new DinnersController class within the code-editor.</span></span>

### <a name="adding-index-and-details-action-methods-to-the-dinnerscontroller-class"></a><span data-ttu-id="d8792-122">Aggiunta di metodi di azione Index() e Details() alla classe DinnersController</span><span class="sxs-lookup"><span data-stu-id="d8792-122">Adding Index() and Details() Action Methods to the DinnersController Class</span></span>

<span data-ttu-id="d8792-123">Vogliamo consentire ai visitatori che utilizzano la nostra applicazione di sfogliare un elenco di cene imminenti, e consentire loro di fare clic su qualsiasi cena nella lista per vedere dettagli specifici su di esso.</span><span class="sxs-lookup"><span data-stu-id="d8792-123">We want to enable visitors using our application to browse a list of upcoming dinners, and allow them to click on any Dinner in the list to see specific details about it.</span></span> <span data-ttu-id="d8792-124">A tale scopo, pubblicando i seguenti URL dall'applicazione:</span><span class="sxs-lookup"><span data-stu-id="d8792-124">We'll do this by publishing the following URLs from our application:</span></span>

| <span data-ttu-id="d8792-125">**URL**</span><span class="sxs-lookup"><span data-stu-id="d8792-125">**URL**</span></span> | <span data-ttu-id="d8792-126">**Scopo**</span><span class="sxs-lookup"><span data-stu-id="d8792-126">**Purpose**</span></span> |
| --- | --- |
| <span data-ttu-id="d8792-127">*/Le cene/*</span><span class="sxs-lookup"><span data-stu-id="d8792-127">*/Dinners/*</span></span> | <span data-ttu-id="d8792-128">Visualizzare un elenco HTML delle cene imminenti</span><span class="sxs-lookup"><span data-stu-id="d8792-128">Display an HTML list of upcoming dinners</span></span> |
| <span data-ttu-id="d8792-129">*/Cena/Dettagli/[id]*</span><span class="sxs-lookup"><span data-stu-id="d8792-129">*/Dinners/Details/[id]*</span></span> | <span data-ttu-id="d8792-130">Visualizzare i dettagli di una cena specifica indicata da un parametro "id" incorporato nell'URL, che corrisponderà all'ID della cena nel database.</span><span class="sxs-lookup"><span data-stu-id="d8792-130">Display details about a specific dinner indicated by an "id" parameter embedded within the URL – which will match the DinnerID of the dinner in the database.</span></span> <span data-ttu-id="d8792-131">Ad esempio: /Dinners/Details/2 visualizzerebbe una pagina HTML con i dettagli sulla DinnerID il cui valore DinnerID è 2.</span><span class="sxs-lookup"><span data-stu-id="d8792-131">For example: /Dinners/Details/2 would display an HTML page with details about the Dinner whose DinnerID value is 2.</span></span> |

<span data-ttu-id="d8792-132">Pubblicheremo le implementazioni iniziali di questi URL aggiungendo due "metodi di azione" pubblici alla nostra classe DinnersController come di seguito:We will publish initial implementations of these URLs by adding two public "action methods" to our DinnersController class like below:</span><span class="sxs-lookup"><span data-stu-id="d8792-132">We will publish initial implementations of these URLs by adding two public "action methods" to our DinnersController class like below:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample1.cs)]

<span data-ttu-id="d8792-133">Verrà quindi eseguita l'applicazione NerdDinner e verrà utilizzato il browser per richiamarli.</span><span class="sxs-lookup"><span data-stu-id="d8792-133">We'll then run the NerdDinner application and use our browser to invoke them.</span></span> <span data-ttu-id="d8792-134">Digitando l'URL *"/Dinners/"* verrà eseguita la nostra funzione *Index()* e verrà inviata la seguente risposta:</span><span class="sxs-lookup"><span data-stu-id="d8792-134">Typing in the *"/Dinners/"* URL will cause our *Index()* method to run, and it will send back the following response:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image4.png)

<span data-ttu-id="d8792-135">Digitando l'URL *"/Dinners/Details/2"* verrà eseguito il nostro metodo *Details()* e verrà restituita la seguente risposta:</span><span class="sxs-lookup"><span data-stu-id="d8792-135">Typing in the *"/Dinners/Details/2"* URL will cause our *Details()* method to run, and send back the following response:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image5.png)

<span data-ttu-id="d8792-136">Ci si potrebbe chiedere - come ha fatto ASP.NET MVC sapere per creare la nostra classe DinnersController e richiamare tali metodi?</span><span class="sxs-lookup"><span data-stu-id="d8792-136">You might be wondering - how did ASP.NET MVC know to create our DinnersController class and invoke those methods?</span></span> <span data-ttu-id="d8792-137">Per comprendere questo, diamo un rapido sguardo a come funziona il routing.</span><span class="sxs-lookup"><span data-stu-id="d8792-137">To understand that let's take a quick look at how routing works.</span></span>

### <a name="understanding-aspnet-mvc-routing"></a><span data-ttu-id="d8792-138">Informazioni ASP.NET routing MVC</span><span class="sxs-lookup"><span data-stu-id="d8792-138">Understanding ASP.NET MVC Routing</span></span>

<span data-ttu-id="d8792-139">ASP.NET MVC include un potente motore di routing degli URL che offre molta flessibilità nel controllo della modalità di mapping degli URL alle classi controller.</span><span class="sxs-lookup"><span data-stu-id="d8792-139">ASP.NET MVC includes a powerful URL routing engine that provides a lot of flexibility in controlling how URLs are mapped to controller classes.</span></span> <span data-ttu-id="d8792-140">Esso consente di personalizzare completamente come ASP.NET MVC sceglie quale classe controller per creare, quale metodo richiamare su di esso, nonché configurare diversi modi in cui le variabili possono essere analizzate automaticamente dall'URL/ Stringa di query e passate al metodo come argomenti di parametro.</span><span class="sxs-lookup"><span data-stu-id="d8792-140">It allows us to completely customize how ASP.NET MVC chooses which controller class to create, which method to invoke on it, as well as configure different ways that variables can be automatically parsed from the URL/Querystring and passed to the method as parameter arguments.</span></span> <span data-ttu-id="d8792-141">Offre la flessibilità necessaria per ottimizzare totalmente un sito per SEO (ottimizzazione del motore di ricerca) e pubblicare qualsiasi struttura di URL che vogliamo da un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-141">It delivers the flexibility to totally optimize a site for SEO (search engine optimization) as well as publish any URL structure we want from an application.</span></span>

<span data-ttu-id="d8792-142">Per impostazione predefinita, i nuovi progetti MVC ASP.NET vengono forniti con un set preconfigurato di regole di routing URL già registrato.</span><span class="sxs-lookup"><span data-stu-id="d8792-142">By default, new ASP.NET MVC projects come with a preconfigured set of URL routing rules already registered.</span></span> <span data-ttu-id="d8792-143">In questo modo è possibile iniziare facilmente un'applicazione senza dover configurare in modo esplicito nulla.</span><span class="sxs-lookup"><span data-stu-id="d8792-143">This enables us to easily get started on an application without having to explicitly configure anything.</span></span> <span data-ttu-id="d8792-144">Le registrazioni delle regole di routing predefinite sono disponibili all'interno della classe "Application" dei nostri progetti, che è possibile aprire facendo doppio clic sul file "Global.asax" nella radice del progetto:</span><span class="sxs-lookup"><span data-stu-id="d8792-144">The default routing rule registrations can be found within the "Application" class of our projects – which we can open by double-clicking the "Global.asax" file in the root of our project:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image6.png)

<span data-ttu-id="d8792-145">Le regole di routing MVC di ASP.NET predefinite vengono registrate all'interno del metodo "RegisterRoutes" di questa classe:</span><span class="sxs-lookup"><span data-stu-id="d8792-145">The default ASP.NET MVC routing rules are registered within the "RegisterRoutes" method of this class:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample2.cs)]

<span data-ttu-id="d8792-146">Le "vie. La chiamata al metodo MapRoute()" precedente registra una regola di routing predefinita che esegue il mapping degli URL in ingresso alle classi controller utilizzando il formato dell'URL: "/'controller'/'action'/'id'" – dove "controller" è il nome della classe controller di cui creare un'istanza, "action" è il nome di un metodo pubblico da richiamare su di esso e "id" è un parametro facoltativo incorporato nell'URL che può essere passato come argomento al metodo.</span><span class="sxs-lookup"><span data-stu-id="d8792-146">The "routes.MapRoute()" method call above registers a default routing rule that maps incoming URLs to controller classes using the URL format: "/{controller}/{action}/{id}" – where "controller" is the name of the controller class to instantiate, "action" is the name of a public method to invoke on it, and "id" is an optional parameter embedded within the URL that can be passed as an argument to the method.</span></span> <span data-ttu-id="d8792-147">Il terzo parametro passato alla chiamata al metodo "MapRoute()" è un set di valori predefiniti da utilizzare per i valori controller/azione/id nel caso in cui non siano presenti nell'URL (Controller : "Home", Action "Index", Id "").</span><span class="sxs-lookup"><span data-stu-id="d8792-147">The third parameter passed to the "MapRoute()" method call is a set of default values to use for the controller/action/id values in the event that they are not present in the URL (Controller = "Home", Action="Index", Id="").</span></span>

<span data-ttu-id="d8792-148">Di seguito è riportata una tabella in cui viene illustrato come viene eseguito il mapping di un'ampia gamma di URL utilizzando la regola di route predefinita "<em>/</em>.</span><span class="sxs-lookup"><span data-stu-id="d8792-148">Below is a table that demonstrates how a variety of URLs are mapped using the default "<em>/{controllers}/{action}/{id}"</em>route rule:</span></span>

| <span data-ttu-id="d8792-149">**URL**</span><span class="sxs-lookup"><span data-stu-id="d8792-149">**URL**</span></span> | <span data-ttu-id="d8792-150">**Classe Controller**</span><span class="sxs-lookup"><span data-stu-id="d8792-150">**Controller Class**</span></span> | <span data-ttu-id="d8792-151">**Metodo Azione**</span><span class="sxs-lookup"><span data-stu-id="d8792-151">**Action Method**</span></span> | <span data-ttu-id="d8792-152">**Parametri passati**</span><span class="sxs-lookup"><span data-stu-id="d8792-152">**Parameters Passed**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="d8792-153">*/Cena/Dettagli/2*</span><span class="sxs-lookup"><span data-stu-id="d8792-153">*/Dinners/Details/2*</span></span> | <span data-ttu-id="d8792-154">DinnersController</span><span class="sxs-lookup"><span data-stu-id="d8792-154">DinnersController</span></span> | <span data-ttu-id="d8792-155">Dettagli (id)</span><span class="sxs-lookup"><span data-stu-id="d8792-155">Details(id)</span></span> | <span data-ttu-id="d8792-156">ID 2 (in n. 2</span><span class="sxs-lookup"><span data-stu-id="d8792-156">id=2</span></span> |
| <span data-ttu-id="d8792-157">*/Cena/Modifica/5*</span><span class="sxs-lookup"><span data-stu-id="d8792-157">*/Dinners/Edit/5*</span></span> | <span data-ttu-id="d8792-158">DinnersController</span><span class="sxs-lookup"><span data-stu-id="d8792-158">DinnersController</span></span> | <span data-ttu-id="d8792-159">Edit(id)</span><span class="sxs-lookup"><span data-stu-id="d8792-159">Edit(id)</span></span> | <span data-ttu-id="d8792-160">ID 5 (in n. 5 (informazioni in stati</span><span class="sxs-lookup"><span data-stu-id="d8792-160">id=5</span></span> |
| <span data-ttu-id="d8792-161">*/Cena/Crea*</span><span class="sxs-lookup"><span data-stu-id="d8792-161">*/Dinners/Create*</span></span> | <span data-ttu-id="d8792-162">DinnersController</span><span class="sxs-lookup"><span data-stu-id="d8792-162">DinnersController</span></span> | <span data-ttu-id="d8792-163">Create()</span><span class="sxs-lookup"><span data-stu-id="d8792-163">Create()</span></span> | <span data-ttu-id="d8792-164">N/D</span><span class="sxs-lookup"><span data-stu-id="d8792-164">N/A</span></span> |
| <span data-ttu-id="d8792-165">*/Le nozioni*</span><span class="sxs-lookup"><span data-stu-id="d8792-165">*/Dinners*</span></span> | <span data-ttu-id="d8792-166">DinnersController</span><span class="sxs-lookup"><span data-stu-id="d8792-166">DinnersController</span></span> | <span data-ttu-id="d8792-167">Indice()</span><span class="sxs-lookup"><span data-stu-id="d8792-167">Index()</span></span> | <span data-ttu-id="d8792-168">N/D</span><span class="sxs-lookup"><span data-stu-id="d8792-168">N/A</span></span> |
| <span data-ttu-id="d8792-169">*/home*</span><span class="sxs-lookup"><span data-stu-id="d8792-169">*/Home*</span></span> | <span data-ttu-id="d8792-170">Homecontroller</span><span class="sxs-lookup"><span data-stu-id="d8792-170">HomeController</span></span> | <span data-ttu-id="d8792-171">Indice()</span><span class="sxs-lookup"><span data-stu-id="d8792-171">Index()</span></span> | <span data-ttu-id="d8792-172">N/D</span><span class="sxs-lookup"><span data-stu-id="d8792-172">N/A</span></span> |
| */* | <span data-ttu-id="d8792-173">Homecontroller</span><span class="sxs-lookup"><span data-stu-id="d8792-173">HomeController</span></span> | <span data-ttu-id="d8792-174">Indice()</span><span class="sxs-lookup"><span data-stu-id="d8792-174">Index()</span></span> | <span data-ttu-id="d8792-175">N/D</span><span class="sxs-lookup"><span data-stu-id="d8792-175">N/A</span></span> |

<span data-ttu-id="d8792-176">Le ultime tre righe mostrano i valori predefiniti (Controller , Home, Azione , Indice, Id e "").</span><span class="sxs-lookup"><span data-stu-id="d8792-176">The last three rows show the default values (Controller = Home, Action = Index, Id = "") being used.</span></span> <span data-ttu-id="d8792-177">Poiché il metodo "Index" viene registrato come nome dell'azione predefinita, se non ne viene specificato uno, gli URL "/Dinners" e "/Home" determinano il metodo di azione Index() nelle relative classi Controller.</span><span class="sxs-lookup"><span data-stu-id="d8792-177">Because the "Index" method is registered as the default action name if one isn't specified, the "/Dinners" and "/Home" URLs cause the Index() action method to be invoked on their Controller classes.</span></span> <span data-ttu-id="d8792-178">Poiché il controller "Home" è registrato come controller predefinito, se non specificato, l'URL "/" determina la creazione dell'URL HomeController e il metodo di azione Index() su di esso.</span><span class="sxs-lookup"><span data-stu-id="d8792-178">Because the "Home" controller is registered as the default controller if one isn't specified, the "/" URL causes the HomeController to be created, and the Index() action method on it to be invoked.</span></span>

<span data-ttu-id="d8792-179">Se non ti piacciono queste regole di routing URL predefinite, la buona notizia è che sono facili da modificare - basta modificarle all'interno del metodo RegisterRoutes sopra.</span><span class="sxs-lookup"><span data-stu-id="d8792-179">If you don't like these default URL routing rules, the good news is that they are easy to change - just edit them within the RegisterRoutes method above.</span></span> <span data-ttu-id="d8792-180">Per la nostra applicazione NerdDinner, tuttavia, non stiamo andando a modificare nessuna delle regole di routing URL predefinito - invece ci limiteremo a usarli così com'è.</span><span class="sxs-lookup"><span data-stu-id="d8792-180">For our NerdDinner application, though, we aren't going to change any of the default URL routing rules – instead we'll just use them as-is.</span></span>

### <a name="using-the-dinnerrepository-from-our-dinnerscontroller"></a><span data-ttu-id="d8792-181">Utilizzo di DinnerRepository dal nostro DinnersController</span><span class="sxs-lookup"><span data-stu-id="d8792-181">Using the DinnerRepository from our DinnersController</span></span>

<span data-ttu-id="d8792-182">Sostituiamo ora l'implementazione corrente dei metodi di azione Indice() e Dettagli() di DinnersController con implementazioni che utilizzano il modello.</span><span class="sxs-lookup"><span data-stu-id="d8792-182">Let's now replace our current implementation of the DinnersController's Index() and Details() action methods with implementations that use our model.</span></span>

<span data-ttu-id="d8792-183">Useremo la classe DinnerRepository creata in precedenza per implementare il comportamento.</span><span class="sxs-lookup"><span data-stu-id="d8792-183">We'll use the DinnerRepository class we built earlier to implement the behavior.</span></span> <span data-ttu-id="d8792-184">Inizieremo aggiungendo un'istruzione "using" che fa riferimento allo spazio dei nomi "NerdDinner.Models" e quindi dichiareremo un'istanza del nostro DinnerRepository come un campo nella nostra classe DinnerController.</span><span class="sxs-lookup"><span data-stu-id="d8792-184">We'll begin by adding a "using" statement that references the "NerdDinner.Models" namespace, and then declare an instance of our DinnerRepository as a field on our DinnerController class.</span></span>

<span data-ttu-id="d8792-185">Più avanti in questo capitolo introdurremo il concetto di "Iniezione di dipendenze" e mostreremo un altro modo per i nostri controller per ottenere un riferimento a un DinnerRepository che consente di migliorare unit test - ma per ora ci limiteremo a creare un'istanza del nostro DinnerRepository inline come di seguito.</span><span class="sxs-lookup"><span data-stu-id="d8792-185">Later in this chapter we'll introduce the concept of "Dependency Injection" and show another way for our Controllers to obtain a reference to a DinnerRepository that enables better unit testing – but for right now we'll just create an instance of our DinnerRepository inline like below.</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample3.cs)]

<span data-ttu-id="d8792-186">Ora siamo pronti per generare una risposta HTML utilizzando i nostri oggetti del modello di dati recuperati.</span><span class="sxs-lookup"><span data-stu-id="d8792-186">Now we are ready to generate a HTML response back using our retrieved data model objects.</span></span>

### <a name="using-views-with-our-controller"></a><span data-ttu-id="d8792-187">Utilizzo delle viste con il controllerUsing Views with our Controller</span><span class="sxs-lookup"><span data-stu-id="d8792-187">Using Views with our Controller</span></span>

<span data-ttu-id="d8792-188">Sebbene sia possibile scrivere codice all'interno dei nostri metodi di azione per assemblare codice HTML e quindi utilizzare il metodo helper *Response.Write()* per inviarlo al client, tale approccio diventa abbastanza ingombrante rapidamente.</span><span class="sxs-lookup"><span data-stu-id="d8792-188">While it is possible to write code within our action methods to assemble HTML and then use the *Response.Write()* helper method to send it back to the client, that approach becomes fairly unwieldy quickly.</span></span> <span data-ttu-id="d8792-189">Un approccio molto migliore è per noi di eseguire solo l'applicazione e la logica dei dati all'interno dei nostri metodi di azione DinnersController e quindi passare i dati necessari per eseguire il rendering di una risposta HTML a un modello "visualizzazione" separato che è responsabile per l'output della rappresentazione HTML di esso.</span><span class="sxs-lookup"><span data-stu-id="d8792-189">A much better approach is for us to only perform application and data logic inside our DinnersController action methods, and to then pass the data needed to render a HTML response to a separate "view" template that is responsible for outputting the HTML representation of it.</span></span> <span data-ttu-id="d8792-190">Come vedremo in un attimo, un modello di "visualizzazione" è un file di testo che in genere contiene una combinazione di markup HTML e codice di rendering incorporato.</span><span class="sxs-lookup"><span data-stu-id="d8792-190">As we'll see in a moment, a "view" template is a text file that typically contains a combination of HTML markup and embedded rendering code.</span></span>

<span data-ttu-id="d8792-191">Separare la logica del controller dal rendering della visualizzazione offre diversi grandi vantaggi.</span><span class="sxs-lookup"><span data-stu-id="d8792-191">Separating our controller logic from our view rendering brings several big benefits.</span></span> <span data-ttu-id="d8792-192">In particolare consente di applicare una chiara "separazione dei problemi" tra il codice dell'applicazione e il codice di formattazione/rendering dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="d8792-192">In particular it helps enforce a clear "separation of concerns" between the application code and UI formatting/rendering code.</span></span> <span data-ttu-id="d8792-193">In questo modo è molto più semplice eseguire unit test della logica dell'applicazione in isolamento dalla logica di rendering dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="d8792-193">This makes it much easier to unit-test application logic in isolation from UI rendering logic.</span></span> <span data-ttu-id="d8792-194">Semplifica la modifica dei modelli di rendering dell'interfaccia utente in un secondo momento senza dover apportare modifiche al codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-194">It makes it easier to later modify the UI rendering templates without having to make application code changes.</span></span> <span data-ttu-id="d8792-195">E può rendere più facile per sviluppatori e progettisti di collaborare insieme ai progetti.</span><span class="sxs-lookup"><span data-stu-id="d8792-195">And it can make it easier for developers and designers to collaborate together on projects.</span></span>

<span data-ttu-id="d8792-196">È possibile aggiornare la nostra classe DinnersController per indicare che si desidera utilizzare un modello di visualizzazione per inviare una risposta dell'interfaccia utente HTML modificando le firme dei metodi dei due metodi di azione da avere un tipo restituito di "void" per avere invece un tipo restituito di "ActionResult".</span><span class="sxs-lookup"><span data-stu-id="d8792-196">We can update our DinnersController class to indicate that we want to use a view template to send back an HTML UI response by changing the method signatures of our two action methods from having a return type of "void" to instead have a return type of "ActionResult".</span></span> <span data-ttu-id="d8792-197">È quindi possibile chiamare il metodo helper *View()* nella classe di base Controller per restituire un oggetto "ViewResult" come di seguito:</span><span class="sxs-lookup"><span data-stu-id="d8792-197">We can then call the *View()* helper method on the Controller base class to return back a "ViewResult" object like below:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample4.cs)]

<span data-ttu-id="d8792-198">La firma del metodo helper *View()* che stiamo usando sopra è simile a quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d8792-198">The signature of the *View()* helper method we are using above looks like below:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image7.png)

<span data-ttu-id="d8792-199">Il primo parametro del metodo helper *View()* è il nome del file del modello di visualizzazione che si desidera utilizzare per eseguire il rendering della risposta HTML.</span><span class="sxs-lookup"><span data-stu-id="d8792-199">The first parameter to the *View()* helper method is the name of the view template file we want to use to render the HTML response.</span></span> <span data-ttu-id="d8792-200">Il secondo parametro è un oggetto modello che contiene i dati necessari al modello di visualizzazione per eseguire il rendering della risposta HTML.</span><span class="sxs-lookup"><span data-stu-id="d8792-200">The second parameter is a model object that contains the data that the view template needs in order to render the HTML response.</span></span>

<span data-ttu-id="d8792-201">All'interno del nostro metodo di azione Index() chiamiamo il metodo helper *View()* e indichiamo che vogliamo eseguire il rendering di un elenco HTML di cene utilizzando un modello di visualizzazione "Indice".</span><span class="sxs-lookup"><span data-stu-id="d8792-201">Within our Index() action method we are calling the *View()* helper method and indicating that we want to render an HTML listing of dinners using an "Index" view template.</span></span> <span data-ttu-id="d8792-202">Si passa il modello di visualizzazione una sequenza di Dinner oggetti per generare l'elenco da:</span><span class="sxs-lookup"><span data-stu-id="d8792-202">We are passing the view template a sequence of Dinner objects to generate the list from:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample5.cs)]

<span data-ttu-id="d8792-203">All'interno del nostro metodo di azione Details() tentiamo di recuperare un oggetto Dinner utilizzando l'ID fornito all'interno dell'URL.</span><span class="sxs-lookup"><span data-stu-id="d8792-203">Within our Details() action method we attempt to retrieve a Dinner object using the id provided within the URL.</span></span> <span data-ttu-id="d8792-204">Se viene trovato un Dinner valido, chiamiamo il metodo helper *View(),* che indica che si desidera utilizzare un modello di visualizzazione "Dettagli" per eseguire il rendering dell'oggetto Dinner recuperato.</span><span class="sxs-lookup"><span data-stu-id="d8792-204">If a valid Dinner is found we call the *View()* helper method, indicating we want to use a "Details" view template to render the retrieved Dinner object.</span></span> <span data-ttu-id="d8792-205">Se viene richiesta una cena non valida, viene visualizzato un messaggio di errore utile che indica che la cena non esiste utilizzando un modello di visualizzazione "NotFound" (e una versione di overload del metodo helper *View()* che accetta solo il nome del modello):</span><span class="sxs-lookup"><span data-stu-id="d8792-205">If an invalid dinner is requested, we render a helpful error message that indicates that the Dinner doesn't exist using a "NotFound" view template (and an overloaded version of the *View()* helper method that just takes the template name):</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample6.cs)]

<span data-ttu-id="d8792-206">È ora possibile implementare i modelli di visualizzazione "NotFound", "Details" e "Index".</span><span class="sxs-lookup"><span data-stu-id="d8792-206">Let's now implement the "NotFound", "Details", and "Index" view templates.</span></span>

### <a name="implementing-the-notfound-view-template"></a><span data-ttu-id="d8792-207">Implementazione del modello di visualizzazione "NotFound"</span><span class="sxs-lookup"><span data-stu-id="d8792-207">Implementing the "NotFound" View Template</span></span>

<span data-ttu-id="d8792-208">Inizieremo implementando il modello di visualizzazione "NotFound", che visualizza un messaggio di errore descrittivo che indica che non è possibile trovare la cena richiesta.</span><span class="sxs-lookup"><span data-stu-id="d8792-208">We'll begin by implementing the "NotFound" view template – which displays a friendly error message indicating that the requested dinner can't be found.</span></span>

<span data-ttu-id="d8792-209">Creeremo un nuovo modello di visualizzazione posizionando il cursore di testo all'interno di un metodo di azione del controller, quindi fare clic con il pulsante destro del mouse e scegliere il comando di menu "Aggiungi visualizzazione" (possiamo anche eseguire questo comando digitando Ctrl-M, Ctrl-V):</span><span class="sxs-lookup"><span data-stu-id="d8792-209">We'll create a new view template by positioning our text cursor within a controller action method, and then right click and choose the "Add View" menu command (we can also execute this command by typing Ctrl-M, Ctrl-V):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image8.png)

<span data-ttu-id="d8792-210">Verrà visualizzato un'immagine "Aggiungi vista" come di seguito.</span><span class="sxs-lookup"><span data-stu-id="d8792-210">This will bring up an "Add View" dialog like below.</span></span> <span data-ttu-id="d8792-211">Per impostazione predefinita, la finestra di dialogo prepoviene il nome della visualizzazione da creare in modo che corrisponda al nome del metodo di azione in cui si trovava il cursore quando è stata avviata la finestra di dialogo (in questo caso "Dettagli").</span><span class="sxs-lookup"><span data-stu-id="d8792-211">By default the dialog will pre-populate the name of the view to create to match the name of the action method the cursor was in when the dialog was launched (in this case "Details").</span></span> <span data-ttu-id="d8792-212">Poiché si desidera implementare prima il modello "NotFound", verrà eseguito l'override di questo nome di visualizzazione e impostarlo su invece essere "NotFound":Because we want to first implement the "NotFound" template, we'll override this view name and set it to instead be "NotFound":</span><span class="sxs-lookup"><span data-stu-id="d8792-212">Because we want to first implement the "NotFound" template, we'll override this view name and set it to instead be "NotFound":</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image9.png)

<span data-ttu-id="d8792-213">Quando si fa clic sul pulsante "Aggiungi", Visual Studio creerà un nuovo modello di visualizzazione "NotFound.aspx" per noi all'interno della directory "Views" (che verrà creato anche se la directory non esiste già):</span><span class="sxs-lookup"><span data-stu-id="d8792-213">When we click the "Add" button, Visual Studio will create a new "NotFound.aspx" view template for us within the "\Views\Dinners" directory (which it will also create if the directory doesn't already exist):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image10.png)

<span data-ttu-id="d8792-214">Verrà inoltre aperto il nuovo modello di visualizzazione "NotFound.aspx" all'interno dell'editor di codice:It will also open up our new "NotFound.aspx" view template within the code-editor:</span><span class="sxs-lookup"><span data-stu-id="d8792-214">It will also open up our new "NotFound.aspx" view template within the code-editor:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image11.png)

<span data-ttu-id="d8792-215">Per impostazione predefinita, i modelli di visualizzazione hanno due "aree contenuto" in cui è possibile aggiungere contenuto e codice.</span><span class="sxs-lookup"><span data-stu-id="d8792-215">View templates by default have two "content regions" where we can add content and code.</span></span> <span data-ttu-id="d8792-216">Il primo ci permette di personalizzare il "titolo" della pagina HTML inviata indietro.</span><span class="sxs-lookup"><span data-stu-id="d8792-216">The first allows us to customize the "title" of the HTML page sent back.</span></span> <span data-ttu-id="d8792-217">Il secondo ci permette di personalizzare il "contenuto principale" della pagina HTML inviata indietro.</span><span class="sxs-lookup"><span data-stu-id="d8792-217">The second allows us to customize the "main content" of the HTML page sent back.</span></span>

<span data-ttu-id="d8792-218">Per implementare il modello di visualizzazione "NotFound", aggiungeremo del contenuto di base:To implement our "NotFound" view template we'll add some basic content:</span><span class="sxs-lookup"><span data-stu-id="d8792-218">To implement our "NotFound" view template we'll add some basic content:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample7.aspx)]

<span data-ttu-id="d8792-219">Possiamo quindi provarlo all'interno del browser.</span><span class="sxs-lookup"><span data-stu-id="d8792-219">We can then try it out within the browser.</span></span> <span data-ttu-id="d8792-220">Per fare questo chiediamo l'URL *"/Dinners/Details/9999".*</span><span class="sxs-lookup"><span data-stu-id="d8792-220">To do this let's request the *"/Dinners/Details/9999"* URL.</span></span> <span data-ttu-id="d8792-221">Questo farà riferimento a una cena che attualmente non esiste nel database e causerà il nostro metodo di azione DinnersController.Details() per eseguire il rendering del modello di visualizzazione "NotFound":</span><span class="sxs-lookup"><span data-stu-id="d8792-221">This will refer to a dinner that doesn't currently exist in the database, and will cause our DinnersController.Details() action method to render our "NotFound" view template:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image12.png)

<span data-ttu-id="d8792-222">Una cosa che noterete nella schermata precedente è che il nostro modello di visualizzazione di base ha ereditato una serie di HTML che circonda il contenuto principale sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="d8792-222">One thing you'll notice in the screen-shot above is that our basic view template has inherited a bunch of HTML that surrounds the main content on the screen.</span></span> <span data-ttu-id="d8792-223">Questo perché il nostro modello di visualizzazione utilizza un modello di "pagina master" che ci consente di applicare un layout coerente in tutte le visualizzazioni del sito.</span><span class="sxs-lookup"><span data-stu-id="d8792-223">This is because our view-template is using a "master page" template that enables us to apply a consistent layout across all views on the site.</span></span> <span data-ttu-id="d8792-224">Discuteremo come le pagine master funzionano di più in una parte successiva di questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-224">We'll discuss how master pages work more in a later part of this tutorial.</span></span>

### <a name="implementing-the-details-view-template"></a><span data-ttu-id="d8792-225">Implementazione del modello di vista "Dettagli"</span><span class="sxs-lookup"><span data-stu-id="d8792-225">Implementing the "Details" View Template</span></span>

<span data-ttu-id="d8792-226">Ora implementiamo il modello di visualizzazione "Dettagli", che genererà codice HTML per un singolo modello Dinner.</span><span class="sxs-lookup"><span data-stu-id="d8792-226">Let's now implement the "Details" view template – which will generate HTML for a single Dinner model.</span></span>

<span data-ttu-id="d8792-227">Lo faremo posizionando il cursore di testo all'interno del metodo di azione Dettagli, quindi fare clic con il pulsante destro del mouse e scegliere il comando di menu "Aggiungi visualizzazione" (o premere Ctrl-M, Ctrl-V):</span><span class="sxs-lookup"><span data-stu-id="d8792-227">We'll do this by positioning our text cursor within the Details action method, and then right click and choose the "Add View" menu command (or press Ctrl-M, Ctrl-V):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image13.png)

<span data-ttu-id="d8792-228">Verrà visualizzato il riquadro di dialogo "Aggiungi visualizzazione".</span><span class="sxs-lookup"><span data-stu-id="d8792-228">This will bring up the "Add View" dialog.</span></span> <span data-ttu-id="d8792-229">Manterremo il nome della vista predefinita ("Dettagli").</span><span class="sxs-lookup"><span data-stu-id="d8792-229">We'll keep the default view name ("Details").</span></span> <span data-ttu-id="d8792-230">Si selezionerà anche la casella di controllo "Crea una visualizzazione fortemente tipizzato" nella finestra di dialogo e selezionare (utilizzando l'elenco a discesa casella combinata) il nome del tipo di modello che si sta passando dal Controller alla visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-230">We'll also select the "Create a strongly-typed View" checkbox in the dialog and select (using the combobox dropdown) the name of the model type we are passing from the Controller to the View.</span></span> <span data-ttu-id="d8792-231">Per questa visualizzazione si passa un oggetto Dinner (il nome completo per questo tipo è: "NerdDinner.Models.Dinner"):</span><span class="sxs-lookup"><span data-stu-id="d8792-231">For this view we are passing a Dinner object (the fully qualified name for this type is: "NerdDinner.Models.Dinner"):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image14.png)

<span data-ttu-id="d8792-232">A differenza del modello precedente, in cui si è scelto di creare una "Vista vuota", questa volta si sceglierà di "scaffold" automaticamente la vista utilizzando un modello "Dettagli".</span><span class="sxs-lookup"><span data-stu-id="d8792-232">Unlike the previous template, where we chose to create an "Empty View", this time we will choose to automatically "scaffold" the view using a "Details" template.</span></span> <span data-ttu-id="d8792-233">Possiamo indicare questo modificando il menu a discesa "Visualizza contenuto" nella finestra di dialogo sopra.</span><span class="sxs-lookup"><span data-stu-id="d8792-233">We can indicate this by changing the "View content" drop-down in the dialog above.</span></span>

<span data-ttu-id="d8792-234">"Scaffolding" genererà un'implementazione iniziale del modello di visualizzazione dei dettagli in base all'oggetto Dinner che stiamo passando ad esso.</span><span class="sxs-lookup"><span data-stu-id="d8792-234">"Scaffolding" will generate an initial implementation of our details view template based on the Dinner object we are passing to it.</span></span> <span data-ttu-id="d8792-235">Questo fornisce un modo semplice per iniziare rapidamente l'implementazione del modello di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-235">This provides an easy way for us to quickly get started on our view template implementation.</span></span>

<span data-ttu-id="d8792-236">Quando si fa clic sul pulsante "Aggiungi", Visual Studio creerà un nuovo file di modello di visualizzazione "Dettagli.aspx" per noi all'interno della nostra directory "Views" Dinners:</span><span class="sxs-lookup"><span data-stu-id="d8792-236">When we click the "Add" button, Visual Studio will create a new "Details.aspx" view template file for us within our "\Views\Dinners" directory:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image15.png)

<span data-ttu-id="d8792-237">Verrà inoltre aperto il nuovo modello di visualizzazione "Details.aspx" all'interno dell'editor di codice.</span><span class="sxs-lookup"><span data-stu-id="d8792-237">It will also open up our new "Details.aspx" view template within the code-editor.</span></span> <span data-ttu-id="d8792-238">Conterrà un'implementazione iniziale dello scaffolding di una visualizzazione dettagli basata su un modello Dinner.It will contain an initial scaffold implementation of a details view based on a Dinner model.</span><span class="sxs-lookup"><span data-stu-id="d8792-238">It will contain an initial scaffold implementation of a details view based on a Dinner model.</span></span> <span data-ttu-id="d8792-239">Il motore di scaffolding utilizza la reflection .NET per esaminare le proprietà pubbliche esposte nella classe passata e aggiungerà il contenuto appropriato in base a ogni tipo trovato:</span><span class="sxs-lookup"><span data-stu-id="d8792-239">The scaffolding engine uses .NET reflection to look at the public properties exposed on the class passed it, and will add appropriate content based on each type it finds:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample8.aspx)]

<span data-ttu-id="d8792-240">Possiamo richiedere l'URL *"/Dinners/Details/1"* per vedere come appare questa implementazione di scaffold "dettagli" nel browser.</span><span class="sxs-lookup"><span data-stu-id="d8792-240">We can request the *"/Dinners/Details/1"* URL to see what this "details" scaffold implementation looks like in the browser.</span></span> <span data-ttu-id="d8792-241">Utilizzando questo URL verrà visualizzata una delle cene che abbiamo aggiunto manualmente al nostro database quando l'abbiamo creato per la prima volta:</span><span class="sxs-lookup"><span data-stu-id="d8792-241">Using this URL will display one of the dinners we manually added to our database when we first created it:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image16.png)

<span data-ttu-id="d8792-242">Questo ci mette in funzione rapidamente e ci fornisce un'implementazione iniziale della nostra visualizzazione Details.aspx.</span><span class="sxs-lookup"><span data-stu-id="d8792-242">This gets us up and running quickly, and provides us with an initial implementation of our Details.aspx view.</span></span> <span data-ttu-id="d8792-243">Possiamo quindi andare e modificarlo per personalizzare l'interfaccia utente per la nostra soddisfazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-243">We can then go and tweak it to customize the UI to our satisfaction.</span></span>

<span data-ttu-id="d8792-244">Quando esaminiamo il modello Details.aspx più da vicino, scopriremo che contiene HTML statico e codice di rendering incorporato.</span><span class="sxs-lookup"><span data-stu-id="d8792-244">When we look at the Details.aspx template more closely, we'll find that it contains static HTML as well as embedded rendering code.</span></span> <span data-ttu-id="d8792-245">&lt;%&gt; % codice nuggets eseguire il codice &lt;quando&gt; viene eseguito il rendering del modello di visualizzazione e % % nuggets codice eseguire il codice in esso contenuto e quindi eseguire il rendering del risultato nel flusso di output del modello.</span><span class="sxs-lookup"><span data-stu-id="d8792-245">&lt;% %&gt; code nuggets execute code when the view template renders, and &lt;%= %&gt; code nuggets execute the code contained within them and then render the result to the output stream of the template.</span></span>

<span data-ttu-id="d8792-246">È possibile scrivere codice all'interno della visualizzazione che accede all'oggetto modello "Dinner" che è stato passato dal controller utilizzando una proprietà "Model" fortemente tipizzato.</span><span class="sxs-lookup"><span data-stu-id="d8792-246">We can write code within our View that accesses the "Dinner" model object that was passed from our controller using a strongly-typed "Model" property.</span></span> <span data-ttu-id="d8792-247">Visual Studio fornisce intellisense codice completo quando si accede a questa proprietà "Model" all'interno dell'editor:Visual Studio provides us with full code-intellisense when accessing this "Model" property within the editor:</span><span class="sxs-lookup"><span data-stu-id="d8792-247">Visual Studio provides us with full code-intellisense when accessing this "Model" property within the editor:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image17.png)

<span data-ttu-id="d8792-248">Apportiamo alcune modifiche in modo che l'origine per il modello di visualizzazione Dettagli finale sia simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="d8792-248">Let's make some tweaks so that the source for our final Details view template looks like below:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample9.aspx)]

<span data-ttu-id="d8792-249">Quando accediamo di nuovo all'URL *"/Dinners/Details/1"* verrà ora visualizzato come di seguito:</span><span class="sxs-lookup"><span data-stu-id="d8792-249">When we access the *"/Dinners/Details/1"* URL again it will now render like below:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image18.png)

### <a name="implementing-the-index-view-template"></a><span data-ttu-id="d8792-250">Implementazione del modello di vista "Indice"</span><span class="sxs-lookup"><span data-stu-id="d8792-250">Implementing the "Index" View Template</span></span>

<span data-ttu-id="d8792-251">Esaminiamo ora il modello di visualizzazione "Indice", che genererà un elenco delle cene imminenti.</span><span class="sxs-lookup"><span data-stu-id="d8792-251">Let's now implement the "Index" view template – which will generate a listing of upcoming Dinners.</span></span> <span data-ttu-id="d8792-252">Per fare questo posizioneremo il nostro cursore di testo all'interno del metodo di azione Indice, quindi fare clic con il pulsante destro del mouse e scegliere il comando di menu "Aggiungi visualizzazione" (o premere Ctrl-M, Ctrl-V).</span><span class="sxs-lookup"><span data-stu-id="d8792-252">To-do this we'll position our text cursor within the Index action method, and then right click and choose the "Add View" menu command (or press Ctrl-M, Ctrl-V).</span></span>

<span data-ttu-id="d8792-253">All'interno della finestra di dialogo "Aggiungi visualizzazione" manterremo il modello di vista denominato "Indice" e selezionare la casella di controllo "Crea una vista fortemente tipit".</span><span class="sxs-lookup"><span data-stu-id="d8792-253">Within the "Add View" dialog we'll keep the view template named "Index" and select the "Create a strongly-typed view" checkbox.</span></span> <span data-ttu-id="d8792-254">Questa volta sceglieremo di generare automaticamente un modello di visualizzazione "Elenco" e selezionare "NerdDinner.Models.Dinner" come tipo di modello passato alla visualizzazione (che poiché abbiamo indicato che stiamo creando uno scaffold "List" farà sì che la finestra di dialogo Aggiungi visualizzazione presupponga che stiamo passando una sequenza di oggetti Dinner dal nostro Controller alla vista):</span><span class="sxs-lookup"><span data-stu-id="d8792-254">This time we will choose to automatically generate a "List" view template, and select "NerdDinner.Models.Dinner" as the model type passed to the view (which because we have indicated we are creating a "List" scaffold will cause the Add View dialog to assume we are passing a sequence of Dinner objects from our Controller to the View):</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image19.png)

<span data-ttu-id="d8792-255">Quando si fa clic sul pulsante "Aggiungi", Visual Studio creerà un nuovo file di modello di visualizzazione "Index.aspx" per noi all'interno della nostra directory "Views".</span><span class="sxs-lookup"><span data-stu-id="d8792-255">When we click the "Add" button, Visual Studio will create a new "Index.aspx" view template file for us within our "\Views\Dinners" directory.</span></span> <span data-ttu-id="d8792-256">Sarà "scaffold" un'implementazione iniziale all'interno di esso che fornisce un elenco di tabella HTML delle cene passiamo alla visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-256">It will "scaffold" an initial implementation within it that provides an HTML table listing of the Dinners we pass to the view.</span></span>

<span data-ttu-id="d8792-257">Quando eseguiamo l'applicazione e accediamo all'URL *"/Dinners/"* renderà la nostra lista di cene in questo modo:</span><span class="sxs-lookup"><span data-stu-id="d8792-257">When we run the application and access the *"/Dinners/"* URL it will render our list of dinners like so:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image20.png)

<span data-ttu-id="d8792-258">La soluzione tabella di cui sopra ci dà un layout a griglia dei nostri dati Dinner - che non è proprio quello che vogliamo per il nostro consumatore di fronte Dinner elenco.</span><span class="sxs-lookup"><span data-stu-id="d8792-258">The table solution above gives us a grid-like layout of our Dinner data – which isn't quite what we want for our consumer facing Dinner listing.</span></span> <span data-ttu-id="d8792-259">È possibile aggiornare il modello di visualizzazione Index.aspx e modificarlo per elencare meno colonne di dati e utilizzare un &lt;&gt; ul elemento per eseguirne il rendering anziché una tabella utilizzando il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="d8792-259">We can update the Index.aspx view template and modify it to list fewer columns of data, and use a &lt;ul&gt; element to render them instead of a table using the code below:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample10.aspx)]

<span data-ttu-id="d8792-260">Stiamo usando la parola chiave "var" all'interno dell'istruzione foreach di cui sopra mentre ci rinosiamo su ogni cena nel nostro modello.</span><span class="sxs-lookup"><span data-stu-id="d8792-260">We are using the "var" keyword within the above foreach statement as we loop over each dinner in our Model.</span></span> <span data-ttu-id="d8792-261">Coloro che non hanno familiarità con la versione 3.0 di C, potrebbero pensare che l'uso di "var" significhi che l'oggetto dinner è ad associazione tardiva.</span><span class="sxs-lookup"><span data-stu-id="d8792-261">Those unfamiliar with C# 3.0 might think that using "var" means that the dinner object is late-bound.</span></span> <span data-ttu-id="d8792-262">Significa invece che il compilatore utilizza l'inferenza del tipo rispetto alla proprietà&lt;"Model" fortemente tipizzata (che è di tipo "IEnumerable Dinner&gt;") e compila la variabile locale "dinner" come tipo Dinner, ovvero si ottiene il controllo completo del processo di avvio e della verifica in fase di compilazione all'interno dei blocchi di codice:</span><span class="sxs-lookup"><span data-stu-id="d8792-262">It instead means that the compiler is using type-inference against the strongly typed "Model" property (which is of type "IEnumerable&lt;Dinner&gt;") and compiling the local "dinner" variable as a Dinner type – which means we get full intellisense and compile-time checking for it within code blocks:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image21.png)

<span data-ttu-id="d8792-263">Quando abbiamo colpito aggiorna sull'URL */Dinners* nel nostro browser la nostra vista aggiornata ora sembra come di seguito:</span><span class="sxs-lookup"><span data-stu-id="d8792-263">When we hit refresh on the */Dinners* URL in our browser our updated view now looks like below:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image22.png)

<span data-ttu-id="d8792-264">Questo è un aspetto migliore - ma non è ancora del tutto lì.</span><span class="sxs-lookup"><span data-stu-id="d8792-264">This is looking better – but isn't entirely there yet.</span></span> <span data-ttu-id="d8792-265">L'ultimo passaggio consiste nel consentire agli utenti finali di fare clic sulle singole cene nell'elenco e visualizzare i dettagli su di esse.</span><span class="sxs-lookup"><span data-stu-id="d8792-265">Our last step is to enable end-users to click individual Dinners in the list and see details about them.</span></span> <span data-ttu-id="d8792-266">Implementeremo questo eseguendo il rendering di elementi di collegamento ipertestuale HTML che si collegano al metodo di azione Details sul nostro DinnersController.We'll implement this by rendering HTML hyperlink elements that link to the Details action method on our DinnersController.</span><span class="sxs-lookup"><span data-stu-id="d8792-266">We'll implement this by rendering HTML hyperlink elements that link to the Details action method on our DinnersController.</span></span>

<span data-ttu-id="d8792-267">Possiamo generare questi collegamenti ipertestuali all'interno della nostra vista Indice in uno dei due modi.</span><span class="sxs-lookup"><span data-stu-id="d8792-267">We can generate these hyperlinks within our Index view in one of two ways.</span></span> <span data-ttu-id="d8792-268">Il primo consiste nel &lt;&gt; creare manualmente HTML a &lt;elementi&gt; come &lt;di&gt; seguito, in cui incorporiamo % blocchi all'interno di un elemento HTML:</span><span class="sxs-lookup"><span data-stu-id="d8792-268">The first is to manually create HTML &lt;a&gt; elements like below, where we embed &lt;% %&gt; blocks within the &lt;a&gt; HTML element:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image23.png)

<span data-ttu-id="d8792-269">Un approccio alternativo che possiamo usare è quello di sfruttare il metodo helper incorporato "Html.ActionLink()" all'interno di ASP.NET MVC che supporta la creazione a livello di codice la creazione di un HTML un elemento che si collega a un altro metodo di azione in un Controller:An alternative approach we can use is to take advantage of the built-in "Html.ActionLink()" helper method within ASP.NET MVC that supports programmatically creating an HTML &lt;a&gt; element that links to another action method on a Controller:</span><span class="sxs-lookup"><span data-stu-id="d8792-269">An alternative approach we can use is to take advantage of the built-in "Html.ActionLink()" helper method within ASP.NET MVC that supports programmatically creating an HTML &lt;a&gt; element that links to another action method on a Controller:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample11.aspx)]

<span data-ttu-id="d8792-270">Il primo parametro del metodo helper Html.ActionLink() è il testo-collegamento da visualizzare (in questo caso il titolo della cena), il secondo parametro è il nome dell'azione Controller a cui si desidera generare il collegamento (in questo caso il metodo Details) e il terzo parametro è un insieme di parametri da inviare all'azione (implementato come tipo anonimo con nome/valori di proprietà).</span><span class="sxs-lookup"><span data-stu-id="d8792-270">The first parameter to the Html.ActionLink() helper method is the link-text to display (in this case the title of the dinner), the second parameter is the Controller action name we want to generate the link to (in this case the Details method), and the third parameter is a set of parameters to send to the action (implemented as an anonymous type with property name/values).</span></span> <span data-ttu-id="d8792-271">In questo caso si sta specificando il parametro "id" della cena a cui si desidera eseguire il collegamento e, poiché la regola di routing dell'URL predefinita in ASP.NET MVC è ""Controller"/'Action/id' il metodo helper Html.ActionLink() genererà l'output seguente:</span><span class="sxs-lookup"><span data-stu-id="d8792-271">In this case we are specifying the "id" parameter of the dinner we want to link to, and because the default URL routing rule in ASP.NET MVC is "{Controller}/{Action}/{id}" the Html.ActionLink() helper method will generate the following output:</span></span>

[!code-html[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample12.html)]

<span data-ttu-id="d8792-272">Per la visualizzazione Index.aspx useremo l'approccio al metodo helper Html.ActionLink() e ogni cena nell'elenco verrà collegata all'URL dei dettagli appropriato:</span><span class="sxs-lookup"><span data-stu-id="d8792-272">For our Index.aspx view we'll use the Html.ActionLink() helper method approach and have each dinner in the list link to the appropriate details URL:</span></span>

[!code-aspx[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample13.aspx)]

<span data-ttu-id="d8792-273">E ora quando abbiamo colpito il */ Dinners* URL la nostra lista di cena si presenta come di seguito:</span><span class="sxs-lookup"><span data-stu-id="d8792-273">And now when we hit the */Dinners* URL our dinner list looks like below:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image24.png)

<span data-ttu-id="d8792-274">Quando clicchiamo su una delle cene nell'elenco, navigheremo per vedere i dettagli su di esso:</span><span class="sxs-lookup"><span data-stu-id="d8792-274">When we click any of the Dinners in the list we'll navigate to see details about it:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image25.png)

### <a name="convention-based-naming-and-the-views-directory-structure"></a><span data-ttu-id="d8792-275">Denominazione basata su convenzioni e struttura di directory di viste</span><span class="sxs-lookup"><span data-stu-id="d8792-275">Convention-based naming and the \Views directory structure</span></span>

<span data-ttu-id="d8792-276">ASP.NET applicazioni MVC per impostazione predefinita utilizzano una struttura di denominazione delle directory basata su convenzioni durante la risoluzione dei modelli di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-276">ASP.NET MVC applications by default use a convention-based directory naming structure when resolving view templates.</span></span> <span data-ttu-id="d8792-277">Ciò consente agli sviluppatori di evitare di dover qualificare completamente un percorso di posizione quando si fa riferimento alle visualizzazioni dall'interno di una classe Controller.This allows developers to avoid having to fully-qualify a location path when referencing views from within a Controller class.</span><span class="sxs-lookup"><span data-stu-id="d8792-277">This allows developers to avoid having to fully-qualify a location path when referencing views from within a Controller class.</span></span> <span data-ttu-id="d8792-278">Per impostazione predefinita ASP.NET MVC cercherà il\[file del\* modello di visualizzazione all'interno della directory di nome controller di visualizzazioni sotto l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-278">By default ASP.NET MVC will look for the view template file within the \*\Views\[ControllerName]\* directory underneath the application.</span></span>

<span data-ttu-id="d8792-279">Ad esempio, abbiamo lavorato sulla classe DinnersController, che fa riferimento in modo esplicito a tre modelli di visualizzazione: "Index", "Details" e "NotFound".</span><span class="sxs-lookup"><span data-stu-id="d8792-279">For example, we've been working on the DinnersController class – which explicitly references three view templates: "Index", "Details" and "NotFound".</span></span> <span data-ttu-id="d8792-280">ASP.NET MVC cercherà per impostazione predefinita queste visualizzazioni all'interno della directory *"Views" (Visualizzazioni)* sotto la directory radice dell'applicazione:</span><span class="sxs-lookup"><span data-stu-id="d8792-280">ASP.NET MVC will by default look for these views within the *\Views\Dinners* directory underneath our application root directory:</span></span>

![](use-controllers-and-views-to-implement-a-listingdetails-ui/_static/image26.png)

<span data-ttu-id="d8792-281">Si noti sopra come sono attualmente presenti tre classi di controller all'interno del progetto (DinnersController, HomeController e AccountController – le ultime due sono state aggiunte per impostazione predefinita quando è stato creato il progetto) e sono presenti tre sottodirectory (una per ogni controller) all'interno della directory di views.</span><span class="sxs-lookup"><span data-stu-id="d8792-281">Notice above how there are currently three controller classes within the project (DinnersController, HomeController and AccountController – the last two were added by default when we created the project), and there are three sub-directories (one for each controller) within the \Views directory.</span></span>

<span data-ttu-id="d8792-282">Le viste a cui viene fatto riferimento dai controller Home e Account risolveranno automaticamente i relativi modelli di visualizzazione dalle rispettive directory *"Views"* e *"Views" e "Views" (Visualizzazioni)* e "Account".</span><span class="sxs-lookup"><span data-stu-id="d8792-282">Views referenced from the Home and Accounts controllers will automatically resolve their view templates from the respective *\Views\Home* and *\Views\Account* directories.</span></span> <span data-ttu-id="d8792-283">La sottodirectory *"Views"* fornisce un modo per archiviare i modelli di visualizzazione che vengono riutilizzati tra più controller all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d8792-283">The *\Views\Shared* sub-directory provides a way to store view templates that are re-used across multiple controllers within the application.</span></span> <span data-ttu-id="d8792-284">Quando ASP.NET MVC tenta di risolvere un modello di visualizzazione, verrà innanzitutto controllare all'interno della directory specifica *\[del controller* di visualizzazioni e, se non riesce a trovare il modello di visualizzazione, verrà visualizzato all'interno *della* directory di visualizzazione .</span><span class="sxs-lookup"><span data-stu-id="d8792-284">When ASP.NET MVC attempts to resolve a view template, it will first check within the *\Views\[Controller]* specific directory, and if it can't find the view template there it will look within the *\Views\Shared* directory.</span></span>

<span data-ttu-id="d8792-285">Quando si tratta di assegnare un nome ai singoli modelli di visualizzazione, le indicazioni consigliate sono le indicazioni consigliate per fare in modo che il modello di visualizzazione condivida lo stesso nome del metodo di azione che ne ha causato il rendering.</span><span class="sxs-lookup"><span data-stu-id="d8792-285">When it comes to naming individual view templates, the recommended guidance is to have the view template share the same name as the action method that caused it to render.</span></span> <span data-ttu-id="d8792-286">Ad esempio, sopra il metodo di azione "Indice" viene usata la visualizzazione "Indice" per eseguire il rendering del risultato della visualizzazione e il metodo di azione "Dettagli" utilizza la visualizzazione "Dettagli" per eseguire il rendering dei risultati.</span><span class="sxs-lookup"><span data-stu-id="d8792-286">For example, above our "Index" action method is using the "Index" view to render the view result, and the "Details" action method is using the "Details" view to render its results.</span></span> <span data-ttu-id="d8792-287">In questo modo è più semplice vedere rapidamente quale modello è associato a ogni azione.</span><span class="sxs-lookup"><span data-stu-id="d8792-287">This makes it easy to quickly see which template is associated with each action.</span></span>

<span data-ttu-id="d8792-288">Gli sviluppatori non è necessario specificare in modo esplicito il nome del modello di visualizzazione quando il modello di visualizzazione ha lo stesso nome del metodo di azione richiamato nel controller.</span><span class="sxs-lookup"><span data-stu-id="d8792-288">Developers do not need to explicitly specify the view template name when the view template has the same name as the action method being invoked on the controller.</span></span> <span data-ttu-id="d8792-289">È invece possibile passare solo l'oggetto modello al metodo helper "View()" (senza specificare il nome della visualizzazione) e ASP.NET MVC dedurrà automaticamente che si desidera utilizzare il modello di visualizzazione *"Views\[ControllerName]\[ActionName]* su disco per eseguirne il rendering.</span><span class="sxs-lookup"><span data-stu-id="d8792-289">We can instead just pass the model object to the "View()" helper method (without specifying the view name), and ASP.NET MVC will automatically infer that we want to use the *\Views\[ControllerName]\[ActionName]* view template on disk to render it.</span></span>

<span data-ttu-id="d8792-290">Questo ci permette di pulire il nostro codice controller un po ', ed evitare di duplicare il nome due volte nel nostro codice:</span><span class="sxs-lookup"><span data-stu-id="d8792-290">This allows us to clean up our controller code a little, and avoid duplicating the name twice in our code:</span></span>

[!code-csharp[Main](use-controllers-and-views-to-implement-a-listingdetails-ui/samples/sample14.cs)]

<span data-ttu-id="d8792-291">Il codice di cui sopra è tutto ciò che è necessario per implementare una bella Dinner elenco/dettagli esperienza per il sito.</span><span class="sxs-lookup"><span data-stu-id="d8792-291">The above code is all that is needed to implement a nice Dinner listing/details experience for the site.</span></span>

#### <a name="next-step"></a><span data-ttu-id="d8792-292">passaggio successivo</span><span class="sxs-lookup"><span data-stu-id="d8792-292">Next Step</span></span>

<span data-ttu-id="d8792-293">Ora abbiamo una bella esperienza di navigazione cena costruito.</span><span class="sxs-lookup"><span data-stu-id="d8792-293">We now have a nice Dinner browsing experience built.</span></span>

<span data-ttu-id="d8792-294">È ora possibile abilitare il supporto di modifica dei moduli dati CRUD (Create, Read, Update, Delete).</span><span class="sxs-lookup"><span data-stu-id="d8792-294">Let's now enable CRUD (Create, Read, Update, Delete) data form editing support.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="d8792-295">[Successivo](build-a-model-with-business-rule-validations.md)
> [precedente](provide-crud-create-read-update-delete-data-form-entry-support.md)</span><span class="sxs-lookup"><span data-stu-id="d8792-295">[Previous](build-a-model-with-business-rule-validations.md)
[Next](provide-crud-create-read-update-delete-data-form-entry-support.md)</span></span>
