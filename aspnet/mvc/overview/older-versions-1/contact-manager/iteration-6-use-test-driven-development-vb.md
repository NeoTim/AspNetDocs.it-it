---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
title: 'Iterazione #6-usare lo sviluppo basato su test (VB) | Microsoft Docs'
author: microsoft
description: In questa iterazione sesta, viene aggiunto nuove funzionalità all'applicazione scrivendo unit test prima e scrivere codice sull'unit test. In questa iterazione,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: e1fd226f-3f8e-4575-a179-5c75b240333d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
msc.type: authoredcontent
ms.openlocfilehash: ac502a1f57b25dd596489d1e7abaa55a77ddb6c7
ms.sourcegitcommit: 62db31596a7da029263cf06335aff12236fb3186
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/26/2019
ms.locfileid: "58440339"
---
<a name="iteration-6--use-test-driven-development-vb"></a><span data-ttu-id="3213b-104">Iterazione #6-usare lo sviluppo basato su test (VB)</span><span class="sxs-lookup"><span data-stu-id="3213b-104">Iteration #6 – Use test-driven development (VB)</span></span>
====================
<span data-ttu-id="3213b-105">by [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="3213b-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="3213b-106">Scaricare il codice</span><span class="sxs-lookup"><span data-stu-id="3213b-106">Download Code</span></span>](iteration-6-use-test-driven-development-vb/_static/contactmanager_6_vb1.zip)

> <span data-ttu-id="3213b-107">In questa iterazione sesta, viene aggiunto nuove funzionalità all'applicazione scrivendo unit test prima e scrivere codice sull'unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="3213b-108">In questa iterazione, viene aggiunto gruppi di contatti.</span><span class="sxs-lookup"><span data-stu-id="3213b-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="3213b-109">Creazione di un'applicazione di gestione dei contatti ASP.NET MVC (VB)</span><span class="sxs-lookup"><span data-stu-id="3213b-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>
  

<span data-ttu-id="3213b-110">In questa serie di esercitazioni, creiamo un'intera applicazione di gestione dei contatti dall'inizio alla fine.</span><span class="sxs-lookup"><span data-stu-id="3213b-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="3213b-111">L'applicazione Contact Manager consente di archiviare le informazioni di contatto - nomi, i numeri di telefono e indirizzi di posta elettronica - per un elenco di persone.</span><span class="sxs-lookup"><span data-stu-id="3213b-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="3213b-112">Si compilerà l'applicazione a varie iterazioni.</span><span class="sxs-lookup"><span data-stu-id="3213b-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="3213b-113">A ogni iterazione, abbiamo migliorare gradualmente l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="3213b-114">L'obiettivo di questo approccio iterazione più è che consentono di comprendere il motivo per ogni modifica.</span><span class="sxs-lookup"><span data-stu-id="3213b-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="3213b-115">Iterazione #1 - creare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="3213b-116">Nella prima iterazione, verranno create Contact Manager nel modo più semplice possibile.</span><span class="sxs-lookup"><span data-stu-id="3213b-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="3213b-117">Viene aggiunto il supporto per le operazioni di base dei database: Creare, leggere, aggiornare ed eliminare (CRUD).</span><span class="sxs-lookup"><span data-stu-id="3213b-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="3213b-118">Iterazione #2 - migliorare l'applicazione aspetto interessante.</span><span class="sxs-lookup"><span data-stu-id="3213b-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="3213b-119">In questa iterazione è migliorare l'aspetto dell'applicazione modificando il valore predefinito di pagina master visualizzazione MVC ASP.NET e foglio di stile CSS.</span><span class="sxs-lookup"><span data-stu-id="3213b-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="3213b-120">Iterazione #3 - aggiungere la convalida dei form.</span><span class="sxs-lookup"><span data-stu-id="3213b-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="3213b-121">Nella terza iterazione, aggiungiamo la convalida dei form di base.</span><span class="sxs-lookup"><span data-stu-id="3213b-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="3213b-122">Persone è impedire l'invio di un modulo senza completare i campi del modulo richiesto.</span><span class="sxs-lookup"><span data-stu-id="3213b-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="3213b-123">È anche convalidare gli indirizzi di posta elettronica e numeri di telefono.</span><span class="sxs-lookup"><span data-stu-id="3213b-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="3213b-124">Iterazione #4 - rendere l'applicazione a regime.</span><span class="sxs-lookup"><span data-stu-id="3213b-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="3213b-125">In questo quarta iterazione, possiamo usufruire dei diversi modelli di progettazione di software per renderne più semplice da gestire e modificare l'applicazione Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="3213b-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="3213b-126">Ad esempio, è eseguire il refactoring l'applicazione per usare il modello di Repository e il modello di inserimento delle dipendenze.</span><span class="sxs-lookup"><span data-stu-id="3213b-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="3213b-127">Iterazione #5 - creare unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="3213b-128">Nell'iterazione del quinto, si semplifica l'applicazione di manutenzione e la modifica mediante l'aggiunta di unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="3213b-129">È simulare le classi di modello di dati e generare unit test per i controller e logica di convalida.</span><span class="sxs-lookup"><span data-stu-id="3213b-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="3213b-130">Iterazione #6 - usare lo sviluppo basato su test.</span><span class="sxs-lookup"><span data-stu-id="3213b-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="3213b-131">In questa iterazione sesta, viene aggiunto nuove funzionalità all'applicazione scrivendo unit test prima e scrivere codice sull'unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="3213b-132">In questa iterazione, viene aggiunto gruppi di contatti.</span><span class="sxs-lookup"><span data-stu-id="3213b-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="3213b-133">Iterazione #7 - aggiungere funzionalità Ajax.</span><span class="sxs-lookup"><span data-stu-id="3213b-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="3213b-134">Nell'iterazione del settimo, aggiungendo il supporto per Ajax è migliorare la velocità di risposta e le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="3213b-135">Questa iterazione</span><span class="sxs-lookup"><span data-stu-id="3213b-135">This Iteration</span></span>

<span data-ttu-id="3213b-136">Nell'iterazione precedente dell'applicazione Contact Manager, è stato creato gli unit test per specificare una rete di protezione per il nostro codice.</span><span class="sxs-lookup"><span data-stu-id="3213b-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="3213b-137">La motivazione per la creazione di unit test consisteva nel rendere più resilienti per modificare il codice.</span><span class="sxs-lookup"><span data-stu-id="3213b-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="3213b-138">Con gli unit test posto, possiamo Fortunatamente apportare qualsiasi modifica al codice e sapere immediatamente se abbiamo interrotto le funzionalità esistenti.</span><span class="sxs-lookup"><span data-stu-id="3213b-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="3213b-139">In questa iterazione, usiamo gli unit test per uno scopo completamente diverso.</span><span class="sxs-lookup"><span data-stu-id="3213b-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="3213b-140">In questa iterazione, usiamo gli unit test come parte di una filosofia di progettazione dell'applicazione denominata *lo sviluppo basato su test*.</span><span class="sxs-lookup"><span data-stu-id="3213b-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="3213b-141">Quando si pratica lo sviluppo basato su test, si scrivono innanzitutto i test e quindi scrivere codice per i test.</span><span class="sxs-lookup"><span data-stu-id="3213b-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="3213b-142">Più precisamente, quando lo sviluppo basato su test mettendo in pratica, esistono tre passaggi completate durante la creazione di codice (Red / Green/refactoring):</span><span class="sxs-lookup"><span data-stu-id="3213b-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="3213b-143">Scrivere uno unit test che si verifica un errore (rosso)</span><span class="sxs-lookup"><span data-stu-id="3213b-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="3213b-144">Scrivere codice che supera il test di unità (verde)</span><span class="sxs-lookup"><span data-stu-id="3213b-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="3213b-145">Il refactoring del codice (refactoring)</span><span class="sxs-lookup"><span data-stu-id="3213b-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="3213b-146">Prima di tutto è scrivere lo unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-146">First, you write the unit test.</span></span> <span data-ttu-id="3213b-147">Lo unit test debba esprimere l'intenzione per la modalità con cui si prevede che il codice di comportamento.</span><span class="sxs-lookup"><span data-stu-id="3213b-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="3213b-148">Quando si crea lo unit test, lo unit test deve avere esito negativo.</span><span class="sxs-lookup"><span data-stu-id="3213b-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="3213b-149">Il test deve avere esito negativo perché non è stato ancora scritto codice che soddisfa il test dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="3213b-150">Successivamente, scrivere codice sufficiente affinché lo unit test da passare.</span><span class="sxs-lookup"><span data-stu-id="3213b-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="3213b-151">L'obiettivo consiste nello scrivere il codice nel modo laziest, sloppiest e più veloci possibile.</span><span class="sxs-lookup"><span data-stu-id="3213b-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="3213b-152">È non deve sprecare tempo a pensare l'architettura dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="3213b-153">In alternativa, è consigliabile concentrarsi sulla scrittura di una quantità minima di codice necessario per soddisfare lo scopo espresso dallo unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="3213b-154">Infine, dopo avere scritto codice sufficiente, è possibile passo indietro e considerare l'architettura complessiva dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="3213b-155">In questo passaggio si riscrive (refactoring) il codice, sfruttando i vantaggi di un progetto software pattern:, ad esempio il modello di repository, in modo che quest'ultima è più facile da gestire.</span><span class="sxs-lookup"><span data-stu-id="3213b-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="3213b-156">È possibile riscrivere il codice in questo passaggio tutta sicurezza perché il codice è coperto da unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="3213b-157">Esistono diversi vantaggi che derivano da mettendo in pratica lo sviluppo basato su test.</span><span class="sxs-lookup"><span data-stu-id="3213b-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="3213b-158">In primo luogo, test-driven development impone all'utente di concentrarsi sul codice che effettivamente deve essere scritto.</span><span class="sxs-lookup"><span data-stu-id="3213b-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="3213b-159">Poiché costantemente riguardano solo la scrittura di codice sufficiente per il passaggio di un determinato test, viene impedito di supporto le erbacce e scrivere grandi quantità di codice che non viene mai utilizzato.</span><span class="sxs-lookup"><span data-stu-id="3213b-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="3213b-160">In secondo luogo, una metodologia di progettazione "prima di tutto testare" forza la scrittura di codice dal punto di vista della modalità di utilizzo del codice.</span><span class="sxs-lookup"><span data-stu-id="3213b-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="3213b-161">In altre parole, quando mettendo in pratica lo sviluppo basato su test, si siano scrivendo continuamente i test dalla prospettiva dell'utente.</span><span class="sxs-lookup"><span data-stu-id="3213b-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="3213b-162">Pertanto, lo sviluppo basato su test può comportare le API più pulite e più comprensibile.</span><span class="sxs-lookup"><span data-stu-id="3213b-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="3213b-163">Infine, lo sviluppo basato su test forza la scrittura di unit test come parte del normale processo di creazione di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="3213b-164">Quando si avvicina la scadenza di un progetto, il test è in genere la prima cosa che si estende la finestra.</span><span class="sxs-lookup"><span data-stu-id="3213b-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="3213b-165">Durante lo sviluppo basato su test, mettendo in pratica d'altra parte, si hanno più probabilità di essere davvero virtuoso sulla scrittura di unit test in quanto lo sviluppo basato su test rende centrale unit test per il processo di compilazione di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="3213b-166">Per altre informazioni sullo sviluppo basato su test, consiglia di leggere il libro di Michael Feathers **Working Effectively with Legacy Code**.</span><span class="sxs-lookup"><span data-stu-id="3213b-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="3213b-167">In questa iterazione, aggiungiamo una nuova funzionalità all'applicazione Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="3213b-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="3213b-168">Viene aggiunto il supporto per i gruppi di contatto.</span><span class="sxs-lookup"><span data-stu-id="3213b-168">We add support for Contact Groups.</span></span> <span data-ttu-id="3213b-169">È possibile usare gruppi di contatto per organizzare i contatti in categorie, ad esempio aziendale e Friend.</span><span class="sxs-lookup"><span data-stu-id="3213b-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="3213b-170">Si aggiungerà questa nuova funzionalità all'applicazione seguendo un processo di sviluppo basato su test.</span><span class="sxs-lookup"><span data-stu-id="3213b-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="3213b-171">Unit test verranno scritti prima di tutto e verrà scritto tutto il codice per questi test.</span><span class="sxs-lookup"><span data-stu-id="3213b-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="3213b-172">Che cosa verrà sottoposta a test</span><span class="sxs-lookup"><span data-stu-id="3213b-172">What Gets Tested</span></span>

<span data-ttu-id="3213b-173">Come accennato nell'iterazione precedente, in genere non si scrivono unit test per la logica di accesso ai dati o visualizzare per la logica.</span><span class="sxs-lookup"><span data-stu-id="3213b-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="3213b-174">Non si t scrivere unit test per la logica di accesso ai dati perché l'accesso a un database è un'operazione relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="3213b-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="3213b-175">Poiché l'accesso a una vista richiede la rotazione di un server web che è un'operazione relativamente lenta non si t scrivere unit test per la logica di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="3213b-176">È consigliabile non scrivere uno unit test, a meno che il test può essere eseguito ripetutamente molto veloce</span><span class="sxs-lookup"><span data-stu-id="3213b-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="3213b-177">Poiché è guidato lo sviluppo basato su test dagli unit test, viene analizzata inizialmente la scrittura di controller e logica di business.</span><span class="sxs-lookup"><span data-stu-id="3213b-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="3213b-178">Microsoft non toccare il database o le viste.</span><span class="sxs-lookup"><span data-stu-id="3213b-178">We avoid touching the database or views.</span></span> <span data-ttu-id="3213b-179">Microsoft non modificare il database o creare viste fino alla fine di questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="3213b-180">Si inizia con ciò che può essere testato.</span><span class="sxs-lookup"><span data-stu-id="3213b-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="3213b-181">Creazione di storie utente</span><span class="sxs-lookup"><span data-stu-id="3213b-181">Creating User Stories</span></span>

<span data-ttu-id="3213b-182">Quando mettendo in pratica lo sviluppo basato su test, sempre innanzitutto scrivere un test.</span><span class="sxs-lookup"><span data-stu-id="3213b-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="3213b-183">Questo genera subito la domanda: Per decidere quale scrivere prima del test?</span><span class="sxs-lookup"><span data-stu-id="3213b-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="3213b-184">Per rispondere a questa domanda, è consigliabile scrivere un set di [ *storie utente*](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="3213b-184">To answer this question, you should write a set of [*user stories*](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="3213b-185">Una storia utente è una breve descrizione (in genere una frase) di un requisito software.</span><span class="sxs-lookup"><span data-stu-id="3213b-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="3213b-186">Deve essere una descrizione di un requisito scritta dalla prospettiva dell'utente non tecnica.</span><span class="sxs-lookup"><span data-stu-id="3213b-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="3213b-187">Ecco il set di storie utente che descrivono le funzionalità necessarie per la nuova funzionalità gruppo di contatti s:</span><span class="sxs-lookup"><span data-stu-id="3213b-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="3213b-188">Utente può visualizzare un elenco di gruppi di contatti.</span><span class="sxs-lookup"><span data-stu-id="3213b-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="3213b-189">Utente può creare un nuovo gruppo di contatto.</span><span class="sxs-lookup"><span data-stu-id="3213b-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="3213b-190">Utente può eliminare un gruppo di contatto esistente.</span><span class="sxs-lookup"><span data-stu-id="3213b-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="3213b-191">Utente può selezionare un gruppo di contatti quando si crea un nuovo contatto.</span><span class="sxs-lookup"><span data-stu-id="3213b-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="3213b-192">Utente può selezionare un gruppo di contatti quando si modifica un contatto esistente.</span><span class="sxs-lookup"><span data-stu-id="3213b-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="3213b-193">Un elenco di gruppi di contatto viene visualizzato nella vista Index.</span><span class="sxs-lookup"><span data-stu-id="3213b-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="3213b-194">Quando un utente fa clic su un gruppo di contatto, viene visualizzato un elenco di contatti.</span><span class="sxs-lookup"><span data-stu-id="3213b-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="3213b-195">Si noti che questo elenco di storie utente è totalmente comprensibile da un cliente.</span><span class="sxs-lookup"><span data-stu-id="3213b-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="3213b-196">Non include informazioni sui dettagli di implementazione tecnica.</span><span class="sxs-lookup"><span data-stu-id="3213b-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="3213b-197">Durante il processo di compilazione dell'applicazione, il set di storie utente può diventare più avanzato.</span><span class="sxs-lookup"><span data-stu-id="3213b-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="3213b-198">È possibile interrompere una storia utente in storie più (requisiti).</span><span class="sxs-lookup"><span data-stu-id="3213b-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="3213b-199">Ad esempio, si potrebbe decidere che crea un nuovo gruppo di contatto implica la convalida.</span><span class="sxs-lookup"><span data-stu-id="3213b-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="3213b-200">Invio di un gruppo senza nome contatto deve restituire un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="3213b-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="3213b-201">Dopo aver creato un elenco di storie utente, si è pronti a scrivere il primo unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="3213b-202">Si inizierà creando uno unit test per la visualizzazione dell'elenco dei gruppi di contatti.</span><span class="sxs-lookup"><span data-stu-id="3213b-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="3213b-203">Elencare i gruppi di contatto</span><span class="sxs-lookup"><span data-stu-id="3213b-203">Listing Contact Groups</span></span>

<span data-ttu-id="3213b-204">La nostra storia utente prima è che un utente deve essere in grado di visualizzare un elenco di gruppi di contatti.</span><span class="sxs-lookup"><span data-stu-id="3213b-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="3213b-205">È necessario esprimere la storia con un test.</span><span class="sxs-lookup"><span data-stu-id="3213b-205">We need to express this story with a test.</span></span>

<span data-ttu-id="3213b-206">Creare un nuovo unit test facendo clic su cartella controller nel progetto ContactManager.Tests selezionando **Aggiungi, nuovo Test**e selezionando le **Unit Test** modello (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="3213b-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="3213b-207">Nome della nuova unità GroupControllerTest.vb di test, scegliere il **OK** pulsante.</span><span class="sxs-lookup"><span data-stu-id="3213b-207">Name the new unit test GroupControllerTest.vb and click the **OK** button.</span></span>


<span data-ttu-id="3213b-208">[![Aggiunta di GroupControllerTest unit test](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3213b-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span></span>

<span data-ttu-id="3213b-209">**Figura 01**: Aggiunta di unit test GroupControllerTest ([fare clic per visualizzare l'immagine con dimensioni normali](iteration-6-use-test-driven-development-vb/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="3213b-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image2.png))</span></span>


<span data-ttu-id="3213b-210">Il primo unit test è contenuta nel listato 1.</span><span class="sxs-lookup"><span data-stu-id="3213b-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="3213b-211">Questo test verifica che il metodo Index () del controller gruppo restituisce un set di gruppi.</span><span class="sxs-lookup"><span data-stu-id="3213b-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="3213b-212">Il test verifica che una raccolta di gruppi viene restituita nella visualizzazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="3213b-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="3213b-213">**Listing 1 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-213">**Listing 1 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample1.vb)]

<span data-ttu-id="3213b-214">Quando si digita prima di tutto il codice nel listato 1, in Visual Studio, si otterrà una grande quantità di righe ondulate rosse.</span><span class="sxs-lookup"><span data-stu-id="3213b-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="3213b-215">Non sono state create le classi GroupController o un gruppo.</span><span class="sxs-lookup"><span data-stu-id="3213b-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="3213b-216">A questo punto, siamo in grado di compilazione anche t nostro primo unit test di eseguire l'applicazione in modo che possiamo t.</span><span class="sxs-lookup"><span data-stu-id="3213b-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="3213b-217">Che s valido.</span><span class="sxs-lookup"><span data-stu-id="3213b-217">That s good.</span></span> <span data-ttu-id="3213b-218">Che viene viene conteggiata come un test non superato.</span><span class="sxs-lookup"><span data-stu-id="3213b-218">That counts as a failing test.</span></span> <span data-ttu-id="3213b-219">Pertanto, è ora disponibile l'autorizzazione per iniziare a scrivere il codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="3213b-220">È necessario scrivere codice sufficiente per eseguire il testing.</span><span class="sxs-lookup"><span data-stu-id="3213b-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="3213b-221">La classe controller del gruppo nel listato 2 contiene il livello minimo di codice necessario per passare lo unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="3213b-222">L'azione Index () restituisce un elenco in modo statico codificato di gruppi (la classe del gruppo è definita nel listato 3).</span><span class="sxs-lookup"><span data-stu-id="3213b-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="3213b-223">**Listing 2 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-223">**Listing 2 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample2.vb)]

<span data-ttu-id="3213b-224">**Listato 3 - Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-224">**Listing 3 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample3.vb)]

<span data-ttu-id="3213b-225">Dopo che le classi GroupController e gruppo per il progetto, il primo unit test viene completato correttamente (vedere la figura 2).</span><span class="sxs-lookup"><span data-stu-id="3213b-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="3213b-226">È stato eseguito il lavoro minimo richiesto per superare il test.</span><span class="sxs-lookup"><span data-stu-id="3213b-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="3213b-227">È ora festeggiare.</span><span class="sxs-lookup"><span data-stu-id="3213b-227">It is time to celebrate.</span></span>


<span data-ttu-id="3213b-228">[![Vero successo!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="3213b-228">[![Success!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span></span>

<span data-ttu-id="3213b-229">**Figura 02**: Vero successo! ([Fare clic per visualizzare l'immagine con dimensioni normali](iteration-6-use-test-driven-development-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="3213b-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="3213b-230">Creazione di gruppi di contatto</span><span class="sxs-lookup"><span data-stu-id="3213b-230">Creating Contact Groups</span></span>

<span data-ttu-id="3213b-231">A questo punto sarà possibile procedere alla storia utente secondo.</span><span class="sxs-lookup"><span data-stu-id="3213b-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="3213b-232">È necessario essere in grado di creare nuovi gruppi di contatto.</span><span class="sxs-lookup"><span data-stu-id="3213b-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="3213b-233">È necessario esprimere l'intenzione con un test.</span><span class="sxs-lookup"><span data-stu-id="3213b-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="3213b-234">Il test nel listato 4 verifica che la chiamata di metodo metodo con un nuovo gruppo aggiunge il gruppo all'elenco di gruppi restituiti dal metodo Index ().</span><span class="sxs-lookup"><span data-stu-id="3213b-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="3213b-235">In altre parole, se si crea un nuovo gruppo quindi è necessario essere in grado di ottenere nuovamente il nuovo gruppo di nell'elenco di gruppi restituiti dal metodo Index ().</span><span class="sxs-lookup"><span data-stu-id="3213b-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="3213b-236">**Listing 4 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-236">**Listing 4 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample4.vb)]

<span data-ttu-id="3213b-237">Il test nel listato 4 chiama il metodo Create () con un nuovo contatto gruppo di controller di gruppo.</span><span class="sxs-lookup"><span data-stu-id="3213b-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="3213b-238">Successivamente, il test verifica che la chiamata a controller di gruppo metodo Index () restituisce il nuovo gruppo nei dati di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="3213b-239">Il controller di gruppo modificato nel listato 5 contiene il livello minimo di modifiche necessarie per passare il nuovo test.</span><span class="sxs-lookup"><span data-stu-id="3213b-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="3213b-240">**Listing 5 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-240">**Listing 5 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample5.vb)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="3213b-241">Il controller di gruppo nel listato 5 è una nuova azione create ().</span><span class="sxs-lookup"><span data-stu-id="3213b-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="3213b-242">Questa azione aggiunge un gruppo a una raccolta di gruppi.</span><span class="sxs-lookup"><span data-stu-id="3213b-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="3213b-243">Si noti che l'azione Index () è stato modificato per restituire il contenuto della raccolta di gruppi.</span><span class="sxs-lookup"><span data-stu-id="3213b-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="3213b-244">Ancora una volta, sono stati eseguiti la quantità minima di lavoro richiesta per passare lo unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="3213b-245">Dopo che si apportano queste modifiche al controller di gruppo, vengono superati tutti i nostri unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="3213b-246">Aggiunta della convalida</span><span class="sxs-lookup"><span data-stu-id="3213b-246">Adding Validation</span></span>

<span data-ttu-id="3213b-247">Questo requisito non è stato dichiarato in modo esplicito nella storia utente.</span><span class="sxs-lookup"><span data-stu-id="3213b-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="3213b-248">Tuttavia, è ragionevole richiedere che un gruppo di avere un nome.</span><span class="sxs-lookup"><span data-stu-id="3213b-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="3213b-249">In caso contrario, l'organizzazione di contatti in gruppi non sarebbe molto utile.</span><span class="sxs-lookup"><span data-stu-id="3213b-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="3213b-250">Listato 6 contiene un nuovo test che esprime questo obiettivo.</span><span class="sxs-lookup"><span data-stu-id="3213b-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="3213b-251">Questo test verifica che il tentativo di creare un gruppo senza fornire un nome viene importata in un messaggio di errore di convalida nello stato del modello.</span><span class="sxs-lookup"><span data-stu-id="3213b-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="3213b-252">**Listing 6 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-252">**Listing 6 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample6.vb)]

<span data-ttu-id="3213b-253">Per soddisfare questo test, che è necessario aggiungere una proprietà del nome per la classe del gruppo (vedere listato 7).</span><span class="sxs-lookup"><span data-stu-id="3213b-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="3213b-254">Inoltre, è necessario aggiungere un po' di logica di convalida al controller gruppo s azione create () (vedere listato 8).</span><span class="sxs-lookup"><span data-stu-id="3213b-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="3213b-255">**Listato 7 - Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-255">**Listing 7 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample7.vb)]

<span data-ttu-id="3213b-256">**Listing 8 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-256">**Listing 8 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample8.vb)]

<span data-ttu-id="3213b-257">Si noti che il controller di gruppo di azione create () ora contiene sia la convalida del database per la logica.</span><span class="sxs-lookup"><span data-stu-id="3213b-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="3213b-258">Attualmente, il database utilizzato dal controller di gruppo è costituito nient'altro che una raccolta in memoria.</span><span class="sxs-lookup"><span data-stu-id="3213b-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="3213b-259">Ora effettuare il refactoring</span><span class="sxs-lookup"><span data-stu-id="3213b-259">Time to Refactor</span></span>

<span data-ttu-id="3213b-260">Il terzo passaggio Red/Green/eseguire il refactoring è la parte di refactoring.</span><span class="sxs-lookup"><span data-stu-id="3213b-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="3213b-261">A questo punto, è necessario eseguire il failback da codice e tenere in considerazione come è possibile effettuare il refactoring per migliorare la progettazione applicazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="3213b-262">La fase di effettuare il refactoring è la fase in cui si pensa rigidi sul modo migliore di implementazione di modelli e i principi di progettazione software.</span><span class="sxs-lookup"><span data-stu-id="3213b-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="3213b-263">Microsoft è possibile modificare il codice in alcun modo che si sceglie di migliorare la progettazione del codice.</span><span class="sxs-lookup"><span data-stu-id="3213b-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="3213b-264">È disponibile una rete di protezione di unit test che impediscono di invalidare la funzionalità esistente.</span><span class="sxs-lookup"><span data-stu-id="3213b-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="3213b-265">Al momento, il controller di gruppo è complicato dal punto di vista della progettazione software di qualità.</span><span class="sxs-lookup"><span data-stu-id="3213b-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="3213b-266">Il controller di gruppo contiene radici lontane seri problemi di convalida e codice di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="3213b-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="3213b-267">Per evitare che violano il principio di singola responsabilità, è necessario separare questi problemi in diverse classi.</span><span class="sxs-lookup"><span data-stu-id="3213b-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="3213b-268">La classe controller gruppo sottoposta a refactoring è contenuta nel listato 9.</span><span class="sxs-lookup"><span data-stu-id="3213b-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="3213b-269">Il controller è stato modificato per usare il livello di servizio ContactManager.</span><span class="sxs-lookup"><span data-stu-id="3213b-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="3213b-270">Questo è lo stesso livello di servizio che viene usato con il controller di contatto.</span><span class="sxs-lookup"><span data-stu-id="3213b-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="3213b-271">Listato 10 contiene i nuovi metodi aggiunti al livello di servizio ContactManager per supportare la convalida, elenco e creazione di gruppi.</span><span class="sxs-lookup"><span data-stu-id="3213b-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="3213b-272">L'interfaccia IContactManagerService è stato aggiornato per includere i nuovi metodi.</span><span class="sxs-lookup"><span data-stu-id="3213b-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="3213b-273">Listato 11 contiene una nuova classe FakeContactManagerRepository che implementa l'interfaccia IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="3213b-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="3213b-274">A differenza della classe EntityContactManagerRepository che implementa anche l'interfaccia IContactManagerRepository, la nuova classe FakeContactManagerRepository non comunica con il database.</span><span class="sxs-lookup"><span data-stu-id="3213b-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="3213b-275">La classe FakeContactManagerRepository Usa una raccolta in memoria come proxy per il database.</span><span class="sxs-lookup"><span data-stu-id="3213b-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="3213b-276">Si userà questa classe nei nostri test unità come un livello di repository fittizio.</span><span class="sxs-lookup"><span data-stu-id="3213b-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="3213b-277">**Listing 9 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-277">**Listing 9 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample9.vb)]

<span data-ttu-id="3213b-278">**Listato 10 - Controllers\ContactManagerService.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-278">**Listing 10 - Controllers\ContactManagerService.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample10.vb)]

<span data-ttu-id="3213b-279">**Listato 11 - Controllers\FakeContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-279">**Listing 11 - Controllers\FakeContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample11.vb)]


<span data-ttu-id="3213b-280">Modifica il IContactManagerRepository richiede l'interfaccia consentono di implementare i metodi CreateGroup() e ListGroups() nella classe EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="3213b-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="3213b-281">Il modo più rapido e laziest per eseguire questa operazione consiste nell'aggiungere i metodi stub con un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="3213b-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample12.vb)]


<span data-ttu-id="3213b-282">Infine, queste modifiche alla progettazione della nostra applicazione rendono necessario apportare alcune modifiche al nostro unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="3213b-283">È ora necessario usare il FakeContactManagerRepository durante l'esecuzione di unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="3213b-284">La classe GroupControllerTest aggiornata è contenuta nel listato 12.</span><span class="sxs-lookup"><span data-stu-id="3213b-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="3213b-285">**Listing 12 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-285">**Listing 12 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample13.vb)]

<span data-ttu-id="3213b-286">Dopo aver tutte queste modifiche, ancora una volta, tutti i nostri unit test superati.</span><span class="sxs-lookup"><span data-stu-id="3213b-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="3213b-287">È stata completata l'intero ciclo di colore rosso/verde/eseguire il refactoring.</span><span class="sxs-lookup"><span data-stu-id="3213b-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="3213b-288">Sono state implementate le storie due utente prima.</span><span class="sxs-lookup"><span data-stu-id="3213b-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="3213b-289">È ora disponibile il supporto di unit test per i requisiti espressi nelle storie utente.</span><span class="sxs-lookup"><span data-stu-id="3213b-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="3213b-290">Implementare il resto delle storie utente consiste nel ripetere lo stesso ciclo di colore rosso/verde/eseguire il refactoring.</span><span class="sxs-lookup"><span data-stu-id="3213b-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="3213b-291">Modifica il Database</span><span class="sxs-lookup"><span data-stu-id="3213b-291">Modifying our Database</span></span>

<span data-ttu-id="3213b-292">Purtroppo, anche se è stata soddisfatta tutti i requisiti espressi l'unit test, il lavoro non viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="3213b-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="3213b-293">È comunque necessario modificare il database.</span><span class="sxs-lookup"><span data-stu-id="3213b-293">We still need to modify our database.</span></span>

<span data-ttu-id="3213b-294">È necessario creare una nuova tabella di database di gruppo.</span><span class="sxs-lookup"><span data-stu-id="3213b-294">We need to create a new Group database table.</span></span> <span data-ttu-id="3213b-295">Attenersi ai passaggi riportati di seguito.</span><span class="sxs-lookup"><span data-stu-id="3213b-295">Follow these steps:</span></span>

1. <span data-ttu-id="3213b-296">Nella finestra Esplora Server, fare doppio clic sulla cartella tabelle e selezionare l'opzione di menu **Aggiungi nuova tabella**.</span><span class="sxs-lookup"><span data-stu-id="3213b-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="3213b-297">Immettere le due colonne descritte di seguito in Progettazione tabelle.</span><span class="sxs-lookup"><span data-stu-id="3213b-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="3213b-298">Contrassegnare la colonna Id come una chiave primaria e una colonna Identity.</span><span class="sxs-lookup"><span data-stu-id="3213b-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="3213b-299">Salvare la nuova tabella con i gruppi di nome facendo clic sull'icona di unità disco floppy.</span><span class="sxs-lookup"><span data-stu-id="3213b-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.12_table01"></a>


| <span data-ttu-id="3213b-300">**Nome della colonna**</span><span class="sxs-lookup"><span data-stu-id="3213b-300">**Column Name**</span></span> | <span data-ttu-id="3213b-301">**Tipo di dati**</span><span class="sxs-lookup"><span data-stu-id="3213b-301">**Data Type**</span></span> | <span data-ttu-id="3213b-302">**Consenti valori null**</span><span class="sxs-lookup"><span data-stu-id="3213b-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="3213b-303">Id</span><span class="sxs-lookup"><span data-stu-id="3213b-303">Id</span></span> | <span data-ttu-id="3213b-304">int</span><span class="sxs-lookup"><span data-stu-id="3213b-304">int</span></span> | <span data-ttu-id="3213b-305">False</span><span class="sxs-lookup"><span data-stu-id="3213b-305">False</span></span> |
| <span data-ttu-id="3213b-306">Nome</span><span class="sxs-lookup"><span data-stu-id="3213b-306">Name</span></span> | <span data-ttu-id="3213b-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="3213b-307">nvarchar(50)</span></span> | <span data-ttu-id="3213b-308">False</span><span class="sxs-lookup"><span data-stu-id="3213b-308">False</span></span> |


<span data-ttu-id="3213b-309">Successivamente, è necessario eliminare tutti i dati dalla tabella di contatti (in caso contrario, non sarà in grado di creare una relazione tra le tabelle di contatti e gruppi).</span><span class="sxs-lookup"><span data-stu-id="3213b-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="3213b-310">Attenersi ai passaggi riportati di seguito.</span><span class="sxs-lookup"><span data-stu-id="3213b-310">Follow these steps:</span></span>

1. <span data-ttu-id="3213b-311">La tabella Contacts e scegliere l'opzione di menu **Mostra dati tabella**.</span><span class="sxs-lookup"><span data-stu-id="3213b-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="3213b-312">Eliminare tutte le righe.</span><span class="sxs-lookup"><span data-stu-id="3213b-312">Delete all of the rows.</span></span>

<span data-ttu-id="3213b-313">Successivamente, è necessario definire una relazione tra la tabella di database di gruppi e la tabella di database dei contatti esistente.</span><span class="sxs-lookup"><span data-stu-id="3213b-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="3213b-314">Attenersi ai passaggi riportati di seguito.</span><span class="sxs-lookup"><span data-stu-id="3213b-314">Follow these steps:</span></span>

1. <span data-ttu-id="3213b-315">Fare doppio clic nella tabella di contatti nella finestra Esplora Server per aprire Progettazione tabelle.</span><span class="sxs-lookup"><span data-stu-id="3213b-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="3213b-316">Aggiungere una nuova colonna di tipo integer per la tabella di contatti denominata GroupId.</span><span class="sxs-lookup"><span data-stu-id="3213b-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="3213b-317">Fare clic sul pulsante Relationship per aprire la finestra di dialogo Relazioni chiavi esterne (vedere la figura 3).</span><span class="sxs-lookup"><span data-stu-id="3213b-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="3213b-318">Fare clic sul pulsante Aggiungi.</span><span class="sxs-lookup"><span data-stu-id="3213b-318">Click the Add button.</span></span>
5. <span data-ttu-id="3213b-319">Fare clic sul pulsante con puntini di sospensione visualizzato accanto al pulsante che specifica le colonne e tabelle.</span><span class="sxs-lookup"><span data-stu-id="3213b-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="3213b-320">Nella finestra di dialogo tabelle e colonne, selezionare i gruppi come la tabella di chiave primaria e l'Id come colonna chiave primaria.</span><span class="sxs-lookup"><span data-stu-id="3213b-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="3213b-321">Selezione contatti la tabella di chiave esterna e GroupId come colonna chiave esterna (vedere la figura 4).</span><span class="sxs-lookup"><span data-stu-id="3213b-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="3213b-322">Fare clic sul pulsante OK.</span><span class="sxs-lookup"><span data-stu-id="3213b-322">Click the OK button.</span></span>
7. <span data-ttu-id="3213b-323">Sotto **specifica INSERT e UPDATE**, selezionare il valore **Cascade** per **Elimina regola**.</span><span class="sxs-lookup"><span data-stu-id="3213b-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="3213b-324">Fare clic sul pulsante chiude per chiudere la finestra di dialogo Relazioni chiavi esterne.</span><span class="sxs-lookup"><span data-stu-id="3213b-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="3213b-325">Fare clic sul pulsante Salva per salvare le modifiche apportate alla tabella Contacts.</span><span class="sxs-lookup"><span data-stu-id="3213b-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="3213b-326">[![Creazione di una relazione tra tabelle di database](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="3213b-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span></span>

<span data-ttu-id="3213b-327">**Figura 03**: Creazione di una relazione tra tabelle di database ([fare clic per visualizzare l'immagine con dimensioni normali](iteration-6-use-test-driven-development-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="3213b-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image6.png))</span></span>


<span data-ttu-id="3213b-328">[![Specifica di relazioni tra tabelle](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3213b-328">[![Specifying table relationships](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span></span>

<span data-ttu-id="3213b-329">**Figura 04**: Specifica di relazioni tra tabelle ([fare clic per visualizzare l'immagine con dimensioni normali](iteration-6-use-test-driven-development-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="3213b-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="3213b-330">Aggiornare il modello di dati</span><span class="sxs-lookup"><span data-stu-id="3213b-330">Updating our Data Model</span></span>

<span data-ttu-id="3213b-331">Successivamente, è necessario aggiornare il modello di dati per rappresentare la nuova tabella di database.</span><span class="sxs-lookup"><span data-stu-id="3213b-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="3213b-332">Attenersi ai passaggi riportati di seguito.</span><span class="sxs-lookup"><span data-stu-id="3213b-332">Follow these steps:</span></span>

1. <span data-ttu-id="3213b-333">Fare doppio clic il file ContactManagerModel.edmx nella cartella modelli per aprire la finestra di progettazione entità.</span><span class="sxs-lookup"><span data-stu-id="3213b-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="3213b-334">Fare doppio clic nell'area di progettazione e selezionare l'opzione di menu **Aggiorna modello da Database**.</span><span class="sxs-lookup"><span data-stu-id="3213b-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="3213b-335">Nell'aggiornamento guidato, selezionare i gruppi di tabella e scegliere la data di fine sul pulsante (vedere la figura 5).</span><span class="sxs-lookup"><span data-stu-id="3213b-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="3213b-336">L'entità di gruppi e scegliere l'opzione di menu **Rinomina**.</span><span class="sxs-lookup"><span data-stu-id="3213b-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="3213b-337">Modificare il nome del *gruppi* entità *gruppo* (singolare).</span><span class="sxs-lookup"><span data-stu-id="3213b-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="3213b-338">Fare doppio clic su proprietà di navigazione i gruppi che viene visualizzato nella parte inferiore dell'entità Contact.</span><span class="sxs-lookup"><span data-stu-id="3213b-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="3213b-339">Modificare il nome del *gruppi* proprietà di navigazione *gruppo* (singolare).</span><span class="sxs-lookup"><span data-stu-id="3213b-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="3213b-340">[![Aggiornamento di un modello di Entity Framework dal database](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="3213b-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span></span>

<span data-ttu-id="3213b-341">**Figura 05**: Aggiornamento di un modello di Entity Framework dal database ([fare clic per visualizzare l'immagine con dimensioni normali](iteration-6-use-test-driven-development-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="3213b-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image10.png))</span></span>


<span data-ttu-id="3213b-342">Dopo aver completato questi passaggi, il modello di dati rappresenta sia i contatti e gruppi di tabelle.</span><span class="sxs-lookup"><span data-stu-id="3213b-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="3213b-343">La finestra di progettazione entità deve visualizzare entrambe le entità (vedere la figura 6).</span><span class="sxs-lookup"><span data-stu-id="3213b-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="3213b-344">[![Finestra di progettazione entità visualizzando Group e Contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="3213b-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span></span>

<span data-ttu-id="3213b-345">**Figura 06**: Finestra di progettazione entità visualizzando Group e Contact ([fare clic per visualizzare l'immagine con dimensioni normali](iteration-6-use-test-driven-development-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="3213b-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="3213b-346">Creare le classi di Repository</span><span class="sxs-lookup"><span data-stu-id="3213b-346">Creating our Repository Classes</span></span>

<span data-ttu-id="3213b-347">Successivamente, è necessario implementare la classe di repository.</span><span class="sxs-lookup"><span data-stu-id="3213b-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="3213b-348">Nel corso di questa iterazione, abbiamo aggiunto diversi nuovi metodi per l'interfaccia IContactManagerRepository durante la scrittura di codice per soddisfare i nostri unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="3213b-349">La versione finale dell'interfaccia IContactManagerRepository è contenuta nel listato 14.</span><span class="sxs-lookup"><span data-stu-id="3213b-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="3213b-350">**Listato 14 - Models\IContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-350">**Listing 14 - Models\IContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample14.vb)]

<span data-ttu-id="3213b-351">In realtà è stato ancora implementato uno dei metodi correlati all'utilizzo dei gruppi di contatto nella nostra classe EntityContactManagerRepository reale.</span><span class="sxs-lookup"><span data-stu-id="3213b-351">We haven't actually implemented any of the methods related to working with contact groups in our real EntityContactManagerRepository class.</span></span> <span data-ttu-id="3213b-352">Attualmente, la classe EntityContactManagerRepository dispone di metodi stub per ognuno dei metodi di contatto gruppo elencati nell'interfaccia IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="3213b-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="3213b-353">Ad esempio, il metodo ListGroups() attualmente aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="3213b-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample15.vb)]

<span data-ttu-id="3213b-354">I metodi stub ha permesso di compilare l'applicazione e passare gli unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="3213b-355">Tuttavia, ora è possibile implementare effettivamente questi metodi.</span><span class="sxs-lookup"><span data-stu-id="3213b-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="3213b-356">La versione finale della classe EntityContactManagerRepository è contenuta nel listato 13.</span><span class="sxs-lookup"><span data-stu-id="3213b-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="3213b-357">**Listato 13 - Models\EntityContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="3213b-357">**Listing 13 - Models\EntityContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample16.vb)]

### <a name="creating-the-views"></a><span data-ttu-id="3213b-358">Creazione di viste</span><span class="sxs-lookup"><span data-stu-id="3213b-358">Creating the Views</span></span>

<span data-ttu-id="3213b-359">Applicazione MVC ASP.NET quando si usa il motore di visualizzazione ASP.NET predefinito.</span><span class="sxs-lookup"><span data-stu-id="3213b-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="3213b-360">Pertanto, non si t creare viste in risposta a uno specifico unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="3213b-361">Tuttavia, poiché un'applicazione sarebbe inutile senza le visualizzazioni, è possibile t completare questa iterazione senza creare e modificare le visualizzazioni contenute nell'applicazione Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="3213b-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="3213b-362">È necessario creare le seguenti nuove viste per la gestione dei gruppi di contatto (vedere la figura 7):</span><span class="sxs-lookup"><span data-stu-id="3213b-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="3213b-363">Views\Group\Index.aspx - Visualizza l'elenco di gruppi di contatto</span><span class="sxs-lookup"><span data-stu-id="3213b-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="3213b-364">Views\Group\Delete.aspx - modulo di conferma viene visualizzato per l'eliminazione di un gruppo di contatti</span><span class="sxs-lookup"><span data-stu-id="3213b-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="3213b-365">[![La visualizzazione dell'indice di gruppo](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3213b-365">[![The Group Index view](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span></span>

<span data-ttu-id="3213b-366">**Figura 07**: La visualizzazione dell'indice di gruppo ([fare clic per visualizzare l'immagine con dimensioni normali](iteration-6-use-test-driven-development-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="3213b-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image14.png))</span></span>


<span data-ttu-id="3213b-367">È necessario modificare le viste esistenti seguenti in modo che includano i gruppi di contatto:</span><span class="sxs-lookup"><span data-stu-id="3213b-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="3213b-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="3213b-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="3213b-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="3213b-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="3213b-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="3213b-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="3213b-371">È possibile visualizzare le visualizzazioni modificate esaminando l'applicazione di Visual Studio che accompagna questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="3213b-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="3213b-372">Ad esempio, la figura 8 mostra la visualizzazione Index dei contatti.</span><span class="sxs-lookup"><span data-stu-id="3213b-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="3213b-373">[![La visualizzazione Index dei contatti](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="3213b-373">[![The Contact Index view](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span></span>

<span data-ttu-id="3213b-374">**Figura 08**: La visualizzazione dell'indice di contatto ([fare clic per visualizzare l'immagine con dimensioni normali](iteration-6-use-test-driven-development-vb/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="3213b-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="3213b-375">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="3213b-375">Summary</span></span>

<span data-ttu-id="3213b-376">Questa iterazione, abbiamo aggiunto nuove funzionalità all'applicazione Contact Manager seguendo una metodologia di progettazione dell'applicazione lo sviluppo basato su test.</span><span class="sxs-lookup"><span data-stu-id="3213b-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="3213b-377">Abbiamo iniziato creando un set di storie utente.</span><span class="sxs-lookup"><span data-stu-id="3213b-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="3213b-378">È stato creato un set di unit test che corrisponde ai requisiti espressi per le storie utente.</span><span class="sxs-lookup"><span data-stu-id="3213b-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="3213b-379">Infine, abbiamo scritto codice sufficiente a soddisfare i requisiti espressi dagli unit test.</span><span class="sxs-lookup"><span data-stu-id="3213b-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="3213b-380">Dopo che abbiamo completato la scrittura di codice sufficiente per soddisfare i requisiti stabiliti per gli unit test, abbiamo aggiornato il database e le viste.</span><span class="sxs-lookup"><span data-stu-id="3213b-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="3213b-381">Abbiamo aggiunto una nuova tabella di gruppi per il database e aggiornato il modello di dati di Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="3213b-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="3213b-382">È anche creare e modificare un set di viste.</span><span class="sxs-lookup"><span data-stu-id="3213b-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="3213b-383">Nell'iterazione successiva, l'iterazione finale - si riscrive l'applicazione possa sfruttare i vantaggi di Ajax.</span><span class="sxs-lookup"><span data-stu-id="3213b-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="3213b-384">Grazie all'uso di Ajax, si sarà di migliorare la velocità di risposta e le prestazioni dell'applicazione Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="3213b-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3213b-385">[Precedente](iteration-5-create-unit-tests-vb.md)
> [Successivo](iteration-7-add-ajax-functionality-vb.md)</span><span class="sxs-lookup"><span data-stu-id="3213b-385">[Previous](iteration-5-create-unit-tests-vb.md)
[Next](iteration-7-add-ajax-functionality-vb.md)</span></span>
