---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-view
title: Aggiunta di una vistaC#() | Microsoft Docs
author: Rick-Anderson
description: In questa esercitazione vengono illustrate le nozioni di base della creazione di un'applicazione Web MVC ASP.NET utilizzando Microsoft Visual Web Developer 2010 Express Service Pack 1, ovvero...
ms.author: riande
ms.date: 01/12/2011
ms.assetid: abc7c78d-cb09-4a4c-a887-61bc401d40e3
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-view
msc.type: authoredcontent
ms.openlocfilehash: b4a1316feb8d9b7f3ef5ca4755bf1cc5b23e6ef9
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/19/2020
ms.locfileid: "77458202"
---
# <a name="adding-a-view-c"></a><span data-ttu-id="c8d94-103">Aggiunta di una visualizzazione (C#)</span><span class="sxs-lookup"><span data-stu-id="c8d94-103">Adding a View (C#)</span></span>

<span data-ttu-id="c8d94-104">di [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="c8d94-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> > [!NOTE]
> > <span data-ttu-id="c8d94-105">Una versione aggiornata di questa esercitazione è disponibile [qui](../../../getting-started/introduction/getting-started.md) che usa ASP.NET MVC 5 e Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="c8d94-105">An updated version of this tutorial is available [here](../../../getting-started/introduction/getting-started.md) that uses ASP.NET MVC 5 and Visual Studio 2013.</span></span> <span data-ttu-id="c8d94-106">È più sicuro, molto più semplice da seguire e illustra altre funzionalità.</span><span class="sxs-lookup"><span data-stu-id="c8d94-106">It's more secure, much simpler to follow and demonstrates more features.</span></span>
> 
> 
> <span data-ttu-id="c8d94-107">In questa esercitazione vengono illustrate le nozioni di base della creazione di un'applicazione Web MVC ASP.NET utilizzando Microsoft Visual Web Developer 2010 Express Service Pack 1, una versione gratuita di Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c8d94-107">This tutorial will teach you the basics of building an ASP.NET MVC Web application using Microsoft Visual Web Developer 2010 Express Service Pack 1, which is a free version of Microsoft Visual Studio.</span></span> <span data-ttu-id="c8d94-108">Prima di iniziare, verificare di aver installato i prerequisiti elencati di seguito.</span><span class="sxs-lookup"><span data-stu-id="c8d94-108">Before you start, make sure you've installed the prerequisites listed below.</span></span> <span data-ttu-id="c8d94-109">È possibile installarli tutti facendo clic sul collegamento seguente: [installazione guidata piattaforma Web](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="c8d94-109">You can install all of them by clicking the following link: [Web Platform Installer](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span></span> <span data-ttu-id="c8d94-110">In alternativa, è possibile installare singolarmente i prerequisiti usando i collegamenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="c8d94-110">Alternatively, you can individually install the prerequisites using the following links:</span></span>
> 
> - [<span data-ttu-id="c8d94-111">Prerequisiti di Visual Studio Web Developer Express SP1</span><span class="sxs-lookup"><span data-stu-id="c8d94-111">Visual Studio Web Developer Express SP1 prerequisites</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack)
> - [<span data-ttu-id="c8d94-112">Aggiornamento degli strumenti di ASP.NET MVC 3</span><span class="sxs-lookup"><span data-stu-id="c8d94-112">ASP.NET MVC 3 Tools Update</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=MVC3)
> - <span data-ttu-id="c8d94-113">[SQL Server Compact 4,0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(supporto di runtime + Tools)</span><span class="sxs-lookup"><span data-stu-id="c8d94-113">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(runtime + tools support)</span></span>
> 
> <span data-ttu-id="c8d94-114">Se si usa Visual Studio 2010 anziché Visual Web Developer 2010, installare i prerequisiti facendo clic sul collegamento seguente: [prerequisiti di Visual studio 2010](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="c8d94-114">If you're using Visual Studio 2010 instead of Visual Web Developer 2010, install the prerequisites by clicking the following link: [Visual Studio 2010 prerequisites](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span></span>
> 
> <span data-ttu-id="c8d94-115">Per accompagnare questo argomento, C# è disponibile un progetto Visual Web Developer con codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="c8d94-115">A Visual Web Developer project with C# source code is available to accompany this topic.</span></span> <span data-ttu-id="c8d94-116">[Scaricare la C# versione](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span><span class="sxs-lookup"><span data-stu-id="c8d94-116">[Download the C# version](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span></span> <span data-ttu-id="c8d94-117">Se si preferisce Visual Basic, passare alla [versione Visual Basic](../vb/intro-to-aspnet-mvc-3.md) di questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="c8d94-117">If you prefer Visual Basic, switch to the [Visual Basic version](../vb/intro-to-aspnet-mvc-3.md) of this tutorial.</span></span>

<span data-ttu-id="c8d94-118">In questa sezione si procederà alla modifica della classe `HelloWorldController` per l'uso dei file di modello di visualizzazione per incapsulare in modo semplice il processo di generazione di risposte HTML a un client.</span><span class="sxs-lookup"><span data-stu-id="c8d94-118">In this section you're going to modify the `HelloWorldController` class to use view template files to cleanly encapsulate the process of generating HTML responses to a client.</span></span>

<span data-ttu-id="c8d94-119">Verrà creato un file di modello di visualizzazione usando il nuovo [motore di visualizzazione Razor](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) introdotto con ASP.NET MVC 3.</span><span class="sxs-lookup"><span data-stu-id="c8d94-119">You'll create a view template file using the new [Razor view engine](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) introduced with ASP.NET MVC 3.</span></span> <span data-ttu-id="c8d94-120">I modelli di visualizzazione basati su Razor hanno un'estensione di file *cshtml* e forniscono un modo elegante per creare l'output C#HTML usando.</span><span class="sxs-lookup"><span data-stu-id="c8d94-120">Razor-based view templates have a *.cshtml* file extension, and provide an elegant way to create HTML output using C#.</span></span> <span data-ttu-id="c8d94-121">Razor riduce al minimo il numero di caratteri e le sequenze di tasti richiesti durante la scrittura di un modello di visualizzazione e Abilita un flusso di lavoro di codifica veloce e fluido.</span><span class="sxs-lookup"><span data-stu-id="c8d94-121">Razor minimizes the number of characters and keystrokes required when writing a view template, and enables a fast, fluid coding workflow.</span></span>

<span data-ttu-id="c8d94-122">Iniziare usando un modello di vista con il metodo `Index` nella classe `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="c8d94-122">Start by using a view template with the `Index` method in the `HelloWorldController` class.</span></span> <span data-ttu-id="c8d94-123">Attualmente il metodo `Index` restituisce una stringa con un messaggio hardcoded nella classe controller.</span><span class="sxs-lookup"><span data-stu-id="c8d94-123">Currently the `Index` method returns a string with a message that is hard-coded in the controller class.</span></span> <span data-ttu-id="c8d94-124">Modificare il metodo `Index` per restituire un oggetto `View`, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="c8d94-124">Change the `Index` method to return a `View` object, as shown in the following:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample1.cs)]

<span data-ttu-id="c8d94-125">Questo codice usa un modello di visualizzazione per generare una risposta HTML al browser.</span><span class="sxs-lookup"><span data-stu-id="c8d94-125">This code uses a view template to generate an HTML response to the browser.</span></span> <span data-ttu-id="c8d94-126">Nel progetto aggiungere un modello di vista che è possibile usare con il metodo `Index`.</span><span class="sxs-lookup"><span data-stu-id="c8d94-126">In the project, add a view template that you can use with the `Index` method.</span></span> <span data-ttu-id="c8d94-127">A tale scopo, fare clic con il pulsante destro del mouse all'interno del metodo `Index` e scegliere **Aggiungi visualizzazione**.</span><span class="sxs-lookup"><span data-stu-id="c8d94-127">To do this, right-click inside the `Index` method and click **Add View**.</span></span>

![](adding-a-view/_static/image1.png)

<span data-ttu-id="c8d94-128">Verrà visualizzata la finestra di dialogo **Aggiungi visualizzazione** .</span><span class="sxs-lookup"><span data-stu-id="c8d94-128">The **Add View** dialog box appears.</span></span> <span data-ttu-id="c8d94-129">Lasciare le impostazioni predefinite e fare clic sul pulsante **Aggiungi** :</span><span class="sxs-lookup"><span data-stu-id="c8d94-129">Leave the defaults the way they are and click the **Add** button:</span></span>

![](adding-a-view/_static/image2.png)

<span data-ttu-id="c8d94-130">Vengono creati la cartella *MvcMovie\Views\HelloWorld* e il file *MvcMovie\Views\HelloWorld\Index.cshtml* .</span><span class="sxs-lookup"><span data-stu-id="c8d94-130">The *MvcMovie\Views\HelloWorld* folder and the *MvcMovie\Views\HelloWorld\Index.cshtml* file are created.</span></span> <span data-ttu-id="c8d94-131">È possibile visualizzarli nel **Esplora soluzioni**:</span><span class="sxs-lookup"><span data-stu-id="c8d94-131">You can see them in **Solution Explorer**:</span></span>

![](adding-a-view/_static/image3.png)

<span data-ttu-id="c8d94-132">Di seguito è illustrato il file *index. cshtml* creato:</span><span class="sxs-lookup"><span data-stu-id="c8d94-132">The following shows the *Index.cshtml* file that was created:</span></span>

<span data-ttu-id="c8d94-133">[![HelloWorldIndex](adding-a-view/_static/image5.png)](adding-a-view/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="c8d94-133">[![HelloWorldIndex](adding-a-view/_static/image5.png)](adding-a-view/_static/image4.png)</span></span>

<span data-ttu-id="c8d94-134">Aggiungere codice HTML sotto il tag `<h2>`.</span><span class="sxs-lookup"><span data-stu-id="c8d94-134">Add some HTML under the `<h2>` tag.</span></span> <span data-ttu-id="c8d94-135">Il file *MvcMovie\Views\HelloWorld\Index.cshtml* modificato è riportato di seguito.</span><span class="sxs-lookup"><span data-stu-id="c8d94-135">The modified *MvcMovie\Views\HelloWorld\Index.cshtml* file is shown below.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample2.cshtml)]

<span data-ttu-id="c8d94-136">Eseguire l'applicazione e passare al controller di `HelloWorld` (`http://localhost:xxxx/HelloWorld`).</span><span class="sxs-lookup"><span data-stu-id="c8d94-136">Run the application and browse to the `HelloWorld` controller (`http://localhost:xxxx/HelloWorld`).</span></span> <span data-ttu-id="c8d94-137">Il metodo `Index` nel controller non ha fatto molto lavoro; è stata eseguita semplicemente l'istruzione `return View()`, che ha specificato che il metodo deve usare un file di modello di visualizzazione per eseguire il rendering di una risposta nel browser.</span><span class="sxs-lookup"><span data-stu-id="c8d94-137">The `Index` method in your controller didn't do much work; it simply ran the statement `return View()`, which specified that the method should use a view template file to render a response to the browser.</span></span> <span data-ttu-id="c8d94-138">Dal momento che non è stato specificato in modo esplicito il nome del file di modello di visualizzazione da usare, per impostazione predefinita ASP.NET MVC usa il file di visualizzazione *index. cshtml* nella cartella *\Views\HelloWorld* .</span><span class="sxs-lookup"><span data-stu-id="c8d94-138">Because you didn't explicitly specify the name of the view template file to use, ASP.NET MVC defaulted to using the *Index.cshtml* view file in the *\Views\HelloWorld* folder.</span></span> <span data-ttu-id="c8d94-139">L'immagine seguente mostra la stringa hardcoded nella visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="c8d94-139">The image below shows the string hard-coded in the view.</span></span>

![](adding-a-view/_static/image6.png)

<span data-ttu-id="c8d94-140">Sembra abbastanza valido.</span><span class="sxs-lookup"><span data-stu-id="c8d94-140">Looks pretty good.</span></span> <span data-ttu-id="c8d94-141">Si noti, tuttavia, che la barra del titolo del browser dice "index" e il titolo grande nella pagina indica "My MVC Application".</span><span class="sxs-lookup"><span data-stu-id="c8d94-141">However, notice that the browser's title bar says "Index" and the big title on the page says "My MVC Application."</span></span> <span data-ttu-id="c8d94-142">Modificare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="c8d94-142">Let's change those.</span></span>

## <a name="changing-views-and-layout-pages"></a><span data-ttu-id="c8d94-143">Modifica di visualizzazioni e pagine di layout</span><span class="sxs-lookup"><span data-stu-id="c8d94-143">Changing Views and Layout Pages</span></span>

<span data-ttu-id="c8d94-144">In primo luogo, si desidera modificare il titolo "applicazione MVC" nella parte superiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="c8d94-144">First, you want to change the "My MVC Application" title at the top of the page.</span></span> <span data-ttu-id="c8d94-145">Il testo è comune a ogni pagina.</span><span class="sxs-lookup"><span data-stu-id="c8d94-145">That text is common to every page.</span></span> <span data-ttu-id="c8d94-146">In realtà viene implementato in una sola posizione del progetto, anche se viene visualizzato in ogni pagina dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c8d94-146">It actually is implemented in only one place in the project, even though it appears on every page in the application.</span></span> <span data-ttu-id="c8d94-147">Passare alla cartella */Views/Shared.* in **Esplora soluzioni** e aprire il file *\_layout. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="c8d94-147">Go to the */Views/Shared* folder in **Solution Explorer** and open the *\_Layout.cshtml* file.</span></span> <span data-ttu-id="c8d94-148">Questo file è denominato *pagina layout* ed è la "Shell" condivisa usata da tutte le altre pagine.</span><span class="sxs-lookup"><span data-stu-id="c8d94-148">This file is called a *layout page* and it's the shared "shell" that all other pages use.</span></span>

<span data-ttu-id="c8d94-149">[![_LayoutCshtml](adding-a-view/_static/image8.png)](adding-a-view/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c8d94-149">[![_LayoutCshtml](adding-a-view/_static/image8.png)](adding-a-view/_static/image7.png)</span></span>

<span data-ttu-id="c8d94-150">I modelli di layout consentono di specificare il layout del contenitore HTML del sito in un'unica posizione e quindi di applicarlo in più pagine del sito.</span><span class="sxs-lookup"><span data-stu-id="c8d94-150">Layout templates allow you to specify the HTML container layout of your site in one place and then apply it across multiple pages in your site.</span></span> <span data-ttu-id="c8d94-151">Si noti la `@RenderBody()` riga nella parte inferiore del file.</span><span class="sxs-lookup"><span data-stu-id="c8d94-151">Note the `@RenderBody()` line near the bottom of the file.</span></span> <span data-ttu-id="c8d94-152">`RenderBody` è un segnaposto in cui vengono visualizzate tutte le pagine specifiche della visualizzazione create, "incapsulate" nella pagina di layout.</span><span class="sxs-lookup"><span data-stu-id="c8d94-152">`RenderBody` is a placeholder where all the view-specific pages you create show up, "wrapped" in the layout page.</span></span> <span data-ttu-id="c8d94-153">Modificare l'intestazione del titolo nel modello di layout da "My MVC Application" a "MVC Movie app".</span><span class="sxs-lookup"><span data-stu-id="c8d94-153">Change the title heading in the layout template from "My MVC Application" to "MVC Movie App".</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample3.cshtml)]

<span data-ttu-id="c8d94-154">Eseguire l'applicazione e notare che ora viene visualizzato "MVC Movie app".</span><span class="sxs-lookup"><span data-stu-id="c8d94-154">Run the application and notice that it now says "MVC Movie App".</span></span> <span data-ttu-id="c8d94-155">Fare clic sul collegamento **About (informazioni su** ). verrà visualizzata la pagina "app Movie MVC".</span><span class="sxs-lookup"><span data-stu-id="c8d94-155">Click the **About** link, and you see how that page shows "MVC Movie App", too.</span></span> <span data-ttu-id="c8d94-156">È stato possibile apportare la modifica una volta nel modello di layout e fare in modo che tutte le pagine del sito riflettano il nuovo titolo.</span><span class="sxs-lookup"><span data-stu-id="c8d94-156">We were able to make the change once in the layout template and have all pages on the site reflect the new title.</span></span>

![](adding-a-view/_static/image9.png)

<span data-ttu-id="c8d94-157">Di seguito è riportato il file completo *\_layout. cshtml* :</span><span class="sxs-lookup"><span data-stu-id="c8d94-157">The complete *\_Layout.cshtml* file is shown below:</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample4.cshtml)]

<span data-ttu-id="c8d94-158">A questo punto, modificare il titolo della pagina di indice (visualizzazione).</span><span class="sxs-lookup"><span data-stu-id="c8d94-158">Now, let's change the title of the Index page (view).</span></span>

<span data-ttu-id="c8d94-159">Aprire *MvcMovie\Views\HelloWorld\Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="c8d94-159">Open *MvcMovie\Views\HelloWorld\Index.cshtml*.</span></span> <span data-ttu-id="c8d94-160">Sono disponibili due posizioni per apportare una modifica: innanzitutto, il testo visualizzato nel titolo del browser e quindi nell'intestazione secondaria (elemento `<h2>`).</span><span class="sxs-lookup"><span data-stu-id="c8d94-160">There are two places to make a change: first, the text that appears in the title of the browser, and then in the secondary header (the `<h2>` element).</span></span> <span data-ttu-id="c8d94-161">Renderli leggermente diversi in modo da poter esaminare la parte specifica di app modificata dal frammento specifico di codice.</span><span class="sxs-lookup"><span data-stu-id="c8d94-161">You'll make them slightly different so you can see which bit of code changes which part of the app.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample5.cshtml)]

<span data-ttu-id="c8d94-162">Per indicare il titolo HTML da visualizzare, il codice precedente imposta una proprietà di `Title` dell'oggetto `ViewBag`, che si trova nel modello di vista *index. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="c8d94-162">To indicate the HTML title to display, the code above sets a `Title` property of the `ViewBag` object (which is in the *Index.cshtml* view template).</span></span> <span data-ttu-id="c8d94-163">Se si esamina il codice sorgente del modello di layout, si noterà che il modello usa questo valore nell'elemento `<title>` come parte della sezione `<head>` del codice HTML.</span><span class="sxs-lookup"><span data-stu-id="c8d94-163">If you look back at the source code of the layout template, you'll notice that the template uses this value in the `<title>` element as part of the `<head>` section of the HTML.</span></span> <span data-ttu-id="c8d94-164">Con questo approccio, è possibile passare facilmente altri parametri tra il modello di visualizzazione e il file di layout.</span><span class="sxs-lookup"><span data-stu-id="c8d94-164">Using this approach, you can easily pass other parameters between your view template and your layout file.</span></span>

<span data-ttu-id="c8d94-165">Eseguire l'applicazione e passare a `http://localhost:xx/HelloWorld`.</span><span class="sxs-lookup"><span data-stu-id="c8d94-165">Run the application and browse to `http://localhost:xx/HelloWorld`.</span></span> <span data-ttu-id="c8d94-166">Si noti che il titolo del browser, l'intestazione primaria e le intestazioni secondarie sono cambiati.</span><span class="sxs-lookup"><span data-stu-id="c8d94-166">Notice that the browser title, the primary heading, and the secondary headings have changed.</span></span> <span data-ttu-id="c8d94-167">Se le modifiche non sono visibili nel browser, è possibile che si stia visualizzando il contenuto memorizzato nella cache.</span><span class="sxs-lookup"><span data-stu-id="c8d94-167">(If you don't see changes in the browser, you might be viewing cached content.</span></span> <span data-ttu-id="c8d94-168">Premere CTRL + F5 nel browser per forzare il caricamento della risposta dal server.</span><span class="sxs-lookup"><span data-stu-id="c8d94-168">Press Ctrl+F5 in your browser to force the response from the server to be loaded.)</span></span>

<span data-ttu-id="c8d94-169">Si noti anche che il contenuto del modello di vista *index. cshtml* è stato unito al modello di vista *\_layout. cshtml* ed è stata inviata una singola risposta HTML al browser.</span><span class="sxs-lookup"><span data-stu-id="c8d94-169">Also notice how the content in the *Index.cshtml* view template was merged with the *\_Layout.cshtml* view template and a single HTML response was sent to the browser.</span></span> <span data-ttu-id="c8d94-170">I modelli di layout rendono molto semplice apportare modifiche che si applicano a tutte le pagine dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c8d94-170">Layout templates make it really easy to make changes that apply across all of the pages in your application.</span></span>

![](adding-a-view/_static/image10.png)

<span data-ttu-id="c8d94-171">Il breve testo di "dati", in questo caso il messaggio "Hello from our View Template!",</span><span class="sxs-lookup"><span data-stu-id="c8d94-171">Our little bit of "data" (in this case the "Hello from our View Template!"</span></span> <span data-ttu-id="c8d94-172">è tuttavia hardcoded.</span><span class="sxs-lookup"><span data-stu-id="c8d94-172">message) is hard-coded, though.</span></span> <span data-ttu-id="c8d94-173">L'applicazione MVC ha un elemento "V" (vista) ed è stato ottenuto un elemento "C" (controller), ma non ancora un elemento "M" (modello).</span><span class="sxs-lookup"><span data-stu-id="c8d94-173">The MVC application has a "V" (view) and you've got a "C" (controller), but no "M" (model) yet.</span></span> <span data-ttu-id="c8d94-174">A breve verrà illustrato come creare un database e recuperare i dati del modello.</span><span class="sxs-lookup"><span data-stu-id="c8d94-174">Shortly, we'll walk through how create a database and retrieve model data from it.</span></span>

## <a name="passing-data-from-the-controller-to-the-view"></a><span data-ttu-id="c8d94-175">Passaggio di dati dal controller alla vista</span><span class="sxs-lookup"><span data-stu-id="c8d94-175">Passing Data from the Controller to the View</span></span>

<span data-ttu-id="c8d94-176">Prima di passare a un database e a parlare dei modelli, tuttavia, parliamo prima di passare le informazioni dal controller a una visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="c8d94-176">Before we go to a database and talk about models, though, let's first talk about passing information from the controller to a view.</span></span> <span data-ttu-id="c8d94-177">Le classi controller vengono richiamate in risposta a una richiesta URL in ingresso.</span><span class="sxs-lookup"><span data-stu-id="c8d94-177">Controller classes are invoked in response to an incoming URL request.</span></span> <span data-ttu-id="c8d94-178">Una classe controller è la posizione in cui si scrive il codice che gestisce i parametri in ingresso, recupera i dati da un database e infine decide il tipo di risposta da restituire al browser.</span><span class="sxs-lookup"><span data-stu-id="c8d94-178">A controller class is where you write the code that handles the incoming parameters, retrieves data from a database, and ultimately decides what type of response to send back to the browser.</span></span> <span data-ttu-id="c8d94-179">I modelli di visualizzazione possono quindi essere usati da un controller per generare e formattare una risposta HTML al browser.</span><span class="sxs-lookup"><span data-stu-id="c8d94-179">View templates can then be used from a controller to generate and format an HTML response to the browser.</span></span>

<span data-ttu-id="c8d94-180">I controller sono responsabili di fornire tutti i dati o gli oggetti necessari per consentire a un modello di visualizzazione di eseguire il rendering di una risposta al browser.</span><span class="sxs-lookup"><span data-stu-id="c8d94-180">Controllers are responsible for providing whatever data or objects are required in order for a view template to render a response to the browser.</span></span> <span data-ttu-id="c8d94-181">Un modello di vista non deve mai eseguire la logica di business o interagire direttamente con un database.</span><span class="sxs-lookup"><span data-stu-id="c8d94-181">A view template should never perform business logic or interact with a database directly.</span></span> <span data-ttu-id="c8d94-182">Al contrario, dovrebbe funzionare solo con i dati forniti dal controller.</span><span class="sxs-lookup"><span data-stu-id="c8d94-182">Instead, it should work only with the data that's provided to it by the controller.</span></span> <span data-ttu-id="c8d94-183">Il mantenimento di questa "separazione dei problemi" consente di mantenere il codice pulito e più gestibile.</span><span class="sxs-lookup"><span data-stu-id="c8d94-183">Maintaining this "separation of concerns" helps keep your code clean and more maintainable.</span></span>

<span data-ttu-id="c8d94-184">Attualmente, il metodo di azione `Welcome` nella classe `HelloWorldController` accetta un `name` e un parametro `numTimes` e quindi restituisce i valori direttamente al browser.</span><span class="sxs-lookup"><span data-stu-id="c8d94-184">Currently, the `Welcome` action method in the `HelloWorldController` class takes a `name` and a `numTimes` parameter and then outputs the values directly to the browser.</span></span> <span data-ttu-id="c8d94-185">Anziché fare in modo che il controller esegua il rendering di questa risposta come stringa, modificare il controller per usare un modello di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="c8d94-185">Rather than have the controller render this response as a string, let's change the controller to use a view template instead.</span></span> <span data-ttu-id="c8d94-186">Il modello di vista genererà una risposta dinamica, il che significa che è necessario passare i bit di dati appropriati dal controller alla vista per generare la risposta.</span><span class="sxs-lookup"><span data-stu-id="c8d94-186">The view template will generate a dynamic response, which means that you need to pass appropriate bits of data from the controller to the view in order to generate the response.</span></span> <span data-ttu-id="c8d94-187">A tale scopo, fare in modo che il controller inserisca i dati dinamici necessari per il modello di visualizzazione in un oggetto `ViewBag` a cui il modello di vista può accedere.</span><span class="sxs-lookup"><span data-stu-id="c8d94-187">You can do this by having the controller put the dynamic data that the view template needs in a `ViewBag` object that the view template can then access.</span></span>

<span data-ttu-id="c8d94-188">Tornare al file *HelloWorldController.cs* e modificare il metodo `Welcome` per aggiungere un valore `Message` e `NumTimes` all'oggetto `ViewBag`.</span><span class="sxs-lookup"><span data-stu-id="c8d94-188">Return to the *HelloWorldController.cs* file and change the `Welcome` method to add a `Message` and `NumTimes` value to the `ViewBag` object.</span></span> <span data-ttu-id="c8d94-189">`ViewBag` è un oggetto dinamico, ovvero è possibile inserire qualsiasi valore desiderato. l'oggetto `ViewBag` non dispone di proprietà definite fino a quando non si inserisce un elemento al suo interno.</span><span class="sxs-lookup"><span data-stu-id="c8d94-189">`ViewBag` is a dynamic object, which means you can put whatever you want in to it; the `ViewBag` object has no defined properties until you put something inside it.</span></span> <span data-ttu-id="c8d94-190">Il file *HelloWorldController.cs* completo avrà un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c8d94-190">The complete *HelloWorldController.cs* file looks like this:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample6.cs)]

<span data-ttu-id="c8d94-191">A questo punto l'oggetto `ViewBag` contiene i dati che verranno passati automaticamente alla visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="c8d94-191">Now the `ViewBag` object contains data that will be passed to the view automatically.</span></span>

<span data-ttu-id="c8d94-192">Quindi, è necessario un modello di visualizzazione introduttiva.</span><span class="sxs-lookup"><span data-stu-id="c8d94-192">Next, you need a Welcome view template!</span></span> <span data-ttu-id="c8d94-193">Scegliere **Compila MvcMovie** dal menu **debug** per assicurarsi che il progetto sia compilato.</span><span class="sxs-lookup"><span data-stu-id="c8d94-193">In the **Debug** menu, select **Build MvcMovie** to make sure the project is compiled.</span></span>

<span data-ttu-id="c8d94-194">[![BuildHelloWorld](adding-a-view/_static/image12.png)](adding-a-view/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="c8d94-194">[![BuildHelloWorld](adding-a-view/_static/image12.png)](adding-a-view/_static/image11.png)</span></span>

<span data-ttu-id="c8d94-195">Fare quindi clic con il pulsante destro del mouse all'interno del metodo `Welcome` e scegliere **Aggiungi visualizzazione**.</span><span class="sxs-lookup"><span data-stu-id="c8d94-195">Then right-click inside the `Welcome` method and click **Add View**.</span></span> <span data-ttu-id="c8d94-196">Ecco come appare la finestra di dialogo **Aggiungi visualizzazione** :</span><span class="sxs-lookup"><span data-stu-id="c8d94-196">Here's what the **Add View** dialog box looks like:</span></span>

![](adding-a-view/_static/image13.png)

<span data-ttu-id="c8d94-197">Fare clic su **Aggiungi**e quindi aggiungere il codice seguente sotto l'elemento `<h2>` nel nuovo file *Welcome. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="c8d94-197">Click **Add**, and then add the following code under the `<h2>` element in the new *Welcome.cshtml* file.</span></span> <span data-ttu-id="c8d94-198">Verrà creato un ciclo con la dicitura "Hello" per il numero di volte in cui l'utente dice che dovrebbe.</span><span class="sxs-lookup"><span data-stu-id="c8d94-198">You'll create a loop that says "Hello" as many times as the user says it should.</span></span> <span data-ttu-id="c8d94-199">Di seguito è riportato il file completo *Welcome. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="c8d94-199">The complete *Welcome.cshtml* file is shown below.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample7.cshtml)]

<span data-ttu-id="c8d94-200">Eseguire l'applicazione e passare all'URL seguente:</span><span class="sxs-lookup"><span data-stu-id="c8d94-200">Run the application and browse to the following URL:</span></span>

`http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`

<span data-ttu-id="c8d94-201">Ora i dati vengono ricavati dall'URL e passati al controller automaticamente.</span><span class="sxs-lookup"><span data-stu-id="c8d94-201">Now data is taken from the URL and passed to the controller automatically.</span></span> <span data-ttu-id="c8d94-202">Il controller inserisce i dati in un oggetto `ViewBag` e passa tale oggetto alla visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="c8d94-202">The controller packages the data into a `ViewBag` object and passes that object to the view.</span></span> <span data-ttu-id="c8d94-203">La vista Visualizza quindi i dati in formato HTML per l'utente.</span><span class="sxs-lookup"><span data-stu-id="c8d94-203">The view then displays the data as HTML to the user.</span></span>

![](adding-a-view/_static/image14.png)

<span data-ttu-id="c8d94-204">Queste operazioni hanno riguardato un tipo di "M" per modello, ma non il tipo di database.</span><span class="sxs-lookup"><span data-stu-id="c8d94-204">Well, that was a kind of an "M" for model, but not the database kind.</span></span> <span data-ttu-id="c8d94-205">Creare un database di film con i concetti appresi.</span><span class="sxs-lookup"><span data-stu-id="c8d94-205">Let's take what we've learned and create a database of movies.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c8d94-206">[Precedente](adding-a-controller.md)
> [Successivo](adding-a-model.md)</span><span class="sxs-lookup"><span data-stu-id="c8d94-206">[Previous](adding-a-controller.md)
[Next](adding-a-model.md)</span></span>
