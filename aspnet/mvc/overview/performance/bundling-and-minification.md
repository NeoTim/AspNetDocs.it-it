---
uid: mvc/overview/performance/bundling-and-minification
title: Creazione di bundle e minification | Microsoft Docs
author: Rick-Anderson
description: La creazione di bundle e minification sono due tecniche che è possibile usare in ASP.NET 4,5 per migliorare il tempo di caricamento della richiesta. La creazione di bundle e minification migliora i tempi di caricamento di reducin...
ms.author: riande
ms.date: 08/23/2012
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 61bfe5dbac04b57e1461183b66ead2f01fe0734c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78538598"
---
# <a name="bundling-and-minification"></a><span data-ttu-id="2d5c2-104">Creazione di bundle e minimizzazione</span><span class="sxs-lookup"><span data-stu-id="2d5c2-104">Bundling and Minification</span></span>

<span data-ttu-id="2d5c2-105">di [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="2d5c2-105">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="2d5c2-106">La creazione di bundle e minification sono due tecniche che è possibile usare in ASP.NET 4,5 per migliorare il tempo di caricamento della richiesta.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="2d5c2-107">La creazione di bundle e minification consente di migliorare il tempo di caricamento riducendo il numero di richieste al server e riducendo le dimensioni degli asset richiesti, ad esempio CSS e JavaScript.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>

<span data-ttu-id="2d5c2-108">La maggior parte dei principali browser correnti limita il numero di [connessioni simultanee](http://www.browserscope.org/?category=network) per ogni nome host a sei.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="2d5c2-109">Ciò significa che durante l'elaborazione di sei richieste, le richieste aggiuntive per gli asset in un host verranno accodate dal browser.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="2d5c2-110">Nell'immagine seguente, le schede di rete degli strumenti di sviluppo F12 di IE visualizzano la tempistica per le risorse richieste dalla visualizzazione About di un'applicazione di esempio.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="2d5c2-112">Le barre grigie indicano l'ora in cui la richiesta viene accodata dal browser in attesa del limite di sei connessioni.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="2d5c2-113">La barra gialla è il tempo richiesto per il primo byte, ovvero il tempo impiegato per inviare la richiesta e ricevere la prima risposta dal server.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="2d5c2-114">Le barre blu indicano il tempo impiegato per ricevere i dati di risposta dal server.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="2d5c2-115">È possibile fare doppio clic su un asset per ottenere informazioni dettagliate sull'intervallo.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="2d5c2-116">Ad esempio, l'immagine seguente mostra i dettagli dell'intervallo per il caricamento del file */Scripts/MyScripts/JavaScript6.js* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="2d5c2-117">L'immagine precedente mostra l'evento **Start** , che indica l'ora in cui la richiesta è stata accodata perché il browser limita il numero di connessioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="2d5c2-118">In questo caso, la richiesta è stata accodata per 46 millisecondi in attesa del completamento di un'altra richiesta.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="2d5c2-119">Bundle</span><span class="sxs-lookup"><span data-stu-id="2d5c2-119">Bundling</span></span>

<span data-ttu-id="2d5c2-120">La creazione di bundle è una nuova funzionalità di ASP.NET 4,5 che semplifica la combinazione o l'aggregazione di più file in un unico file.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="2d5c2-121">È possibile creare CSS, JavaScript e altri bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="2d5c2-122">Un numero inferiore di file indica un minor numero di richieste HTTP e può migliorare le prestazioni del caricamento della pagina.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="2d5c2-123">Nell'immagine seguente viene illustrata la stessa visualizzazione temporizzata della visualizzazione About illustrata in precedenza, ma questa volta con la funzionalità di raggruppamento e minification abilitata.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="2d5c2-124">Minification</span><span class="sxs-lookup"><span data-stu-id="2d5c2-124">Minification</span></span>

<span data-ttu-id="2d5c2-125">Minification esegue diverse ottimizzazioni del codice per script o CSS, ad esempio la rimozione di spazi vuoti e commenti superflui e l'abbreviazione di nomi di variabili in un unico carattere.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="2d5c2-126">Si consideri la seguente funzione JavaScript.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="2d5c2-127">Dopo minification, la funzione viene ridotta a quanto segue:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="2d5c2-128">Oltre a rimuovere i commenti e gli spazi vuoti non necessari, i parametri e i nomi delle variabili seguenti sono stati rinominati (abbreviato) come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="2d5c2-129">**Original**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-129">**Original**</span></span> | <span data-ttu-id="2d5c2-130">**Rinominato**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="2d5c2-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="2d5c2-131">imageTagAndImageID</span></span> | <span data-ttu-id="2d5c2-132">n</span><span class="sxs-lookup"><span data-stu-id="2d5c2-132">n</span></span> |
| <span data-ttu-id="2d5c2-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="2d5c2-133">imageContext</span></span> | <span data-ttu-id="2d5c2-134">u</span><span class="sxs-lookup"><span data-stu-id="2d5c2-134">t</span></span> |
| <span data-ttu-id="2d5c2-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="2d5c2-135">imageElement</span></span> | <span data-ttu-id="2d5c2-136">i</span><span class="sxs-lookup"><span data-stu-id="2d5c2-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="2d5c2-137">Effetti della creazione di bundle e minification</span><span class="sxs-lookup"><span data-stu-id="2d5c2-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="2d5c2-138">Nella tabella seguente vengono illustrate alcune differenze importanti tra l'elenco di tutte le risorse singolarmente e l'utilizzo di bundle e minification (B/M) nel programma di esempio.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="2d5c2-139">**Uso di B/M**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-139">**Using B/M**</span></span> | <span data-ttu-id="2d5c2-140">**Senza B/M**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-140">**Without B/M**</span></span> | <span data-ttu-id="2d5c2-141">**Modifica**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-141">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2d5c2-142">**Richieste di file**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-142">**File Requests**</span></span> | <span data-ttu-id="2d5c2-143">9</span><span class="sxs-lookup"><span data-stu-id="2d5c2-143">9</span></span> | <span data-ttu-id="2d5c2-144">34</span><span class="sxs-lookup"><span data-stu-id="2d5c2-144">34</span></span> | <span data-ttu-id="2d5c2-145">256%</span><span class="sxs-lookup"><span data-stu-id="2d5c2-145">256%</span></span> |
| <span data-ttu-id="2d5c2-146">**KB inviati**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-146">**KB Sent**</span></span> | <span data-ttu-id="2d5c2-147">3.26</span><span class="sxs-lookup"><span data-stu-id="2d5c2-147">3.26</span></span> | <span data-ttu-id="2d5c2-148">11.92</span><span class="sxs-lookup"><span data-stu-id="2d5c2-148">11.92</span></span> | <span data-ttu-id="2d5c2-149">266%</span><span class="sxs-lookup"><span data-stu-id="2d5c2-149">266%</span></span> |
| <span data-ttu-id="2d5c2-150">**KB ricevuti**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-150">**KB Received**</span></span> | <span data-ttu-id="2d5c2-151">388.51</span><span class="sxs-lookup"><span data-stu-id="2d5c2-151">388.51</span></span> | <span data-ttu-id="2d5c2-152">530</span><span class="sxs-lookup"><span data-stu-id="2d5c2-152">530</span></span> | <span data-ttu-id="2d5c2-153">36%</span><span class="sxs-lookup"><span data-stu-id="2d5c2-153">36%</span></span> |
| <span data-ttu-id="2d5c2-154">**Tempo di caricamento**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-154">**Load Time**</span></span> | <span data-ttu-id="2d5c2-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="2d5c2-155">510 MS</span></span> | <span data-ttu-id="2d5c2-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="2d5c2-156">780 MS</span></span> | <span data-ttu-id="2d5c2-157">53%</span><span class="sxs-lookup"><span data-stu-id="2d5c2-157">53%</span></span> |

<span data-ttu-id="2d5c2-158">I byte inviati hanno avuto una riduzione significativa con la creazione di bundle perché i browser sono piuttosto dettagliati con le intestazioni HTTP che applicano alle richieste.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="2d5c2-159">La riduzione dei byte ricevuti non è di grandi dimensioni perché i file più grandi (*script\\jQuery-UI-1.8.11. min. js* e gli *script\\jQuery-1.7.1. min. js*) sono già minimizzati.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-159">The received bytes reduction is not as large because the largest files (*Scripts\\jquery-ui-1.8.11.min.js* and *Scripts\\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="2d5c2-160">Nota: le tempistiche del programma di esempio usano lo strumento [Fiddler](http://www.fiddler2.com/fiddler2/) per simulare una rete lenta.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="2d5c2-161">Dal menu **regole** di Fiddler selezionare **prestazioni** , quindi **simulare la velocità del modem**.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="2d5c2-162">Debug in bundle e minimizzati JavaScript</span><span class="sxs-lookup"><span data-stu-id="2d5c2-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="2d5c2-163">È facile eseguire il debug del codice JavaScript in un ambiente di sviluppo (in cui l' [elemento di compilazione](https://msdn.microsoft.com/library/s10awwz0.aspx) nel file *Web. config* è impostato su `debug="true"`) perché i file JavaScript non sono in bundle o minimizzati.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="2d5c2-164">È anche possibile eseguire il debug di una build di rilascio in cui i file JavaScript sono aggregati e minimizzati.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="2d5c2-165">Usando gli strumenti di sviluppo F12 di IE, è possibile eseguire il debug di una funzione JavaScript inclusa in un bundle minimizzati usando l'approccio seguente:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="2d5c2-166">Selezionare la scheda **script** e quindi fare clic sul pulsante **Avvia debug** .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="2d5c2-167">Selezionare il bundle contenente la funzione JavaScript di cui si vuole eseguire il debug usando il pulsante Asset.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="2d5c2-168">Formattare il minimizzati JavaScript selezionando il **pulsante di configurazione** ![](bundling-and-minification/_static/image5.png), quindi selezionando **Format JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="2d5c2-169">Nella casella **Cerca script** di input selezionare il nome della funzione di cui si vuole eseguire il debug.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-169">In the **Search Script** input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="2d5c2-170">Nell'immagine seguente **AddAltToImg** è stato immesso nella casella di input **script di ricerca** .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-170">In the following image, **AddAltToImg** was entered in the **Search Script** input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="2d5c2-171">Per ulteriori informazioni sul debug con gli strumenti di sviluppo F12, vedere l'articolo [di MSDN utilizzo del strumenti di sviluppo F12 per eseguire il debug degli errori di JavaScript](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="2d5c2-172">Controllo della creazione di bundle e minification</span><span class="sxs-lookup"><span data-stu-id="2d5c2-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="2d5c2-173">La creazione di bundle e minification è abilitata o disabilitata impostando il valore dell'attributo debug nell' [elemento compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) nel file *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="2d5c2-174">Nel codice XML seguente `debug` è impostato su true, quindi la creazione di bundle e minification è disabilitata.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="2d5c2-175">Per abilitare la creazione di bundle e minification, impostare il valore `debug` su "false".</span><span class="sxs-lookup"><span data-stu-id="2d5c2-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="2d5c2-176">È possibile eseguire l'override dell'impostazione di *Web. config* con la proprietà `EnableOptimizations` nella classe `BundleTable`.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="2d5c2-177">Il codice seguente abilita la creazione di bundle e minification ed esegue l'override di qualsiasi impostazione nel file *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="2d5c2-178">A meno che non sia `true` `EnableOptimizations` o l'attributo debug nell' [elemento compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) nel file *Web. config* sia impostato su `false`, i file non verranno aggregati o minimizzati.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="2d5c2-179">Inoltre, la versione minima dei file non verrà utilizzata, verranno selezionate le versioni di debug complete.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="2d5c2-180">`EnableOptimizations` esegue l'override dell'attributo di debug nell' [elemento di compilazione](https://msdn.microsoft.com/library/s10awwz0.aspx) nel file *Web. config*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-180">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>

## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="2d5c2-181">Uso di bundle e minification con Web Form e pagine Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="2d5c2-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="2d5c2-182">Per le pagine Web, vedere il post di Blog relativo all' [aggiunta dell'ottimizzazione Web a un sito Web Pages](https://docs.microsoft.com/archive/blogs/rickandy/adding-web-optimization-to-a-web-pages-site).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://docs.microsoft.com/archive/blogs/rickandy/adding-web-optimization-to-a-web-pages-site).</span></span>
- <span data-ttu-id="2d5c2-183">Per i Web Form, vedere il post di Blog relativo all' [aggiunta di bundle e minification ai Web Form](https://docs.microsoft.com/archive/blogs/rickandy/adding-bundling-and-minification-to-web-forms).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://docs.microsoft.com/archive/blogs/rickandy/adding-bundling-and-minification-to-web-forms).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="2d5c2-184">Uso di bundle e minification con ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="2d5c2-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="2d5c2-185">In questa sezione verrà creato un progetto MVC ASP.NET per esaminare le aggregazioni e minification.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="2d5c2-186">Per prima cosa, creare un nuovo progetto Internet MVC ASP.NET denominato **MvcBM** senza modificare le impostazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="2d5c2-187">Aprire l' *App\\\_avviare\\file BundleConfig.cs* ed esaminare il metodo `RegisterBundles` usato per creare, registrare e configurare i bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-187">Open the *App\\\_Start\\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="2d5c2-188">Nel codice seguente viene illustrata una parte del metodo `RegisterBundles`.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="2d5c2-189">Il codice precedente crea un nuovo bundle JavaScript denominato *~/Bundles/jQuery* che include tutti i appropriati (ovvero debug o minimizzati ma non. *vsdoc*) nella cartella *Scripts* che corrisponde alla stringa Wild Card "~/scripts/jQuery-{Version}.js".</span><span class="sxs-lookup"><span data-stu-id="2d5c2-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="2d5c2-190">Per ASP.NET MVC 4, questo significa che con una configurazione di debug, il file *jQuery-1.7.1. js* verrà aggiunto al bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="2d5c2-191">In una configurazione di versione verrà aggiunto *jQuery-1.7.1. min. js* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="2d5c2-192">Il Framework di aggregazione segue diverse convenzioni comuni, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="2d5c2-193">Selezione del file ". min" per il rilascio quando sono presenti *FILEX. min. js* e *FILEX. js* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-193">Selecting ".min" file for release when *FileX.min.js* and *FileX.js* exist.</span></span>
- <span data-ttu-id="2d5c2-194">Selezione della versione non ". min" per il debug.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="2d5c2-195">Ignorando i file "-vsdoc" (ad esempio *jQuery-1.7.1-vsdoc. js*), che vengono utilizzati solo da IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-195">Ignoring "-vsdoc" files (such as *jquery-1.7.1-vsdoc.js*), which are used only by IntelliSense.</span></span>

<span data-ttu-id="2d5c2-196">Il `{version}` la corrispondenza dei caratteri jolly illustrata sopra viene usato per creare automaticamente un bundle jQuery con la versione appropriata di jQuery nella cartella degli *script* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="2d5c2-197">In questo esempio, l'utilizzo di un carattere jolly offre i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="2d5c2-198">Consente di usare NuGet per eseguire l'aggiornamento a una versione più recente di jQuery senza modificare il codice di raggruppamento precedente o i riferimenti jQuery nelle pagine della visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="2d5c2-199">Seleziona automaticamente la versione completa per le configurazioni di debug e la versione ". min" per le build di rilascio.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="2d5c2-200">Uso di una rete CDN</span><span class="sxs-lookup"><span data-stu-id="2d5c2-200">Using a CDN</span></span>

 <span data-ttu-id="2d5c2-201">Il codice seguente sostituisce il bundle jQuery locale con un bundle jQuery per la rete CDN.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="2d5c2-202">Nel codice precedente jQuery verrà richiesto dalla rete CDN in modalità di rilascio e la versione di debug di jQuery verrà recuperata localmente in modalità di debug.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="2d5c2-203">Quando si usa una rete CDN, è necessario disporre di un meccanismo di fallback in caso di errore della richiesta della rete CDN.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="2d5c2-204">Il frammento di markup seguente alla fine del file di layout Mostra lo script aggiunto per richiedere jQuery se la rete CDN ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="2d5c2-205">Creazione di un bundle</span><span class="sxs-lookup"><span data-stu-id="2d5c2-205">Creating a Bundle</span></span>

<span data-ttu-id="2d5c2-206">La classe [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) `Include` metodo accetta una matrice di stringhe, in cui ogni stringa è un percorso virtuale della risorsa.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="2d5c2-207">Il codice seguente dal metodo `RegisterBundles` nell' *App\\\_avviare\\file BundleConfig.cs* Mostra come aggiungere più file a un bundle:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-207">The following code from the `RegisterBundles` method in the *App\\\_Start\\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="2d5c2-208">Viene fornita la classe [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) `IncludeDirectory` metodo per aggiungere tutti i file in una directory e, facoltativamente, tutte le sottodirectory, che corrispondono a un criterio di ricerca.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="2d5c2-209">Di seguito è riportata la classe [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) `IncludeDirectory` API:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="2d5c2-210">Ai bundle viene fatto riferimento nelle viste tramite il metodo Render (`Styles.Render` per CSS e `Scripts.Render` per JavaScript).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-210">Bundles are referenced in views using the Render method, (`Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="2d5c2-211">Il markup seguente dal file *views\\Shared\\\_layout. cshtml* Mostra in che modo le visualizzazioni predefinite del progetto Internet ASP.NET fanno riferimento a bundle CSS e JavaScript.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-211">The following markup from the *Views\\Shared\\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="2d5c2-212">Si noti che il metodo Render accetta una matrice di stringhe, pertanto è possibile aggiungere più aggregazioni in una riga di codice.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="2d5c2-213">In genere si vogliono usare i metodi Render che creano il codice HTML necessario per fare riferimento all'asset.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="2d5c2-214">È possibile usare il metodo `Url` per generare l'URL dell'asset senza il markup necessario per fare riferimento all'asset.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="2d5c2-215">Si supponga di voler usare il nuovo attributo [asincrono](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) HTML5.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="2d5c2-216">Il codice seguente illustra come fare riferimento a modernizzator usando il metodo `Url`.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="2d5c2-217">Uso del carattere jolly "\*" per la selezione dei file</span><span class="sxs-lookup"><span data-stu-id="2d5c2-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="2d5c2-218">Il percorso virtuale specificato nel metodo `Include` e il criterio di ricerca nel metodo `IncludeDirectory` possono accettare un carattere jolly "\*" come prefisso o suffisso nell'ultimo segmento di percorso.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="2d5c2-219">La stringa di ricerca non fa distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-219">The search string is case insensitive.</span></span> <span data-ttu-id="2d5c2-220">Il metodo `IncludeDirectory` ha la possibilità di eseguire la ricerca nelle sottodirectory.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="2d5c2-221">Si consideri un progetto con i seguenti file JavaScript:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-221">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="2d5c2-222">*Script\\comuni\\AddAltToImg. js*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-222">*Scripts\\Common\\AddAltToImg.js*</span></span>
- <span data-ttu-id="2d5c2-223">*Script\\comuni\\ToggleDiv. js*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-223">*Scripts\\Common\\ToggleDiv.js*</span></span>
- <span data-ttu-id="2d5c2-224">*Script\\comuni\\ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-224">*Scripts\\Common\\ToggleImg.js*</span></span>
- <span data-ttu-id="2d5c2-225">*Script\\Common\\Sub1\\ToggleLinks. js*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-225">*Scripts\\Common\\Sub1\\ToggleLinks.js*</span></span>

![dir imag](bundling-and-minification/_static/image7.png)

<span data-ttu-id="2d5c2-227">La tabella seguente illustra i file aggiunti a un bundle usando il carattere jolly, come illustrato:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="2d5c2-228">**Call**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-228">**Call**</span></span> | <span data-ttu-id="2d5c2-229">**Aggiunta di file o eccezione generata**</span><span class="sxs-lookup"><span data-stu-id="2d5c2-229">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="2d5c2-230">Include ("~/Scripts/Common/\*. js")</span><span class="sxs-lookup"><span data-stu-id="2d5c2-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="2d5c2-231">*AddAltToImg. js*, *ToggleDiv. js*, *ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-231">*AddAltToImg.js*, *ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="2d5c2-232">Include ("~/Scripts/Common/T\*. js")</span><span class="sxs-lookup"><span data-stu-id="2d5c2-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="2d5c2-233">Eccezione di modello non valida.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-233">Invalid pattern exception.</span></span> <span data-ttu-id="2d5c2-234">Il carattere jolly è consentito solo per il prefisso o il suffisso.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="2d5c2-235">Include ("~/Scripts/Common/\*og.\*")</span><span class="sxs-lookup"><span data-stu-id="2d5c2-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="2d5c2-236">Eccezione di modello non valida.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-236">Invalid pattern exception.</span></span> <span data-ttu-id="2d5c2-237">È consentito un solo carattere jolly.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="2d5c2-238">Includi ("~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="2d5c2-238">Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="2d5c2-239">*ToggleDiv. js*, *ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-239">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="2d5c2-240">Includi ("~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="2d5c2-240">Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="2d5c2-241">Eccezione di modello non valida.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-241">Invalid pattern exception.</span></span> <span data-ttu-id="2d5c2-242">Un segmento con caratteri jolly puri non è valido.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="2d5c2-243">IncludeDirectory ("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="2d5c2-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="2d5c2-244">*ToggleDiv. js*, *ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-244">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="2d5c2-245">IncludeDirectory ("~/Scripts/Common", "T\*", true)</span><span class="sxs-lookup"><span data-stu-id="2d5c2-245">IncludeDirectory("~/Scripts/Common", "T\*", true)</span></span> | <span data-ttu-id="2d5c2-246">*ToggleDiv. js*, *ToggleImg. js*, *ToggleLinks. js*</span><span class="sxs-lookup"><span data-stu-id="2d5c2-246">*ToggleDiv.js*, *ToggleImg.js*, *ToggleLinks.js*</span></span> |

<span data-ttu-id="2d5c2-247">L'aggiunta esplicita di ogni file a un bundle è generalmente la scelta preferita rispetto al caricamento di file con caratteri jolly per i motivi seguenti:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="2d5c2-248">L'aggiunta di script per impostazione predefinita con caratteri jolly prevede il caricamento in ordine alfabetico, che in genere non è quello desiderato.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="2d5c2-249">Spesso è necessario aggiungere i file CSS e JavaScript in un ordine specifico (non alfabetico).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="2d5c2-250">È possibile mitigare questo rischio aggiungendo un'implementazione personalizzata di [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) , ma l'aggiunta esplicita di ogni file è meno soggetta a errori.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="2d5c2-251">Ad esempio, è possibile aggiungere nuove risorse a una cartella in futuro, per cui potrebbe essere necessario modificare l'implementazione di [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="2d5c2-252">La visualizzazione di file specifici aggiunti a una directory tramite il caricamento con caratteri jolly può essere inclusa in tutte le visualizzazioni che fanno riferimento a tale bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="2d5c2-253">Se lo script di visualizzazione specifico viene aggiunto a un bundle, è possibile che venga visualizzato un errore JavaScript in altre viste che fanno riferimento al bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="2d5c2-254">I file CSS che importano altri file generano due volte i file importati.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="2d5c2-255">Ad esempio, il codice seguente crea un bundle con la maggior parte dei file CSS del tema dell'interfaccia utente jQuery caricati due volte.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="2d5c2-256">Il selettore di caratteri jolly "\*. css" riporta ogni file CSS nella cartella, incluso il *contenuto\\temi\\file di base\\jQuery. UI. all. CSS* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\\themes\\base\\jquery.ui.all.css* file.</span></span> <span data-ttu-id="2d5c2-257">Il file *jQuery. UI. all. CSS* importa altri file CSS.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="2d5c2-258">Caching del bundle</span><span class="sxs-lookup"><span data-stu-id="2d5c2-258">Bundle Caching</span></span>

<span data-ttu-id="2d5c2-259">I bundle impostano l'intestazione di scadenza HTTP un anno dopo la creazione del bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="2d5c2-260">Se si passa a una pagina visualizzata in precedenza, Fiddler Mostra che IE non esegue una richiesta condizionale per il bundle, ovvero non sono presenti richieste HTTP GET da Internet Explorer per i bundle e nessuna risposta HTTP 304 dal server.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="2d5c2-261">È possibile forzare IE a eseguire una richiesta condizionale per ogni bundle con il tasto F5, ottenendo una risposta HTTP 304 per ogni bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="2d5c2-262">È possibile forzare un aggiornamento completo utilizzando ^ F5, ottenendo una risposta HTTP 200 per ogni bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="2d5c2-263">La figura seguente mostra la scheda **caching** del riquadro risposta Fiddler:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![immagine di Caching Fiddler](bundling-and-minification/_static/image8.png)

<span data-ttu-id="2d5c2-265">Richiesta.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="2d5c2-266">per l'aggregazione **AllMyScripts** e contiene una coppia di stringhe di query **v = R0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="2d5c2-267">La stringa di query **v** ha un token di valore che è un identificatore univoco usato per la memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="2d5c2-268">Finché il bundle non cambia, l'applicazione ASP.NET richiederà il bundle **AllMyScripts** usando questo token.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="2d5c2-269">Se viene modificato un file nel bundle, il Framework di ottimizzazione di ASP.NET genererà un nuovo token, assicurando che le richieste del browser per il bundle otterranno il bundle più recente.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="2d5c2-270">Se si eseguono gli strumenti di sviluppo F12 IE9 e si passa a una pagina caricata in precedenza, IE Visualizza erroneamente le richieste GET condizionali effettuate a ogni bundle e il server restituisce HTTP 304.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="2d5c2-271">È possibile leggere perché IE9 ha riscontrato problemi nel determinare se una richiesta condizionale è stata effettuata nel post [di Blog usando CDNs e scade per migliorare le prestazioni del sito Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="2d5c2-272">LESS, CoffeeScript, SCSS, Sass bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="2d5c2-273">Il Framework per la creazione di bundle e minification fornisce un meccanismo per elaborare linguaggi intermedi come [scss](http://sass-lang.com/), [Sass](http://sass-lang.com/), [less](http://www.dotlesscss.org/) o [coffeescript](http://coffeescript.org/)e applicare trasformazioni come minification al bundle risultante.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="2d5c2-274">Ad esempio, per aggiungere file con [estensione less](http://www.dotlesscss.org/) al progetto MVC 4:</span><span class="sxs-lookup"><span data-stu-id="2d5c2-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="2d5c2-275">Creare una cartella per il contenuto meno.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="2d5c2-276">Nell'esempio seguente viene utilizzata la cartella *Content\\less* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-276">The following example uses the *Content\\MyLess* folder.</span></span>
2. <span data-ttu-id="2d5c2-277">Aggiungere il pacchetto NuGet [. less](http://www.dotlesscss.org/) **dotless** al progetto.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="2d5c2-278">![l'installazione di NuGet dotless](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="2d5c2-278">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="2d5c2-279">Aggiungere una classe che implementa l'interfaccia [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="2d5c2-280">Per la trasformazione. less, aggiungere il codice seguente al progetto.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="2d5c2-281">Creare un bundle di meno file con la `LessTransform` e la trasformazione [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="2d5c2-282">Aggiungere il codice seguente al metodo `RegisterBundles` nell' *App\\_Start file\\BundleConfig.cs* .</span><span class="sxs-lookup"><span data-stu-id="2d5c2-282">Add the following code to the `RegisterBundles` method in the *App\\_Start\\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="2d5c2-283">Aggiungere il codice seguente a tutte le visualizzazioni che fanno riferimento al bundle LESS.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="2d5c2-284">Considerazioni sui bundle</span><span class="sxs-lookup"><span data-stu-id="2d5c2-284">Bundle Considerations</span></span>

<span data-ttu-id="2d5c2-285">Una convenzione corretta da seguire quando si creano bundle consiste nell'includere "bundle" come prefisso nel nome del bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="2d5c2-286">In questo modo si eviterà un possibile [conflitto di routing](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="2d5c2-287">Dopo l'aggiornamento di un file in un bundle, viene generato un nuovo token per il parametro della stringa di query del bundle ed è necessario scaricare il bundle completo la volta successiva in cui un client richiede una pagina contenente il bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="2d5c2-288">Nel markup tradizionale in cui ogni asset è elencato singolarmente, viene scaricato solo il file modificato.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="2d5c2-289">Gli asset che cambiano frequentemente potrebbero non essere candidati validi per la creazione di bundle.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="2d5c2-290">La creazione di bundle e minification migliora principalmente il tempo di caricamento della prima richiesta di pagina.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="2d5c2-291">Una volta richiesta una pagina Web, il browser memorizza nella cache le risorse (JavaScript, CSS e immagini), in modo che la creazione di bundle e minification non forniscano un incremento delle prestazioni quando si richiede la stessa pagina o pagine nello stesso sito che richiede le stesse risorse.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="2d5c2-292">Se non si imposta correttamente l'intestazione Expires per le risorse e non si usano bundle e minification, l'euristica di aggiornamento dei browser contrassegna le risorse obsolete dopo alcuni giorni e il browser richiederà una richiesta di convalida per ogni asset.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="2d5c2-293">In questo caso, la creazione di bundle e minification fornisce un aumento delle prestazioni dopo la prima richiesta di pagina.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="2d5c2-294">Per informazioni dettagliate, vedere il Blog relativo all' [uso di CDNs e scade per migliorare le prestazioni del sito Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="2d5c2-295">Il limite del browser di sei connessioni simultanee per ogni nome host può essere mitigato tramite una rete [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="2d5c2-296">Poiché la rete CDN avrà un nome host diverso rispetto al sito di hosting, le richieste di asset dalla rete CDN non vengono conteggiate rispetto al limite di sei connessioni simultanee all'ambiente host.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="2d5c2-297">Una rete CDN può anche fornire i vantaggi comuni per la memorizzazione nella cache del pacchetto e la cache perimetrale.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="2d5c2-298">I bundle devono essere partizionati in base alle pagine in cui sono necessari.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="2d5c2-299">Ad esempio, il modello MVC ASP.NET predefinito per un'applicazione Internet crea un bundle di convalida jQuery separato da jQuery.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="2d5c2-300">Poiché le visualizzazioni predefinite create non hanno input e non inviano valori, non includono il bundle di convalida.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="2d5c2-301">Lo spazio dei nomi `System.Web.Optimization` viene implementato in *System. Web. Optimization. dll*.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-301">The `System.Web.Optimization` namespace is implemented in *System.Web.Optimization.dll*.</span></span> <span data-ttu-id="2d5c2-302">Sfrutta la libreria webgrease (*Webgrease. dll*) per le funzionalità di minification, che a sua volta usa *Antlr3. Runtime. dll*.</span><span class="sxs-lookup"><span data-stu-id="2d5c2-302">It leverages the WebGrease library (*WebGrease.dll*) for minification capabilities, which in turn uses *Antlr3.Runtime.dll*.</span></span>

<span data-ttu-id="2d5c2-303">*Uso Twitter per eseguire post rapidi e condividere i collegamenti. Il mio handle Twitter è*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="2d5c2-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="2d5c2-304">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="2d5c2-304">Additional resources</span></span>

- <span data-ttu-id="2d5c2-305">Video:[aggregazione e ottimizzazione](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) di [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="2d5c2-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="2d5c2-306">[Aggiunta dell'ottimizzazione Web a un sito Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="2d5c2-307">[Aggiunta di bundle e minification ai Web Form](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="2d5c2-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="2d5c2-308">[Implicazioni relative alle prestazioni della creazione di bundle e minification nell'esplorazione Web](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) di [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="2d5c2-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="2d5c2-309">L' [uso di CDNs e scade per migliorare le prestazioni del sito Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) di Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="2d5c2-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="2d5c2-310">Riduci RTT (tempi di round trip)</span><span class="sxs-lookup"><span data-stu-id="2d5c2-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="2d5c2-311">Contributors</span><span class="sxs-lookup"><span data-stu-id="2d5c2-311">Contributors</span></span>

- <span data-ttu-id="2d5c2-312">Hao Kung</span><span class="sxs-lookup"><span data-stu-id="2d5c2-312">Hao Kung</span></span>
- [<span data-ttu-id="2d5c2-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="2d5c2-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="2d5c2-314">Diana lotti</span><span class="sxs-lookup"><span data-stu-id="2d5c2-314">Diana LaRose</span></span>
