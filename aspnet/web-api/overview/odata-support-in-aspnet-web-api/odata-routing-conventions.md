---
uid: web-api/overview/odata-support-in-aspnet-web-api/odata-routing-conventions
title: Convenzioni di routing in API Web ASP.NET 2 OData-ASP.NET 4. x
author: MikeWasson
description: Descrive le convenzioni di routing utilizzate dall'API Web 2 in ASP.NET 4. x per gli endpoint OData.
ms.author: riande
ms.date: 07/31/2013
ms.custom: seoapril2019
ms.assetid: adbc175a-14eb-4ab2-a441-d056ffa8266f
msc.legacyurl: /web-api/overview/odata-support-in-aspnet-web-api/odata-routing-conventions
msc.type: authoredcontent
ms.openlocfilehash: 63df4a82cd8df92631485b2544117844cfd0ca56
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78614716"
---
# <a name="routing-conventions-in-aspnet-web-api-2-odata"></a><span data-ttu-id="550bb-103">Convenzioni di routing in OData API Web ASP.NET 2</span><span class="sxs-lookup"><span data-stu-id="550bb-103">Routing Conventions in ASP.NET Web API 2 Odata</span></span>

<span data-ttu-id="550bb-104">di [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="550bb-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="550bb-105">Questo articolo descrive le convenzioni di routing utilizzate dall'API Web 2 in ASP.NET 4. x per gli endpoint OData.</span><span class="sxs-lookup"><span data-stu-id="550bb-105">This article describes the routing conventions that Web API 2 in ASP.NET 4.x uses for OData endpoints.</span></span>

<span data-ttu-id="550bb-106">Quando l'API Web riceve una richiesta OData, esegue il mapping della richiesta al nome di un controller e a un nome di azione.</span><span class="sxs-lookup"><span data-stu-id="550bb-106">When Web API gets an OData request, it maps the request to a controller name and an action name.</span></span> <span data-ttu-id="550bb-107">Il mapping è basato sul metodo HTTP e sull'URI.</span><span class="sxs-lookup"><span data-stu-id="550bb-107">The mapping is based on the HTTP method and the URI.</span></span> <span data-ttu-id="550bb-108">Ad esempio, `GET /odata/Products(1)` esegue il mapping a `ProductsController.GetProduct`.</span><span class="sxs-lookup"><span data-stu-id="550bb-108">For example, `GET /odata/Products(1)` maps to `ProductsController.GetProduct`.</span></span>

<span data-ttu-id="550bb-109">Nella parte 1 di questo articolo vengono descritte le convenzioni di routing OData predefinite.</span><span class="sxs-lookup"><span data-stu-id="550bb-109">In part 1 of this article, I describe the built-in OData routing conventions.</span></span> <span data-ttu-id="550bb-110">Queste convenzioni sono progettate in modo specifico per gli endpoint OData e sostituiscono il sistema di routing dell'API Web predefinito.</span><span class="sxs-lookup"><span data-stu-id="550bb-110">These conventions are designed specifically for OData endpoints, and they replace the default Web API routing system.</span></span> <span data-ttu-id="550bb-111">La sostituzione si verifica quando si chiama **MapODataRoute**.</span><span class="sxs-lookup"><span data-stu-id="550bb-111">(The replacement happens when you call **MapODataRoute**.)</span></span>

<span data-ttu-id="550bb-112">Nella parte 2 viene illustrato come aggiungere le convenzioni di routing personalizzate.</span><span class="sxs-lookup"><span data-stu-id="550bb-112">In part 2, I show how to add custom routing conventions.</span></span> <span data-ttu-id="550bb-113">Attualmente, le convenzioni predefinite non coprono l'intero intervallo di URI OData, ma è possibile estenderle per gestire altri casi.</span><span class="sxs-lookup"><span data-stu-id="550bb-113">Currently the built-in conventions do not cover the entire range of OData URIs, but you can extend them to handle additional cases.</span></span>

- [<span data-ttu-id="550bb-114">Convenzioni di routing predefinite</span><span class="sxs-lookup"><span data-stu-id="550bb-114">Built-in Routing Conventions</span></span>](#conventions)
- [<span data-ttu-id="550bb-115">Convenzioni di routing personalizzate</span><span class="sxs-lookup"><span data-stu-id="550bb-115">Custom Routing Conventions</span></span>](#custom)

<a id="conventions"></a>
## <a name="built-in-routing-conventions"></a><span data-ttu-id="550bb-116">Convenzioni di routing predefinite</span><span class="sxs-lookup"><span data-stu-id="550bb-116">Built-in Routing Conventions</span></span>

<span data-ttu-id="550bb-117">Prima di descrivere le convenzioni di routing OData nell'API Web, è utile comprendere gli URI OData.</span><span class="sxs-lookup"><span data-stu-id="550bb-117">Before I describe the OData routing conventions in Web API, it's helpful to understand OData URIs.</span></span> <span data-ttu-id="550bb-118">Un [URI OData](http://www.odata.org/documentation/odata-v3-documentation/url-conventions/) è costituito da:</span><span class="sxs-lookup"><span data-stu-id="550bb-118">An [OData URI](http://www.odata.org/documentation/odata-v3-documentation/url-conventions/) consists of:</span></span>

- <span data-ttu-id="550bb-119">Radice del servizio</span><span class="sxs-lookup"><span data-stu-id="550bb-119">The service root</span></span>
- <span data-ttu-id="550bb-120">Percorso della risorsa</span><span class="sxs-lookup"><span data-stu-id="550bb-120">The resource path</span></span>
- <span data-ttu-id="550bb-121">Opzioni di query</span><span class="sxs-lookup"><span data-stu-id="550bb-121">Query options</span></span>

![](odata-routing-conventions/_static/image1.png)

<span data-ttu-id="550bb-122">Per il routing, la parte importante è il percorso della risorsa.</span><span class="sxs-lookup"><span data-stu-id="550bb-122">For routing, the important part is the resource path.</span></span> <span data-ttu-id="550bb-123">Il percorso della risorsa è diviso in segmenti.</span><span class="sxs-lookup"><span data-stu-id="550bb-123">The resource path is divided into segments.</span></span> <span data-ttu-id="550bb-124">Ad esempio, `/Products(1)/Supplier` dispone di tre segmenti:</span><span class="sxs-lookup"><span data-stu-id="550bb-124">For example, `/Products(1)/Supplier` has three segments:</span></span>

- <span data-ttu-id="550bb-125">`Products` fa riferimento a un set di entità denominato "Products".</span><span class="sxs-lookup"><span data-stu-id="550bb-125">`Products` refers to an entity set named "Products".</span></span>
- <span data-ttu-id="550bb-126">`1` è una chiave di entità, selezionando una singola entità dal set.</span><span class="sxs-lookup"><span data-stu-id="550bb-126">`1` is an entity key, selecting a single entity from the set.</span></span>
- <span data-ttu-id="550bb-127">`Supplier` è una proprietà di navigazione che seleziona un'entità correlata.</span><span class="sxs-lookup"><span data-stu-id="550bb-127">`Supplier` is a navigation property that selects a related entity.</span></span>

<span data-ttu-id="550bb-128">Questo percorso preleva quindi il fornitore del prodotto 1.</span><span class="sxs-lookup"><span data-stu-id="550bb-128">So this path picks out the supplier of product 1.</span></span>

> [!NOTE]
> <span data-ttu-id="550bb-129">I segmenti di percorso OData non corrispondono sempre ai segmenti URI.</span><span class="sxs-lookup"><span data-stu-id="550bb-129">OData path segments do not always correspond to URI segments.</span></span> <span data-ttu-id="550bb-130">Ad esempio, "1" viene considerato un segmento di percorso.</span><span class="sxs-lookup"><span data-stu-id="550bb-130">For example, "1" is considered a path segment.</span></span>

<span data-ttu-id="550bb-131">**Nomi del controller.**</span><span class="sxs-lookup"><span data-stu-id="550bb-131">**Controller Names.**</span></span> <span data-ttu-id="550bb-132">Il nome del controller viene sempre derivato dal set di entità alla radice del percorso della risorsa.</span><span class="sxs-lookup"><span data-stu-id="550bb-132">The controller name is always derived from the entity set at the root of the resource path.</span></span> <span data-ttu-id="550bb-133">Se, ad esempio, il percorso della risorsa è `/Products(1)/Supplier`, l'API Web Cerca un controller denominato `ProductsController`.</span><span class="sxs-lookup"><span data-stu-id="550bb-133">For example, if the resource path is `/Products(1)/Supplier`, Web API looks for a controller named `ProductsController`.</span></span>

<span data-ttu-id="550bb-134">**Nomi delle azioni.**</span><span class="sxs-lookup"><span data-stu-id="550bb-134">**Action Names.**</span></span> <span data-ttu-id="550bb-135">I nomi delle azioni sono derivati dai segmenti di percorso più il modello EDM (Entity Data Model), come elencato nelle tabelle seguenti.</span><span class="sxs-lookup"><span data-stu-id="550bb-135">Action names are derived from the path segments plus the entity data model (EDM), as listed in the following tables.</span></span> <span data-ttu-id="550bb-136">In alcuni casi, sono disponibili due opzioni per il nome dell'azione.</span><span class="sxs-lookup"><span data-stu-id="550bb-136">In some cases, you have two choices for the action name.</span></span> <span data-ttu-id="550bb-137">Ad esempio, "Get" o &quot;GetProducts&quot;.</span><span class="sxs-lookup"><span data-stu-id="550bb-137">For example, "Get" or &quot;GetProducts&quot;.</span></span>

<span data-ttu-id="550bb-138">**Esecuzione di query sulle entità**</span><span class="sxs-lookup"><span data-stu-id="550bb-138">**Querying Entities**</span></span>

| <span data-ttu-id="550bb-139">Richiesta</span><span class="sxs-lookup"><span data-stu-id="550bb-139">Request</span></span> | <span data-ttu-id="550bb-140">URI di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-140">Example URI</span></span> | <span data-ttu-id="550bb-141">Nome dell'azione</span><span class="sxs-lookup"><span data-stu-id="550bb-141">Action Name</span></span> | <span data-ttu-id="550bb-142">Azione di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-142">Example Action</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="550bb-143">OTTENERE/EntitySet</span><span class="sxs-lookup"><span data-stu-id="550bb-143">GET /entityset</span></span> | <span data-ttu-id="550bb-144">/Products</span><span class="sxs-lookup"><span data-stu-id="550bb-144">/Products</span></span> | <span data-ttu-id="550bb-145">GetEntitySet o Get</span><span class="sxs-lookup"><span data-stu-id="550bb-145">GetEntitySet or Get</span></span> | <span data-ttu-id="550bb-146">GetProducts</span><span class="sxs-lookup"><span data-stu-id="550bb-146">GetProducts</span></span> |
| <span data-ttu-id="550bb-147">OTTENERE/EntitySet (chiave)</span><span class="sxs-lookup"><span data-stu-id="550bb-147">GET /entityset(key)</span></span> | <span data-ttu-id="550bb-148">/Products (1)</span><span class="sxs-lookup"><span data-stu-id="550bb-148">/Products(1)</span></span> | <span data-ttu-id="550bb-149">GetEntityType o Get</span><span class="sxs-lookup"><span data-stu-id="550bb-149">GetEntityType or Get</span></span> | <span data-ttu-id="550bb-150">GetProduct</span><span class="sxs-lookup"><span data-stu-id="550bb-150">GetProduct</span></span> |
| <span data-ttu-id="550bb-151">OTTENERE/EntitySet (Key)/Cast</span><span class="sxs-lookup"><span data-stu-id="550bb-151">GET /entityset(key)/cast</span></span> | <span data-ttu-id="550bb-152">/Products (1)/Models.Book</span><span class="sxs-lookup"><span data-stu-id="550bb-152">/Products(1)/Models.Book</span></span> | <span data-ttu-id="550bb-153">GetEntityType o Get</span><span class="sxs-lookup"><span data-stu-id="550bb-153">GetEntityType or Get</span></span> | <span data-ttu-id="550bb-154">GetBook</span><span class="sxs-lookup"><span data-stu-id="550bb-154">GetBook</span></span> |

<span data-ttu-id="550bb-155">Per altre informazioni, vedere [creare un endpoint OData](odata-v3/creating-an-odata-endpoint.md)di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="550bb-155">For more information, see [Create a Read-Only OData Endpoint](odata-v3/creating-an-odata-endpoint.md).</span></span>

<span data-ttu-id="550bb-156">**Creazione, aggiornamento ed eliminazione di entità**</span><span class="sxs-lookup"><span data-stu-id="550bb-156">**Creating, Updating, and Deleting Entities**</span></span>

| <span data-ttu-id="550bb-157">Richiesta</span><span class="sxs-lookup"><span data-stu-id="550bb-157">Request</span></span> | <span data-ttu-id="550bb-158">URI di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-158">Example URI</span></span> | <span data-ttu-id="550bb-159">Nome dell'azione</span><span class="sxs-lookup"><span data-stu-id="550bb-159">Action Name</span></span> | <span data-ttu-id="550bb-160">Azione di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-160">Example Action</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="550bb-161">POST/EntitySet</span><span class="sxs-lookup"><span data-stu-id="550bb-161">POST /entityset</span></span> | <span data-ttu-id="550bb-162">/Products</span><span class="sxs-lookup"><span data-stu-id="550bb-162">/Products</span></span> | <span data-ttu-id="550bb-163">PostEntityType o post</span><span class="sxs-lookup"><span data-stu-id="550bb-163">PostEntityType or Post</span></span> | <span data-ttu-id="550bb-164">PostProduct</span><span class="sxs-lookup"><span data-stu-id="550bb-164">PostProduct</span></span> |
| <span data-ttu-id="550bb-165">Inserisci/EntitySet (chiave)</span><span class="sxs-lookup"><span data-stu-id="550bb-165">PUT /entityset(key)</span></span> | <span data-ttu-id="550bb-166">/Products (1)</span><span class="sxs-lookup"><span data-stu-id="550bb-166">/Products(1)</span></span> | <span data-ttu-id="550bb-167">PutEntityType o put</span><span class="sxs-lookup"><span data-stu-id="550bb-167">PutEntityType or Put</span></span> | <span data-ttu-id="550bb-168">PutProduct</span><span class="sxs-lookup"><span data-stu-id="550bb-168">PutProduct</span></span> |
| <span data-ttu-id="550bb-169">PUT/EntitySet (Key)/Cast</span><span class="sxs-lookup"><span data-stu-id="550bb-169">PUT /entityset(key)/cast</span></span> | <span data-ttu-id="550bb-170">/Products (1)/Models.Book</span><span class="sxs-lookup"><span data-stu-id="550bb-170">/Products(1)/Models.Book</span></span> | <span data-ttu-id="550bb-171">PutEntityType o put</span><span class="sxs-lookup"><span data-stu-id="550bb-171">PutEntityType or Put</span></span> | <span data-ttu-id="550bb-172">PutBook</span><span class="sxs-lookup"><span data-stu-id="550bb-172">PutBook</span></span> |
| <span data-ttu-id="550bb-173">PATCH/EntitySet (chiave)</span><span class="sxs-lookup"><span data-stu-id="550bb-173">PATCH /entityset(key)</span></span> | <span data-ttu-id="550bb-174">/Products (1)</span><span class="sxs-lookup"><span data-stu-id="550bb-174">/Products(1)</span></span> | <span data-ttu-id="550bb-175">PatchEntityType o patch</span><span class="sxs-lookup"><span data-stu-id="550bb-175">PatchEntityType or Patch</span></span> | <span data-ttu-id="550bb-176">PatchProduct</span><span class="sxs-lookup"><span data-stu-id="550bb-176">PatchProduct</span></span> |
| <span data-ttu-id="550bb-177">PATCH/EntitySet (Key)/Cast</span><span class="sxs-lookup"><span data-stu-id="550bb-177">PATCH /entityset(key)/cast</span></span> | <span data-ttu-id="550bb-178">/Products (1)/Models.Book</span><span class="sxs-lookup"><span data-stu-id="550bb-178">/Products(1)/Models.Book</span></span> | <span data-ttu-id="550bb-179">PatchEntityType o patch</span><span class="sxs-lookup"><span data-stu-id="550bb-179">PatchEntityType or Patch</span></span> | <span data-ttu-id="550bb-180">PatchBook</span><span class="sxs-lookup"><span data-stu-id="550bb-180">PatchBook</span></span> |
| <span data-ttu-id="550bb-181">Elimina/EntitySet (chiave)</span><span class="sxs-lookup"><span data-stu-id="550bb-181">DELETE /entityset(key)</span></span> | <span data-ttu-id="550bb-182">/Products (1)</span><span class="sxs-lookup"><span data-stu-id="550bb-182">/Products(1)</span></span> | <span data-ttu-id="550bb-183">DeleteEntityType o DELETE</span><span class="sxs-lookup"><span data-stu-id="550bb-183">DeleteEntityType or Delete</span></span> | <span data-ttu-id="550bb-184">DeleteProduct</span><span class="sxs-lookup"><span data-stu-id="550bb-184">DeleteProduct</span></span> |
| <span data-ttu-id="550bb-185">Elimina/EntitySet (chiave)/Cast</span><span class="sxs-lookup"><span data-stu-id="550bb-185">DELETE /entityset(key)/cast</span></span> | <span data-ttu-id="550bb-186">/Products (1)/Models.Book</span><span class="sxs-lookup"><span data-stu-id="550bb-186">/Products(1)/Models.Book</span></span> | <span data-ttu-id="550bb-187">DeleteEntityType o DELETE</span><span class="sxs-lookup"><span data-stu-id="550bb-187">DeleteEntityType or Delete</span></span> | <span data-ttu-id="550bb-188">DeleteBook</span><span class="sxs-lookup"><span data-stu-id="550bb-188">DeleteBook</span></span> |

<span data-ttu-id="550bb-189">**Esecuzione di query su una proprietà di navigazione**</span><span class="sxs-lookup"><span data-stu-id="550bb-189">**Querying a Navigation Property**</span></span>

| <span data-ttu-id="550bb-190">Richiesta</span><span class="sxs-lookup"><span data-stu-id="550bb-190">Request</span></span> | <span data-ttu-id="550bb-191">URI di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-191">Example URI</span></span> | <span data-ttu-id="550bb-192">Nome dell'azione</span><span class="sxs-lookup"><span data-stu-id="550bb-192">Action Name</span></span> | <span data-ttu-id="550bb-193">Azione di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-193">Example Action</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="550bb-194">OTTENERE/EntitySet (Key)/Navigation</span><span class="sxs-lookup"><span data-stu-id="550bb-194">GET /entityset(key)/navigation</span></span> | <span data-ttu-id="550bb-195">/Products (1)/Supplier</span><span class="sxs-lookup"><span data-stu-id="550bb-195">/Products(1)/Supplier</span></span> | <span data-ttu-id="550bb-196">GetNavigationFromEntityType o getnavigation</span><span class="sxs-lookup"><span data-stu-id="550bb-196">GetNavigationFromEntityType or GetNavigation</span></span> | <span data-ttu-id="550bb-197">GetSupplierFromProduct</span><span class="sxs-lookup"><span data-stu-id="550bb-197">GetSupplierFromProduct</span></span> |
| <span data-ttu-id="550bb-198">OTTENERE/EntitySet (Key)/Cast/Navigation</span><span class="sxs-lookup"><span data-stu-id="550bb-198">GET /entityset(key)/cast/navigation</span></span> | <span data-ttu-id="550bb-199">/Products (1)/Models.Book/Author</span><span class="sxs-lookup"><span data-stu-id="550bb-199">/Products(1)/Models.Book/Author</span></span> | <span data-ttu-id="550bb-200">GetNavigationFromEntityType o getnavigation</span><span class="sxs-lookup"><span data-stu-id="550bb-200">GetNavigationFromEntityType or GetNavigation</span></span> | <span data-ttu-id="550bb-201">GetAuthorFromBook</span><span class="sxs-lookup"><span data-stu-id="550bb-201">GetAuthorFromBook</span></span> |

<span data-ttu-id="550bb-202">Per ulteriori informazioni, vedere [utilizzo delle relazioni tra entità](odata-v3/working-with-entity-relations.md).</span><span class="sxs-lookup"><span data-stu-id="550bb-202">For more information, see [Working with Entity Relations](odata-v3/working-with-entity-relations.md).</span></span>

<span data-ttu-id="550bb-203">**Creazione ed eliminazione di collegamenti**</span><span class="sxs-lookup"><span data-stu-id="550bb-203">**Creating and Deleting Links**</span></span>

| <span data-ttu-id="550bb-204">Richiesta</span><span class="sxs-lookup"><span data-stu-id="550bb-204">Request</span></span> | <span data-ttu-id="550bb-205">URI di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-205">Example URI</span></span> | <span data-ttu-id="550bb-206">Nome dell'azione</span><span class="sxs-lookup"><span data-stu-id="550bb-206">Action Name</span></span> |
| --- | --- | --- |
| <span data-ttu-id="550bb-207">POST /entityset(key)/$links/navigation</span><span class="sxs-lookup"><span data-stu-id="550bb-207">POST /entityset(key)/$links/navigation</span></span> | <span data-ttu-id="550bb-208">/Products (1)/$links/Supplier</span><span class="sxs-lookup"><span data-stu-id="550bb-208">/Products(1)/$links/Supplier</span></span> | <span data-ttu-id="550bb-209">CreateLink</span><span class="sxs-lookup"><span data-stu-id="550bb-209">CreateLink</span></span> |
| <span data-ttu-id="550bb-210">PUT /entityset(key)/$links/navigation</span><span class="sxs-lookup"><span data-stu-id="550bb-210">PUT /entityset(key)/$links/navigation</span></span> | <span data-ttu-id="550bb-211">/Products (1)/$links/Supplier</span><span class="sxs-lookup"><span data-stu-id="550bb-211">/Products(1)/$links/Supplier</span></span> | <span data-ttu-id="550bb-212">CreateLink</span><span class="sxs-lookup"><span data-stu-id="550bb-212">CreateLink</span></span> |
| <span data-ttu-id="550bb-213">DELETE /entityset(key)/$links/navigation</span><span class="sxs-lookup"><span data-stu-id="550bb-213">DELETE /entityset(key)/$links/navigation</span></span> | <span data-ttu-id="550bb-214">/Products (1)/$links/Supplier</span><span class="sxs-lookup"><span data-stu-id="550bb-214">/Products(1)/$links/Supplier</span></span> | <span data-ttu-id="550bb-215">DeleteLink</span><span class="sxs-lookup"><span data-stu-id="550bb-215">DeleteLink</span></span> |
| <span data-ttu-id="550bb-216">DELETE /entityset(key)/$links/navigation(relatedKey)</span><span class="sxs-lookup"><span data-stu-id="550bb-216">DELETE /entityset(key)/$links/navigation(relatedKey)</span></span> | <span data-ttu-id="550bb-217">/Products/(1)/$links/Suppliers(1)</span><span class="sxs-lookup"><span data-stu-id="550bb-217">/Products/(1)/$links/Suppliers(1)</span></span> | <span data-ttu-id="550bb-218">DeleteLink</span><span class="sxs-lookup"><span data-stu-id="550bb-218">DeleteLink</span></span> |

<span data-ttu-id="550bb-219">Per ulteriori informazioni, vedere [utilizzo delle relazioni tra entità](odata-v3/working-with-entity-relations.md).</span><span class="sxs-lookup"><span data-stu-id="550bb-219">For more information, see [Working with Entity Relations](odata-v3/working-with-entity-relations.md).</span></span>

<span data-ttu-id="550bb-220">**Proprietà**</span><span class="sxs-lookup"><span data-stu-id="550bb-220">**Properties**</span></span>

<span data-ttu-id="550bb-221">*Richiede l'API Web 2*</span><span class="sxs-lookup"><span data-stu-id="550bb-221">*Requires Web API 2*</span></span>

| <span data-ttu-id="550bb-222">Richiesta</span><span class="sxs-lookup"><span data-stu-id="550bb-222">Request</span></span> | <span data-ttu-id="550bb-223">URI di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-223">Example URI</span></span> | <span data-ttu-id="550bb-224">Nome dell'azione</span><span class="sxs-lookup"><span data-stu-id="550bb-224">Action Name</span></span> | <span data-ttu-id="550bb-225">Azione di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-225">Example Action</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="550bb-226">OTTENERE/EntitySet (Key)/property</span><span class="sxs-lookup"><span data-stu-id="550bb-226">GET /entityset(key)/property</span></span> | <span data-ttu-id="550bb-227">/Products (1)/Name</span><span class="sxs-lookup"><span data-stu-id="550bb-227">/Products(1)/Name</span></span> | <span data-ttu-id="550bb-228">GetPropertyFromEntityType o GetProperty</span><span class="sxs-lookup"><span data-stu-id="550bb-228">GetPropertyFromEntityType or GetProperty</span></span> | <span data-ttu-id="550bb-229">GetNameFromProduct</span><span class="sxs-lookup"><span data-stu-id="550bb-229">GetNameFromProduct</span></span> |
| <span data-ttu-id="550bb-230">OTTENERE/EntitySet (Key)/Cast/Property</span><span class="sxs-lookup"><span data-stu-id="550bb-230">GET /entityset(key)/cast/property</span></span> | <span data-ttu-id="550bb-231">/Products (1)/Models.Book/Author</span><span class="sxs-lookup"><span data-stu-id="550bb-231">/Products(1)/Models.Book/Author</span></span> | <span data-ttu-id="550bb-232">GetPropertyFromEntityType o GetProperty</span><span class="sxs-lookup"><span data-stu-id="550bb-232">GetPropertyFromEntityType or GetProperty</span></span> | <span data-ttu-id="550bb-233">GetTitleFromBook</span><span class="sxs-lookup"><span data-stu-id="550bb-233">GetTitleFromBook</span></span> |

<span data-ttu-id="550bb-234">**Actions**</span><span class="sxs-lookup"><span data-stu-id="550bb-234">**Actions**</span></span>

| <span data-ttu-id="550bb-235">Richiesta</span><span class="sxs-lookup"><span data-stu-id="550bb-235">Request</span></span> | <span data-ttu-id="550bb-236">URI di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-236">Example URI</span></span> | <span data-ttu-id="550bb-237">Nome dell'azione</span><span class="sxs-lookup"><span data-stu-id="550bb-237">Action Name</span></span> | <span data-ttu-id="550bb-238">Azione di esempio</span><span class="sxs-lookup"><span data-stu-id="550bb-238">Example Action</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="550bb-239">POST/EntitySet (Key)/Action</span><span class="sxs-lookup"><span data-stu-id="550bb-239">POST /entityset(key)/action</span></span> | <span data-ttu-id="550bb-240">/Products (1)/rate</span><span class="sxs-lookup"><span data-stu-id="550bb-240">/Products(1)/Rate</span></span> | <span data-ttu-id="550bb-241">ActionNameOnEntityType o actionName</span><span class="sxs-lookup"><span data-stu-id="550bb-241">ActionNameOnEntityType or ActionName</span></span> | <span data-ttu-id="550bb-242">RateOnProduct</span><span class="sxs-lookup"><span data-stu-id="550bb-242">RateOnProduct</span></span> |
| <span data-ttu-id="550bb-243">POST/EntitySet (Key)/Cast/Action</span><span class="sxs-lookup"><span data-stu-id="550bb-243">POST /entityset(key)/cast/action</span></span> | <span data-ttu-id="550bb-244">/Products (1)/Models.Book/CheckOut</span><span class="sxs-lookup"><span data-stu-id="550bb-244">/Products(1)/Models.Book/CheckOut</span></span> | <span data-ttu-id="550bb-245">ActionNameOnEntityType o actionName</span><span class="sxs-lookup"><span data-stu-id="550bb-245">ActionNameOnEntityType or ActionName</span></span> | <span data-ttu-id="550bb-246">CheckOutOnBook</span><span class="sxs-lookup"><span data-stu-id="550bb-246">CheckOutOnBook</span></span> |

<span data-ttu-id="550bb-247">Per ulteriori informazioni, vedere [azioni OData](odata-v3/odata-actions.md).</span><span class="sxs-lookup"><span data-stu-id="550bb-247">For more information, see [OData Actions](odata-v3/odata-actions.md).</span></span>

<span data-ttu-id="550bb-248">**Firme del metodo**</span><span class="sxs-lookup"><span data-stu-id="550bb-248">**Method Signatures**</span></span>

<span data-ttu-id="550bb-249">Di seguito sono riportate alcune regole per le firme del metodo:</span><span class="sxs-lookup"><span data-stu-id="550bb-249">Here are some rules for the method signatures:</span></span>

- <span data-ttu-id="550bb-250">Se il percorso contiene una chiave, l'azione deve avere un parametro denominato *Key*.</span><span class="sxs-lookup"><span data-stu-id="550bb-250">If the path contains a key, the action should have a parameter named *key*.</span></span>
- <span data-ttu-id="550bb-251">Se il percorso contiene una chiave in una proprietà di navigazione, l'azione deve avere un parametro denominato *relatedKey*.</span><span class="sxs-lookup"><span data-stu-id="550bb-251">If the path contains a key into a navigation property, the action should have a parameter named *relatedKey*.</span></span>
- <span data-ttu-id="550bb-252">Decorare i parametri *Key* e *relatedKey* con il parametro **[FromODataUri]** .</span><span class="sxs-lookup"><span data-stu-id="550bb-252">Decorate *key* and *relatedKey* parameters with the **[FromODataUri]** parameter.</span></span>
- <span data-ttu-id="550bb-253">Le richieste POST e PUT accettano un parametro del tipo di entità.</span><span class="sxs-lookup"><span data-stu-id="550bb-253">POST and PUT requests take a parameter of the entity type.</span></span>
- <span data-ttu-id="550bb-254">Le richieste PATCH accettano un parametro di tipo **Delta&lt;t&gt;** , dove *t* è il tipo di entità.</span><span class="sxs-lookup"><span data-stu-id="550bb-254">PATCH requests take a parameter of type **Delta&lt;T&gt;**, where *T* is the entity type.</span></span>

<span data-ttu-id="550bb-255">Come riferimento, di seguito è riportato un esempio che mostra le firme del metodo per ogni convenzione di routing OData incorporata.</span><span class="sxs-lookup"><span data-stu-id="550bb-255">For reference, here is an example that shows method signatures for every built-in OData routing convention.</span></span>

[!code-csharp[Main](odata-routing-conventions/samples/sample1.cs)]

<a id="custom"></a>
## <a name="custom-routing-conventions"></a><span data-ttu-id="550bb-256">Convenzioni di routing personalizzate</span><span class="sxs-lookup"><span data-stu-id="550bb-256">Custom Routing Conventions</span></span>

<span data-ttu-id="550bb-257">Attualmente, le convenzioni predefinite non coprono tutti i possibili URI OData.</span><span class="sxs-lookup"><span data-stu-id="550bb-257">Currently the built-in conventions do not cover all possible OData URIs.</span></span> <span data-ttu-id="550bb-258">È possibile aggiungere nuove convenzioni implementando l'interfaccia **IODataRoutingConvention** .</span><span class="sxs-lookup"><span data-stu-id="550bb-258">You can add new conventions by implementing the **IODataRoutingConvention** interface.</span></span> <span data-ttu-id="550bb-259">Questa interfaccia dispone di due metodi:</span><span class="sxs-lookup"><span data-stu-id="550bb-259">This interface has two methods:</span></span>

[!code-csharp[Main](odata-routing-conventions/samples/sample2.cs)]

- <span data-ttu-id="550bb-260">**SelectController** restituisce il nome del controller.</span><span class="sxs-lookup"><span data-stu-id="550bb-260">**SelectController** returns the name of the controller.</span></span>
- <span data-ttu-id="550bb-261">**SelectAction** restituisce il nome dell'azione.</span><span class="sxs-lookup"><span data-stu-id="550bb-261">**SelectAction** returns the name of the action.</span></span>

<span data-ttu-id="550bb-262">Per entrambi i metodi, se la convenzione non si applica alla richiesta, il metodo deve restituire null.</span><span class="sxs-lookup"><span data-stu-id="550bb-262">For both methods, if the convention does not apply to that request, the method should return null.</span></span>

<span data-ttu-id="550bb-263">Il parametro **ODataPath** rappresenta il percorso della risorsa OData analizzato.</span><span class="sxs-lookup"><span data-stu-id="550bb-263">The **ODataPath** parameter represents the parsed OData resource path.</span></span> <span data-ttu-id="550bb-264">Contiene un elenco di istanze di **[ODataPathSegment](https://msdn.microsoft.com/library/system.web.http.odata.routing.odatapathsegment.aspx)** , una per ogni segmento del percorso della risorsa.</span><span class="sxs-lookup"><span data-stu-id="550bb-264">It contains a list of **[ODataPathSegment](https://msdn.microsoft.com/library/system.web.http.odata.routing.odatapathsegment.aspx)** instances, one for each segment of the resource path.</span></span> <span data-ttu-id="550bb-265">**ODataPathSegment** è una classe astratta. ogni tipo di segmento è rappresentato da una classe che deriva da **ODataPathSegment**.</span><span class="sxs-lookup"><span data-stu-id="550bb-265">**ODataPathSegment** is an abstract class; each segment type is represented by a class that derives from **ODataPathSegment**.</span></span>

<span data-ttu-id="550bb-266">La proprietà **ODataPath. TemplatePath** è una stringa che rappresenta la concatenazione di tutti i segmenti di percorso.</span><span class="sxs-lookup"><span data-stu-id="550bb-266">The **ODataPath.TemplatePath** property is a string that represents the concatenation all of the path segments.</span></span> <span data-ttu-id="550bb-267">Se, ad esempio, l'URI è `/Products(1)/Supplier`, il modello di percorso sarà &quot;~/EntitySet/Key/Navigation&quot;.</span><span class="sxs-lookup"><span data-stu-id="550bb-267">For example, if the URI is `/Products(1)/Supplier`, the path template is &quot;~/entityset/key/navigation&quot;.</span></span> <span data-ttu-id="550bb-268">Si noti che i segmenti non corrispondono direttamente ai segmenti URI.</span><span class="sxs-lookup"><span data-stu-id="550bb-268">Notice that the segments don't correspond directly to URI segments.</span></span> <span data-ttu-id="550bb-269">La chiave di entità (1), ad esempio, è rappresentata come **ODataPathSegment**.</span><span class="sxs-lookup"><span data-stu-id="550bb-269">For example, the entity key (1) is represented as its own **ODataPathSegment**.</span></span>

<span data-ttu-id="550bb-270">In genere, un'implementazione di **IODataRoutingConvention** esegue le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="550bb-270">Typically, an implementation of **IODataRoutingConvention** does the following:</span></span>

1. <span data-ttu-id="550bb-271">Confrontare il modello di percorso per verificare se la convenzione si applica alla richiesta corrente.</span><span class="sxs-lookup"><span data-stu-id="550bb-271">Compare the path template to see if this convention applies to the current request.</span></span> <span data-ttu-id="550bb-272">Se non è applicabile, restituisce null.</span><span class="sxs-lookup"><span data-stu-id="550bb-272">If it does not apply, return null.</span></span>
2. <span data-ttu-id="550bb-273">Se si applica la convenzione, utilizzare le proprietà delle istanze di **ODataPathSegment** per derivare i nomi dei controller e delle azioni.</span><span class="sxs-lookup"><span data-stu-id="550bb-273">If the convention applies, use properties of the **ODataPathSegment** instances to derive controller and action names.</span></span>
3. <span data-ttu-id="550bb-274">Per le azioni, aggiungere tutti i valori al dizionario di route che devono essere associati ai parametri di azione (in genere chiavi di entità).</span><span class="sxs-lookup"><span data-stu-id="550bb-274">For actions, add any values to the route dictionary that should bind to the action parameters (typically entity keys).</span></span>

<span data-ttu-id="550bb-275">Esaminiamo un esempio specifico.</span><span class="sxs-lookup"><span data-stu-id="550bb-275">Let's look at a specific example.</span></span> <span data-ttu-id="550bb-276">Le convenzioni di routing predefinite non supportano l'indicizzazione in una raccolta di navigazione.</span><span class="sxs-lookup"><span data-stu-id="550bb-276">The built-in routing conventions do not support indexing into a navigation collection.</span></span> <span data-ttu-id="550bb-277">In altre parole, non esiste alcuna convenzione per gli URI come il seguente:</span><span class="sxs-lookup"><span data-stu-id="550bb-277">In other words, there is no convention for URIs like the following:</span></span>

[!code-javascript[Main](odata-routing-conventions/samples/sample3.js)]

<span data-ttu-id="550bb-278">Ecco una convenzione di routing personalizzata per gestire questo tipo di query.</span><span class="sxs-lookup"><span data-stu-id="550bb-278">Here is a custom routing convention to handle this type of query.</span></span>

[!code-csharp[Main](odata-routing-conventions/samples/sample4.cs)]

<span data-ttu-id="550bb-279">Note:</span><span class="sxs-lookup"><span data-stu-id="550bb-279">Notes:</span></span>

1. <span data-ttu-id="550bb-280">Derivano da **EntitySetRoutingConvention**, perché il metodo **SelectController** in tale classe è appropriato per questa nuova convenzione di routing.</span><span class="sxs-lookup"><span data-stu-id="550bb-280">I derive from **EntitySetRoutingConvention**, because the **SelectController** method in that class is appropriate for this new routing convention.</span></span> <span data-ttu-id="550bb-281">Ciò significa che non è necessario implementare nuovamente **SelectController**.</span><span class="sxs-lookup"><span data-stu-id="550bb-281">That means I don't need to re-implement **SelectController**.</span></span>
2. <span data-ttu-id="550bb-282">La convenzione si applica solo alle richieste GET e solo quando il modello di percorso è &quot;~/EntitySet/Key/Navigation/key&quot;.</span><span class="sxs-lookup"><span data-stu-id="550bb-282">The convention applies only to GET requests, and only when the path template is &quot;~/entityset/key/navigation/key&quot;.</span></span>
3. <span data-ttu-id="550bb-283">Il nome dell'azione è &quot;Get {EntityType}&quot;, dove *{EntityType}* è il tipo della raccolta di navigazione.</span><span class="sxs-lookup"><span data-stu-id="550bb-283">The action name is &quot;Get{EntityType}&quot;, where *{EntityType}* is the type of the navigation collection.</span></span> <span data-ttu-id="550bb-284">Ad esempio, &quot;&quot;getsupplier.</span><span class="sxs-lookup"><span data-stu-id="550bb-284">For example, &quot;GetSupplier&quot;.</span></span> <span data-ttu-id="550bb-285">È possibile usare qualsiasi convenzione di denominazione che si &#8212; voglia semplicemente verificare che le azioni del controller corrispondano.</span><span class="sxs-lookup"><span data-stu-id="550bb-285">You can use any naming convention that you like &#8212; just make sure your controller actions match.</span></span>
4. <span data-ttu-id="550bb-286">L'azione accetta due parametri denominati *Key* e *relatedKey*.</span><span class="sxs-lookup"><span data-stu-id="550bb-286">The action takes two parameters named *key* and *relatedKey*.</span></span> <span data-ttu-id="550bb-287">Per un elenco di nomi di parametro predefiniti, vedere [ODataRouteConstants](https://msdn.microsoft.com/library/system.web.http.odata.routing.odatarouteconstants.aspx).</span><span class="sxs-lookup"><span data-stu-id="550bb-287">(For a list of some predefined parameter names, see [ODataRouteConstants](https://msdn.microsoft.com/library/system.web.http.odata.routing.odatarouteconstants.aspx).)</span></span>

<span data-ttu-id="550bb-288">Il passaggio successivo consiste nell'aggiungere la nuova convenzione all'elenco delle convenzioni di routing.</span><span class="sxs-lookup"><span data-stu-id="550bb-288">The next step is adding the new convention to the list of routing conventions.</span></span> <span data-ttu-id="550bb-289">Questo errore si verifica durante la configurazione, come illustrato nel codice seguente:</span><span class="sxs-lookup"><span data-stu-id="550bb-289">This happens during configuration, as shown in the following code:</span></span>

[!code-csharp[Main](odata-routing-conventions/samples/sample5.cs)]

<span data-ttu-id="550bb-290">Di seguito sono riportate alcune altre convenzioni di routing di esempio utili per studiare:</span><span class="sxs-lookup"><span data-stu-id="550bb-290">Here are some other sample routing conventions that be useful to study:</span></span>

- [<span data-ttu-id="550bb-291">CompositeKeyRoutingConvention</span><span class="sxs-lookup"><span data-stu-id="550bb-291">CompositeKeyRoutingConvention</span></span>](http://aspnet.codeplex.com/sourcecontrol/latest#Samples/WebApi/ODataCompositeKeySample/ODataCompositeKeySample/Extensions/CompositeKeyRoutingConvention.cs)
- [<span data-ttu-id="550bb-292">CustomNavigationRoutingConvention</span><span class="sxs-lookup"><span data-stu-id="550bb-292">CustomNavigationRoutingConvention</span></span>](http://aspnet.codeplex.com/sourcecontrol/latest#Samples/WebApi/ODataServiceSample/ODataService/Extensions/CustomNavigationRoutingConvention.cs)
- [<span data-ttu-id="550bb-293">NonBindableActionRoutingConvention</span><span class="sxs-lookup"><span data-stu-id="550bb-293">NonBindableActionRoutingConvention</span></span>](http://aspnet.codeplex.com/sourcecontrol/latest#Samples/WebApi/ODataActionsSample/ODataActionsSample/NonBindableActionRoutingConvention.cs)
- [<span data-ttu-id="550bb-294">ODataVersionRouteConstraint</span><span class="sxs-lookup"><span data-stu-id="550bb-294">ODataVersionRouteConstraint</span></span>](http://aspnet.codeplex.com/sourcecontrol/latest#Samples/WebApi/ODataVersioningSample/ODataVersioningSample/Extensions/ODataVersionRouteConstraint.cs)

<span data-ttu-id="550bb-295">Naturalmente, l'API Web è open source, quindi è possibile visualizzare il [codice sorgente](http://aspnetwebstack.codeplex.com/) per le convenzioni di routing predefinite.</span><span class="sxs-lookup"><span data-stu-id="550bb-295">And of course Web API itself is open-source, so you can see the [source code](http://aspnetwebstack.codeplex.com/) for the built-in routing conventions.</span></span> <span data-ttu-id="550bb-296">Questi vengono definiti nello spazio dei nomi **System. Web. http. OData. Routing. Conventions** .</span><span class="sxs-lookup"><span data-stu-id="550bb-296">These are defined in the **System.Web.Http.OData.Routing.Conventions** namespace.</span></span>
