---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: 'Introduzione a ASP.NET Web Pages: immissione di dati del Database tramite moduli | Microsoft Docs'
author: Rick-Anderson
description: Questa esercitazione illustra come creare un modulo di immissione e quindi immettere i dati che si ottengono dal form in una tabella di database quando si usa ASP.NET Web Pages (...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: b9354a7b97a7df9020a681f709e16a92650cfcf0
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2019
ms.locfileid: "65132965"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="a69ae-103">Introduzione a ASP.NET Web Pages: immissione di dati del Database tramite moduli</span><span class="sxs-lookup"><span data-stu-id="a69ae-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="a69ae-104">da [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="a69ae-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="a69ae-105">Questa esercitazione illustra come creare un modulo di immissione e quindi immettere i dati che si ottengono dal form in una tabella di database quando si usa ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="a69ae-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="a69ae-106">Si presuppone di aver completato la serie attraverso [nozioni di base di form HTML in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="a69ae-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="a69ae-107">Che cosa si apprenderà come:</span><span class="sxs-lookup"><span data-stu-id="a69ae-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="a69ae-108">Informazioni su come elaborare i form di immissione.</span><span class="sxs-lookup"><span data-stu-id="a69ae-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="a69ae-109">Come aggiungere dati (inserimento) in un database.</span><span class="sxs-lookup"><span data-stu-id="a69ae-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="a69ae-110">Come assicurarsi che gli utenti avere immesso un valore obbligatorio in un form (come convalida dell'input utente).</span><span class="sxs-lookup"><span data-stu-id="a69ae-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="a69ae-111">Come visualizzare gli errori di convalida.</span><span class="sxs-lookup"><span data-stu-id="a69ae-111">How to display validation errors.</span></span>
> - <span data-ttu-id="a69ae-112">Viene descritto come passare a un'altra pagina dalla pagina corrente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="a69ae-113">Le funzionalità/tecnologie illustrate:</span><span class="sxs-lookup"><span data-stu-id="a69ae-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="a69ae-114">Metodo `Database.Execute` .</span><span class="sxs-lookup"><span data-stu-id="a69ae-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="a69ae-115">Il codice SQL `Insert Into` istruzione</span><span class="sxs-lookup"><span data-stu-id="a69ae-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="a69ae-116">Il `Validation` helper.</span><span class="sxs-lookup"><span data-stu-id="a69ae-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="a69ae-117">Metodo `Response.Redirect` .</span><span class="sxs-lookup"><span data-stu-id="a69ae-117">The `Response.Redirect` method.</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="a69ae-118">Scopo dell'esercitazione</span><span class="sxs-lookup"><span data-stu-id="a69ae-118">What You'll Build</span></span>

<span data-ttu-id="a69ae-119">Nell'esercitazione precedente che è stato illustrato come creare un database, immesso i dati del database mediante la modifica del database direttamente in WebMatrix, utilizza il **Database** dell'area di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a69ae-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="a69ae-120">Nella maggior parte delle App, che non è un modo pratico per inserire dati nel database, tuttavia.</span><span class="sxs-lookup"><span data-stu-id="a69ae-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="a69ae-121">Quindi, in questa esercitazione si creerà un'interfaccia basata sul web che consente a chiunque immettere i dati e salvarlo nel database.</span><span class="sxs-lookup"><span data-stu-id="a69ae-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="a69ae-122">Si creerà una pagina in cui è possibile immettere nuovi film.</span><span class="sxs-lookup"><span data-stu-id="a69ae-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="a69ae-123">La pagina conterrà un modulo di immissione contenente campi (caselle di testo) in cui è possibile immettere un titolo del film, il genere e anno.</span><span class="sxs-lookup"><span data-stu-id="a69ae-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="a69ae-124">La pagina avrà un aspetto simile a questa pagina:</span><span class="sxs-lookup"><span data-stu-id="a69ae-124">The page will look like this page:</span></span>

!['Aggiungi film' pagina nel browser](entering-data/_static/image1.png)

<span data-ttu-id="a69ae-126">Le caselle di testo saranno in formato HTML `<input>` elementi che avrà un aspetto quali questo markup:</span><span class="sxs-lookup"><span data-stu-id="a69ae-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="a69ae-127">Creazione del Form base voce</span><span class="sxs-lookup"><span data-stu-id="a69ae-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="a69ae-128">Creare una pagina denominata *AddMovie.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a69ae-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="a69ae-129">Sostituire quello presente nel file con il markup seguente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="a69ae-130">Sovrascrivere tutti gli elementi; a breve si aggiungerà un blocco di codice nella parte superiore.</span><span class="sxs-lookup"><span data-stu-id="a69ae-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="a69ae-131">Questo esempio viene illustrato tipici HTML per la creazione di un form.</span><span class="sxs-lookup"><span data-stu-id="a69ae-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="a69ae-132">Usa `<input>` elementi per le caselle di testo e per il pulsante Invia.</span><span class="sxs-lookup"><span data-stu-id="a69ae-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="a69ae-133">Le didascalie per le caselle di testo vengono create tramite standard `<label>` elementi.</span><span class="sxs-lookup"><span data-stu-id="a69ae-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="a69ae-134">Il `<fieldset>` e `<legend>` elementi inserire una casella nice intorno al form.</span><span class="sxs-lookup"><span data-stu-id="a69ae-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="a69ae-135">Si noti che in questa pagina, il `<form>` elemento utilizza `post` come valore per il `method` attributo.</span><span class="sxs-lookup"><span data-stu-id="a69ae-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="a69ae-136">Nell'esercitazione precedente, è stato creato un modulo che utilizzato il `get` (metodo).</span><span class="sxs-lookup"><span data-stu-id="a69ae-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="a69ae-137">Che è stata corretta, perché anche se i valori per il server di inviare il modulo, la richiesta non è stata apportata alcuna modifica.</span><span class="sxs-lookup"><span data-stu-id="a69ae-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="a69ae-138">Tutto ha sempre fatto è recuperare dati in modi diversi.</span><span class="sxs-lookup"><span data-stu-id="a69ae-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="a69ae-139">Tuttavia, in questa pagina si *verranno* apportare modifiche, ovvero che si intende aggiungere nuovi record di database.</span><span class="sxs-lookup"><span data-stu-id="a69ae-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="a69ae-140">Pertanto, è consigliabile usare questo modulo la `post` (metodo).</span><span class="sxs-lookup"><span data-stu-id="a69ae-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="a69ae-141">(Per altre informazioni sulla differenza tra `GET` e `POST` operazioni, vedere la[GET, POST e HTTP verbo Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) intestazione laterale nell'esercitazione precedente.)</span><span class="sxs-lookup"><span data-stu-id="a69ae-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="a69ae-142">Si noti che ogni casella di testo ha un `name` elemento (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="a69ae-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="a69ae-143">Come illustrato nell'esercitazione precedente, questi nomi sono importanti perché sono necessarie tali nomi pertanto è possibile ottenere l'input dell'utente in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="a69ae-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="a69ae-144">È possibile usare qualsiasi nome.</span><span class="sxs-lookup"><span data-stu-id="a69ae-144">You can use any names.</span></span> <span data-ttu-id="a69ae-145">È utile usare nomi significativi che consentono di ricordare i dati che si sta lavorando.</span><span class="sxs-lookup"><span data-stu-id="a69ae-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="a69ae-146">Il `value` attributo della ognuno `<input>` elemento contiene un frammento di codice Razor (ad esempio, `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="a69ae-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="a69ae-147">Dopo aver inviato il modulo è stato illustrato una versione di questo espediente nell'esercitazione precedente per mantenere il valore immesso nella casella di testo (se presente).</span><span class="sxs-lookup"><span data-stu-id="a69ae-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="a69ae-148">Ottenere i valori del modulo</span><span class="sxs-lookup"><span data-stu-id="a69ae-148">Getting the Form Values</span></span>

<span data-ttu-id="a69ae-149">Aggiungere quindi codice che elabora il modulo.</span><span class="sxs-lookup"><span data-stu-id="a69ae-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="a69ae-150">Nella struttura, verranno eseguite le seguenti:</span><span class="sxs-lookup"><span data-stu-id="a69ae-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="a69ae-151">Controllare se la pagina viene registrata (è stato inviato).</span><span class="sxs-lookup"><span data-stu-id="a69ae-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="a69ae-152">Si desidera il codice venga eseguita solo quando gli utenti hanno scelto il pulsante, non quando viene eseguita prima di tutto la pagina.</span><span class="sxs-lookup"><span data-stu-id="a69ae-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="a69ae-153">Ottenere i valori immessi dall'utente nelle caselle di testo.</span><span class="sxs-lookup"><span data-stu-id="a69ae-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="a69ae-154">In questo caso, poiché il form Usa il `POST` verbo, si otterranno i valori di modulo dal `Request.Form` raccolta.</span><span class="sxs-lookup"><span data-stu-id="a69ae-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="a69ae-155">Inserire i valori come un nuovo record nel *film* tabella di database.</span><span class="sxs-lookup"><span data-stu-id="a69ae-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="a69ae-156">Nella parte superiore del file, aggiungere il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="a69ae-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="a69ae-157">Le prime righe creano variabili (`title`, `genre`, e `year`) per contenere i valori di caselle di testo.</span><span class="sxs-lookup"><span data-stu-id="a69ae-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="a69ae-158">La riga `if(IsPost)` assicura che le variabili sono impostate *solo* quando gli utenti fanno clic la **aggiungere film** pulsante, ovvero, ovvero quando il form è stato inviato.</span><span class="sxs-lookup"><span data-stu-id="a69ae-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="a69ae-159">Come illustrato in un'esercitazione precedente, è ottenere il valore di una casella di testo utilizzando un'espressione come `Request.Form["name"]`, dove *name* è il nome del `<input>` elemento.</span><span class="sxs-lookup"><span data-stu-id="a69ae-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="a69ae-160">I nomi delle variabili (`title`, `genre`, e `year`) sono arbitrari.</span><span class="sxs-lookup"><span data-stu-id="a69ae-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="a69ae-161">Ad esempio i nomi assegnati a `<input>` elementi, è possibile chiamarli liberamente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="a69ae-162">(I nomi delle variabili non devono corrispondere gli attributi name degli `<input>` elementi nel form.) Ma come con la `<input>` elementi, è consigliabile usare nomi di variabile che riflettono i dati in essi contenuti.</span><span class="sxs-lookup"><span data-stu-id="a69ae-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="a69ae-163">Quando si scrive codice, nomi coerenti rendono più semplice da ricordare i dati che si sta lavorando.</span><span class="sxs-lookup"><span data-stu-id="a69ae-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="a69ae-164">Aggiunta di dati al Database</span><span class="sxs-lookup"><span data-stu-id="a69ae-164">Adding Data to the Database</span></span>

<span data-ttu-id="a69ae-165">Nel codice di blocco è appena aggiunto, solo *all'interno* la parentesi graffa chiusa ( `}` ) del `if` blocco (non solo all'interno del blocco di codice), aggiungere il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="a69ae-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="a69ae-166">Questo esempio è simile al codice usato nell'esercitazione precedente al recupero e la visualizzazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="a69ae-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="a69ae-167">La riga che inizia con `db =` si apre il database, come in precedenza e la riga successiva definisce anche in questo caso un'istruzione SQL, come abbiamo visto prima.</span><span class="sxs-lookup"><span data-stu-id="a69ae-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="a69ae-168">Tuttavia, questa volta definisce un linguaggio SQL `Insert Into` istruzione.</span><span class="sxs-lookup"><span data-stu-id="a69ae-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="a69ae-169">L'esempio seguente illustra la sintassi generale del `Insert Into` istruzione:</span><span class="sxs-lookup"><span data-stu-id="a69ae-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="a69ae-170">In altre parole, specificare la tabella da inserire nella, quindi elencare le colonne da inserire in e quindi elencare i valori da inserire.</span><span class="sxs-lookup"><span data-stu-id="a69ae-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="a69ae-171">(Come illustrato in precedenza, SQL non distinzione maiuscole / minuscole ma alcuni utenti di sfruttare le parole chiave per renderne più semplice leggere il comando).</span><span class="sxs-lookup"><span data-stu-id="a69ae-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="a69ae-172">Le colonne che si sta inserendo in sono già elencate nel comando, ovvero `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="a69ae-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="a69ae-173">La parte interessante modo è possibile ottenere i valori di caselle di testo nel `VALUES` fa parte del comando.</span><span class="sxs-lookup"><span data-stu-id="a69ae-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="a69ae-174">Invece i valori effettivi, si vede `@0`, `@1`, e `@2`, che sono ovviamente segnaposto.</span><span class="sxs-lookup"><span data-stu-id="a69ae-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="a69ae-175">Quando si esegue il comando (nel `db.Execute` riga), i valori ottenuti di caselle di testo vengono passati.</span><span class="sxs-lookup"><span data-stu-id="a69ae-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="a69ae-176">**Importante**:</span><span class="sxs-lookup"><span data-stu-id="a69ae-176">**Important!**</span></span> <span data-ttu-id="a69ae-177">Tenere presente che l'unico modo mai includere i dati immessi in linea da un utente in un'istruzione SQL deve usare i segnaposto, come illustrato di seguito (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="a69ae-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="a69ae-178">Se si concatenare l'input dell'utente in un'istruzione SQL, ci si espone a un attacco SQL injection, come illustrato in [nozioni fondamentali sui moduli in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (esercitazione precedente).</span><span class="sxs-lookup"><span data-stu-id="a69ae-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="a69ae-179">Ancora all'interno di `if` blocco, aggiungere la riga seguente dopo il `db.Execute` riga:</span><span class="sxs-lookup"><span data-stu-id="a69ae-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="a69ae-180">Dopo l'inserimento di questo nuovo film nel database, questa riga si (reindirizzamento) passa per la *film* pagina in modo da visualizzare sul filmato appena immesso.</span><span class="sxs-lookup"><span data-stu-id="a69ae-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="a69ae-181">Il `~` operatore significa "radice del sito Web".</span><span class="sxs-lookup"><span data-stu-id="a69ae-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="a69ae-182">(Il `~` operatore funziona solo nelle pagine ASP.NET, non in formato HTML a livello generale.)</span><span class="sxs-lookup"><span data-stu-id="a69ae-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="a69ae-183">Il blocco di codice completo è simile a questo esempio:</span><span class="sxs-lookup"><span data-stu-id="a69ae-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="a69ae-184">Test di comando di inserimento (fino a questo momento)</span><span class="sxs-lookup"><span data-stu-id="a69ae-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="a69ae-185">Non abbiamo ancora finito ancora, ma questo è un buon momento per eseguire il test.</span><span class="sxs-lookup"><span data-stu-id="a69ae-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="a69ae-186">Nella visualizzazione struttura ad albero dei file in WebMatrix, fare doppio clic il *AddMovie.cshtml* e quindi fare clic su **Avvia nel browser**.</span><span class="sxs-lookup"><span data-stu-id="a69ae-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

!['Aggiungi film' pagina nel browser](entering-data/_static/image2.png)

<span data-ttu-id="a69ae-188">(Se si finisce con un'altra pagina nel browser, verificare che l'URL sia `http://localhost:nnnnn/AddMovie`), dove *nnnnn* è il numero di porta in uso.)</span><span class="sxs-lookup"><span data-stu-id="a69ae-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="a69ae-189">Si è giunti a una pagina di errore?</span><span class="sxs-lookup"><span data-stu-id="a69ae-189">Did you get an error page?</span></span> <span data-ttu-id="a69ae-190">In questo caso, leggerla con attenzione e assicurarsi che il codice ha un aspetto esattamente ciò che è stato elencato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="a69ae-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="a69ae-191">Immettere un film in formato &mdash; , ad esempio, usare "Kane cittadini", "Drammatico" e "1941".</span><span class="sxs-lookup"><span data-stu-id="a69ae-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="a69ae-192">In alternativa, qualsiasi elemento. Quindi fare clic su **film aggiungere**.</span><span class="sxs-lookup"><span data-stu-id="a69ae-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="a69ae-193">Se tutto va bene, si verrà reindirizzati per il *film* pagina.</span><span class="sxs-lookup"><span data-stu-id="a69ae-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="a69ae-194">Assicurarsi che sia elencato il nuovo film.</span><span class="sxs-lookup"><span data-stu-id="a69ae-194">Make sure that your new movie is listed.</span></span>

![Pagina Movies che visualizza appena aggiunti film](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="a69ae-196">Convalida dell'Input utente</span><span class="sxs-lookup"><span data-stu-id="a69ae-196">Validating User Input</span></span>

<span data-ttu-id="a69ae-197">Tornare al *AddMovie* pagina oppure eseguirlo nuovamente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="a69ae-198">Immettere un altro film, ma questa volta, immettere solo il titolo &mdash; , ad esempio, immettere "Casa" in the Rain".</span><span class="sxs-lookup"><span data-stu-id="a69ae-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="a69ae-199">Quindi fare clic su **film aggiungere**.</span><span class="sxs-lookup"><span data-stu-id="a69ae-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="a69ae-200">Si verrà reindirizzati per il *film* pagina nuovamente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="a69ae-201">È possibile trovare questo nuovo film, ma è incompleto.</span><span class="sxs-lookup"><span data-stu-id="a69ae-201">You can find the new movie, but it's incomplete.</span></span>

![Pagina di film con nuovo film che mancano alcuni valori](entering-data/_static/image4.png)

<span data-ttu-id="a69ae-203">Quando è stato creato il *film* tabella, in modo esplicito ha dichiarato che nessuno dei campi potrebbe essere null.</span><span class="sxs-lookup"><span data-stu-id="a69ae-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="a69ae-204">Qui è un modulo di immissione di nuovi film che si sta lasciando vuota campi.</span><span class="sxs-lookup"><span data-stu-id="a69ae-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="a69ae-205">Che è un errore.</span><span class="sxs-lookup"><span data-stu-id="a69ae-205">That's an error.</span></span>

<span data-ttu-id="a69ae-206">In questo caso, il database non è stata effettivamente generato (o *throw*) un errore.</span><span class="sxs-lookup"><span data-stu-id="a69ae-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="a69ae-207">Senza fornire un genere o un anno, pertanto, il codice nel *AddMovie* pagina considerati questi valori come cosiddette *stringhe vuote*.</span><span class="sxs-lookup"><span data-stu-id="a69ae-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="a69ae-208">Quando il codice SQL `Insert Into` comando è stato eseguito, i campi al genere e anno non sono stata utile dei dati in essi contenuti, ma non sono null.</span><span class="sxs-lookup"><span data-stu-id="a69ae-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="a69ae-209">Ovviamente, non si vuole consentire agli utenti di immettere informazioni relative al filmato metà vuoto nel database.</span><span class="sxs-lookup"><span data-stu-id="a69ae-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="a69ae-210">La soluzione consiste nel convalidare l'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="a69ae-211">Inizialmente, la convalida verrà semplicemente assicurarsi che l'utente ha immesso un valore per tutti i campi (vale a dire che nessuna di esse contiene una stringa vuota).</span><span class="sxs-lookup"><span data-stu-id="a69ae-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="a69ae-212">**Stringhe null e vuote**</span><span class="sxs-lookup"><span data-stu-id="a69ae-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="a69ae-213">Nella programmazione, vi è una differenza tra i diversi concetti di "Nessun valore".</span><span class="sxs-lookup"><span data-stu-id="a69ae-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="a69ae-214">In generale, è un valore *null* se è mai stato impostato o inizializzata in alcun modo.</span><span class="sxs-lookup"><span data-stu-id="a69ae-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="a69ae-215">Al contrario, è possibile impostare una variabile che prevede dati di tipo carattere (stringhe) un *una stringa vuota*.</span><span class="sxs-lookup"><span data-stu-id="a69ae-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="a69ae-216">In tal caso, il valore non è null. si è appena stato impostato esplicitamente su una stringa di caratteri la cui lunghezza è pari a zero.</span><span class="sxs-lookup"><span data-stu-id="a69ae-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="a69ae-217">Le due istruzioni seguenti mostrano la differenza:</span><span class="sxs-lookup"><span data-stu-id="a69ae-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="a69ae-218">È un po' più complicato rispetto a quello, ma il punto importante è che `null` rappresenta una sorta di stato indeterminato.</span><span class="sxs-lookup"><span data-stu-id="a69ae-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="a69ae-219">E quindi è importante comprendere esattamente quando un valore è null e quando è semplicemente una stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="a69ae-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="a69ae-220">Nel codice per il *AddMovie* pagina, per ottenere i valori di caselle di testo utilizzare `Request.Form["title"]` e così via.</span><span class="sxs-lookup"><span data-stu-id="a69ae-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="a69ae-221">Quando la pagina prima di tutto viene eseguita (prima di fare clic sul pulsante), il valore di `Request.Form["title"]` è null.</span><span class="sxs-lookup"><span data-stu-id="a69ae-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="a69ae-222">Ma quando si invia il modulo `Request.Form["title"]` Ottiene il valore della `title` casella di testo.</span><span class="sxs-lookup"><span data-stu-id="a69ae-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="a69ae-223">Non è ovvio, ma una casella di testo vuota non è null. è presente solo una stringa vuota in esso.</span><span class="sxs-lookup"><span data-stu-id="a69ae-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="a69ae-224">Pertanto, quando il codice viene eseguito in risposta al pulsante fare clic su, `Request.Form["title"]` contiene una stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="a69ae-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="a69ae-225">Perché questa distinzione è importante?</span><span class="sxs-lookup"><span data-stu-id="a69ae-225">Why is this distinction important?</span></span> <span data-ttu-id="a69ae-226">Quando è stato creato il *film* tabella, in modo esplicito ha dichiarato che nessuno dei campi potrebbe essere null.</span><span class="sxs-lookup"><span data-stu-id="a69ae-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="a69ae-227">Ma qui è un modulo di immissione di nuovi film che si sta lasciando vuota campi.</span><span class="sxs-lookup"><span data-stu-id="a69ae-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="a69ae-228">Ragionevolmente prevedibile il database da ricevere lamentele da parte quando si è provato a salvare di nuovo film che non dispongono di valori per genere o un anno.</span><span class="sxs-lookup"><span data-stu-id="a69ae-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="a69ae-229">Ma questo è il punto &mdash; anche se tali caselle di testo viene lasciato vuoto, i valori non null, ma sono stringhe vuote.</span><span class="sxs-lookup"><span data-stu-id="a69ae-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="a69ae-230">Di conseguenza, si è in grado di salvare nuovi film nel database con queste colonne vuote &mdash; , ma non null.</span><span class="sxs-lookup"><span data-stu-id="a69ae-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="a69ae-231">valori &mdash;.</span><span class="sxs-lookup"><span data-stu-id="a69ae-231">&mdash; values.</span></span> <span data-ttu-id="a69ae-232">Pertanto, è necessario assicurarsi che gli utenti non inviano una stringa vuota, a questo scopo, convalidando l'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>

### <a name="the-validation-helper"></a><span data-ttu-id="a69ae-233">L'Helper di convalida</span><span class="sxs-lookup"><span data-stu-id="a69ae-233">The Validation Helper</span></span>

<span data-ttu-id="a69ae-234">Pagine Web ASP.NET include un helper &mdash; il `Validation` helper &mdash; che è possibile usare per assicurarsi che gli utenti immettano i dati che soddisfano i requisiti.</span><span class="sxs-lookup"><span data-stu-id="a69ae-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="a69ae-235">Il `Validation` helper è uno degli helper che viene compilato a ASP.NET Web Pages, quindi non è necessario installarlo come un pacchetto tramite NuGet, il modo in cui è installato l'helper Gravatar in un'esercitazione precedente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="a69ae-236">Per convalidare l'input dell'utente, è possibile eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="a69ae-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="a69ae-237">Usare codice per specificare che si desidera richiedere i valori nelle caselle di testo nella pagina.</span><span class="sxs-lookup"><span data-stu-id="a69ae-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="a69ae-238">Inserisce un test nel codice in modo che le informazioni relative al filmato viene aggiunto al database solo se tutto ciò che viene convalidato correttamente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="a69ae-239">Aggiungere il codice nel markup per visualizzare i messaggi di errore.</span><span class="sxs-lookup"><span data-stu-id="a69ae-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="a69ae-240">Nel blocco di codice nel *AddMovie* pagina, verso l'alto nella parte superiore prima le dichiarazioni di variabili, aggiungere il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="a69ae-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="a69ae-241">Si chiama `Validation.RequireField` una volta per ogni campo (`<input>` elemento) in cui si desidera richiedere una voce.</span><span class="sxs-lookup"><span data-stu-id="a69ae-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="a69ae-242">È anche possibile aggiungere un messaggio di errore personalizzato per ogni chiamata, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="a69ae-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="a69ae-243">(Sono diversi per i messaggi per indicare che è possibile inserire qualsiasi presenti).</span><span class="sxs-lookup"><span data-stu-id="a69ae-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="a69ae-244">Se si è verificato un problema, si desidera evitare che le nuove informazioni di film venga inserito nel database.</span><span class="sxs-lookup"><span data-stu-id="a69ae-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="a69ae-245">Nel `if(IsPost)` blocco, usare `&&` (AND logico) per aggiungere un'altra condizione che i test `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="a69ae-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="a69ae-246">Al termine, l'intero `if(IsPost)` blocco è simile a questo codice:</span><span class="sxs-lookup"><span data-stu-id="a69ae-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="a69ae-247">Se si verifica un errore di convalida con uno qualsiasi dei campi che sono state registrate usando il `Validation` helper, il `Validation.IsValid` metodo restituisce false.</span><span class="sxs-lookup"><span data-stu-id="a69ae-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="a69ae-248">E in tal caso, nessuna parte del codice in tale blocco viene eseguito, in modo che nessuna voce film non valido verranno inserita nel database.</span><span class="sxs-lookup"><span data-stu-id="a69ae-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="a69ae-249">E naturalmente si verrà reindirizzati a non al *film* pagina.</span><span class="sxs-lookup"><span data-stu-id="a69ae-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="a69ae-250">Il blocco di codice completo, incluso il codice di convalida, è ora simile a questo esempio:</span><span class="sxs-lookup"><span data-stu-id="a69ae-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="a69ae-251">La visualizzazione degli errori di convalida</span><span class="sxs-lookup"><span data-stu-id="a69ae-251">Displaying Validation Errors</span></span>

<span data-ttu-id="a69ae-252">L'ultimo passaggio consiste nella visualizzazione eventuali messaggi di errore.</span><span class="sxs-lookup"><span data-stu-id="a69ae-252">The last step is to display any error messages.</span></span> <span data-ttu-id="a69ae-253">È possibile visualizzare i singoli messaggi per ogni errore di convalida, o è possibile visualizzare un riepilogo, o entrambi.</span><span class="sxs-lookup"><span data-stu-id="a69ae-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="a69ae-254">Per questa esercitazione, verranno eseguite entrambe in modo che è possibile verificarne il funzionamento.</span><span class="sxs-lookup"><span data-stu-id="a69ae-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="a69ae-255">Accanto a ogni `<input>` elemento che si sta eseguendo la convalida, chiamare il `Html.ValidationMessage` metodo e passa il nome del `<input>` elemento si effettua la convalida.</span><span class="sxs-lookup"><span data-stu-id="a69ae-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="a69ae-256">Inserire il `Html.ValidationMessage` destra metodo in cui si desidera che il messaggio di errore da visualizzare.</span><span class="sxs-lookup"><span data-stu-id="a69ae-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="a69ae-257">Quando si esegue la pagina, il `Html.ValidationMessage` esegue il rendering metodo un `<span>` elemento in cui verrà salvato l'errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="a69ae-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="a69ae-258">(Se non si verificano errori, il `<span>` elemento sottoposto a rendering, ma è disponibile alcun testo in essa.)</span><span class="sxs-lookup"><span data-stu-id="a69ae-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="a69ae-259">Modificare il markup della pagina in modo che includa un `Html.ValidationMessage` metodo per ognuno dei tre `<input>` gli elementi della pagina, come in questo esempio:</span><span class="sxs-lookup"><span data-stu-id="a69ae-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="a69ae-260">Per vedere come funziona il riepilogo, anche aggiungere il seguente markup e codice subito dopo il `<h1>Add a Movie</h1>` elemento nella pagina:</span><span class="sxs-lookup"><span data-stu-id="a69ae-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="a69ae-261">Per impostazione predefinita, il `Html.ValidationSummary` metodo visualizza tutti i messaggi di convalida in un elenco (una `<ul>` elemento che si trova all'interno di un `<div>` elemento).</span><span class="sxs-lookup"><span data-stu-id="a69ae-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="a69ae-262">Come con la `Html.ValidationMessage` metodo, il markup per il riepilogo di convalida viene sempre eseguito; se non sono presenti errori, nessun elemento di elenco viene visualizzato.</span><span class="sxs-lookup"><span data-stu-id="a69ae-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="a69ae-263">Il riepilogo può essere un modo alternativo per visualizzare i messaggi di convalida anziché tramite la `Html.ValidationMessage` metodo per visualizzare ogni errore specifiche del campo.</span><span class="sxs-lookup"><span data-stu-id="a69ae-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="a69ae-264">Oppure è possibile usare sia un riepilogo e i dettagli.</span><span class="sxs-lookup"><span data-stu-id="a69ae-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="a69ae-265">In alternativa è possibile usare la `Html.ValidationSummary` metodo per visualizzare un errore generico e quindi usare singoli `Html.ValidationMessage` le chiamate per visualizzare i dettagli.</span><span class="sxs-lookup"><span data-stu-id="a69ae-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="a69ae-266">Nella pagina operazione completata sarà simile all'esempio:</span><span class="sxs-lookup"><span data-stu-id="a69ae-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="a69ae-267">È tutto.</span><span class="sxs-lookup"><span data-stu-id="a69ae-267">That's it.</span></span> <span data-ttu-id="a69ae-268">È ora possibile testare la pagina per l'aggiunta di un filmato ma escludendo uno o più dei campi.</span><span class="sxs-lookup"><span data-stu-id="a69ae-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="a69ae-269">Quando esegue questa operazione, vengono visualizzati l'errore seguente:</span><span class="sxs-lookup"><span data-stu-id="a69ae-269">When you do, you see the following error display:</span></span>

![Aggiungi pagina di film che convalida i messaggi di errore](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="a69ae-271">Applicazione di stili i messaggi di errore di convalida</span><span class="sxs-lookup"><span data-stu-id="a69ae-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="a69ae-272">È possibile vedere che sono presenti messaggi di errore, ma non si distinguono in molto bene.</span><span class="sxs-lookup"><span data-stu-id="a69ae-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="a69ae-273">È un modo semplice per definire lo stile tramite messaggi di errore.</span><span class="sxs-lookup"><span data-stu-id="a69ae-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="a69ae-274">Per definire lo stile di singoli messaggi di errore che vengono visualizzati dal completamento `Html.ValidationMessage`, creare una classe di stile CSS denominata `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="a69ae-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="a69ae-275">Per definire l'aspetto per il riepilogo di convalida, creare una classe di stile CSS denominata `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="a69ae-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="a69ae-276">Per verificare il funzionamento di questa tecnica, aggiungere un `<style>` elemento all'interno di `<head>` sezione della pagina.</span><span class="sxs-lookup"><span data-stu-id="a69ae-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="a69ae-277">Quindi definire le classi di stile denominate `field-validation-error` e `validation-summary-errors` che contengono le regole seguenti:</span><span class="sxs-lookup"><span data-stu-id="a69ae-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="a69ae-278">In genere è probabile che venga inserito le informazioni di stile di visualizzazione in un oggetto separato *CSS* file, ma per semplicità è possibile posizionarli nella pagina per il momento.</span><span class="sxs-lookup"><span data-stu-id="a69ae-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="a69ae-279">(Più avanti in questa serie di esercitazioni, si sposterà le regole CSS per un oggetto separato *CSS* file.)</span><span class="sxs-lookup"><span data-stu-id="a69ae-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="a69ae-280">Se è presente un errore di convalida, il `Html.ValidationMessage` metodo esegue il rendering di un `<span>` elemento che include `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="a69ae-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="a69ae-281">Aggiungendo una definizione di stile per tale classe, è possibile configurare come appare il messaggio.</span><span class="sxs-lookup"><span data-stu-id="a69ae-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="a69ae-282">Se sono presenti errori, il `ValidationSummary` metodo allo stesso modo in modo dinamico viene eseguito il rendering dell'attributo `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="a69ae-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="a69ae-283">Eseguire nuovamente la pagina e deliberatamente tralasciare un paio di campi.</span><span class="sxs-lookup"><span data-stu-id="a69ae-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="a69ae-284">Gli errori sono più evidenti.</span><span class="sxs-lookup"><span data-stu-id="a69ae-284">The errors are now more noticeable.</span></span> <span data-ttu-id="a69ae-285">(In effetti, si sta overdone, ma che è importante per mostrare operazioni possibili).</span><span class="sxs-lookup"><span data-stu-id="a69ae-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Aggiungi pagina film che mostri gli errori di convalida che sono stati ora uno stile](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="a69ae-287">Aggiunta di un collegamento alla pagina Movies</span><span class="sxs-lookup"><span data-stu-id="a69ae-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="a69ae-288">Un passaggio finale consiste nel rendere più pratico ottenere il *AddMovie* pagina nell'elenco di film originale.</span><span class="sxs-lookup"><span data-stu-id="a69ae-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="a69ae-289">Aprire il *film* pagina nuovamente.</span><span class="sxs-lookup"><span data-stu-id="a69ae-289">Open the *Movies* page again.</span></span> <span data-ttu-id="a69ae-290">Dopo il tag di chiusura `</div>` tag che segue il `WebGrid` helper, aggiungere il markup seguente:</span><span class="sxs-lookup"><span data-stu-id="a69ae-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="a69ae-291">Come illustrato prima, ASP.NET interpreta il `~` operatore come radice del sito Web.</span><span class="sxs-lookup"><span data-stu-id="a69ae-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="a69ae-292">Non è necessario usare il `~` operatore; è possibile usare il markup `<a href="./AddMovie">Add a movie</a>` o in altro modo per definire il percorso che riconosce HTML.</span><span class="sxs-lookup"><span data-stu-id="a69ae-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="a69ae-293">Ma il `~` operatore è un buon approccio generale quando si creano collegamenti per le pagine Razor, perché rende più flessibile il sito, ovvero se si sposta la pagina corrente in una sottocartella, il collegamento verrà comunque inviata al *AddMovie* pagina.</span><span class="sxs-lookup"><span data-stu-id="a69ae-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="a69ae-294">(Tenere presente che il `~` operatore funziona solo negli *cshtml* pagine.</span><span class="sxs-lookup"><span data-stu-id="a69ae-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="a69ae-295">La riconosce e ASP.NET, ma non è codice HTML standard.)</span><span class="sxs-lookup"><span data-stu-id="a69ae-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="a69ae-296">Al termine, eseguire la *film* pagina.</span><span class="sxs-lookup"><span data-stu-id="a69ae-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="a69ae-297">Sarà simile a questa pagina:</span><span class="sxs-lookup"><span data-stu-id="a69ae-297">It will look like this page:</span></span>

![Pagina di film con collegamento alla pagina 'Aggiungere film'](entering-data/_static/image7.png)

<span data-ttu-id="a69ae-299">Fare clic sui **aggiunta di un filmato** collegamento per assicurarsi che consenta di accedere al *AddMovie* pagina.</span><span class="sxs-lookup"><span data-stu-id="a69ae-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="a69ae-300">In arrivo</span><span class="sxs-lookup"><span data-stu-id="a69ae-300">Coming Up Next</span></span>

<span data-ttu-id="a69ae-301">Nella prossima esercitazione, verrà illustrato come consentire agli utenti di modificare i dati che si trova già nel database.</span><span class="sxs-lookup"><span data-stu-id="a69ae-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="a69ae-302">Elenco completo per la pagina AddMovie</span><span class="sxs-lookup"><span data-stu-id="a69ae-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="a69ae-303">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="a69ae-303">Additional Resources</span></span>

- [<span data-ttu-id="a69ae-304">Introduzione alla programmazione Web ASP.NET usando la sintassi Razor</span><span class="sxs-lookup"><span data-stu-id="a69ae-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="a69ae-305">[Istruzione SQL INSERT INTO](http://www.w3schools.com/sql/sql_insert.asp) sul sito W3Schools</span><span class="sxs-lookup"><span data-stu-id="a69ae-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="a69ae-306">[Convalida dell'Input utente in ASP.NET Web in siti con pagine](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="a69ae-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="a69ae-307">Altre informazioni sull'utilizzo di `Validation` helper.</span><span class="sxs-lookup"><span data-stu-id="a69ae-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a69ae-308">[Precedente](form-basics.md)
> [Successivo](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="a69ae-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>
