---
uid: web-pages/overview/ui-layouts-and-themes/4-working-with-forms
title: Uso dei moduli HTML nei siti Pagine Web ASP.NET (Razor) | Microsoft Docs
author: Rick-Anderson
description: Un modulo è una sezione di un documento HTML in cui è possibile inserire controlli di input utente, ad esempio caselle di testo, caselle di controllo, pulsanti di opzione ed elenchi a discesa. Si usano i moduli WH...
ms.author: riande
ms.date: 02/10/2014
ms.assetid: f3f4b8c8-e8f6-4474-ad94-69228a6c01ee
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/4-working-with-forms
msc.type: authoredcontent
ms.openlocfilehash: c7d4802063c8610a246afe67bd15eea429f7304a
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78639706"
---
# <a name="working-with-html-forms-in-aspnet-web-pages-razor-sites"></a><span data-ttu-id="70101-104">Uso dei moduli HTML nei siti Pagine Web ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="70101-104">Working with HTML Forms in ASP.NET Web Pages (Razor) Sites</span></span>

<span data-ttu-id="70101-105">di [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="70101-105">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="70101-106">Questo articolo descrive come elaborare un form HTML (con caselle di testo e pulsanti) quando si lavora in un sito Web Pagine Web ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="70101-106">This article describes how to process an HTML form (with text boxes and buttons) when you are working in an ASP.NET Web Pages (Razor) website.</span></span>
> 
> <span data-ttu-id="70101-107">**Cosa si apprenderà:**</span><span class="sxs-lookup"><span data-stu-id="70101-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="70101-108">Come creare un form HTML.</span><span class="sxs-lookup"><span data-stu-id="70101-108">How to create an HTML form.</span></span>
> - <span data-ttu-id="70101-109">Come leggere l'input dell'utente dal modulo.</span><span class="sxs-lookup"><span data-stu-id="70101-109">How to read user input from the form.</span></span>
> - <span data-ttu-id="70101-110">Come convalidare l'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="70101-110">How to validate user input.</span></span>
> - <span data-ttu-id="70101-111">Come ripristinare i valori del modulo dopo l'invio della pagina.</span><span class="sxs-lookup"><span data-stu-id="70101-111">How to restore form values after the page is submitted.</span></span>
> 
> <span data-ttu-id="70101-112">Questi sono i concetti di programmazione di ASP.NET introdotti nell'articolo:</span><span class="sxs-lookup"><span data-stu-id="70101-112">These are the ASP.NET programming concepts introduced in the article:</span></span>
> 
> - <span data-ttu-id="70101-113">Oggetto `Request`.</span><span class="sxs-lookup"><span data-stu-id="70101-113">The `Request` object.</span></span>
> - <span data-ttu-id="70101-114">Convalida dell'input.</span><span class="sxs-lookup"><span data-stu-id="70101-114">Input validation.</span></span>
> - <span data-ttu-id="70101-115">Codifica HTML.</span><span class="sxs-lookup"><span data-stu-id="70101-115">HTML encoding.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="70101-116">Versioni del software usate nell'esercitazione</span><span class="sxs-lookup"><span data-stu-id="70101-116">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="70101-117">Pagine Web ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="70101-117">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="70101-118">Questa esercitazione funziona anche con Pagine Web ASP.NET 2.</span><span class="sxs-lookup"><span data-stu-id="70101-118">This tutorial also works with ASP.NET Web Pages 2.</span></span>

## <a name="creating-a-simple-html-form"></a><span data-ttu-id="70101-119">Creazione di un form HTML semplice</span><span class="sxs-lookup"><span data-stu-id="70101-119">Creating a Simple HTML Form</span></span>

1. <span data-ttu-id="70101-120">Creare un nuovo sito Web.</span><span class="sxs-lookup"><span data-stu-id="70101-120">Create a new website.</span></span>
2. <span data-ttu-id="70101-121">Nella cartella radice creare una pagina Web denominata *form. cshtml* e immettere il markup seguente:</span><span class="sxs-lookup"><span data-stu-id="70101-121">In the root folder, create a web page named *Form.cshtml* and enter the following markup:</span></span>

    [!code-html[Main](4-working-with-forms/samples/sample1.html)]
3. <span data-ttu-id="70101-122">Avviare la pagina nel browser.</span><span class="sxs-lookup"><span data-stu-id="70101-122">Launch the page in your browser.</span></span> <span data-ttu-id="70101-123">In WebMatrix, nell'area di lavoro **file** , fare clic con il pulsante destro del mouse sul file e scegliere **Avvia nel browser**. Viene visualizzato un form semplice con tre campi di input e un pulsante **Submit** .</span><span class="sxs-lookup"><span data-stu-id="70101-123">(In WebMatrix, in the **Files** workspace, right-click the file and then select **Launch in browser**.) A simple form with three input fields and a **Submit** button is displayed.</span></span>

    ![Screenshot di un modulo con tre caselle di testo.](4-working-with-forms/_static/image1.png)

    <span data-ttu-id="70101-125">A questo punto, se si fa clic sul pulsante **Submit (Invia** ), non viene eseguita alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="70101-125">At this point, if you click the **Submit** button, nothing happens.</span></span> <span data-ttu-id="70101-126">Per rendere il modulo utile, è necessario aggiungere il codice che viene eseguito nel server.</span><span class="sxs-lookup"><span data-stu-id="70101-126">To make the form useful, you have to add some code that will run on the server.</span></span>

## <a name="reading-user-input-from-the-form"></a><span data-ttu-id="70101-127">Lettura dell'input utente dal modulo</span><span class="sxs-lookup"><span data-stu-id="70101-127">Reading User Input from the Form</span></span>

<span data-ttu-id="70101-128">Per elaborare il form, è necessario aggiungere il codice che legge i valori dei campi inviati ed esegue un'operazione con essi.</span><span class="sxs-lookup"><span data-stu-id="70101-128">To process the form, you add code that reads the submitted field values and does something with them.</span></span> <span data-ttu-id="70101-129">Questa procedura illustra come leggere i campi e visualizzare l'input dell'utente nella pagina.</span><span class="sxs-lookup"><span data-stu-id="70101-129">This procedure shows you how to read the fields and display the user input on the page.</span></span> <span data-ttu-id="70101-130">In un'applicazione di produzione, in genere si eseguono operazioni più interessanti con l'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="70101-130">(In a production application, you generally do more interesting things with user input.</span></span> <span data-ttu-id="70101-131">Questa operazione verrà eseguita nell'articolo sull'utilizzo dei database.</span><span class="sxs-lookup"><span data-stu-id="70101-131">You'll do that in the article about working with databases.)</span></span>

1. <span data-ttu-id="70101-132">Nella parte superiore del file *form. cshtml* immettere il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="70101-132">At the top of the *Form.cshtml* file, enter the following code:</span></span>

    [!code-cshtml[Main](4-working-with-forms/samples/sample2.cshtml)]

    <span data-ttu-id="70101-133">Quando l'utente richiede per la prima volta la pagina, viene visualizzato solo il modulo vuoto.</span><span class="sxs-lookup"><span data-stu-id="70101-133">When the user first requests the page, only the empty form is displayed.</span></span> <span data-ttu-id="70101-134">L'utente (che corrisponde a) compila il modulo e quindi fa clic su **Submit (Invia**).</span><span class="sxs-lookup"><span data-stu-id="70101-134">The user (which will be you) fills in the form and then clicks **Submit**.</span></span> <span data-ttu-id="70101-135">In questo modo viene inviato (post) l'input dell'utente al server.</span><span class="sxs-lookup"><span data-stu-id="70101-135">This submits (posts) the user input to the server.</span></span> <span data-ttu-id="70101-136">Per impostazione predefinita, la richiesta passa alla stessa pagina (vale a dire, *form. cshtml*).</span><span class="sxs-lookup"><span data-stu-id="70101-136">By default, the request goes to the same page (namely, *Form.cshtml*).</span></span>

    <span data-ttu-id="70101-137">Quando si invia la pagina questa volta, i valori immessi vengono visualizzati appena sopra il modulo:</span><span class="sxs-lookup"><span data-stu-id="70101-137">When you submit the page this time, the values you entered are displayed just above the form:</span></span>

    ![Screenshot che mostra i valori immessi visualizzati nella pagina.](4-working-with-forms/_static/image2.png)

    <span data-ttu-id="70101-139">Esaminare il codice per la pagina.</span><span class="sxs-lookup"><span data-stu-id="70101-139">Look at the code for the page.</span></span> <span data-ttu-id="70101-140">Usare prima di tutto il metodo `IsPost` per determinare se la pagina viene pubblicata &#8212; , ovvero se un utente ha fatto clic sul pulsante **Submit (Invia** ).</span><span class="sxs-lookup"><span data-stu-id="70101-140">You first use the `IsPost` method to determine whether the page is being posted &#8212; that is, whether a user clicked the **Submit** button.</span></span> <span data-ttu-id="70101-141">Se si tratta di un post, `IsPost` restituisce true.</span><span class="sxs-lookup"><span data-stu-id="70101-141">If this is a post, `IsPost` returns true.</span></span> <span data-ttu-id="70101-142">Questo è il modo standard in Pagine Web ASP.NET per determinare se si sta lavorando con una richiesta iniziale (una richiesta GET) o un postback (richiesta POST).</span><span class="sxs-lookup"><span data-stu-id="70101-142">This is the standard way in ASP.NET Web Pages to determine whether you're working with an initial request (a GET request) or a postback (a POST request).</span></span> <span data-ttu-id="70101-143">Per ulteriori informazioni su GET e POST, vedere l'intestazione laterale "HTTP GET e POST e la proprietà nopost" in [Introduzione alla programmazione pagine Web ASP.NET utilizzando la sintassi Razor](https://go.microsoft.com/fwlink/?LinkId=202890#SB_HttpGetPost).</span><span class="sxs-lookup"><span data-stu-id="70101-143">(For more information about GET and POST, see the sidebar "HTTP GET and POST and the IsPost Property" in [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#SB_HttpGetPost).)</span></span>

    <span data-ttu-id="70101-144">A questo punto, si ottengono i valori che l'utente ha compilato dall'oggetto `Request.Form` e li si inserisce nelle variabili per un momento successivo.</span><span class="sxs-lookup"><span data-stu-id="70101-144">Next, you get the values that the user filled in from the `Request.Form` object, and you put them in variables for later.</span></span> <span data-ttu-id="70101-145">L'oggetto `Request.Form` contiene tutti i valori che sono stati inviati con la pagina, ciascuno identificato da una chiave.</span><span class="sxs-lookup"><span data-stu-id="70101-145">The `Request.Form` object contains all the values that were submitted with the page, each identified by a key.</span></span> <span data-ttu-id="70101-146">La chiave equivale all'attributo `name` del campo del modulo che si desidera leggere.</span><span class="sxs-lookup"><span data-stu-id="70101-146">The key is the equivalent to the `name` attribute of the form field that you want to read.</span></span> <span data-ttu-id="70101-147">Ad esempio, per leggere il campo `companyname` (casella di testo), è possibile usare `Request.Form["companyname"]`.</span><span class="sxs-lookup"><span data-stu-id="70101-147">For example, to read the `companyname` field (text box), you use `Request.Form["companyname"]`.</span></span>

    <span data-ttu-id="70101-148">I valori dei moduli vengono archiviati nell'oggetto `Request.Form` come stringhe.</span><span class="sxs-lookup"><span data-stu-id="70101-148">Form values are stored in the `Request.Form` object as strings.</span></span> <span data-ttu-id="70101-149">Pertanto, quando è necessario utilizzare un valore come un numero o una data o un altro tipo, è necessario convertirlo da una stringa a tale tipo.</span><span class="sxs-lookup"><span data-stu-id="70101-149">Therefore, when you have to work with a value as a number or a date or some other type, you have to convert it from a string to that type.</span></span> <span data-ttu-id="70101-150">Nell'esempio viene usato il metodo `AsInt` della `Request.Form` per convertire il valore del campo Employees (che contiene un numero Employee) in un valore integer.</span><span class="sxs-lookup"><span data-stu-id="70101-150">In the example, the `AsInt` method of the `Request.Form` is used to convert the value of the employees field (which contains an employee count) to an integer.</span></span>
2. <span data-ttu-id="70101-151">Avviare la pagina nel browser, compilare i campi del modulo e fare clic su **Submit (Invia**).</span><span class="sxs-lookup"><span data-stu-id="70101-151">Launch the page in your browser, fill in the form fields, and click **Submit**.</span></span> <span data-ttu-id="70101-152">Nella pagina vengono visualizzati i valori immessi.</span><span class="sxs-lookup"><span data-stu-id="70101-152">The page displays the values you entered.</span></span>

> [!TIP] 
> 
> <a id="SB_HTMLEncoding"></a>
> ### <a name="html-encoding-for-appearance-and-security"></a><span data-ttu-id="70101-153">Codifica HTML per aspetto e sicurezza</span><span class="sxs-lookup"><span data-stu-id="70101-153">HTML Encoding for Appearance and Security</span></span>
> 
> <span data-ttu-id="70101-154">Il codice HTML ha usi speciali per i caratteri come `<`, `>`e `&`.</span><span class="sxs-lookup"><span data-stu-id="70101-154">HTML has special uses for characters like `<`, `>`, and `&`.</span></span> <span data-ttu-id="70101-155">Se questi caratteri speciali vengono visualizzati quando non sono previsti, possono rovinare l'aspetto e la funzionalità della pagina Web.</span><span class="sxs-lookup"><span data-stu-id="70101-155">If these special characters appear where they're not expected, they can ruin the appearance and functionality of your web page.</span></span> <span data-ttu-id="70101-156">Ad esempio, il browser interpreta il carattere `<` (a meno che non sia seguito da uno spazio) come inizio di un elemento HTML, ad esempio `<b>` o `<input ...>`.</span><span class="sxs-lookup"><span data-stu-id="70101-156">For example, the browser interprets the `<` character (unless it's followed by a space) as the beginning of an HTML element, like `<b>` or `<input ...>`.</span></span> <span data-ttu-id="70101-157">Se il browser non riconosce l'elemento, viene semplicemente eliminata la stringa che inizia con `<` fino a quando non viene raggiunta una nuova funzionalità riconosciuta.</span><span class="sxs-lookup"><span data-stu-id="70101-157">If the browser doesn't recognize the element, it simply discards the string that begins with `<` until it reaches something that it again recognizes.</span></span> <span data-ttu-id="70101-158">Ovviamente, questo può causare un rendering strano nella pagina.</span><span class="sxs-lookup"><span data-stu-id="70101-158">Obviously, this can result in some weird rendering in the page.</span></span>
> 
> <span data-ttu-id="70101-159">La codifica HTML sostituisce questi caratteri riservati con un codice che i browser interpretano come il simbolo corretto.</span><span class="sxs-lookup"><span data-stu-id="70101-159">HTML encoding replaces these reserved characters with a code that browsers interpret as the correct symbol.</span></span> <span data-ttu-id="70101-160">Ad esempio, il carattere `<` viene sostituito con `&lt;` e il carattere di `>` viene sostituito con `&gt;`.</span><span class="sxs-lookup"><span data-stu-id="70101-160">For example, the `<` character is replaced with `&lt;` and the `>` character is replaced with `&gt;`.</span></span> <span data-ttu-id="70101-161">Il browser esegue il rendering di queste stringhe di sostituzione come i caratteri che si desidera visualizzare.</span><span class="sxs-lookup"><span data-stu-id="70101-161">The browser renders these replacement strings as the characters that you want to see.</span></span>
> 
> <span data-ttu-id="70101-162">È consigliabile usare la codifica HTML ogni volta che vengono visualizzate stringhe (input) ottenute da un utente.</span><span class="sxs-lookup"><span data-stu-id="70101-162">It's a good idea to use HTML encoding any time you display strings (input) that you got from a user.</span></span> <span data-ttu-id="70101-163">In caso contrario, un utente può tentare di ottenere una pagina Web per eseguire uno script dannoso o eseguire un'altra operazione che compromette la sicurezza del sito o che non è quello che si desidera.</span><span class="sxs-lookup"><span data-stu-id="70101-163">If you don't, a user can try to get your web page to run a malicious script or do something else that compromises your site security or that's just not what you intend.</span></span> <span data-ttu-id="70101-164">Questo aspetto è particolarmente importante se si prende l'input dell'utente, lo si archivia in un punto e &#8212; quindi lo si visualizza in un secondo momento, ad esempio come commento del Blog, revisione utente o qualcosa di simile.</span><span class="sxs-lookup"><span data-stu-id="70101-164">(This is particularly important if you take user input, store it someplace, and then display it later &#8212; for example, as a blog comment, user review, or something like that.)</span></span>
> 
> <span data-ttu-id="70101-165">Per evitare questi problemi, Pagine Web ASP.NET codifica automaticamente in HTML tutti i contenuti di testo restituiti dal codice.</span><span class="sxs-lookup"><span data-stu-id="70101-165">To help prevent these problems, ASP.NET Web Pages automatically HTML-encodes any text content that you output from your code.</span></span> <span data-ttu-id="70101-166">Ad esempio, quando si Visualizza il contenuto di una variabile o di un'espressione che usa codice come `@MyVar`, Pagine Web ASP.NET codifica automaticamente l'output.</span><span class="sxs-lookup"><span data-stu-id="70101-166">For example, when you display the content of a variable or an expression using code such as `@MyVar`, ASP.NET Web Pages automatically encodes the output.</span></span>

## <a name="validating-user-input"></a><span data-ttu-id="70101-167">Convalida dell'input utente</span><span class="sxs-lookup"><span data-stu-id="70101-167">Validating User Input</span></span>

<span data-ttu-id="70101-168">Gli utenti commettono errori.</span><span class="sxs-lookup"><span data-stu-id="70101-168">Users make mistakes.</span></span> <span data-ttu-id="70101-169">Chiedere loro di compilare un campo e dimenticarlo, oppure di immettere il numero di dipendenti e digitare invece un nome.</span><span class="sxs-lookup"><span data-stu-id="70101-169">You ask them to fill in a field, and they forget to, or you ask them to enter the number of employees and they type a name instead.</span></span> <span data-ttu-id="70101-170">Per assicurarsi che un modulo sia stato compilato correttamente prima di elaborarlo, è necessario convalidare l'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="70101-170">To make sure that a form has been filled in correctly before you process it, you validate the user's input.</span></span>

<span data-ttu-id="70101-171">Questa procedura illustra come convalidare tutti e tre i campi del modulo per assicurarsi che l'utente non li lasci vuoti.</span><span class="sxs-lookup"><span data-stu-id="70101-171">This procedure shows how to validate all three form fields to make sure the user didn't leave them blank.</span></span> <span data-ttu-id="70101-172">Si verifica inoltre che il valore del conteggio dei dipendenti sia un numero.</span><span class="sxs-lookup"><span data-stu-id="70101-172">You also check that the employee count value is a number.</span></span> <span data-ttu-id="70101-173">Se si verificano errori, verrà visualizzato un messaggio di errore che indica all'utente i valori che non hanno superato la convalida.</span><span class="sxs-lookup"><span data-stu-id="70101-173">If there are errors, you'll display an error message that tells the user what values didn't pass validation.</span></span>

1. <span data-ttu-id="70101-174">Nel file *form. cshtml* sostituire il primo blocco di codice con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="70101-174">In the *Form.cshtml* file, replace the first block of code with the following code:</span></span> 

    [!code-cshtml[Main](4-working-with-forms/samples/sample3.cshtml)]

    <span data-ttu-id="70101-175">Per convalidare l'input dell'utente, usare l'helper `Validation`.</span><span class="sxs-lookup"><span data-stu-id="70101-175">To validate user input, you use the `Validation` helper.</span></span> <span data-ttu-id="70101-176">Per registrare i campi necessari, chiamare `Validation.RequireField`.</span><span class="sxs-lookup"><span data-stu-id="70101-176">You register required fields by calling `Validation.RequireField`.</span></span> <span data-ttu-id="70101-177">Si registrano altri tipi di convalida chiamando `Validation.Add` e specificando il campo da convalidare e il tipo di convalida da eseguire.</span><span class="sxs-lookup"><span data-stu-id="70101-177">You register other types of validation by calling `Validation.Add` and specifying the field to validate and the type of validation to perform.</span></span>

    <span data-ttu-id="70101-178">Quando viene eseguita la pagina, ASP.NET esegue tutte le operazioni di convalida.</span><span class="sxs-lookup"><span data-stu-id="70101-178">When the page runs, ASP.NET does all the validation for you.</span></span> <span data-ttu-id="70101-179">È possibile controllare i risultati chiamando `Validation.IsValid`, che restituisce true se tutti gli elementi sono stati superati e false se non è stato possibile convalidare alcun campo.</span><span class="sxs-lookup"><span data-stu-id="70101-179">You can check the results by calling `Validation.IsValid`, which returns true if everything passed and false if any field failed validation.</span></span> <span data-ttu-id="70101-180">In genere, è possibile chiamare `Validation.IsValid` prima di eseguire qualsiasi elaborazione sull'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="70101-180">Typically, you call `Validation.IsValid` before you perform any processing on the user input.</span></span>
2. <span data-ttu-id="70101-181">Aggiornare l'elemento `<body>` aggiungendo tre chiamate al metodo `Html.ValidationMessage`, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="70101-181">Update the `<body>` element by adding three calls to the `Html.ValidationMessage` method, like this:</span></span>

    [!code-cshtml[Main](4-working-with-forms/samples/sample4.cshtml?highlight=8,13,18)]

    <span data-ttu-id="70101-182">Per visualizzare i messaggi di errore di convalida, è possibile chiamare HTML.`ValidationMessage`</span><span class="sxs-lookup"><span data-stu-id="70101-182">To display validation error messages, you can call Html.`ValidationMessage`</span></span> <span data-ttu-id="70101-183">e passargli il nome del campo per il quale si desidera il messaggio.</span><span class="sxs-lookup"><span data-stu-id="70101-183">and pass it the name of the field that you want the message for.</span></span>
3. <span data-ttu-id="70101-184">Eseguire la pagina.</span><span class="sxs-lookup"><span data-stu-id="70101-184">Run the page.</span></span> <span data-ttu-id="70101-185">Lasciare vuoti i campi e fare clic su **Invia**.</span><span class="sxs-lookup"><span data-stu-id="70101-185">Leave the fields blank and click **Submit**.</span></span> <span data-ttu-id="70101-186">Vengono visualizzati messaggi di errore.</span><span class="sxs-lookup"><span data-stu-id="70101-186">You see error messages.</span></span>

    ![Screenshot che mostra i messaggi di errore visualizzati se l'input dell'utente non supera la convalida.](4-working-with-forms/_static/image3.jpg)
4. <span data-ttu-id="70101-188">Aggiungere una stringa, ad esempio "ABC", al campo **conteggio dipendenti** e fare di nuovo clic su **Invia** .</span><span class="sxs-lookup"><span data-stu-id="70101-188">Add a string (for example, "ABC") to the **Employee Count** field and click **Submit** again.</span></span> <span data-ttu-id="70101-189">Questa volta viene visualizzato un errore che indica che la stringa non è nel formato corretto, ovvero un numero intero.</span><span class="sxs-lookup"><span data-stu-id="70101-189">This time you see an error that indicates that the string isn't in the right format, namely, an integer.</span></span>

    ![Screenshot che mostra i messaggi di errore visualizzati se gli utenti immettono una stringa per il campo Employees.](4-working-with-forms/_static/image4.jpg)

<span data-ttu-id="70101-191">Pagine Web ASP.NET offre più opzioni per la convalida dell'input dell'utente, inclusa la possibilità di eseguire automaticamente la convalida usando uno script client, in modo che gli utenti ottengano feedback immediato nel browser.</span><span class="sxs-lookup"><span data-stu-id="70101-191">ASP.NET Web Pages provides more options for validating user input, including the ability to automatically perform validation using client script, so that users get immediate feedback in the browser.</span></span> <span data-ttu-id="70101-192">Per ulteriori informazioni, vedere la sezione [risorse aggiuntive](#Additional_Resources) in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="70101-192">See the [Additional Resources](#Additional_Resources) section later for more information.</span></span>

## <a name="restoring-form-values-after-postbacks"></a><span data-ttu-id="70101-193">Ripristino dei valori del modulo dopo i postback</span><span class="sxs-lookup"><span data-stu-id="70101-193">Restoring Form Values After Postbacks</span></span>

<span data-ttu-id="70101-194">Quando la pagina è stata testata nella sezione precedente, si potrebbe notare che se si è verificato un errore di convalida, tutto ciò che è stato immesso (non solo i dati non validi) era scomparso ed era necessario immettere di nuovo i valori per tutti i campi.</span><span class="sxs-lookup"><span data-stu-id="70101-194">When you tested the page in the previous section, you might have noticed that if you had a validation error, everything you entered (not just the invalid data) was gone, and you had to re-enter values for all the fields.</span></span> <span data-ttu-id="70101-195">Viene illustrato un punto importante: quando si invia una pagina, la si elabora e quindi si esegue nuovamente il rendering della pagina, la pagina viene ricreata da zero.</span><span class="sxs-lookup"><span data-stu-id="70101-195">This illustrates an important point: when you submit a page, process it, and then render the page again, the page is re-created from scratch.</span></span> <span data-ttu-id="70101-196">Come si è visto, ciò significa che tutti i valori presenti nella pagina al momento dell'invio vengono persi.</span><span class="sxs-lookup"><span data-stu-id="70101-196">As you saw, this means that any values that were in the page when it was submitted are lost.</span></span>

<span data-ttu-id="70101-197">Tuttavia, è possibile risolvere questo problema in modo semplice.</span><span class="sxs-lookup"><span data-stu-id="70101-197">You can fix this easily, however.</span></span> <span data-ttu-id="70101-198">È possibile accedere ai valori inviati (nell'oggetto `Request.Form`, in modo da poterli inserire di nuovo nei campi del form quando viene eseguito il rendering della pagina.</span><span class="sxs-lookup"><span data-stu-id="70101-198">You have access to the values that were submitted (in the `Request.Form` object, so you can fill those values back into the form fields when the page is rendered.</span></span>

1. <span data-ttu-id="70101-199">Nel file *form. cshtml* sostituire gli attributi `value` degli elementi `<input>` utilizzando l'attributo `value`:</span><span class="sxs-lookup"><span data-stu-id="70101-199">In the *Form.cshtml* file, replace the `value` attributes of the `<input>` elements using the `value` attribute.:</span></span> 

    [!code-cshtml[Main](4-working-with-forms/samples/sample5.cshtml?highlight=13,19,25)]

    <span data-ttu-id="70101-200">L'attributo `value` degli elementi `<input>` è stato impostato per leggere in modo dinamico il valore del campo dall'oggetto `Request.Form`.</span><span class="sxs-lookup"><span data-stu-id="70101-200">The `value` attribute of the `<input>` elements has been set to dynamically read the field value out of the `Request.Form` object.</span></span> <span data-ttu-id="70101-201">La prima volta che la pagina viene richiesta, i valori nell'oggetto `Request.Form` sono tutti vuoti.</span><span class="sxs-lookup"><span data-stu-id="70101-201">The first time that the page is requested, the values in the `Request.Form` object are all empty.</span></span> <span data-ttu-id="70101-202">Questa operazione è corretta, perché in questo modo il form è vuoto.</span><span class="sxs-lookup"><span data-stu-id="70101-202">This is fine, because that way the form is blank.</span></span>
2. <span data-ttu-id="70101-203">Avviare la pagina nel browser, compilare i campi del modulo o lasciarli vuoti e fare clic su **Submit (Invia**).</span><span class="sxs-lookup"><span data-stu-id="70101-203">Launch the page in your browser, fill in the form fields or leave them blank, and click **Submit**.</span></span> <span data-ttu-id="70101-204">Viene visualizzata una pagina che mostra i valori inviati.</span><span class="sxs-lookup"><span data-stu-id="70101-204">A page that shows the submitted values is displayed.</span></span>

    ![forms-5](4-working-with-forms/_static/image5.jpg)

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="70101-206">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="70101-206">Additional Resources</span></span>

- [<span data-ttu-id="70101-207">1.001 modi per ottenere input da utenti Web</span><span class="sxs-lookup"><span data-stu-id="70101-207">1,001 Ways to Get Input from Web Users</span></span>](https://msdn.microsoft.com/library/ms971057.aspx)
- <span data-ttu-id="70101-208">[Uso di moduli ed elaborazione dell'input utente](https://msdn.microsoft.com/library/ms525182(VS.90).aspx)</span><span class="sxs-lookup"><span data-stu-id="70101-208">[Using Forms and Processing User Input](https://msdn.microsoft.com/library/ms525182(VS.90).aspx)</span></span>
- [<span data-ttu-id="70101-209">Convalida dell'input utente nelle pagine Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="70101-209">Validating User Input in ASP.NET Web Pages Sites</span></span>](https://go.microsoft.com/fwlink/?LinkId=253002)
- <span data-ttu-id="70101-210">[Uso del completamento automatico nei moduli HTML](https://msdn.microsoft.com/library/ms533032(VS.85).aspx)</span><span class="sxs-lookup"><span data-stu-id="70101-210">[Using AutoComplete in HTML Forms](https://msdn.microsoft.com/library/ms533032(VS.85).aspx)</span></span>
